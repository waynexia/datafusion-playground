(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function i(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerpolicy&&(o.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?o.credentials="include":n.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(n){if(n.ep)return;n.ep=!0;const o=i(n);fetch(n.href,o)}})();function e1(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var fl={},t1={get exports(){return fl},set exports(e){fl=e}},fa={},ms={},i1={get exports(){return ms},set exports(e){ms=e}},Te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var El=Symbol.for("react.element"),r1=Symbol.for("react.portal"),n1=Symbol.for("react.fragment"),o1=Symbol.for("react.strict_mode"),s1=Symbol.for("react.profiler"),l1=Symbol.for("react.provider"),c1=Symbol.for("react.context"),a1=Symbol.for("react.forward_ref"),u1=Symbol.for("react.suspense"),h1=Symbol.for("react.memo"),d1=Symbol.for("react.lazy"),ff=Symbol.iterator;function f1(e){return e===null||typeof e!="object"?null:(e=ff&&e[ff]||e["@@iterator"],typeof e=="function"?e:null)}var ym={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},vm=Object.assign,_m={};function Cs(e,t,i){this.props=e,this.context=t,this.refs=_m,this.updater=i||ym}Cs.prototype.isReactComponent={};Cs.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Cs.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function gm(){}gm.prototype=Cs.prototype;function kh(e,t,i){this.props=e,this.context=t,this.refs=_m,this.updater=i||ym}var xh=kh.prototype=new gm;xh.constructor=kh;vm(xh,Cs.prototype);xh.isPureReactComponent=!0;var pf=Array.isArray,Zm=Object.prototype.hasOwnProperty,Kh={current:null},Sm={key:!0,ref:!0,__self:!0,__source:!0};function bm(e,t,i){var r,n={},o=null,s=null;if(t!=null)for(r in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(o=""+t.key),t)Zm.call(t,r)&&!Sm.hasOwnProperty(r)&&(n[r]=t[r]);var u=arguments.length-2;if(u===1)n.children=i;else if(1<u){for(var l=Array(u),a=0;a<u;a++)l[a]=arguments[a+2];n.children=l}if(e&&e.defaultProps)for(r in u=e.defaultProps,u)n[r]===void 0&&(n[r]=u[r]);return{$$typeof:El,type:e,key:o,ref:s,props:n,_owner:Kh.current}}function p1(e,t){return{$$typeof:El,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Mh(e){return typeof e=="object"&&e!==null&&e.$$typeof===El}function m1(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(i){return t[i]})}var mf=/\/+/g;function Ja(e,t){return typeof e=="object"&&e!==null&&e.key!=null?m1(""+e.key):t.toString(36)}function yc(e,t,i,r,n){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case El:case r1:s=!0}}if(s)return s=e,n=n(s),e=r===""?"."+Ja(s,0):r,pf(n)?(i="",e!=null&&(i=e.replace(mf,"$&/")+"/"),yc(n,t,i,"",function(a){return a})):n!=null&&(Mh(n)&&(n=p1(n,i+(!n.key||s&&s.key===n.key?"":(""+n.key).replace(mf,"$&/")+"/")+e)),t.push(n)),1;if(s=0,r=r===""?".":r+":",pf(e))for(var u=0;u<e.length;u++){o=e[u];var l=r+Ja(o,u);s+=yc(o,t,i,l,n)}else if(l=f1(e),typeof l=="function")for(e=l.call(e),u=0;!(o=e.next()).done;)o=o.value,l=r+Ja(o,u++),s+=yc(o,t,i,l,n);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function jl(e,t,i){if(e==null)return e;var r=[],n=0;return yc(e,r,"","",function(o){return t.call(i,o,n++)}),r}function y1(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(i){(e._status===0||e._status===-1)&&(e._status=1,e._result=i)},function(i){(e._status===0||e._status===-1)&&(e._status=2,e._result=i)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Nt={current:null},vc={transition:null},v1={ReactCurrentDispatcher:Nt,ReactCurrentBatchConfig:vc,ReactCurrentOwner:Kh};Te.Children={map:jl,forEach:function(e,t,i){jl(e,function(){t.apply(this,arguments)},i)},count:function(e){var t=0;return jl(e,function(){t++}),t},toArray:function(e){return jl(e,function(t){return t})||[]},only:function(e){if(!Mh(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Te.Component=Cs;Te.Fragment=n1;Te.Profiler=s1;Te.PureComponent=kh;Te.StrictMode=o1;Te.Suspense=u1;Te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=v1;Te.cloneElement=function(e,t,i){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=vm({},e.props),n=e.key,o=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,s=Kh.current),t.key!==void 0&&(n=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(l in t)Zm.call(t,l)&&!Sm.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&u!==void 0?u[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=i;else if(1<l){u=Array(l);for(var a=0;a<l;a++)u[a]=arguments[a+2];r.children=u}return{$$typeof:El,type:e.type,key:n,ref:o,props:r,_owner:s}};Te.createContext=function(e){return e={$$typeof:c1,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:l1,_context:e},e.Consumer=e};Te.createElement=bm;Te.createFactory=function(e){var t=bm.bind(null,e);return t.type=e,t};Te.createRef=function(){return{current:null}};Te.forwardRef=function(e){return{$$typeof:a1,render:e}};Te.isValidElement=Mh;Te.lazy=function(e){return{$$typeof:d1,_payload:{_status:-1,_result:e},_init:y1}};Te.memo=function(e,t){return{$$typeof:h1,type:e,compare:t===void 0?null:t}};Te.startTransition=function(e){var t=vc.transition;vc.transition={};try{e()}finally{vc.transition=t}};Te.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Te.useCallback=function(e,t){return Nt.current.useCallback(e,t)};Te.useContext=function(e){return Nt.current.useContext(e)};Te.useDebugValue=function(){};Te.useDeferredValue=function(e){return Nt.current.useDeferredValue(e)};Te.useEffect=function(e,t){return Nt.current.useEffect(e,t)};Te.useId=function(){return Nt.current.useId()};Te.useImperativeHandle=function(e,t,i){return Nt.current.useImperativeHandle(e,t,i)};Te.useInsertionEffect=function(e,t){return Nt.current.useInsertionEffect(e,t)};Te.useLayoutEffect=function(e,t){return Nt.current.useLayoutEffect(e,t)};Te.useMemo=function(e,t){return Nt.current.useMemo(e,t)};Te.useReducer=function(e,t,i){return Nt.current.useReducer(e,t,i)};Te.useRef=function(e){return Nt.current.useRef(e)};Te.useState=function(e){return Nt.current.useState(e)};Te.useSyncExternalStore=function(e,t,i){return Nt.current.useSyncExternalStore(e,t,i)};Te.useTransition=function(){return Nt.current.useTransition()};Te.version="18.2.0";(function(e){e.exports=Te})(i1);const _1=e1(ms);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g1=ms,Z1=Symbol.for("react.element"),S1=Symbol.for("react.fragment"),b1=Object.prototype.hasOwnProperty,G1=g1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,C1={key:!0,ref:!0,__self:!0,__source:!0};function Gm(e,t,i){var r,n={},o=null,s=null;i!==void 0&&(o=""+i),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(s=t.ref);for(r in t)b1.call(t,r)&&!C1.hasOwnProperty(r)&&(n[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)n[r]===void 0&&(n[r]=t[r]);return{$$typeof:Z1,type:e,key:o,ref:s,props:n,_owner:G1.current}}fa.Fragment=S1;fa.jsx=Gm;fa.jsxs=Gm;(function(e){e.exports=fa})(t1);const Y1=fl.Fragment,Si=fl.jsx,Hl=fl.jsxs;var Gu={},Cu={},R1={get exports(){return Cu},set exports(e){Cu=e}},mi={},Yu={},W1={get exports(){return Yu},set exports(e){Yu=e}},Cm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(J,P){var ee=J.length;J.push(P);e:for(;0<ee;){var he=ee-1>>>1,$=J[he];if(0<n($,P))J[he]=P,J[ee]=$,ee=he;else break e}}function i(J){return J.length===0?null:J[0]}function r(J){if(J.length===0)return null;var P=J[0],ee=J.pop();if(ee!==P){J[0]=ee;e:for(var he=0,$=J.length,de=$>>>1;he<de;){var pe=2*(he+1)-1,j=J[pe],ie=pe+1,H=J[ie];if(0>n(j,ee))ie<$&&0>n(H,j)?(J[he]=H,J[ie]=ee,he=ie):(J[he]=j,J[pe]=ee,he=pe);else if(ie<$&&0>n(H,ee))J[he]=H,J[ie]=ee,he=ie;else break e}}return P}function n(J,P){var ee=J.sortIndex-P.sortIndex;return ee!==0?ee:J.id-P.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();e.unstable_now=function(){return s.now()-u}}var l=[],a=[],h=1,p=null,d=3,c=!1,y=!1,_=!1,g=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,f=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(J){for(var P=i(a);P!==null;){if(P.callback===null)r(a);else if(P.startTime<=J)r(a),P.sortIndex=P.expirationTime,t(l,P);else break;P=i(a)}}function Z(J){if(_=!1,v(J),!y)if(i(l)!==null)y=!0,L(b);else{var P=i(a);P!==null&&K(Z,P.startTime-J)}}function b(J,P){y=!1,_&&(_=!1,m(C),C=-1),c=!0;var ee=d;try{for(v(P),p=i(l);p!==null&&(!(p.expirationTime>P)||J&&!I());){var he=p.callback;if(typeof he=="function"){p.callback=null,d=p.priorityLevel;var $=he(p.expirationTime<=P);P=e.unstable_now(),typeof $=="function"?p.callback=$:p===i(l)&&r(l),v(P)}else r(l);p=i(l)}if(p!==null)var de=!0;else{var pe=i(a);pe!==null&&K(Z,pe.startTime-P),de=!1}return de}finally{p=null,d=ee,c=!1}}var G=!1,S=null,C=-1,R=5,Y=-1;function I(){return!(e.unstable_now()-Y<R)}function w(){if(S!==null){var J=e.unstable_now();Y=J;var P=!0;try{P=S(!0,J)}finally{P?F():(G=!1,S=null)}}else G=!1}var F;if(typeof f=="function")F=function(){f(w)};else if(typeof MessageChannel<"u"){var E=new MessageChannel,N=E.port2;E.port1.onmessage=w,F=function(){N.postMessage(null)}}else F=function(){g(w,0)};function L(J){S=J,G||(G=!0,F())}function K(J,P){C=g(function(){J(e.unstable_now())},P)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(J){J.callback=null},e.unstable_continueExecution=function(){y||c||(y=!0,L(b))},e.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<J?Math.floor(1e3/J):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return i(l)},e.unstable_next=function(J){switch(d){case 1:case 2:case 3:var P=3;break;default:P=d}var ee=d;d=P;try{return J()}finally{d=ee}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(J,P){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var ee=d;d=J;try{return P()}finally{d=ee}},e.unstable_scheduleCallback=function(J,P,ee){var he=e.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?he+ee:he):ee=he,J){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=ee+$,J={id:h++,callback:P,priorityLevel:J,startTime:ee,expirationTime:$,sortIndex:-1},ee>he?(J.sortIndex=ee,t(a,J),i(l)===null&&J===i(a)&&(_?(m(C),C=-1):_=!0,K(Z,ee-he))):(J.sortIndex=$,t(l,J),y||c||(y=!0,L(b))),J},e.unstable_shouldYield=I,e.unstable_wrapCallback=function(J){var P=d;return function(){var ee=d;d=P;try{return J.apply(this,arguments)}finally{d=ee}}}})(Cm);(function(e){e.exports=Cm})(W1);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ym=ms,fi=Yu;function me(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Rm=new Set,pl={};function ho(e,t){ys(e,t),ys(e+"Capture",t)}function ys(e,t){for(pl[e]=t,e=0;e<t.length;e++)Rm.add(t[e])}var Vr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ru=Object.prototype.hasOwnProperty,I1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,yf={},vf={};function L1(e){return Ru.call(vf,e)?!0:Ru.call(yf,e)?!1:I1.test(e)?vf[e]=!0:(yf[e]=!0,!1)}function w1(e,t,i,r){if(i!==null&&i.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:i!==null?!i.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function T1(e,t,i,r){if(t===null||typeof t>"u"||w1(e,t,i,r))return!0;if(r)return!1;if(i!==null)switch(i.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Jt(e,t,i,r,n,o,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=n,this.mustUseProperty=i,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=s}var Yt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Yt[e]=new Jt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Yt[t]=new Jt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Yt[e]=new Jt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Yt[e]=new Jt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Yt[e]=new Jt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Yt[e]=new Jt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Yt[e]=new Jt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Yt[e]=new Jt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Yt[e]=new Jt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Ph=/[\-:]([a-z])/g;function Nh(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Ph,Nh);Yt[t]=new Jt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Ph,Nh);Yt[t]=new Jt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Ph,Nh);Yt[t]=new Jt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Yt[e]=new Jt(e,1,!1,e.toLowerCase(),null,!1,!1)});Yt.xlinkHref=new Jt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Yt[e]=new Jt(e,1,!1,e.toLowerCase(),null,!0,!0)});function Jh(e,t,i,r){var n=Yt.hasOwnProperty(t)?Yt[t]:null;(n!==null?n.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(T1(t,i,n,r)&&(i=null),r||n===null?L1(t)&&(i===null?e.removeAttribute(t):e.setAttribute(t,""+i)):n.mustUseProperty?e[n.propertyName]=i===null?n.type===3?!1:"":i:(t=n.attributeName,r=n.attributeNamespace,i===null?e.removeAttribute(t):(n=n.type,i=n===3||n===4&&i===!0?"":""+i,r?e.setAttributeNS(r,t,i):e.setAttribute(t,i))))}var Kr=Ym.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Dl=Symbol.for("react.element"),Fo=Symbol.for("react.portal"),Oo=Symbol.for("react.fragment"),Fh=Symbol.for("react.strict_mode"),Wu=Symbol.for("react.profiler"),Wm=Symbol.for("react.provider"),Im=Symbol.for("react.context"),Oh=Symbol.for("react.forward_ref"),Iu=Symbol.for("react.suspense"),Lu=Symbol.for("react.suspense_list"),Bh=Symbol.for("react.memo"),$r=Symbol.for("react.lazy"),Lm=Symbol.for("react.offscreen"),_f=Symbol.iterator;function ks(e){return e===null||typeof e!="object"?null:(e=_f&&e[_f]||e["@@iterator"],typeof e=="function"?e:null)}var qe=Object.assign,Fa;function zs(e){if(Fa===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);Fa=t&&t[1]||""}return`
`+Fa+e}var Oa=!1;function Ba(e,t){if(!e||Oa)return"";Oa=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(a){var r=a}Reflect.construct(e,[],t)}else{try{t.call()}catch(a){r=a}e.call(t.prototype)}else{try{throw Error()}catch(a){r=a}e()}}catch(a){if(a&&r&&typeof a.stack=="string"){for(var n=a.stack.split(`
`),o=r.stack.split(`
`),s=n.length-1,u=o.length-1;1<=s&&0<=u&&n[s]!==o[u];)u--;for(;1<=s&&0<=u;s--,u--)if(n[s]!==o[u]){if(s!==1||u!==1)do if(s--,u--,0>u||n[s]!==o[u]){var l=`
`+n[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=s&&0<=u);break}}}finally{Oa=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?zs(e):""}function X1(e){switch(e.tag){case 5:return zs(e.type);case 16:return zs("Lazy");case 13:return zs("Suspense");case 19:return zs("SuspenseList");case 0:case 2:case 15:return e=Ba(e.type,!1),e;case 11:return e=Ba(e.type.render,!1),e;case 1:return e=Ba(e.type,!0),e;default:return""}}function wu(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Oo:return"Fragment";case Fo:return"Portal";case Wu:return"Profiler";case Fh:return"StrictMode";case Iu:return"Suspense";case Lu:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Im:return(e.displayName||"Context")+".Consumer";case Wm:return(e._context.displayName||"Context")+".Provider";case Oh:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Bh:return t=e.displayName||null,t!==null?t:wu(e.type)||"Memo";case $r:t=e._payload,e=e._init;try{return wu(e(t))}catch{}}return null}function V1(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return wu(t);case 8:return t===Fh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function gn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function wm(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function E1(e){var t=wm(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var n=i.get,o=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function zl(e){e._valueTracker||(e._valueTracker=E1(e))}function Tm(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),r="";return e&&(r=wm(e)?e.checked?"true":"false":e.value),e=r,e!==i?(t.setValue(e),!0):!1}function Ec(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Tu(e,t){var i=t.checked;return qe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??e._wrapperState.initialChecked})}function gf(e,t){var i=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;i=gn(t.value!=null?t.value:i),e._wrapperState={initialChecked:r,initialValue:i,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Xm(e,t){t=t.checked,t!=null&&Jh(e,"checked",t,!1)}function Xu(e,t){Xm(e,t);var i=gn(t.value),r=t.type;if(i!=null)r==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Vu(e,t.type,i):t.hasOwnProperty("defaultValue")&&Vu(e,t.type,gn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Zf(e,t,i){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,i||t===e.value||(e.value=t),e.defaultValue=t}i=e.name,i!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,i!==""&&(e.name=i)}function Vu(e,t,i){(t!=="number"||Ec(e.ownerDocument)!==e)&&(i==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}var As=Array.isArray;function is(e,t,i,r){if(e=e.options,t){t={};for(var n=0;n<i.length;n++)t["$"+i[n]]=!0;for(i=0;i<e.length;i++)n=t.hasOwnProperty("$"+e[i].value),e[i].selected!==n&&(e[i].selected=n),n&&r&&(e[i].defaultSelected=!0)}else{for(i=""+gn(i),t=null,n=0;n<e.length;n++){if(e[n].value===i){e[n].selected=!0,r&&(e[n].defaultSelected=!0);return}t!==null||e[n].disabled||(t=e[n])}t!==null&&(t.selected=!0)}}function Eu(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(me(91));return qe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Sf(e,t){var i=t.value;if(i==null){if(i=t.children,t=t.defaultValue,i!=null){if(t!=null)throw Error(me(92));if(As(i)){if(1<i.length)throw Error(me(93));i=i[0]}t=i}t==null&&(t=""),i=t}e._wrapperState={initialValue:gn(i)}}function Vm(e,t){var i=gn(t.value),r=gn(t.defaultValue);i!=null&&(i=""+i,i!==e.value&&(e.value=i),t.defaultValue==null&&e.defaultValue!==i&&(e.defaultValue=i)),r!=null&&(e.defaultValue=""+r)}function bf(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Em(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ku(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Em(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Al,km=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,i,r,n){MSApp.execUnsafeLocalFunction(function(){return e(t,i,r,n)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Al=Al||document.createElement("div"),Al.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Al.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ml(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var $s={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},k1=["Webkit","ms","Moz","O"];Object.keys($s).forEach(function(e){k1.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),$s[t]=$s[e]})});function xm(e,t,i){return t==null||typeof t=="boolean"||t===""?"":i||typeof t!="number"||t===0||$s.hasOwnProperty(e)&&$s[e]?(""+t).trim():t+"px"}function Km(e,t){e=e.style;for(var i in t)if(t.hasOwnProperty(i)){var r=i.indexOf("--")===0,n=xm(i,t[i],r);i==="float"&&(i="cssFloat"),r?e.setProperty(i,n):e[i]=n}}var x1=qe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xu(e,t){if(t){if(x1[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(me(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(me(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(me(61))}if(t.style!=null&&typeof t.style!="object")throw Error(me(62))}}function Ku(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Mu=null;function Uh(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Pu=null,rs=null,ns=null;function Gf(e){if(e=Kl(e)){if(typeof Pu!="function")throw Error(me(280));var t=e.stateNode;t&&(t=_a(t),Pu(e.stateNode,e.type,t))}}function Mm(e){rs?ns?ns.push(e):ns=[e]:rs=e}function Pm(){if(rs){var e=rs,t=ns;if(ns=rs=null,Gf(e),t)for(e=0;e<t.length;e++)Gf(t[e])}}function Nm(e,t){return e(t)}function Jm(){}var Ua=!1;function Fm(e,t,i){if(Ua)return e(t,i);Ua=!0;try{return Nm(e,t,i)}finally{Ua=!1,(rs!==null||ns!==null)&&(Jm(),Pm())}}function yl(e,t){var i=e.stateNode;if(i===null)return null;var r=_a(i);if(r===null)return null;i=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(me(231,t,typeof i));return i}var Nu=!1;if(Vr)try{var xs={};Object.defineProperty(xs,"passive",{get:function(){Nu=!0}}),window.addEventListener("test",xs,xs),window.removeEventListener("test",xs,xs)}catch{Nu=!1}function K1(e,t,i,r,n,o,s,u,l){var a=Array.prototype.slice.call(arguments,3);try{t.apply(i,a)}catch(h){this.onError(h)}}var el=!1,kc=null,xc=!1,Ju=null,M1={onError:function(e){el=!0,kc=e}};function P1(e,t,i,r,n,o,s,u,l){el=!1,kc=null,K1.apply(M1,arguments)}function N1(e,t,i,r,n,o,s,u,l){if(P1.apply(this,arguments),el){if(el){var a=kc;el=!1,kc=null}else throw Error(me(198));xc||(xc=!0,Ju=a)}}function fo(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function Om(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Cf(e){if(fo(e)!==e)throw Error(me(188))}function J1(e){var t=e.alternate;if(!t){if(t=fo(e),t===null)throw Error(me(188));return t!==e?null:e}for(var i=e,r=t;;){var n=i.return;if(n===null)break;var o=n.alternate;if(o===null){if(r=n.return,r!==null){i=r;continue}break}if(n.child===o.child){for(o=n.child;o;){if(o===i)return Cf(n),e;if(o===r)return Cf(n),t;o=o.sibling}throw Error(me(188))}if(i.return!==r.return)i=n,r=o;else{for(var s=!1,u=n.child;u;){if(u===i){s=!0,i=n,r=o;break}if(u===r){s=!0,r=n,i=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===i){s=!0,i=o,r=n;break}if(u===r){s=!0,r=o,i=n;break}u=u.sibling}if(!s)throw Error(me(189))}}if(i.alternate!==r)throw Error(me(190))}if(i.tag!==3)throw Error(me(188));return i.stateNode.current===i?e:t}function Bm(e){return e=J1(e),e!==null?Um(e):null}function Um(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Um(e);if(t!==null)return t;e=e.sibling}return null}var jm=fi.unstable_scheduleCallback,Yf=fi.unstable_cancelCallback,F1=fi.unstable_shouldYield,O1=fi.unstable_requestPaint,st=fi.unstable_now,B1=fi.unstable_getCurrentPriorityLevel,jh=fi.unstable_ImmediatePriority,Hm=fi.unstable_UserBlockingPriority,Kc=fi.unstable_NormalPriority,U1=fi.unstable_LowPriority,Dm=fi.unstable_IdlePriority,pa=null,ir=null;function j1(e){if(ir&&typeof ir.onCommitFiberRoot=="function")try{ir.onCommitFiberRoot(pa,e,void 0,(e.current.flags&128)===128)}catch{}}var Ki=Math.clz32?Math.clz32:z1,H1=Math.log,D1=Math.LN2;function z1(e){return e>>>=0,e===0?32:31-(H1(e)/D1|0)|0}var Ql=64,ql=4194304;function Qs(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Mc(e,t){var i=e.pendingLanes;if(i===0)return 0;var r=0,n=e.suspendedLanes,o=e.pingedLanes,s=i&268435455;if(s!==0){var u=s&~n;u!==0?r=Qs(u):(o&=s,o!==0&&(r=Qs(o)))}else s=i&~n,s!==0?r=Qs(s):o!==0&&(r=Qs(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&n)&&(n=r&-r,o=t&-t,n>=o||n===16&&(o&4194240)!==0))return t;if(r&4&&(r|=i&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)i=31-Ki(t),n=1<<i,r|=e[i],t&=~n;return r}function A1(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Q1(e,t){for(var i=e.suspendedLanes,r=e.pingedLanes,n=e.expirationTimes,o=e.pendingLanes;0<o;){var s=31-Ki(o),u=1<<s,l=n[s];l===-1?(!(u&i)||u&r)&&(n[s]=A1(u,t)):l<=t&&(e.expiredLanes|=u),o&=~u}}function Fu(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function zm(){var e=Ql;return Ql<<=1,!(Ql&4194240)&&(Ql=64),e}function ja(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function kl(e,t,i){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ki(t),e[t]=i}function q1(e,t){var i=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<i;){var n=31-Ki(i),o=1<<n;t[n]=0,r[n]=-1,e[n]=-1,i&=~o}}function Hh(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var r=31-Ki(i),n=1<<r;n&t|e[r]&t&&(e[r]|=t),i&=~n}}var Pe=0;function Am(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Qm,Dh,qm,$m,e0,Ou=!1,$l=[],ln=null,cn=null,an=null,vl=new Map,_l=new Map,tn=[],$1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Rf(e,t){switch(e){case"focusin":case"focusout":ln=null;break;case"dragenter":case"dragleave":cn=null;break;case"mouseover":case"mouseout":an=null;break;case"pointerover":case"pointerout":vl.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":_l.delete(t.pointerId)}}function Ks(e,t,i,r,n,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:i,eventSystemFlags:r,nativeEvent:o,targetContainers:[n]},t!==null&&(t=Kl(t),t!==null&&Dh(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,n!==null&&t.indexOf(n)===-1&&t.push(n),e)}function e_(e,t,i,r,n){switch(t){case"focusin":return ln=Ks(ln,e,t,i,r,n),!0;case"dragenter":return cn=Ks(cn,e,t,i,r,n),!0;case"mouseover":return an=Ks(an,e,t,i,r,n),!0;case"pointerover":var o=n.pointerId;return vl.set(o,Ks(vl.get(o)||null,e,t,i,r,n)),!0;case"gotpointercapture":return o=n.pointerId,_l.set(o,Ks(_l.get(o)||null,e,t,i,r,n)),!0}return!1}function t0(e){var t=Hn(e.target);if(t!==null){var i=fo(t);if(i!==null){if(t=i.tag,t===13){if(t=Om(i),t!==null){e.blockedOn=t,e0(e.priority,function(){qm(i)});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function _c(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=Bu(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(i===null){i=e.nativeEvent;var r=new i.constructor(i.type,i);Mu=r,i.target.dispatchEvent(r),Mu=null}else return t=Kl(i),t!==null&&Dh(t),e.blockedOn=i,!1;t.shift()}return!0}function Wf(e,t,i){_c(e)&&i.delete(t)}function t_(){Ou=!1,ln!==null&&_c(ln)&&(ln=null),cn!==null&&_c(cn)&&(cn=null),an!==null&&_c(an)&&(an=null),vl.forEach(Wf),_l.forEach(Wf)}function Ms(e,t){e.blockedOn===t&&(e.blockedOn=null,Ou||(Ou=!0,fi.unstable_scheduleCallback(fi.unstable_NormalPriority,t_)))}function gl(e){function t(n){return Ms(n,e)}if(0<$l.length){Ms($l[0],e);for(var i=1;i<$l.length;i++){var r=$l[i];r.blockedOn===e&&(r.blockedOn=null)}}for(ln!==null&&Ms(ln,e),cn!==null&&Ms(cn,e),an!==null&&Ms(an,e),vl.forEach(t),_l.forEach(t),i=0;i<tn.length;i++)r=tn[i],r.blockedOn===e&&(r.blockedOn=null);for(;0<tn.length&&(i=tn[0],i.blockedOn===null);)t0(i),i.blockedOn===null&&tn.shift()}var os=Kr.ReactCurrentBatchConfig,Pc=!0;function i_(e,t,i,r){var n=Pe,o=os.transition;os.transition=null;try{Pe=1,zh(e,t,i,r)}finally{Pe=n,os.transition=o}}function r_(e,t,i,r){var n=Pe,o=os.transition;os.transition=null;try{Pe=4,zh(e,t,i,r)}finally{Pe=n,os.transition=o}}function zh(e,t,i,r){if(Pc){var n=Bu(e,t,i,r);if(n===null)iu(e,t,r,Nc,i),Rf(e,r);else if(e_(n,e,t,i,r))r.stopPropagation();else if(Rf(e,r),t&4&&-1<$1.indexOf(e)){for(;n!==null;){var o=Kl(n);if(o!==null&&Qm(o),o=Bu(e,t,i,r),o===null&&iu(e,t,r,Nc,i),o===n)break;n=o}n!==null&&r.stopPropagation()}else iu(e,t,r,null,i)}}var Nc=null;function Bu(e,t,i,r){if(Nc=null,e=Uh(r),e=Hn(e),e!==null)if(t=fo(e),t===null)e=null;else if(i=t.tag,i===13){if(e=Om(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Nc=e,null}function i0(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(B1()){case jh:return 1;case Hm:return 4;case Kc:case U1:return 16;case Dm:return 536870912;default:return 16}default:return 16}}var nn=null,Ah=null,gc=null;function r0(){if(gc)return gc;var e,t=Ah,i=t.length,r,n="value"in nn?nn.value:nn.textContent,o=n.length;for(e=0;e<i&&t[e]===n[e];e++);var s=i-e;for(r=1;r<=s&&t[i-r]===n[o-r];r++);return gc=n.slice(e,1<r?1-r:void 0)}function Zc(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ec(){return!0}function If(){return!1}function yi(e){function t(i,r,n,o,s){this._reactName=i,this._targetInst=n,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var u in e)e.hasOwnProperty(u)&&(i=e[u],this[u]=i?i(o):o[u]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?ec:If,this.isPropagationStopped=If,this}return qe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=ec)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=ec)},persist:function(){},isPersistent:ec}),t}var Ys={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qh=yi(Ys),xl=qe({},Ys,{view:0,detail:0}),n_=yi(xl),Ha,Da,Ps,ma=qe({},xl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qh,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ps&&(Ps&&e.type==="mousemove"?(Ha=e.screenX-Ps.screenX,Da=e.screenY-Ps.screenY):Da=Ha=0,Ps=e),Ha)},movementY:function(e){return"movementY"in e?e.movementY:Da}}),Lf=yi(ma),o_=qe({},ma,{dataTransfer:0}),s_=yi(o_),l_=qe({},xl,{relatedTarget:0}),za=yi(l_),c_=qe({},Ys,{animationName:0,elapsedTime:0,pseudoElement:0}),a_=yi(c_),u_=qe({},Ys,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),h_=yi(u_),d_=qe({},Ys,{data:0}),wf=yi(d_),f_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},p_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},m_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function y_(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=m_[e])?!!t[e]:!1}function qh(){return y_}var v_=qe({},xl,{key:function(e){if(e.key){var t=f_[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Zc(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?p_[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qh,charCode:function(e){return e.type==="keypress"?Zc(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Zc(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),__=yi(v_),g_=qe({},ma,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Tf=yi(g_),Z_=qe({},xl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qh}),S_=yi(Z_),b_=qe({},Ys,{propertyName:0,elapsedTime:0,pseudoElement:0}),G_=yi(b_),C_=qe({},ma,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Y_=yi(C_),R_=[9,13,27,32],$h=Vr&&"CompositionEvent"in window,tl=null;Vr&&"documentMode"in document&&(tl=document.documentMode);var W_=Vr&&"TextEvent"in window&&!tl,n0=Vr&&(!$h||tl&&8<tl&&11>=tl),Xf=String.fromCharCode(32),Vf=!1;function o0(e,t){switch(e){case"keyup":return R_.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function s0(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Bo=!1;function I_(e,t){switch(e){case"compositionend":return s0(t);case"keypress":return t.which!==32?null:(Vf=!0,Xf);case"textInput":return e=t.data,e===Xf&&Vf?null:e;default:return null}}function L_(e,t){if(Bo)return e==="compositionend"||!$h&&o0(e,t)?(e=r0(),gc=Ah=nn=null,Bo=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return n0&&t.locale!=="ko"?null:t.data;default:return null}}var w_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ef(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!w_[e.type]:t==="textarea"}function l0(e,t,i,r){Mm(r),t=Jc(t,"onChange"),0<t.length&&(i=new Qh("onChange","change",null,i,r),e.push({event:i,listeners:t}))}var il=null,Zl=null;function T_(e){_0(e,0)}function ya(e){var t=Ho(e);if(Tm(t))return e}function X_(e,t){if(e==="change")return t}var c0=!1;if(Vr){var Aa;if(Vr){var Qa="oninput"in document;if(!Qa){var kf=document.createElement("div");kf.setAttribute("oninput","return;"),Qa=typeof kf.oninput=="function"}Aa=Qa}else Aa=!1;c0=Aa&&(!document.documentMode||9<document.documentMode)}function xf(){il&&(il.detachEvent("onpropertychange",a0),Zl=il=null)}function a0(e){if(e.propertyName==="value"&&ya(Zl)){var t=[];l0(t,Zl,e,Uh(e)),Fm(T_,t)}}function V_(e,t,i){e==="focusin"?(xf(),il=t,Zl=i,il.attachEvent("onpropertychange",a0)):e==="focusout"&&xf()}function E_(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ya(Zl)}function k_(e,t){if(e==="click")return ya(t)}function x_(e,t){if(e==="input"||e==="change")return ya(t)}function K_(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Pi=typeof Object.is=="function"?Object.is:K_;function Sl(e,t){if(Pi(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),r=Object.keys(t);if(i.length!==r.length)return!1;for(r=0;r<i.length;r++){var n=i[r];if(!Ru.call(t,n)||!Pi(e[n],t[n]))return!1}return!0}function Kf(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Mf(e,t){var i=Kf(e);e=0;for(var r;i;){if(i.nodeType===3){if(r=e+i.textContent.length,e<=t&&r>=t)return{node:i,offset:t-e};e=r}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Kf(i)}}function u0(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?u0(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function h0(){for(var e=window,t=Ec();t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=Ec(e.document)}return t}function ed(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function M_(e){var t=h0(),i=e.focusedElem,r=e.selectionRange;if(t!==i&&i&&i.ownerDocument&&u0(i.ownerDocument.documentElement,i)){if(r!==null&&ed(i)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in i)i.selectionStart=t,i.selectionEnd=Math.min(e,i.value.length);else if(e=(t=i.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var n=i.textContent.length,o=Math.min(r.start,n);r=r.end===void 0?o:Math.min(r.end,n),!e.extend&&o>r&&(n=r,r=o,o=n),n=Mf(i,o);var s=Mf(i,r);n&&s&&(e.rangeCount!==1||e.anchorNode!==n.node||e.anchorOffset!==n.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&(t=t.createRange(),t.setStart(n.node,n.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}}for(t=[],e=i;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<t.length;i++)e=t[i],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var P_=Vr&&"documentMode"in document&&11>=document.documentMode,Uo=null,Uu=null,rl=null,ju=!1;function Pf(e,t,i){var r=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;ju||Uo==null||Uo!==Ec(r)||(r=Uo,"selectionStart"in r&&ed(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),rl&&Sl(rl,r)||(rl=r,r=Jc(Uu,"onSelect"),0<r.length&&(t=new Qh("onSelect","select",null,t,i),e.push({event:t,listeners:r}),t.target=Uo)))}function tc(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var jo={animationend:tc("Animation","AnimationEnd"),animationiteration:tc("Animation","AnimationIteration"),animationstart:tc("Animation","AnimationStart"),transitionend:tc("Transition","TransitionEnd")},qa={},d0={};Vr&&(d0=document.createElement("div").style,"AnimationEvent"in window||(delete jo.animationend.animation,delete jo.animationiteration.animation,delete jo.animationstart.animation),"TransitionEvent"in window||delete jo.transitionend.transition);function va(e){if(qa[e])return qa[e];if(!jo[e])return e;var t=jo[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in d0)return qa[e]=t[i];return e}var f0=va("animationend"),p0=va("animationiteration"),m0=va("animationstart"),y0=va("transitionend"),v0=new Map,Nf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Sn(e,t){v0.set(e,t),ho(t,[e])}for(var $a=0;$a<Nf.length;$a++){var eu=Nf[$a],N_=eu.toLowerCase(),J_=eu[0].toUpperCase()+eu.slice(1);Sn(N_,"on"+J_)}Sn(f0,"onAnimationEnd");Sn(p0,"onAnimationIteration");Sn(m0,"onAnimationStart");Sn("dblclick","onDoubleClick");Sn("focusin","onFocus");Sn("focusout","onBlur");Sn(y0,"onTransitionEnd");ys("onMouseEnter",["mouseout","mouseover"]);ys("onMouseLeave",["mouseout","mouseover"]);ys("onPointerEnter",["pointerout","pointerover"]);ys("onPointerLeave",["pointerout","pointerover"]);ho("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ho("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ho("onBeforeInput",["compositionend","keypress","textInput","paste"]);ho("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ho("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ho("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),F_=new Set("cancel close invalid load scroll toggle".split(" ").concat(qs));function Jf(e,t,i){var r=e.type||"unknown-event";e.currentTarget=i,N1(r,t,void 0,e),e.currentTarget=null}function _0(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var r=e[i],n=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var s=r.length-1;0<=s;s--){var u=r[s],l=u.instance,a=u.currentTarget;if(u=u.listener,l!==o&&n.isPropagationStopped())break e;Jf(n,u,a),o=l}else for(s=0;s<r.length;s++){if(u=r[s],l=u.instance,a=u.currentTarget,u=u.listener,l!==o&&n.isPropagationStopped())break e;Jf(n,u,a),o=l}}}if(xc)throw e=Ju,xc=!1,Ju=null,e}function Oe(e,t){var i=t[Qu];i===void 0&&(i=t[Qu]=new Set);var r=e+"__bubble";i.has(r)||(g0(t,e,2,!1),i.add(r))}function tu(e,t,i){var r=0;t&&(r|=4),g0(i,e,r,t)}var ic="_reactListening"+Math.random().toString(36).slice(2);function bl(e){if(!e[ic]){e[ic]=!0,Rm.forEach(function(i){i!=="selectionchange"&&(F_.has(i)||tu(i,!1,e),tu(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ic]||(t[ic]=!0,tu("selectionchange",!1,t))}}function g0(e,t,i,r){switch(i0(t)){case 1:var n=i_;break;case 4:n=r_;break;default:n=zh}i=n.bind(null,t,i,e),n=void 0,!Nu||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(n=!0),r?n!==void 0?e.addEventListener(t,i,{capture:!0,passive:n}):e.addEventListener(t,i,!0):n!==void 0?e.addEventListener(t,i,{passive:n}):e.addEventListener(t,i,!1)}function iu(e,t,i,r,n){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var u=r.stateNode.containerInfo;if(u===n||u.nodeType===8&&u.parentNode===n)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===n||l.nodeType===8&&l.parentNode===n))return;s=s.return}for(;u!==null;){if(s=Hn(u),s===null)return;if(l=s.tag,l===5||l===6){r=o=s;continue e}u=u.parentNode}}r=r.return}Fm(function(){var a=o,h=Uh(i),p=[];e:{var d=v0.get(e);if(d!==void 0){var c=Qh,y=e;switch(e){case"keypress":if(Zc(i)===0)break e;case"keydown":case"keyup":c=__;break;case"focusin":y="focus",c=za;break;case"focusout":y="blur",c=za;break;case"beforeblur":case"afterblur":c=za;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=Lf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=s_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=S_;break;case f0:case p0:case m0:c=a_;break;case y0:c=G_;break;case"scroll":c=n_;break;case"wheel":c=Y_;break;case"copy":case"cut":case"paste":c=h_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=Tf}var _=(t&4)!==0,g=!_&&e==="scroll",m=_?d!==null?d+"Capture":null:d;_=[];for(var f=a,v;f!==null;){v=f;var Z=v.stateNode;if(v.tag===5&&Z!==null&&(v=Z,m!==null&&(Z=yl(f,m),Z!=null&&_.push(Gl(f,Z,v)))),g)break;f=f.return}0<_.length&&(d=new c(d,y,null,i,h),p.push({event:d,listeners:_}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",c=e==="mouseout"||e==="pointerout",d&&i!==Mu&&(y=i.relatedTarget||i.fromElement)&&(Hn(y)||y[Er]))break e;if((c||d)&&(d=h.window===h?h:(d=h.ownerDocument)?d.defaultView||d.parentWindow:window,c?(y=i.relatedTarget||i.toElement,c=a,y=y?Hn(y):null,y!==null&&(g=fo(y),y!==g||y.tag!==5&&y.tag!==6)&&(y=null)):(c=null,y=a),c!==y)){if(_=Lf,Z="onMouseLeave",m="onMouseEnter",f="mouse",(e==="pointerout"||e==="pointerover")&&(_=Tf,Z="onPointerLeave",m="onPointerEnter",f="pointer"),g=c==null?d:Ho(c),v=y==null?d:Ho(y),d=new _(Z,f+"leave",c,i,h),d.target=g,d.relatedTarget=v,Z=null,Hn(h)===a&&(_=new _(m,f+"enter",y,i,h),_.target=v,_.relatedTarget=g,Z=_),g=Z,c&&y)t:{for(_=c,m=y,f=0,v=_;v;v=Eo(v))f++;for(v=0,Z=m;Z;Z=Eo(Z))v++;for(;0<f-v;)_=Eo(_),f--;for(;0<v-f;)m=Eo(m),v--;for(;f--;){if(_===m||m!==null&&_===m.alternate)break t;_=Eo(_),m=Eo(m)}_=null}else _=null;c!==null&&Ff(p,d,c,_,!1),y!==null&&g!==null&&Ff(p,g,y,_,!0)}}e:{if(d=a?Ho(a):window,c=d.nodeName&&d.nodeName.toLowerCase(),c==="select"||c==="input"&&d.type==="file")var b=X_;else if(Ef(d))if(c0)b=x_;else{b=E_;var G=V_}else(c=d.nodeName)&&c.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(b=k_);if(b&&(b=b(e,a))){l0(p,b,i,h);break e}G&&G(e,d,a),e==="focusout"&&(G=d._wrapperState)&&G.controlled&&d.type==="number"&&Vu(d,"number",d.value)}switch(G=a?Ho(a):window,e){case"focusin":(Ef(G)||G.contentEditable==="true")&&(Uo=G,Uu=a,rl=null);break;case"focusout":rl=Uu=Uo=null;break;case"mousedown":ju=!0;break;case"contextmenu":case"mouseup":case"dragend":ju=!1,Pf(p,i,h);break;case"selectionchange":if(P_)break;case"keydown":case"keyup":Pf(p,i,h)}var S;if($h)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Bo?o0(e,i)&&(C="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(C="onCompositionStart");C&&(n0&&i.locale!=="ko"&&(Bo||C!=="onCompositionStart"?C==="onCompositionEnd"&&Bo&&(S=r0()):(nn=h,Ah="value"in nn?nn.value:nn.textContent,Bo=!0)),G=Jc(a,C),0<G.length&&(C=new wf(C,e,null,i,h),p.push({event:C,listeners:G}),S?C.data=S:(S=s0(i),S!==null&&(C.data=S)))),(S=W_?I_(e,i):L_(e,i))&&(a=Jc(a,"onBeforeInput"),0<a.length&&(h=new wf("onBeforeInput","beforeinput",null,i,h),p.push({event:h,listeners:a}),h.data=S))}_0(p,t)})}function Gl(e,t,i){return{instance:e,listener:t,currentTarget:i}}function Jc(e,t){for(var i=t+"Capture",r=[];e!==null;){var n=e,o=n.stateNode;n.tag===5&&o!==null&&(n=o,o=yl(e,i),o!=null&&r.unshift(Gl(e,o,n)),o=yl(e,t),o!=null&&r.push(Gl(e,o,n))),e=e.return}return r}function Eo(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Ff(e,t,i,r,n){for(var o=t._reactName,s=[];i!==null&&i!==r;){var u=i,l=u.alternate,a=u.stateNode;if(l!==null&&l===r)break;u.tag===5&&a!==null&&(u=a,n?(l=yl(i,o),l!=null&&s.unshift(Gl(i,l,u))):n||(l=yl(i,o),l!=null&&s.push(Gl(i,l,u)))),i=i.return}s.length!==0&&e.push({event:t,listeners:s})}var O_=/\r\n?/g,B_=/\u0000|\uFFFD/g;function Of(e){return(typeof e=="string"?e:""+e).replace(O_,`
`).replace(B_,"")}function rc(e,t,i){if(t=Of(t),Of(e)!==t&&i)throw Error(me(425))}function Fc(){}var Hu=null,Du=null;function zu(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Au=typeof setTimeout=="function"?setTimeout:void 0,U_=typeof clearTimeout=="function"?clearTimeout:void 0,Bf=typeof Promise=="function"?Promise:void 0,j_=typeof queueMicrotask=="function"?queueMicrotask:typeof Bf<"u"?function(e){return Bf.resolve(null).then(e).catch(H_)}:Au;function H_(e){setTimeout(function(){throw e})}function ru(e,t){var i=t,r=0;do{var n=i.nextSibling;if(e.removeChild(i),n&&n.nodeType===8)if(i=n.data,i==="/$"){if(r===0){e.removeChild(n),gl(t);return}r--}else i!=="$"&&i!=="$?"&&i!=="$!"||r++;i=n}while(i);gl(t)}function un(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Uf(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(t===0)return e;t--}else i==="/$"&&t++}e=e.previousSibling}return null}var Rs=Math.random().toString(36).slice(2),$i="__reactFiber$"+Rs,Cl="__reactProps$"+Rs,Er="__reactContainer$"+Rs,Qu="__reactEvents$"+Rs,D_="__reactListeners$"+Rs,z_="__reactHandles$"+Rs;function Hn(e){var t=e[$i];if(t)return t;for(var i=e.parentNode;i;){if(t=i[Er]||i[$i]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=Uf(e);e!==null;){if(i=e[$i])return i;e=Uf(e)}return t}e=i,i=e.parentNode}return null}function Kl(e){return e=e[$i]||e[Er],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ho(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(me(33))}function _a(e){return e[Cl]||null}var qu=[],Do=-1;function bn(e){return{current:e}}function Be(e){0>Do||(e.current=qu[Do],qu[Do]=null,Do--)}function Fe(e,t){Do++,qu[Do]=e.current,e.current=t}var Zn={},Xt=bn(Zn),Qt=bn(!1),oo=Zn;function vs(e,t){var i=e.type.contextTypes;if(!i)return Zn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var n={},o;for(o in i)n[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=n),n}function qt(e){return e=e.childContextTypes,e!=null}function Oc(){Be(Qt),Be(Xt)}function jf(e,t,i){if(Xt.current!==Zn)throw Error(me(168));Fe(Xt,t),Fe(Qt,i)}function Z0(e,t,i){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return i;r=r.getChildContext();for(var n in r)if(!(n in t))throw Error(me(108,V1(e)||"Unknown",n));return qe({},i,r)}function Bc(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Zn,oo=Xt.current,Fe(Xt,e),Fe(Qt,Qt.current),!0}function Hf(e,t,i){var r=e.stateNode;if(!r)throw Error(me(169));i?(e=Z0(e,t,oo),r.__reactInternalMemoizedMergedChildContext=e,Be(Qt),Be(Xt),Fe(Xt,e)):Be(Qt),Fe(Qt,i)}var Gr=null,ga=!1,nu=!1;function S0(e){Gr===null?Gr=[e]:Gr.push(e)}function A_(e){ga=!0,S0(e)}function Gn(){if(!nu&&Gr!==null){nu=!0;var e=0,t=Pe;try{var i=Gr;for(Pe=1;e<i.length;e++){var r=i[e];do r=r(!0);while(r!==null)}Gr=null,ga=!1}catch(n){throw Gr!==null&&(Gr=Gr.slice(e+1)),jm(jh,Gn),n}finally{Pe=t,nu=!1}}return null}var zo=[],Ao=0,Uc=null,jc=0,Yi=[],Ri=0,so=null,Cr=1,Yr="";function Bn(e,t){zo[Ao++]=jc,zo[Ao++]=Uc,Uc=e,jc=t}function b0(e,t,i){Yi[Ri++]=Cr,Yi[Ri++]=Yr,Yi[Ri++]=so,so=e;var r=Cr;e=Yr;var n=32-Ki(r)-1;r&=~(1<<n),i+=1;var o=32-Ki(t)+n;if(30<o){var s=n-n%5;o=(r&(1<<s)-1).toString(32),r>>=s,n-=s,Cr=1<<32-Ki(t)+n|i<<n|r,Yr=o+e}else Cr=1<<o|i<<n|r,Yr=e}function td(e){e.return!==null&&(Bn(e,1),b0(e,1,0))}function id(e){for(;e===Uc;)Uc=zo[--Ao],zo[Ao]=null,jc=zo[--Ao],zo[Ao]=null;for(;e===so;)so=Yi[--Ri],Yi[Ri]=null,Yr=Yi[--Ri],Yi[Ri]=null,Cr=Yi[--Ri],Yi[Ri]=null}var di=null,ui=null,Ue=!1,xi=null;function G0(e,t){var i=Wi(5,null,null,0);i.elementType="DELETED",i.stateNode=t,i.return=e,t=e.deletions,t===null?(e.deletions=[i],e.flags|=16):t.push(i)}function Df(e,t){switch(e.tag){case 5:var i=e.type;return t=t.nodeType!==1||i.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,di=e,ui=un(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,di=e,ui=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(i=so!==null?{id:Cr,overflow:Yr}:null,e.memoizedState={dehydrated:t,treeContext:i,retryLane:1073741824},i=Wi(18,null,null,0),i.stateNode=t,i.return=e,e.child=i,di=e,ui=null,!0):!1;default:return!1}}function $u(e){return(e.mode&1)!==0&&(e.flags&128)===0}function eh(e){if(Ue){var t=ui;if(t){var i=t;if(!Df(e,t)){if($u(e))throw Error(me(418));t=un(i.nextSibling);var r=di;t&&Df(e,t)?G0(r,i):(e.flags=e.flags&-4097|2,Ue=!1,di=e)}}else{if($u(e))throw Error(me(418));e.flags=e.flags&-4097|2,Ue=!1,di=e}}}function zf(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;di=e}function nc(e){if(e!==di)return!1;if(!Ue)return zf(e),Ue=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!zu(e.type,e.memoizedProps)),t&&(t=ui)){if($u(e))throw C0(),Error(me(418));for(;t;)G0(e,t),t=un(t.nextSibling)}if(zf(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(me(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"){if(t===0){ui=un(e.nextSibling);break e}t--}else i!=="$"&&i!=="$!"&&i!=="$?"||t++}e=e.nextSibling}ui=null}}else ui=di?un(e.stateNode.nextSibling):null;return!0}function C0(){for(var e=ui;e;)e=un(e.nextSibling)}function _s(){ui=di=null,Ue=!1}function rd(e){xi===null?xi=[e]:xi.push(e)}var Q_=Kr.ReactCurrentBatchConfig;function Ei(e,t){if(e&&e.defaultProps){t=qe({},t),e=e.defaultProps;for(var i in e)t[i]===void 0&&(t[i]=e[i]);return t}return t}var Hc=bn(null),Dc=null,Qo=null,nd=null;function od(){nd=Qo=Dc=null}function sd(e){var t=Hc.current;Be(Hc),e._currentValue=t}function th(e,t,i){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===i)break;e=e.return}}function ss(e,t){Dc=e,nd=Qo=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(At=!0),e.firstContext=null)}function Li(e){var t=e._currentValue;if(nd!==e)if(e={context:e,memoizedValue:t,next:null},Qo===null){if(Dc===null)throw Error(me(308));Qo=e,Dc.dependencies={lanes:0,firstContext:e}}else Qo=Qo.next=e;return t}var Dn=null;function ld(e){Dn===null?Dn=[e]:Dn.push(e)}function Y0(e,t,i,r){var n=t.interleaved;return n===null?(i.next=i,ld(t)):(i.next=n.next,n.next=i),t.interleaved=i,kr(e,r)}function kr(e,t){e.lanes|=t;var i=e.alternate;for(i!==null&&(i.lanes|=t),i=e,e=e.return;e!==null;)e.childLanes|=t,i=e.alternate,i!==null&&(i.childLanes|=t),i=e,e=e.return;return i.tag===3?i.stateNode:null}var en=!1;function cd(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function R0(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Xr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function hn(e,t,i){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Xe&2){var n=r.pending;return n===null?t.next=t:(t.next=n.next,n.next=t),r.pending=t,kr(e,i)}return n=r.interleaved,n===null?(t.next=t,ld(r)):(t.next=n.next,n.next=t),r.interleaved=t,kr(e,i)}function Sc(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,i|=r,t.lanes=i,Hh(e,i)}}function Af(e,t){var i=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,i===r)){var n=null,o=null;if(i=i.firstBaseUpdate,i!==null){do{var s={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};o===null?n=o=s:o=o.next=s,i=i.next}while(i!==null);o===null?n=o=t:o=o.next=t}else n=o=t;i={baseState:r.baseState,firstBaseUpdate:n,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}function zc(e,t,i,r){var n=e.updateQueue;en=!1;var o=n.firstBaseUpdate,s=n.lastBaseUpdate,u=n.shared.pending;if(u!==null){n.shared.pending=null;var l=u,a=l.next;l.next=null,s===null?o=a:s.next=a,s=l;var h=e.alternate;h!==null&&(h=h.updateQueue,u=h.lastBaseUpdate,u!==s&&(u===null?h.firstBaseUpdate=a:u.next=a,h.lastBaseUpdate=l))}if(o!==null){var p=n.baseState;s=0,h=a=l=null,u=o;do{var d=u.lane,c=u.eventTime;if((r&d)===d){h!==null&&(h=h.next={eventTime:c,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var y=e,_=u;switch(d=t,c=i,_.tag){case 1:if(y=_.payload,typeof y=="function"){p=y.call(c,p,d);break e}p=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=_.payload,d=typeof y=="function"?y.call(c,p,d):y,d==null)break e;p=qe({},p,d);break e;case 2:en=!0}}u.callback!==null&&u.lane!==0&&(e.flags|=64,d=n.effects,d===null?n.effects=[u]:d.push(u))}else c={eventTime:c,lane:d,tag:u.tag,payload:u.payload,callback:u.callback,next:null},h===null?(a=h=c,l=p):h=h.next=c,s|=d;if(u=u.next,u===null){if(u=n.shared.pending,u===null)break;d=u,u=d.next,d.next=null,n.lastBaseUpdate=d,n.shared.pending=null}}while(1);if(h===null&&(l=p),n.baseState=l,n.firstBaseUpdate=a,n.lastBaseUpdate=h,t=n.shared.interleaved,t!==null){n=t;do s|=n.lane,n=n.next;while(n!==t)}else o===null&&(n.shared.lanes=0);co|=s,e.lanes=s,e.memoizedState=p}}function Qf(e,t,i){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],n=r.callback;if(n!==null){if(r.callback=null,r=i,typeof n!="function")throw Error(me(191,n));n.call(r)}}}var W0=new Ym.Component().refs;function ih(e,t,i,r){t=e.memoizedState,i=i(r,t),i=i==null?t:qe({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var Za={isMounted:function(e){return(e=e._reactInternals)?fo(e)===e:!1},enqueueSetState:function(e,t,i){e=e._reactInternals;var r=Pt(),n=fn(e),o=Xr(r,n);o.payload=t,i!=null&&(o.callback=i),t=hn(e,o,n),t!==null&&(Mi(t,e,n,r),Sc(t,e,n))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var r=Pt(),n=fn(e),o=Xr(r,n);o.tag=1,o.payload=t,i!=null&&(o.callback=i),t=hn(e,o,n),t!==null&&(Mi(t,e,n,r),Sc(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=Pt(),r=fn(e),n=Xr(i,r);n.tag=2,t!=null&&(n.callback=t),t=hn(e,n,r),t!==null&&(Mi(t,e,r,i),Sc(t,e,r))}};function qf(e,t,i,r,n,o,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,s):t.prototype&&t.prototype.isPureReactComponent?!Sl(i,r)||!Sl(n,o):!0}function I0(e,t,i){var r=!1,n=Zn,o=t.contextType;return typeof o=="object"&&o!==null?o=Li(o):(n=qt(t)?oo:Xt.current,r=t.contextTypes,o=(r=r!=null)?vs(e,n):Zn),t=new t(i,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Za,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=o),t}function $f(e,t,i,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,r),t.state!==e&&Za.enqueueReplaceState(t,t.state,null)}function rh(e,t,i,r){var n=e.stateNode;n.props=i,n.state=e.memoizedState,n.refs=W0,cd(e);var o=t.contextType;typeof o=="object"&&o!==null?n.context=Li(o):(o=qt(t)?oo:Xt.current,n.context=vs(e,o)),n.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(ih(e,t,o,i),n.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(t=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),t!==n.state&&Za.enqueueReplaceState(n,n.state,null),zc(e,i,n,r),n.state=e.memoizedState),typeof n.componentDidMount=="function"&&(e.flags|=4194308)}function Ns(e,t,i){if(e=i.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(me(309));var r=i.stateNode}if(!r)throw Error(me(147,e));var n=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(s){var u=n.refs;u===W0&&(u=n.refs={}),s===null?delete u[o]:u[o]=s},t._stringRef=o,t)}if(typeof e!="string")throw Error(me(284));if(!i._owner)throw Error(me(290,e))}return e}function oc(e,t){throw e=Object.prototype.toString.call(t),Error(me(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ep(e){var t=e._init;return t(e._payload)}function L0(e){function t(m,f){if(e){var v=m.deletions;v===null?(m.deletions=[f],m.flags|=16):v.push(f)}}function i(m,f){if(!e)return null;for(;f!==null;)t(m,f),f=f.sibling;return null}function r(m,f){for(m=new Map;f!==null;)f.key!==null?m.set(f.key,f):m.set(f.index,f),f=f.sibling;return m}function n(m,f){return m=pn(m,f),m.index=0,m.sibling=null,m}function o(m,f,v){return m.index=v,e?(v=m.alternate,v!==null?(v=v.index,v<f?(m.flags|=2,f):v):(m.flags|=2,f)):(m.flags|=1048576,f)}function s(m){return e&&m.alternate===null&&(m.flags|=2),m}function u(m,f,v,Z){return f===null||f.tag!==6?(f=hu(v,m.mode,Z),f.return=m,f):(f=n(f,v),f.return=m,f)}function l(m,f,v,Z){var b=v.type;return b===Oo?h(m,f,v.props.children,Z,v.key):f!==null&&(f.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===$r&&ep(b)===f.type)?(Z=n(f,v.props),Z.ref=Ns(m,f,v),Z.return=m,Z):(Z=Wc(v.type,v.key,v.props,null,m.mode,Z),Z.ref=Ns(m,f,v),Z.return=m,Z)}function a(m,f,v,Z){return f===null||f.tag!==4||f.stateNode.containerInfo!==v.containerInfo||f.stateNode.implementation!==v.implementation?(f=du(v,m.mode,Z),f.return=m,f):(f=n(f,v.children||[]),f.return=m,f)}function h(m,f,v,Z,b){return f===null||f.tag!==7?(f=io(v,m.mode,Z,b),f.return=m,f):(f=n(f,v),f.return=m,f)}function p(m,f,v){if(typeof f=="string"&&f!==""||typeof f=="number")return f=hu(""+f,m.mode,v),f.return=m,f;if(typeof f=="object"&&f!==null){switch(f.$$typeof){case Dl:return v=Wc(f.type,f.key,f.props,null,m.mode,v),v.ref=Ns(m,null,f),v.return=m,v;case Fo:return f=du(f,m.mode,v),f.return=m,f;case $r:var Z=f._init;return p(m,Z(f._payload),v)}if(As(f)||ks(f))return f=io(f,m.mode,v,null),f.return=m,f;oc(m,f)}return null}function d(m,f,v,Z){var b=f!==null?f.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return b!==null?null:u(m,f,""+v,Z);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Dl:return v.key===b?l(m,f,v,Z):null;case Fo:return v.key===b?a(m,f,v,Z):null;case $r:return b=v._init,d(m,f,b(v._payload),Z)}if(As(v)||ks(v))return b!==null?null:h(m,f,v,Z,null);oc(m,v)}return null}function c(m,f,v,Z,b){if(typeof Z=="string"&&Z!==""||typeof Z=="number")return m=m.get(v)||null,u(f,m,""+Z,b);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case Dl:return m=m.get(Z.key===null?v:Z.key)||null,l(f,m,Z,b);case Fo:return m=m.get(Z.key===null?v:Z.key)||null,a(f,m,Z,b);case $r:var G=Z._init;return c(m,f,v,G(Z._payload),b)}if(As(Z)||ks(Z))return m=m.get(v)||null,h(f,m,Z,b,null);oc(f,Z)}return null}function y(m,f,v,Z){for(var b=null,G=null,S=f,C=f=0,R=null;S!==null&&C<v.length;C++){S.index>C?(R=S,S=null):R=S.sibling;var Y=d(m,S,v[C],Z);if(Y===null){S===null&&(S=R);break}e&&S&&Y.alternate===null&&t(m,S),f=o(Y,f,C),G===null?b=Y:G.sibling=Y,G=Y,S=R}if(C===v.length)return i(m,S),Ue&&Bn(m,C),b;if(S===null){for(;C<v.length;C++)S=p(m,v[C],Z),S!==null&&(f=o(S,f,C),G===null?b=S:G.sibling=S,G=S);return Ue&&Bn(m,C),b}for(S=r(m,S);C<v.length;C++)R=c(S,m,C,v[C],Z),R!==null&&(e&&R.alternate!==null&&S.delete(R.key===null?C:R.key),f=o(R,f,C),G===null?b=R:G.sibling=R,G=R);return e&&S.forEach(function(I){return t(m,I)}),Ue&&Bn(m,C),b}function _(m,f,v,Z){var b=ks(v);if(typeof b!="function")throw Error(me(150));if(v=b.call(v),v==null)throw Error(me(151));for(var G=b=null,S=f,C=f=0,R=null,Y=v.next();S!==null&&!Y.done;C++,Y=v.next()){S.index>C?(R=S,S=null):R=S.sibling;var I=d(m,S,Y.value,Z);if(I===null){S===null&&(S=R);break}e&&S&&I.alternate===null&&t(m,S),f=o(I,f,C),G===null?b=I:G.sibling=I,G=I,S=R}if(Y.done)return i(m,S),Ue&&Bn(m,C),b;if(S===null){for(;!Y.done;C++,Y=v.next())Y=p(m,Y.value,Z),Y!==null&&(f=o(Y,f,C),G===null?b=Y:G.sibling=Y,G=Y);return Ue&&Bn(m,C),b}for(S=r(m,S);!Y.done;C++,Y=v.next())Y=c(S,m,C,Y.value,Z),Y!==null&&(e&&Y.alternate!==null&&S.delete(Y.key===null?C:Y.key),f=o(Y,f,C),G===null?b=Y:G.sibling=Y,G=Y);return e&&S.forEach(function(w){return t(m,w)}),Ue&&Bn(m,C),b}function g(m,f,v,Z){if(typeof v=="object"&&v!==null&&v.type===Oo&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Dl:e:{for(var b=v.key,G=f;G!==null;){if(G.key===b){if(b=v.type,b===Oo){if(G.tag===7){i(m,G.sibling),f=n(G,v.props.children),f.return=m,m=f;break e}}else if(G.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===$r&&ep(b)===G.type){i(m,G.sibling),f=n(G,v.props),f.ref=Ns(m,G,v),f.return=m,m=f;break e}i(m,G);break}else t(m,G);G=G.sibling}v.type===Oo?(f=io(v.props.children,m.mode,Z,v.key),f.return=m,m=f):(Z=Wc(v.type,v.key,v.props,null,m.mode,Z),Z.ref=Ns(m,f,v),Z.return=m,m=Z)}return s(m);case Fo:e:{for(G=v.key;f!==null;){if(f.key===G)if(f.tag===4&&f.stateNode.containerInfo===v.containerInfo&&f.stateNode.implementation===v.implementation){i(m,f.sibling),f=n(f,v.children||[]),f.return=m,m=f;break e}else{i(m,f);break}else t(m,f);f=f.sibling}f=du(v,m.mode,Z),f.return=m,m=f}return s(m);case $r:return G=v._init,g(m,f,G(v._payload),Z)}if(As(v))return y(m,f,v,Z);if(ks(v))return _(m,f,v,Z);oc(m,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,f!==null&&f.tag===6?(i(m,f.sibling),f=n(f,v),f.return=m,m=f):(i(m,f),f=hu(v,m.mode,Z),f.return=m,m=f),s(m)):i(m,f)}return g}var gs=L0(!0),w0=L0(!1),Ml={},rr=bn(Ml),Yl=bn(Ml),Rl=bn(Ml);function zn(e){if(e===Ml)throw Error(me(174));return e}function ad(e,t){switch(Fe(Rl,t),Fe(Yl,e),Fe(rr,Ml),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ku(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=ku(t,e)}Be(rr),Fe(rr,t)}function Zs(){Be(rr),Be(Yl),Be(Rl)}function T0(e){zn(Rl.current);var t=zn(rr.current),i=ku(t,e.type);t!==i&&(Fe(Yl,e),Fe(rr,i))}function ud(e){Yl.current===e&&(Be(rr),Be(Yl))}var Ae=bn(0);function Ac(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ou=[];function hd(){for(var e=0;e<ou.length;e++)ou[e]._workInProgressVersionPrimary=null;ou.length=0}var bc=Kr.ReactCurrentDispatcher,su=Kr.ReactCurrentBatchConfig,lo=0,Qe=null,dt=null,vt=null,Qc=!1,nl=!1,Wl=0,q_=0;function Lt(){throw Error(me(321))}function dd(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!Pi(e[i],t[i]))return!1;return!0}function fd(e,t,i,r,n,o){if(lo=o,Qe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,bc.current=e===null||e.memoizedState===null?ig:rg,e=i(r,n),nl){o=0;do{if(nl=!1,Wl=0,25<=o)throw Error(me(301));o+=1,vt=dt=null,t.updateQueue=null,bc.current=ng,e=i(r,n)}while(nl)}if(bc.current=qc,t=dt!==null&&dt.next!==null,lo=0,vt=dt=Qe=null,Qc=!1,t)throw Error(me(300));return e}function pd(){var e=Wl!==0;return Wl=0,e}function qi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vt===null?Qe.memoizedState=vt=e:vt=vt.next=e,vt}function wi(){if(dt===null){var e=Qe.alternate;e=e!==null?e.memoizedState:null}else e=dt.next;var t=vt===null?Qe.memoizedState:vt.next;if(t!==null)vt=t,dt=e;else{if(e===null)throw Error(me(310));dt=e,e={memoizedState:dt.memoizedState,baseState:dt.baseState,baseQueue:dt.baseQueue,queue:dt.queue,next:null},vt===null?Qe.memoizedState=vt=e:vt=vt.next=e}return vt}function Il(e,t){return typeof t=="function"?t(e):t}function lu(e){var t=wi(),i=t.queue;if(i===null)throw Error(me(311));i.lastRenderedReducer=e;var r=dt,n=r.baseQueue,o=i.pending;if(o!==null){if(n!==null){var s=n.next;n.next=o.next,o.next=s}r.baseQueue=n=o,i.pending=null}if(n!==null){o=n.next,r=r.baseState;var u=s=null,l=null,a=o;do{var h=a.lane;if((lo&h)===h)l!==null&&(l=l.next={lane:0,action:a.action,hasEagerState:a.hasEagerState,eagerState:a.eagerState,next:null}),r=a.hasEagerState?a.eagerState:e(r,a.action);else{var p={lane:h,action:a.action,hasEagerState:a.hasEagerState,eagerState:a.eagerState,next:null};l===null?(u=l=p,s=r):l=l.next=p,Qe.lanes|=h,co|=h}a=a.next}while(a!==null&&a!==o);l===null?s=r:l.next=u,Pi(r,t.memoizedState)||(At=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=l,i.lastRenderedState=r}if(e=i.interleaved,e!==null){n=e;do o=n.lane,Qe.lanes|=o,co|=o,n=n.next;while(n!==e)}else n===null&&(i.lanes=0);return[t.memoizedState,i.dispatch]}function cu(e){var t=wi(),i=t.queue;if(i===null)throw Error(me(311));i.lastRenderedReducer=e;var r=i.dispatch,n=i.pending,o=t.memoizedState;if(n!==null){i.pending=null;var s=n=n.next;do o=e(o,s.action),s=s.next;while(s!==n);Pi(o,t.memoizedState)||(At=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),i.lastRenderedState=o}return[o,r]}function X0(){}function V0(e,t){var i=Qe,r=wi(),n=t(),o=!Pi(r.memoizedState,n);if(o&&(r.memoizedState=n,At=!0),r=r.queue,md(x0.bind(null,i,r,e),[e]),r.getSnapshot!==t||o||vt!==null&&vt.memoizedState.tag&1){if(i.flags|=2048,Ll(9,k0.bind(null,i,r,n,t),void 0,null),_t===null)throw Error(me(349));lo&30||E0(i,t,n)}return n}function E0(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=Qe.updateQueue,t===null?(t={lastEffect:null,stores:null},Qe.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function k0(e,t,i,r){t.value=i,t.getSnapshot=r,K0(t)&&M0(e)}function x0(e,t,i){return i(function(){K0(t)&&M0(e)})}function K0(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!Pi(e,i)}catch{return!0}}function M0(e){var t=kr(e,1);t!==null&&Mi(t,e,1,-1)}function tp(e){var t=qi();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Il,lastRenderedState:e},t.queue=e,e=e.dispatch=tg.bind(null,Qe,e),[t.memoizedState,e]}function Ll(e,t,i,r){return e={tag:e,create:t,destroy:i,deps:r,next:null},t=Qe.updateQueue,t===null?(t={lastEffect:null,stores:null},Qe.updateQueue=t,t.lastEffect=e.next=e):(i=t.lastEffect,i===null?t.lastEffect=e.next=e:(r=i.next,i.next=e,e.next=r,t.lastEffect=e)),e}function P0(){return wi().memoizedState}function Gc(e,t,i,r){var n=qi();Qe.flags|=e,n.memoizedState=Ll(1|t,i,void 0,r===void 0?null:r)}function Sa(e,t,i,r){var n=wi();r=r===void 0?null:r;var o=void 0;if(dt!==null){var s=dt.memoizedState;if(o=s.destroy,r!==null&&dd(r,s.deps)){n.memoizedState=Ll(t,i,o,r);return}}Qe.flags|=e,n.memoizedState=Ll(1|t,i,o,r)}function ip(e,t){return Gc(8390656,8,e,t)}function md(e,t){return Sa(2048,8,e,t)}function N0(e,t){return Sa(4,2,e,t)}function J0(e,t){return Sa(4,4,e,t)}function F0(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function O0(e,t,i){return i=i!=null?i.concat([e]):null,Sa(4,4,F0.bind(null,t,e),i)}function yd(){}function B0(e,t){var i=wi();t=t===void 0?null:t;var r=i.memoizedState;return r!==null&&t!==null&&dd(t,r[1])?r[0]:(i.memoizedState=[e,t],e)}function U0(e,t){var i=wi();t=t===void 0?null:t;var r=i.memoizedState;return r!==null&&t!==null&&dd(t,r[1])?r[0]:(e=e(),i.memoizedState=[e,t],e)}function j0(e,t,i){return lo&21?(Pi(i,t)||(i=zm(),Qe.lanes|=i,co|=i,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,At=!0),e.memoizedState=i)}function $_(e,t){var i=Pe;Pe=i!==0&&4>i?i:4,e(!0);var r=su.transition;su.transition={};try{e(!1),t()}finally{Pe=i,su.transition=r}}function H0(){return wi().memoizedState}function eg(e,t,i){var r=fn(e);if(i={lane:r,action:i,hasEagerState:!1,eagerState:null,next:null},D0(e))z0(t,i);else if(i=Y0(e,t,i,r),i!==null){var n=Pt();Mi(i,e,r,n),A0(i,t,r)}}function tg(e,t,i){var r=fn(e),n={lane:r,action:i,hasEagerState:!1,eagerState:null,next:null};if(D0(e))z0(t,n);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var s=t.lastRenderedState,u=o(s,i);if(n.hasEagerState=!0,n.eagerState=u,Pi(u,s)){var l=t.interleaved;l===null?(n.next=n,ld(t)):(n.next=l.next,l.next=n),t.interleaved=n;return}}catch{}finally{}i=Y0(e,t,n,r),i!==null&&(n=Pt(),Mi(i,e,r,n),A0(i,t,r))}}function D0(e){var t=e.alternate;return e===Qe||t!==null&&t===Qe}function z0(e,t){nl=Qc=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function A0(e,t,i){if(i&4194240){var r=t.lanes;r&=e.pendingLanes,i|=r,t.lanes=i,Hh(e,i)}}var qc={readContext:Li,useCallback:Lt,useContext:Lt,useEffect:Lt,useImperativeHandle:Lt,useInsertionEffect:Lt,useLayoutEffect:Lt,useMemo:Lt,useReducer:Lt,useRef:Lt,useState:Lt,useDebugValue:Lt,useDeferredValue:Lt,useTransition:Lt,useMutableSource:Lt,useSyncExternalStore:Lt,useId:Lt,unstable_isNewReconciler:!1},ig={readContext:Li,useCallback:function(e,t){return qi().memoizedState=[e,t===void 0?null:t],e},useContext:Li,useEffect:ip,useImperativeHandle:function(e,t,i){return i=i!=null?i.concat([e]):null,Gc(4194308,4,F0.bind(null,t,e),i)},useLayoutEffect:function(e,t){return Gc(4194308,4,e,t)},useInsertionEffect:function(e,t){return Gc(4,2,e,t)},useMemo:function(e,t){var i=qi();return t=t===void 0?null:t,e=e(),i.memoizedState=[e,t],e},useReducer:function(e,t,i){var r=qi();return t=i!==void 0?i(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=eg.bind(null,Qe,e),[r.memoizedState,e]},useRef:function(e){var t=qi();return e={current:e},t.memoizedState=e},useState:tp,useDebugValue:yd,useDeferredValue:function(e){return qi().memoizedState=e},useTransition:function(){var e=tp(!1),t=e[0];return e=$_.bind(null,e[1]),qi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,i){var r=Qe,n=qi();if(Ue){if(i===void 0)throw Error(me(407));i=i()}else{if(i=t(),_t===null)throw Error(me(349));lo&30||E0(r,t,i)}n.memoizedState=i;var o={value:i,getSnapshot:t};return n.queue=o,ip(x0.bind(null,r,o,e),[e]),r.flags|=2048,Ll(9,k0.bind(null,r,o,i,t),void 0,null),i},useId:function(){var e=qi(),t=_t.identifierPrefix;if(Ue){var i=Yr,r=Cr;i=(r&~(1<<32-Ki(r)-1)).toString(32)+i,t=":"+t+"R"+i,i=Wl++,0<i&&(t+="H"+i.toString(32)),t+=":"}else i=q_++,t=":"+t+"r"+i.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},rg={readContext:Li,useCallback:B0,useContext:Li,useEffect:md,useImperativeHandle:O0,useInsertionEffect:N0,useLayoutEffect:J0,useMemo:U0,useReducer:lu,useRef:P0,useState:function(){return lu(Il)},useDebugValue:yd,useDeferredValue:function(e){var t=wi();return j0(t,dt.memoizedState,e)},useTransition:function(){var e=lu(Il)[0],t=wi().memoizedState;return[e,t]},useMutableSource:X0,useSyncExternalStore:V0,useId:H0,unstable_isNewReconciler:!1},ng={readContext:Li,useCallback:B0,useContext:Li,useEffect:md,useImperativeHandle:O0,useInsertionEffect:N0,useLayoutEffect:J0,useMemo:U0,useReducer:cu,useRef:P0,useState:function(){return cu(Il)},useDebugValue:yd,useDeferredValue:function(e){var t=wi();return dt===null?t.memoizedState=e:j0(t,dt.memoizedState,e)},useTransition:function(){var e=cu(Il)[0],t=wi().memoizedState;return[e,t]},useMutableSource:X0,useSyncExternalStore:V0,useId:H0,unstable_isNewReconciler:!1};function Ss(e,t){try{var i="",r=t;do i+=X1(r),r=r.return;while(r);var n=i}catch(o){n=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:n,digest:null}}function au(e,t,i){return{value:e,source:null,stack:i??null,digest:t??null}}function nh(e,t){try{console.error(t.value)}catch(i){setTimeout(function(){throw i})}}var og=typeof WeakMap=="function"?WeakMap:Map;function Q0(e,t,i){i=Xr(-1,i),i.tag=3,i.payload={element:null};var r=t.value;return i.callback=function(){ea||(ea=!0,ph=r),nh(e,t)},i}function q0(e,t,i){i=Xr(-1,i),i.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var n=t.value;i.payload=function(){return r(n)},i.callback=function(){nh(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(i.callback=function(){nh(e,t),typeof r!="function"&&(dn===null?dn=new Set([this]):dn.add(this));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),i}function rp(e,t,i){var r=e.pingCache;if(r===null){r=e.pingCache=new og;var n=new Set;r.set(t,n)}else n=r.get(t),n===void 0&&(n=new Set,r.set(t,n));n.has(i)||(n.add(i),e=gg.bind(null,e,t,i),t.then(e,e))}function np(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function op(e,t,i,r,n){return e.mode&1?(e.flags|=65536,e.lanes=n,e):(e===t?e.flags|=65536:(e.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(t=Xr(-1,1),t.tag=2,hn(i,t,1))),i.lanes|=1),e)}var sg=Kr.ReactCurrentOwner,At=!1;function Kt(e,t,i,r){t.child=e===null?w0(t,null,i,r):gs(t,e.child,i,r)}function sp(e,t,i,r,n){i=i.render;var o=t.ref;return ss(t,n),r=fd(e,t,i,r,o,n),i=pd(),e!==null&&!At?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,xr(e,t,n)):(Ue&&i&&td(t),t.flags|=1,Kt(e,t,r,n),t.child)}function lp(e,t,i,r,n){if(e===null){var o=i.type;return typeof o=="function"&&!Cd(o)&&o.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(t.tag=15,t.type=o,$0(e,t,o,r,n)):(e=Wc(i.type,null,r,t,t.mode,n),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&n)){var s=o.memoizedProps;if(i=i.compare,i=i!==null?i:Sl,i(s,r)&&e.ref===t.ref)return xr(e,t,n)}return t.flags|=1,e=pn(o,r),e.ref=t.ref,e.return=t,t.child=e}function $0(e,t,i,r,n){if(e!==null){var o=e.memoizedProps;if(Sl(o,r)&&e.ref===t.ref)if(At=!1,t.pendingProps=r=o,(e.lanes&n)!==0)e.flags&131072&&(At=!0);else return t.lanes=e.lanes,xr(e,t,n)}return oh(e,t,i,r,n)}function ey(e,t,i){var r=t.pendingProps,n=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Fe($o,ai),ai|=i;else{if(!(i&1073741824))return e=o!==null?o.baseLanes|i:i,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Fe($o,ai),ai|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:i,Fe($o,ai),ai|=r}else o!==null?(r=o.baseLanes|i,t.memoizedState=null):r=i,Fe($o,ai),ai|=r;return Kt(e,t,n,i),t.child}function ty(e,t){var i=t.ref;(e===null&&i!==null||e!==null&&e.ref!==i)&&(t.flags|=512,t.flags|=2097152)}function oh(e,t,i,r,n){var o=qt(i)?oo:Xt.current;return o=vs(t,o),ss(t,n),i=fd(e,t,i,r,o,n),r=pd(),e!==null&&!At?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,xr(e,t,n)):(Ue&&r&&td(t),t.flags|=1,Kt(e,t,i,n),t.child)}function cp(e,t,i,r,n){if(qt(i)){var o=!0;Bc(t)}else o=!1;if(ss(t,n),t.stateNode===null)Cc(e,t),I0(t,i,r),rh(t,i,r,n),r=!0;else if(e===null){var s=t.stateNode,u=t.memoizedProps;s.props=u;var l=s.context,a=i.contextType;typeof a=="object"&&a!==null?a=Li(a):(a=qt(i)?oo:Xt.current,a=vs(t,a));var h=i.getDerivedStateFromProps,p=typeof h=="function"||typeof s.getSnapshotBeforeUpdate=="function";p||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(u!==r||l!==a)&&$f(t,s,r,a),en=!1;var d=t.memoizedState;s.state=d,zc(t,r,s,n),l=t.memoizedState,u!==r||d!==l||Qt.current||en?(typeof h=="function"&&(ih(t,i,h,r),l=t.memoizedState),(u=en||qf(t,i,u,r,d,l,a))?(p||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=a,r=u):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,R0(e,t),u=t.memoizedProps,a=t.type===t.elementType?u:Ei(t.type,u),s.props=a,p=t.pendingProps,d=s.context,l=i.contextType,typeof l=="object"&&l!==null?l=Li(l):(l=qt(i)?oo:Xt.current,l=vs(t,l));var c=i.getDerivedStateFromProps;(h=typeof c=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(u!==p||d!==l)&&$f(t,s,r,l),en=!1,d=t.memoizedState,s.state=d,zc(t,r,s,n);var y=t.memoizedState;u!==p||d!==y||Qt.current||en?(typeof c=="function"&&(ih(t,i,c,r),y=t.memoizedState),(a=en||qf(t,i,a,r,d,y,l)||!1)?(h||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,y,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,y,l)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||u===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=y),s.props=r,s.state=y,s.context=l,r=a):(typeof s.componentDidUpdate!="function"||u===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return sh(e,t,i,r,o,n)}function sh(e,t,i,r,n,o){ty(e,t);var s=(t.flags&128)!==0;if(!r&&!s)return n&&Hf(t,i,!1),xr(e,t,o);r=t.stateNode,sg.current=t;var u=s&&typeof i.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&s?(t.child=gs(t,e.child,null,o),t.child=gs(t,null,u,o)):Kt(e,t,u,o),t.memoizedState=r.state,n&&Hf(t,i,!0),t.child}function iy(e){var t=e.stateNode;t.pendingContext?jf(e,t.pendingContext,t.pendingContext!==t.context):t.context&&jf(e,t.context,!1),ad(e,t.containerInfo)}function ap(e,t,i,r,n){return _s(),rd(n),t.flags|=256,Kt(e,t,i,r),t.child}var lh={dehydrated:null,treeContext:null,retryLane:0};function ch(e){return{baseLanes:e,cachePool:null,transitions:null}}function ry(e,t,i){var r=t.pendingProps,n=Ae.current,o=!1,s=(t.flags&128)!==0,u;if((u=s)||(u=e!==null&&e.memoizedState===null?!1:(n&2)!==0),u?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(n|=1),Fe(Ae,n&1),e===null)return eh(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(s=r.children,e=r.fallback,o?(r=t.mode,o=t.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=Ca(s,r,0,null),e=io(e,r,i,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=ch(i),t.memoizedState=lh,e):vd(t,s));if(n=e.memoizedState,n!==null&&(u=n.dehydrated,u!==null))return lg(e,t,s,r,u,n,i);if(o){o=r.fallback,s=t.mode,n=e.child,u=n.sibling;var l={mode:"hidden",children:r.children};return!(s&1)&&t.child!==n?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=pn(n,l),r.subtreeFlags=n.subtreeFlags&14680064),u!==null?o=pn(u,o):(o=io(o,s,i,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,s=e.child.memoizedState,s=s===null?ch(i):{baseLanes:s.baseLanes|i,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=e.childLanes&~i,t.memoizedState=lh,r}return o=e.child,e=o.sibling,r=pn(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=i),r.return=t,r.sibling=null,e!==null&&(i=t.deletions,i===null?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=r,t.memoizedState=null,r}function vd(e,t){return t=Ca({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function sc(e,t,i,r){return r!==null&&rd(r),gs(t,e.child,null,i),e=vd(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function lg(e,t,i,r,n,o,s){if(i)return t.flags&256?(t.flags&=-257,r=au(Error(me(422))),sc(e,t,s,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,n=t.mode,r=Ca({mode:"visible",children:r.children},n,0,null),o=io(o,n,s,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&gs(t,e.child,null,s),t.child.memoizedState=ch(s),t.memoizedState=lh,o);if(!(t.mode&1))return sc(e,t,s,null);if(n.data==="$!"){if(r=n.nextSibling&&n.nextSibling.dataset,r)var u=r.dgst;return r=u,o=Error(me(419)),r=au(o,r,void 0),sc(e,t,s,r)}if(u=(s&e.childLanes)!==0,At||u){if(r=_t,r!==null){switch(s&-s){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}n=n&(r.suspendedLanes|s)?0:n,n!==0&&n!==o.retryLane&&(o.retryLane=n,kr(e,n),Mi(r,e,n,-1))}return Gd(),r=au(Error(me(421))),sc(e,t,s,r)}return n.data==="$?"?(t.flags|=128,t.child=e.child,t=Zg.bind(null,e),n._reactRetry=t,null):(e=o.treeContext,ui=un(n.nextSibling),di=t,Ue=!0,xi=null,e!==null&&(Yi[Ri++]=Cr,Yi[Ri++]=Yr,Yi[Ri++]=so,Cr=e.id,Yr=e.overflow,so=t),t=vd(t,r.children),t.flags|=4096,t)}function up(e,t,i){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),th(e.return,t,i)}function uu(e,t,i,r,n){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:i,tailMode:n}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=i,o.tailMode=n)}function ny(e,t,i){var r=t.pendingProps,n=r.revealOrder,o=r.tail;if(Kt(e,t,r.children,i),r=Ae.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&up(e,i,t);else if(e.tag===19)up(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Fe(Ae,r),!(t.mode&1))t.memoizedState=null;else switch(n){case"forwards":for(i=t.child,n=null;i!==null;)e=i.alternate,e!==null&&Ac(e)===null&&(n=i),i=i.sibling;i=n,i===null?(n=t.child,t.child=null):(n=i.sibling,i.sibling=null),uu(t,!1,n,i,o);break;case"backwards":for(i=null,n=t.child,t.child=null;n!==null;){if(e=n.alternate,e!==null&&Ac(e)===null){t.child=n;break}e=n.sibling,n.sibling=i,i=n,n=e}uu(t,!0,i,null,o);break;case"together":uu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Cc(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function xr(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),co|=t.lanes,!(i&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(me(153));if(t.child!==null){for(e=t.child,i=pn(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=pn(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function cg(e,t,i){switch(t.tag){case 3:iy(t),_s();break;case 5:T0(t);break;case 1:qt(t.type)&&Bc(t);break;case 4:ad(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,n=t.memoizedProps.value;Fe(Hc,r._currentValue),r._currentValue=n;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Fe(Ae,Ae.current&1),t.flags|=128,null):i&t.child.childLanes?ry(e,t,i):(Fe(Ae,Ae.current&1),e=xr(e,t,i),e!==null?e.sibling:null);Fe(Ae,Ae.current&1);break;case 19:if(r=(i&t.childLanes)!==0,e.flags&128){if(r)return ny(e,t,i);t.flags|=128}if(n=t.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),Fe(Ae,Ae.current),r)break;return null;case 22:case 23:return t.lanes=0,ey(e,t,i)}return xr(e,t,i)}var oy,ah,sy,ly;oy=function(e,t){for(var i=t.child;i!==null;){if(i.tag===5||i.tag===6)e.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};ah=function(){};sy=function(e,t,i,r){var n=e.memoizedProps;if(n!==r){e=t.stateNode,zn(rr.current);var o=null;switch(i){case"input":n=Tu(e,n),r=Tu(e,r),o=[];break;case"select":n=qe({},n,{value:void 0}),r=qe({},r,{value:void 0}),o=[];break;case"textarea":n=Eu(e,n),r=Eu(e,r),o=[];break;default:typeof n.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Fc)}xu(i,r);var s;i=null;for(a in n)if(!r.hasOwnProperty(a)&&n.hasOwnProperty(a)&&n[a]!=null)if(a==="style"){var u=n[a];for(s in u)u.hasOwnProperty(s)&&(i||(i={}),i[s]="")}else a!=="dangerouslySetInnerHTML"&&a!=="children"&&a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(pl.hasOwnProperty(a)?o||(o=[]):(o=o||[]).push(a,null));for(a in r){var l=r[a];if(u=n!=null?n[a]:void 0,r.hasOwnProperty(a)&&l!==u&&(l!=null||u!=null))if(a==="style")if(u){for(s in u)!u.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(i||(i={}),i[s]="");for(s in l)l.hasOwnProperty(s)&&u[s]!==l[s]&&(i||(i={}),i[s]=l[s])}else i||(o||(o=[]),o.push(a,i)),i=l;else a==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,u=u?u.__html:void 0,l!=null&&u!==l&&(o=o||[]).push(a,l)):a==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(a,""+l):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&(pl.hasOwnProperty(a)?(l!=null&&a==="onScroll"&&Oe("scroll",e),o||u===l||(o=[])):(o=o||[]).push(a,l))}i&&(o=o||[]).push("style",i);var a=o;(t.updateQueue=a)&&(t.flags|=4)}};ly=function(e,t,i,r){i!==r&&(t.flags|=4)};function Js(e,t){if(!Ue)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var r=null;i!==null;)i.alternate!==null&&(r=i),i=i.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function wt(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,r=0;if(t)for(var n=e.child;n!==null;)i|=n.lanes|n.childLanes,r|=n.subtreeFlags&14680064,r|=n.flags&14680064,n.return=e,n=n.sibling;else for(n=e.child;n!==null;)i|=n.lanes|n.childLanes,r|=n.subtreeFlags,r|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=r,e.childLanes=i,t}function ag(e,t,i){var r=t.pendingProps;switch(id(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wt(t),null;case 1:return qt(t.type)&&Oc(),wt(t),null;case 3:return r=t.stateNode,Zs(),Be(Qt),Be(Xt),hd(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(nc(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,xi!==null&&(vh(xi),xi=null))),ah(e,t),wt(t),null;case 5:ud(t);var n=zn(Rl.current);if(i=t.type,e!==null&&t.stateNode!=null)sy(e,t,i,r,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(me(166));return wt(t),null}if(e=zn(rr.current),nc(t)){r=t.stateNode,i=t.type;var o=t.memoizedProps;switch(r[$i]=t,r[Cl]=o,e=(t.mode&1)!==0,i){case"dialog":Oe("cancel",r),Oe("close",r);break;case"iframe":case"object":case"embed":Oe("load",r);break;case"video":case"audio":for(n=0;n<qs.length;n++)Oe(qs[n],r);break;case"source":Oe("error",r);break;case"img":case"image":case"link":Oe("error",r),Oe("load",r);break;case"details":Oe("toggle",r);break;case"input":gf(r,o),Oe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Oe("invalid",r);break;case"textarea":Sf(r,o),Oe("invalid",r)}xu(i,o),n=null;for(var s in o)if(o.hasOwnProperty(s)){var u=o[s];s==="children"?typeof u=="string"?r.textContent!==u&&(o.suppressHydrationWarning!==!0&&rc(r.textContent,u,e),n=["children",u]):typeof u=="number"&&r.textContent!==""+u&&(o.suppressHydrationWarning!==!0&&rc(r.textContent,u,e),n=["children",""+u]):pl.hasOwnProperty(s)&&u!=null&&s==="onScroll"&&Oe("scroll",r)}switch(i){case"input":zl(r),Zf(r,o,!0);break;case"textarea":zl(r),bf(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Fc)}r=n,t.updateQueue=r,r!==null&&(t.flags|=4)}else{s=n.nodeType===9?n:n.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Em(i)),e==="http://www.w3.org/1999/xhtml"?i==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=s.createElement(i,{is:r.is}):(e=s.createElement(i),i==="select"&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,i),e[$i]=t,e[Cl]=r,oy(e,t,!1,!1),t.stateNode=e;e:{switch(s=Ku(i,r),i){case"dialog":Oe("cancel",e),Oe("close",e),n=r;break;case"iframe":case"object":case"embed":Oe("load",e),n=r;break;case"video":case"audio":for(n=0;n<qs.length;n++)Oe(qs[n],e);n=r;break;case"source":Oe("error",e),n=r;break;case"img":case"image":case"link":Oe("error",e),Oe("load",e),n=r;break;case"details":Oe("toggle",e),n=r;break;case"input":gf(e,r),n=Tu(e,r),Oe("invalid",e);break;case"option":n=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},n=qe({},r,{value:void 0}),Oe("invalid",e);break;case"textarea":Sf(e,r),n=Eu(e,r),Oe("invalid",e);break;default:n=r}xu(i,n),u=n;for(o in u)if(u.hasOwnProperty(o)){var l=u[o];o==="style"?Km(e,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&km(e,l)):o==="children"?typeof l=="string"?(i!=="textarea"||l!=="")&&ml(e,l):typeof l=="number"&&ml(e,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(pl.hasOwnProperty(o)?l!=null&&o==="onScroll"&&Oe("scroll",e):l!=null&&Jh(e,o,l,s))}switch(i){case"input":zl(e),Zf(e,r,!1);break;case"textarea":zl(e),bf(e);break;case"option":r.value!=null&&e.setAttribute("value",""+gn(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?is(e,!!r.multiple,o,!1):r.defaultValue!=null&&is(e,!!r.multiple,r.defaultValue,!0);break;default:typeof n.onClick=="function"&&(e.onclick=Fc)}switch(i){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return wt(t),null;case 6:if(e&&t.stateNode!=null)ly(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(me(166));if(i=zn(Rl.current),zn(rr.current),nc(t)){if(r=t.stateNode,i=t.memoizedProps,r[$i]=t,(o=r.nodeValue!==i)&&(e=di,e!==null))switch(e.tag){case 3:rc(r.nodeValue,i,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&rc(r.nodeValue,i,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(i.nodeType===9?i:i.ownerDocument).createTextNode(r),r[$i]=t,t.stateNode=r}return wt(t),null;case 13:if(Be(Ae),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ue&&ui!==null&&t.mode&1&&!(t.flags&128))C0(),_s(),t.flags|=98560,o=!1;else if(o=nc(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(me(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(me(317));o[$i]=t}else _s(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;wt(t),o=!1}else xi!==null&&(vh(xi),xi=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=i,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ae.current&1?ft===0&&(ft=3):Gd())),t.updateQueue!==null&&(t.flags|=4),wt(t),null);case 4:return Zs(),ah(e,t),e===null&&bl(t.stateNode.containerInfo),wt(t),null;case 10:return sd(t.type._context),wt(t),null;case 17:return qt(t.type)&&Oc(),wt(t),null;case 19:if(Be(Ae),o=t.memoizedState,o===null)return wt(t),null;if(r=(t.flags&128)!==0,s=o.rendering,s===null)if(r)Js(o,!1);else{if(ft!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=Ac(e),s!==null){for(t.flags|=128,Js(o,!1),r=s.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=i,i=t.child;i!==null;)o=i,e=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return Fe(Ae,Ae.current&1|2),t.child}e=e.sibling}o.tail!==null&&st()>bs&&(t.flags|=128,r=!0,Js(o,!1),t.lanes=4194304)}else{if(!r)if(e=Ac(s),e!==null){if(t.flags|=128,r=!0,i=e.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),Js(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!Ue)return wt(t),null}else 2*st()-o.renderingStartTime>bs&&i!==1073741824&&(t.flags|=128,r=!0,Js(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(i=o.last,i!==null?i.sibling=s:t.child=s,o.last=s)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=st(),t.sibling=null,i=Ae.current,Fe(Ae,r?i&1|2:i&1),t):(wt(t),null);case 22:case 23:return bd(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?ai&1073741824&&(wt(t),t.subtreeFlags&6&&(t.flags|=8192)):wt(t),null;case 24:return null;case 25:return null}throw Error(me(156,t.tag))}function ug(e,t){switch(id(t),t.tag){case 1:return qt(t.type)&&Oc(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Zs(),Be(Qt),Be(Xt),hd(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return ud(t),null;case 13:if(Be(Ae),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(me(340));_s()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Be(Ae),null;case 4:return Zs(),null;case 10:return sd(t.type._context),null;case 22:case 23:return bd(),null;case 24:return null;default:return null}}var lc=!1,Tt=!1,hg=typeof WeakSet=="function"?WeakSet:Set,Ce=null;function qo(e,t){var i=e.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(r){tt(e,t,r)}else i.current=null}function uh(e,t,i){try{i()}catch(r){tt(e,t,r)}}var hp=!1;function dg(e,t){if(Hu=Pc,e=h0(),ed(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var r=i.getSelection&&i.getSelection();if(r&&r.rangeCount!==0){i=r.anchorNode;var n=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{i.nodeType,o.nodeType}catch{i=null;break e}var s=0,u=-1,l=-1,a=0,h=0,p=e,d=null;t:for(;;){for(var c;p!==i||n!==0&&p.nodeType!==3||(u=s+n),p!==o||r!==0&&p.nodeType!==3||(l=s+r),p.nodeType===3&&(s+=p.nodeValue.length),(c=p.firstChild)!==null;)d=p,p=c;for(;;){if(p===e)break t;if(d===i&&++a===n&&(u=s),d===o&&++h===r&&(l=s),(c=p.nextSibling)!==null)break;p=d,d=p.parentNode}p=c}i=u===-1||l===-1?null:{start:u,end:l}}else i=null}i=i||{start:0,end:0}}else i=null;for(Du={focusedElem:e,selectionRange:i},Pc=!1,Ce=t;Ce!==null;)if(t=Ce,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ce=e;else for(;Ce!==null;){t=Ce;try{var y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var _=y.memoizedProps,g=y.memoizedState,m=t.stateNode,f=m.getSnapshotBeforeUpdate(t.elementType===t.type?_:Ei(t.type,_),g);m.__reactInternalSnapshotBeforeUpdate=f}break;case 3:var v=t.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(me(163))}}catch(Z){tt(t,t.return,Z)}if(e=t.sibling,e!==null){e.return=t.return,Ce=e;break}Ce=t.return}return y=hp,hp=!1,y}function ol(e,t,i){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var n=r=r.next;do{if((n.tag&e)===e){var o=n.destroy;n.destroy=void 0,o!==void 0&&uh(t,i,o)}n=n.next}while(n!==r)}}function ba(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var i=t=t.next;do{if((i.tag&e)===e){var r=i.create;i.destroy=r()}i=i.next}while(i!==t)}}function hh(e){var t=e.ref;if(t!==null){var i=e.stateNode;switch(e.tag){case 5:e=i;break;default:e=i}typeof t=="function"?t(e):t.current=e}}function cy(e){var t=e.alternate;t!==null&&(e.alternate=null,cy(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[$i],delete t[Cl],delete t[Qu],delete t[D_],delete t[z_])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ay(e){return e.tag===5||e.tag===3||e.tag===4}function dp(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||ay(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function dh(e,t,i){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?i.nodeType===8?i.parentNode.insertBefore(e,t):i.insertBefore(e,t):(i.nodeType===8?(t=i.parentNode,t.insertBefore(e,i)):(t=i,t.appendChild(e)),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=Fc));else if(r!==4&&(e=e.child,e!==null))for(dh(e,t,i),e=e.sibling;e!==null;)dh(e,t,i),e=e.sibling}function fh(e,t,i){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(fh(e,t,i),e=e.sibling;e!==null;)fh(e,t,i),e=e.sibling}var Gt=null,ki=!1;function Dr(e,t,i){for(i=i.child;i!==null;)uy(e,t,i),i=i.sibling}function uy(e,t,i){if(ir&&typeof ir.onCommitFiberUnmount=="function")try{ir.onCommitFiberUnmount(pa,i)}catch{}switch(i.tag){case 5:Tt||qo(i,t);case 6:var r=Gt,n=ki;Gt=null,Dr(e,t,i),Gt=r,ki=n,Gt!==null&&(ki?(e=Gt,i=i.stateNode,e.nodeType===8?e.parentNode.removeChild(i):e.removeChild(i)):Gt.removeChild(i.stateNode));break;case 18:Gt!==null&&(ki?(e=Gt,i=i.stateNode,e.nodeType===8?ru(e.parentNode,i):e.nodeType===1&&ru(e,i),gl(e)):ru(Gt,i.stateNode));break;case 4:r=Gt,n=ki,Gt=i.stateNode.containerInfo,ki=!0,Dr(e,t,i),Gt=r,ki=n;break;case 0:case 11:case 14:case 15:if(!Tt&&(r=i.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){n=r=r.next;do{var o=n,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&uh(i,t,s),n=n.next}while(n!==r)}Dr(e,t,i);break;case 1:if(!Tt&&(qo(i,t),r=i.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=i.memoizedProps,r.state=i.memoizedState,r.componentWillUnmount()}catch(u){tt(i,t,u)}Dr(e,t,i);break;case 21:Dr(e,t,i);break;case 22:i.mode&1?(Tt=(r=Tt)||i.memoizedState!==null,Dr(e,t,i),Tt=r):Dr(e,t,i);break;default:Dr(e,t,i)}}function fp(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var i=e.stateNode;i===null&&(i=e.stateNode=new hg),t.forEach(function(r){var n=Sg.bind(null,e,r);i.has(r)||(i.add(r),r.then(n,n))})}}function Vi(e,t){var i=t.deletions;if(i!==null)for(var r=0;r<i.length;r++){var n=i[r];try{var o=e,s=t,u=s;e:for(;u!==null;){switch(u.tag){case 5:Gt=u.stateNode,ki=!1;break e;case 3:Gt=u.stateNode.containerInfo,ki=!0;break e;case 4:Gt=u.stateNode.containerInfo,ki=!0;break e}u=u.return}if(Gt===null)throw Error(me(160));uy(o,s,n),Gt=null,ki=!1;var l=n.alternate;l!==null&&(l.return=null),n.return=null}catch(a){tt(n,t,a)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)hy(t,e),t=t.sibling}function hy(e,t){var i=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Vi(t,e),Ai(e),r&4){try{ol(3,e,e.return),ba(3,e)}catch(_){tt(e,e.return,_)}try{ol(5,e,e.return)}catch(_){tt(e,e.return,_)}}break;case 1:Vi(t,e),Ai(e),r&512&&i!==null&&qo(i,i.return);break;case 5:if(Vi(t,e),Ai(e),r&512&&i!==null&&qo(i,i.return),e.flags&32){var n=e.stateNode;try{ml(n,"")}catch(_){tt(e,e.return,_)}}if(r&4&&(n=e.stateNode,n!=null)){var o=e.memoizedProps,s=i!==null?i.memoizedProps:o,u=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{u==="input"&&o.type==="radio"&&o.name!=null&&Xm(n,o),Ku(u,s);var a=Ku(u,o);for(s=0;s<l.length;s+=2){var h=l[s],p=l[s+1];h==="style"?Km(n,p):h==="dangerouslySetInnerHTML"?km(n,p):h==="children"?ml(n,p):Jh(n,h,p,a)}switch(u){case"input":Xu(n,o);break;case"textarea":Vm(n,o);break;case"select":var d=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!o.multiple;var c=o.value;c!=null?is(n,!!o.multiple,c,!1):d!==!!o.multiple&&(o.defaultValue!=null?is(n,!!o.multiple,o.defaultValue,!0):is(n,!!o.multiple,o.multiple?[]:"",!1))}n[Cl]=o}catch(_){tt(e,e.return,_)}}break;case 6:if(Vi(t,e),Ai(e),r&4){if(e.stateNode===null)throw Error(me(162));n=e.stateNode,o=e.memoizedProps;try{n.nodeValue=o}catch(_){tt(e,e.return,_)}}break;case 3:if(Vi(t,e),Ai(e),r&4&&i!==null&&i.memoizedState.isDehydrated)try{gl(t.containerInfo)}catch(_){tt(e,e.return,_)}break;case 4:Vi(t,e),Ai(e);break;case 13:Vi(t,e),Ai(e),n=e.child,n.flags&8192&&(o=n.memoizedState!==null,n.stateNode.isHidden=o,!o||n.alternate!==null&&n.alternate.memoizedState!==null||(Zd=st())),r&4&&fp(e);break;case 22:if(h=i!==null&&i.memoizedState!==null,e.mode&1?(Tt=(a=Tt)||h,Vi(t,e),Tt=a):Vi(t,e),Ai(e),r&8192){if(a=e.memoizedState!==null,(e.stateNode.isHidden=a)&&!h&&e.mode&1)for(Ce=e,h=e.child;h!==null;){for(p=Ce=h;Ce!==null;){switch(d=Ce,c=d.child,d.tag){case 0:case 11:case 14:case 15:ol(4,d,d.return);break;case 1:qo(d,d.return);var y=d.stateNode;if(typeof y.componentWillUnmount=="function"){r=d,i=d.return;try{t=r,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(_){tt(r,i,_)}}break;case 5:qo(d,d.return);break;case 22:if(d.memoizedState!==null){mp(p);continue}}c!==null?(c.return=d,Ce=c):mp(p)}h=h.sibling}e:for(h=null,p=e;;){if(p.tag===5){if(h===null){h=p;try{n=p.stateNode,a?(o=n.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(u=p.stateNode,l=p.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,u.style.display=xm("display",s))}catch(_){tt(e,e.return,_)}}}else if(p.tag===6){if(h===null)try{p.stateNode.nodeValue=a?"":p.memoizedProps}catch(_){tt(e,e.return,_)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===e)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;p.sibling===null;){if(p.return===null||p.return===e)break e;h===p&&(h=null),p=p.return}h===p&&(h=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Vi(t,e),Ai(e),r&4&&fp(e);break;case 21:break;default:Vi(t,e),Ai(e)}}function Ai(e){var t=e.flags;if(t&2){try{e:{for(var i=e.return;i!==null;){if(ay(i)){var r=i;break e}i=i.return}throw Error(me(160))}switch(r.tag){case 5:var n=r.stateNode;r.flags&32&&(ml(n,""),r.flags&=-33);var o=dp(e);fh(e,o,n);break;case 3:case 4:var s=r.stateNode.containerInfo,u=dp(e);dh(e,u,s);break;default:throw Error(me(161))}}catch(l){tt(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function fg(e,t,i){Ce=e,dy(e)}function dy(e,t,i){for(var r=(e.mode&1)!==0;Ce!==null;){var n=Ce,o=n.child;if(n.tag===22&&r){var s=n.memoizedState!==null||lc;if(!s){var u=n.alternate,l=u!==null&&u.memoizedState!==null||Tt;u=lc;var a=Tt;if(lc=s,(Tt=l)&&!a)for(Ce=n;Ce!==null;)s=Ce,l=s.child,s.tag===22&&s.memoizedState!==null?yp(n):l!==null?(l.return=s,Ce=l):yp(n);for(;o!==null;)Ce=o,dy(o),o=o.sibling;Ce=n,lc=u,Tt=a}pp(e)}else n.subtreeFlags&8772&&o!==null?(o.return=n,Ce=o):pp(e)}}function pp(e){for(;Ce!==null;){var t=Ce;if(t.flags&8772){var i=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Tt||ba(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Tt)if(i===null)r.componentDidMount();else{var n=t.elementType===t.type?i.memoizedProps:Ei(t.type,i.memoizedProps);r.componentDidUpdate(n,i.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&Qf(t,o,r);break;case 3:var s=t.updateQueue;if(s!==null){if(i=null,t.child!==null)switch(t.child.tag){case 5:i=t.child.stateNode;break;case 1:i=t.child.stateNode}Qf(t,s,i)}break;case 5:var u=t.stateNode;if(i===null&&t.flags&4){i=u;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&i.focus();break;case"img":l.src&&(i.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var a=t.alternate;if(a!==null){var h=a.memoizedState;if(h!==null){var p=h.dehydrated;p!==null&&gl(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(me(163))}Tt||t.flags&512&&hh(t)}catch(d){tt(t,t.return,d)}}if(t===e){Ce=null;break}if(i=t.sibling,i!==null){i.return=t.return,Ce=i;break}Ce=t.return}}function mp(e){for(;Ce!==null;){var t=Ce;if(t===e){Ce=null;break}var i=t.sibling;if(i!==null){i.return=t.return,Ce=i;break}Ce=t.return}}function yp(e){for(;Ce!==null;){var t=Ce;try{switch(t.tag){case 0:case 11:case 15:var i=t.return;try{ba(4,t)}catch(l){tt(t,i,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var n=t.return;try{r.componentDidMount()}catch(l){tt(t,n,l)}}var o=t.return;try{hh(t)}catch(l){tt(t,o,l)}break;case 5:var s=t.return;try{hh(t)}catch(l){tt(t,s,l)}}}catch(l){tt(t,t.return,l)}if(t===e){Ce=null;break}var u=t.sibling;if(u!==null){u.return=t.return,Ce=u;break}Ce=t.return}}var pg=Math.ceil,$c=Kr.ReactCurrentDispatcher,_d=Kr.ReactCurrentOwner,Ii=Kr.ReactCurrentBatchConfig,Xe=0,_t=null,ut=null,Ct=0,ai=0,$o=bn(0),ft=0,wl=null,co=0,Ga=0,gd=0,sl=null,zt=null,Zd=0,bs=1/0,br=null,ea=!1,ph=null,dn=null,cc=!1,on=null,ta=0,ll=0,mh=null,Yc=-1,Rc=0;function Pt(){return Xe&6?st():Yc!==-1?Yc:Yc=st()}function fn(e){return e.mode&1?Xe&2&&Ct!==0?Ct&-Ct:Q_.transition!==null?(Rc===0&&(Rc=zm()),Rc):(e=Pe,e!==0||(e=window.event,e=e===void 0?16:i0(e.type)),e):1}function Mi(e,t,i,r){if(50<ll)throw ll=0,mh=null,Error(me(185));kl(e,i,r),(!(Xe&2)||e!==_t)&&(e===_t&&(!(Xe&2)&&(Ga|=i),ft===4&&rn(e,Ct)),$t(e,r),i===1&&Xe===0&&!(t.mode&1)&&(bs=st()+500,ga&&Gn()))}function $t(e,t){var i=e.callbackNode;Q1(e,t);var r=Mc(e,e===_t?Ct:0);if(r===0)i!==null&&Yf(i),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(i!=null&&Yf(i),t===1)e.tag===0?A_(vp.bind(null,e)):S0(vp.bind(null,e)),j_(function(){!(Xe&6)&&Gn()}),i=null;else{switch(Am(r)){case 1:i=jh;break;case 4:i=Hm;break;case 16:i=Kc;break;case 536870912:i=Dm;break;default:i=Kc}i=Zy(i,fy.bind(null,e))}e.callbackPriority=t,e.callbackNode=i}}function fy(e,t){if(Yc=-1,Rc=0,Xe&6)throw Error(me(327));var i=e.callbackNode;if(ls()&&e.callbackNode!==i)return null;var r=Mc(e,e===_t?Ct:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=ia(e,r);else{t=r;var n=Xe;Xe|=2;var o=my();(_t!==e||Ct!==t)&&(br=null,bs=st()+500,to(e,t));do try{vg();break}catch(u){py(e,u)}while(1);od(),$c.current=o,Xe=n,ut!==null?t=0:(_t=null,Ct=0,t=ft)}if(t!==0){if(t===2&&(n=Fu(e),n!==0&&(r=n,t=yh(e,n))),t===1)throw i=wl,to(e,0),rn(e,r),$t(e,st()),i;if(t===6)rn(e,r);else{if(n=e.current.alternate,!(r&30)&&!mg(n)&&(t=ia(e,r),t===2&&(o=Fu(e),o!==0&&(r=o,t=yh(e,o))),t===1))throw i=wl,to(e,0),rn(e,r),$t(e,st()),i;switch(e.finishedWork=n,e.finishedLanes=r,t){case 0:case 1:throw Error(me(345));case 2:Un(e,zt,br);break;case 3:if(rn(e,r),(r&130023424)===r&&(t=Zd+500-st(),10<t)){if(Mc(e,0)!==0)break;if(n=e.suspendedLanes,(n&r)!==r){Pt(),e.pingedLanes|=e.suspendedLanes&n;break}e.timeoutHandle=Au(Un.bind(null,e,zt,br),t);break}Un(e,zt,br);break;case 4:if(rn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,n=-1;0<r;){var s=31-Ki(r);o=1<<s,s=t[s],s>n&&(n=s),r&=~o}if(r=n,r=st()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*pg(r/1960))-r,10<r){e.timeoutHandle=Au(Un.bind(null,e,zt,br),r);break}Un(e,zt,br);break;case 5:Un(e,zt,br);break;default:throw Error(me(329))}}}return $t(e,st()),e.callbackNode===i?fy.bind(null,e):null}function yh(e,t){var i=sl;return e.current.memoizedState.isDehydrated&&(to(e,t).flags|=256),e=ia(e,t),e!==2&&(t=zt,zt=i,t!==null&&vh(t)),e}function vh(e){zt===null?zt=e:zt.push.apply(zt,e)}function mg(e){for(var t=e;;){if(t.flags&16384){var i=t.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var r=0;r<i.length;r++){var n=i[r],o=n.getSnapshot;n=n.value;try{if(!Pi(o(),n))return!1}catch{return!1}}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function rn(e,t){for(t&=~gd,t&=~Ga,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var i=31-Ki(t),r=1<<i;e[i]=-1,t&=~r}}function vp(e){if(Xe&6)throw Error(me(327));ls();var t=Mc(e,0);if(!(t&1))return $t(e,st()),null;var i=ia(e,t);if(e.tag!==0&&i===2){var r=Fu(e);r!==0&&(t=r,i=yh(e,r))}if(i===1)throw i=wl,to(e,0),rn(e,t),$t(e,st()),i;if(i===6)throw Error(me(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Un(e,zt,br),$t(e,st()),null}function Sd(e,t){var i=Xe;Xe|=1;try{return e(t)}finally{Xe=i,Xe===0&&(bs=st()+500,ga&&Gn())}}function ao(e){on!==null&&on.tag===0&&!(Xe&6)&&ls();var t=Xe;Xe|=1;var i=Ii.transition,r=Pe;try{if(Ii.transition=null,Pe=1,e)return e()}finally{Pe=r,Ii.transition=i,Xe=t,!(Xe&6)&&Gn()}}function bd(){ai=$o.current,Be($o)}function to(e,t){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(i!==-1&&(e.timeoutHandle=-1,U_(i)),ut!==null)for(i=ut.return;i!==null;){var r=i;switch(id(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Oc();break;case 3:Zs(),Be(Qt),Be(Xt),hd();break;case 5:ud(r);break;case 4:Zs();break;case 13:Be(Ae);break;case 19:Be(Ae);break;case 10:sd(r.type._context);break;case 22:case 23:bd()}i=i.return}if(_t=e,ut=e=pn(e.current,null),Ct=ai=t,ft=0,wl=null,gd=Ga=co=0,zt=sl=null,Dn!==null){for(t=0;t<Dn.length;t++)if(i=Dn[t],r=i.interleaved,r!==null){i.interleaved=null;var n=r.next,o=i.pending;if(o!==null){var s=o.next;o.next=n,r.next=s}i.pending=r}Dn=null}return e}function py(e,t){do{var i=ut;try{if(od(),bc.current=qc,Qc){for(var r=Qe.memoizedState;r!==null;){var n=r.queue;n!==null&&(n.pending=null),r=r.next}Qc=!1}if(lo=0,vt=dt=Qe=null,nl=!1,Wl=0,_d.current=null,i===null||i.return===null){ft=1,wl=t,ut=null;break}e:{var o=e,s=i.return,u=i,l=t;if(t=Ct,u.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var a=l,h=u,p=h.tag;if(!(h.mode&1)&&(p===0||p===11||p===15)){var d=h.alternate;d?(h.updateQueue=d.updateQueue,h.memoizedState=d.memoizedState,h.lanes=d.lanes):(h.updateQueue=null,h.memoizedState=null)}var c=np(s);if(c!==null){c.flags&=-257,op(c,s,u,o,t),c.mode&1&&rp(o,a,t),t=c,l=a;var y=t.updateQueue;if(y===null){var _=new Set;_.add(l),t.updateQueue=_}else y.add(l);break e}else{if(!(t&1)){rp(o,a,t),Gd();break e}l=Error(me(426))}}else if(Ue&&u.mode&1){var g=np(s);if(g!==null){!(g.flags&65536)&&(g.flags|=256),op(g,s,u,o,t),rd(Ss(l,u));break e}}o=l=Ss(l,u),ft!==4&&(ft=2),sl===null?sl=[o]:sl.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var m=Q0(o,l,t);Af(o,m);break e;case 1:u=l;var f=o.type,v=o.stateNode;if(!(o.flags&128)&&(typeof f.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(dn===null||!dn.has(v)))){o.flags|=65536,t&=-t,o.lanes|=t;var Z=q0(o,u,t);Af(o,Z);break e}}o=o.return}while(o!==null)}vy(i)}catch(b){t=b,ut===i&&i!==null&&(ut=i=i.return);continue}break}while(1)}function my(){var e=$c.current;return $c.current=qc,e===null?qc:e}function Gd(){(ft===0||ft===3||ft===2)&&(ft=4),_t===null||!(co&268435455)&&!(Ga&268435455)||rn(_t,Ct)}function ia(e,t){var i=Xe;Xe|=2;var r=my();(_t!==e||Ct!==t)&&(br=null,to(e,t));do try{yg();break}catch(n){py(e,n)}while(1);if(od(),Xe=i,$c.current=r,ut!==null)throw Error(me(261));return _t=null,Ct=0,ft}function yg(){for(;ut!==null;)yy(ut)}function vg(){for(;ut!==null&&!F1();)yy(ut)}function yy(e){var t=gy(e.alternate,e,ai);e.memoizedProps=e.pendingProps,t===null?vy(e):ut=t,_d.current=null}function vy(e){var t=e;do{var i=t.alternate;if(e=t.return,t.flags&32768){if(i=ug(i,t),i!==null){i.flags&=32767,ut=i;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ft=6,ut=null;return}}else if(i=ag(i,t,ai),i!==null){ut=i;return}if(t=t.sibling,t!==null){ut=t;return}ut=t=e}while(t!==null);ft===0&&(ft=5)}function Un(e,t,i){var r=Pe,n=Ii.transition;try{Ii.transition=null,Pe=1,_g(e,t,i,r)}finally{Ii.transition=n,Pe=r}return null}function _g(e,t,i,r){do ls();while(on!==null);if(Xe&6)throw Error(me(327));i=e.finishedWork;var n=e.finishedLanes;if(i===null)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(me(177));e.callbackNode=null,e.callbackPriority=0;var o=i.lanes|i.childLanes;if(q1(e,o),e===_t&&(ut=_t=null,Ct=0),!(i.subtreeFlags&2064)&&!(i.flags&2064)||cc||(cc=!0,Zy(Kc,function(){return ls(),null})),o=(i.flags&15990)!==0,i.subtreeFlags&15990||o){o=Ii.transition,Ii.transition=null;var s=Pe;Pe=1;var u=Xe;Xe|=4,_d.current=null,dg(e,i),hy(i,e),M_(Du),Pc=!!Hu,Du=Hu=null,e.current=i,fg(i),O1(),Xe=u,Pe=s,Ii.transition=o}else e.current=i;if(cc&&(cc=!1,on=e,ta=n),o=e.pendingLanes,o===0&&(dn=null),j1(i.stateNode),$t(e,st()),t!==null)for(r=e.onRecoverableError,i=0;i<t.length;i++)n=t[i],r(n.value,{componentStack:n.stack,digest:n.digest});if(ea)throw ea=!1,e=ph,ph=null,e;return ta&1&&e.tag!==0&&ls(),o=e.pendingLanes,o&1?e===mh?ll++:(ll=0,mh=e):ll=0,Gn(),null}function ls(){if(on!==null){var e=Am(ta),t=Ii.transition,i=Pe;try{if(Ii.transition=null,Pe=16>e?16:e,on===null)var r=!1;else{if(e=on,on=null,ta=0,Xe&6)throw Error(me(331));var n=Xe;for(Xe|=4,Ce=e.current;Ce!==null;){var o=Ce,s=o.child;if(Ce.flags&16){var u=o.deletions;if(u!==null){for(var l=0;l<u.length;l++){var a=u[l];for(Ce=a;Ce!==null;){var h=Ce;switch(h.tag){case 0:case 11:case 15:ol(8,h,o)}var p=h.child;if(p!==null)p.return=h,Ce=p;else for(;Ce!==null;){h=Ce;var d=h.sibling,c=h.return;if(cy(h),h===a){Ce=null;break}if(d!==null){d.return=c,Ce=d;break}Ce=c}}}var y=o.alternate;if(y!==null){var _=y.child;if(_!==null){y.child=null;do{var g=_.sibling;_.sibling=null,_=g}while(_!==null)}}Ce=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,Ce=s;else e:for(;Ce!==null;){if(o=Ce,o.flags&2048)switch(o.tag){case 0:case 11:case 15:ol(9,o,o.return)}var m=o.sibling;if(m!==null){m.return=o.return,Ce=m;break e}Ce=o.return}}var f=e.current;for(Ce=f;Ce!==null;){s=Ce;var v=s.child;if(s.subtreeFlags&2064&&v!==null)v.return=s,Ce=v;else e:for(s=f;Ce!==null;){if(u=Ce,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:ba(9,u)}}catch(b){tt(u,u.return,b)}if(u===s){Ce=null;break e}var Z=u.sibling;if(Z!==null){Z.return=u.return,Ce=Z;break e}Ce=u.return}}if(Xe=n,Gn(),ir&&typeof ir.onPostCommitFiberRoot=="function")try{ir.onPostCommitFiberRoot(pa,e)}catch{}r=!0}return r}finally{Pe=i,Ii.transition=t}}return!1}function _p(e,t,i){t=Ss(i,t),t=Q0(e,t,1),e=hn(e,t,1),t=Pt(),e!==null&&(kl(e,1,t),$t(e,t))}function tt(e,t,i){if(e.tag===3)_p(e,e,i);else for(;t!==null;){if(t.tag===3){_p(t,e,i);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(dn===null||!dn.has(r))){e=Ss(i,e),e=q0(t,e,1),t=hn(t,e,1),e=Pt(),t!==null&&(kl(t,1,e),$t(t,e));break}}t=t.return}}function gg(e,t,i){var r=e.pingCache;r!==null&&r.delete(t),t=Pt(),e.pingedLanes|=e.suspendedLanes&i,_t===e&&(Ct&i)===i&&(ft===4||ft===3&&(Ct&130023424)===Ct&&500>st()-Zd?to(e,0):gd|=i),$t(e,t)}function _y(e,t){t===0&&(e.mode&1?(t=ql,ql<<=1,!(ql&130023424)&&(ql=4194304)):t=1);var i=Pt();e=kr(e,t),e!==null&&(kl(e,t,i),$t(e,i))}function Zg(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),_y(e,i)}function Sg(e,t){var i=0;switch(e.tag){case 13:var r=e.stateNode,n=e.memoizedState;n!==null&&(i=n.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(me(314))}r!==null&&r.delete(t),_y(e,i)}var gy;gy=function(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps||Qt.current)At=!0;else{if(!(e.lanes&i)&&!(t.flags&128))return At=!1,cg(e,t,i);At=!!(e.flags&131072)}else At=!1,Ue&&t.flags&1048576&&b0(t,jc,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Cc(e,t),e=t.pendingProps;var n=vs(t,Xt.current);ss(t,i),n=fd(null,t,r,e,n,i);var o=pd();return t.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,qt(r)?(o=!0,Bc(t)):o=!1,t.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,cd(t),n.updater=Za,t.stateNode=n,n._reactInternals=t,rh(t,r,e,i),t=sh(null,t,r,!0,o,i)):(t.tag=0,Ue&&o&&td(t),Kt(null,t,n,i),t=t.child),t;case 16:r=t.elementType;e:{switch(Cc(e,t),e=t.pendingProps,n=r._init,r=n(r._payload),t.type=r,n=t.tag=Gg(r),e=Ei(r,e),n){case 0:t=oh(null,t,r,e,i);break e;case 1:t=cp(null,t,r,e,i);break e;case 11:t=sp(null,t,r,e,i);break e;case 14:t=lp(null,t,r,Ei(r.type,e),i);break e}throw Error(me(306,r,""))}return t;case 0:return r=t.type,n=t.pendingProps,n=t.elementType===r?n:Ei(r,n),oh(e,t,r,n,i);case 1:return r=t.type,n=t.pendingProps,n=t.elementType===r?n:Ei(r,n),cp(e,t,r,n,i);case 3:e:{if(iy(t),e===null)throw Error(me(387));r=t.pendingProps,o=t.memoizedState,n=o.element,R0(e,t),zc(t,r,null,i);var s=t.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){n=Ss(Error(me(423)),t),t=ap(e,t,r,i,n);break e}else if(r!==n){n=Ss(Error(me(424)),t),t=ap(e,t,r,i,n);break e}else for(ui=un(t.stateNode.containerInfo.firstChild),di=t,Ue=!0,xi=null,i=w0(t,null,r,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(_s(),r===n){t=xr(e,t,i);break e}Kt(e,t,r,i)}t=t.child}return t;case 5:return T0(t),e===null&&eh(t),r=t.type,n=t.pendingProps,o=e!==null?e.memoizedProps:null,s=n.children,zu(r,n)?s=null:o!==null&&zu(r,o)&&(t.flags|=32),ty(e,t),Kt(e,t,s,i),t.child;case 6:return e===null&&eh(t),null;case 13:return ry(e,t,i);case 4:return ad(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=gs(t,null,r,i):Kt(e,t,r,i),t.child;case 11:return r=t.type,n=t.pendingProps,n=t.elementType===r?n:Ei(r,n),sp(e,t,r,n,i);case 7:return Kt(e,t,t.pendingProps,i),t.child;case 8:return Kt(e,t,t.pendingProps.children,i),t.child;case 12:return Kt(e,t,t.pendingProps.children,i),t.child;case 10:e:{if(r=t.type._context,n=t.pendingProps,o=t.memoizedProps,s=n.value,Fe(Hc,r._currentValue),r._currentValue=s,o!==null)if(Pi(o.value,s)){if(o.children===n.children&&!Qt.current){t=xr(e,t,i);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var u=o.dependencies;if(u!==null){s=o.child;for(var l=u.firstContext;l!==null;){if(l.context===r){if(o.tag===1){l=Xr(-1,i&-i),l.tag=2;var a=o.updateQueue;if(a!==null){a=a.shared;var h=a.pending;h===null?l.next=l:(l.next=h.next,h.next=l),a.pending=l}}o.lanes|=i,l=o.alternate,l!==null&&(l.lanes|=i),th(o.return,i,t),u.lanes|=i;break}l=l.next}}else if(o.tag===10)s=o.type===t.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(me(341));s.lanes|=i,u=s.alternate,u!==null&&(u.lanes|=i),th(s,i,t),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===t){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}Kt(e,t,n.children,i),t=t.child}return t;case 9:return n=t.type,r=t.pendingProps.children,ss(t,i),n=Li(n),r=r(n),t.flags|=1,Kt(e,t,r,i),t.child;case 14:return r=t.type,n=Ei(r,t.pendingProps),n=Ei(r.type,n),lp(e,t,r,n,i);case 15:return $0(e,t,t.type,t.pendingProps,i);case 17:return r=t.type,n=t.pendingProps,n=t.elementType===r?n:Ei(r,n),Cc(e,t),t.tag=1,qt(r)?(e=!0,Bc(t)):e=!1,ss(t,i),I0(t,r,n),rh(t,r,n,i),sh(null,t,r,!0,e,i);case 19:return ny(e,t,i);case 22:return ey(e,t,i)}throw Error(me(156,t.tag))};function Zy(e,t){return jm(e,t)}function bg(e,t,i,r){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wi(e,t,i,r){return new bg(e,t,i,r)}function Cd(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Gg(e){if(typeof e=="function")return Cd(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Oh)return 11;if(e===Bh)return 14}return 2}function pn(e,t){var i=e.alternate;return i===null?(i=Wi(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&14680064,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function Wc(e,t,i,r,n,o){var s=2;if(r=e,typeof e=="function")Cd(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case Oo:return io(i.children,n,o,t);case Fh:s=8,n|=8;break;case Wu:return e=Wi(12,i,t,n|2),e.elementType=Wu,e.lanes=o,e;case Iu:return e=Wi(13,i,t,n),e.elementType=Iu,e.lanes=o,e;case Lu:return e=Wi(19,i,t,n),e.elementType=Lu,e.lanes=o,e;case Lm:return Ca(i,n,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Wm:s=10;break e;case Im:s=9;break e;case Oh:s=11;break e;case Bh:s=14;break e;case $r:s=16,r=null;break e}throw Error(me(130,e==null?e:typeof e,""))}return t=Wi(s,i,t,n),t.elementType=e,t.type=r,t.lanes=o,t}function io(e,t,i,r){return e=Wi(7,e,r,t),e.lanes=i,e}function Ca(e,t,i,r){return e=Wi(22,e,r,t),e.elementType=Lm,e.lanes=i,e.stateNode={isHidden:!1},e}function hu(e,t,i){return e=Wi(6,e,null,t),e.lanes=i,e}function du(e,t,i){return t=Wi(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Cg(e,t,i,r,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ja(0),this.expirationTimes=ja(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ja(0),this.identifierPrefix=r,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function Yd(e,t,i,r,n,o,s,u,l){return e=new Cg(e,t,i,u,l),t===1?(t=1,o===!0&&(t|=8)):t=0,o=Wi(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},cd(o),e}function Yg(e,t,i){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Fo,key:r==null?null:""+r,children:e,containerInfo:t,implementation:i}}function Sy(e){if(!e)return Zn;e=e._reactInternals;e:{if(fo(e)!==e||e.tag!==1)throw Error(me(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(qt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(me(171))}if(e.tag===1){var i=e.type;if(qt(i))return Z0(e,i,t)}return t}function by(e,t,i,r,n,o,s,u,l){return e=Yd(i,r,!0,e,n,o,s,u,l),e.context=Sy(null),i=e.current,r=Pt(),n=fn(i),o=Xr(r,n),o.callback=t??null,hn(i,o,n),e.current.lanes=n,kl(e,n,r),$t(e,r),e}function Ya(e,t,i,r){var n=t.current,o=Pt(),s=fn(n);return i=Sy(i),t.context===null?t.context=i:t.pendingContext=i,t=Xr(o,s),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=hn(n,t,s),e!==null&&(Mi(e,n,s,o),Sc(e,n,s)),s}function ra(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function gp(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function Rd(e,t){gp(e,t),(e=e.alternate)&&gp(e,t)}function Rg(){return null}var Gy=typeof reportError=="function"?reportError:function(e){console.error(e)};function Wd(e){this._internalRoot=e}Ra.prototype.render=Wd.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(me(409));Ya(e,t,null,null)};Ra.prototype.unmount=Wd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ao(function(){Ya(null,e,null,null)}),t[Er]=null}};function Ra(e){this._internalRoot=e}Ra.prototype.unstable_scheduleHydration=function(e){if(e){var t=$m();e={blockedOn:null,target:e,priority:t};for(var i=0;i<tn.length&&t!==0&&t<tn[i].priority;i++);tn.splice(i,0,e),i===0&&t0(e)}};function Id(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Wa(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Zp(){}function Wg(e,t,i,r,n){if(n){if(typeof r=="function"){var o=r;r=function(){var a=ra(s);o.call(a)}}var s=by(t,r,e,0,null,!1,!1,"",Zp);return e._reactRootContainer=s,e[Er]=s.current,bl(e.nodeType===8?e.parentNode:e),ao(),s}for(;n=e.lastChild;)e.removeChild(n);if(typeof r=="function"){var u=r;r=function(){var a=ra(l);u.call(a)}}var l=Yd(e,0,!1,null,null,!1,!1,"",Zp);return e._reactRootContainer=l,e[Er]=l.current,bl(e.nodeType===8?e.parentNode:e),ao(function(){Ya(t,l,i,r)}),l}function Ia(e,t,i,r,n){var o=i._reactRootContainer;if(o){var s=o;if(typeof n=="function"){var u=n;n=function(){var l=ra(s);u.call(l)}}Ya(t,s,e,n)}else s=Wg(i,t,e,n,r);return ra(s)}Qm=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var i=Qs(t.pendingLanes);i!==0&&(Hh(t,i|1),$t(t,st()),!(Xe&6)&&(bs=st()+500,Gn()))}break;case 13:ao(function(){var r=kr(e,1);if(r!==null){var n=Pt();Mi(r,e,1,n)}}),Rd(e,1)}};Dh=function(e){if(e.tag===13){var t=kr(e,134217728);if(t!==null){var i=Pt();Mi(t,e,134217728,i)}Rd(e,134217728)}};qm=function(e){if(e.tag===13){var t=fn(e),i=kr(e,t);if(i!==null){var r=Pt();Mi(i,e,t,r)}Rd(e,t)}};$m=function(){return Pe};e0=function(e,t){var i=Pe;try{return Pe=e,t()}finally{Pe=i}};Pu=function(e,t,i){switch(t){case"input":if(Xu(e,i),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<i.length;t++){var r=i[t];if(r!==e&&r.form===e.form){var n=_a(r);if(!n)throw Error(me(90));Tm(r),Xu(r,n)}}}break;case"textarea":Vm(e,i);break;case"select":t=i.value,t!=null&&is(e,!!i.multiple,t,!1)}};Nm=Sd;Jm=ao;var Ig={usingClientEntryPoint:!1,Events:[Kl,Ho,_a,Mm,Pm,Sd]},Fs={findFiberByHostInstance:Hn,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Lg={bundleType:Fs.bundleType,version:Fs.version,rendererPackageName:Fs.rendererPackageName,rendererConfig:Fs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Kr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Bm(e),e===null?null:e.stateNode},findFiberByHostInstance:Fs.findFiberByHostInstance||Rg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ac=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ac.isDisabled&&ac.supportsFiber)try{pa=ac.inject(Lg),ir=ac}catch{}}mi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ig;mi.createPortal=function(e,t){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Id(t))throw Error(me(200));return Yg(e,t,null,i)};mi.createRoot=function(e,t){if(!Id(e))throw Error(me(299));var i=!1,r="",n=Gy;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(n=t.onRecoverableError)),t=Yd(e,1,!1,null,null,i,!1,r,n),e[Er]=t.current,bl(e.nodeType===8?e.parentNode:e),new Wd(t)};mi.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(me(188)):(e=Object.keys(e).join(","),Error(me(268,e)));return e=Bm(t),e=e===null?null:e.stateNode,e};mi.flushSync=function(e){return ao(e)};mi.hydrate=function(e,t,i){if(!Wa(t))throw Error(me(200));return Ia(null,e,t,!0,i)};mi.hydrateRoot=function(e,t,i){if(!Id(e))throw Error(me(405));var r=i!=null&&i.hydratedSources||null,n=!1,o="",s=Gy;if(i!=null&&(i.unstable_strictMode===!0&&(n=!0),i.identifierPrefix!==void 0&&(o=i.identifierPrefix),i.onRecoverableError!==void 0&&(s=i.onRecoverableError)),t=by(t,null,e,1,i??null,n,!1,o,s),e[Er]=t.current,bl(e),r)for(e=0;e<r.length;e++)i=r[e],n=i._getVersion,n=n(i._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[i,n]:t.mutableSourceEagerHydrationData.push(i,n);return new Ra(t)};mi.render=function(e,t,i){if(!Wa(t))throw Error(me(200));return Ia(null,e,t,!1,i)};mi.unmountComponentAtNode=function(e){if(!Wa(e))throw Error(me(40));return e._reactRootContainer?(ao(function(){Ia(null,null,e,!1,function(){e._reactRootContainer=null,e[Er]=null})}),!0):!1};mi.unstable_batchedUpdates=Sd;mi.unstable_renderSubtreeIntoContainer=function(e,t,i,r){if(!Wa(i))throw Error(me(200));if(e==null||e._reactInternals===void 0)throw Error(me(38));return Ia(e,t,i,!1,r)};mi.version="18.2.0-next-9e3b772b8-20220608";(function(e){function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(i){console.error(i)}}t(),e.exports=mi})(R1);var Sp=Cu;Gu.createRoot=Sp.createRoot,Gu.hydrateRoot=Sp.hydrateRoot;function Ld(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function wd(e,t){return t={exports:{}},e(t,t.exports),t.exports}var Cy=wd(function(e){(function(t,i){e.exports=i()})(window,function(){return function(t){function i(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}var r={};return i.m=t,i.c=r,i.d=function(n,o,s){i.o(n,o)||Object.defineProperty(n,o,{enumerable:!0,get:s})},i.r=function(n){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},i.t=function(n,o){if(1&o&&(n=i(n)),8&o||4&o&&typeof n=="object"&&n&&n.__esModule)return n;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:n}),2&o&&typeof n!="string")for(var u in n)i.d(s,u,function(l){return n[l]}.bind(null,u));return s},i.n=function(n){var o=n&&n.__esModule?function(){return n.default}:function(){return n};return i.d(o,"a",o),o},i.o=function(n,o){return Object.prototype.hasOwnProperty.call(n,o)},i.p="",i(i.s=33)}([function(t,i,r){Object.defineProperty(i,"__esModule",{value:!0}),t=r(14),i.IBufferService=t.createDecorator("BufferService"),i.ICoreMouseService=t.createDecorator("CoreMouseService"),i.ICoreService=t.createDecorator("CoreService"),i.IDirtyRowService=t.createDecorator("DirtyRowService"),i.IInstantiationService=t.createDecorator("InstantiationService"),i.ILogService=t.createDecorator("LogService"),i.IOptionsService=t.createDecorator("OptionsService")},function(t,i){Object.defineProperty(i,"__esModule",{value:!0}),t=function(){function r(){this._listeners=[],this._disposed=!1}return Object.defineProperty(r.prototype,"event",{get:function(){var n=this;return this._event||(this._event=function(o){return n._listeners.push(o),{dispose:function(){if(!n._disposed){for(var s=0;s<n._listeners.length;s++)if(n._listeners[s]===o)return void n._listeners.splice(s,1)}}}}),this._event},enumerable:!0,configurable:!0}),r.prototype.fire=function(n){for(var o=[],s=0;s<this._listeners.length;s++)o.push(this._listeners[s]);for(s=0;s<o.length;s++)o[s].call(void 0,n)},r.prototype.dispose=function(){this._listeners&&(this._listeners.length=0),this._disposed=!0},r}(),i.EventEmitter=t},function(t,i){Object.defineProperty(i,"__esModule",{value:!0}),t=function(){function r(){this._disposables=[],this._isDisposed=!1}return r.prototype.dispose=function(){this._isDisposed=!0,this._disposables.forEach(function(n){return n.dispose()}),this._disposables.length=0},r.prototype.register=function(n){this._disposables.push(n)},r.prototype.unregister=function(n){n=this._disposables.indexOf(n),n!==-1&&this._disposables.splice(n,1)},r}(),i.Disposable=t},function(t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.DEFAULT_COLOR=256,i.DEFAULT_ATTR=256|i.DEFAULT_COLOR<<9,i.CHAR_DATA_ATTR_INDEX=0,i.CHAR_DATA_CHAR_INDEX=1,i.CHAR_DATA_WIDTH_INDEX=2,i.CHAR_DATA_CODE_INDEX=3,i.NULL_CELL_CHAR="",i.NULL_CELL_WIDTH=1,i.NULL_CELL_CODE=0,i.WHITESPACE_CELL_CHAR=" ",i.WHITESPACE_CELL_WIDTH=1,i.WHITESPACE_CELL_CODE=32},function(t,i,r){Object.defineProperty(i,"__esModule",{value:!0}),t=r(14),i.ICharSizeService=t.createDecorator("CharSizeService"),i.ICoreBrowserService=t.createDecorator("CoreBrowserService"),i.IMouseService=t.createDecorator("MouseService"),i.IRenderService=t.createDecorator("RenderService"),i.ISelectionService=t.createDecorator("SelectionService"),i.ISoundService=t.createDecorator("SoundService")},function(t,i,r){var n,o=this&&this.__extends||(n=function(l,a){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,p){h.__proto__=p}||function(h,p){for(var d in p)p.hasOwnProperty(d)&&(h[d]=p[d])})(l,a)},function(l,a){function h(){this.constructor=l}n(l,a),l.prototype=a===null?Object.create(a):(h.prototype=a.prototype,new h)});Object.defineProperty(i,"__esModule",{value:!0});var s=r(8),u=r(3);t=function(l){function a(){var h=l!==null&&l.apply(this,arguments)||this;return h.content=0,h.fg=0,h.bg=0,h.combinedData="",h}return o(a,l),a.fromCharData=function(h){var p=new a;return p.setFromCharData(h),p},a.prototype.isCombined=function(){return 2097152&this.content},a.prototype.getWidth=function(){return this.content>>22},a.prototype.getChars=function(){return 2097152&this.content?this.combinedData:2097151&this.content?s.stringFromCodePoint(2097151&this.content):""},a.prototype.getCode=function(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content},a.prototype.setFromCharData=function(h){this.fg=h[u.CHAR_DATA_ATTR_INDEX],this.bg=0;var p=!1;if(2<h[u.CHAR_DATA_CHAR_INDEX].length)p=!0;else if(h[u.CHAR_DATA_CHAR_INDEX].length===2){var d=h[u.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=d&&56319>=d){var c=h[u.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=c&&57343>=c?this.content=1024*(d-55296)+c-56320+65536|h[u.CHAR_DATA_WIDTH_INDEX]<<22:p=!0}else p=!0}else this.content=h[u.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|h[u.CHAR_DATA_WIDTH_INDEX]<<22;p&&(this.combinedData=h[u.CHAR_DATA_CHAR_INDEX],this.content=2097152|h[u.CHAR_DATA_WIDTH_INDEX]<<22)},a.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},a}(r(6).AttributeData),i.CellData=t},function(t,i){Object.defineProperty(i,"__esModule",{value:!0}),t=function(){function r(){this.bg=this.fg=0}return r.toColorRGB=function(n){return[n>>>16&255,n>>>8&255,255&n]},r.fromColorRGB=function(n){return(255&n[0])<<16|(255&n[1])<<8|255&n[2]},r.prototype.clone=function(){var n=new r;return n.fg=this.fg,n.bg=this.bg,n},r.prototype.isInverse=function(){return 67108864&this.fg},r.prototype.isBold=function(){return 134217728&this.fg},r.prototype.isUnderline=function(){return 268435456&this.fg},r.prototype.isBlink=function(){return 536870912&this.fg},r.prototype.isInvisible=function(){return 1073741824&this.fg},r.prototype.isItalic=function(){return 67108864&this.bg},r.prototype.isDim=function(){return 134217728&this.bg},r.prototype.getFgColorMode=function(){return 50331648&this.fg},r.prototype.getBgColorMode=function(){return 50331648&this.bg},r.prototype.isFgRGB=function(){return(50331648&this.fg)==50331648},r.prototype.isBgRGB=function(){return(50331648&this.bg)==50331648},r.prototype.isFgPalette=function(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432},r.prototype.isBgPalette=function(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432},r.prototype.isFgDefault=function(){return(50331648&this.fg)==0},r.prototype.isBgDefault=function(){return(50331648&this.bg)==0},r.prototype.getFgColor=function(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}},r.prototype.getBgColor=function(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}},r}(),i.AttributeData=t},function(t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.addDisposableDomListener=function(r,n,o,s){return r.addEventListener(n,o,s),{dispose:function(){o&&r.removeEventListener(n,o,s)}}}},function(t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.stringFromCodePoint=function(r){return 65535<r?(r-=65536,String.fromCharCode(55296+(r>>10))+String.fromCharCode(r%1024+56320)):String.fromCharCode(r)},i.utf32ToString=function(r,n,o){n===void 0&&(n=0),o===void 0&&(o=r.length);for(var s="";n<o;++n){var u=r[n];65535<u?(u-=65536,s+=String.fromCharCode(55296+(u>>10))+String.fromCharCode(u%1024+56320)):s+=String.fromCharCode(u)}return s},t=function(){function r(){this._interim=0}return r.prototype.clear=function(){this._interim=0},r.prototype.decode=function(n,o){var s=n.length;if(!s)return 0;var u=0,l=0;for(this._interim&&(56320<=(h=n.charCodeAt(l++))&&57343>=h?o[u++]=1024*(this._interim-55296)+h-56320+65536:(o[u++]=this._interim,o[u++]=h),this._interim=0);l<s;++l){var a=n.charCodeAt(l);if(55296<=a&&56319>=a){if(++l>=s)return this._interim=a,u;var h;56320<=(h=n.charCodeAt(l))&&57343>=h?o[u++]=1024*(a-55296)+h-56320+65536:(o[u++]=a,o[u++]=h)}else o[u++]=a}return u},r}(),i.StringToUtf32=t,t=function(){function r(){this.interim=new Uint8Array(3)}return r.prototype.clear=function(){this.interim.fill(0)},r.prototype.decode=function(n,o){var s=n.length;if(!s)return 0;var u,l,a,h,p=0,d=0,c=0;if(this.interim[0]){var y=!1,_=this.interim[0];_&=(224&_)==192?31:(240&_)==224?15:7;for(var g=0,m;(m=63&this.interim[++g])&&4>g;)_<<=6,_|=m;for(var f=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,v=f-g;c<v;){if(c>=s)return 0;if((192&(m=n[c++]))!=128){c--,y=!0;break}this.interim[g++]=m,_<<=6,_|=63&m}y||(f===2?128>_?c--:o[p++]=_:f===3?2048>_||55296<=_&&57343>=_||(o[p++]=_):65536>_||1114111<_||(o[p++]=_)),this.interim.fill(0)}for(y=s-4;c<s;){for(;!(!(c<y)||128&(u=n[c])||128&(l=n[c+1])||128&(a=n[c+2])||128&(h=n[c+3]));)o[p++]=u,o[p++]=l,o[p++]=a,o[p++]=h,c+=4;if(128>(u=n[c++]))o[p++]=u;else if((224&u)==192){if(c>=s)return this.interim[0]=u,p;(192&(l=n[c++]))!=128||128>(d=(31&u)<<6|63&l)?c--:o[p++]=d}else if((240&u)==224){if(c>=s)return this.interim[0]=u,p;if((192&(l=n[c++]))!=128)c--;else{if(c>=s)return this.interim[0]=u,this.interim[1]=l,p;(192&(a=n[c++]))!=128?c--:2048>(d=(15&u)<<12|(63&l)<<6|63&a)||55296<=d&&57343>=d||(o[p++]=d)}}else if((248&u)==240){if(c>=s)return this.interim[0]=u,p;if((192&(l=n[c++]))!=128)c--;else{if(c>=s)return this.interim[0]=u,this.interim[1]=l,p;if((192&(a=n[c++]))!=128)c--;else{if(c>=s)return this.interim[0]=u,this.interim[1]=l,this.interim[2]=a,p;(192&(h=n[c++]))!=128?c--:65536>(d=(7&u)<<18|(63&l)<<12|(63&a)<<6|63&h)||1114111<d||(o[p++]=d)}}}}return p},r}(),i.Utf8ToUtf32=t},function(t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.INVERTED_DEFAULT_COLOR=257,i.DIM_OPACITY=.5,i.CHAR_ATLAS_CELL_SPACING=1},function(t,i){function r(y){return y=y.toString(16),2>y.length?"0"+y:y}function n(y,_,g,m){return m!==void 0?"#"+r(y)+r(_)+r(g)+r(m):"#"+r(y)+r(_)+r(g)}function o(y,_,g,m){return m===void 0&&(m=255),(y<<24|_<<16|g<<8|m)>>>0}function s(y){return[y>>24&255,y>>16&255,y>>8&255,255&y]}function u(y){return l(y>>16&255,y>>8&255,255&y)}function l(y,_,g){return y/=255,_/=255,g/=255,.2126*(.03928>=y?y/12.92:Math.pow((y+.055)/1.055,2.4))+.7152*(.03928>=_?_/12.92:Math.pow((_+.055)/1.055,2.4))+.0722*(.03928>=g?g/12.92:Math.pow((g+.055)/1.055,2.4))}function a(y,_){return y<_?(_+.05)/(y+.05):(y+.05)/(_+.05)}function h(y,_,g){return{css:n(y,_,g),rgba:o(y,_,g)}}function p(y,_,g){var m=u(y>>8),f=u(_>>8);if(a(m,f)<g)return f<m?d(y,_,g):c(y,_,g)}function d(y,_,g){var m=y>>24&255,f=y>>16&255;y=y>>8&255;var v=_>>24&255,Z=_>>16&255;_=_>>8&255;for(var b=a(l(v,_,Z),l(m,f,y));b<g&&(0<v||0<Z||0<_);)v-=Math.max(0,Math.ceil(.1*v)),Z-=Math.max(0,Math.ceil(.1*Z)),b=a(l(v,_-=Math.max(0,Math.ceil(.1*_)),Z),l(m,f,y));return(v<<24|Z<<16|_<<8|255)>>>0}function c(y,_,g){var m=y>>24&255,f=y>>16&255;y=y>>8&255;var v=_>>24&255,Z=_>>16&255;_=_>>8&255;for(var b=a(l(v,_,Z),l(m,f,y));b<g&&(255>v||255>Z||255>_);)v=Math.min(255,v+Math.ceil(.1*(255-v))),Z=Math.min(255,Z+Math.ceil(.1*(255-Z))),b=a(l(v,_=Math.min(255,_+Math.ceil(.1*(255-_))),Z),l(m,f,y));return(v<<24|Z<<16|_<<8|255)>>>0}Object.defineProperty(i,"__esModule",{value:!0}),i.blend=function(y,_){var g=(255&_.rgba)/255;if(g===1)return{css:_.css,rgba:_.rgba};var m=y.rgba>>24&255,f=y.rgba>>16&255;return y=y.rgba>>8&255,m+=Math.round(((_.rgba>>24&255)-m)*g),f+=Math.round(((_.rgba>>16&255)-f)*g),_=y+Math.round(((_.rgba>>8&255)-y)*g),{css:n(m,f,_),rgba:o(m,f,_)}},i.fromCss=function(y){return{css:y,rgba:(parseInt(y.slice(1),16)<<8|255)>>>0}},i.toPaddedHex=r,i.toCss=n,i.toRgba=o,i.fromRgba=s,i.opaque=function(y){y=(255|y.rgba)>>>0;var _=s(y);return{css:n(_[0],_[1],_[2]),rgba:y}},i.rgbRelativeLuminance=u,i.rgbRelativeLuminance2=l,i.contrastRatio=a,i.rgbaToColor=h,i.ensureContrastRatioRgba=p,i.ensureContrastRatio=function(y,_,g){if(y=p(y.rgba,_.rgba,g))return h(y>>24&255,y>>16&255,y>>8&255)},i.reduceLuminance=d,i.increaseLuminance=c},function(t,i){Object.defineProperty(i,"__esModule",{value:!0});var r=(t=typeof navigator>"u")?"node":navigator.userAgent;t=t?"node":navigator.platform,i.isFirefox=!!~r.indexOf("Firefox"),i.isSafari=/^((?!chrome|android).)*safari/i.test(r),r=0<=["Macintosh","MacIntel","MacPPC","Mac68K"].indexOf(t),i.isMac=r,i.isIpad=t==="iPad",i.isIphone=t==="iPhone",r=0<=["Windows","Win16","Win32","WinCE"].indexOf(t),i.isWindows=r,i.isLinux=0<=t.indexOf("Linux")},function(t,i){Object.defineProperty(i,"__esModule",{value:!0}),function(r){r.NUL="\0",r.SOH="",r.STX="",r.ETX="",r.EOT="",r.ENQ="",r.ACK="",r.BEL="\x07",r.BS="\b",r.HT="	",r.LF=`
`,r.VT="\v",r.FF="\f",r.CR="\r",r.SO="",r.SI="",r.DLE="",r.DC1="",r.DC2="",r.DC3="",r.DC4="",r.NAK="",r.SYN="",r.ETB="",r.CAN="",r.EM="",r.SUB="",r.ESC="\x1B",r.FS="",r.GS="",r.RS="",r.US="",r.SP=" ",r.DEL=""}(i.C0||(i.C0={})),function(r){r.PAD="",r.HOP="",r.BPH="",r.NBH="",r.IND="",r.NEL="",r.SSA="",r.ESA="",r.HTS="",r.HTJ="",r.VTS="",r.PLD="",r.PLU="",r.RI="",r.SS2="",r.SS3="",r.DCS="",r.PU1="",r.PU2="",r.STS="",r.CCH="",r.MW="",r.SPA="",r.EPA="",r.SOS="",r.SGCI="",r.SCI="",r.CSI="",r.ST="",r.OSC="",r.PM="",r.APC=""}(i.C1||(i.C1={}))},function(t,i,r){Object.defineProperty(i,"__esModule",{value:!0});var n=r(3),o=r(9),s=r(24),u=r(6),l=r(27),a=r(10);t=function(){function h(p,d,c,y,_,g,m,f){this._container=p,this._alpha=y,this._colors=_,this._rendererId=g,this._bufferService=m,this._optionsService=f,this._scaledCharTop=this._scaledCharLeft=this._scaledCellHeight=this._scaledCellWidth=this._scaledCharHeight=this._scaledCharWidth=0,this._currentGlyphIdentifier={chars:"",code:0,bg:0,fg:0,bold:!1,dim:!1,italic:!1},this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-"+d+"-layer"),this._canvas.style.zIndex=c.toString(),this._initCanvas(),this._container.appendChild(this._canvas)}return h.prototype.dispose=function(){var p;this._container.removeChild(this._canvas),(p=this._charAtlas)===null||p===void 0||p.dispose()},h.prototype._initCanvas=function(){this._ctx=l.throwIfFalsy(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()},h.prototype.onOptionsChanged=function(){},h.prototype.onBlur=function(){},h.prototype.onFocus=function(){},h.prototype.onCursorMove=function(){},h.prototype.onGridChanged=function(){},h.prototype.onSelectionChanged=function(){},h.prototype.setColors=function(p){this._refreshCharAtlas(p)},h.prototype._setTransparency=function(p){if(p!==this._alpha){var d=this._canvas;this._alpha=p,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,d),this._refreshCharAtlas(this._colors),this.onGridChanged(0,this._bufferService.rows-1)}},h.prototype._refreshCharAtlas=function(p){0>=this._scaledCharWidth&&0>=this._scaledCharHeight||(this._charAtlas=s.acquireCharAtlas(this._optionsService.options,this._rendererId,p,this._scaledCharWidth,this._scaledCharHeight),this._charAtlas.warmUp())},h.prototype.resize=function(p){this._scaledCellWidth=p.scaledCellWidth,this._scaledCellHeight=p.scaledCellHeight,this._scaledCharWidth=p.scaledCharWidth,this._scaledCharHeight=p.scaledCharHeight,this._scaledCharLeft=p.scaledCharLeft,this._scaledCharTop=p.scaledCharTop,this._canvas.width=p.scaledCanvasWidth,this._canvas.height=p.scaledCanvasHeight,this._canvas.style.width=p.canvasWidth+"px",this._canvas.style.height=p.canvasHeight+"px",this._alpha||this._clearAll(),this._refreshCharAtlas(this._colors)},h.prototype._fillCells=function(p,d,c,y){this._ctx.fillRect(p*this._scaledCellWidth,d*this._scaledCellHeight,c*this._scaledCellWidth,y*this._scaledCellHeight)},h.prototype._fillBottomLineAtCells=function(p,d,c){c===void 0&&(c=1),this._ctx.fillRect(p*this._scaledCellWidth,(d+1)*this._scaledCellHeight-window.devicePixelRatio-1,c*this._scaledCellWidth,window.devicePixelRatio)},h.prototype._fillLeftLineAtCell=function(p,d){this._ctx.fillRect(p*this._scaledCellWidth,d*this._scaledCellHeight,window.devicePixelRatio,this._scaledCellHeight)},h.prototype._strokeRectAtCell=function(p,d,c,y){this._ctx.lineWidth=window.devicePixelRatio,this._ctx.strokeRect(p*this._scaledCellWidth+window.devicePixelRatio/2,d*this._scaledCellHeight+window.devicePixelRatio/2,c*this._scaledCellWidth-window.devicePixelRatio,y*this._scaledCellHeight-window.devicePixelRatio)},h.prototype._clearAll=function(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))},h.prototype._clearCells=function(p,d,c,y){this._alpha?this._ctx.clearRect(p*this._scaledCellWidth,d*this._scaledCellHeight,c*this._scaledCellWidth,y*this._scaledCellHeight):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(p*this._scaledCellWidth,d*this._scaledCellHeight,c*this._scaledCellWidth,y*this._scaledCellHeight))},h.prototype._fillCharTrueColor=function(p,d,c){this._ctx.font=this._getFont(!1,!1),this._ctx.textBaseline="middle",this._clipRow(c),this._ctx.fillText(p.getChars(),d*this._scaledCellWidth+this._scaledCharLeft,c*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight/2)},h.prototype._drawChars=function(p,d,c){var y,_,g=this._getContrastColor(p);g||p.isFgRGB()||p.isBgRGB()?this._drawUncachedChars(p,d,c,g):(p.isInverse()?(y=p.isBgDefault()?o.INVERTED_DEFAULT_COLOR:p.getBgColor(),_=p.isFgDefault()?o.INVERTED_DEFAULT_COLOR:p.getFgColor()):(_=p.isBgDefault()?n.DEFAULT_COLOR:p.getBgColor(),y=p.isFgDefault()?n.DEFAULT_COLOR:p.getFgColor()),y+=this._optionsService.options.drawBoldTextInBrightColors&&p.isBold()&&8>y?8:0,this._currentGlyphIdentifier.chars=p.getChars()||n.WHITESPACE_CELL_CHAR,this._currentGlyphIdentifier.code=p.getCode()||n.WHITESPACE_CELL_CODE,this._currentGlyphIdentifier.bg=_,this._currentGlyphIdentifier.fg=y,this._currentGlyphIdentifier.bold=!!p.isBold(),this._currentGlyphIdentifier.dim=!!p.isDim(),this._currentGlyphIdentifier.italic=!!p.isItalic(),this._charAtlas&&this._charAtlas.draw(this._ctx,this._currentGlyphIdentifier,d*this._scaledCellWidth+this._scaledCharLeft,c*this._scaledCellHeight+this._scaledCharTop)||this._drawUncachedChars(p,d,c))},h.prototype._drawUncachedChars=function(p,d,c,y){this._ctx.save(),this._ctx.font=this._getFont(!!p.isBold(),!!p.isItalic()),this._ctx.textBaseline="middle",p.isInverse()?y?this._ctx.fillStyle=y.css:p.isBgDefault()?this._ctx.fillStyle=a.opaque(this._colors.background).css:p.isBgRGB()?this._ctx.fillStyle="rgb("+u.AttributeData.toColorRGB(p.getBgColor()).join(",")+")":(y=p.getBgColor(),this._optionsService.options.drawBoldTextInBrightColors&&p.isBold()&&8>y&&(y+=8),this._ctx.fillStyle=this._colors.ansi[y].css):y?this._ctx.fillStyle=y.css:p.isFgDefault()?this._ctx.fillStyle=this._colors.foreground.css:p.isFgRGB()?this._ctx.fillStyle="rgb("+u.AttributeData.toColorRGB(p.getFgColor()).join(",")+")":(y=p.getFgColor(),this._optionsService.options.drawBoldTextInBrightColors&&p.isBold()&&8>y&&(y+=8),this._ctx.fillStyle=this._colors.ansi[y].css),this._clipRow(c),p.isDim()&&(this._ctx.globalAlpha=o.DIM_OPACITY),this._ctx.fillText(p.getChars(),d*this._scaledCellWidth+this._scaledCharLeft,c*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight/2),this._ctx.restore()},h.prototype._clipRow=function(p){this._ctx.beginPath(),this._ctx.rect(0,p*this._scaledCellHeight,this._bufferService.cols*this._scaledCellWidth,this._scaledCellHeight),this._ctx.clip()},h.prototype._getFont=function(p,d){return(d?"italic":"")+" "+(p?this._optionsService.options.fontWeightBold:this._optionsService.options.fontWeight)+" "+this._optionsService.options.fontSize*window.devicePixelRatio+"px "+this._optionsService.options.fontFamily},h.prototype._getContrastColor=function(p){if(this._optionsService.options.minimumContrastRatio!==1){var d=this._colors.contrastCache.getColor(p.bg,p.fg);if(d!==void 0)return d||void 0;d=p.getFgColor();var c=p.getFgColorMode(),y=p.getBgColor(),_=p.getBgColorMode(),g=!!p.isInverse(),m=!!p.isInverse();if(g){var f=d;d=y,y=f,f=c,c=_,_=f}if(y=this._resolveBackgroundRgba(_,y,g),d=this._resolveForegroundRgba(c,d,g,m),d=a.ensureContrastRatioRgba(y,d,this._optionsService.options.minimumContrastRatio))return d={css:a.toCss(d>>24&255,d>>16&255,d>>8&255),rgba:d},this._colors.contrastCache.setColor(p.bg,p.fg,d),d;this._colors.contrastCache.setColor(p.bg,p.fg,null)}},h.prototype._resolveBackgroundRgba=function(p,d,c){switch(p){case 16777216:case 33554432:return this._colors.ansi[d].rgba;case 50331648:return d<<8;default:return c?this._colors.foreground.rgba:this._colors.background.rgba}},h.prototype._resolveForegroundRgba=function(p,d,c,y){switch(p){case 16777216:case 33554432:return this._optionsService.options.drawBoldTextInBrightColors&&y&&8>d&&(d+=8),this._colors.ansi[d].rgba;case 50331648:return d<<8;default:return c?this._colors.background.rgba:this._colors.foreground.rgba}},h}(),i.BaseRenderLayer=t},function(t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.serviceRegistry=new Map,i.getServiceDependencies=function(r){return r.di$dependencies||[]},i.createDecorator=function(r){function n(o,s,u){if(arguments.length!==3)throw Error("@IServiceName-decorator can only be used to decorate a parameter");var l=n;o.di$target===o?o.di$dependencies.push({id:l,index:u}):(o.di$dependencies=[{id:l,index:u}],o.di$target=o)}return i.serviceRegistry.has(r)?i.serviceRegistry.get(r):(n.toString=function(){return r},i.serviceRegistry.set(r,n),n)}},function(t,i){function r(n,o,s,u){if(s===void 0&&(s=0),u===void 0&&(u=n.length),s>=n.length)return n;for(s=(n.length+s)%n.length,u=u>=n.length?n.length:(n.length+u)%n.length;s<u;++s)n[s]=o;return n}Object.defineProperty(i,"__esModule",{value:!0}),i.fill=function(n,o,s,u){return n.fill?n.fill(o,s,u):r(n,o,s,u)},i.fillFallback=r,i.concat=function(n,o){var s=new n.constructor(n.length+o.length);return s.set(n),s.set(o,n.length),s}},function(t,i,r){Object.defineProperty(i,"__esModule",{value:!0});var n=r(8),o=r(3),s=r(5);t=r(6),i.DEFAULT_ATTR_DATA=Object.freeze(new t.AttributeData),t=function(){function u(l,a,h){for(h===void 0&&(h=!1),this.isWrapped=h,this._combined={},this._data=new Uint32Array(3*l),a=a||s.CellData.fromCharData([0,o.NULL_CELL_CHAR,o.NULL_CELL_WIDTH,o.NULL_CELL_CODE]),h=0;h<l;++h)this.setCell(h,a);this.length=l}return u.prototype.get=function(l){var a=this._data[3*l],h=2097151&a;return[this._data[3*l+1],2097152&a?this._combined[l]:h?n.stringFromCodePoint(h):"",a>>22,2097152&a?this._combined[l].charCodeAt(this._combined[l].length-1):h]},u.prototype.set=function(l,a){this._data[3*l+1]=a[o.CHAR_DATA_ATTR_INDEX],1<a[o.CHAR_DATA_CHAR_INDEX].length?(this._combined[l]=a[1],this._data[3*l]=2097152|l|a[o.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*l]=a[o.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|a[o.CHAR_DATA_WIDTH_INDEX]<<22},u.prototype.getWidth=function(l){return this._data[3*l]>>22},u.prototype.hasWidth=function(l){return 12582912&this._data[3*l]},u.prototype.getFg=function(l){return this._data[3*l+1]},u.prototype.getBg=function(l){return this._data[3*l+2]},u.prototype.hasContent=function(l){return 4194303&this._data[3*l]},u.prototype.getCodePoint=function(l){var a=this._data[3*l];return 2097152&a?this._combined[l].charCodeAt(this._combined[l].length-1):2097151&a},u.prototype.isCombined=function(l){return 2097152&this._data[3*l]},u.prototype.getString=function(l){var a=this._data[3*l];return 2097152&a?this._combined[l]:2097151&a?n.stringFromCodePoint(2097151&a):""},u.prototype.loadCell=function(l,a){var h=3*l;return a.content=this._data[h+0],a.fg=this._data[h+1],a.bg=this._data[h+2],2097152&a.content&&(a.combinedData=this._combined[l]),a},u.prototype.setCell=function(l,a){2097152&a.content&&(this._combined[l]=a.combinedData),this._data[3*l]=a.content,this._data[3*l+1]=a.fg,this._data[3*l+2]=a.bg},u.prototype.setCellFromCodePoint=function(l,a,h,p,d){this._data[3*l]=a|h<<22,this._data[3*l+1]=p,this._data[3*l+2]=d},u.prototype.addCodepointToCell=function(l,a){var h=this._data[3*l];2097152&h?this._combined[l]+=n.stringFromCodePoint(a):(2097151&h?(this._combined[l]=n.stringFromCodePoint(2097151&h)+n.stringFromCodePoint(a),h&=-2097152,h|=2097152):h=a|4194304,this._data[3*l]=h)},u.prototype.insertCells=function(l,a,h){if(l%=this.length,a<this.length-l){for(var p=new s.CellData,d=this.length-l-a-1;0<=d;--d)this.setCell(l+a+d,this.loadCell(l+d,p));for(d=0;d<a;++d)this.setCell(l+d,h)}else for(d=l;d<this.length;++d)this.setCell(d,h)},u.prototype.deleteCells=function(l,a,h){if(l%=this.length,a<this.length-l){for(var p=new s.CellData,d=0;d<this.length-l-a;++d)this.setCell(l+d,this.loadCell(l+a+d,p));d=this.length-a}else d=l;for(;d<this.length;++d)this.setCell(d,h)},u.prototype.replaceCells=function(l,a,h){for(;l<a&&l<this.length;)this.setCell(l++,h)},u.prototype.resize=function(l,a){if(l!==this.length){if(l>this.length){var h=new Uint32Array(3*l);for(this.length&&(3*l<this._data.length?h.set(this._data.subarray(0,3*l)):h.set(this._data)),this._data=h,h=this.length;h<l;++h)this.setCell(h,a)}else if(l)for((h=new Uint32Array(3*l)).set(this._data.subarray(0,3*l)),this._data=h,a=Object.keys(this._combined),h=0;h<a.length;h++){var p=parseInt(a[h],10);p>=l&&delete this._combined[p]}else this._data=new Uint32Array(0),this._combined={};this.length=l}},u.prototype.fill=function(l){this._combined={};for(var a=0;a<this.length;++a)this.setCell(a,l)},u.prototype.copyFrom=function(l){for(var a in this.length!==l.length?this._data=new Uint32Array(l._data):this._data.set(l._data),this.length=l.length,this._combined={},l._combined)this._combined[a]=l._combined[a];this.isWrapped=l.isWrapped},u.prototype.clone=function(){var l=new u(0),a;for(a in l._data=new Uint32Array(this._data),l.length=this.length,this._combined)l._combined[a]=this._combined[a];return l.isWrapped=this.isWrapped,l},u.prototype.getTrimmedLength=function(){for(var l=this.length-1;0<=l;--l)if(4194303&this._data[3*l])return l+(this._data[3*l]>>22);return 0},u.prototype.copyCellsFrom=function(l,a,h,p,d){var c=l._data;if(d)for(var y=p-1;0<=y;y--)for(d=0;3>d;d++)this._data[3*(h+y)+d]=c[3*(a+y)+d];else for(y=0;y<p;y++)for(d=0;3>d;d++)this._data[3*(h+y)+d]=c[3*(a+y)+d];for(p=Object.keys(l._combined),d=0;d<p.length;d++)c=parseInt(p[d],10),c>=a&&(this._combined[c-a+h]=l._combined[c])},u.prototype.translateToString=function(l,a,h){for(l===void 0&&(l=!1),a===void 0&&(a=0),h===void 0&&(h=this.length),l&&(h=Math.min(h,this.getTrimmedLength())),l="";a<h;){var p=this._data[3*a],d=2097151&p;l+=2097152&p?this._combined[a]:d?n.stringFromCodePoint(d):o.WHITESPACE_CELL_CHAR,a+=p>>22||1}return l},u}(),i.BufferLine=t},function(t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.promptLabel="Terminal input",i.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},function(t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.CHARSETS={},i.DEFAULT_CHARSET=i.CHARSETS.B,i.CHARSETS[0]={"`":"",a:"",b:"	",c:"\f",d:"\r",e:`
`,f:"",g:"",h:"",i:"\v",j:"",k:"",l:"",m:"",n:"",o:"",p:"",q:"",r:"",s:"",t:"",u:"",v:"",w:"",x:"",y:"",z:"","{":"","|":"","}":"","~":""},i.CHARSETS.A={"#":""},i.CHARSETS.B=null,i.CHARSETS[4]={"#":"","@":"","[":"ij","\\":"","]":"|","{":"","|":"f","}":"","~":""},i.CHARSETS.C=i.CHARSETS[5]={"[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},i.CHARSETS.R={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},i.CHARSETS.Q={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},i.CHARSETS.K={"@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},i.CHARSETS.Y={"#":"","@":"","[":"","\\":"","]":"","`":"","{":"","|":"","}":"","~":""},i.CHARSETS.E=i.CHARSETS[6]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},i.CHARSETS.Z={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":""},i.CHARSETS.H=i.CHARSETS[7]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},i.CHARSETS["="]={"#":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":""}},function(t,i,r){Object.defineProperty(i,"__esModule",{value:!0});var n=r(15);i.wcwidth=function(o){var s=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],u=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],l=0|o.control,a=new Uint8Array(65536);for(n.fill(a,1),a[0]=o.nul,n.fill(a,o.control,1,32),n.fill(a,o.control,127,160),n.fill(a,2,4352,4448),a[9001]=2,a[9002]=2,n.fill(a,2,11904,42192),a[12351]=1,n.fill(a,2,44032,55204),n.fill(a,2,63744,64256),n.fill(a,2,65040,65050),n.fill(a,2,65072,65136),n.fill(a,2,65280,65377),n.fill(a,2,65504,65511),o=0;o<s.length;++o)n.fill(a,0,s[o][0],s[o][1]+1);return function(h){if(32>h)h=0|l;else if(127>h)h=1;else if(65536>h)h=a[h];else{e:{var p=h,d,c=0,y=u.length-1;if(!(p<u[0][0]||p>u[y][1]))for(;y>=c;)if(p>u[d=c+y>>1][1])c=d+1;else{if(!(p<u[d][0])){p=!0;break e}y=d-1}p=!1}h=p?0:131072<=h&&196605>=h||196608<=h&&262141>=h?2:1}return h}}({nul:0,control:0}),i.getStringCellWidth=function(o){for(var s=0,u=o.length,l=0;l<u;++l){var a=o.charCodeAt(l);if(55296<=a&&56319>=a){if(++l>=u)return s+i.wcwidth(a);var h=o.charCodeAt(l);56320<=h&&57343>=h?a=1024*(a-55296)+h-56320+65536:s+=i.wcwidth(h)}s+=i.wcwidth(a)}return s}},function(t,i){Object.defineProperty(i,"__esModule",{value:!0}),t=function(){function r(n,o){if(n===void 0&&(n=32),o===void 0&&(o=32),this.maxLength=n,this.maxSubParamsLength=o,256<o)throw Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(n),this.length=0,this._subParams=new Int32Array(o),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(n),this._digitIsSub=this._rejectSubDigits=this._rejectDigits=!1}return r.fromArray=function(n){var o=new r;if(!n.length)return o;for(var s=n[0]instanceof Array?1:0;s<n.length;++s){var u=n[s];if(u instanceof Array)for(var l=0;l<u.length;++l)o.addSubParam(u[l]);else o.addParam(u)}return o},r.prototype.clone=function(){var n=new r(this.maxLength,this.maxSubParamsLength);return n.params.set(this.params),n.length=this.length,n._subParams.set(this._subParams),n._subParamsLength=this._subParamsLength,n._subParamsIdx.set(this._subParamsIdx),n._rejectDigits=this._rejectDigits,n._rejectSubDigits=this._rejectSubDigits,n._digitIsSub=this._digitIsSub,n},r.prototype.toArray=function(){for(var n=[],o=0;o<this.length;++o){n.push(this.params[o]);var s=this._subParamsIdx[o]>>8,u=255&this._subParamsIdx[o];0<u-s&&n.push(Array.prototype.slice.call(this._subParams,s,u))}return n},r.prototype.reset=function(){this._subParamsLength=this.length=0,this._digitIsSub=this._rejectSubDigits=this._rejectDigits=!1},r.prototype.addParam=function(n){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(-1>n)throw Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=2147483647<n?2147483647:n}},r.prototype.addSubParam=function(n){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(-1>n)throw Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=2147483647<n?2147483647:n,this._subParamsIdx[this.length-1]++}},r.prototype.hasSubParams=function(n){return 0<(255&this._subParamsIdx[n])-(this._subParamsIdx[n]>>8)},r.prototype.getSubParams=function(n){var o=this._subParamsIdx[n]>>8;return n=255&this._subParamsIdx[n],0<n-o?this._subParams.subarray(o,n):null},r.prototype.getSubParamsAll=function(){for(var n={},o=0;o<this.length;++o){var s=this._subParamsIdx[o]>>8,u=255&this._subParamsIdx[o];0<u-s&&(n[o]=this._subParams.slice(s,u))}return n},r.prototype.addDigit=function(n){var o;if(!(this._rejectDigits||!(o=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)){var s=this._digitIsSub?this._subParams:this.params,u=s[o-1];s[o-1]=~u?Math.min(10*u+n,2147483647):n}},r}(),i.Params=t},function(t,i,r){Object.defineProperty(i,"__esModule",{value:!0});var n=r(22),o=r(8);t=function(){function s(){this._state=0,this._id=-1,this._handlers=Object.create(null),this._handlerFb=function(){}}return s.prototype.addHandler=function(u,l){this._handlers[u]===void 0&&(this._handlers[u]=[]);var a=this._handlers[u];return a.push(l),{dispose:function(){var h=a.indexOf(l);h!==-1&&a.splice(h,1)}}},s.prototype.setHandler=function(u,l){this._handlers[u]=[l]},s.prototype.clearHandler=function(u){this._handlers[u]&&delete this._handlers[u]},s.prototype.setHandlerFallback=function(u){this._handlerFb=u},s.prototype.dispose=function(){this._handlers=Object.create(null),this._handlerFb=function(){}},s.prototype.reset=function(){this._state===2&&this.end(!1),this._id=-1,this._state=0},s.prototype._start=function(){var u=this._handlers[this._id];if(u)for(var l=u.length-1;0<=l;l--)u[l].start();else this._handlerFb(this._id,"START")},s.prototype._put=function(u,l,a){var h=this._handlers[this._id];if(h)for(var p=h.length-1;0<=p;p--)h[p].put(u,l,a);else this._handlerFb(this._id,"PUT",o.utf32ToString(u,l,a))},s.prototype._end=function(u){var l=this._handlers[this._id];if(l){for(var a=l.length-1;0<=a&&l[a].end(u)===!1;a--);for(a--;0<=a;a--)l[a].end(!1)}else this._handlerFb(this._id,"END",u)},s.prototype.start=function(){this.reset(),this._id=-1,this._state=1},s.prototype.put=function(u,l,a){if(this._state!==3){if(this._state===1)for(;l<a;){var h=u[l++];if(h===59){this._state=2,this._start();break}if(48>h||57<h)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+h-48}this._state===2&&0<a-l&&this._put(u,l,a)}},s.prototype.end=function(u){this._state!==0&&(this._state!==3&&(this._state===1&&this._start(),this._end(u)),this._id=-1,this._state=0)},s}(),i.OscParser=t,t=function(){function s(u){this._handler=u,this._data="",this._hitLimit=!1}return s.prototype.start=function(){this._data="",this._hitLimit=!1},s.prototype.put=function(u,l,a){this._hitLimit||(this._data+=o.utf32ToString(u,l,a),this._data.length>n.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))},s.prototype.end=function(u){var l;return this._hitLimit?l=!1:u&&(l=this._handler(this._data)),this._data="",this._hitLimit=!1,l},s}(),i.OscHandler=t},function(t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.PAYLOAD_LIMIT=1e7},function(t,i,r){Object.defineProperty(i,"__esModule",{value:!0});var n=r(8),o=r(20),s=r(22),u=[];t=function(){function l(){this._handlers=Object.create(null),this._active=u,this._ident=0,this._handlerFb=function(){}}return l.prototype.dispose=function(){this._handlers=Object.create(null),this._handlerFb=function(){}},l.prototype.addHandler=function(a,h){this._handlers[a]===void 0&&(this._handlers[a]=[]);var p=this._handlers[a];return p.push(h),{dispose:function(){var d=p.indexOf(h);d!==-1&&p.splice(d,1)}}},l.prototype.setHandler=function(a,h){this._handlers[a]=[h]},l.prototype.clearHandler=function(a){this._handlers[a]&&delete this._handlers[a]},l.prototype.setHandlerFallback=function(a){this._handlerFb=a},l.prototype.reset=function(){this._active.length&&this.unhook(!1),this._active=u,this._ident=0},l.prototype.hook=function(a,h){if(this.reset(),this._ident=a,this._active=this._handlers[a]||u,this._active.length)for(a=this._active.length-1;0<=a;a--)this._active[a].hook(h);else this._handlerFb(this._ident,"HOOK",h)},l.prototype.put=function(a,h,p){if(this._active.length)for(var d=this._active.length-1;0<=d;d--)this._active[d].put(a,h,p);else this._handlerFb(this._ident,"PUT",n.utf32ToString(a,h,p))},l.prototype.unhook=function(a){if(this._active.length){for(var h=this._active.length-1;0<=h&&this._active[h].unhook(a)===!1;h--);for(h--;0<=h;h--)this._active[h].unhook(!1)}else this._handlerFb(this._ident,"UNHOOK",a);this._active=u,this._ident=0},l}(),i.DcsParser=t,t=function(){function l(a){this._handler=a,this._data="",this._hitLimit=!1}return l.prototype.hook=function(a){this._params=a.clone(),this._data="",this._hitLimit=!1},l.prototype.put=function(a,h,p){this._hitLimit||(this._data+=n.utf32ToString(a,h,p),this._data.length>s.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))},l.prototype.unhook=function(a){var h;return this._hitLimit?h=!1:a&&(h=this._handler(this._data,this._params?this._params:new o.Params)),this._params=void 0,this._data="",this._hitLimit=!1,h},l}(),i.DcsHandler=t},function(t,i,r){Object.defineProperty(i,"__esModule",{value:!0});var n=r(25),o=r(43),s=[];i.acquireCharAtlas=function(u,l,a,h,p){for(u=n.generateConfig(h,p,u,a),a=0;a<s.length;a++)if(h=(p=s[a]).ownedBy.indexOf(l),0<=h){if(n.configEquals(p.config,u))return p.atlas;p.ownedBy.length===1?(p.atlas.dispose(),s.splice(a,1)):p.ownedBy.splice(h,1);break}for(a=0;a<s.length;a++)if(p=s[a],n.configEquals(p.config,u))return p.ownedBy.push(l),p.atlas;return l={atlas:new o.DynamicCharAtlas(document,u),config:u,ownedBy:[l]},s.push(l),l.atlas},i.removeTerminalFromCache=function(u){for(var l=0;l<s.length;l++){var a=s[l].ownedBy.indexOf(u);if(a!==-1){s[l].ownedBy.length===1?(s[l].atlas.dispose(),s.splice(l,1)):s[l].ownedBy.splice(a,1);break}}}},function(t,i,r){Object.defineProperty(i,"__esModule",{value:!0});var n=r(3);i.generateConfig=function(o,s,u,l){return l={foreground:l.foreground,background:l.background,cursor:void 0,cursorAccent:void 0,selection:void 0,ansi:l.ansi.slice(0,16)},{devicePixelRatio:window.devicePixelRatio,scaledCharWidth:o,scaledCharHeight:s,fontFamily:u.fontFamily,fontSize:u.fontSize,fontWeight:u.fontWeight,fontWeightBold:u.fontWeightBold,allowTransparency:u.allowTransparency,colors:l}},i.configEquals=function(o,s){for(var u=0;u<o.colors.ansi.length;u++)if(o.colors.ansi[u].rgba!==s.colors.ansi[u].rgba)return!1;return o.devicePixelRatio===s.devicePixelRatio&&o.fontFamily===s.fontFamily&&o.fontSize===s.fontSize&&o.fontWeight===s.fontWeight&&o.fontWeightBold===s.fontWeightBold&&o.allowTransparency===s.allowTransparency&&o.scaledCharWidth===s.scaledCharWidth&&o.scaledCharHeight===s.scaledCharHeight&&o.colors.foreground===s.colors.foreground&&o.colors.background===s.colors.background},i.is256Color=function(o){return o<n.DEFAULT_COLOR}},function(t,i,r){Object.defineProperty(i,"__esModule",{value:!0});var n=r(10),o=r(45),s=n.fromCss("#ffffff"),u=n.fromCss("#000000"),l=n.fromCss("#ffffff"),a=n.fromCss("#000000"),h={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};i.DEFAULT_ANSI_COLORS=function(){for(var p=[n.fromCss("#2e3436"),n.fromCss("#cc0000"),n.fromCss("#4e9a06"),n.fromCss("#c4a000"),n.fromCss("#3465a4"),n.fromCss("#75507b"),n.fromCss("#06989a"),n.fromCss("#d3d7cf"),n.fromCss("#555753"),n.fromCss("#ef2929"),n.fromCss("#8ae234"),n.fromCss("#fce94f"),n.fromCss("#729fcf"),n.fromCss("#ad7fa8"),n.fromCss("#34e2e2"),n.fromCss("#eeeeec")],d=[0,95,135,175,215,255],c=0;216>c;c++){var y=d[c/36%6|0],_=d[c/6%6|0],g=d[c%6];p.push({css:n.toCss(y,_,g),rgba:n.toRgba(y,_,g)})}for(c=0;24>c;c++)d=8+10*c,p.push({css:n.toCss(d,d,d),rgba:n.toRgba(d,d,d)});return p}(),t=function(){function p(d,c){if(this.allowTransparency=c,d=d.createElement("canvas"),d.width=1,d.height=1,d=d.getContext("2d"),!d)throw Error("Could not get rendering context");this._ctx=d,this._ctx.globalCompositeOperation="copy",this._litmusColor=this._ctx.createLinearGradient(0,0,1,1),this._contrastCache=new o.ColorContrastCache,this.colors={foreground:s,background:u,cursor:l,cursorAccent:a,selection:h,selectionOpaque:n.blend(u,h),ansi:i.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache}}return p.prototype.onOptionsChange=function(d){d==="minimumContrastRatio"&&this._contrastCache.clear()},p.prototype.setTheme=function(d){d===void 0&&(d={}),this.colors.foreground=this._parseColor(d.foreground,s),this.colors.background=this._parseColor(d.background,u),this.colors.cursor=this._parseColor(d.cursor,l,!0),this.colors.cursorAccent=this._parseColor(d.cursorAccent,a,!0),this.colors.selection=this._parseColor(d.selection,h,!0),this.colors.selectionOpaque=n.blend(this.colors.background,this.colors.selection),this.colors.ansi[0]=this._parseColor(d.black,i.DEFAULT_ANSI_COLORS[0]),this.colors.ansi[1]=this._parseColor(d.red,i.DEFAULT_ANSI_COLORS[1]),this.colors.ansi[2]=this._parseColor(d.green,i.DEFAULT_ANSI_COLORS[2]),this.colors.ansi[3]=this._parseColor(d.yellow,i.DEFAULT_ANSI_COLORS[3]),this.colors.ansi[4]=this._parseColor(d.blue,i.DEFAULT_ANSI_COLORS[4]),this.colors.ansi[5]=this._parseColor(d.magenta,i.DEFAULT_ANSI_COLORS[5]),this.colors.ansi[6]=this._parseColor(d.cyan,i.DEFAULT_ANSI_COLORS[6]),this.colors.ansi[7]=this._parseColor(d.white,i.DEFAULT_ANSI_COLORS[7]),this.colors.ansi[8]=this._parseColor(d.brightBlack,i.DEFAULT_ANSI_COLORS[8]),this.colors.ansi[9]=this._parseColor(d.brightRed,i.DEFAULT_ANSI_COLORS[9]),this.colors.ansi[10]=this._parseColor(d.brightGreen,i.DEFAULT_ANSI_COLORS[10]),this.colors.ansi[11]=this._parseColor(d.brightYellow,i.DEFAULT_ANSI_COLORS[11]),this.colors.ansi[12]=this._parseColor(d.brightBlue,i.DEFAULT_ANSI_COLORS[12]),this.colors.ansi[13]=this._parseColor(d.brightMagenta,i.DEFAULT_ANSI_COLORS[13]),this.colors.ansi[14]=this._parseColor(d.brightCyan,i.DEFAULT_ANSI_COLORS[14]),this.colors.ansi[15]=this._parseColor(d.brightWhite,i.DEFAULT_ANSI_COLORS[15]),this._contrastCache.clear()},p.prototype._parseColor=function(d,c,y){if(y===void 0&&(y=this.allowTransparency),d===void 0)return c;if(this._ctx.fillStyle=this._litmusColor,this._ctx.fillStyle=d,typeof this._ctx.fillStyle!="string")return console.warn("Color: "+d+" is invalid using fallback "+c.css),c;this._ctx.fillRect(0,0,1,1);var _=this._ctx.getImageData(0,0,1,1).data;if(_[3]!==255){if(!y)return console.warn("Color: "+d+" is using transparency, but allowTransparency is false. Using fallback "+c.css+"."),c;if(d.length===5){_=parseInt(d.substr(1),16),d=16*(_>>12&15),c=16*(_>>8&15),y=16*(_>>4&15),_=16*(15&_);var g=n.toRgba(d,c,y,_)}else d=(g=parseInt(d.substr(1),16))>>24&255,c=g>>16&255,y=g>>8&255,_=255&g;return{rgba:g,css:n.toCss(d,c,y,_)}}return{css:d,rgba:n.toRgba(_[0],_[1],_[2],_[3])}},p}(),i.ColorManager=t},function(t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.throwIfFalsy=function(r){if(!r)throw Error("value must not be falsy");return r}},function(t,i,r){var n,o=this&&this.__extends||(n=function(l,a){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,p){h.__proto__=p}||function(h,p){for(var d in p)p.hasOwnProperty(d)&&(h[d]=p[d])})(l,a)},function(l,a){function h(){this.constructor=l}n(l,a),l.prototype=a===null?Object.create(a):(h.prototype=a.prototype,new h)});Object.defineProperty(i,"__esModule",{value:!0}),t=r(6);var s=r(3),u=r(5);r=function(l){function a(h,p,d){var c=l.call(this)||this;return c.content=0,c.fg=h.fg,c.bg=h.bg,c.combinedData=p,c._width=d,c}return o(a,l),a.prototype.isCombined=function(){return 2097152},a.prototype.getWidth=function(){return this._width},a.prototype.getChars=function(){return this.combinedData},a.prototype.getCode=function(){return 2097151},a.prototype.setFromCharData=function(){throw Error("not implemented")},a.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},a}(t.AttributeData),i.JoinedCellData=r,r=function(){function l(a){this._bufferService=a,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new u.CellData}return l.prototype.registerCharacterJoiner=function(a){return a={id:this._nextCharacterJoinerId++,handler:a},this._characterJoiners.push(a),a.id},l.prototype.deregisterCharacterJoiner=function(a){for(var h=0;h<this._characterJoiners.length;h++)if(this._characterJoiners[h].id===a)return this._characterJoiners.splice(h,1),!0;return!1},l.prototype.getJoinedCharacters=function(a){if(this._characterJoiners.length===0)return[];if(a=this._bufferService.buffer.lines.get(a),!a||a.length===0)return[];for(var h=[],p=a.translateToString(!0),d=0,c=0,y=0,_=a.getFg(0),g=a.getBg(0),m=0;m<a.getTrimmedLength();m++)if(a.loadCell(m,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==_||this._workCell.bg!==g){if(1<m-d)for(d=this._getJoinedRanges(p,y,c,a,d),y=0;y<d.length;y++)h.push(d[y]);d=m,y=c,_=this._workCell.fg,g=this._workCell.bg}c+=this._workCell.getChars().length||s.WHITESPACE_CELL_CHAR.length}if(1<this._bufferService.cols-d)for(d=this._getJoinedRanges(p,y,c,a,d),y=0;y<d.length;y++)h.push(d[y]);return h},l.prototype._getJoinedRanges=function(a,h,p,d,c){for(a=a.substring(h,p),h=this._characterJoiners[0].handler(a),p=1;p<this._characterJoiners.length;p++)for(var y=this._characterJoiners[p].handler(a),_=0;_<y.length;_++)l._mergeRanges(h,y[_]);return this._stringRangesToCellRanges(h,d,c),h},l.prototype._stringRangesToCellRanges=function(a,h,p){var d=0,c=!1,y=0,_=a[d];if(_){for(;p<this._bufferService.cols;p++){var g=h.getWidth(p),m=h.getString(p).length||s.WHITESPACE_CELL_CHAR.length;if(g!==0){if(!c&&_[0]<=y&&(_[0]=p,c=!0),_[1]<=y){if(_[1]=p,!(_=a[++d]))break;_[0]<=y?(_[0]=p,c=!0):c=!1}y+=m}}_&&(_[1]=this._bufferService.cols)}},l._mergeRanges=function(a,h){for(var p=!1,d=0;d<a.length;d++){var c=a[d];if(p){if(h[1]<=c[0])return a[d-1][1]=h[1],a;if(h[1]<=c[1])return a[d-1][1]=Math.max(h[1],c[1]),a.splice(d,1),a;a.splice(d,1),d--}else{if(h[1]<=c[0])return a.splice(d,0,h),a;if(h[1]<=c[1])return c[0]=Math.min(h[0],c[0]),a;h[0]<c[1]&&(c[0]=Math.min(h[0],c[0]),p=!0)}}return p?a[a.length-1][1]=h[1]:a.push(h),a},l}(),i.CharacterJoinerRegistry=r},function(t,i){function r(n,o){return o=o.getBoundingClientRect(),[n.clientX-o.left,n.clientY-o.top]}Object.defineProperty(i,"__esModule",{value:!0}),i.getCoordsRelativeToElement=r,i.getCoords=function(n,o,s,u,l,a,h,p){if(l&&(n=r(n,o)))return n[0]=Math.ceil((n[0]+(p?a/2:0))/a),n[1]=Math.ceil(n[1]/h),n[0]=Math.min(Math.max(n[0],1),s+(p?1:0)),n[1]=Math.min(Math.max(n[1],1),u),n},i.getRawByteCoords=function(n){if(n)return{x:n[0]+32,y:n[1]+32}}},function(t,i){Object.defineProperty(i,"__esModule",{value:!0}),t=function(){function r(n){this._renderCallback=n}return r.prototype.dispose=function(){this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},r.prototype.refresh=function(n,o,s){var u=this;this._rowCount=s,n=n!==void 0?n:0,o=o!==void 0?o:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,n):n,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,o):o,this._animationFrame||(this._animationFrame=window.requestAnimationFrame(function(){return u._innerRefresh()}))},r.prototype._innerRefresh=function(){this._rowStart!==void 0&&this._rowEnd!==void 0&&this._rowCount!==void 0&&(this._rowStart=Math.max(this._rowStart,0),this._rowEnd=Math.min(this._rowEnd,this._rowCount-1),this._renderCallback(this._rowStart,this._rowEnd),this._rowStart=void 0,this._rowEnd=void 0,this._animationFrame=void 0)},r}(),i.RenderDebouncer=t},function(t,i,r){var n,o=this&&this.__extends||(n=function(s,u){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,a){l.__proto__=a}||function(l,a){for(var h in a)a.hasOwnProperty(h)&&(l[h]=a[h])})(s,u)},function(s,u){function l(){this.constructor=s}n(s,u),s.prototype=u===null?Object.create(u):(l.prototype=u.prototype,new l)});Object.defineProperty(i,"__esModule",{value:!0}),t=function(s){function u(){var l=s!==null&&s.apply(this,arguments)||this;return l._currentDevicePixelRatio=window.devicePixelRatio,l}return o(u,s),u.prototype.setListener=function(l){var a=this;this._listener&&this.clearListener(),this._listener=l,this._outerListener=function(){a._listener&&(a._listener(window.devicePixelRatio,a._currentDevicePixelRatio),a._updateDpr())},this._updateDpr()},u.prototype.dispose=function(){s.prototype.dispose.call(this),this.clearListener()},u.prototype._updateDpr=function(){this._resolutionMediaMatchList&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._currentDevicePixelRatio=window.devicePixelRatio,this._resolutionMediaMatchList=window.matchMedia("screen and (resolution: "+window.devicePixelRatio+"dppx)"),this._resolutionMediaMatchList.addListener(this._outerListener))},u.prototype.clearListener=function(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)},u}(r(2).Disposable),i.ScreenDprMonitor=t},function(t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.clone=function r(n,o){if(o===void 0&&(o=5),typeof n!="object")return n;var s=Array.isArray(n)?[]:{},u;for(u in n)s[u]=1>=o?n[u]:n[u]?r(n[u],o-1):n[u];return s}},function(t,i,r){Object.defineProperty(i,"__esModule",{value:!0});var n=r(34),o=r(17),s=r(78);t=function(){function p(d){this._core=new n.Terminal(d),this._addonManager=new s.AddonManager}return Object.defineProperty(p.prototype,"onCursorMove",{get:function(){return this._core.onCursorMove},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"onLineFeed",{get:function(){return this._core.onLineFeed},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"onSelectionChange",{get:function(){return this._core.onSelectionChange},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"onData",{get:function(){return this._core.onData},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"onBinary",{get:function(){return this._core.onBinary},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"onTitleChange",{get:function(){return this._core.onTitleChange},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"onScroll",{get:function(){return this._core.onScroll},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"onKey",{get:function(){return this._core.onKey},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"onRender",{get:function(){return this._core.onRender},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"onResize",{get:function(){return this._core.onResize},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"element",{get:function(){return this._core.element},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"parser",{get:function(){return this._parser||(this._parser=new h(this._core)),this._parser},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"textarea",{get:function(){return this._core.textarea},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"rows",{get:function(){return this._core.rows},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"cols",{get:function(){return this._core.cols},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"buffer",{get:function(){return new u(this._core.buffer)},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"markers",{get:function(){return this._core.markers},enumerable:!0,configurable:!0}),p.prototype.blur=function(){this._core.blur()},p.prototype.focus=function(){this._core.focus()},p.prototype.resize=function(d,c){this._verifyIntegers(d,c),this._core.resize(d,c)},p.prototype.open=function(d){this._core.open(d)},p.prototype.attachCustomKeyEventHandler=function(d){this._core.attachCustomKeyEventHandler(d)},p.prototype.registerLinkMatcher=function(d,c,y){return this._core.registerLinkMatcher(d,c,y)},p.prototype.deregisterLinkMatcher=function(d){this._core.deregisterLinkMatcher(d)},p.prototype.registerCharacterJoiner=function(d){return this._core.registerCharacterJoiner(d)},p.prototype.deregisterCharacterJoiner=function(d){this._core.deregisterCharacterJoiner(d)},p.prototype.addMarker=function(d){return this._verifyIntegers(d),this._core.addMarker(d)},p.prototype.hasSelection=function(){return this._core.hasSelection()},p.prototype.select=function(d,c,y){this._verifyIntegers(d,c,y),this._core.select(d,c,y)},p.prototype.getSelection=function(){return this._core.getSelection()},p.prototype.getSelectionPosition=function(){return this._core.getSelectionPosition()},p.prototype.clearSelection=function(){this._core.clearSelection()},p.prototype.selectAll=function(){this._core.selectAll()},p.prototype.selectLines=function(d,c){this._verifyIntegers(d,c),this._core.selectLines(d,c)},p.prototype.dispose=function(){this._addonManager.dispose(),this._core.dispose()},p.prototype.scrollLines=function(d){this._verifyIntegers(d),this._core.scrollLines(d)},p.prototype.scrollPages=function(d){this._verifyIntegers(d),this._core.scrollPages(d)},p.prototype.scrollToTop=function(){this._core.scrollToTop()},p.prototype.scrollToBottom=function(){this._core.scrollToBottom()},p.prototype.scrollToLine=function(d){this._verifyIntegers(d),this._core.scrollToLine(d)},p.prototype.clear=function(){this._core.clear()},p.prototype.write=function(d,c){this._core.write(d,c)},p.prototype.writeUtf8=function(d,c){this._core.write(d,c)},p.prototype.writeln=function(d,c){this._core.write(d),this._core.write(`\r
`,c)},p.prototype.paste=function(d){this._core.paste(d)},p.prototype.getOption=function(d){return this._core.optionsService.getOption(d)},p.prototype.setOption=function(d,c){this._core.optionsService.setOption(d,c)},p.prototype.refresh=function(d,c){this._verifyIntegers(d,c),this._core.refresh(d,c)},p.prototype.reset=function(){this._core.reset()},p.prototype.loadAddon=function(d){return this._addonManager.loadAddon(this,d)},Object.defineProperty(p,"strings",{get:function(){return o},enumerable:!0,configurable:!0}),p.prototype._verifyIntegers=function(){for(var d=[],c=0;c<arguments.length;c++)d[c]=arguments[c];d.forEach(function(y){if(y===1/0||isNaN(y)||y%1!=0)throw Error("This API only accepts integers")})},p}(),i.Terminal=t;var u=function(){function p(d){this._buffer=d}return Object.defineProperty(p.prototype,"cursorY",{get:function(){return this._buffer.y},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"cursorX",{get:function(){return this._buffer.x},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"viewportY",{get:function(){return this._buffer.ydisp},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"baseY",{get:function(){return this._buffer.ybase},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"length",{get:function(){return this._buffer.lines.length},enumerable:!0,configurable:!0}),p.prototype.getLine=function(d){if(d=this._buffer.lines.get(d))return new l(d)},p}(),l=function(){function p(d){this._line=d}return Object.defineProperty(p.prototype,"isWrapped",{get:function(){return this._line.isWrapped},enumerable:!0,configurable:!0}),p.prototype.getCell=function(d){if(!(0>d||d>=this._line.length))return new a(this._line,d)},p.prototype.translateToString=function(d,c,y){return this._line.translateToString(d,c,y)},p}(),a=function(){function p(d,c){this._line=d,this._x=c}return Object.defineProperty(p.prototype,"char",{get:function(){return this._line.getString(this._x)},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"width",{get:function(){return this._line.getWidth(this._x)},enumerable:!0,configurable:!0}),p}(),h=function(){function p(d){this._core=d}return p.prototype.addCsiHandler=function(d,c){return this._core.addCsiHandler(d,function(y){return c(y.toArray())})},p.prototype.addDcsHandler=function(d,c){return this._core.addDcsHandler(d,function(y,_){return c(y,_.toArray())})},p.prototype.addEscHandler=function(d,c){return this._core.addEscHandler(d,c)},p.prototype.addOscHandler=function(d,c){return this._core.addOscHandler(d,c)},p}()},function(t,i,r){var n,o=this&&this.__extends||(n=function(j,ie){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(H,Q){H.__proto__=Q}||function(H,Q){for(var D in Q)Q.hasOwnProperty(D)&&(H[D]=Q[D])})(j,ie)},function(j,ie){function H(){this.constructor=j}n(j,ie),j.prototype=ie===null?Object.create(ie):(H.prototype=ie.prototype,new H)});Object.defineProperty(i,"__esModule",{value:!0});var s=r(35),u=r(36),l=r(37),a=r(12),h=r(38),p=r(40),d=r(50),c=r(51),y=r(11),_=r(7),g=r(17),m=r(54),f=r(55),v=r(56),Z=r(57),b=r(59),G=r(1),S=r(16),C=r(60),R=r(26),Y=r(61),I=r(0),w=r(62),F=r(4),E=r(63),N=r(64);t=r(2);var L=r(70),K=r(71),J=r(72),P=r(73),ee=r(74),he=r(75),$=r(76),de=r(77),pe=typeof window<"u"?window.document:null;r=function(j){function ie(H){H===void 0&&(H={});var Q=j.call(this)||this;return Q.browser=y,Q.mouseEvents=0,Q._keyDownHandled=!1,Q._blankLine=null,Q._onCursorMove=new G.EventEmitter,Q._onData=new G.EventEmitter,Q._onBinary=new G.EventEmitter,Q._onKey=new G.EventEmitter,Q._onLineFeed=new G.EventEmitter,Q._onRender=new G.EventEmitter,Q._onResize=new G.EventEmitter,Q._onScroll=new G.EventEmitter,Q._onSelectionChange=new G.EventEmitter,Q._onTitleChange=new G.EventEmitter,Q._onFocus=new G.EventEmitter,Q._onBlur=new G.EventEmitter,Q.onA11yCharEmitter=new G.EventEmitter,Q.onA11yTabEmitter=new G.EventEmitter,Q._instantiationService=new ee.InstantiationService,Q.optionsService=new w.OptionsService(H),Q._instantiationService.setService(I.IOptionsService,Q.optionsService),Q._bufferService=Q._instantiationService.createInstance(N.BufferService),Q._instantiationService.setService(I.IBufferService,Q._bufferService),Q._logService=Q._instantiationService.createInstance(J.LogService),Q._instantiationService.setService(I.ILogService,Q._logService),Q._coreService=Q._instantiationService.createInstance(K.CoreService,function(){return Q.scrollToBottom()}),Q._instantiationService.setService(I.ICoreService,Q._coreService),Q._coreService.onData(function(D){return Q._onData.fire(D)}),Q._coreService.onBinary(function(D){return Q._onBinary.fire(D)}),Q._coreMouseService=Q._instantiationService.createInstance(he.CoreMouseService),Q._instantiationService.setService(I.ICoreMouseService,Q._coreMouseService),Q._dirtyRowService=Q._instantiationService.createInstance(P.DirtyRowService),Q._instantiationService.setService(I.IDirtyRowService,Q._dirtyRowService),Q._setupOptionsListeners(),Q._setup(),Q._writeBuffer=new $.WriteBuffer(function(D){return Q._inputHandler.parse(D)}),Q}return o(ie,j),Object.defineProperty(ie.prototype,"options",{get:function(){return this.optionsService.options},enumerable:!0,configurable:!0}),Object.defineProperty(ie.prototype,"cols",{get:function(){return this._bufferService.cols},enumerable:!0,configurable:!0}),Object.defineProperty(ie.prototype,"rows",{get:function(){return this._bufferService.rows},enumerable:!0,configurable:!0}),Object.defineProperty(ie.prototype,"onCursorMove",{get:function(){return this._onCursorMove.event},enumerable:!0,configurable:!0}),Object.defineProperty(ie.prototype,"onData",{get:function(){return this._onData.event},enumerable:!0,configurable:!0}),Object.defineProperty(ie.prototype,"onBinary",{get:function(){return this._onBinary.event},enumerable:!0,configurable:!0}),Object.defineProperty(ie.prototype,"onKey",{get:function(){return this._onKey.event},enumerable:!0,configurable:!0}),Object.defineProperty(ie.prototype,"onLineFeed",{get:function(){return this._onLineFeed.event},enumerable:!0,configurable:!0}),Object.defineProperty(ie.prototype,"onRender",{get:function(){return this._onRender.event},enumerable:!0,configurable:!0}),Object.defineProperty(ie.prototype,"onResize",{get:function(){return this._onResize.event},enumerable:!0,configurable:!0}),Object.defineProperty(ie.prototype,"onScroll",{get:function(){return this._onScroll.event},enumerable:!0,configurable:!0}),Object.defineProperty(ie.prototype,"onSelectionChange",{get:function(){return this._onSelectionChange.event},enumerable:!0,configurable:!0}),Object.defineProperty(ie.prototype,"onTitleChange",{get:function(){return this._onTitleChange.event},enumerable:!0,configurable:!0}),Object.defineProperty(ie.prototype,"onFocus",{get:function(){return this._onFocus.event},enumerable:!0,configurable:!0}),Object.defineProperty(ie.prototype,"onBlur",{get:function(){return this._onBlur.event},enumerable:!0,configurable:!0}),Object.defineProperty(ie.prototype,"onA11yChar",{get:function(){return this.onA11yCharEmitter.event},enumerable:!0,configurable:!0}),Object.defineProperty(ie.prototype,"onA11yTab",{get:function(){return this.onA11yTabEmitter.event},enumerable:!0,configurable:!0}),ie.prototype.dispose=function(){var H,Q,D,X;this._isDisposed||(j.prototype.dispose.call(this),(H=this._windowsMode)===null||H===void 0||H.dispose(),this._windowsMode=void 0,(Q=this._renderService)===null||Q===void 0||Q.dispose(),this._customKeyEventHandler=null,this.write=function(){},(X=(D=this.element)===null||D===void 0?void 0:D.parentNode)===null||X===void 0||X.removeChild(this.element))},ie.prototype._setup=function(){var H=this;this._parent=pe?pe.body:null,this._customKeyEventHandler=null,this.insertMode=this.originMode=this.applicationKeypad=!1,this.wraparoundMode=!0,this.bracketedPasteMode=!1,this.gcharset=this.charset=null,this.glevel=0,this.charsets=[null],this.curAttrData=S.DEFAULT_ATTR_DATA.clone(),this._eraseAttrData=S.DEFAULT_ATTR_DATA.clone(),this.params=[],this.currentParam=0,this._userScrolling=!1,this._inputHandler=new h.InputHandler(this,this._bufferService,this._coreService,this._dirtyRowService,this._logService,this.optionsService,this._coreMouseService),this._inputHandler.onCursorMove(function(){return H._onCursorMove.fire()}),this._inputHandler.onLineFeed(function(){return H._onLineFeed.fire()}),this.register(this._inputHandler),this.linkifier=this.linkifier||new d.Linkifier(this._bufferService,this._logService),this.options.windowsMode&&this._enableWindowsMode()},ie.prototype._enableWindowsMode=function(){this._windowsMode||(this._windowsMode=this.onLineFeed(C.handleWindowsModeLineFeed.bind(null,this._bufferService)))},Object.defineProperty(ie.prototype,"buffer",{get:function(){return this.buffers.active},enumerable:!0,configurable:!0}),Object.defineProperty(ie.prototype,"buffers",{get:function(){return this._bufferService.buffers},enumerable:!0,configurable:!0}),ie.prototype.eraseAttrData=function(){return this._eraseAttrData.bg&=-67108864,this._eraseAttrData.bg|=67108863&this.curAttrData.bg,this._eraseAttrData},ie.prototype.focus=function(){this.textarea&&this.textarea.focus({preventScroll:!0})},ie.prototype._setupOptionsListeners=function(){var H=this;this.optionsService.onOptionChange(function(Q){var D,X,ge,te,x;switch(Q){case"fontFamily":case"fontSize":(D=H._renderService)===null||D===void 0||D.clear(),(X=H._charSizeService)===null||X===void 0||X.measure();break;case"drawBoldTextInBrightColors":case"letterSpacing":case"lineHeight":case"fontWeight":case"fontWeightBold":case"minimumContrastRatio":H._renderService&&(H._renderService.clear(),H._renderService.onResize(H.cols,H.rows),H.refresh(0,H.rows-1));break;case"rendererType":H._renderService&&(H._renderService.setRenderer(H._createRenderer()),H._renderService.onResize(H.cols,H.rows));break;case"scrollback":H.buffers.resize(H.cols,H.rows),(ge=H.viewport)===null||ge===void 0||ge.syncScrollArea();break;case"screenReaderMode":H.optionsService.options.screenReaderMode?!H._accessibilityManager&&H._renderService&&(H._accessibilityManager=new v.AccessibilityManager(H,H._renderService)):((te=H._accessibilityManager)===null||te===void 0||te.dispose(),H._accessibilityManager=null);break;case"tabStopWidth":H.buffers.setupTabStops();break;case"theme":H._setTheme(H.optionsService.options.theme);break;case"windowsMode":H.optionsService.options.windowsMode?H._enableWindowsMode():((x=H._windowsMode)===null||x===void 0||x.dispose(),H._windowsMode=void 0)}})},ie.prototype._onTextAreaFocus=function(H){this.sendFocus&&this._coreService.triggerDataEvent(a.C0.ESC+"[I"),this.updateCursorStyle(H),this.element.classList.add("focus"),this.showCursor(),this._onFocus.fire()},ie.prototype.blur=function(){return this.textarea.blur()},ie.prototype._onTextAreaBlur=function(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.sendFocus&&this._coreService.triggerDataEvent(a.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()},ie.prototype._initGlobal=function(){function H(D){return l.handlePasteEvent(D,Q.textarea,Q.bracketedPasteMode,Q._coreService)}var Q=this;this._bindKeys(),this.register(_.addDisposableDomListener(this.element,"copy",function(D){Q.hasSelection()&&l.copyHandler(D,Q._selectionService)})),this.register(_.addDisposableDomListener(this.textarea,"paste",H)),this.register(_.addDisposableDomListener(this.element,"paste",H)),y.isFirefox?this.register(_.addDisposableDomListener(this.element,"mousedown",function(D){D.button===2&&l.rightClickHandler(D,Q.textarea,Q.screenElement,Q._selectionService,Q.options.rightClickSelectsWord)})):this.register(_.addDisposableDomListener(this.element,"contextmenu",function(D){l.rightClickHandler(D,Q.textarea,Q.screenElement,Q._selectionService,Q.options.rightClickSelectsWord)})),y.isLinux&&this.register(_.addDisposableDomListener(this.element,"auxclick",function(D){D.button===1&&l.moveTextAreaUnderMouseCursor(D,Q.textarea,Q.screenElement)}))},ie.prototype._bindKeys=function(){var H=this;this.register(_.addDisposableDomListener(this.textarea,"keyup",function(Q){return H._keyUp(Q)},!0)),this.register(_.addDisposableDomListener(this.textarea,"keydown",function(Q){return H._keyDown(Q)},!0)),this.register(_.addDisposableDomListener(this.textarea,"keypress",function(Q){return H._keyPress(Q)},!0)),this.register(_.addDisposableDomListener(this.textarea,"compositionstart",function(){return H._compositionHelper.compositionstart()})),this.register(_.addDisposableDomListener(this.textarea,"compositionupdate",function(Q){return H._compositionHelper.compositionupdate(Q)})),this.register(_.addDisposableDomListener(this.textarea,"compositionend",function(){return H._compositionHelper.compositionend()})),this.register(this.onRender(function(){return H._compositionHelper.updateCompositionElements()})),this.register(this.onRender(function(Q){return H._queueLinkification(Q.start,Q.end)}))},ie.prototype.open=function(H){var Q=this;if(this._parent=H||this._parent,!this._parent)throw Error("Terminal requires a parent element.");pe.body.contains(H)||this._logService.warn("Terminal.open was called on an element that was not attached to the DOM"),this._document=this._parent.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),this.element.setAttribute("tabindex","0"),this._parent.appendChild(this.element),H=pe.createDocumentFragment(),this._viewportElement=pe.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),H.appendChild(this._viewportElement),this._viewportScrollArea=pe.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=pe.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=pe.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),H.appendChild(this.screenElement),this.textarea=pe.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",g.promptLabel),this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this.register(_.addDisposableDomListener(this.textarea,"focus",function(X){return Q._onTextAreaFocus(X)})),this.register(_.addDisposableDomListener(this.textarea,"blur",function(){return Q._onTextAreaBlur()})),this._helperContainer.appendChild(this.textarea);var D=this._instantiationService.createInstance(de.CoreBrowserService,this.textarea);this._instantiationService.setService(F.ICoreBrowserService,D),this._charSizeService=this._instantiationService.createInstance(E.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(F.ICharSizeService,this._charSizeService),this._compositionView=pe.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(s.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(H),this._theme=this.options.theme||this._theme,this.options.theme=void 0,this._colorManager=new R.ColorManager(pe,this.options.allowTransparency),this.optionsService.onOptionChange(function(X){return Q._colorManager.onOptionsChange(X)}),this._colorManager.setTheme(this._theme),H=this._createRenderer(),this._renderService=this._instantiationService.createInstance(Y.RenderService,H,this.rows,this.screenElement),this._instantiationService.setService(F.IRenderService,this._renderService),this._renderService.onRender(function(X){return Q._onRender.fire(X)}),this.onResize(function(X){return Q._renderService.resize(X.cols,X.rows)}),this._soundService=this._instantiationService.createInstance(m.SoundService),this._instantiationService.setService(F.ISoundService,this._soundService),this._mouseService=this._instantiationService.createInstance(L.MouseService),this._instantiationService.setService(F.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(u.Viewport,function(X,ge){return Q.scrollLines(X,ge)},this._viewportElement,this._viewportScrollArea),this.viewport.onThemeChange(this._colorManager.colors),this.register(this.viewport),this.register(this.onCursorMove(function(){return Q._renderService.onCursorMove()})),this.register(this.onResize(function(){return Q._renderService.onResize(Q.cols,Q.rows)})),this.register(this.onBlur(function(){return Q._renderService.onBlur()})),this.register(this.onFocus(function(){return Q._renderService.onFocus()})),this.register(this._renderService.onDimensionsChange(function(){return Q.viewport.syncScrollArea()})),this._selectionService=this._instantiationService.createInstance(c.SelectionService,function(X,ge){return Q.scrollLines(X,ge)},this.element,this.screenElement),this._instantiationService.setService(F.ISelectionService,this._selectionService),this.register(this._selectionService.onSelectionChange(function(){return Q._onSelectionChange.fire()})),this.register(this._selectionService.onRedrawRequest(function(X){return Q._renderService.onSelectionChanged(X.start,X.end,X.columnSelectMode)})),this.register(this._selectionService.onLinuxMouseSelection(function(X){Q.textarea.value=X,Q.textarea.focus(),Q.textarea.select()})),this.register(this.onScroll(function(){Q.viewport.syncScrollArea(),Q._selectionService.refresh()})),this.register(_.addDisposableDomListener(this._viewportElement,"scroll",function(){return Q._selectionService.refresh()})),this._mouseZoneManager=this._instantiationService.createInstance(f.MouseZoneManager,this.element,this.screenElement),this.register(this._mouseZoneManager),this.register(this.onScroll(function(){return Q._mouseZoneManager.clearAll()})),this.linkifier.attachToDom(this.element,this._mouseZoneManager),this.register(_.addDisposableDomListener(this.element,"mousedown",function(X){return Q._selectionService.onMouseDown(X)})),this.mouseEvents?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager=new v.AccessibilityManager(this,this._renderService)),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()},ie.prototype._createRenderer=function(){switch(this.options.rendererType){case"canvas":return this._instantiationService.createInstance(p.Renderer,this._colorManager.colors,this.screenElement,this.linkifier);case"dom":return this._instantiationService.createInstance(Z.DomRenderer,this._colorManager.colors,this.element,this.screenElement,this._viewportElement,this.linkifier);default:throw Error('Unrecognized rendererType "'+this.options.rendererType+'"')}},ie.prototype._setTheme=function(H){var Q,D,X;this._theme=H,(Q=this._colorManager)===null||Q===void 0||Q.setTheme(H),(D=this._renderService)===null||D===void 0||D.setColors(this._colorManager.colors),(X=this.viewport)===null||X===void 0||X.onThemeChange(this._colorManager.colors)},ie.prototype.bindMouse=function(){function H(ve){ve.buttons||ge(ve)}function Q(ve){ve.buttons&&ge(ve)}function D(ve){return ge(ve),ve.preventDefault(),te.cancel(ve)}function X(ve){return ge(ve),ve.buttons||(te._document.removeEventListener("mouseup",le),be&&te._document.removeEventListener("mousemove",be)),te.cancel(ve)}function ge(ve){var xe,we;if(!(xe=x._mouseService.getRawByteCoords(ve,x.screenElement,x.cols,x.rows)))return!1;switch(ve.overrideType||ve.type){case"mousemove":var Ze=32;ve.buttons===void 0?(we=3,ve.button!==void 0&&(we=3>ve.button?ve.button:3)):we=1&ve.buttons?0:4&ve.buttons?1:2&ve.buttons?2:3;break;case"mouseup":Ze=0,we=3>ve.button?ve.button:3;break;case"mousedown":Ze=1,we=3>ve.button?ve.button:3;break;case"wheel":ve.deltaY!==0&&(Ze=0>ve.deltaY?0:1),we=4;break;default:return!1}return!(Ze===void 0||we===void 0||4<we)&&x._coreMouseService.triggerMouseEvent({col:xe.x-33,row:xe.y-33,button:we,action:Ze,ctrl:ve.ctrlKey,alt:ve.altKey,shift:ve.shiftKey})}var te=this,x=this,A=this.element,le=null,Ge=null,be=null,Ye=null;this._coreMouseService.onProtocolChange(function(ve){(te.mouseEvents=ve)?(te.optionsService.options.logLevel==="debug"&&te._logService.debug("Binding to mouse events:",te._coreMouseService.explainEvents(ve)),te.element.classList.add("enable-mouse-events"),te._selectionService.disable()):(te._logService.debug("Unbinding from mouse events."),te.element.classList.remove("enable-mouse-events"),te._selectionService.enable()),8&ve?Ye||(A.addEventListener("mousemove",H),Ye=H):(A.removeEventListener("mousemove",Ye),Ye=null),16&ve?Ge||(A.addEventListener("wheel",D),Ge=D):(A.removeEventListener("wheel",Ge),Ge=null),2&ve?le||(le=X):(te._document.removeEventListener("mouseup",le),le=null),4&ve?be||(be=Q):(te._document.removeEventListener("mousemove",be),be=null)}),this._coreMouseService.activeProtocol=this._coreMouseService.activeProtocol,this.register(_.addDisposableDomListener(A,"mousedown",function(ve){if(ve.preventDefault(),te.focus(),te.mouseEvents&&!te._selectionService.shouldForceSelection(ve))return ge(ve),le&&te._document.addEventListener("mouseup",le),be&&te._document.addEventListener("mousemove",be),te.cancel(ve)})),this.register(_.addDisposableDomListener(A,"wheel",function(ve){if(!Ge&&!te.buffer.hasScrollback){var xe=te.viewport.getLinesScrolled(ve);if(xe!==0){ve=a.C0.ESC+(te._coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(0>ve.deltaY?"A":"B");for(var we="",Ze=0;Ze<Math.abs(xe);Ze++)we+=ve;te._coreService.triggerDataEvent(we,!0)}}})),this.register(_.addDisposableDomListener(A,"wheel",function(ve){if(!Ge)return te.viewport.onWheel(ve)?void 0:te.cancel(ve)})),this.register(_.addDisposableDomListener(A,"touchstart",function(ve){if(!te.mouseEvents)return te.viewport.onTouchStart(ve),te.cancel(ve)})),this.register(_.addDisposableDomListener(A,"touchmove",function(ve){if(!te.mouseEvents)return te.viewport.onTouchMove(ve)?void 0:te.cancel(ve)}))},ie.prototype.refresh=function(H,Q){var D;(D=this._renderService)===null||D===void 0||D.refreshRows(H,Q)},ie.prototype._queueLinkification=function(H,Q){var D;(D=this.linkifier)===null||D===void 0||D.linkifyRows(H,Q)},ie.prototype.updateCursorStyle=function(H){this._selectionService&&this._selectionService.shouldColumnSelect(H)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")},ie.prototype.showCursor=function(){this._coreService.isCursorInitialized||(this._coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))},ie.prototype.scroll=function(H){H===void 0&&(H=!1);var Q=this._blankLine,D=this.eraseAttrData();Q&&Q.length===this.cols&&Q.getFg(0)===D.fg&&Q.getBg(0)===D.bg||(Q=this.buffer.getBlankLine(D,H),this._blankLine=Q),Q.isWrapped=H,D=this.buffer.ybase+this.buffer.scrollTop,H=this.buffer.ybase+this.buffer.scrollBottom,this.buffer.scrollTop===0?(D=this.buffer.lines.isFull,H===this.buffer.lines.length-1?D?this.buffer.lines.recycle().copyFrom(Q):this.buffer.lines.push(Q.clone()):this.buffer.lines.splice(H+1,0,Q.clone()),D?this._userScrolling&&(this.buffer.ydisp=Math.max(this.buffer.ydisp-1,0)):(this.buffer.ybase++,this._userScrolling||this.buffer.ydisp++)):(this.buffer.lines.shiftElements(D+1,H-D+1-1,-1),this.buffer.lines.set(H,Q.clone())),this._userScrolling||(this.buffer.ydisp=this.buffer.ybase),this._dirtyRowService.markRangeDirty(this.buffer.scrollTop,this.buffer.scrollBottom),this._onScroll.fire(this.buffer.ydisp)},ie.prototype.scrollLines=function(H,Q){if(0>H){if(this.buffer.ydisp===0)return;this._userScrolling=!0}else H+this.buffer.ydisp>=this.buffer.ybase&&(this._userScrolling=!1);var D=this.buffer.ydisp;this.buffer.ydisp=Math.max(Math.min(this.buffer.ydisp+H,this.buffer.ybase),0),D!==this.buffer.ydisp&&(Q||this._onScroll.fire(this.buffer.ydisp),this.refresh(0,this.rows-1))},ie.prototype.scrollPages=function(H){this.scrollLines(H*(this.rows-1))},ie.prototype.scrollToTop=function(){this.scrollLines(-this.buffer.ydisp)},ie.prototype.scrollToBottom=function(){this.scrollLines(this.buffer.ybase-this.buffer.ydisp)},ie.prototype.scrollToLine=function(H){H-=this.buffer.ydisp,H!==0&&this.scrollLines(H)},ie.prototype.paste=function(H){l.paste(H,this.textarea,this.bracketedPasteMode,this._coreService)},ie.prototype.attachCustomKeyEventHandler=function(H){this._customKeyEventHandler=H},ie.prototype.addEscHandler=function(H,Q){return this._inputHandler.addEscHandler(H,Q)},ie.prototype.addDcsHandler=function(H,Q){return this._inputHandler.addDcsHandler(H,Q)},ie.prototype.addCsiHandler=function(H,Q){return this._inputHandler.addCsiHandler(H,Q)},ie.prototype.addOscHandler=function(H,Q){return this._inputHandler.addOscHandler(H,Q)},ie.prototype.registerLinkMatcher=function(H,Q,D){return H=this.linkifier.registerLinkMatcher(H,Q,D),this.refresh(0,this.rows-1),H},ie.prototype.deregisterLinkMatcher=function(H){this.linkifier.deregisterLinkMatcher(H)&&this.refresh(0,this.rows-1)},ie.prototype.registerCharacterJoiner=function(H){return H=this._renderService.registerCharacterJoiner(H),this.refresh(0,this.rows-1),H},ie.prototype.deregisterCharacterJoiner=function(H){this._renderService.deregisterCharacterJoiner(H)&&this.refresh(0,this.rows-1)},Object.defineProperty(ie.prototype,"markers",{get:function(){return this.buffer.markers},enumerable:!0,configurable:!0}),ie.prototype.addMarker=function(H){if(this.buffer===this.buffers.normal)return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+H)},ie.prototype.hasSelection=function(){return!!this._selectionService&&this._selectionService.hasSelection},ie.prototype.select=function(H,Q,D){this._selectionService.setSelection(H,Q,D)},ie.prototype.getSelection=function(){return this._selectionService?this._selectionService.selectionText:""},ie.prototype.getSelectionPosition=function(){if(this._selectionService.hasSelection)return{startColumn:this._selectionService.selectionStart[0],startRow:this._selectionService.selectionStart[1],endColumn:this._selectionService.selectionEnd[0],endRow:this._selectionService.selectionEnd[1]}},ie.prototype.clearSelection=function(){var H;(H=this._selectionService)===null||H===void 0||H.clearSelection()},ie.prototype.selectAll=function(){var H;(H=this._selectionService)===null||H===void 0||H.selectAll()},ie.prototype.selectLines=function(H,Q){var D;(D=this._selectionService)===null||D===void 0||D.selectLines(H,Q)},ie.prototype._keyDown=function(H){if(this._keyDownHandled=!1,this._customKeyEventHandler&&this._customKeyEventHandler(H)===!1)return!1;if(!this._compositionHelper.keydown(H))return this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;var Q=b.evaluateKeyboardEvent(H,this._coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(H),Q.type===3||Q.type===2){var D=this.rows-1;return this.scrollLines(Q.type===2?-D:D),this.cancel(H,!0)}return Q.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,H)||(Q.cancel&&this.cancel(H,!0),!Q.key||(Q.key!==a.C0.ETX&&Q.key!==a.C0.CR||(this.textarea.value=""),this._onKey.fire({key:Q.key,domEvent:H}),this.showCursor(),this._coreService.triggerDataEvent(Q.key,!0),this.optionsService.options.screenReaderMode?void(this._keyDownHandled=!0):this.cancel(H,!0)))},ie.prototype._isThirdLevelShift=function(H,Q){return H=H.isMac&&!this.options.macOptionIsMeta&&Q.altKey&&!Q.ctrlKey&&!Q.metaKey||H.isWindows&&Q.altKey&&Q.ctrlKey&&!Q.metaKey,Q.type==="keypress"?H:H&&(!Q.keyCode||47<Q.keyCode)},ie.prototype.setgLevel=function(H){this.glevel=H,this.charset=this.charsets[H]},ie.prototype.setgCharset=function(H,Q){this.charsets[H]=Q,this.glevel===H&&(this.charset=Q)},ie.prototype._keyUp=function(H){this._customKeyEventHandler&&this._customKeyEventHandler(H)===!1||(H.keyCode===16||H.keyCode===17||H.keyCode===18||this.focus(),this.updateCursorStyle(H))},ie.prototype._keyPress=function(H){if(this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(H)===!1)return!1;if(this.cancel(H),H.charCode)var Q=H.charCode;else if(H.which===null||H.which===void 0)Q=H.keyCode;else{if(H.which===0||H.charCode===0)return!1;Q=H.which}return!(!Q||(H.altKey||H.ctrlKey||H.metaKey)&&!this._isThirdLevelShift(this.browser,H))&&(Q=String.fromCharCode(Q),this._onKey.fire({key:Q,domEvent:H}),this.showCursor(),this._coreService.triggerDataEvent(Q,!0),!0)},ie.prototype.bell=function(){var H=this;this._soundBell()&&this._soundService.playBellSound(),this._visualBell()&&(this.element.classList.add("visual-bell-active"),clearTimeout(this._visualBellTimer),this._visualBellTimer=window.setTimeout(function(){H.element.classList.remove("visual-bell-active")},200))},ie.prototype.resize=function(H,Q){var D;isNaN(H)||isNaN(Q)||(H!==this.cols||Q!==this.rows?(H<N.MINIMUM_COLS&&(H=N.MINIMUM_COLS),Q<N.MINIMUM_ROWS&&(Q=N.MINIMUM_ROWS),this.buffers.resize(H,Q),this._bufferService.resize(H,Q),this.buffers.setupTabStops(this.cols),(D=this._charSizeService)===null||D===void 0||D.measure(),this.viewport.syncScrollArea(!0),this.refresh(0,this.rows-1),this._onResize.fire({cols:H,rows:Q})):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure())},ie.prototype.clear=function(){if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(var H=1;H<this.rows;H++)this.buffer.lines.push(this.buffer.getBlankLine(S.DEFAULT_ATTR_DATA));this.refresh(0,this.rows-1),this._onScroll.fire(this.buffer.ydisp)}},ie.prototype.is=function(H){return(this.options.termName+"").indexOf(H)===0},ie.prototype.handleTitle=function(H){this._onTitleChange.fire(H)},ie.prototype.reset=function(){var H,Q;this.options.rows=this.rows,this.options.cols=this.cols;var D=this._customKeyEventHandler,X=this._inputHandler,ge=this._userScrolling;this._setup(),this._bufferService.reset(),this._coreService.reset(),this._coreMouseService.reset(),(H=this._selectionService)===null||H===void 0||H.reset(),this._customKeyEventHandler=D,this._inputHandler=X,this._userScrolling=ge,this.refresh(0,this.rows-1),(Q=this.viewport)===null||Q===void 0||Q.syncScrollArea()},ie.prototype.cancel=function(H,Q){if(this.options.cancelEvents||Q)return H.preventDefault(),H.stopPropagation(),!1},ie.prototype._visualBell=function(){return!1},ie.prototype._soundBell=function(){return this.options.bellStyle==="sound"},ie.prototype.write=function(H,Q){this._writeBuffer.write(H,Q)},ie.prototype.writeSync=function(H){this._writeBuffer.writeSync(H)},ie}(t.Disposable),i.Terminal=r},function(t,i,r){var n=this&&this.__decorate||function(l,a,h,p){var d,c=arguments.length,y=3>c?a:p===null?p=Object.getOwnPropertyDescriptor(a,h):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(l,a,h,p);else for(var _=l.length-1;0<=_;_--)(d=l[_])&&(y=(3>c?d(y):3<c?d(a,h,y):d(a,h))||y);return 3<c&&y&&Object.defineProperty(a,h,y),y},o=this&&this.__param||function(l,a){return function(h,p){a(h,p,l)}};Object.defineProperty(i,"__esModule",{value:!0});var s=r(4),u=r(0);t=function(){function l(a,h,p,d,c,y){this._textarea=a,this._compositionView=h,this._bufferService=p,this._optionsService=d,this._charSizeService=c,this._coreService=y,this._isSendingComposition=this._isComposing=!1,this._compositionPosition={start:0,end:0}}return l.prototype.compositionstart=function(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._compositionView.classList.add("active")},l.prototype.compositionupdate=function(a){var h=this;this._compositionView.textContent=a.data,this.updateCompositionElements(),setTimeout(function(){h._compositionPosition.end=h._textarea.value.length},0)},l.prototype.compositionend=function(){this._finalizeComposition(!0)},l.prototype.keydown=function(a){if(this._isComposing||this._isSendingComposition){if(a.keyCode===229||a.keyCode===16||a.keyCode===17||a.keyCode===18)return!1;this._finalizeComposition(!1)}return a.keyCode!==229||(this._handleAnyTextareaChanges(),!1)},l.prototype._finalizeComposition=function(a){var h=this;if(this._compositionView.classList.remove("active"),this._isComposing=!1,this._clearTextareaPosition(),a){var p=this._compositionPosition.start,d=this._compositionPosition.end;this._isSendingComposition=!0,setTimeout(function(){if(h._isSendingComposition){h._isSendingComposition=!1;var c=h._isComposing?h._textarea.value.substring(p,d):h._textarea.value.substring(p);h._coreService.triggerDataEvent(c,!0)}},0)}else this._isSendingComposition=!1,a=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end),this._coreService.triggerDataEvent(a,!0)},l.prototype._handleAnyTextareaChanges=function(){var a=this,h=this._textarea.value;setTimeout(function(){if(!a._isComposing){var p=a._textarea.value.replace(h,"");0<p.length&&a._coreService.triggerDataEvent(p,!0)}},0)},l.prototype.updateCompositionElements=function(a){var h=this;if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){var p=Math.ceil(this._charSizeService.height*this._optionsService.options.lineHeight),d=this._bufferService.buffer.y*p,c=this._bufferService.buffer.x*this._charSizeService.width;this._compositionView.style.left=c+"px",this._compositionView.style.top=d+"px",this._compositionView.style.height=p+"px",this._compositionView.style.lineHeight=p+"px",this._compositionView.style.fontFamily=this._optionsService.options.fontFamily,this._compositionView.style.fontSize=this._optionsService.options.fontSize+"px",p=this._compositionView.getBoundingClientRect(),this._textarea.style.left=c+"px",this._textarea.style.top=d+"px",this._textarea.style.width=p.width+"px",this._textarea.style.height=p.height+"px",this._textarea.style.lineHeight=p.height+"px"}a||setTimeout(function(){return h.updateCompositionElements(!0)},0)}},l.prototype._clearTextareaPosition=function(){this._textarea.style.left="",this._textarea.style.top=""},l=n([o(2,u.IBufferService),o(3,u.IOptionsService),o(4,s.ICharSizeService),o(5,u.ICoreService)],l)}(),i.CompositionHelper=t},function(t,i,r){var n,o=this&&this.__extends||(n=function(p,d){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,y){c.__proto__=y}||function(c,y){for(var _ in y)y.hasOwnProperty(_)&&(c[_]=y[_])})(p,d)},function(p,d){function c(){this.constructor=p}n(p,d),p.prototype=d===null?Object.create(d):(c.prototype=d.prototype,new c)}),s=this&&this.__decorate||function(p,d,c,y){var _,g=arguments.length,m=3>g?d:y===null?y=Object.getOwnPropertyDescriptor(d,c):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(p,d,c,y);else for(var f=p.length-1;0<=f;f--)(_=p[f])&&(m=(3>g?_(m):3<g?_(d,c,m):_(d,c))||m);return 3<g&&m&&Object.defineProperty(d,c,m),m},u=this&&this.__param||function(p,d){return function(c,y){d(c,y,p)}};Object.defineProperty(i,"__esModule",{value:!0}),t=r(2);var l=r(7),a=r(4),h=r(0);r=function(p){function d(c,y,_,g,m,f,v){var Z=p.call(this)||this;return Z._scrollLines=c,Z._viewportElement=y,Z._scrollArea=_,Z._bufferService=g,Z._optionsService=m,Z._charSizeService=f,Z._renderService=v,Z.scrollBarWidth=0,Z._currentRowHeight=0,Z._lastRecordedBufferLength=0,Z._lastRecordedViewportHeight=0,Z._lastRecordedBufferHeight=0,Z._lastTouchY=0,Z._lastScrollTop=0,Z._wheelPartialScroll=0,Z._refreshAnimationFrame=null,Z._ignoreNextScrollEvent=!1,Z.scrollBarWidth=Z._viewportElement.offsetWidth-Z._scrollArea.offsetWidth||15,Z.register(l.addDisposableDomListener(Z._viewportElement,"scroll",Z._onScroll.bind(Z))),setTimeout(function(){return Z.syncScrollArea()},0),Z}return o(d,p),d.prototype.onThemeChange=function(c){this._viewportElement.style.backgroundColor=c.background.css},d.prototype._refresh=function(c){var y=this;if(c)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=requestAnimationFrame(function(){return y._innerRefresh()}))},d.prototype._innerRefresh=function(){if(0<this._charSizeService.height){this._currentRowHeight=this._renderService.dimensions.scaledCellHeight/window.devicePixelRatio,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;var c=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.canvasHeight);this._lastRecordedBufferHeight!==c&&(this._lastRecordedBufferHeight=c,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}c=this._bufferService.buffer.ydisp*this._currentRowHeight,this._viewportElement.scrollTop!==c&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=c),this._refreshAnimationFrame=null},d.prototype.syncScrollArea=function(c){if(c===void 0&&(c=!1),this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(c);this._lastRecordedViewportHeight===this._renderService.dimensions.canvasHeight?this._lastScrollTop===this._bufferService.buffer.ydisp*this._currentRowHeight&&this._lastScrollTop===this._viewportElement.scrollTop&&this._renderService.dimensions.scaledCellHeight/window.devicePixelRatio===this._currentRowHeight||this._refresh(c):this._refresh(c)},d.prototype._onScroll=function(){this._lastScrollTop=this._viewportElement.scrollTop,this._viewportElement.offsetParent&&(this._ignoreNextScrollEvent?this._ignoreNextScrollEvent=!1:this._scrollLines(Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp,!0))},d.prototype._bubbleScroll=function(c,y){var _=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(0>y&&this._viewportElement.scrollTop!==0||0<y&&_<this._lastRecordedBufferHeight)||(c.cancelable&&c.preventDefault(),!1)},d.prototype.onWheel=function(c){var y=this._getPixelsScrolled(c);return y!==0&&(this._viewportElement.scrollTop+=y,this._bubbleScroll(c,y))},d.prototype._getPixelsScrolled=function(c){if(c.deltaY===0)return 0;var y=this._applyScrollModifier(c.deltaY,c);return c.deltaMode===WheelEvent.DOM_DELTA_LINE?y*=this._currentRowHeight:c.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(y*=this._currentRowHeight*this._bufferService.rows),y},d.prototype.getLinesScrolled=function(c){if(c.deltaY===0)return 0;var y=this._applyScrollModifier(c.deltaY,c);return c.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(y/=this._currentRowHeight+0,this._wheelPartialScroll+=y,y=Math.floor(Math.abs(this._wheelPartialScroll))*(0<this._wheelPartialScroll?1:-1),this._wheelPartialScroll%=1):c.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(y*=this._bufferService.rows),y},d.prototype._applyScrollModifier=function(c,y){var _=this._optionsService.options.fastScrollModifier;return _==="alt"&&y.altKey||_==="ctrl"&&y.ctrlKey||_==="shift"&&y.shiftKey?c*this._optionsService.options.fastScrollSensitivity*this._optionsService.options.scrollSensitivity:c*this._optionsService.options.scrollSensitivity},d.prototype.onTouchStart=function(c){this._lastTouchY=c.touches[0].pageY},d.prototype.onTouchMove=function(c){var y=this._lastTouchY-c.touches[0].pageY;return this._lastTouchY=c.touches[0].pageY,y!==0&&(this._viewportElement.scrollTop+=y,this._bubbleScroll(c,y))},d=s([u(3,h.IBufferService),u(4,h.IOptionsService),u(5,a.ICharSizeService),u(6,a.IRenderService)],d)}(t.Disposable),i.Viewport=r},function(t,i){function r(u){return u.replace(/\r?\n/g,"\r")}function n(u,l){return l?"\x1B[200~"+u+"\x1B[201~":u}function o(u,l,a,h){u=n(u=r(u),a),h.triggerDataEvent(u,!0),l.value=""}function s(u,l,a){var h=a.getBoundingClientRect();a=u.clientX-h.left-10,u=u.clientY-h.top-10,l.style.position="absolute",l.style.width="20px",l.style.height="20px",l.style.left=a+"px",l.style.top=u+"px",l.style.zIndex="1000",l.focus(),setTimeout(function(){l.style.position="",l.style.width="",l.style.height="",l.style.left="",l.style.top="",l.style.zIndex=""},200)}Object.defineProperty(i,"__esModule",{value:!0}),i.prepareTextForTerminal=r,i.bracketTextForPaste=n,i.copyHandler=function(u,l){u.clipboardData&&u.clipboardData.setData("text/plain",l.selectionText),u.preventDefault()},i.handlePasteEvent=function(u,l,a,h){u.stopPropagation(),u.clipboardData&&o(u.clipboardData.getData("text/plain"),l,a,h)},i.paste=o,i.moveTextAreaUnderMouseCursor=s,i.rightClickHandler=function(u,l,a,h,p){s(u,l,a),p&&!h.isClickInSelection(u)&&h.selectWordAtCursor(u),l.value=h.selectionText,l.select()}},function(t,i,r){var n,o=this&&this.__extends||(n=function(b,G){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,C){S.__proto__=C}||function(S,C){for(var R in C)C.hasOwnProperty(R)&&(S[R]=C[R])})(b,G)},function(b,G){function S(){this.constructor=b}n(b,G),b.prototype=G===null?Object.create(G):(S.prototype=G.prototype,new S)});Object.defineProperty(i,"__esModule",{value:!0});var s=r(12),u=r(18),l=r(19),a=r(39);t=r(2);var h=r(15),p=r(8),d=r(16),c=r(1),y=r(3),_=r(5),g=r(6),m=r(21),f=r(23),v={"(":0,")":1,"*":2,"+":3,"-":1,".":2},Z=function(){function b(G,S,C,R){this._bufferService=G,this._coreService=S,this._logService=C,this._optionsService=R,this._data=new Uint32Array(0)}return b.prototype.hook=function(){this._data=new Uint32Array(0)},b.prototype.put=function(G,S,C){this._data=h.concat(this._data,G.subarray(S,C))},b.prototype.unhook=function(G){if(G)switch(G=p.utf32ToString(this._data),this._data=new Uint32Array(0),G){case'"q':return this._coreService.triggerDataEvent(s.C0.ESC+'P1$r0"q'+s.C0.ESC+"\\");case'"p':return this._coreService.triggerDataEvent(s.C0.ESC+'P1$r61"p'+s.C0.ESC+"\\");case"r":return this._coreService.triggerDataEvent(s.C0.ESC+"P1$r"+(this._bufferService.buffer.scrollTop+1+";"+(this._bufferService.buffer.scrollBottom+1)+"r")+s.C0.ESC+"\\");case"m":return this._coreService.triggerDataEvent(s.C0.ESC+"P1$r0m"+s.C0.ESC+"\\");case" q":return G={block:2,underline:4,bar:6}[this._optionsService.options.cursorStyle],G-=this._optionsService.options.cursorBlink?1:0,this._coreService.triggerDataEvent(s.C0.ESC+"P1$r"+G+" q"+s.C0.ESC+"\\");default:this._logService.debug("Unknown DCS $q %s",G),this._coreService.triggerDataEvent(s.C0.ESC+"P0$r"+s.C0.ESC+"\\")}else this._data=new Uint32Array(0)},b}();r=function(b){function G(S,C,R,Y,I,w,F,E){function N(P){K._parser.setEscHandler({intermediates:"(",final:P},function(){return L.selectCharset("("+P)}),K._parser.setEscHandler({intermediates:")",final:P},function(){return L.selectCharset(")"+P)}),K._parser.setEscHandler({intermediates:"*",final:P},function(){return L.selectCharset("*"+P)}),K._parser.setEscHandler({intermediates:"+",final:P},function(){return L.selectCharset("+"+P)}),K._parser.setEscHandler({intermediates:"-",final:P},function(){return L.selectCharset("-"+P)}),K._parser.setEscHandler({intermediates:".",final:P},function(){return L.selectCharset("."+P)}),K._parser.setEscHandler({intermediates:"/",final:P},function(){return L.selectCharset("/"+P)})}E===void 0&&(E=new a.EscapeSequenceParser);var L=b.call(this)||this;L._terminal=S,L._bufferService=C,L._coreService=R,L._dirtyRowService=Y,L._logService=I,L._optionsService=w,L._coreMouseService=F,L._parser=E,L._parseBuffer=new Uint32Array(4096),L._stringDecoder=new p.StringToUtf32,L._utf8Decoder=new p.Utf8ToUtf32,L._workCell=new _.CellData,L._onCursorMove=new c.EventEmitter,L._onLineFeed=new c.EventEmitter,L._onScroll=new c.EventEmitter,L.register(L._parser),L._parser.setCsiHandlerFallback(function(P,ee){L._logService.debug("Unknown CSI code: ",{identifier:L._parser.identToString(P),params:ee.toArray()})}),L._parser.setEscHandlerFallback(function(P){L._logService.debug("Unknown ESC code: ",{identifier:L._parser.identToString(P)})}),L._parser.setExecuteHandlerFallback(function(P){L._logService.debug("Unknown EXECUTE code: ",{code:P})}),L._parser.setOscHandlerFallback(function(P,ee,he){L._logService.debug("Unknown OSC code: ",{identifier:P,action:ee,data:he})}),L._parser.setDcsHandlerFallback(function(P,ee,he){ee==="HOOK"&&(he=he.toArray()),L._logService.debug("Unknown DCS code: ",{identifier:L._parser.identToString(P),action:ee,payload:he})}),L._parser.setPrintHandler(function(P,ee,he){return L.print(P,ee,he)}),L._parser.setCsiHandler({final:"@"},function(P){return L.insertChars(P)}),L._parser.setCsiHandler({intermediates:" ",final:"@"},function(P){return L.scrollLeft(P)}),L._parser.setCsiHandler({final:"A"},function(P){return L.cursorUp(P)}),L._parser.setCsiHandler({intermediates:" ",final:"A"},function(P){return L.scrollRight(P)}),L._parser.setCsiHandler({final:"B"},function(P){return L.cursorDown(P)}),L._parser.setCsiHandler({final:"C"},function(P){return L.cursorForward(P)}),L._parser.setCsiHandler({final:"D"},function(P){return L.cursorBackward(P)}),L._parser.setCsiHandler({final:"E"},function(P){return L.cursorNextLine(P)}),L._parser.setCsiHandler({final:"F"},function(P){return L.cursorPrecedingLine(P)}),L._parser.setCsiHandler({final:"G"},function(P){return L.cursorCharAbsolute(P)}),L._parser.setCsiHandler({final:"H"},function(P){return L.cursorPosition(P)}),L._parser.setCsiHandler({final:"I"},function(P){return L.cursorForwardTab(P)}),L._parser.setCsiHandler({final:"J"},function(P){return L.eraseInDisplay(P)}),L._parser.setCsiHandler({prefix:"?",final:"J"},function(P){return L.eraseInDisplay(P)}),L._parser.setCsiHandler({final:"K"},function(P){return L.eraseInLine(P)}),L._parser.setCsiHandler({prefix:"?",final:"K"},function(P){return L.eraseInLine(P)}),L._parser.setCsiHandler({final:"L"},function(P){return L.insertLines(P)}),L._parser.setCsiHandler({final:"M"},function(P){return L.deleteLines(P)}),L._parser.setCsiHandler({final:"P"},function(P){return L.deleteChars(P)}),L._parser.setCsiHandler({final:"S"},function(P){return L.scrollUp(P)}),L._parser.setCsiHandler({final:"T"},function(P){return L.scrollDown(P)}),L._parser.setCsiHandler({final:"X"},function(P){return L.eraseChars(P)}),L._parser.setCsiHandler({final:"Z"},function(P){return L.cursorBackwardTab(P)}),L._parser.setCsiHandler({final:"`"},function(P){return L.charPosAbsolute(P)}),L._parser.setCsiHandler({final:"a"},function(P){return L.hPositionRelative(P)}),L._parser.setCsiHandler({final:"b"},function(P){return L.repeatPrecedingCharacter(P)}),L._parser.setCsiHandler({final:"c"},function(P){return L.sendDeviceAttributesPrimary(P)}),L._parser.setCsiHandler({prefix:">",final:"c"},function(P){return L.sendDeviceAttributesSecondary(P)}),L._parser.setCsiHandler({final:"d"},function(P){return L.linePosAbsolute(P)}),L._parser.setCsiHandler({final:"e"},function(P){return L.vPositionRelative(P)}),L._parser.setCsiHandler({final:"f"},function(P){return L.hVPosition(P)}),L._parser.setCsiHandler({final:"g"},function(P){return L.tabClear(P)}),L._parser.setCsiHandler({final:"h"},function(P){return L.setMode(P)}),L._parser.setCsiHandler({prefix:"?",final:"h"},function(P){return L.setModePrivate(P)}),L._parser.setCsiHandler({final:"l"},function(P){return L.resetMode(P)}),L._parser.setCsiHandler({prefix:"?",final:"l"},function(P){return L.resetModePrivate(P)}),L._parser.setCsiHandler({final:"m"},function(P){return L.charAttributes(P)}),L._parser.setCsiHandler({final:"n"},function(P){return L.deviceStatus(P)}),L._parser.setCsiHandler({prefix:"?",final:"n"},function(P){return L.deviceStatusPrivate(P)}),L._parser.setCsiHandler({intermediates:"!",final:"p"},function(P){return L.softReset(P)}),L._parser.setCsiHandler({intermediates:" ",final:"q"},function(P){return L.setCursorStyle(P)}),L._parser.setCsiHandler({final:"r"},function(P){return L.setScrollRegion(P)}),L._parser.setCsiHandler({final:"s"},function(P){return L.saveCursor(P)}),L._parser.setCsiHandler({final:"u"},function(P){return L.restoreCursor(P)}),L._parser.setCsiHandler({intermediates:"'",final:"}"},function(P){return L.insertColumns(P)}),L._parser.setCsiHandler({intermediates:"'",final:"~"},function(P){return L.deleteColumns(P)}),L._parser.setExecuteHandler(s.C0.BEL,function(){return L.bell()}),L._parser.setExecuteHandler(s.C0.LF,function(){return L.lineFeed()}),L._parser.setExecuteHandler(s.C0.VT,function(){return L.lineFeed()}),L._parser.setExecuteHandler(s.C0.FF,function(){return L.lineFeed()}),L._parser.setExecuteHandler(s.C0.CR,function(){return L.carriageReturn()}),L._parser.setExecuteHandler(s.C0.BS,function(){return L.backspace()}),L._parser.setExecuteHandler(s.C0.HT,function(){return L.tab()}),L._parser.setExecuteHandler(s.C0.SO,function(){return L.shiftOut()}),L._parser.setExecuteHandler(s.C0.SI,function(){return L.shiftIn()}),L._parser.setExecuteHandler(s.C1.IND,function(){return L.index()}),L._parser.setExecuteHandler(s.C1.NEL,function(){return L.nextLine()}),L._parser.setExecuteHandler(s.C1.HTS,function(){return L.tabSet()}),L._parser.setOscHandler(0,new m.OscHandler(function(P){return L.setTitle(P)})),L._parser.setOscHandler(2,new m.OscHandler(function(P){return L.setTitle(P)})),L._parser.setEscHandler({final:"7"},function(){return L.saveCursor()}),L._parser.setEscHandler({final:"8"},function(){return L.restoreCursor()}),L._parser.setEscHandler({final:"D"},function(){return L.index()}),L._parser.setEscHandler({final:"E"},function(){return L.nextLine()}),L._parser.setEscHandler({final:"H"},function(){return L.tabSet()}),L._parser.setEscHandler({final:"M"},function(){return L.reverseIndex()}),L._parser.setEscHandler({final:"="},function(){return L.keypadApplicationMode()}),L._parser.setEscHandler({final:">"},function(){return L.keypadNumericMode()}),L._parser.setEscHandler({final:"c"},function(){return L.reset()}),L._parser.setEscHandler({final:"n"},function(){return L.setgLevel(2)}),L._parser.setEscHandler({final:"o"},function(){return L.setgLevel(3)}),L._parser.setEscHandler({final:"|"},function(){return L.setgLevel(3)}),L._parser.setEscHandler({final:"}"},function(){return L.setgLevel(2)}),L._parser.setEscHandler({final:"~"},function(){return L.setgLevel(1)}),L._parser.setEscHandler({intermediates:"%",final:"@"},function(){return L.selectDefaultCharset()}),L._parser.setEscHandler({intermediates:"%",final:"G"},function(){return L.selectDefaultCharset()});var K=this,J;for(J in u.CHARSETS)N(J);return L._parser.setEscHandler({intermediates:"#",final:"8"},function(){return L.screenAlignmentPattern()}),L._parser.setErrorHandler(function(P){return L._logService.error("Parsing error: ",P),P}),L._parser.setDcsHandler({intermediates:"$",final:"q"},new Z(L._bufferService,L._coreService,L._logService,L._optionsService)),L}return o(G,b),Object.defineProperty(G.prototype,"onCursorMove",{get:function(){return this._onCursorMove.event},enumerable:!0,configurable:!0}),Object.defineProperty(G.prototype,"onLineFeed",{get:function(){return this._onLineFeed.event},enumerable:!0,configurable:!0}),Object.defineProperty(G.prototype,"onScroll",{get:function(){return this._onScroll.event},enumerable:!0,configurable:!0}),G.prototype.dispose=function(){b.prototype.dispose.call(this)},G.prototype.parse=function(S){var C=this._bufferService.buffer,R=C.x,Y=C.y;if(this._logService.debug("parsing data",S),this._parseBuffer.length<S.length&&131072>this._parseBuffer.length&&(this._parseBuffer=new Uint32Array(Math.min(S.length,131072))),this._dirtyRowService.clearRange(),131072<S.length)for(var I=0;I<S.length;I+=131072){var w=I+131072<S.length?I+131072:S.length;w=typeof S=="string"?this._stringDecoder.decode(S.substring(I,w),this._parseBuffer):this._utf8Decoder.decode(S.subarray(I,w),this._parseBuffer),this._parser.parse(this._parseBuffer,w)}else w=typeof S=="string"?this._stringDecoder.decode(S,this._parseBuffer):this._utf8Decoder.decode(S,this._parseBuffer),this._parser.parse(this._parseBuffer,w);(C=this._bufferService.buffer).x===R&&C.y===Y||this._onCursorMove.fire(),this._terminal.refresh(this._dirtyRowService.start,this._dirtyRowService.end)},G.prototype.print=function(S,C,R){var Y,I=this._bufferService.buffer,w=this._terminal.charset,F=this._optionsService.options.screenReaderMode,E=this._bufferService.cols,N=this._terminal.wraparoundMode,L=this._terminal.insertMode,K=this._terminal.curAttrData,J=I.lines.get(I.y+I.ybase);this._dirtyRowService.markDirty(I.y);for(var P=C;P<R;++P){if(Y=S[P],C=l.wcwidth(Y),127>Y&&w){var ee=w[String.fromCharCode(Y)];ee&&(Y=ee.charCodeAt(0))}if(F&&this._terminal.onA11yCharEmitter.fire(p.stringFromCodePoint(Y)),C||!I.x){if(I.x+C-1>=E){if(N)I.x=0,I.y++,I.y===I.scrollBottom+1?(I.y--,this._terminal.scroll(!0)):(I.y>=this._bufferService.rows&&(I.y=this._bufferService.rows-1),I.lines.get(I.y).isWrapped=!0),J=I.lines.get(I.y+I.ybase);else if(I.x=E-1,C===2)continue}if(L&&(J.insertCells(I.x,C,I.getNullCell(K)),J.getWidth(E-1)===2&&J.setCellFromCodePoint(E-1,y.NULL_CELL_CODE,y.NULL_CELL_WIDTH,K.fg,K.bg)),J.setCellFromCodePoint(I.x++,Y,C,K.fg,K.bg),0<C)for(;--C;)J.setCellFromCodePoint(I.x++,0,0,K.fg,K.bg)}else J.getWidth(I.x-1)?J.addCodepointToCell(I.x-1,Y):J.addCodepointToCell(I.x-2,Y)}R&&(J.loadCell(I.x-1,this._workCell),this._workCell.getWidth()===2||65535<this._workCell.getCode()?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._dirtyRowService.markDirty(I.y)},G.prototype.addCsiHandler=function(S,C){return this._parser.addCsiHandler(S,C)},G.prototype.addDcsHandler=function(S,C){return this._parser.addDcsHandler(S,new f.DcsHandler(C))},G.prototype.addEscHandler=function(S,C){return this._parser.addEscHandler(S,C)},G.prototype.addOscHandler=function(S,C){return this._parser.addOscHandler(S,new m.OscHandler(C))},G.prototype.bell=function(){this._terminal.bell()},G.prototype.lineFeed=function(){var S=this._bufferService.buffer;this._dirtyRowService.markDirty(S.y),this._optionsService.options.convertEol&&(S.x=0),S.y++,S.y===S.scrollBottom+1?(S.y--,this._terminal.scroll()):S.y>=this._bufferService.rows&&(S.y=this._bufferService.rows-1),S.x>=this._bufferService.cols&&S.x--,this._dirtyRowService.markDirty(S.y),this._onLineFeed.fire()},G.prototype.carriageReturn=function(){this._bufferService.buffer.x=0},G.prototype.backspace=function(){this._restrictCursor(),0<this._bufferService.buffer.x&&this._bufferService.buffer.x--},G.prototype.tab=function(){if(!(this._bufferService.buffer.x>=this._bufferService.cols)){var S=this._bufferService.buffer.x;this._bufferService.buffer.x=this._bufferService.buffer.nextStop(),this._optionsService.options.screenReaderMode&&this._terminal.onA11yTabEmitter.fire(this._bufferService.buffer.x-S)}},G.prototype.shiftOut=function(){this._terminal.setgLevel(1)},G.prototype.shiftIn=function(){this._terminal.setgLevel(0)},G.prototype._restrictCursor=function(){this._bufferService.buffer.x=Math.min(this._bufferService.cols-1,Math.max(0,this._bufferService.buffer.x)),this._bufferService.buffer.y=this._terminal.originMode?Math.min(this._bufferService.buffer.scrollBottom,Math.max(this._bufferService.buffer.scrollTop,this._bufferService.buffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._bufferService.buffer.y)),this._dirtyRowService.markDirty(this._bufferService.buffer.y)},G.prototype._setCursor=function(S,C){this._dirtyRowService.markDirty(this._bufferService.buffer.y),this._terminal.originMode?(this._bufferService.buffer.x=S,this._bufferService.buffer.y=this._bufferService.buffer.scrollTop+C):(this._bufferService.buffer.x=S,this._bufferService.buffer.y=C),this._restrictCursor(),this._dirtyRowService.markDirty(this._bufferService.buffer.y)},G.prototype._moveCursor=function(S,C){this._restrictCursor(),this._setCursor(this._bufferService.buffer.x+S,this._bufferService.buffer.y+C)},G.prototype.cursorUp=function(S){var C=this._bufferService.buffer.y-this._bufferService.buffer.scrollTop;0<=C?this._moveCursor(0,-Math.min(C,S.params[0]||1)):this._moveCursor(0,-(S.params[0]||1))},G.prototype.cursorDown=function(S){var C=this._bufferService.buffer.scrollBottom-this._bufferService.buffer.y;0<=C?this._moveCursor(0,Math.min(C,S.params[0]||1)):this._moveCursor(0,S.params[0]||1)},G.prototype.cursorForward=function(S){this._moveCursor(S.params[0]||1,0)},G.prototype.cursorBackward=function(S){this._moveCursor(-(S.params[0]||1),0)},G.prototype.cursorNextLine=function(S){this.cursorDown(S),this._bufferService.buffer.x=0},G.prototype.cursorPrecedingLine=function(S){this.cursorUp(S),this._bufferService.buffer.x=0},G.prototype.cursorCharAbsolute=function(S){this._setCursor((S.params[0]||1)-1,this._bufferService.buffer.y)},G.prototype.cursorPosition=function(S){this._setCursor(2<=S.length?(S.params[1]||1)-1:0,(S.params[0]||1)-1)},G.prototype.charPosAbsolute=function(S){this._setCursor((S.params[0]||1)-1,this._bufferService.buffer.y)},G.prototype.hPositionRelative=function(S){this._moveCursor(S.params[0]||1,0)},G.prototype.linePosAbsolute=function(S){this._setCursor(this._bufferService.buffer.x,(S.params[0]||1)-1)},G.prototype.vPositionRelative=function(S){this._moveCursor(0,S.params[0]||1)},G.prototype.hVPosition=function(S){this.cursorPosition(S)},G.prototype.tabClear=function(S){S=S.params[0],S===0?delete this._bufferService.buffer.tabs[this._bufferService.buffer.x]:S===3&&(this._bufferService.buffer.tabs={})},G.prototype.cursorForwardTab=function(S){if(!(this._bufferService.buffer.x>=this._bufferService.cols))for(S=S.params[0]||1;S--;)this._bufferService.buffer.x=this._bufferService.buffer.nextStop()},G.prototype.cursorBackwardTab=function(S){if(!(this._bufferService.buffer.x>=this._bufferService.cols)){S=S.params[0]||1;for(var C=this._bufferService.buffer;S--;)C.x=C.prevStop()}},G.prototype._eraseInBufferLine=function(S,C,R,Y){Y===void 0&&(Y=!1),S=this._bufferService.buffer.lines.get(this._bufferService.buffer.ybase+S),S.replaceCells(C,R,this._bufferService.buffer.getNullCell(this._terminal.eraseAttrData())),Y&&(S.isWrapped=!1)},G.prototype._resetBufferLine=function(S){S=this._bufferService.buffer.lines.get(this._bufferService.buffer.ybase+S),S.fill(this._bufferService.buffer.getNullCell(this._terminal.eraseAttrData())),S.isWrapped=!1},G.prototype.eraseInDisplay=function(S){switch(this._restrictCursor(),S.params[0]){case 0:for(S=this._bufferService.buffer.y,this._dirtyRowService.markDirty(S),this._eraseInBufferLine(S++,this._bufferService.buffer.x,this._bufferService.cols,this._bufferService.buffer.x===0);S<this._bufferService.rows;S++)this._resetBufferLine(S);this._dirtyRowService.markDirty(S);break;case 1:for(S=this._bufferService.buffer.y,this._dirtyRowService.markDirty(S),this._eraseInBufferLine(S,0,this._bufferService.buffer.x+1,!0),this._bufferService.buffer.x+1>=this._bufferService.cols&&(this._bufferService.buffer.lines.get(S+1).isWrapped=!1);S--;)this._resetBufferLine(S);this._dirtyRowService.markDirty(0);break;case 2:for(S=this._bufferService.rows,this._dirtyRowService.markDirty(S-1);S--;)this._resetBufferLine(S);this._dirtyRowService.markDirty(0);break;case 3:S=this._bufferService.buffer.lines.length-this._bufferService.rows,0<S&&(this._bufferService.buffer.lines.trimStart(S),this._bufferService.buffer.ybase=Math.max(this._bufferService.buffer.ybase-S,0),this._bufferService.buffer.ydisp=Math.max(this._bufferService.buffer.ydisp-S,0),this._onScroll.fire(0))}},G.prototype.eraseInLine=function(S){switch(this._restrictCursor(),S.params[0]){case 0:this._eraseInBufferLine(this._bufferService.buffer.y,this._bufferService.buffer.x,this._bufferService.cols);break;case 1:this._eraseInBufferLine(this._bufferService.buffer.y,0,this._bufferService.buffer.x+1);break;case 2:this._eraseInBufferLine(this._bufferService.buffer.y,0,this._bufferService.cols)}this._dirtyRowService.markDirty(this._bufferService.buffer.y)},G.prototype.insertLines=function(S){this._restrictCursor(),S=S.params[0]||1;var C=this._bufferService.buffer;if(!(C.y>C.scrollBottom||C.y<C.scrollTop)){for(var R=C.y+C.ybase,Y=this._bufferService.rows-1+C.ybase-(this._bufferService.rows-1-C.scrollBottom)+1;S--;)C.lines.splice(Y-1,1),C.lines.splice(R,0,C.getBlankLine(this._terminal.eraseAttrData()));this._dirtyRowService.markRangeDirty(C.y,C.scrollBottom),C.x=0}},G.prototype.deleteLines=function(S){this._restrictCursor(),S=S.params[0]||1;var C=this._bufferService.buffer;if(!(C.y>C.scrollBottom||C.y<C.scrollTop)){var R=C.y+C.ybase,Y=this._bufferService.rows-1-C.scrollBottom;for(Y=this._bufferService.rows-1+C.ybase-Y;S--;)C.lines.splice(R,1),C.lines.splice(Y,0,C.getBlankLine(this._terminal.eraseAttrData()));this._dirtyRowService.markRangeDirty(C.y,C.scrollBottom),C.x=0}},G.prototype.insertChars=function(S){this._restrictCursor();var C=this._bufferService.buffer.lines.get(this._bufferService.buffer.y+this._bufferService.buffer.ybase);C&&(C.insertCells(this._bufferService.buffer.x,S.params[0]||1,this._bufferService.buffer.getNullCell(this._terminal.eraseAttrData())),this._dirtyRowService.markDirty(this._bufferService.buffer.y))},G.prototype.deleteChars=function(S){this._restrictCursor();var C=this._bufferService.buffer.lines.get(this._bufferService.buffer.y+this._bufferService.buffer.ybase);C&&(C.deleteCells(this._bufferService.buffer.x,S.params[0]||1,this._bufferService.buffer.getNullCell(this._terminal.eraseAttrData())),this._dirtyRowService.markDirty(this._bufferService.buffer.y))},G.prototype.scrollUp=function(S){S=S.params[0]||1;for(var C=this._bufferService.buffer;S--;)C.lines.splice(C.ybase+C.scrollTop,1),C.lines.splice(C.ybase+C.scrollBottom,0,C.getBlankLine(this._terminal.eraseAttrData()));this._dirtyRowService.markRangeDirty(C.scrollTop,C.scrollBottom)},G.prototype.scrollDown=function(S){S=S.params[0]||1;for(var C=this._bufferService.buffer;S--;)C.lines.splice(C.ybase+C.scrollBottom,1),C.lines.splice(C.ybase+C.scrollTop,0,C.getBlankLine(d.DEFAULT_ATTR_DATA));this._dirtyRowService.markRangeDirty(C.scrollTop,C.scrollBottom)},G.prototype.scrollLeft=function(S){var C=this._bufferService.buffer;if(!(C.y>C.scrollBottom||C.y<C.scrollTop)){S=S.params[0]||1;for(var R=C.scrollTop;R<=C.scrollBottom;++R){var Y=C.lines.get(C.ybase+R);Y.deleteCells(0,S,C.getNullCell(this._terminal.eraseAttrData())),Y.isWrapped=!1}this._dirtyRowService.markRangeDirty(C.scrollTop,C.scrollBottom)}},G.prototype.scrollRight=function(S){var C=this._bufferService.buffer;if(!(C.y>C.scrollBottom||C.y<C.scrollTop)){S=S.params[0]||1;for(var R=C.scrollTop;R<=C.scrollBottom;++R){var Y=C.lines.get(C.ybase+R);Y.insertCells(0,S,C.getNullCell(this._terminal.eraseAttrData())),Y.isWrapped=!1}this._dirtyRowService.markRangeDirty(C.scrollTop,C.scrollBottom)}},G.prototype.insertColumns=function(S){var C=this._bufferService.buffer;if(!(C.y>C.scrollBottom||C.y<C.scrollTop)){S=S.params[0]||1;for(var R=C.scrollTop;R<=C.scrollBottom;++R){var Y=this._bufferService.buffer.lines.get(C.ybase+R);Y.insertCells(C.x,S,C.getNullCell(this._terminal.eraseAttrData())),Y.isWrapped=!1}this._dirtyRowService.markRangeDirty(C.scrollTop,C.scrollBottom)}},G.prototype.deleteColumns=function(S){var C=this._bufferService.buffer;if(!(C.y>C.scrollBottom||C.y<C.scrollTop)){S=S.params[0]||1;for(var R=C.scrollTop;R<=C.scrollBottom;++R){var Y=C.lines.get(C.ybase+R);Y.deleteCells(C.x,S,C.getNullCell(this._terminal.eraseAttrData())),Y.isWrapped=!1}this._dirtyRowService.markRangeDirty(C.scrollTop,C.scrollBottom)}},G.prototype.eraseChars=function(S){this._restrictCursor();var C=this._bufferService.buffer.lines.get(this._bufferService.buffer.y+this._bufferService.buffer.ybase);C&&(C.replaceCells(this._bufferService.buffer.x,this._bufferService.buffer.x+(S.params[0]||1),this._bufferService.buffer.getNullCell(this._terminal.eraseAttrData())),this._dirtyRowService.markDirty(this._bufferService.buffer.y))},G.prototype.repeatPrecedingCharacter=function(S){if(this._parser.precedingCodepoint){S=S.params[0]||1;for(var C=new Uint32Array(S),R=0;R<S;++R)C[R]=this._parser.precedingCodepoint;this.print(C,0,C.length)}},G.prototype.sendDeviceAttributesPrimary=function(S){0<S.params[0]||(this._terminal.is("xterm")||this._terminal.is("rxvt-unicode")||this._terminal.is("screen")?this._coreService.triggerDataEvent(s.C0.ESC+"[?1;2c"):this._terminal.is("linux")&&this._coreService.triggerDataEvent(s.C0.ESC+"[?6c"))},G.prototype.sendDeviceAttributesSecondary=function(S){0<S.params[0]||(this._terminal.is("xterm")?this._coreService.triggerDataEvent(s.C0.ESC+"[>0;276;0c"):this._terminal.is("rxvt-unicode")?this._coreService.triggerDataEvent(s.C0.ESC+"[>85;95;0c"):this._terminal.is("linux")?this._coreService.triggerDataEvent(S.params[0]+"c"):this._terminal.is("screen")&&this._coreService.triggerDataEvent(s.C0.ESC+"[>83;40003;0c"))},G.prototype.setMode=function(S){for(var C=0;C<S.length;C++)switch(S.params[C]){case 4:this._terminal.insertMode=!0}},G.prototype.setModePrivate=function(S){for(var C=0;C<S.length;C++)switch(S.params[C]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._terminal.setgCharset(0,u.DEFAULT_CHARSET),this._terminal.setgCharset(1,u.DEFAULT_CHARSET),this._terminal.setgCharset(2,u.DEFAULT_CHARSET),this._terminal.setgCharset(3,u.DEFAULT_CHARSET);break;case 3:this._terminal.savedCols=this._bufferService.cols,this._terminal.resize(132,this._bufferService.rows),this._terminal.reset();break;case 6:this._terminal.originMode=!0,this._setCursor(0,0);break;case 7:this._terminal.wraparoundMode=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._terminal.applicationKeypad=!0,this._terminal.viewport&&this._terminal.viewport.syncScrollArea();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._terminal.sendFocus=!0;break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._terminal.eraseAttrData()),this._terminal.refresh(0,this._bufferService.rows-1),this._terminal.viewport&&this._terminal.viewport.syncScrollArea(),this._terminal.showCursor();break;case 2004:this._terminal.bracketedPasteMode=!0}},G.prototype.resetMode=function(S){for(var C=0;C<S.length;C++)switch(S.params[C]){case 4:this._terminal.insertMode=!1}},G.prototype.resetModePrivate=function(S){for(var C=0;C<S.length;C++)switch(S.params[C]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._bufferService.cols===132&&this._terminal.savedCols&&this._terminal.resize(this._terminal.savedCols,this._bufferService.rows),delete this._terminal.savedCols,this._terminal.reset();break;case 6:this._terminal.originMode=!1,this._setCursor(0,0);break;case 7:this._terminal.wraparoundMode=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._terminal.applicationKeypad=!1,this._terminal.viewport&&this._terminal.viewport.syncScrollArea();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._terminal.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),S.params[C]===1049&&this.restoreCursor(),this._terminal.refresh(0,this._bufferService.rows-1),this._terminal.viewport&&this._terminal.viewport.syncScrollArea(),this._terminal.showCursor();break;case 2004:this._terminal.bracketedPasteMode=!1}},G.prototype._extractColor=function(S,C,R){var Y=[0,0,-1,0,0,0],I=0,w=0;do{if(Y[w+I]=S.params[C+w],S.hasSubParams(C+w)){S=S.getSubParams(C+w),C=0;do Y[1]===5&&(I=1),Y[w+C+1+I]=S[C];while(++C<S.length&&C+w+1+I<Y.length);break}if(Y[1]===5&&2<=w+I||Y[1]===2&&5<=w+I)break;Y[1]&&(I=1)}while(++w+C<S.length&&w+I<Y.length);for(C=2;C<Y.length;++C)Y[C]===-1&&(Y[C]=0);return Y[0]===38?Y[1]===2?(R.fg|=50331648,R.fg&=-16777216,R.fg|=g.AttributeData.fromColorRGB([Y[3],Y[4],Y[5]])):Y[1]===5&&(R.fg&=-50331904,R.fg=R.fg|33554432|255&Y[3]):Y[0]===48&&(Y[1]===2?(R.bg|=50331648,R.bg&=-16777216,R.bg|=g.AttributeData.fromColorRGB([Y[3],Y[4],Y[5]])):Y[1]===5&&(R.bg&=-50331904,R.bg=R.bg|33554432|255&Y[3])),w},G.prototype.charAttributes=function(S){if(S.length===1&&S.params[0]===0)return this._terminal.curAttrData.fg=d.DEFAULT_ATTR_DATA.fg,void(this._terminal.curAttrData.bg=d.DEFAULT_ATTR_DATA.bg);for(var C,R=S.length,Y=this._terminal.curAttrData,I=0;I<R;I++)30<=(C=S.params[I])&&37>=C?(Y.fg&=-50331904,Y.fg=Y.fg|16777216|C-30):40<=C&&47>=C?(Y.bg&=-50331904,Y.bg=Y.bg|16777216|C-40):90<=C&&97>=C?(Y.fg&=-50331904,Y.fg=Y.fg|16777224|C-90):100<=C&&107>=C?(Y.bg&=-50331904,Y.bg=Y.bg|16777224|C-100):C===0?(Y.fg=d.DEFAULT_ATTR_DATA.fg,Y.bg=d.DEFAULT_ATTR_DATA.bg):C===1?Y.fg|=134217728:C===3?Y.bg|=67108864:C===4?Y.fg|=268435456:C===5?Y.fg|=536870912:C===7?Y.fg|=67108864:C===8?Y.fg|=1073741824:C===2?Y.bg|=134217728:C===22?(Y.fg&=-134217729,Y.bg&=-134217729):C===23?Y.bg&=-67108865:C===24?Y.fg&=-268435457:C===25?Y.fg&=-536870913:C===27?Y.fg&=-67108865:C===28?Y.fg&=-1073741825:C===39?(Y.fg&=-67108864,Y.fg|=16777215&d.DEFAULT_ATTR_DATA.fg):C===49?(Y.bg&=-67108864,Y.bg|=16777215&d.DEFAULT_ATTR_DATA.bg):C===38||C===48?I+=this._extractColor(S,I,Y):C===100?(Y.fg&=-67108864,Y.fg|=16777215&d.DEFAULT_ATTR_DATA.fg,Y.bg&=-67108864,Y.bg|=16777215&d.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",C)},G.prototype.deviceStatus=function(S){switch(S.params[0]){case 5:this._coreService.triggerDataEvent(s.C0.ESC+"[0n");break;case 6:this._coreService.triggerDataEvent(s.C0.ESC+"["+(this._bufferService.buffer.y+1)+";"+(this._bufferService.buffer.x+1)+"R")}},G.prototype.deviceStatusPrivate=function(S){switch(S.params[0]){case 6:this._coreService.triggerDataEvent(s.C0.ESC+"[?"+(this._bufferService.buffer.y+1)+";"+(this._bufferService.buffer.x+1)+"R")}},G.prototype.softReset=function(){this._coreService.isCursorHidden=!1,this._terminal.insertMode=!1,this._terminal.originMode=!1,this._terminal.wraparoundMode=!0,this._terminal.applicationKeypad=!1,this._terminal.viewport&&this._terminal.viewport.syncScrollArea(),this._coreService.decPrivateModes.applicationCursorKeys=!1,this._bufferService.buffer.scrollTop=0,this._bufferService.buffer.scrollBottom=this._bufferService.rows-1,this._terminal.curAttrData=d.DEFAULT_ATTR_DATA.clone(),this._bufferService.buffer.x=this._bufferService.buffer.y=0,this._terminal.charset=null,this._terminal.glevel=0,this._terminal.charsets=[null]},G.prototype.setCursorStyle=function(S){switch(S=S.params[0]||1,S){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}this._optionsService.options.cursorBlink=S%2==1},G.prototype.setScrollRegion=function(S){var C,R=S.params[0]||1;(2>S.length||(C=S.params[1])>this._bufferService.rows||C===0)&&(C=this._bufferService.rows),C>R&&(this._bufferService.buffer.scrollTop=R-1,this._bufferService.buffer.scrollBottom=C-1,this._setCursor(0,0))},G.prototype.saveCursor=function(){this._bufferService.buffer.savedX=this._bufferService.buffer.x,this._bufferService.buffer.savedY=this._bufferService.buffer.ybase+this._bufferService.buffer.y,this._bufferService.buffer.savedCurAttrData.fg=this._terminal.curAttrData.fg,this._bufferService.buffer.savedCurAttrData.bg=this._terminal.curAttrData.bg,this._bufferService.buffer.savedCharset=this._terminal.charset},G.prototype.restoreCursor=function(){this._bufferService.buffer.x=this._bufferService.buffer.savedX||0,this._bufferService.buffer.y=Math.max(this._bufferService.buffer.savedY-this._bufferService.buffer.ybase,0),this._terminal.curAttrData.fg=this._bufferService.buffer.savedCurAttrData.fg,this._terminal.curAttrData.bg=this._bufferService.buffer.savedCurAttrData.bg,this._terminal.charset=this._savedCharset,this._bufferService.buffer.savedCharset&&(this._terminal.charset=this._bufferService.buffer.savedCharset),this._restrictCursor()},G.prototype.setTitle=function(S){this._terminal.handleTitle(S)},G.prototype.nextLine=function(){this._bufferService.buffer.x=0,this.index()},G.prototype.keypadApplicationMode=function(){this._logService.debug("Serial port requested application keypad."),this._terminal.applicationKeypad=!0,this._terminal.viewport&&this._terminal.viewport.syncScrollArea()},G.prototype.keypadNumericMode=function(){this._logService.debug("Switching back to normal keypad."),this._terminal.applicationKeypad=!1,this._terminal.viewport&&this._terminal.viewport.syncScrollArea()},G.prototype.selectDefaultCharset=function(){this._terminal.setgLevel(0),this._terminal.setgCharset(0,u.DEFAULT_CHARSET)},G.prototype.selectCharset=function(S){S.length===2?S[0]!=="/"&&this._terminal.setgCharset(v[S[0]],u.CHARSETS[S[1]]||u.DEFAULT_CHARSET):this.selectDefaultCharset()},G.prototype.index=function(){this._restrictCursor();var S=this._bufferService.buffer;this._bufferService.buffer.y++,S.y===S.scrollBottom+1?(S.y--,this._terminal.scroll()):S.y>=this._bufferService.rows&&(S.y=this._bufferService.rows-1),this._restrictCursor()},G.prototype.tabSet=function(){this._bufferService.buffer.tabs[this._bufferService.buffer.x]=!0},G.prototype.reverseIndex=function(){this._restrictCursor();var S=this._bufferService.buffer;S.y===S.scrollTop?(S.lines.shiftElements(S.y+S.ybase,S.scrollBottom-S.scrollTop,1),S.lines.set(S.y+S.ybase,S.getBlankLine(this._terminal.eraseAttrData())),this._dirtyRowService.markRangeDirty(S.scrollTop,S.scrollBottom)):(S.y--,this._restrictCursor())},G.prototype.reset=function(){this._parser.reset(),this._terminal.reset()},G.prototype.setgLevel=function(S){this._terminal.setgLevel(S)},G.prototype.screenAlignmentPattern=function(){var S=new _.CellData;S.content=4194373,S.fg=this._terminal.curAttrData.fg,S.bg=this._terminal.curAttrData.bg;var C=this._bufferService.buffer;this._setCursor(0,0);for(var R=0;R<this._bufferService.rows;++R){var Y=C.y+C.ybase+R;C.lines.get(Y).fill(S),C.lines.get(Y).isWrapped=!1}this._dirtyRowService.markAllDirty(),this._setCursor(0,0)},G}(t.Disposable),i.InputHandler=r},function(t,i,r){var n,o=this&&this.__extends||(n=function(p,d){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,y){c.__proto__=y}||function(c,y){for(var _ in y)y.hasOwnProperty(_)&&(c[_]=y[_])})(p,d)},function(p,d){function c(){this.constructor=p}n(p,d),p.prototype=d===null?Object.create(d):(c.prototype=d.prototype,new c)});Object.defineProperty(i,"__esModule",{value:!0}),t=r(2);var s=r(15),u=r(20),l=r(21),a=r(23),h=function(){function p(d){this.table=new Uint8Array(d)}return p.prototype.setDefault=function(d,c){s.fill(this.table,d<<4|c)},p.prototype.add=function(d,c,y,_){this.table[c<<8|d]=y<<4|_},p.prototype.addMany=function(d,c,y,_){for(var g=0;g<d.length;g++)this.table[c<<8|d[g]]=y<<4|_},p}();i.TransitionTable=h,i.VT500_TRANSITION_TABLE=function(){function p(f,v){return c.slice(f,v)}var d=new h(4095),c=Array.apply(null,Array(256)).map(function(f,v){return v}),y=p(32,127),_=p(0,24);_.push(25),_.push.apply(_,p(28,32));var g,m=p(0,14);for(g in d.setDefault(1,0),d.addMany(y,0,2,0),m)d.addMany([24,26,153,154],g,3,0),d.addMany(p(128,144),g,3,0),d.addMany(p(144,152),g,3,0),d.add(156,g,0,0),d.add(27,g,11,1),d.add(157,g,4,8),d.addMany([152,158,159],g,0,7),d.add(155,g,11,3),d.add(144,g,11,9);return d.addMany(_,0,3,0),d.addMany(_,1,3,1),d.add(127,1,0,1),d.addMany(_,8,0,8),d.addMany(_,3,3,3),d.add(127,3,0,3),d.addMany(_,4,3,4),d.add(127,4,0,4),d.addMany(_,6,3,6),d.addMany(_,5,3,5),d.add(127,5,0,5),d.addMany(_,2,3,2),d.add(127,2,0,2),d.add(93,1,4,8),d.addMany(y,8,5,8),d.add(127,8,5,8),d.addMany([156,27,24,26,7],8,6,0),d.addMany(p(28,32),8,0,8),d.addMany([88,94,95],1,0,7),d.addMany(y,7,0,7),d.addMany(_,7,0,7),d.add(156,7,0,0),d.add(127,7,0,7),d.add(91,1,11,3),d.addMany(p(64,127),3,7,0),d.addMany(p(48,60),3,8,4),d.addMany([60,61,62,63],3,9,4),d.addMany(p(48,60),4,8,4),d.addMany(p(64,127),4,7,0),d.addMany([60,61,62,63],4,0,6),d.addMany(p(32,64),6,0,6),d.add(127,6,0,6),d.addMany(p(64,127),6,0,0),d.addMany(p(32,48),3,9,5),d.addMany(p(32,48),5,9,5),d.addMany(p(48,64),5,0,6),d.addMany(p(64,127),5,7,0),d.addMany(p(32,48),4,9,5),d.addMany(p(32,48),1,9,2),d.addMany(p(32,48),2,9,2),d.addMany(p(48,127),2,10,0),d.addMany(p(48,80),1,10,0),d.addMany(p(81,88),1,10,0),d.addMany([89,90,92],1,10,0),d.addMany(p(96,127),1,10,0),d.add(80,1,11,9),d.addMany(_,9,0,9),d.add(127,9,0,9),d.addMany(p(28,32),9,0,9),d.addMany(p(32,48),9,9,12),d.addMany(p(48,60),9,8,10),d.addMany([60,61,62,63],9,9,10),d.addMany(_,11,0,11),d.addMany(p(32,128),11,0,11),d.addMany(p(28,32),11,0,11),d.addMany(_,10,0,10),d.add(127,10,0,10),d.addMany(p(28,32),10,0,10),d.addMany(p(48,60),10,8,10),d.addMany([60,61,62,63],10,0,11),d.addMany(p(32,48),10,9,12),d.addMany(_,12,0,12),d.add(127,12,0,12),d.addMany(p(28,32),12,0,12),d.addMany(p(32,48),12,9,12),d.addMany(p(48,64),12,0,11),d.addMany(p(64,127),12,12,13),d.addMany(p(64,127),10,12,13),d.addMany(p(64,127),9,12,13),d.addMany(_,13,13,13),d.addMany(y,13,13,13),d.add(127,13,0,13),d.addMany([27,156,24,26],13,14,0),d.add(160,0,2,0),d.add(160,8,5,8),d.add(160,6,0,6),d.add(160,11,0,11),d.add(160,13,13,13),d}(),r=function(p){function d(c){c===void 0&&(c=i.VT500_TRANSITION_TABLE);var y=p.call(this)||this;return y.TRANSITIONS=c,y.initialState=0,y.currentState=y.initialState,y._params=new u.Params,y._params.addParam(0),y._collect=0,y.precedingCodepoint=0,y._printHandlerFb=function(){},y._executeHandlerFb=function(){},y._csiHandlerFb=function(){},y._escHandlerFb=function(){},y._errorHandlerFb=function(_){return _},y._printHandler=y._printHandlerFb,y._executeHandlers=Object.create(null),y._csiHandlers=Object.create(null),y._escHandlers=Object.create(null),y._oscParser=new l.OscParser,y._dcsParser=new a.DcsParser,y._errorHandler=y._errorHandlerFb,y.setEscHandler({final:"\\"},function(){}),y}return o(d,p),d.prototype._identifier=function(c,y){y===void 0&&(y=[64,126]);var _=0;if(c.prefix){if(1<c.prefix.length)throw Error("only one byte as prefix supported");if((_=c.prefix.charCodeAt(0))&&60>_||63<_)throw Error("prefix must be in range 0x3c .. 0x3f")}if(c.intermediates){if(2<c.intermediates.length)throw Error("only two bytes as intermediates are supported");for(var g=0;g<c.intermediates.length;++g){var m=c.intermediates.charCodeAt(g);if(32>m||47<m)throw Error("intermediate must be in range 0x20 .. 0x2f");_<<=8,_|=m}}if(c.final.length!==1)throw Error("final must be a single byte");if(c=c.final.charCodeAt(0),y[0]>c||c>y[1])throw Error("final must be in range "+y[0]+" .. "+y[1]);return _<<=8,_|c},d.prototype.identToString=function(c){for(var y=[];c;)y.push(String.fromCharCode(255&c)),c>>=8;return y.reverse().join("")},d.prototype.dispose=function(){this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null),this._oscParser.dispose(),this._dcsParser.dispose()},d.prototype.setPrintHandler=function(c){this._printHandler=c},d.prototype.clearPrintHandler=function(){this._printHandler=this._printHandlerFb},d.prototype.addEscHandler=function(c,y){c=this._identifier(c,[48,126]),this._escHandlers[c]===void 0&&(this._escHandlers[c]=[]);var _=this._escHandlers[c];return _.push(y),{dispose:function(){var g=_.indexOf(y);g!==-1&&_.splice(g,1)}}},d.prototype.setEscHandler=function(c,y){this._escHandlers[this._identifier(c,[48,126])]=[y]},d.prototype.clearEscHandler=function(c){this._escHandlers[this._identifier(c,[48,126])]&&delete this._escHandlers[this._identifier(c,[48,126])]},d.prototype.setEscHandlerFallback=function(c){this._escHandlerFb=c},d.prototype.setExecuteHandler=function(c,y){this._executeHandlers[c.charCodeAt(0)]=y},d.prototype.clearExecuteHandler=function(c){this._executeHandlers[c.charCodeAt(0)]&&delete this._executeHandlers[c.charCodeAt(0)]},d.prototype.setExecuteHandlerFallback=function(c){this._executeHandlerFb=c},d.prototype.addCsiHandler=function(c,y){c=this._identifier(c),this._csiHandlers[c]===void 0&&(this._csiHandlers[c]=[]);var _=this._csiHandlers[c];return _.push(y),{dispose:function(){var g=_.indexOf(y);g!==-1&&_.splice(g,1)}}},d.prototype.setCsiHandler=function(c,y){this._csiHandlers[this._identifier(c)]=[y]},d.prototype.clearCsiHandler=function(c){this._csiHandlers[this._identifier(c)]&&delete this._csiHandlers[this._identifier(c)]},d.prototype.setCsiHandlerFallback=function(c){this._csiHandlerFb=c},d.prototype.addDcsHandler=function(c,y){return this._dcsParser.addHandler(this._identifier(c),y)},d.prototype.setDcsHandler=function(c,y){this._dcsParser.setHandler(this._identifier(c),y)},d.prototype.clearDcsHandler=function(c){this._dcsParser.clearHandler(this._identifier(c))},d.prototype.setDcsHandlerFallback=function(c){this._dcsParser.setHandlerFallback(c)},d.prototype.addOscHandler=function(c,y){return this._oscParser.addHandler(c,y)},d.prototype.setOscHandler=function(c,y){this._oscParser.setHandler(c,y)},d.prototype.clearOscHandler=function(c){this._oscParser.clearHandler(c)},d.prototype.setOscHandlerFallback=function(c){this._oscParser.setHandlerFallback(c)},d.prototype.setErrorHandler=function(c){this._errorHandler=c},d.prototype.clearErrorHandler=function(){this._errorHandler=this._errorHandlerFb},d.prototype.reset=function(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this.precedingCodepoint=this._collect=0},d.prototype.parse=function(c,y){for(var _=0,g,m=this.currentState,f=this._oscParser,v=this._dcsParser,Z=this._collect,b=this._params,G=this.TRANSITIONS.table,S=0;S<y;++S){switch((g=G[m<<8|(160>(_=c[S])?_:160)])>>4){case 2:for(m=S+1;;++m){if(m>=y||32>(_=c[m])||126<_&&160>_){this._printHandler(c,S,m),S=m-1;break}if(++m>=y||32>(_=c[m])||126<_&&160>_){this._printHandler(c,S,m),S=m-1;break}if(++m>=y||32>(_=c[m])||126<_&&160>_){this._printHandler(c,S,m),S=m-1;break}if(++m>=y||32>(_=c[m])||126<_&&160>_){this._printHandler(c,S,m),S=m-1;break}}break;case 3:this._executeHandlers[_]?this._executeHandlers[_]():this._executeHandlerFb(_),this.precedingCodepoint=0;break;case 1:if(this._errorHandler({position:S,code:_,currentState:m,collect:Z,params:b,abort:!1}).abort)return;break;case 7:for(var C=(m=this._csiHandlers[Z<<8|_])?m.length-1:-1;0<=C&&m[C](b)===!1;C--);0>C&&this._csiHandlerFb(Z<<8|_,b),this.precedingCodepoint=0;break;case 8:do switch(_){case 59:b.addParam(0);break;case 58:b.addSubParam(-1);break;default:b.addDigit(_-48)}while(++S<y&&47<(_=c[S])&&60>_);S--;break;case 9:Z<<=8,Z|=_;break;case 10:for(C=(m=this._escHandlers[Z<<8|_])?m.length-1:-1;0<=C&&m[C]()===!1;C--);0>C&&this._escHandlerFb(Z<<8|_),this.precedingCodepoint=0;break;case 11:b.reset(),b.addParam(0),Z=0;break;case 12:v.hook(Z<<8|_,b);break;case 13:for(m=S+1;;++m)if(m>=y||(_=c[m])===24||_===26||_===27||127<_&&160>_){v.put(c,S,m),S=m-1;break}break;case 14:v.unhook(_!==24&&_!==26),_===27&&(g|=1),b.reset(),b.addParam(0),this.precedingCodepoint=Z=0;break;case 4:f.start();break;case 5:for(m=S+1;;m++)if(m>=y||32>(_=c[m])||127<_&&159>=_){f.put(c,S,m),S=m-1;break}break;case 6:f.end(_!==24&&_!==26),_===27&&(g|=1),b.reset(),b.addParam(0),this.precedingCodepoint=Z=0}m=15&g}this._collect=Z,this.currentState=m},d}(t.Disposable),i.EscapeSequenceParser=r},function(t,i,r){var n,o=this&&this.__extends||(n=function(f,v){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Z,b){Z.__proto__=b}||function(Z,b){for(var G in b)b.hasOwnProperty(G)&&(Z[G]=b[G])})(f,v)},function(f,v){function Z(){this.constructor=f}n(f,v),f.prototype=v===null?Object.create(v):(Z.prototype=v.prototype,new Z)}),s=this&&this.__decorate||function(f,v,Z,b){var G,S=arguments.length,C=3>S?v:b===null?b=Object.getOwnPropertyDescriptor(v,Z):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(f,v,Z,b);else for(var R=f.length-1;0<=R;R--)(G=f[R])&&(C=(3>S?G(C):3<S?G(v,Z,C):G(v,Z))||C);return 3<S&&C&&Object.defineProperty(v,Z,C),C},u=this&&this.__param||function(f,v){return function(Z,b){v(Z,b,f)}};Object.defineProperty(i,"__esModule",{value:!0});var l=r(41),a=r(47),h=r(48),p=r(49),d=r(28);t=r(2);var c=r(4),y=r(0),_=r(24),g=r(1),m=1;r=function(f){function v(Z,b,G,S,C,R,Y,I){var w=f.call(this)||this;return w._colors=Z,w._screenElement=b,w._linkifier=G,w._bufferService=S,w._charSizeService=C,w._optionsService=R,w.coreService=Y,w.coreBrowserService=I,w._id=m++,w._onRequestRefreshRows=new g.EventEmitter,Z=w._optionsService.options.allowTransparency,w._characterJoinerRegistry=new d.CharacterJoinerRegistry(w._bufferService),w._renderLayers=[new l.TextRenderLayer(w._screenElement,0,w._colors,w._characterJoinerRegistry,Z,w._id,w._bufferService,R),new a.SelectionRenderLayer(w._screenElement,1,w._colors,w._id,w._bufferService,R),new p.LinkRenderLayer(w._screenElement,2,w._colors,w._id,w._linkifier,w._bufferService,R),new h.CursorRenderLayer(w._screenElement,3,w._colors,w._id,w._onRequestRefreshRows,w._bufferService,R,Y,I)],w.dimensions={scaledCharWidth:0,scaledCharHeight:0,scaledCellWidth:0,scaledCellHeight:0,scaledCharLeft:0,scaledCharTop:0,scaledCanvasWidth:0,scaledCanvasHeight:0,canvasWidth:0,canvasHeight:0,actualCellWidth:0,actualCellHeight:0},w._devicePixelRatio=window.devicePixelRatio,w._updateDimensions(),w.onOptionsChanged(),w}return o(v,f),Object.defineProperty(v.prototype,"onRequestRefreshRows",{get:function(){return this._onRequestRefreshRows.event},enumerable:!0,configurable:!0}),v.prototype.dispose=function(){f.prototype.dispose.call(this),this._renderLayers.forEach(function(Z){return Z.dispose()}),_.removeTerminalFromCache(this._id)},v.prototype.onDevicePixelRatioChange=function(){this._devicePixelRatio!==window.devicePixelRatio&&(this._devicePixelRatio=window.devicePixelRatio,this.onResize(this._bufferService.cols,this._bufferService.rows))},v.prototype.setColors=function(Z){var b=this;this._colors=Z,this._renderLayers.forEach(function(G){G.setColors(b._colors),G.reset()})},v.prototype.onResize=function(){var Z=this;this._updateDimensions(),this._renderLayers.forEach(function(b){return b.resize(Z.dimensions)}),this._screenElement.style.width=this.dimensions.canvasWidth+"px",this._screenElement.style.height=this.dimensions.canvasHeight+"px"},v.prototype.onCharSizeChanged=function(){this.onResize(this._bufferService.cols,this._bufferService.rows)},v.prototype.onBlur=function(){this._runOperation(function(Z){return Z.onBlur()})},v.prototype.onFocus=function(){this._runOperation(function(Z){return Z.onFocus()})},v.prototype.onSelectionChanged=function(Z,b,G){G===void 0&&(G=!1),this._runOperation(function(S){return S.onSelectionChanged(Z,b,G)})},v.prototype.onCursorMove=function(){this._runOperation(function(Z){return Z.onCursorMove()})},v.prototype.onOptionsChanged=function(){this._runOperation(function(Z){return Z.onOptionsChanged()})},v.prototype.clear=function(){this._runOperation(function(Z){return Z.reset()})},v.prototype._runOperation=function(Z){this._renderLayers.forEach(function(b){return Z(b)})},v.prototype.renderRows=function(Z,b){this._renderLayers.forEach(function(G){return G.onGridChanged(Z,b)})},v.prototype._updateDimensions=function(){this._charSizeService.hasValidSize&&(this.dimensions.scaledCharWidth=Math.floor(this._charSizeService.width*window.devicePixelRatio),this.dimensions.scaledCharHeight=Math.ceil(this._charSizeService.height*window.devicePixelRatio),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this._optionsService.options.lineHeight),this.dimensions.scaledCharTop=this._optionsService.options.lineHeight===1?0:Math.round((this.dimensions.scaledCellHeight-this.dimensions.scaledCharHeight)/2),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this._optionsService.options.letterSpacing),this.dimensions.scaledCharLeft=Math.floor(this._optionsService.options.letterSpacing/2),this.dimensions.scaledCanvasHeight=this._bufferService.rows*this.dimensions.scaledCellHeight,this.dimensions.scaledCanvasWidth=this._bufferService.cols*this.dimensions.scaledCellWidth,this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._bufferService.rows,this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._bufferService.cols)},v.prototype.registerCharacterJoiner=function(Z){return this._characterJoinerRegistry.registerCharacterJoiner(Z)},v.prototype.deregisterCharacterJoiner=function(Z){return this._characterJoinerRegistry.deregisterCharacterJoiner(Z)},v=s([u(3,y.IBufferService),u(4,c.ICharSizeService),u(5,y.IOptionsService),u(6,y.ICoreService),u(7,c.ICoreBrowserService)],v)}(t.Disposable),i.Renderer=r},function(t,i,r){var n,o=this&&this.__extends||(n=function(p,d){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,y){c.__proto__=y}||function(c,y){for(var _ in y)y.hasOwnProperty(_)&&(c[_]=y[_])})(p,d)},function(p,d){function c(){this.constructor=p}n(p,d),p.prototype=d===null?Object.create(d):(c.prototype=d.prototype,new c)});Object.defineProperty(i,"__esModule",{value:!0});var s=r(42);t=r(13);var u=r(6),l=r(3),a=r(28),h=r(5);r=function(p){function d(c,y,_,g,m,f,v,Z){return c=p.call(this,c,"text",y,m,_,f,v,Z)||this,c.bufferService=v,c.optionsService=Z,c._characterWidth=0,c._characterFont="",c._characterOverlapCache={},c._workCell=new h.CellData,c._state=new s.GridCache,c._characterJoinerRegistry=g,c}return o(d,p),d.prototype.resize=function(c){p.prototype.resize.call(this,c);var y=this._getFont(!1,!1);this._characterWidth===c.scaledCharWidth&&this._characterFont===y||(this._characterWidth=c.scaledCharWidth,this._characterFont=y,this._characterOverlapCache={}),this._state.clear(),this._state.resize(this._bufferService.cols,this._bufferService.rows)},d.prototype.reset=function(){this._state.clear(),this._clearAll()},d.prototype._forEachCell=function(c,y,_,g){for(;c<=y;c++){var m=c+this._bufferService.buffer.ydisp,f=this._bufferService.buffer.lines.get(m);m=_?_.getJoinedCharacters(m):[];for(var v=0;v<this._bufferService.cols;v++){f.loadCell(v,this._workCell);var Z=this._workCell,b=!1,G=v;Z.getWidth()!==0&&(0<m.length&&v===m[0][0]&&(b=!0,G=m.shift(),Z=new a.JoinedCellData(this._workCell,f.translateToString(!0,G[0],G[1]),G[1]-G[0]),G=G[1]-1),!b&&this._isOverlapping(Z)&&G<f.length-1&&f.getCodePoint(G+1)===l.NULL_CELL_CODE&&(Z.content&=-12582913,Z.content|=8388608),g(Z,v,c),v=G)}}},d.prototype._drawBackground=function(c,y){var _=this,g=this._ctx,m=this._bufferService.cols,f=0,v=0,Z=null;g.save(),this._forEachCell(c,y,null,function(b,G,S){var C=null;b.isInverse()?C=b.isFgDefault()?_._colors.foreground.css:b.isFgRGB()?"rgb("+u.AttributeData.toColorRGB(b.getFgColor()).join(",")+")":_._colors.ansi[b.getFgColor()].css:b.isBgRGB()?C="rgb("+u.AttributeData.toColorRGB(b.getBgColor()).join(",")+")":b.isBgPalette()&&(C=_._colors.ansi[b.getBgColor()].css),Z===null&&(f=G,v=S),S!==v?(g.fillStyle=Z||"",_._fillCells(f,v,m-f,1),f=G,v=S):Z!==C&&(g.fillStyle=Z||"",_._fillCells(f,v,G-f,1),f=G,v=S),Z=C}),Z!==null&&(g.fillStyle=Z,this._fillCells(f,v,m-f,1)),g.restore()},d.prototype._drawForeground=function(c,y){var _=this;this._forEachCell(c,y,this._characterJoinerRegistry,function(g,m,f){if(!g.isInvisible()&&(_._drawChars(g,m,f),g.isUnderline())){if(_._ctx.save(),g.isInverse())if(g.isBgDefault())_._ctx.fillStyle=_._colors.background.css;else if(g.isBgRGB())_._ctx.fillStyle="rgb("+u.AttributeData.toColorRGB(g.getBgColor()).join(",")+")";else{var v=g.getBgColor();_._optionsService.options.drawBoldTextInBrightColors&&g.isBold()&&8>v&&(v+=8),_._ctx.fillStyle=_._colors.ansi[v].css}else g.isFgDefault()?_._ctx.fillStyle=_._colors.foreground.css:g.isFgRGB()?_._ctx.fillStyle="rgb("+u.AttributeData.toColorRGB(g.getFgColor()).join(",")+")":(v=g.getFgColor(),_._optionsService.options.drawBoldTextInBrightColors&&g.isBold()&&8>v&&(v+=8),_._ctx.fillStyle=_._colors.ansi[v].css);_._fillBottomLineAtCells(m,f,g.getWidth()),_._ctx.restore()}})},d.prototype.onGridChanged=function(c,y){this._state.cache.length!==0&&(this._charAtlas&&this._charAtlas.beginFrame(),this._clearCells(0,c,this._bufferService.cols,y-c+1),this._drawBackground(c,y),this._drawForeground(c,y))},d.prototype.onOptionsChanged=function(){this._setTransparency(this._optionsService.options.allowTransparency)},d.prototype._isOverlapping=function(c){if(c.getWidth()!==1||256>c.getCode())return!1;if(c=c.getChars(),this._characterOverlapCache.hasOwnProperty(c))return this._characterOverlapCache[c];this._ctx.save(),this._ctx.font=this._characterFont;var y=Math.floor(this._ctx.measureText(c).width)>this._characterWidth;return this._ctx.restore(),this._characterOverlapCache[c]=y,y},d}(t.BaseRenderLayer),i.TextRenderLayer=r},function(t,i){Object.defineProperty(i,"__esModule",{value:!0}),t=function(){function r(){this.cache=[]}return r.prototype.resize=function(n,o){for(var s=0;s<n;s++){this.cache.length<=s&&this.cache.push([]);for(var u=this.cache[s].length;u<o;u++)this.cache[s].push(void 0);this.cache[s].length=o}this.cache.length=n},r.prototype.clear=function(){for(var n=0;n<this.cache.length;n++)for(var o=0;o<this.cache[n].length;o++)this.cache[n][o]=void 0},r}(),i.GridCache=t},function(t,i,r){function n(y){return y.code<<21|y.bg<<12|y.fg<<3|(y.bold?0:4)+(y.dim?0:2)+(y.italic?0:1)}var o,s=this&&this.__extends||(o=function(y,_){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,m){g.__proto__=m}||function(g,m){for(var f in m)m.hasOwnProperty(f)&&(g[f]=m[f])})(y,_)},function(y,_){function g(){this.constructor=y}o(y,_),y.prototype=_===null?Object.create(_):(g.prototype=_.prototype,new g)});Object.defineProperty(i,"__esModule",{value:!0});var u=r(9);t=r(44);var l=r(26),a=r(46),h=r(11),p=r(27),d=r(10),c={css:"rgba(0, 0, 0, 0)",rgba:0};i.getGlyphCacheKey=n,r=function(y){function _(g,m){var f=y.call(this)||this;return f._config=m,f._drawToCacheCount=0,f._glyphsWaitingOnBitmap=[],f._bitmapCommitTimeout=null,f._bitmap=null,f._cacheCanvas=g.createElement("canvas"),f._cacheCanvas.width=1024,f._cacheCanvas.height=1024,f._cacheCtx=p.throwIfFalsy(f._cacheCanvas.getContext("2d",{alpha:!0})),g=g.createElement("canvas"),g.width=f._config.scaledCharWidth,g.height=f._config.scaledCharHeight,f._tmpCtx=p.throwIfFalsy(g.getContext("2d",{alpha:f._config.allowTransparency})),f._width=Math.floor(1024/f._config.scaledCharWidth),f._height=Math.floor(1024/f._config.scaledCharHeight),g=f._width*f._height,f._cacheMap=new a.LRUMap(g),f._cacheMap.prealloc(g),f}return s(_,y),_.prototype.dispose=function(){this._bitmapCommitTimeout!==null&&(window.clearTimeout(this._bitmapCommitTimeout),this._bitmapCommitTimeout=null)},_.prototype.beginFrame=function(){this._drawToCacheCount=0},_.prototype.draw=function(g,m,f,v){if(m.code===32)return!0;if(!this._canCache(m))return!1;var Z=n(m),b=this._cacheMap.get(Z);return b!=null?(this._drawFromCache(g,b,f,v),!0):100>this._drawToCacheCount?(b=this._cacheMap.size<this._cacheMap.capacity?this._cacheMap.size:this._cacheMap.peek().index,m=this._drawToCache(m,b),this._cacheMap.set(Z,m),this._drawFromCache(g,m,f,v),!0):!1},_.prototype._canCache=function(g){return 256>g.code},_.prototype._toCoordinateX=function(g){return g%this._width*this._config.scaledCharWidth},_.prototype._toCoordinateY=function(g){return Math.floor(g/this._width)*this._config.scaledCharHeight},_.prototype._drawFromCache=function(g,m,f,v){if(!m.isEmpty){var Z=this._toCoordinateX(m.index),b=this._toCoordinateY(m.index);g.drawImage(m.inBitmap?this._bitmap:this._cacheCanvas,Z,b,this._config.scaledCharWidth,this._config.scaledCharHeight,f,v,this._config.scaledCharWidth,this._config.scaledCharHeight)}},_.prototype._getColorFromAnsiIndex=function(g){return g<this._config.colors.ansi.length?this._config.colors.ansi[g]:l.DEFAULT_ANSI_COLORS[g]},_.prototype._getBackgroundColor=function(g){return this._config.allowTransparency?c:g.bg===u.INVERTED_DEFAULT_COLOR?this._config.colors.foreground:256>g.bg?this._getColorFromAnsiIndex(g.bg):this._config.colors.background},_.prototype._getForegroundColor=function(g){return g.fg===u.INVERTED_DEFAULT_COLOR?d.opaque(this._config.colors.background):256>g.fg?this._getColorFromAnsiIndex(g.fg):this._config.colors.foreground},_.prototype._drawToCache=function(g,m){this._drawToCacheCount++,this._tmpCtx.save();var f=this._getBackgroundColor(g);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=f.css,this._tmpCtx.fillRect(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),this._tmpCtx.globalCompositeOperation="source-over",this._tmpCtx.font=(g.italic?"italic":"")+" "+(g.bold?this._config.fontWeightBold:this._config.fontWeight)+" "+this._config.fontSize*this._config.devicePixelRatio+"px "+this._config.fontFamily,this._tmpCtx.textBaseline="middle",this._tmpCtx.fillStyle=this._getForegroundColor(g).css,g.dim&&(this._tmpCtx.globalAlpha=u.DIM_OPACITY),this._tmpCtx.fillText(g.chars,0,this._config.scaledCharHeight/2),this._tmpCtx.restore(),g=this._tmpCtx.getImageData(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight);var v=!1;if(!this._config.allowTransparency){v=!0;var Z=f.rgba>>>24,b=f.rgba>>>16&255;f=f.rgba>>>8&255;for(var G=0;G<g.data.length;G+=4)g.data[G]===Z&&g.data[G+1]===b&&g.data[G+2]===f?g.data[G+3]=0:v=!1}return f=this._toCoordinateX(m),Z=this._toCoordinateY(m),this._cacheCtx.putImageData(g,f,Z),m={index:m,isEmpty:v,inBitmap:!1},this._addGlyphToBitmap(m),m},_.prototype._addGlyphToBitmap=function(g){var m=this;"createImageBitmap"in window&&!h.isFirefox&&!h.isSafari&&(this._glyphsWaitingOnBitmap.push(g),this._bitmapCommitTimeout===null&&(this._bitmapCommitTimeout=window.setTimeout(function(){return m._generateBitmap()},100)))},_.prototype._generateBitmap=function(){var g=this,m=this._glyphsWaitingOnBitmap;this._glyphsWaitingOnBitmap=[],window.createImageBitmap(this._cacheCanvas).then(function(f){for(g._bitmap=f,f=0;f<m.length;f++)m[f].inBitmap=!0}),this._bitmapCommitTimeout=null},_}(t.BaseCharAtlas),i.DynamicCharAtlas=r,r=function(y){function _(){return y.call(this)||this}return s(_,y),_.prototype.draw=function(){return!1},_}(t.BaseCharAtlas),i.NoneCharAtlas=r},function(t,i){Object.defineProperty(i,"__esModule",{value:!0}),t=function(){function r(){this._didWarmUp=!1}return r.prototype.dispose=function(){},r.prototype.warmUp=function(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)},r.prototype._doWarmUp=function(){},r.prototype.beginFrame=function(){},r}(),i.BaseCharAtlas=t},function(t,i){Object.defineProperty(i,"__esModule",{value:!0}),t=function(){function r(){this._color={},this._rgba={}}return r.prototype.clear=function(){this._color={},this._rgba={}},r.prototype.setCss=function(n,o,s){this._rgba[n]||(this._rgba[n]={}),this._rgba[n][o]=s},r.prototype.getCss=function(n,o){return this._rgba[n]?this._rgba[n][o]:void 0},r.prototype.setColor=function(n,o,s){this._color[n]||(this._color[n]={}),this._color[n][o]=s},r.prototype.getColor=function(n,o){return this._color[n]?this._color[n][o]:void 0},r}(),i.ColorContrastCache=t},function(t,i){Object.defineProperty(i,"__esModule",{value:!0}),t=function(){function r(n){this.capacity=n,this._map={},this._tail=this._head=null,this._nodePool=[],this.size=0}return r.prototype._unlinkNode=function(n){var o=n.prev,s=n.next;n===this._head&&(this._head=s),n===this._tail&&(this._tail=o),o!==null&&(o.next=s),s!==null&&(s.prev=o)},r.prototype._appendNode=function(n){var o=this._tail;o!==null&&(o.next=n),n.prev=o,n.next=null,this._tail=n,this._head===null&&(this._head=n)},r.prototype.prealloc=function(n){for(var o=this._nodePool,s=0;s<n;s++)o.push({prev:null,next:null,key:null,value:null})},r.prototype.get=function(n){return n=this._map[n],n!==void 0?(this._unlinkNode(n),this._appendNode(n),n.value):null},r.prototype.peekValue=function(n){return n=this._map[n],n!==void 0?n.value:null},r.prototype.peek=function(){var n=this._head;return n===null?null:n.value},r.prototype.set=function(n,o){var s=this._map[n];if(s!==void 0)s=this._map[n],this._unlinkNode(s),s.value=o;else if(this.size>=this.capacity)s=this._head,this._unlinkNode(s),delete this._map[s.key],s.key=n,s.value=o,this._map[n]=s;else{var u=this._nodePool;0<u.length?((s=u.pop()).key=n,s.value=o):s={prev:null,next:null,key:n,value:o},this._map[n]=s,this.size++}this._appendNode(s)},r}(),i.LRUMap=t},function(t,i,r){var n,o=this&&this.__extends||(n=function(s,u){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,a){l.__proto__=a}||function(l,a){for(var h in a)a.hasOwnProperty(h)&&(l[h]=a[h])})(s,u)},function(s,u){function l(){this.constructor=s}n(s,u),s.prototype=u===null?Object.create(u):(l.prototype=u.prototype,new l)});Object.defineProperty(i,"__esModule",{value:!0}),t=function(s){function u(l,a,h,p,d,c){return l=s.call(this,l,"selection",a,!0,h,p,d,c)||this,l.bufferService=d,l.optionsService=c,l._clearState(),l}return o(u,s),u.prototype._clearState=function(){this._state={start:void 0,end:void 0,columnSelectMode:void 0,ydisp:void 0}},u.prototype.resize=function(l){s.prototype.resize.call(this,l),this._clearState()},u.prototype.reset=function(){this._state.start&&this._state.end&&(this._clearState(),this._clearAll())},u.prototype.onSelectionChanged=function(l,a,h){if(this._didStateChange(l,a,h,this._bufferService.buffer.ydisp))if(this._clearAll(),l&&a){var p=l[1]-this._bufferService.buffer.ydisp,d=a[1]-this._bufferService.buffer.ydisp,c=Math.max(p,0),y=Math.min(d,this._bufferService.rows-1);c>=this._bufferService.rows||0>y||(this._ctx.fillStyle=this._colors.selection.css,h?(p=l[0],this._fillCells(p,c,a[0]-p,y-c+1)):(p=p===c?l[0]:0,this._fillCells(p,c,(c===y?a[0]:this._bufferService.cols)-p,1),this._fillCells(0,c+1,this._bufferService.cols,Math.max(y-c-1,0)),c!==y&&this._fillCells(0,y,d===y?a[0]:this._bufferService.cols,1)),this._state.start=[l[0],l[1]],this._state.end=[a[0],a[1]],this._state.columnSelectMode=h,this._state.ydisp=this._bufferService.buffer.ydisp)}else this._clearState()},u.prototype._didStateChange=function(l,a,h,p){return!this._areCoordinatesEqual(l,this._state.start)||!this._areCoordinatesEqual(a,this._state.end)||h!==this._state.columnSelectMode||p!==this._state.ydisp},u.prototype._areCoordinatesEqual=function(l,a){return!(!l||!a)&&l[0]===a[0]&&l[1]===a[1]},u}(r(13).BaseRenderLayer),i.SelectionRenderLayer=t},function(t,i,r){var n,o=this&&this.__extends||(n=function(l,a){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,p){h.__proto__=p}||function(h,p){for(var d in p)p.hasOwnProperty(d)&&(h[d]=p[d])})(l,a)},function(l,a){function h(){this.constructor=l}n(l,a),l.prototype=a===null?Object.create(a):(h.prototype=a.prototype,new h)});Object.defineProperty(i,"__esModule",{value:!0}),t=r(13);var s=r(5);r=function(l){function a(h,p,d,c,y,_,g,m,f){return h=l.call(this,h,"cursor",p,!0,d,c,_,g)||this,h._onRequestRefreshRowsEvent=y,h.bufferService=_,h.optionsService=g,h._coreService=m,h._coreBrowserService=f,h._cell=new s.CellData,h._state={x:0,y:0,isFocused:!1,style:"",width:0},h._cursorRenderers={bar:h._renderBarCursor.bind(h),block:h._renderBlockCursor.bind(h),underline:h._renderUnderlineCursor.bind(h)},h}return o(a,l),a.prototype.resize=function(h){l.prototype.resize.call(this,h),this._state={x:0,y:0,isFocused:!1,style:"",width:0}},a.prototype.reset=function(){this._clearCursor(),this._cursorBlinkStateManager&&(this._cursorBlinkStateManager.dispose(),this._cursorBlinkStateManager=void 0,this.onOptionsChanged())},a.prototype.onBlur=function(){this._cursorBlinkStateManager&&this._cursorBlinkStateManager.pause(),this._onRequestRefreshRowsEvent.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},a.prototype.onFocus=function(){this._cursorBlinkStateManager?this._cursorBlinkStateManager.resume():this._onRequestRefreshRowsEvent.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},a.prototype.onOptionsChanged=function(){var h,p=this;this._optionsService.options.cursorBlink?this._cursorBlinkStateManager||(this._cursorBlinkStateManager=new u(this._coreBrowserService.isFocused,function(){p._render(!0)})):((h=this._cursorBlinkStateManager)===null||h===void 0||h.dispose(),this._cursorBlinkStateManager=void 0),this._onRequestRefreshRowsEvent.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},a.prototype.onCursorMove=function(){this._cursorBlinkStateManager&&this._cursorBlinkStateManager.restartBlinkAnimation()},a.prototype.onGridChanged=function(){!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isPaused?this._render(!1):this._cursorBlinkStateManager.restartBlinkAnimation()},a.prototype._render=function(){if(this._coreService.isCursorInitialized&&!this._coreService.isCursorHidden){var h=this._bufferService.buffer.ybase+this._bufferService.buffer.y,p=h-this._bufferService.buffer.ydisp;if(0>p||p>=this._bufferService.rows)this._clearCursor();else if(this._bufferService.buffer.lines.get(h).loadCell(this._bufferService.buffer.x,this._cell),this._cell.content!==void 0){if(!this._coreBrowserService.isFocused)return this._clearCursor(),this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,h=this._optionsService.options.cursorStyle,h&&h!=="block"?this._cursorRenderers[h](this._bufferService.buffer.x,p,this._cell):this._renderBlurCursor(this._bufferService.buffer.x,p,this._cell),this._ctx.restore(),this._state.x=this._bufferService.buffer.x,this._state.y=p,this._state.isFocused=!1,this._state.style=h,void(this._state.width=this._cell.getWidth());if(!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isCursorVisible){if(this._state){if(this._state.x===this._bufferService.buffer.x&&this._state.y===p&&this._state.isFocused===this._coreBrowserService.isFocused&&this._state.style===this._optionsService.options.cursorStyle&&this._state.width===this._cell.getWidth())return;this._clearCursor()}this._ctx.save(),this._cursorRenderers[this._optionsService.options.cursorStyle||"block"](this._bufferService.buffer.x,p,this._cell),this._ctx.restore(),this._state.x=this._bufferService.buffer.x,this._state.y=p,this._state.isFocused=!1,this._state.style=this._optionsService.options.cursorStyle,this._state.width=this._cell.getWidth()}else this._clearCursor()}}else this._clearCursor()},a.prototype._clearCursor=function(){this._state&&(this._clearCells(this._state.x,this._state.y,this._state.width,1),this._state={x:0,y:0,isFocused:!1,style:"",width:0})},a.prototype._renderBarCursor=function(h,p){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillLeftLineAtCell(h,p),this._ctx.restore()},a.prototype._renderBlockCursor=function(h,p,d){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillCells(h,p,d.getWidth(),1),this._ctx.fillStyle=this._colors.cursorAccent.css,this._fillCharTrueColor(d,h,p),this._ctx.restore()},a.prototype._renderUnderlineCursor=function(h,p){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillBottomLineAtCells(h,p),this._ctx.restore()},a.prototype._renderBlurCursor=function(h,p,d){this._ctx.save(),this._ctx.strokeStyle=this._colors.cursor.css,this._strokeRectAtCell(h,p,d.getWidth(),1),this._ctx.restore()},a}(t.BaseRenderLayer),i.CursorRenderLayer=r;var u=function(){function l(a,h){this._renderCallback=h,this.isCursorVisible=!0,a&&this._restartInterval()}return Object.defineProperty(l.prototype,"isPaused",{get:function(){return!(this._blinkStartTimeout||this._blinkInterval)},enumerable:!0,configurable:!0}),l.prototype.dispose=function(){this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},l.prototype.restartBlinkAnimation=function(){var a=this;this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=window.requestAnimationFrame(function(){a._renderCallback(),a._animationFrame=void 0})))},l.prototype._restartInterval=function(a){var h=this;a===void 0&&(a=600),this._blinkInterval&&window.clearInterval(this._blinkInterval),this._blinkStartTimeout=setTimeout(function(){if(h._animationTimeRestarted){var p=600-(Date.now()-h._animationTimeRestarted);if(h._animationTimeRestarted=void 0,0<p)return void h._restartInterval(p)}h.isCursorVisible=!1,h._animationFrame=window.requestAnimationFrame(function(){h._renderCallback(),h._animationFrame=void 0}),h._blinkInterval=setInterval(function(){if(h._animationTimeRestarted){var d=600-(Date.now()-h._animationTimeRestarted);return h._animationTimeRestarted=void 0,void h._restartInterval(d)}h.isCursorVisible=!h.isCursorVisible,h._animationFrame=window.requestAnimationFrame(function(){h._renderCallback(),h._animationFrame=void 0})},600)},a)},l.prototype.pause=function(){this.isCursorVisible=!0,this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},l.prototype.resume=function(){this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation()},l}()},function(t,i,r){var n,o=this&&this.__extends||(n=function(l,a){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,p){h.__proto__=p}||function(h,p){for(var d in p)p.hasOwnProperty(d)&&(h[d]=p[d])})(l,a)},function(l,a){function h(){this.constructor=l}n(l,a),l.prototype=a===null?Object.create(a):(h.prototype=a.prototype,new h)});Object.defineProperty(i,"__esModule",{value:!0}),t=r(13);var s=r(9),u=r(25);r=function(l){function a(h,p,d,c,y,_,g){var m=l.call(this,h,"link",p,!0,d,c,_,g)||this;return m.bufferService=_,m.optionsService=g,y.onLinkHover(function(f){return m._onLinkHover(f)}),y.onLinkLeave(function(f){return m._onLinkLeave(f)}),m}return o(a,l),a.prototype.resize=function(h){l.prototype.resize.call(this,h),this._state=void 0},a.prototype.reset=function(){this._clearCurrentLink()},a.prototype._clearCurrentLink=function(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);var h=this._state.y2-this._state.y1-1;0<h&&this._clearCells(0,this._state.y1+1,this._state.cols,h),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}},a.prototype._onLinkHover=function(h){if(h.fg===s.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._colors.background.css:h.fg&&u.is256Color(h.fg)?this._ctx.fillStyle=this._colors.ansi[h.fg].css:this._ctx.fillStyle=this._colors.foreground.css,h.y1===h.y2)this._fillBottomLineAtCells(h.x1,h.y1,h.x2-h.x1);else{this._fillBottomLineAtCells(h.x1,h.y1,h.cols-h.x1);for(var p=h.y1+1;p<h.y2;p++)this._fillBottomLineAtCells(0,p,h.cols);this._fillBottomLineAtCells(0,h.y2,h.x2)}this._state=h},a.prototype._onLinkLeave=function(){this._clearCurrentLink()},a}(t.BaseRenderLayer),i.LinkRenderLayer=r},function(t,i,r){function n(u,l,a,h,p,d,c,y,_){this.x1=u,this.y1=l,this.x2=a,this.y2=h,this.clickCallback=p,this.hoverCallback=d,this.tooltipCallback=c,this.leaveCallback=y,this.willLinkActivate=_}Object.defineProperty(i,"__esModule",{value:!0});var o=r(19),s=r(1);t=function(){function u(l,a){this._bufferService=l,this._logService=a,this._linkMatchers=[],this._nextLinkMatcherId=0,this._onLinkHover=new s.EventEmitter,this._onLinkLeave=new s.EventEmitter,this._onLinkTooltip=new s.EventEmitter,this._rowsToLinkify={start:void 0,end:void 0}}return Object.defineProperty(u.prototype,"onLinkHover",{get:function(){return this._onLinkHover.event},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"onLinkLeave",{get:function(){return this._onLinkLeave.event},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"onLinkTooltip",{get:function(){return this._onLinkTooltip.event},enumerable:!0,configurable:!0}),u.prototype.attachToDom=function(l,a){this._element=l,this._mouseZoneManager=a},u.prototype.linkifyRows=function(l,a){var h=this;this._mouseZoneManager&&(this._rowsToLinkify.start===void 0||this._rowsToLinkify.end===void 0?(this._rowsToLinkify.start=l,this._rowsToLinkify.end=a):(this._rowsToLinkify.start=Math.min(this._rowsToLinkify.start,l),this._rowsToLinkify.end=Math.max(this._rowsToLinkify.end,a)),this._mouseZoneManager.clearAll(l,a),this._rowsTimeoutId&&clearTimeout(this._rowsTimeoutId),this._rowsTimeoutId=setTimeout(function(){return h._linkifyRows()},u._timeBeforeLatency))},u.prototype._linkifyRows=function(){this._rowsTimeoutId=void 0;var l=this._bufferService.buffer;if(this._rowsToLinkify.start!==void 0&&this._rowsToLinkify.end!==void 0){var a=l.ydisp+this._rowsToLinkify.start;if(!(a>=l.lines.length)){var h=Math.ceil(2e3/this._bufferService.cols);for(l=this._bufferService.buffer.iterator(!1,a,l.ydisp+Math.min(this._rowsToLinkify.end,this._bufferService.rows)+1,h,h);l.hasNext();)for(a=l.next(),h=0;h<this._linkMatchers.length;h++)this._doLinkifyRow(a.range.first,a.content,this._linkMatchers[h]);this._rowsToLinkify.start=void 0,this._rowsToLinkify.end=void 0}}else this._logService.debug("_rowToLinkify was unset before _linkifyRows was called")},u.prototype.registerLinkMatcher=function(l,a,h){if(h===void 0&&(h={}),!a)throw Error("handler must be defined");return l={id:this._nextLinkMatcherId++,regex:l,handler:a,matchIndex:h.matchIndex,validationCallback:h.validationCallback,hoverTooltipCallback:h.tooltipCallback,hoverLeaveCallback:h.leaveCallback,willLinkActivate:h.willLinkActivate,priority:h.priority||0},this._addLinkMatcherToList(l),l.id},u.prototype._addLinkMatcherToList=function(l){if(this._linkMatchers.length!==0){for(var a=this._linkMatchers.length-1;0<=a;a--)if(l.priority<=this._linkMatchers[a].priority)return void this._linkMatchers.splice(a+1,0,l);this._linkMatchers.splice(0,0,l)}else this._linkMatchers.push(l)},u.prototype.deregisterLinkMatcher=function(l){for(var a=0;a<this._linkMatchers.length;a++)if(this._linkMatchers[a].id===l)return this._linkMatchers.splice(a,1),!0;return!1},u.prototype._doLinkifyRow=function(l,a,h){function p(){var m=d[typeof h.matchIndex!="number"?0:h.matchIndex];if(!m)return g._logService.debug("match found without corresponding matchIndex",d,h),"break";if(_=a.indexOf(m,_+1),y.lastIndex=_+m.length,0>_)return"break";var f=g._bufferService.buffer.stringIndexToBufferIndex(l,_);if(0>f[0])return"break";var v=g._bufferService.buffer.lines.get(f[0]);if(!v)return"break";var Z=(v=v.getFg(f[1]))?v>>9&511:void 0;h.validationCallback?h.validationCallback(m,function(b){c._rowsTimeoutId||b&&c._addLink(f[1],f[0]-c._bufferService.buffer.ydisp,m,h,Z)}):g._addLink(f[1],f[0]-g._bufferService.buffer.ydisp,m,h,Z)}for(var d,c=this,y=new RegExp(h.regex.source,(h.regex.flags||"")+"g"),_=-1,g=this;(d=y.exec(a))!==null&&p()!=="break";);},u.prototype._addLink=function(l,a,h,p,d){var c=this;if(this._mouseZoneManager&&this._element){var y=o.getStringCellWidth(h),_=l%this._bufferService.cols,g=a+Math.floor(l/this._bufferService.cols),m=(_+y)%this._bufferService.cols,f=g+Math.floor((_+y)/this._bufferService.cols);m===0&&(m=this._bufferService.cols,f--),this._mouseZoneManager.add(new n(_+1,g+1,m+1,f+1,function(v){if(p.handler)return p.handler(v,h);window.open(h,"_blank")},function(){c._onLinkHover.fire(c._createLinkHoverEvent(_,g,m,f,d)),c._element.classList.add("xterm-cursor-pointer")},function(v){c._onLinkTooltip.fire(c._createLinkHoverEvent(_,g,m,f,d)),p.hoverTooltipCallback&&p.hoverTooltipCallback(v,h,{start:{x:_,y:g},end:{x:m,y:f}})},function(){c._onLinkLeave.fire(c._createLinkHoverEvent(_,g,m,f,d)),c._element.classList.remove("xterm-cursor-pointer"),p.hoverLeaveCallback&&p.hoverLeaveCallback()},function(v){return!p.willLinkActivate||p.willLinkActivate(v,h)}))}},u.prototype._createLinkHoverEvent=function(l,a,h,p,d){return{x1:l,y1:a,x2:h,y2:p,cols:this._bufferService.cols,fg:d}},u._timeBeforeLatency=200,u}(),i.Linkifier=t,i.MouseZone=n},function(t,i,r){var n=this&&this.__decorate||function(_,g,m,f){var v,Z=arguments.length,b=3>Z?g:f===null?f=Object.getOwnPropertyDescriptor(g,m):f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(_,g,m,f);else for(var G=_.length-1;0<=G;G--)(v=_[G])&&(b=(3>Z?v(b):3<Z?v(g,m,b):v(g,m))||b);return 3<Z&&b&&Object.defineProperty(g,m,b),b},o=this&&this.__param||function(_,g){return function(m,f){g(m,f,_)}};Object.defineProperty(i,"__esModule",{value:!0});var s=r(11),u=r(52),l=r(5),a=r(1),h=r(4),p=r(0),d=r(29),c=r(53);t=String.fromCharCode(160);var y=new RegExp(t,"g");t=function(){function _(g,m,f,v,Z,b,G,S){var C=this;this._scrollLines=g,this._element=m,this._screenElement=f,this._charSizeService=v,this._bufferService=Z,this._coreService=b,this._mouseService=G,this._optionsService=S,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new l.CellData,this._mouseDownTimeStamp=0,this._onLinuxMouseSelection=new a.EventEmitter,this._onRedrawRequest=new a.EventEmitter,this._onSelectionChange=new a.EventEmitter,this._mouseMoveListener=function(R){return C._onMouseMove(R)},this._mouseUpListener=function(R){return C._onMouseUp(R)},this._coreService.onUserInput(function(){C.hasSelection&&C.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(function(R){return C._onTrim(R)}),this._bufferService.buffers.onBufferActivate(function(R){return C._onBufferActivate(R)}),this.enable(),this._model=new u.SelectionModel(this._bufferService),this._activeSelectionMode=0}return Object.defineProperty(_.prototype,"onLinuxMouseSelection",{get:function(){return this._onLinuxMouseSelection.event},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"onRedrawRequest",{get:function(){return this._onRedrawRequest.event},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"onSelectionChange",{get:function(){return this._onSelectionChange.event},enumerable:!0,configurable:!0}),_.prototype.dispose=function(){this._removeMouseDownListeners()},_.prototype.reset=function(){this.clearSelection()},_.prototype.disable=function(){this.clearSelection(),this._enabled=!1},_.prototype.enable=function(){this._enabled=!0},Object.defineProperty(_.prototype,"selectionStart",{get:function(){return this._model.finalSelectionStart},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"selectionEnd",{get:function(){return this._model.finalSelectionEnd},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"hasSelection",{get:function(){var g=this._model.finalSelectionStart,m=this._model.finalSelectionEnd;return!(!g||!m)&&(g[0]!==m[0]||g[1]!==m[1])},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"selectionText",{get:function(){var g=this._model.finalSelectionStart,m=this._model.finalSelectionEnd;if(!g||!m)return"";var f=this._bufferService.buffer,v=[];if(this._activeSelectionMode===3){if(g[0]===m[0])return"";for(var Z=g[1];Z<=m[1];Z++){var b=f.translateBufferLineToString(Z,!0,g[0],m[0]);v.push(b)}}else{for(v.push(f.translateBufferLineToString(g[1],!0,g[0],g[1]===m[1]?m[0]:void 0)),Z=g[1]+1;Z<=m[1]-1;Z++){var G=f.lines.get(Z);b=f.translateBufferLineToString(Z,!0),G&&G.isWrapped?v[v.length-1]+=b:v.push(b)}g[1]!==m[1]&&(G=f.lines.get(m[1]),b=f.translateBufferLineToString(m[1],!0,0,m[0]),G&&G.isWrapped?v[v.length-1]+=b:v.push(b))}return v.map(function(S){return S.replace(y," ")}).join(s.isWindows?`\r
`:`
`)},enumerable:!0,configurable:!0}),_.prototype.clearSelection=function(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()},_.prototype.refresh=function(g){var m=this;this._refreshAnimationFrame||(this._refreshAnimationFrame=window.requestAnimationFrame(function(){return m._refresh()})),s.isLinux&&g&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)},_.prototype._refresh=function(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})},_.prototype.isClickInSelection=function(g){g=this._getMouseBufferCoords(g);var m=this._model.finalSelectionStart,f=this._model.finalSelectionEnd;return!!(m&&f&&g)&&this._areCoordsInSelection(g,m,f)},_.prototype._areCoordsInSelection=function(g,m,f){return g[1]>m[1]&&g[1]<f[1]||m[1]===f[1]&&g[1]===m[1]&&g[0]>=m[0]&&g[0]<f[0]||m[1]<f[1]&&g[1]===f[1]&&g[0]<f[0]||m[1]<f[1]&&g[1]===m[1]&&g[0]>=m[0]},_.prototype.selectWordAtCursor=function(g){(g=this._getMouseBufferCoords(g))&&(this._selectWordAt(g,!1),this._model.selectionEnd=void 0,this.refresh(!0))},_.prototype.selectAll=function(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()},_.prototype.selectLines=function(g,m){this._model.clearSelection(),g=Math.max(g,0),m=Math.min(m,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,g],this._model.selectionEnd=[this._bufferService.cols,m],this.refresh(),this._onSelectionChange.fire()},_.prototype._onTrim=function(g){this._model.onTrim(g)&&this.refresh()},_.prototype._getMouseBufferCoords=function(g){if(g=this._mouseService.getCoords(g,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0))return g[0]--,g[1]--,g[1]+=this._bufferService.buffer.ydisp,g},_.prototype._getMouseEventScrollAmount=function(g){g=d.getCoordsRelativeToElement(g,this._screenElement)[1];var m=this._bufferService.rows*Math.ceil(this._charSizeService.height*this._optionsService.options.lineHeight);return 0<=g&&g<=m?0:(g>m&&(g-=m),g=Math.min(Math.max(g,-50),50),(g/=50)/Math.abs(g)+Math.round(14*g))},_.prototype.shouldForceSelection=function(g){return s.isMac?g.altKey&&this._optionsService.options.macOptionClickForcesSelection:g.shiftKey},_.prototype.onMouseDown=function(g){if(this._mouseDownTimeStamp=g.timeStamp,(g.button!==2||!this.hasSelection)&&g.button===0){if(!this._enabled){if(!this.shouldForceSelection(g))return;g.stopPropagation()}g.preventDefault(),this._dragScrollAmount=0,this._enabled&&g.shiftKey?this._onIncrementalClick(g):g.detail===1?this._onSingleClick(g):g.detail===2?this._onDoubleClick(g):g.detail===3&&this._onTripleClick(g),this._addMouseDownListeners(),this.refresh(!0)}},_.prototype._addMouseDownListeners=function(){var g=this;this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=window.setInterval(function(){return g._dragScroll()},50)},_.prototype._removeMouseDownListeners=function(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0},_.prototype._onIncrementalClick=function(g){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(g))},_.prototype._onSingleClick=function(g){this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(g)?3:0,this._model.selectionStart=this._getMouseBufferCoords(g),this._model.selectionStart&&(this._model.selectionEnd=void 0,(g=this._bufferService.buffer.lines.get(this._model.selectionStart[1]))&&g.length!==this._model.selectionStart[0]&&g.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++)},_.prototype._onDoubleClick=function(g){(g=this._getMouseBufferCoords(g))&&(this._activeSelectionMode=1,this._selectWordAt(g,!0))},_.prototype._onTripleClick=function(g){(g=this._getMouseBufferCoords(g))&&(this._activeSelectionMode=2,this._selectLineAt(g[1]))},_.prototype.shouldColumnSelect=function(g){return g.altKey&&!(s.isMac&&this._optionsService.options.macOptionClickForcesSelection)},_.prototype._onMouseMove=function(g){if(g.stopImmediatePropagation(),this._model.selectionStart){var m=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;this._model.selectionEnd=this._getMouseBufferCoords(g),this._model.selectionEnd?(this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(g),this._activeSelectionMode!==3&&(0<this._dragScrollAmount?this._model.selectionEnd[0]=this._bufferService.cols:0>this._dragScrollAmount&&(this._model.selectionEnd[0]=0)),g=this._bufferService.buffer,this._model.selectionEnd[1]<g.lines.length&&(g=g.lines.get(this._model.selectionEnd[1]))&&g.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]++,m&&m[0]===this._model.selectionEnd[0]&&m[1]===this._model.selectionEnd[1]||this.refresh(!0)):this.refresh(!0)}},_.prototype._dragScroll=function(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._scrollLines(this._dragScrollAmount,!1);var g=this._bufferService.buffer;0<this._dragScrollAmount?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(g.ydisp+this._bufferService.rows,g.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=g.ydisp),this.refresh()}},_.prototype._onMouseUp=function(g){var m=g.timeStamp-this._mouseDownTimeStamp;this._removeMouseDownListeners(),1>=this.selectionText.length&&500>m?g.altKey&&this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp&&(g=this._mouseService.getCoords(g,this._element,this._bufferService.cols,this._bufferService.rows,!1))&&g[0]!==void 0&&g[1]!==void 0&&(g=c.moveToCellSequence(g[0]-1,g[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys),this._coreService.triggerDataEvent(g,!0)):this.hasSelection&&this._onSelectionChange.fire()},_.prototype._onBufferActivate=function(g){var m=this;this.clearSelection(),this._trimListener.dispose(),this._trimListener=g.activeBuffer.lines.onTrim(function(f){return m._onTrim(f)})},_.prototype._convertViewportColToCharacterIndex=function(g,m){for(var f=m[0],v=0;m[0]>=v;v++){var Z=g.loadCell(v,this._workCell).getChars().length;this._workCell.getWidth()===0?f--:1<Z&&m[0]!==v&&(f+=Z-1)}return f},_.prototype.setSelection=function(g,m,f){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[g,m],this._model.selectionStartLength=f,this.refresh()},_.prototype._getWordAt=function(g,m,f,v){if(f===void 0&&(f=!0),v===void 0&&(v=!0),!(g[0]>=this._bufferService.cols)){var Z=this._bufferService.buffer,b=Z.lines.get(g[1]);if(b){var G=Z.translateBufferLineToString(g[1],!1),S=this._convertViewportColToCharacterIndex(b,g),C=S,R=g[0]-S,Y=0,I=0,w=0,F=0;if(G.charAt(S)===" "){for(;0<S&&G.charAt(S-1)===" ";)S--;for(;C<G.length&&G.charAt(C+1)===" ";)C++}else{var E=g[0],N=g[0];b.getWidth(E)===0&&(Y++,E--),b.getWidth(N)===2&&(I++,N++);var L=b.getString(N).length;for(1<L&&(F+=L-1,C+=L-1);0<E&&0<S&&!this._isCharWordSeparator(b.loadCell(E-1,this._workCell));)b.loadCell(E-1,this._workCell),L=this._workCell.getChars().length,this._workCell.getWidth()===0?(Y++,E--):1<L&&(w+=L-1,S-=L-1),S--,E--;for(;N<b.length&&C+1<G.length&&!this._isCharWordSeparator(b.loadCell(N+1,this._workCell));)b.loadCell(N+1,this._workCell),E=this._workCell.getChars().length,this._workCell.getWidth()===2?(I++,N++):1<E&&(F+=E-1,C+=E-1),C++,N++}if(C++,R=S+R-Y+w,Y=Math.min(this._bufferService.cols,C-S+Y+I-w-F),m||G.slice(S,C).trim()!=="")return f&&R===0&&b.getCodePoint(0)!==32&&(m=Z.lines.get(g[1]-1))&&b.isWrapped&&m.getCodePoint(this._bufferService.cols-1)!==32&&(m=this._getWordAt([this._bufferService.cols-1,g[1]-1],!1,!0,!1))&&(m=this._bufferService.cols-m.start,R-=m,Y+=m),v&&R+Y===this._bufferService.cols&&b.getCodePoint(this._bufferService.cols-1)!==32&&(v=Z.lines.get(g[1]+1))&&v.isWrapped&&v.getCodePoint(0)!==32&&(g=this._getWordAt([0,g[1]+1],!1,!1,!0))&&(Y+=g.length),{start:R,length:Y}}}},_.prototype._selectWordAt=function(g,m){if(m=this._getWordAt(g,m)){for(;0>m.start;)m.start+=this._bufferService.cols,g[1]--;this._model.selectionStart=[m.start,g[1]],this._model.selectionStartLength=m.length}},_.prototype._selectToWordAt=function(g){var m=this._getWordAt(g,!0);if(m){for(g=g[1];0>m.start;)m.start+=this._bufferService.cols,g--;if(!this._model.areSelectionValuesReversed())for(;m.start+m.length>this._bufferService.cols;)m.length-=this._bufferService.cols,g++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?m.start:m.start+m.length,g]}},_.prototype._isCharWordSeparator=function(g){return g.getWidth()!==0&&0<=this._optionsService.options.wordSeparator.indexOf(g.getChars())},_.prototype._selectLineAt=function(g){g=this._bufferService.buffer.getWrappedRangeForLine(g),this._model.selectionStart=[0,g.first],this._model.selectionEnd=[this._bufferService.cols,g.last],this._model.selectionStartLength=0},_=n([o(3,h.ICharSizeService),o(4,p.IBufferService),o(5,p.ICoreService),o(6,h.IMouseService),o(7,p.IOptionsService)],_)}(),i.SelectionService=t},function(t,i){Object.defineProperty(i,"__esModule",{value:!0}),t=function(){function r(n){this._bufferService=n,this.isSelectAllActive=!1,this.selectionStartLength=0}return r.prototype.clearSelection=function(){this.selectionEnd=this.selectionStart=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0},Object.defineProperty(r.prototype,"finalSelectionStart",{get:function(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"finalSelectionEnd",{get:function(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){var n=this.selectionStart[0]+this.selectionStartLength;return n>this._bufferService.cols?[n%this._bufferService.cols,this.selectionStart[1]+Math.floor(n/this._bufferService.cols)]:[n,this.selectionStart[1]]}return this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]?[Math.max(this.selectionStart[0]+this.selectionStartLength,this.selectionEnd[0]),this.selectionEnd[1]]:this.selectionEnd}},enumerable:!0,configurable:!0}),r.prototype.areSelectionValuesReversed=function(){var n=this.selectionStart,o=this.selectionEnd;return!(!n||!o)&&(n[1]>o[1]||n[1]===o[1]&&n[0]>o[0])},r.prototype.onTrim=function(n){return this.selectionStart&&(this.selectionStart[1]-=n),this.selectionEnd&&(this.selectionEnd[1]-=n),this.selectionEnd&&0>this.selectionEnd[1]?(this.clearSelection(),!0):(this.selectionStart&&0>this.selectionStart[1]&&(this.selectionStart[1]=0),!1)},r}(),i.SelectionModel=t},function(t,i,r){function n(p,d,c,y){var _=p-o(c,p),g=d-o(c,d);_=Math.abs(_-g),g=0;for(var m=p-o(c,p),f=d-o(c,d),v=0;v<Math.abs(m-f);v++){var Z=c.buffer.lines.get(m+((p>d?"A":"B")=="A"?-1:1)*v);Z&&Z.isWrapped&&g++}return a(_-g,l(p>d?"A":"B",y))}function o(p,d){for(var c=0,y=p.buffer.lines.get(d),_=y&&y.isWrapped;_&&0<=d&&d<p.rows;)c++,_=(y=p.buffer.lines.get(--d))&&y.isWrapped;return c}function s(p,d,c,y,_,g){var m;return m=0<n(c,y,_,g).length?y-o(_,y):d,p<c&&m<=y||p>=c&&m<y?"C":"D"}function u(p,d,c,y,_,g){for(var m=p,f="";m!==c||d!==y;)m+=_?1:-1,_&&m>g.cols-1?(f+=g.buffer.translateBufferLineToString(d,!1,p,m),m=0,p=0,d++):!_&&0>m&&(f+=g.buffer.translateBufferLineToString(d,!1,0,p+1),p=m=g.cols-1,d--);return f+g.buffer.translateBufferLineToString(d,!1,p,m)}function l(p,d){return h.C0.ESC+(d?"O":"[")+p}function a(p,d){p=Math.floor(p);for(var c="",y=0;y<p;y++)c+=d;return c}Object.defineProperty(i,"__esModule",{value:!0});var h=r(12);i.moveToCellSequence=function(p,d,c,y){var _=c.buffer.x,g=c.buffer.y;return c.buffer.hasScrollback?function(m,f,v,Z,b,G){return f=s(m,f,v,Z,b,G),a(Math.abs(m-v),l(f,G))}(_,g,p,d,c,y):function(m,f,v,Z,b,G){return n(f,Z,b,G).length===0?"":a(u(m,f,m,f-o(b,f),!1,b).length,l("D",G))}(_,g,0,d,c,y)+n(g,d,c,y)+function(m,f,v,Z,b,G){var S=0<n(f,Z,b,G).length?Z-o(b,Z):f;return f=s(m,f,v,Z,b,G),a(u(m,S,v,Z,f==="C",b).length,l(f,G))}(_,g,p,d,c,y)}},function(t,i,r){var n=this&&this.__decorate||function(u,l,a,h){var p,d=arguments.length,c=3>d?l:h===null?h=Object.getOwnPropertyDescriptor(l,a):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(u,l,a,h);else for(var y=u.length-1;0<=y;y--)(p=u[y])&&(c=(3>d?p(c):3<d?p(l,a,c):p(l,a))||c);return 3<d&&c&&Object.defineProperty(l,a,c),c},o=this&&this.__param||function(u,l){return function(a,h){l(a,h,u)}};Object.defineProperty(i,"__esModule",{value:!0});var s=r(0);t=function(){function u(l){this._optionsService=l}return Object.defineProperty(u,"audioContext",{get:function(){if(!u._audioContext){var l=window.AudioContext||window.webkitAudioContext;if(!l)return console.warn("Web Audio API is not supported by this browser. Consider upgrading to the latest version"),null;u._audioContext=new l}return u._audioContext},enumerable:!0,configurable:!0}),u.prototype.playBellSound=function(){var l=u.audioContext;if(l){var a=l.createBufferSource();l.decodeAudioData(this._base64ToArrayBuffer(this._removeMimeType(this._optionsService.options.bellSound)),function(h){a.buffer=h,a.connect(l.destination),a.start(0)})}},u.prototype._base64ToArrayBuffer=function(l){l=window.atob(l);for(var a=l.length,h=new Uint8Array(a),p=0;p<a;p++)h[p]=l.charCodeAt(p);return h.buffer},u.prototype._removeMimeType=function(l){return l.split(",")[1]},u=n([o(0,s.IOptionsService)],u)}(),i.SoundService=t},function(t,i,r){var n,o=this&&this.__extends||(n=function(p,d){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,y){c.__proto__=y}||function(c,y){for(var _ in y)y.hasOwnProperty(_)&&(c[_]=y[_])})(p,d)},function(p,d){function c(){this.constructor=p}n(p,d),p.prototype=d===null?Object.create(d):(c.prototype=d.prototype,new c)}),s=this&&this.__decorate||function(p,d,c,y){var _,g=arguments.length,m=3>g?d:y===null?y=Object.getOwnPropertyDescriptor(d,c):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(p,d,c,y);else for(var f=p.length-1;0<=f;f--)(_=p[f])&&(m=(3>g?_(m):3<g?_(d,c,m):_(d,c))||m);return 3<g&&m&&Object.defineProperty(d,c,m),m},u=this&&this.__param||function(p,d){return function(c,y){d(c,y,p)}};Object.defineProperty(i,"__esModule",{value:!0}),t=r(2);var l=r(7),a=r(4),h=r(0);r=function(p){function d(c,y,_,g,m){var f=p.call(this)||this;return f._element=c,f._screenElement=y,f._bufferService=_,f._mouseService=g,f._selectionService=m,f._zones=[],f._areZonesActive=!1,f._lastHoverCoords=[void 0,void 0],f._initialSelectionLength=0,f.register(l.addDisposableDomListener(f._element,"mousedown",function(v){return f._onMouseDown(v)})),f._mouseMoveListener=function(v){return f._onMouseMove(v)},f._mouseLeaveListener=function(v){return f._onMouseLeave(v)},f._clickListener=function(v){return f._onClick(v)},f}return o(d,p),d.prototype.dispose=function(){p.prototype.dispose.call(this),this._deactivate()},d.prototype.add=function(c){this._zones.push(c),this._zones.length===1&&this._activate()},d.prototype.clearAll=function(c,y){if(this._zones.length!==0){c&&y||(c=0,y=this._bufferService.rows-1);for(var _=0;_<this._zones.length;_++){var g=this._zones[_];(g.y1>c&&g.y1<=y+1||g.y2>c&&g.y2<=y+1||g.y1<c&&g.y2>y+1)&&(this._currentZone&&this._currentZone===g&&(this._currentZone.leaveCallback(),this._currentZone=void 0),this._zones.splice(_--,1))}this._zones.length===0&&this._deactivate()}},d.prototype._activate=function(){this._areZonesActive||(this._areZonesActive=!0,this._element.addEventListener("mousemove",this._mouseMoveListener),this._element.addEventListener("mouseleave",this._mouseLeaveListener),this._element.addEventListener("click",this._clickListener))},d.prototype._deactivate=function(){this._areZonesActive&&(this._areZonesActive=!1,this._element.removeEventListener("mousemove",this._mouseMoveListener),this._element.removeEventListener("mouseleave",this._mouseLeaveListener),this._element.removeEventListener("click",this._clickListener))},d.prototype._onMouseMove=function(c){this._lastHoverCoords[0]===c.pageX&&this._lastHoverCoords[1]===c.pageY||(this._onHover(c),this._lastHoverCoords=[c.pageX,c.pageY])},d.prototype._onHover=function(c){var y=this,_=this._findZoneEventAt(c);_!==this._currentZone&&(this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=void 0,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout)),_&&(this._currentZone=_,_.hoverCallback&&_.hoverCallback(c),this._tooltipTimeout=setTimeout(function(){return y._onTooltip(c)},500)))},d.prototype._onTooltip=function(c){this._tooltipTimeout=void 0;var y=this._findZoneEventAt(c);y&&y.tooltipCallback&&y.tooltipCallback(c)},d.prototype._onMouseDown=function(c){var y;this._initialSelectionLength=this._getSelectionLength(),this._areZonesActive&&(!((y=this._findZoneEventAt(c))===null||y===void 0)&&y.willLinkActivate(c))&&(c.preventDefault(),c.stopImmediatePropagation())},d.prototype._onMouseLeave=function(){this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=void 0,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout))},d.prototype._onClick=function(c){var y=this._findZoneEventAt(c),_=this._getSelectionLength();y&&_===this._initialSelectionLength&&(y.clickCallback(c),c.preventDefault(),c.stopImmediatePropagation())},d.prototype._getSelectionLength=function(){var c=this._selectionService.selectionText;return c?c.length:0},d.prototype._findZoneEventAt=function(c){var y=this._mouseService.getCoords(c,this._screenElement,this._bufferService.cols,this._bufferService.rows);if(y){c=y[0],y=y[1];for(var _=0;_<this._zones.length;_++){var g=this._zones[_];if(g.y1===g.y2){if(y===g.y1&&c>=g.x1&&c<g.x2)return g}else if(y===g.y1&&c>=g.x1||y===g.y2&&c<g.x2||y>g.y1&&y<g.y2)return g}}},d=s([u(2,h.IBufferService),u(3,a.IMouseService),u(4,a.ISelectionService)],d)}(t.Disposable),i.MouseZoneManager=r},function(t,i,r){var n,o=this&&this.__extends||(n=function(p,d){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,y){c.__proto__=y}||function(c,y){for(var _ in y)y.hasOwnProperty(_)&&(c[_]=y[_])})(p,d)},function(p,d){function c(){this.constructor=p}n(p,d),p.prototype=d===null?Object.create(d):(c.prototype=d.prototype,new c)});Object.defineProperty(i,"__esModule",{value:!0});var s=r(17),u=r(11),l=r(30),a=r(7);t=r(2);var h=r(31);r=function(p){function d(c,y){var _=p.call(this)||this;for(_._terminal=c,_._renderService=y,_._liveRegionLineCount=0,_._charsToConsume=[],_._charsToAnnounce="",_._accessibilityTreeRoot=document.createElement("div"),_._accessibilityTreeRoot.classList.add("xterm-accessibility"),_._rowContainer=document.createElement("div"),_._rowContainer.classList.add("xterm-accessibility-tree"),_._rowElements=[],c=0;c<_._terminal.rows;c++)_._rowElements[c]=_._createAccessibilityTreeNode(),_._rowContainer.appendChild(_._rowElements[c]);return _._topBoundaryFocusListener=function(g){return _._onBoundaryFocus(g,0)},_._bottomBoundaryFocusListener=function(g){return _._onBoundaryFocus(g,1)},_._rowElements[0].addEventListener("focus",_._topBoundaryFocusListener),_._rowElements[_._rowElements.length-1].addEventListener("focus",_._bottomBoundaryFocusListener),_._refreshRowsDimensions(),_._accessibilityTreeRoot.appendChild(_._rowContainer),_._renderRowsDebouncer=new l.RenderDebouncer(_._renderRows.bind(_)),_._refreshRows(),_._liveRegion=document.createElement("div"),_._liveRegion.classList.add("live-region"),_._liveRegion.setAttribute("aria-live","assertive"),_._accessibilityTreeRoot.appendChild(_._liveRegion),_._terminal.element.insertAdjacentElement("afterbegin",_._accessibilityTreeRoot),_.register(_._renderRowsDebouncer),_.register(_._terminal.onResize(function(g){return _._onResize(g.rows)})),_.register(_._terminal.onRender(function(g){return _._refreshRows(g.start,g.end)})),_.register(_._terminal.onScroll(function(){return _._refreshRows()})),_.register(_._terminal.onA11yChar(function(g){return _._onChar(g)})),_.register(_._terminal.onLineFeed(function(){return _._onChar(`
`)})),_.register(_._terminal.onA11yTab(function(g){return _._onTab(g)})),_.register(_._terminal.onKey(function(g){return _._onKey(g.key)})),_.register(_._terminal.onBlur(function(){return _._clearLiveRegion()})),_.register(_._renderService.onDimensionsChange(function(){return _._refreshRowsDimensions()})),_._screenDprMonitor=new h.ScreenDprMonitor,_.register(_._screenDprMonitor),_._screenDprMonitor.setListener(function(){return _._refreshRowsDimensions()}),_.register(a.addDisposableDomListener(window,"resize",function(){return _._refreshRowsDimensions()})),_}return o(d,p),d.prototype.dispose=function(){p.prototype.dispose.call(this),this._terminal.element.removeChild(this._accessibilityTreeRoot),this._rowElements.length=0},d.prototype._onBoundaryFocus=function(c,y){var _=c.target,g=this._rowElements[y===0?1:this._rowElements.length-2];if(_.getAttribute("aria-posinset")!==(y===0?"1":""+this._terminal.buffer.lines.length)&&c.relatedTarget===g){var m,f;y===0?(m=_,f=this._rowElements.pop(),this._rowContainer.removeChild(f)):(m=this._rowElements.shift(),f=_,this._rowContainer.removeChild(m)),m.removeEventListener("focus",this._topBoundaryFocusListener),f.removeEventListener("focus",this._bottomBoundaryFocusListener),y===0?(_=this._createAccessibilityTreeNode(),this._rowElements.unshift(_),this._rowContainer.insertAdjacentElement("afterbegin",_)):(_=this._createAccessibilityTreeNode(),this._rowElements.push(_),this._rowContainer.appendChild(_)),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(y===0?-1:1),this._rowElements[y===0?1:this._rowElements.length-2].focus(),c.preventDefault(),c.stopImmediatePropagation()}},d.prototype._onResize=function(c){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(var y=this._rowContainer.children.length;y<this._terminal.rows;y++)this._rowElements[y]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[y]);for(;this._rowElements.length>c;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()},d.prototype._createAccessibilityTreeNode=function(){var c=document.createElement("div");return c.setAttribute("role","listitem"),c.tabIndex=-1,this._refreshRowDimensions(c),c},d.prototype._onTab=function(c){for(var y=0;y<c;y++)this._onChar(" ")},d.prototype._onChar=function(c){var y=this;21>this._liveRegionLineCount&&(0<this._charsToConsume.length?this._charsToConsume.shift()!==c&&(this._charsToAnnounce+=c):this._charsToAnnounce+=c,c===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=s.tooMuchOutput)),u.isMac&&this._liveRegion.textContent&&0<this._liveRegion.textContent.length&&!this._liveRegion.parentNode&&setTimeout(function(){y._accessibilityTreeRoot.appendChild(y._liveRegion)},0))},d.prototype._clearLiveRegion=function(){this._liveRegion.textContent="",this._liveRegionLineCount=0,u.isMac&&this._liveRegion.parentNode&&this._accessibilityTreeRoot.removeChild(this._liveRegion)},d.prototype._onKey=function(c){this._clearLiveRegion(),this._charsToConsume.push(c)},d.prototype._refreshRows=function(c,y){this._renderRowsDebouncer.refresh(c,y,this._terminal.rows)},d.prototype._renderRows=function(c,y){for(var _=this._terminal.buffer,g=_.lines.length.toString();c<=y;c++){var m=_.translateBufferLineToString(_.ydisp+c,!0),f=(_.ydisp+c+1).toString(),v=this._rowElements[c];v&&(m.length===0?v.innerHTML="&nbsp;":v.textContent=m,v.setAttribute("aria-posinset",f),v.setAttribute("aria-setsize",g))}this._announceCharacters()},d.prototype._refreshRowsDimensions=function(){if(this._renderService.dimensions.actualCellHeight){this._rowElements.length!==this._terminal.rows&&this._onResize(this._terminal.rows);for(var c=0;c<this._terminal.rows;c++)this._refreshRowDimensions(this._rowElements[c])}},d.prototype._refreshRowDimensions=function(c){c.style.height=this._renderService.dimensions.actualCellHeight+"px"},d.prototype._announceCharacters=function(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")},d}(t.Disposable),i.AccessibilityManager=r},function(t,i,r){var n,o=this&&this.__extends||(n=function(_,g){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,f){m.__proto__=f}||function(m,f){for(var v in f)f.hasOwnProperty(v)&&(m[v]=f[v])})(_,g)},function(_,g){function m(){this.constructor=_}n(_,g),_.prototype=g===null?Object.create(g):(m.prototype=g.prototype,new m)}),s=this&&this.__decorate||function(_,g,m,f){var v,Z=arguments.length,b=3>Z?g:f===null?f=Object.getOwnPropertyDescriptor(g,m):f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(_,g,m,f);else for(var G=_.length-1;0<=G;G--)(v=_[G])&&(b=(3>Z?v(b):3<Z?v(g,m,b):v(g,m))||b);return 3<Z&&b&&Object.defineProperty(g,m,b),b},u=this&&this.__param||function(_,g){return function(m,f){g(m,f,_)}};Object.defineProperty(i,"__esModule",{value:!0});var l=r(58),a=r(9);t=r(2);var h=r(4),p=r(0),d=r(1),c=r(10),y=1;r=function(_){function g(m,f,v,Z,b,G,S,C){var R=_.call(this)||this;return R._colors=m,R._element=f,R._screenElement=v,R._viewportElement=Z,R._linkifier=b,R._charSizeService=G,R._optionsService=S,R._bufferService=C,R._terminalClass=y++,R._rowElements=[],R._onRequestRefreshRows=new d.EventEmitter,R._rowContainer=document.createElement("div"),R._rowContainer.classList.add("xterm-rows"),R._rowContainer.style.lineHeight="normal",R._rowContainer.setAttribute("aria-hidden","true"),R._refreshRowElements(R._bufferService.cols,R._bufferService.rows),R._selectionContainer=document.createElement("div"),R._selectionContainer.classList.add("xterm-selection"),R._selectionContainer.setAttribute("aria-hidden","true"),R.dimensions={scaledCharWidth:0,scaledCharHeight:0,scaledCellWidth:0,scaledCellHeight:0,scaledCharLeft:0,scaledCharTop:0,scaledCanvasWidth:0,scaledCanvasHeight:0,canvasWidth:0,canvasHeight:0,actualCellWidth:0,actualCellHeight:0},R._updateDimensions(),R._injectCss(),R._rowFactory=new l.DomRendererRowFactory(document,R._optionsService,R._colors),R._element.classList.add("xterm-dom-renderer-owner-"+R._terminalClass),R._screenElement.appendChild(R._rowContainer),R._screenElement.appendChild(R._selectionContainer),R._linkifier.onLinkHover(function(Y){return R._onLinkHover(Y)}),R._linkifier.onLinkLeave(function(Y){return R._onLinkLeave(Y)}),R}return o(g,_),Object.defineProperty(g.prototype,"onRequestRefreshRows",{get:function(){return this._onRequestRefreshRows.event},enumerable:!0,configurable:!0}),g.prototype.dispose=function(){this._element.classList.remove("xterm-dom-renderer-owner-"+this._terminalClass),this._screenElement.removeChild(this._rowContainer),this._screenElement.removeChild(this._selectionContainer),this._screenElement.removeChild(this._themeStyleElement),this._screenElement.removeChild(this._dimensionsStyleElement),_.prototype.dispose.call(this)},g.prototype._updateDimensions=function(){var m=this;this.dimensions.scaledCharWidth=this._charSizeService.width*window.devicePixelRatio,this.dimensions.scaledCharHeight=Math.ceil(this._charSizeService.height*window.devicePixelRatio),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this._optionsService.options.letterSpacing),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this._optionsService.options.lineHeight),this.dimensions.scaledCharLeft=0,this.dimensions.scaledCharTop=0,this.dimensions.scaledCanvasWidth=this.dimensions.scaledCellWidth*this._bufferService.cols,this.dimensions.scaledCanvasHeight=this.dimensions.scaledCellHeight*this._bufferService.rows,this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._bufferService.cols,this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._bufferService.rows,this._rowElements.forEach(function(f){f.style.width=m.dimensions.canvasWidth+"px",f.style.height=m.dimensions.actualCellHeight+"px",f.style.lineHeight=m.dimensions.actualCellHeight+"px",f.style.overflow="hidden"}),this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement)),this._dimensionsStyleElement.innerHTML=this._terminalSelector+" .xterm-rows span { display: inline-block; height: 100%; vertical-align: top; width: "+this.dimensions.actualCellWidth+"px}",this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=this.dimensions.canvasWidth+"px",this._screenElement.style.height=this.dimensions.canvasHeight+"px"},g.prototype.setColors=function(m){this._colors=m,this._injectCss()},g.prototype._injectCss=function(){var m=this;this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));var f=this._terminalSelector+" .xterm-rows { color: "+this._colors.foreground.css+"; background-color: "+this._colors.background.css+"; font-family: "+this._optionsService.options.fontFamily+"; font-size: "+this._optionsService.options.fontSize+"px;}";f+=this._terminalSelector+" span:not(."+l.BOLD_CLASS+") { font-weight: "+this._optionsService.options.fontWeight+";}"+this._terminalSelector+" span."+l.BOLD_CLASS+" { font-weight: "+this._optionsService.options.fontWeightBold+";}"+this._terminalSelector+" span."+l.ITALIC_CLASS+" { font-style: italic;}",f+="@keyframes blink_box_shadow { 50% {  box-shadow: none; }}",f+="@keyframes blink_block { 0% {  background-color: "+this._colors.cursor.css+";  color: "+this._colors.cursorAccent.css+"; } 50% {  background-color: "+this._colors.cursorAccent.css+";  color: "+this._colors.cursor.css+"; }}",f+=this._terminalSelector+" .xterm-rows:not(.xterm-focus) ."+l.CURSOR_CLASS+"."+l.CURSOR_STYLE_BLOCK_CLASS+" { outline: 1px solid "+this._colors.cursor.css+"; outline-offset: -1px;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+l.CURSOR_CLASS+"."+l.CURSOR_BLINK_CLASS+":not(."+l.CURSOR_STYLE_BLOCK_CLASS+") { animation: blink_box_shadow 1s step-end infinite;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+l.CURSOR_CLASS+"."+l.CURSOR_BLINK_CLASS+"."+l.CURSOR_STYLE_BLOCK_CLASS+" { animation: blink_block 1s step-end infinite;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+l.CURSOR_CLASS+"."+l.CURSOR_STYLE_BLOCK_CLASS+" { background-color: "+this._colors.cursor.css+"; color: "+this._colors.cursorAccent.css+";}"+this._terminalSelector+" .xterm-rows ."+l.CURSOR_CLASS+"."+l.CURSOR_STYLE_BAR_CLASS+" { box-shadow: 1px 0 0 "+this._colors.cursor.css+" inset;}"+this._terminalSelector+" .xterm-rows ."+l.CURSOR_CLASS+"."+l.CURSOR_STYLE_UNDERLINE_CLASS+" { box-shadow: 0 -1px 0 "+this._colors.cursor.css+" inset;}",f+=this._terminalSelector+" .xterm-selection { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}"+this._terminalSelector+" .xterm-selection div { position: absolute; background-color: "+this._colors.selection.css+";}",this._colors.ansi.forEach(function(v,Z){f+=m._terminalSelector+" .xterm-fg-"+Z+" { color: "+v.css+"; }"+m._terminalSelector+" .xterm-bg-"+Z+" { background-color: "+v.css+"; }"}),f+=this._terminalSelector+" .xterm-fg-"+a.INVERTED_DEFAULT_COLOR+" { color: "+c.opaque(this._colors.background).css+"; }"+this._terminalSelector+" .xterm-bg-"+a.INVERTED_DEFAULT_COLOR+" { background-color: "+this._colors.foreground.css+"; }",this._themeStyleElement.innerHTML=f},g.prototype.onDevicePixelRatioChange=function(){this._updateDimensions()},g.prototype._refreshRowElements=function(m,f){for(m=this._rowElements.length;m<=f;m++){var v=document.createElement("div");this._rowContainer.appendChild(v),this._rowElements.push(v)}for(;this._rowElements.length>f;)this._rowContainer.removeChild(this._rowElements.pop())},g.prototype.onResize=function(m,f){this._refreshRowElements(m,f),this._updateDimensions()},g.prototype.onCharSizeChanged=function(){this._updateDimensions()},g.prototype.onBlur=function(){this._rowContainer.classList.remove("xterm-focus")},g.prototype.onFocus=function(){this._rowContainer.classList.add("xterm-focus")},g.prototype.onSelectionChanged=function(m,f,v){for(;this._selectionContainer.children.length;)this._selectionContainer.removeChild(this._selectionContainer.children[0]);if(m&&f){var Z=m[1]-this._bufferService.buffer.ydisp,b=f[1]-this._bufferService.buffer.ydisp,G=Math.max(Z,0),S=Math.min(b,this._bufferService.rows-1);if(!(G>=this._bufferService.rows||0>S)){var C=document.createDocumentFragment();v?C.appendChild(this._createSelectionElement(G,m[0],f[0],S-G+1)):(C.appendChild(this._createSelectionElement(G,Z===G?m[0]:0,G===S?f[0]:this._bufferService.cols)),C.appendChild(this._createSelectionElement(G+1,0,this._bufferService.cols,S-G-1)),G!==S&&C.appendChild(this._createSelectionElement(S,0,b===S?f[0]:this._bufferService.cols))),this._selectionContainer.appendChild(C)}}},g.prototype._createSelectionElement=function(m,f,v,Z){Z===void 0&&(Z=1);var b=document.createElement("div");return b.style.height=Z*this.dimensions.actualCellHeight+"px",b.style.top=m*this.dimensions.actualCellHeight+"px",b.style.left=f*this.dimensions.actualCellWidth+"px",b.style.width=this.dimensions.actualCellWidth*(v-f)+"px",b},g.prototype.onCursorMove=function(){},g.prototype.onOptionsChanged=function(){this._updateDimensions(),this._injectCss()},g.prototype.clear=function(){this._rowElements.forEach(function(m){return m.innerHTML=""})},g.prototype.renderRows=function(m,f){for(var v=this._bufferService.buffer.ybase+this._bufferService.buffer.y,Z=this._bufferService.buffer.x,b=this._optionsService.options.cursorBlink;m<=f;m++){var G=this._rowElements[m];G.innerHTML="";var S=m+this._bufferService.buffer.ydisp,C=this._bufferService.buffer.lines.get(S);G.appendChild(this._rowFactory.createRow(C,S===v,this._optionsService.options.cursorStyle,Z,b,this.dimensions.actualCellWidth,this._bufferService.cols))}},Object.defineProperty(g.prototype,"_terminalSelector",{get:function(){return".xterm-dom-renderer-owner-"+this._terminalClass},enumerable:!0,configurable:!0}),g.prototype.registerCharacterJoiner=function(){return-1},g.prototype.deregisterCharacterJoiner=function(){return!1},g.prototype._onLinkHover=function(m){this._setCellUnderline(m.x1,m.x2,m.y1,m.y2,m.cols,!0)},g.prototype._onLinkLeave=function(m){this._setCellUnderline(m.x1,m.x2,m.y1,m.y2,m.cols,!1)},g.prototype._setCellUnderline=function(m,f,v,Z,b,G){for(;m!==f||v!==Z;){var S=this._rowElements[v];if(!S)break;(S=S.children[m])&&(S.style.textDecoration=G?"underline":"none"),++m>=b&&(m=0,v++)}},g=s([u(5,h.ICharSizeService),u(6,p.IOptionsService),u(7,p.IBufferService)],g)}(t.Disposable),i.DomRenderer=r},function(t,i,r){function n(a,h,p){for(;a.length<p;)a=h+a;return a}Object.defineProperty(i,"__esModule",{value:!0});var o=r(9),s=r(3),u=r(5),l=r(10);i.BOLD_CLASS="xterm-bold",i.DIM_CLASS="xterm-dim",i.ITALIC_CLASS="xterm-italic",i.UNDERLINE_CLASS="xterm-underline",i.CURSOR_CLASS="xterm-cursor",i.CURSOR_BLINK_CLASS="xterm-cursor-blink",i.CURSOR_STYLE_BLOCK_CLASS="xterm-cursor-block",i.CURSOR_STYLE_BAR_CLASS="xterm-cursor-bar",i.CURSOR_STYLE_UNDERLINE_CLASS="xterm-cursor-underline",t=function(){function a(h,p,d){this._document=h,this._optionsService=p,this._colors=d,this._workCell=new u.CellData}return a.prototype.setColors=function(h){this._colors=h},a.prototype.createRow=function(h,p,d,c,y,_,g){var m=this._document.createDocumentFragment(),f=0;for(g=Math.min(h.length,g)-1;0<=g;g--)if(h.loadCell(g,this._workCell).getCode()!==s.NULL_CELL_CODE||p&&g===c){f=g+1;break}for(g=0;g<f;g++){h.loadCell(g,this._workCell);var v=this._workCell.getWidth();if(v!==0){var Z=this._document.createElement("span");if(1<v&&(Z.style.width=_*v+"px"),p&&g===c)switch(Z.classList.add(i.CURSOR_CLASS),y&&Z.classList.add(i.CURSOR_BLINK_CLASS),d){case"bar":Z.classList.add(i.CURSOR_STYLE_BAR_CLASS);break;case"underline":Z.classList.add(i.CURSOR_STYLE_UNDERLINE_CLASS);break;default:Z.classList.add(i.CURSOR_STYLE_BLOCK_CLASS)}this._workCell.isBold()&&Z.classList.add(i.BOLD_CLASS),this._workCell.isItalic()&&Z.classList.add(i.ITALIC_CLASS),this._workCell.isDim()&&Z.classList.add(i.DIM_CLASS),this._workCell.isUnderline()&&Z.classList.add(i.UNDERLINE_CLASS),Z.textContent=this._workCell.getChars()||s.WHITESPACE_CELL_CHAR,v=this._workCell.getFgColor();var b=this._workCell.getFgColorMode(),G=this._workCell.getBgColor(),S=this._workCell.getBgColorMode(),C=!!this._workCell.isInverse();if(C){var R=v;v=G,G=R,R=b,b=S,S=R}switch(b){case 16777216:case 33554432:this._workCell.isBold()&&8>v&&this._optionsService.options.drawBoldTextInBrightColors&&(v+=8),this._applyMinimumContrast(Z,this._colors.background,this._colors.ansi[v])||Z.classList.add("xterm-fg-"+v);break;case 50331648:b=l.rgbaToColor(v>>16&255,v>>8&255,255&v),this._applyMinimumContrast(Z,this._colors.background,b)||this._addStyle(Z,"color:#"+n(v.toString(16),"0",6));break;default:this._applyMinimumContrast(Z,this._colors.background,this._colors.foreground)||C&&Z.classList.add("xterm-fg-"+o.INVERTED_DEFAULT_COLOR)}switch(S){case 16777216:case 33554432:Z.classList.add("xterm-bg-"+G);break;case 50331648:this._addStyle(Z,"background-color:#"+n(G.toString(16),"0",6));break;default:C&&Z.classList.add("xterm-bg-"+o.INVERTED_DEFAULT_COLOR)}m.appendChild(Z)}}return m},a.prototype._applyMinimumContrast=function(h,p,d){if(this._optionsService.options.minimumContrastRatio===1)return!1;var c=this._colors.contrastCache.getColor(this._workCell.bg,this._workCell.fg);return c===void 0&&(c=l.ensureContrastRatio(p,d,this._optionsService.options.minimumContrastRatio),this._colors.contrastCache.setColor(this._workCell.bg,this._workCell.fg,c??null)),!!c&&(this._addStyle(h,"color:"+c.css),!0)},a.prototype._addStyle=function(h,p){h.setAttribute("style",""+(h.getAttribute("style")||"")+p+";")},a}(),i.DomRendererRowFactory=t},function(t,i,r){Object.defineProperty(i,"__esModule",{value:!0});var n=r(12),o={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};i.evaluateKeyboardEvent=function(s,u,l,a){var h={type:0,cancel:!1,key:void 0},p=(s.shiftKey?1:0)|(s.altKey?2:0)|(s.ctrlKey?4:0)|(s.metaKey?8:0);switch(s.keyCode){case 0:s.key==="UIKeyInputUpArrow"?h.key=u?n.C0.ESC+"OA":n.C0.ESC+"[A":s.key==="UIKeyInputLeftArrow"?h.key=u?n.C0.ESC+"OD":n.C0.ESC+"[D":s.key==="UIKeyInputRightArrow"?h.key=u?n.C0.ESC+"OC":n.C0.ESC+"[C":s.key==="UIKeyInputDownArrow"&&(h.key=u?n.C0.ESC+"OB":n.C0.ESC+"[B");break;case 8:if(s.shiftKey){h.key=n.C0.BS;break}if(s.altKey){h.key=n.C0.ESC+n.C0.DEL;break}h.key=n.C0.DEL;break;case 9:if(s.shiftKey){h.key=n.C0.ESC+"[Z";break}h.key=n.C0.HT,h.cancel=!0;break;case 13:h.key=n.C0.CR,h.cancel=!0;break;case 27:h.key=n.C0.ESC,h.cancel=!0;break;case 37:if(s.metaKey)break;p?(h.key=n.C0.ESC+"[1;"+(p+1)+"D",h.key===n.C0.ESC+"[1;3D"&&(h.key=n.C0.ESC+(l?"b":"[1;5D"))):h.key=u?n.C0.ESC+"OD":n.C0.ESC+"[D";break;case 39:if(s.metaKey)break;p?(h.key=n.C0.ESC+"[1;"+(p+1)+"C",h.key===n.C0.ESC+"[1;3C"&&(h.key=n.C0.ESC+(l?"f":"[1;5C"))):h.key=u?n.C0.ESC+"OC":n.C0.ESC+"[C";break;case 38:if(s.metaKey)break;p?(h.key=n.C0.ESC+"[1;"+(p+1)+"A",l||h.key!==n.C0.ESC+"[1;3A"||(h.key=n.C0.ESC+"[1;5A")):h.key=u?n.C0.ESC+"OA":n.C0.ESC+"[A";break;case 40:if(s.metaKey)break;p?(h.key=n.C0.ESC+"[1;"+(p+1)+"B",l||h.key!==n.C0.ESC+"[1;3B"||(h.key=n.C0.ESC+"[1;5B")):h.key=u?n.C0.ESC+"OB":n.C0.ESC+"[B";break;case 45:s.shiftKey||s.ctrlKey||(h.key=n.C0.ESC+"[2~");break;case 46:h.key=p?n.C0.ESC+"[3;"+(p+1)+"~":n.C0.ESC+"[3~";break;case 36:h.key=p?n.C0.ESC+"[1;"+(p+1)+"H":u?n.C0.ESC+"OH":n.C0.ESC+"[H";break;case 35:h.key=p?n.C0.ESC+"[1;"+(p+1)+"F":u?n.C0.ESC+"OF":n.C0.ESC+"[F";break;case 33:s.shiftKey?h.type=2:h.key=n.C0.ESC+"[5~";break;case 34:s.shiftKey?h.type=3:h.key=n.C0.ESC+"[6~";break;case 112:h.key=p?n.C0.ESC+"[1;"+(p+1)+"P":n.C0.ESC+"OP";break;case 113:h.key=p?n.C0.ESC+"[1;"+(p+1)+"Q":n.C0.ESC+"OQ";break;case 114:h.key=p?n.C0.ESC+"[1;"+(p+1)+"R":n.C0.ESC+"OR";break;case 115:h.key=p?n.C0.ESC+"[1;"+(p+1)+"S":n.C0.ESC+"OS";break;case 116:h.key=p?n.C0.ESC+"[15;"+(p+1)+"~":n.C0.ESC+"[15~";break;case 117:h.key=p?n.C0.ESC+"[17;"+(p+1)+"~":n.C0.ESC+"[17~";break;case 118:h.key=p?n.C0.ESC+"[18;"+(p+1)+"~":n.C0.ESC+"[18~";break;case 119:h.key=p?n.C0.ESC+"[19;"+(p+1)+"~":n.C0.ESC+"[19~";break;case 120:h.key=p?n.C0.ESC+"[20;"+(p+1)+"~":n.C0.ESC+"[20~";break;case 121:h.key=p?n.C0.ESC+"[21;"+(p+1)+"~":n.C0.ESC+"[21~";break;case 122:h.key=p?n.C0.ESC+"[23;"+(p+1)+"~":n.C0.ESC+"[23~";break;case 123:h.key=p?n.C0.ESC+"[24;"+(p+1)+"~":n.C0.ESC+"[24~";break;default:!s.ctrlKey||s.shiftKey||s.altKey||s.metaKey?l&&!a||!s.altKey||s.metaKey?l&&!s.altKey&&!s.ctrlKey&&s.metaKey?s.keyCode===65&&(h.type=1):s.key&&!s.ctrlKey&&!s.altKey&&!s.metaKey&&48<=s.keyCode&&s.key.length===1?h.key=s.key:s.key&&s.ctrlKey&&s.key==="_"&&(h.key=n.C0.US):(u=(u=o[s.keyCode])&&u[s.shiftKey?1:0])?h.key=n.C0.ESC+u:65<=s.keyCode&&90>=s.keyCode&&(h.key=n.C0.ESC+String.fromCharCode(s.ctrlKey?s.keyCode-64:s.keyCode+32)):65<=s.keyCode&&90>=s.keyCode?h.key=String.fromCharCode(s.keyCode-64):s.keyCode===32?h.key=n.C0.NUL:51<=s.keyCode&&55>=s.keyCode?h.key=String.fromCharCode(s.keyCode-51+27):s.keyCode===56?h.key=n.C0.DEL:s.keyCode===219?h.key=n.C0.ESC:s.keyCode===220?h.key=n.C0.FS:s.keyCode===221&&(h.key=n.C0.GS)}return h}},function(t,i,r){Object.defineProperty(i,"__esModule",{value:!0});var n=r(3);i.handleWindowsModeLineFeed=function(o){var s,u=(s=o.buffer.lines.get(o.buffer.ybase+o.buffer.y-1))===null||s===void 0?void 0:s.get(o.cols-1);(o=o.buffer.lines.get(o.buffer.ybase+o.buffer.y))&&u&&(o.isWrapped=u[n.CHAR_DATA_CODE_INDEX]!==n.NULL_CELL_CODE&&u[n.CHAR_DATA_CODE_INDEX]!==n.WHITESPACE_CELL_CODE)}},function(t,i,r){var n,o=this&&this.__extends||(n=function(y,_){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,m){g.__proto__=m}||function(g,m){for(var f in m)m.hasOwnProperty(f)&&(g[f]=m[f])})(y,_)},function(y,_){function g(){this.constructor=y}n(y,_),y.prototype=_===null?Object.create(_):(g.prototype=_.prototype,new g)}),s=this&&this.__decorate||function(y,_,g,m){var f,v=arguments.length,Z=3>v?_:m===null?m=Object.getOwnPropertyDescriptor(_,g):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Z=Reflect.decorate(y,_,g,m);else for(var b=y.length-1;0<=b;b--)(f=y[b])&&(Z=(3>v?f(Z):3<v?f(_,g,Z):f(_,g))||Z);return 3<v&&Z&&Object.defineProperty(_,g,Z),Z},u=this&&this.__param||function(y,_){return function(g,m){_(g,m,y)}};Object.defineProperty(i,"__esModule",{value:!0});var l=r(30),a=r(1);t=r(2);var h=r(31),p=r(7),d=r(0),c=r(4);r=function(y){function _(g,m,f,v,Z){var b=y.call(this)||this;if(b._renderer=g,b._rowCount=m,b.screenElement=f,b.optionsService=v,b.charSizeService=Z,b._isPaused=!1,b._needsFullRefresh=!1,b._canvasWidth=0,b._canvasHeight=0,b._onDimensionsChange=new a.EventEmitter,b._onRender=new a.EventEmitter,b._onRefreshRequest=new a.EventEmitter,b._renderDebouncer=new l.RenderDebouncer(function(S,C){return b._renderRows(S,C)}),b.register(b._renderDebouncer),b._screenDprMonitor=new h.ScreenDprMonitor,b._screenDprMonitor.setListener(function(){return b.onDevicePixelRatioChange()}),b.register(b._screenDprMonitor),b.register(v.onOptionChange(function(){return b._renderer.onOptionsChanged()})),b.register(Z.onCharSizeChange(function(){return b.onCharSizeChanged()})),b._renderer.onRequestRefreshRows(function(S){return b.refreshRows(S.start,S.end)}),b.register(p.addDisposableDomListener(window,"resize",function(){return b.onDevicePixelRatioChange()})),"IntersectionObserver"in window){var G=new IntersectionObserver(function(S){return b._onIntersectionChange(S[S.length-1])},{threshold:0});G.observe(f),b.register({dispose:function(){return G.disconnect()}})}return b}return o(_,y),Object.defineProperty(_.prototype,"onDimensionsChange",{get:function(){return this._onDimensionsChange.event},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"onRender",{get:function(){return this._onRender.event},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"onRefreshRequest",{get:function(){return this._onRefreshRequest.event},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"dimensions",{get:function(){return this._renderer.dimensions},enumerable:!0,configurable:!0}),_.prototype._onIntersectionChange=function(g){this._isPaused=g.intersectionRatio===0,!this._isPaused&&this._needsFullRefresh&&(this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)},_.prototype.refreshRows=function(g,m){this._isPaused?this._needsFullRefresh=!0:this._renderDebouncer.refresh(g,m,this._rowCount)},_.prototype._renderRows=function(g,m){this._renderer.renderRows(g,m),this._onRender.fire({start:g,end:m})},_.prototype.resize=function(g,m){this._rowCount=m,this._fireOnCanvasResize()},_.prototype.changeOptions=function(){this._renderer.onOptionsChanged(),this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize()},_.prototype._fireOnCanvasResize=function(){this._renderer.dimensions.canvasWidth===this._canvasWidth&&this._renderer.dimensions.canvasHeight===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.dimensions)},_.prototype.dispose=function(){this._renderer.dispose(),y.prototype.dispose.call(this)},_.prototype.setRenderer=function(g){var m=this;this._renderer.dispose(),this._renderer=g,this._renderer.onRequestRefreshRows(function(f){return m.refreshRows(f.start,f.end)}),this.refreshRows(0,this._rowCount-1)},_.prototype._fullRefresh=function(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)},_.prototype.setColors=function(g){this._renderer.setColors(g),this._fullRefresh()},_.prototype.onDevicePixelRatioChange=function(){this._renderer.onDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1)},_.prototype.onResize=function(g,m){this._renderer.onResize(g,m),this._fullRefresh()},_.prototype.onCharSizeChanged=function(){this._renderer.onCharSizeChanged()},_.prototype.onBlur=function(){this._renderer.onBlur()},_.prototype.onFocus=function(){this._renderer.onFocus()},_.prototype.onSelectionChanged=function(g,m,f){this._renderer.onSelectionChanged(g,m,f)},_.prototype.onCursorMove=function(){this._renderer.onCursorMove()},_.prototype.clear=function(){this._renderer.clear()},_.prototype.registerCharacterJoiner=function(g){return this._renderer.registerCharacterJoiner(g)},_.prototype.deregisterCharacterJoiner=function(g){return this._renderer.deregisterCharacterJoiner(g)},_=s([u(3,d.IOptionsService),u(4,c.ICharSizeService)],_)}(t.Disposable),i.RenderService=r},function(t,i,r){Object.defineProperty(i,"__esModule",{value:!0});var n=r(1);t=r(11);var o=r(32);i.DEFAULT_BELL_SOUND="data:audio/mp3;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjMyLjEwNAAAAAAAAAAAAAAA//tQxAADB8AhSmxhIIEVCSiJrDCQBTcu3UrAIwUdkRgQbFAZC1CQEwTJ9mjRvBA4UOLD8nKVOWfh+UlK3z/177OXrfOdKl7pyn3Xf//WreyTRUoAWgBgkOAGbZHBgG1OF6zM82DWbZaUmMBptgQhGjsyYqc9ae9XFz280948NMBWInljyzsNRFLPWdnZGWrddDsjK1unuSrVN9jJsK8KuQtQCtMBjCEtImISdNKJOopIpBFpNSMbIHCSRpRR5iakjTiyzLhchUUBwCgyKiweBv/7UsQbg8isVNoMPMjAAAA0gAAABEVFGmgqK////9bP/6XCykxBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq",i.DEFAULT_OPTIONS=Object.freeze({cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",bellSound:i.DEFAULT_BELL_SOUND,bellStyle:"none",drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",lineHeight:1,letterSpacing:0,logLevel:"info",scrollback:1e3,scrollSensitivity:1,screenReaderMode:!1,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:t.isMac,rendererType:"canvas",windowsMode:!1,convertEol:!1,termName:"xterm",screenKeys:!1,cancelEvents:!1,useFlowControl:!1,wordSeparator:" ()[]{}',:;\"`"});var s=["cols","rows"];r=function(){function u(l){var a=this;this._onOptionChange=new n.EventEmitter,this.options=o.clone(i.DEFAULT_OPTIONS),Object.keys(l).forEach(function(h){h in a.options&&(a.options[h]=l[h])})}return Object.defineProperty(u.prototype,"onOptionChange",{get:function(){return this._onOptionChange.event},enumerable:!0,configurable:!0}),u.prototype.setOption=function(l,a){if(!(l in i.DEFAULT_OPTIONS))throw Error('No option with key "'+l+'"');if(s.indexOf(l)!==-1)throw Error('Option "'+l+'" can only be set in the constructor');this.options[l]!==a&&(a=this._sanitizeAndValidateOption(l,a),this.options[l]!==a&&(this.options[l]=a,this._onOptionChange.fire(l)))},u.prototype._sanitizeAndValidateOption=function(l,a){switch(l){case"bellStyle":case"cursorStyle":case"fontWeight":case"fontWeightBold":case"rendererType":case"wordSeparator":a||(a=i.DEFAULT_OPTIONS[l]);break;case"lineHeight":case"tabStopWidth":if(1>a)throw Error(l+" cannot be less than 1, value: "+a);break;case"minimumContrastRatio":a=Math.max(1,Math.min(21,Math.round(10*a)/10));case"scrollback":if(0>(a=Math.min(a,4294967295)))throw Error(l+" cannot be less than 0, value: "+a);break;case"fastScrollSensitivity":case"scrollSensitivity":if(0>=a)throw Error(l+" cannot be less than or equal to 0, value: "+a)}return a},u.prototype.getOption=function(l){if(!(l in i.DEFAULT_OPTIONS))throw Error('No option with key "'+l+'"');return this.options[l]},u}(),i.OptionsService=r},function(t,i,r){var n=this&&this.__decorate||function(a,h,p,d){var c,y=arguments.length,_=3>y?h:d===null?d=Object.getOwnPropertyDescriptor(h,p):d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")_=Reflect.decorate(a,h,p,d);else for(var g=a.length-1;0<=g;g--)(c=a[g])&&(_=(3>y?c(_):3<y?c(h,p,_):c(h,p))||_);return 3<y&&_&&Object.defineProperty(h,p,_),_},o=this&&this.__param||function(a,h){return function(p,d){h(p,d,a)}};Object.defineProperty(i,"__esModule",{value:!0});var s=r(0),u=r(1);t=function(){function a(h,p,d){this.document=h,this.parentElement=p,this._optionsService=d,this.height=this.width=0,this._onCharSizeChange=new u.EventEmitter,this._measureStrategy=new l(h,p,this._optionsService)}return Object.defineProperty(a.prototype,"hasValidSize",{get:function(){return 0<this.width&&0<this.height},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"onCharSizeChange",{get:function(){return this._onCharSizeChange.event},enumerable:!0,configurable:!0}),a.prototype.measure=function(){var h=this._measureStrategy.measure();h.width===this.width&&h.height===this.height||(this.width=h.width,this.height=h.height,this._onCharSizeChange.fire())},a=n([o(2,s.IOptionsService)],a)}(),i.CharSizeService=t;var l=function(){function a(h,p,d){this._document=h,this._parentElement=p,this._optionsService=d,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W",this._measureElement.setAttribute("aria-hidden","true"),this._parentElement.appendChild(this._measureElement)}return a.prototype.measure=function(){this._measureElement.style.fontFamily=this._optionsService.options.fontFamily,this._measureElement.style.fontSize=this._optionsService.options.fontSize+"px";var h=this._measureElement.getBoundingClientRect();return h.width!==0&&h.height!==0&&(this._result.width=h.width,this._result.height=Math.ceil(h.height)),this._result},a}()},function(t,i,r){var n=this&&this.__decorate||function(l,a,h,p){var d,c=arguments.length,y=3>c?a:p===null?p=Object.getOwnPropertyDescriptor(a,h):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(l,a,h,p);else for(var _=l.length-1;0<=_;_--)(d=l[_])&&(y=(3>c?d(y):3<c?d(a,h,y):d(a,h))||y);return 3<c&&y&&Object.defineProperty(a,h,y),y},o=this&&this.__param||function(l,a){return function(h,p){a(h,p,l)}};Object.defineProperty(i,"__esModule",{value:!0});var s=r(0),u=r(65);i.MINIMUM_COLS=2,i.MINIMUM_ROWS=1,t=function(){function l(a){this._optionsService=a,this.cols=Math.max(a.options.cols,i.MINIMUM_COLS),this.rows=Math.max(a.options.rows,i.MINIMUM_ROWS),this.buffers=new u.BufferSet(a,this)}return Object.defineProperty(l.prototype,"buffer",{get:function(){return this.buffers.active},enumerable:!0,configurable:!0}),l.prototype.resize=function(a,h){this.cols=a,this.rows=h},l.prototype.reset=function(){this.buffers=new u.BufferSet(this._optionsService,this)},l=n([o(0,s.IOptionsService)],l)}(),i.BufferService=t},function(t,i,r){Object.defineProperty(i,"__esModule",{value:!0});var n=r(66),o=r(1);t=function(){function s(u,l){this.optionsService=u,this.bufferService=l,this._onBufferActivate=new o.EventEmitter,this._normal=new n.Buffer(!0,u,l),this._normal.fillViewportRows(),this._alt=new n.Buffer(!1,u,l),this._activeBuffer=this._normal,this.setupTabStops()}return Object.defineProperty(s.prototype,"onBufferActivate",{get:function(){return this._onBufferActivate.event},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"alt",{get:function(){return this._alt},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"active",{get:function(){return this._activeBuffer},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"normal",{get:function(){return this._normal},enumerable:!0,configurable:!0}),s.prototype.activateNormalBuffer=function(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))},s.prototype.activateAltBuffer=function(u){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(u),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))},s.prototype.resize=function(u,l){this._normal.resize(u,l),this._alt.resize(u,l)},s.prototype.setupTabStops=function(u){this._normal.setupTabStops(u),this._alt.setupTabStops(u)},s}(),i.BufferSet=t},function(t,i,r){Object.defineProperty(i,"__esModule",{value:!0});var n=r(67),o=r(16),s=r(5),u=r(3),l=r(68),a=r(69),h=r(18);i.MAX_BUFFER_SIZE=4294967295,t=function(){function d(c,y,_){this._hasScrollback=c,this._optionsService=y,this._bufferService=_,this.savedX=this.savedY=this.x=this.y=this.ybase=this.ydisp=0,this.savedCurAttrData=o.DEFAULT_ATTR_DATA.clone(),this.savedCharset=h.DEFAULT_CHARSET,this.markers=[],this._nullCell=s.CellData.fromCharData([0,u.NULL_CELL_CHAR,u.NULL_CELL_WIDTH,u.NULL_CELL_CODE]),this._whitespaceCell=s.CellData.fromCharData([0,u.WHITESPACE_CELL_CHAR,u.WHITESPACE_CELL_WIDTH,u.WHITESPACE_CELL_CODE]),this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new n.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}return d.prototype.getNullCell=function(c){return c?(this._nullCell.fg=c.fg,this._nullCell.bg=c.bg):(this._nullCell.fg=0,this._nullCell.bg=0),this._nullCell},d.prototype.getWhitespaceCell=function(c){return c?(this._whitespaceCell.fg=c.fg,this._whitespaceCell.bg=c.bg):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0),this._whitespaceCell},d.prototype.getBlankLine=function(c,y){return new o.BufferLine(this._bufferService.cols,this.getNullCell(c),y)},Object.defineProperty(d.prototype,"hasScrollback",{get:function(){return this._hasScrollback&&this.lines.maxLength>this._rows},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"isCursorInViewport",{get:function(){var c=this.ybase+this.y-this.ydisp;return 0<=c&&c<this._rows},enumerable:!0,configurable:!0}),d.prototype._getCorrectBufferLength=function(c){return this._hasScrollback?(c+=this._optionsService.options.scrollback,c>i.MAX_BUFFER_SIZE?i.MAX_BUFFER_SIZE:c):c},d.prototype.fillViewportRows=function(c){if(this.lines.length===0){c===void 0&&(c=o.DEFAULT_ATTR_DATA);for(var y=this._rows;y--;)this.lines.push(this.getBlankLine(c))}},d.prototype.clear=function(){this.x=this.y=this.ybase=this.ydisp=0,this.lines=new n.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()},d.prototype.resize=function(c,y){var _=this.getNullCell(o.DEFAULT_ATTR_DATA),g=this._getCorrectBufferLength(y);if(g>this.lines.maxLength&&(this.lines.maxLength=g),0<this.lines.length){if(this._cols<c)for(var m=0;m<this.lines.length;m++)this.lines.get(m).resize(c,_);if(m=0,this._rows<y)for(var f=this._rows;f<y;f++)this.lines.length<y+this.ybase&&(this._optionsService.options.windowsMode?this.lines.push(new o.BufferLine(c,_)):0<this.ybase&&this.lines.length<=this.ybase+this.y+m+1?(this.ybase--,m++,0<this.ydisp&&this.ydisp--):this.lines.push(new o.BufferLine(c,_)));else for(f=this._rows;f>y;f--)this.lines.length>y+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));g<this.lines.maxLength&&(f=this.lines.length-g,0<f&&(this.lines.trimStart(f),this.ybase=Math.max(this.ybase-f,0),this.ydisp=Math.max(this.ydisp-f,0),this.savedY=Math.max(this.savedY-f,0)),this.lines.maxLength=g),this.x=Math.min(this.x,c-1),this.y=Math.min(this.y,y-1),m&&(this.y+=m),this.savedX=Math.min(this.savedX,c-1),this.scrollTop=0}if(this.scrollBottom=y-1,this._isReflowEnabled&&(this._reflow(c,y),this._cols>c))for(m=0;m<this.lines.length;m++)this.lines.get(m).resize(c,_);this._cols=c,this._rows=y},Object.defineProperty(d.prototype,"_isReflowEnabled",{get:function(){return this._hasScrollback&&!this._optionsService.options.windowsMode},enumerable:!0,configurable:!0}),d.prototype._reflow=function(c,y){this._cols!==c&&(c>this._cols?this._reflowLarger(c,y):this._reflowSmaller(c,y))},d.prototype._reflowLarger=function(c,y){var _=l.reflowLargerGetLinesToRemove(this.lines,this._cols,c,this.ybase+this.y,this.getNullCell(o.DEFAULT_ATTR_DATA));0<_.length&&(_=l.reflowLargerCreateNewLayout(this.lines,_),l.reflowLargerApplyNewLayout(this.lines,_.layout),this._reflowLargerAdjustViewport(c,y,_.countRemoved))},d.prototype._reflowLargerAdjustViewport=function(c,y,_){for(var g=this.getNullCell(o.DEFAULT_ATTR_DATA),m=_;0<m--;)this.ybase===0?(0<this.y&&this.y--,this.lines.length<y&&this.lines.push(new o.BufferLine(c,g))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-_,0)},d.prototype._reflowSmaller=function(c,y){for(var _=this.getNullCell(o.DEFAULT_ATTR_DATA),g=[],m=0,f=this.lines.length-1;0<=f;f--){var v=this.lines.get(f);if(!(!v||!v.isWrapped&&v.getTrimmedLength()<=c)){for(var Z=[v];v.isWrapped&&0<f;)v=this.lines.get(--f),Z.unshift(v);if(v=this.ybase+this.y,!(v>=f&&v<f+Z.length)){var b=Z[Z.length-1].getTrimmedLength(),G=l.reflowSmallerGetNewLineLengths(Z,this._cols,c),S=G.length-Z.length,C=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+S):Math.max(0,this.lines.length-this.lines.maxLength+S),R=[];for(v=0;v<S;v++){var Y=this.getBlankLine(o.DEFAULT_ATTR_DATA,!0);R.push(Y)}for(0<R.length&&(g.push({start:f+Z.length+m,newLines:R}),m+=R.length),Z.push.apply(Z,R),v=G.length-1,R=G[v],R===0&&(R=G[--v]),Y=Z.length-S-1;0<=Y;){var I=Math.min(b,R);Z[v].copyCellsFrom(Z[Y],b-I,R-I,I,!0),(R-=I)===0&&(R=G[--v]),(b-=I)===0&&(Y--,b=l.getWrappedLineTrimmedLength(Z,Math.max(Y,0),this._cols))}for(v=0;v<Z.length;v++)G[v]<c&&Z[v].setCell(G[v],_);for(v=S-C;0<v--;)this.ybase===0?this.y<y-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+m)-y&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+S,this.ybase+y-1)}}}if(0<g.length){for(c=[],_=[],v=0;v<this.lines.length;v++)_.push(this.lines.get(v));for(y=this.lines.length,f=y-1,Z=0,S=g[Z],this.lines.length=Math.min(this.lines.maxLength,this.lines.length+m),G=0,v=Math.min(this.lines.maxLength-1,y+m-1);0<=v;v--)if(S&&S.start>f+G){for(C=S.newLines.length-1;0<=C;C--)this.lines.set(v--,S.newLines[C]);v++,c.push({index:f+1,amount:S.newLines.length}),G+=S.newLines.length,S=g[++Z]}else this.lines.set(v,_[f--]);for(g=0,v=c.length-1;0<=v;v--)c[v].index+=g,this.lines.onInsertEmitter.fire(c[v]),g+=c[v].amount;m=Math.max(0,y+m-this.lines.maxLength),0<m&&this.lines.onTrimEmitter.fire(m)}},d.prototype.stringIndexToBufferIndex=function(c,y,_){for(_===void 0&&(_=!1);y;){var g=this.lines.get(c);if(!g)return[-1,-1];for(var m=_?g.getTrimmedLength():g.length,f=0;f<m;++f)if(g.get(f)[u.CHAR_DATA_WIDTH_INDEX]&&(y-=g.get(f)[u.CHAR_DATA_CHAR_INDEX].length||1),0>y)return[c,f];c++}return[c,0]},d.prototype.translateBufferLineToString=function(c,y,_,g){return _===void 0&&(_=0),(c=this.lines.get(c))?c.translateToString(y,_,g):""},d.prototype.getWrappedRangeForLine=function(c){for(var y=c;0<y&&this.lines.get(y).isWrapped;)y--;for(;c+1<this.lines.length&&this.lines.get(c+1).isWrapped;)c++;return{first:y,last:c}},d.prototype.setupTabStops=function(c){for(c!=null?this.tabs[c]||(c=this.prevStop(c)):(this.tabs={},c=0);c<this._cols;c+=this._optionsService.options.tabStopWidth)this.tabs[c]=!0},d.prototype.prevStop=function(c){for(c==null&&(c=this.x);!this.tabs[--c]&&0<c;);return c>=this._cols?this._cols-1:0>c?0:c},d.prototype.nextStop=function(c){for(c==null&&(c=this.x);!this.tabs[++c]&&c<this._cols;);return c>=this._cols?this._cols-1:0>c?0:c},d.prototype.addMarker=function(c){var y=this,_=new a.Marker(c);return this.markers.push(_),_.register(this.lines.onTrim(function(g){_.line-=g,0>_.line&&_.dispose()})),_.register(this.lines.onInsert(function(g){_.line>=g.index&&(_.line+=g.amount)})),_.register(this.lines.onDelete(function(g){_.line>=g.index&&_.line<g.index+g.amount&&_.dispose(),_.line>g.index&&(_.line-=g.amount)})),_.register(_.onDispose(function(){return y._removeMarker(_)})),_},d.prototype._removeMarker=function(c){this.markers.splice(this.markers.indexOf(c),1)},d.prototype.iterator=function(c,y,_,g,m){return new p(this,c,y,_,g,m)},d}(),i.Buffer=t;var p=function(){function d(c,y,_,g,m,f){_===void 0&&(_=0),g===void 0&&(g=c.lines.length),m===void 0&&(m=0),f===void 0&&(f=0),this._buffer=c,this._trimRight=y,this._startIndex=_,this._endIndex=g,this._startOverscan=m,this._endOverscan=f,0>this._startIndex&&(this._startIndex=0),this._endIndex>this._buffer.lines.length&&(this._endIndex=this._buffer.lines.length),this._current=this._startIndex}return d.prototype.hasNext=function(){return this._current<this._endIndex},d.prototype.next=function(){var c=this._buffer.getWrappedRangeForLine(this._current);c.first<this._startIndex-this._startOverscan&&(c.first=this._startIndex-this._startOverscan),c.last>this._endIndex+this._endOverscan&&(c.last=this._endIndex+this._endOverscan),c.first=Math.max(c.first,0),c.last=Math.min(c.last,this._buffer.lines.length);for(var y="",_=c.first;_<=c.last;++_)y+=this._buffer.translateBufferLineToString(_,this._trimRight);return this._current=c.last+1,{range:c,content:y}},d}();i.BufferStringIterator=p},function(t,i,r){Object.defineProperty(i,"__esModule",{value:!0});var n=r(1);t=function(){function o(s){this._maxLength=s,this.onDeleteEmitter=new n.EventEmitter,this.onInsertEmitter=new n.EventEmitter,this.onTrimEmitter=new n.EventEmitter,this._array=Array(this._maxLength),this._length=this._startIndex=0}return Object.defineProperty(o.prototype,"onDelete",{get:function(){return this.onDeleteEmitter.event},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"onInsert",{get:function(){return this.onInsertEmitter.event},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"onTrim",{get:function(){return this.onTrimEmitter.event},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"maxLength",{get:function(){return this._maxLength},set:function(s){if(this._maxLength!==s){for(var u=Array(s),l=0;l<Math.min(s,this.length);l++)u[l]=this._array[this._getCyclicIndex(l)];this._array=u,this._maxLength=s,this._startIndex=0}},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"length",{get:function(){return this._length},set:function(s){if(s>this._length)for(var u=this._length;u<s;u++)this._array[u]=void 0;this._length=s},enumerable:!0,configurable:!0}),o.prototype.get=function(s){return this._array[this._getCyclicIndex(s)]},o.prototype.set=function(s,u){this._array[this._getCyclicIndex(s)]=u},o.prototype.push=function(s){this._array[this._getCyclicIndex(this._length)]=s,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++},o.prototype.recycle=function(){if(this._length!==this._maxLength)throw Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]},Object.defineProperty(o.prototype,"isFull",{get:function(){return this._length===this._maxLength},enumerable:!0,configurable:!0}),o.prototype.pop=function(){return this._array[this._getCyclicIndex(this._length---1)]},o.prototype.splice=function(s,u){for(var l=[],a=2;a<arguments.length;a++)l[a-2]=arguments[a];if(u){for(a=s;a<this._length-u;a++)this._array[this._getCyclicIndex(a)]=this._array[this._getCyclicIndex(a+u)];this._length-=u}for(a=this._length-1;a>=s;a--)this._array[this._getCyclicIndex(a+l.length)]=this._array[this._getCyclicIndex(a)];for(a=0;a<l.length;a++)this._array[this._getCyclicIndex(s+a)]=l[a];this._length+l.length>this._maxLength?(l=this._length+l.length-this._maxLength,this._startIndex+=l,this._length=this._maxLength,this.onTrimEmitter.fire(l)):this._length+=l.length},o.prototype.trimStart=function(s){s>this._length&&(s=this._length),this._startIndex+=s,this._length-=s,this.onTrimEmitter.fire(s)},o.prototype.shiftElements=function(s,u,l){if(!(0>=u)){if(0>s||s>=this._length)throw Error("start argument out of range");if(0>s+l)throw Error("Cannot shift elements in list beyond index 0");if(0<l){for(var a=u-1;0<=a;a--)this.set(s+a+l,this.get(s+a));if(s=s+u+l-this._length,0<s)for(this._length+=s;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(a=0;a<u;a++)this.set(s+a+l,this.get(s+a))}},o.prototype._getCyclicIndex=function(s){return(this._startIndex+s)%this._maxLength},o}(),i.CircularList=t},function(t,i){function r(n,o,s){if(o===n.length-1)return n[o].getTrimmedLength();var u=!n[o].hasContent(s-1)&&n[o].getWidth(s-1)===1;return n=n[o+1].getWidth(0)===2,u&&n?s-1:s}Object.defineProperty(i,"__esModule",{value:!0}),i.reflowLargerGetLinesToRemove=function(n,o,s,u,l){for(var a=[],h=0;h<n.length-1;h++){var p=h,d=n.get(++p);if(d.isWrapped){for(var c=[n.get(h)];p<n.length&&d.isWrapped;)c.push(d),d=n.get(++p);if(!(u>=h&&u<p)){p=0,d=r(c,p,o);for(var y=1,_=0;y<c.length;){var g=r(c,y,o),m=Math.min(g-_,s-d);c[p].copyCellsFrom(c[y],_,d,m,!1),(d+=m)===s&&(p++,d=0),(_+=m)===g&&(y++,_=0),d===0&&p!==0&&c[p-1].getWidth(s-1)===2&&(c[p].copyCellsFrom(c[p-1],s-1,d++,1,!1),c[p-1].setCell(s-1,l))}for(c[p].replaceCells(d,s,l),d=0,y=c.length-1;0<y&&(y>p||c[y].getTrimmedLength()===0);y--)d++;0<d&&(a.push(h+c.length-d),a.push(d))}h+=c.length-1}}return a},i.reflowLargerCreateNewLayout=function(n,o){for(var s=[],u=0,l=o[u],a=0,h=0;h<n.length;h++)l===h?(l=o[++u],n.onDeleteEmitter.fire({index:h-a,amount:l}),h+=l-1,a+=l,l=o[++u]):s.push(h);return{layout:s,countRemoved:a}},i.reflowLargerApplyNewLayout=function(n,o){for(var s=[],u=0;u<o.length;u++)s.push(n.get(o[u]));for(u=0;u<s.length;u++)n.set(u,s[u]);n.length=o.length},i.reflowSmallerGetNewLineLengths=function(n,o,s){for(var u=[],l=n.map(function(c,y){return r(n,y,o)}).reduce(function(c,y){return c+y}),a=0,h=0,p=0;p<l;){if(l-p<s){u.push(l-p);break}a+=s;var d=r(n,h,o);a>d&&(a-=d,h++),(d=n[h].getWidth(a-1)===2)&&a--,d=d?s-1:s,u.push(d),p+=d}return u},i.getWrappedLineTrimmedLength=r},function(t,i,r){var n,o=this&&this.__extends||(n=function(u,l){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,h){a.__proto__=h}||function(a,h){for(var p in h)h.hasOwnProperty(p)&&(a[p]=h[p])})(u,l)},function(u,l){function a(){this.constructor=u}n(u,l),u.prototype=l===null?Object.create(l):(a.prototype=l.prototype,new a)});Object.defineProperty(i,"__esModule",{value:!0});var s=r(1);t=function(u){function l(a){var h=u.call(this)||this;return h.line=a,h._id=l._nextId++,h.isDisposed=!1,h._onDispose=new s.EventEmitter,h}return o(l,u),Object.defineProperty(l.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"onDispose",{get:function(){return this._onDispose.event},enumerable:!0,configurable:!0}),l.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire())},l._nextId=1,l}(r(2).Disposable),i.Marker=t},function(t,i,r){var n=this&&this.__decorate||function(l,a,h,p){var d,c=arguments.length,y=3>c?a:p===null?p=Object.getOwnPropertyDescriptor(a,h):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(l,a,h,p);else for(var _=l.length-1;0<=_;_--)(d=l[_])&&(y=(3>c?d(y):3<c?d(a,h,y):d(a,h))||y);return 3<c&&y&&Object.defineProperty(a,h,y),y},o=this&&this.__param||function(l,a){return function(h,p){a(h,p,l)}};Object.defineProperty(i,"__esModule",{value:!0});var s=r(4),u=r(29);t=function(){function l(a,h){this._renderService=a,this._charSizeService=h}return l.prototype.getCoords=function(a,h,p,d,c){return u.getCoords(a,h,p,d,this._charSizeService.hasValidSize,this._renderService.dimensions.actualCellWidth,this._renderService.dimensions.actualCellHeight,c)},l.prototype.getRawByteCoords=function(a,h,p,d){return a=this.getCoords(a,h,p,d),u.getRawByteCoords(a)},l=n([o(0,s.IRenderService),o(1,s.ICharSizeService)],l)}(),i.MouseService=t},function(t,i,r){var n=this&&this.__decorate||function(h,p,d,c){var y,_=arguments.length,g=3>_?p:c===null?c=Object.getOwnPropertyDescriptor(p,d):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(h,p,d,c);else for(var m=h.length-1;0<=m;m--)(y=h[m])&&(g=(3>_?y(g):3<_?y(p,d,g):y(p,d))||g);return 3<_&&g&&Object.defineProperty(p,d,g),g},o=this&&this.__param||function(h,p){return function(d,c){p(d,c,h)}};Object.defineProperty(i,"__esModule",{value:!0});var s=r(0),u=r(1),l=r(32),a=Object.freeze({applicationCursorKeys:!1});t=function(){function h(p,d,c,y){this._scrollToBottom=p,this._bufferService=d,this._logService=c,this._optionsService=y,this.isCursorHidden=this.isCursorInitialized=!1,this._onData=new u.EventEmitter,this._onUserInput=new u.EventEmitter,this._onBinary=new u.EventEmitter,this.decPrivateModes=l.clone(a)}return Object.defineProperty(h.prototype,"onData",{get:function(){return this._onData.event},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"onUserInput",{get:function(){return this._onUserInput.event},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"onBinary",{get:function(){return this._onBinary.event},enumerable:!0,configurable:!0}),h.prototype.reset=function(){this.decPrivateModes=l.clone(a)},h.prototype.triggerDataEvent=function(p,d){if(d===void 0&&(d=!1),!this._optionsService.options.disableStdin){var c=this._bufferService.buffer;c.ybase!==c.ydisp&&this._scrollToBottom(),d&&this._onUserInput.fire(),this._logService.debug('sending data "'+p+'"',function(){return p.split("").map(function(y){return y.charCodeAt(0)})}),this._onData.fire(p)}},h.prototype.triggerBinaryEvent=function(p){this._optionsService.options.disableStdin||(this._logService.debug('sending binary "'+p+'"',function(){return p.split("").map(function(d){return d.charCodeAt(0)})}),this._onBinary.fire(p))},h=n([o(1,s.IBufferService),o(2,s.ILogService),o(3,s.IOptionsService)],h)}(),i.CoreService=t},function(t,i,r){var n=this&&this.__decorate||function(h,p,d,c){var y,_=arguments.length,g=3>_?p:c===null?c=Object.getOwnPropertyDescriptor(p,d):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(h,p,d,c);else for(var m=h.length-1;0<=m;m--)(y=h[m])&&(g=(3>_?y(g):3<_?y(p,d,g):y(p,d))||g);return 3<_&&g&&Object.defineProperty(p,d,g),g},o=this&&this.__param||function(h,p){return function(d,c){p(d,c,h)}},s=this&&this.__spreadArrays||function(){for(var h=0,p=0,d=arguments.length;p<d;p++)h+=arguments[p].length;h=Array(h);var c=0;for(p=0;p<d;p++)for(var y=arguments[p],_=0,g=y.length;_<g;_++,c++)h[c]=y[_];return h};Object.defineProperty(i,"__esModule",{value:!0});var u,l=r(0);(function(h){h[h.DEBUG=0]="DEBUG",h[h.INFO=1]="INFO",h[h.WARN=2]="WARN",h[h.ERROR=3]="ERROR",h[h.OFF=4]="OFF"})(u=i.LogLevel||(i.LogLevel={}));var a={debug:u.DEBUG,info:u.INFO,warn:u.WARN,error:u.ERROR,off:u.OFF};t=function(){function h(p){var d=this;this._optionsService=p,this._updateLogLevel(),this._optionsService.onOptionChange(function(c){c==="logLevel"&&d._updateLogLevel()})}return h.prototype._updateLogLevel=function(){this._logLevel=a[this._optionsService.options.logLevel]},h.prototype._evalLazyOptionalParams=function(p){for(var d=0;d<p.length;d++)typeof p[d]=="function"&&(p[d]=p[d]())},h.prototype._log=function(p,d,c){this._evalLazyOptionalParams(c),p.call.apply(p,s([console,"xterm.js: "+d],c))},h.prototype.debug=function(p){for(var d=[],c=1;c<arguments.length;c++)d[c-1]=arguments[c];this._logLevel<=u.DEBUG&&this._log(console.log,p,d)},h.prototype.info=function(p){for(var d=[],c=1;c<arguments.length;c++)d[c-1]=arguments[c];this._logLevel<=u.INFO&&this._log(console.info,p,d)},h.prototype.warn=function(p){for(var d=[],c=1;c<arguments.length;c++)d[c-1]=arguments[c];this._logLevel<=u.WARN&&this._log(console.warn,p,d)},h.prototype.error=function(p){for(var d=[],c=1;c<arguments.length;c++)d[c-1]=arguments[c];this._logLevel<=u.ERROR&&this._log(console.error,p,d)},h=n([o(0,l.IOptionsService)],h)}(),i.LogService=t},function(t,i,r){var n=this&&this.__decorate||function(u,l,a,h){var p,d=arguments.length,c=3>d?l:h===null?h=Object.getOwnPropertyDescriptor(l,a):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(u,l,a,h);else for(var y=u.length-1;0<=y;y--)(p=u[y])&&(c=(3>d?p(c):3<d?p(l,a,c):p(l,a))||c);return 3<d&&c&&Object.defineProperty(l,a,c),c},o=this&&this.__param||function(u,l){return function(a,h){l(a,h,u)}};Object.defineProperty(i,"__esModule",{value:!0});var s=r(0);t=function(){function u(l){this._bufferService=l,this.clearRange()}return Object.defineProperty(u.prototype,"start",{get:function(){return this._start},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"end",{get:function(){return this._end},enumerable:!0,configurable:!0}),u.prototype.clearRange=function(){this._end=this._start=this._bufferService.buffer.y},u.prototype.markDirty=function(l){l<this._start?this._start=l:l>this._end&&(this._end=l)},u.prototype.markRangeDirty=function(l,a){if(l>a){var h=l;l=a,a=h}l<this._start&&(this._start=l),a>this._end&&(this._end=a)},u.prototype.markAllDirty=function(){this.markRangeDirty(0,this._bufferService.rows-1)},u=n([o(0,s.IBufferService)],u)}(),i.DirtyRowService=t},function(t,i,r){var n=this&&this.__spreadArrays||function(){for(var l=0,a=0,h=arguments.length;a<h;a++)l+=arguments[a].length;l=Array(l);var p=0;for(a=0;a<h;a++)for(var d=arguments[a],c=0,y=d.length;c<y;c++,p++)l[p]=d[c];return l};Object.defineProperty(i,"__esModule",{value:!0});var o=r(0),s=r(14),u=function(){function l(){for(var a=[],h=0;h<arguments.length;h++)a[h]=arguments[h];for(this._entries=new Map,h=0;h<a.length;h++){var p=a[h];this.set(p[0],p[1])}}return l.prototype.set=function(a,h){var p=this._entries.get(a);return this._entries.set(a,h),p},l.prototype.forEach=function(a){this._entries.forEach(function(h,p){return a(p,h)})},l.prototype.has=function(a){return this._entries.has(a)},l.prototype.get=function(a){return this._entries.get(a)},l}();i.ServiceCollection=u,t=function(){function l(){this._services=new u,this._services.set(o.IInstantiationService,this)}return l.prototype.setService=function(a,h){this._services.set(a,h)},l.prototype.createInstance=function(a){for(var h=[],p=1;p<arguments.length;p++)h[p-1]=arguments[p];var d=s.getServiceDependencies(a).sort(function(g,m){return g.index-m.index});p=[];for(var c=0;c<d.length;c++){var y=d[c],_=this._services.get(y.id);if(!_)throw Error("[createInstance] "+a.name+" depends on UNKNOWN service "+y.id+".");p.push(_)}if(d=0<d.length?d[0].index:h.length,h.length!==d)throw Error("[createInstance] First service dependency of "+a.name+" at position "+(d+1)+" conflicts with "+h.length+" static arguments");return new(a.bind.apply(a,n([void 0],n(h,p))))},l}(),i.InstantiationService=t},function(t,i,r){function n(d,c){var y=(d.ctrl?16:0)|(d.shift?4:0)|(d.alt?8:0);return d.button===4?(y|=64,y|=d.action):(y|=3&d.button,4&d.button&&(y|=64),8&d.button&&(y|=128),d.action===32?y|=32:d.action!==0||c||(y|=3)),y}var o=this&&this.__decorate||function(d,c,y,_){var g,m=arguments.length,f=3>m?c:_===null?_=Object.getOwnPropertyDescriptor(c,y):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(d,c,y,_);else for(var v=d.length-1;0<=v;v--)(g=d[v])&&(f=(3>m?g(f):3<m?g(c,y,f):g(c,y))||f);return 3<m&&f&&Object.defineProperty(c,y,f),f},s=this&&this.__param||function(d,c){return function(y,_){c(y,_,d)}};Object.defineProperty(i,"__esModule",{value:!0});var u=r(0),l=r(1),a={NONE:{events:0,restrict:function(){return!1}},X10:{events:1,restrict:function(d){return d.button!==4&&d.action===1&&(d.ctrl=!1,d.alt=!1,d.shift=!1,!0)}},VT200:{events:19,restrict:function(d){return d.action!==32}},DRAG:{events:23,restrict:function(d){return d.action!==32||d.button!==3}},ANY:{events:31,restrict:function(){return!0}}},h=String.fromCharCode,p={DEFAULT:function(d){return d=[n(d,!1)+32,d.col+32,d.row+32],255<d[0]||255<d[1]||255<d[2]?"":"\x1B[M"+h(d[0])+h(d[1])+h(d[2])},SGR:function(d){var c=d.action===0&&d.button!==4?"m":"M";return"\x1B[<"+n(d,!0)+";"+d.col+";"+d.row+c}};t=function(){function d(c,y){var _=this;this._bufferService=c,this._coreService=y,this._protocols={},this._encodings={},this._activeEncoding=this._activeProtocol="",this._onProtocolChange=new l.EventEmitter,this._lastEvent=null,Object.keys(a).forEach(function(g){return _.addProtocol(g,a[g])}),Object.keys(p).forEach(function(g){return _.addEncoding(g,p[g])}),this.reset()}return d.prototype.addProtocol=function(c,y){this._protocols[c]=y},d.prototype.addEncoding=function(c,y){this._encodings[c]=y},Object.defineProperty(d.prototype,"activeProtocol",{get:function(){return this._activeProtocol},set:function(c){if(!this._protocols[c])throw Error('unknown protocol "'+c+'"');this._activeProtocol=c,this._onProtocolChange.fire(this._protocols[c].events)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"activeEncoding",{get:function(){return this._activeEncoding},set:function(c){if(!this._encodings[c])throw Error('unknown encoding "'+c+'"');this._activeEncoding=c},enumerable:!0,configurable:!0}),d.prototype.reset=function(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null},Object.defineProperty(d.prototype,"onProtocolChange",{get:function(){return this._onProtocolChange.event},enumerable:!0,configurable:!0}),d.prototype.triggerMouseEvent=function(c){if(0>c.col||c.col>=this._bufferService.cols||0>c.row||c.row>=this._bufferService.rows||c.button===4&&c.action===32||c.button===3&&c.action!==32||c.button!==4&&(c.action===2||c.action===3)||(c.col++,c.row++,c.action===32&&this._lastEvent&&this._compareEvents(this._lastEvent,c))||!this._protocols[this._activeProtocol].restrict(c))return!1;var y=this._encodings[this._activeEncoding](c);return y&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(y):this._coreService.triggerDataEvent(y,!0)),this._lastEvent=c,!0},d.prototype.explainEvents=function(c){return{DOWN:!!(1&c),UP:!!(2&c),DRAG:!!(4&c),MOVE:!!(8&c),WHEEL:!!(16&c)}},d.prototype._compareEvents=function(c,y){return c.col===y.col&&c.row===y.row&&c.button===y.button&&c.action===y.action&&c.ctrl===y.ctrl&&c.alt===y.alt&&c.shift===y.shift},d=o([s(0,u.IBufferService),s(1,u.ICoreService)],d)}(),i.CoreMouseService=t},function(t,i){Object.defineProperty(i,"__esModule",{value:!0}),t=function(){function r(n){this._action=n,this._writeBuffer=[],this._callbacks=[],this._bufferOffset=this._pendingData=0}return r.prototype.writeSync=function(n){if(this._writeBuffer.length){for(var o=this._bufferOffset;o<this._writeBuffer.length;++o){var s=this._callbacks[o];this._action(this._writeBuffer[o]),s&&s()}this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=2147483647}this._action(n)},r.prototype.write=function(n,o){var s=this;if(5e7<this._pendingData)throw Error("write data discarded, use flow control to avoid losing data");this._writeBuffer.length||(this._bufferOffset=0,setTimeout(function(){return s._innerWrite()})),this._pendingData+=n.length,this._writeBuffer.push(n),this._callbacks.push(o)},r.prototype._innerWrite=function(){for(var n=this,o=Date.now();this._writeBuffer.length>this._bufferOffset;){var s=this._writeBuffer[this._bufferOffset],u=this._callbacks[this._bufferOffset];if(this._bufferOffset++,this._action(s),this._pendingData-=s.length,u&&u(),12<=Date.now()-o)break}this._writeBuffer.length>this._bufferOffset?(50<this._bufferOffset&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(function(){return n._innerWrite()},0)):(this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0)},r}(),i.WriteBuffer=t},function(t,i){Object.defineProperty(i,"__esModule",{value:!0}),t=function(){function r(n){this._textarea=n}return Object.defineProperty(r.prototype,"isFocused",{get:function(){return document.activeElement===this._textarea&&document.hasFocus()},enumerable:!0,configurable:!0}),r}(),i.CoreBrowserService=t},function(t,i){Object.defineProperty(i,"__esModule",{value:!0}),t=function(){function r(){this._addons=[]}return r.prototype.dispose=function(){for(var n=this._addons.length-1;0<=n;n--)this._addons[n].instance.dispose()},r.prototype.loadAddon=function(n,o){var s=this,u={instance:o,dispose:o.dispose,isDisposed:!1};this._addons.push(u),o.dispose=function(){return s._wrappedAddonDispose(u)},o.activate(n)},r.prototype._wrappedAddonDispose=function(n){if(!n.isDisposed){for(var o=-1,s=0;s<this._addons.length;s++)if(this._addons[s]===n){o=s;break}if(o===-1)throw Error("Could not dispose an addon that has not been loaded");n.isDisposed=!0,n.dispose.apply(n.instance),this._addons.splice(o,1)}},r}(),i.AddonManager=t}])})}),wg=Ld(Cy),Tg=Cy.Terminal,Yy=wd(function(e){(function(t,i){e.exports=i()})(window,function(){return function(t){function i(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}var r={};return i.m=t,i.c=r,i.d=function(n,o,s){i.o(n,o)||Object.defineProperty(n,o,{enumerable:!0,get:s})},i.r=function(n){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},i.t=function(n,o){if(1&o&&(n=i(n)),8&o||4&o&&typeof n=="object"&&n&&n.__esModule)return n;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:n}),2&o&&typeof n!="string")for(var u in n)i.d(s,u,function(l){return n[l]}.bind(null,u));return s},i.n=function(n){var o=n&&n.__esModule?function(){return n.default}:function(){return n};return i.d(o,"a",o),o},i.o=function(n,o){return Object.prototype.hasOwnProperty.call(n,o)},i.p="",i(i.s=0)}([function(t,i){Object.defineProperty(i,"__esModule",{value:!0}),t=function(){function r(){}return r.prototype.activate=function(n){this._terminal=n},r.prototype.dispose=function(){},r.prototype.fit=function(){var n=this.proposeDimensions();if(n&&this._terminal){var o=this._terminal._core;this._terminal.rows===n.rows&&this._terminal.cols===n.cols||(o._renderService.clear(),this._terminal.resize(n.cols,n.rows))}},r.prototype.proposeDimensions=function(){if(this._terminal&&this._terminal.element.parentElement){var n=this._terminal._core,o=window.getComputedStyle(this._terminal.element.parentElement),s=parseInt(o.getPropertyValue("height"));o=Math.max(0,parseInt(o.getPropertyValue("width")));var u=window.getComputedStyle(this._terminal.element);return s-=parseInt(u.getPropertyValue("padding-top"))+parseInt(u.getPropertyValue("padding-bottom")),o=o-(parseInt(u.getPropertyValue("padding-right"))+parseInt(u.getPropertyValue("padding-left")))-n.viewport.scrollBarWidth,{cols:Math.floor(o/n._renderService.dimensions.actualCellWidth),rows:Math.floor(s/n._renderService.dimensions.actualCellHeight)}}},r}(),i.FitAddon=t}])})});Ld(Yy);var Xg=Yy.FitAddon,Ry=wd(function(e){(function(t,i){e.exports=i()})(window,function(){return function(t){function i(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}var r={};return i.m=t,i.c=r,i.d=function(n,o,s){i.o(n,o)||Object.defineProperty(n,o,{enumerable:!0,get:s})},i.r=function(n){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},i.t=function(n,o){if(1&o&&(n=i(n)),8&o||4&o&&typeof n=="object"&&n&&n.__esModule)return n;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:n}),2&o&&typeof n!="string")for(var u in n)i.d(s,u,function(l){return n[l]}.bind(null,u));return s},i.n=function(n){var o=n&&n.__esModule?function(){return n.default}:function(){return n};return i.d(o,"a",o),o},i.o=function(n,o){return Object.prototype.hasOwnProperty.call(n,o)},i.p="",i(i.s=0)}([function(t,i){function r(o,s){window.open(s,"_blank")}Object.defineProperty(i,"__esModule",{value:!0});var n=/(?:^|[^\da-z\.-]+)((https?:\/\/)((([\da-z\.-]+)\.([a-z\.]{2,6}))|((\d{1,3}\.){3}\d{1,3})|(localhost))(:\d{1,5})?((\/[\/\w\.\-%~:+]*)*([^:"'\s]))?(\?[0-9\w\[\]\(\)\/\?\!#@$%&'*+,:;~\=\.\-]*)?(#[0-9\w\[\]\(\)\/\?\!#@$%&'*+,:;~\=\.\-]*)?)($|[^\/\w\.\-%]+)/;t=function(){function o(s,u){s===void 0&&(s=r),u===void 0&&(u={}),this._handler=s,this._options=u,this._options.matchIndex=1}return o.prototype.activate=function(s){this._terminal=s,this._linkMatcherId=this._terminal.registerLinkMatcher(n,this._handler,this._options)},o.prototype.dispose=function(){this._linkMatcherId!==void 0&&this._terminal!==void 0&&this._terminal.deregisterLinkMatcher(this._linkMatcherId)},o}(),i.WebLinksAddon=t}])})});Ld(Ry);var Vg=Ry.WebLinksAddon,sr=typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{};function Eg(e,t,i,r){return new(i||(i=Promise))(function(n,o){function s(a){try{l(r.next(a))}catch(h){o(h)}}function u(a){try{l(r.throw(a))}catch(h){o(h)}}function l(a){a.done?n(a.value):new i(function(h){h(a.value)}).then(s,u)}l((r=r.apply(e,t||[])).next())})}function kg(e,t){function i(a){return function(h){return r([a,h])}}function r(a){if(o)throw new TypeError("Generator is already executing.");for(;n;)try{if(o=1,s&&(u=a[0]&2?s.return:a[0]?s.throw||((u=s.return)&&u.call(s),0):s.next)&&!(u=u.call(s,a[1])).done)return u;switch(s=0,u&&(a=[a[0]&2,u.value]),a[0]){case 0:case 1:u=a;break;case 4:return n.label++,{value:a[1],done:!1};case 5:n.label++,s=a[1],a=[0];continue;case 7:a=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=0<u.length&&u[u.length-1])&&(a[0]===6||a[0]===2)){n=0;continue}if(a[0]===3&&(!u||a[1]>u[0]&&a[1]<u[3]))n.label=a[1];else if(a[0]===6&&n.label<u[1])n.label=u[1],u=a;else if(u&&n.label<u[2])n.label=u[2],n.ops.push(a);else{u[2]&&n.ops.pop(),n.trys.pop();continue}}a=t.call(e,n)}catch(h){a=[6,h],s=0}finally{o=u=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},o,s,u,l;return l={next:i(0),throw:i(1),return:i(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l}function _h(e){var t=typeof Symbol=="function"&&e[Symbol.iterator],i=0;return t?t.call(e):{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}}}function xg(e,t){var i=typeof Symbol=="function"&&e[Symbol.iterator];if(!i)return e;e=i.call(e);var r,n=[];try{for(;(t===void 0||0<t--)&&!(r=e.next()).done;)n.push(r.value)}catch(s){var o={error:s}}finally{try{r&&!r.done&&(i=e.return)&&i.call(e)}finally{if(o)throw o.error}}return n}function Kg(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(xg(arguments[t]));return e}var at=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof sr<"u"?sr:typeof self<"u"?self:{};function Ft(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Et(e,t){return t={exports:{}},e(t,t.exports),t.exports}var Ie=Et(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.constants={O_RDONLY:0,O_WRONLY:1,O_RDWR:2,S_IFMT:61440,S_IFREG:32768,S_IFDIR:16384,S_IFCHR:8192,S_IFBLK:24576,S_IFIFO:4096,S_IFLNK:40960,S_IFSOCK:49152,O_CREAT:64,O_EXCL:128,O_NOCTTY:256,O_TRUNC:512,O_APPEND:1024,O_DIRECTORY:65536,O_NOATIME:262144,O_NOFOLLOW:131072,O_SYNC:1052672,O_DIRECT:16384,O_NONBLOCK:2048,S_IRWXU:448,S_IRUSR:256,S_IWUSR:128,S_IXUSR:64,S_IRWXG:56,S_IRGRP:32,S_IWGRP:16,S_IXGRP:8,S_IRWXO:7,S_IROTH:4,S_IWOTH:2,S_IXOTH:1,F_OK:0,R_OK:4,W_OK:2,X_OK:1,UV_FS_SYMLINK_DIR:1,UV_FS_SYMLINK_JUNCTION:2,UV_FS_COPYFILE_EXCL:1,UV_FS_COPYFILE_FICLONE:2,UV_FS_COPYFILE_FICLONE_FORCE:4,COPYFILE_EXCL:1,COPYFILE_FICLONE:2,COPYFILE_FICLONE_FORCE:4}});Ft(Ie);var Mg=Et(function(e,t){t.default=typeof BigInt=="function"?BigInt:function(){throw Error("BigInt is not supported in this environment.")}}),cs=Et(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var i=Ie.constants.S_IFMT,r=Ie.constants.S_IFDIR,n=Ie.constants.S_IFREG,o=Ie.constants.S_IFBLK,s=Ie.constants.S_IFCHR,u=Ie.constants.S_IFLNK,l=Ie.constants.S_IFIFO,a=Ie.constants.S_IFSOCK;e=function(){function h(){}return h.build=function(p,d){d===void 0&&(d=!1);var c=new h,y=p.gid,_=p.atime,g=p.mtime,m=p.ctime;return d=d?Mg.default:function(f){return f},c.uid=d(p.uid),c.gid=d(y),c.rdev=d(0),c.blksize=d(4096),c.ino=d(p.ino),c.size=d(p.getSize()),c.blocks=d(1),c.atime=_,c.mtime=g,c.ctime=m,c.birthtime=m,c.atimeMs=d(_.getTime()),c.mtimeMs=d(g.getTime()),y=d(m.getTime()),c.ctimeMs=y,c.birthtimeMs=y,c.dev=d(0),c.mode=d(p.mode),c.nlink=d(p.nlink),c},h.prototype._checkModeProperty=function(p){return(Number(this.mode)&i)===p},h.prototype.isDirectory=function(){return this._checkModeProperty(r)},h.prototype.isFile=function(){return this._checkModeProperty(n)},h.prototype.isBlockDevice=function(){return this._checkModeProperty(o)},h.prototype.isCharacterDevice=function(){return this._checkModeProperty(s)},h.prototype.isSymbolicLink=function(){return this._checkModeProperty(u)},h.prototype.isFIFO=function(){return this._checkModeProperty(l)},h.prototype.isSocket=function(){return this._checkModeProperty(a)},h}(),t.Stats=e,t.default=e});Ft(cs);var uo=typeof sr<"u"?sr:typeof self<"u"?self:typeof window<"u"?window:{},er=[],Gi=[],Pg=typeof Uint8Array<"u"?Uint8Array:Array,Td=!1;function Wy(){Td=!0;for(var e=0;64>e;++e)er[e]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[e],Gi["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(e)]=e;Gi[45]=62,Gi[95]=63}function Ng(e,t,i){for(var r=[],n=t;n<i;n+=3)t=(e[n]<<16)+(e[n+1]<<8)+e[n+2],r.push(er[t>>18&63]+er[t>>12&63]+er[t>>6&63]+er[t&63]);return r.join("")}function bp(e){Td||Wy();for(var t=e.length,i=t%3,r="",n=[],o=0,s=t-i;o<s;o+=16383)n.push(Ng(e,o,o+16383>s?s:o+16383));return i===1?(e=e[t-1],r+=er[e>>2],r+=er[e<<4&63],r+="=="):i===2&&(e=(e[t-2]<<8)+e[t-1],r+=er[e>>10],r+=er[e>>4&63],r+=er[e<<2&63],r+="="),n.push(r),n.join("")}function La(e,t,i,r,n){var o=8*n-r-1,s=(1<<o)-1,u=s>>1,l=-7;n=i?n-1:0;var a=i?-1:1,h=e[t+n];for(n+=a,i=h&(1<<-l)-1,h>>=-l,l+=o;0<l;i=256*i+e[t+n],n+=a,l-=8);for(o=i&(1<<-l)-1,i>>=-l,l+=r;0<l;o=256*o+e[t+n],n+=a,l-=8);if(i===0)i=1-u;else{if(i===s)return o?NaN:1/0*(h?-1:1);o+=Math.pow(2,r),i-=u}return(h?-1:1)*o*Math.pow(2,i-r)}function wa(e,t,i,r,n,o){var s,u=8*o-n-1,l=(1<<u)-1,a=l>>1,h=n===23?Math.pow(2,-24)-Math.pow(2,-77):0;o=r?0:o-1;var p=r?1:-1,d=0>t||t===0&&0>1/t?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(t=isNaN(t)?1:0,r=l):(r=Math.floor(Math.log(t)/Math.LN2),1>t*(s=Math.pow(2,-r))&&(r--,s*=2),t=1<=r+a?t+h/s:t+h*Math.pow(2,1-a),2<=t*s&&(r++,s/=2),r+a>=l?(t=0,r=l):1<=r+a?(t=(t*s-1)*Math.pow(2,n),r+=a):(t=t*Math.pow(2,a-1)*Math.pow(2,n),r=0));8<=n;e[i+o]=t&255,o+=p,t/=256,n-=8);for(r=r<<n|t,u+=n;0<u;e[i+o]=r&255,o+=p,r/=256,u-=8);e[i+o-p]|=128*d}var Jg={}.toString,Iy=Array.isArray||function(e){return Jg.call(e)=="[object Array]"};ue.TYPED_ARRAY_SUPPORT=uo.TYPED_ARRAY_SUPPORT!==void 0?uo.TYPED_ARRAY_SUPPORT:!0;var Fg=ue.TYPED_ARRAY_SUPPORT?2147483647:1073741823;function Rr(e,t){if((ue.TYPED_ARRAY_SUPPORT?2147483647:1073741823)<t)throw new RangeError("Invalid typed array length");return ue.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=ue.prototype):(e===null&&(e=new ue(t)),e.length=t),e}function ue(e,t,i){if(!(ue.TYPED_ARRAY_SUPPORT||this instanceof ue))return new ue(e,t,i);if(typeof e=="number"){if(typeof t=="string")throw Error("If encoding is specified then the first argument must be a string");return Xd(this,e)}return Ly(this,e,t,i)}ue.poolSize=8192;ue._augment=function(e){return e.__proto__=ue.prototype,e};function Ly(e,t,i,r){if(typeof t=="number")throw new TypeError('"value" argument must not be a number');if(typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer){if(t.byteLength,0>i||t.byteLength<i)throw new RangeError("'offset' is out of bounds");if(t.byteLength<i+(r||0))throw new RangeError("'length' is out of bounds");return t=i===void 0&&r===void 0?new Uint8Array(t):r===void 0?new Uint8Array(t,i):new Uint8Array(t,i,r),ue.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=ue.prototype):e=gh(e,t),e}if(typeof t=="string"){if(r=e,e=i,(typeof e!="string"||e==="")&&(e="utf8"),!ue.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');return i=Ty(t,e)|0,r=Rr(r,i),t=r.write(t,e),t!==i&&(r=r.slice(0,t)),r}return Og(e,t)}ue.from=function(e,t,i){return Ly(null,e,t,i)};ue.TYPED_ARRAY_SUPPORT&&(ue.prototype.__proto__=Uint8Array.prototype,ue.__proto__=Uint8Array);function wy(e){if(typeof e!="number")throw new TypeError('"size" argument must be a number');if(0>e)throw new RangeError('"size" argument must not be negative')}ue.alloc=function(e,t,i){return wy(e),e=0>=e?Rr(null,e):t!==void 0?typeof i=="string"?Rr(null,e).fill(t,i):Rr(null,e).fill(t):Rr(null,e)};function Xd(e,t){if(wy(t),e=Rr(e,0>t?0:Vd(t)|0),!ue.TYPED_ARRAY_SUPPORT)for(var i=0;i<t;++i)e[i]=0;return e}ue.allocUnsafe=function(e){return Xd(null,e)};ue.allocUnsafeSlow=function(e){return Xd(null,e)};function gh(e,t){var i=0>t.length?0:Vd(t.length)|0;e=Rr(e,i);for(var r=0;r<i;r+=1)e[r]=t[r]&255;return e}function Og(e,t){if(lr(t)){var i=Vd(t.length)|0;return e=Rr(e,i),e.length===0||t.copy(e,0,0,i),e}if(t){if(typeof ArrayBuffer<"u"&&t.buffer instanceof ArrayBuffer||"length"in t)return(i=typeof t.length!="number")||(i=t.length,i=i!==i),i?Rr(e,0):gh(e,t);if(t.type==="Buffer"&&Iy(t.data))return gh(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function Vd(e){if(e>=(ue.TYPED_ARRAY_SUPPORT?2147483647:1073741823))throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+(ue.TYPED_ARRAY_SUPPORT?2147483647:1073741823).toString(16)+" bytes");return e|0}ue.isBuffer=Wr;function lr(e){return!(e==null||!e._isBuffer)}ue.compare=function(e,t){if(!lr(e)||!lr(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var i=e.length,r=t.length,n=0,o=Math.min(i,r);n<o;++n)if(e[n]!==t[n]){i=e[n],r=t[n];break}return i<r?-1:r<i?1:0};ue.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};ue.concat=function(e,t){if(!Iy(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return ue.alloc(0);var i;if(t===void 0)for(i=t=0;i<e.length;++i)t+=e[i].length;t=ue.allocUnsafe(t);var r=0;for(i=0;i<e.length;++i){var n=e[i];if(!lr(n))throw new TypeError('"list" argument must be an Array of Buffers');n.copy(t,r),r+=n.length}return t};function Ty(e,t){if(lr(e))return e.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;typeof e!="string"&&(e=""+e);var i=e.length;if(i===0)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":case void 0:return na(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return Ey(e).length;default:if(r)return na(e).length;t=(""+t).toLowerCase(),r=!0}}ue.byteLength=Ty;function Bg(e,t,i){var r=!1;if((t===void 0||0>t)&&(t=0),t>this.length||((i===void 0||i>this.length)&&(i=this.length),0>=i)||(i>>>=0,t>>>=0,i<=t))return"";for(e||(e="utf8");;)switch(e){case"hex":for(e=t,t=i,i=this.length,(!e||0>e)&&(e=0),(!t||0>t||t>i)&&(t=i),r="",i=e;i<t;++i)e=r,r=this[i],r=16>r?"0"+r.toString(16):r.toString(16),r=e+r;return r;case"utf8":case"utf-8":return Vy(this,t,i);case"ascii":for(e="",i=Math.min(this.length,i);t<i;++t)e+=String.fromCharCode(this[t]&127);return e;case"latin1":case"binary":for(e="",i=Math.min(this.length,i);t<i;++t)e+=String.fromCharCode(this[t]);return e;case"base64":return t=t===0&&i===this.length?bp(this):bp(this.slice(t,i)),t;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(t=this.slice(t,i),i="",e=0;e<t.length;e+=2)i+=String.fromCharCode(t[e]+256*t[e+1]);return i;default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}ue.prototype._isBuffer=!0;function An(e,t,i){var r=e[t];e[t]=e[i],e[i]=r}ue.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)An(this,t,t+1);return this};ue.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)An(this,t,t+3),An(this,t+1,t+2);return this};ue.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)An(this,t,t+7),An(this,t+1,t+6),An(this,t+2,t+5),An(this,t+3,t+4);return this};ue.prototype.toString=function(){var e=this.length|0;return e===0?"":arguments.length===0?Vy(this,0,e):Bg.apply(this,arguments)};ue.prototype.equals=function(e){if(!lr(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:ue.compare(this,e)===0};ue.prototype.inspect=function(){var e="";return 0<this.length&&(e=this.toString("hex",0,50).match(/.{2}/g).join(" "),50<this.length&&(e+=" ... ")),"<Buffer "+e+">"};ue.prototype.compare=function(e,t,i,r,n){if(!lr(e))throw new TypeError("Argument must be a Buffer");if(t===void 0&&(t=0),i===void 0&&(i=e?e.length:0),r===void 0&&(r=0),n===void 0&&(n=this.length),0>t||i>e.length||0>r||n>this.length)throw new RangeError("out of range index");if(r>=n&&t>=i)return 0;if(r>=n)return-1;if(t>=i)return 1;if(t>>>=0,i>>>=0,r>>>=0,n>>>=0,this===e)return 0;var o=n-r,s=i-t,u=Math.min(o,s);for(r=this.slice(r,n),e=e.slice(t,i),t=0;t<u;++t)if(r[t]!==e[t]){o=r[t],s=e[t];break}return o<s?-1:s<o?1:0};function Xy(e,t,i,r,n){if(e.length===0)return-1;if(typeof i=="string"?(r=i,i=0):2147483647<i?i=2147483647:-2147483648>i&&(i=-2147483648),i=+i,isNaN(i)&&(i=n?0:e.length-1),0>i&&(i=e.length+i),i>=e.length){if(n)return-1;i=e.length-1}else if(0>i)if(n)i=0;else return-1;if(typeof t=="string"&&(t=ue.from(t,r)),lr(t))return t.length===0?-1:Gp(e,t,i,r,n);if(typeof t=="number")return t&=255,ue.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?n?Uint8Array.prototype.indexOf.call(e,t,i):Uint8Array.prototype.lastIndexOf.call(e,t,i):Gp(e,[t],i,r,n);throw new TypeError("val must be string, number or Buffer")}function Gp(e,t,i,r,n){function o(a,h){return s===1?a[h]:a.readUInt16BE(h*s)}var s=1,u=e.length,l=t.length;if(r!==void 0&&(r=String(r).toLowerCase(),r==="ucs2"||r==="ucs-2"||r==="utf16le"||r==="utf-16le")){if(2>e.length||2>t.length)return-1;s=2,u/=2,l/=2,i/=2}if(n)for(r=-1;i<u;i++)if(o(e,i)===o(t,r===-1?0:i-r)){if(r===-1&&(r=i),i-r+1===l)return r*s}else r!==-1&&(i-=i-r),r=-1;else for(i+l>u&&(i=u-l);0<=i;i--){for(u=!0,r=0;r<l;r++)if(o(e,i+r)!==o(t,r)){u=!1;break}if(u)return i}return-1}ue.prototype.includes=function(e,t,i){return this.indexOf(e,t,i)!==-1};ue.prototype.indexOf=function(e,t,i){return Xy(this,e,t,i,!0)};ue.prototype.lastIndexOf=function(e,t,i){return Xy(this,e,t,i,!1)};ue.prototype.write=function(e,t,i,r){if(t===void 0)r="utf8",i=this.length,t=0;else if(i===void 0&&typeof t=="string")r=t,i=this.length,t=0;else if(isFinite(t))t|=0,isFinite(i)?(i|=0,r===void 0&&(r="utf8")):(r=i,i=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var n=this.length-t;if((i===void 0||i>n)&&(i=n),0<e.length&&(0>i||0>t)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");for(r||(r="utf8"),n=!1;;)switch(r){case"hex":e:{if(t=Number(t)||0,r=this.length-t,i?(i=Number(i),i>r&&(i=r)):i=r,r=e.length,r%2!==0)throw new TypeError("Invalid hex string");for(i>r/2&&(i=r/2),r=0;r<i;++r){if(n=parseInt(e.substr(2*r,2),16),isNaN(n)){e=r;break e}this[t+r]=n}e=r}return e;case"utf8":case"utf-8":return Os(na(e,this.length-t),this,t,i);case"ascii":return Os(Yp(e),this,t,i);case"latin1":case"binary":return Os(Yp(e),this,t,i);case"base64":return Os(Ey(e),this,t,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":r=e,n=this.length-t;for(var o=[],s=0;s<r.length&&!(0>(n-=2));++s){var u=r.charCodeAt(s);e=u>>8,u%=256,o.push(u),o.push(e)}return Os(o,this,t,i);default:if(n)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),n=!0}};ue.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Vy(e,t,i){i=Math.min(e.length,i);for(var r=[];t<i;){var n=e[t],o=null,s=239<n?4:223<n?3:191<n?2:1;if(t+s<=i)switch(s){case 1:128>n&&(o=n);break;case 2:var u=e[t+1];(u&192)===128&&(n=(n&31)<<6|u&63,127<n&&(o=n));break;case 3:u=e[t+1];var l=e[t+2];(u&192)===128&&(l&192)===128&&(n=(n&15)<<12|(u&63)<<6|l&63,2047<n&&(55296>n||57343<n)&&(o=n));break;case 4:u=e[t+1],l=e[t+2];var a=e[t+3];(u&192)===128&&(l&192)===128&&(a&192)===128&&(n=(n&15)<<18|(u&63)<<12|(l&63)<<6|a&63,65535<n&&1114112>n&&(o=n))}o===null?(o=65533,s=1):65535<o&&(o-=65536,r.push(o>>>10&1023|55296),o=56320|o&1023),r.push(o),t+=s}if(e=r.length,e<=Cp)r=String.fromCharCode.apply(String,r);else{for(i="",t=0;t<e;)i+=String.fromCharCode.apply(String,r.slice(t,t+=Cp));r=i}return r}var Cp=4096;ue.prototype.slice=function(e,t){var i=this.length;if(e=~~e,t=t===void 0?i:~~t,0>e?(e+=i,0>e&&(e=0)):e>i&&(e=i),0>t?(t+=i,0>t&&(t=0)):t>i&&(t=i),t<e&&(t=e),ue.TYPED_ARRAY_SUPPORT)t=this.subarray(e,t),t.__proto__=ue.prototype;else{i=t-e,t=new ue(i,void 0);for(var r=0;r<i;++r)t[r]=this[r+e]}return t};function gt(e,t,i){if(e%1!==0||0>e)throw new RangeError("offset is not uint");if(e+t>i)throw new RangeError("Trying to access beyond buffer length")}ue.prototype.readUIntLE=function(e,t,i){e|=0,t|=0,i||gt(e,t,this.length),i=this[e];for(var r=1,n=0;++n<t&&(r*=256);)i+=this[e+n]*r;return i};ue.prototype.readUIntBE=function(e,t,i){e|=0,t|=0,i||gt(e,t,this.length),i=this[e+--t];for(var r=1;0<t&&(r*=256);)i+=this[e+--t]*r;return i};ue.prototype.readUInt8=function(e,t){return t||gt(e,1,this.length),this[e]};ue.prototype.readUInt16LE=function(e,t){return t||gt(e,2,this.length),this[e]|this[e+1]<<8};ue.prototype.readUInt16BE=function(e,t){return t||gt(e,2,this.length),this[e]<<8|this[e+1]};ue.prototype.readUInt32LE=function(e,t){return t||gt(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]};ue.prototype.readUInt32BE=function(e,t){return t||gt(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])};ue.prototype.readIntLE=function(e,t,i){e|=0,t|=0,i||gt(e,t,this.length),i=this[e];for(var r=1,n=0;++n<t&&(r*=256);)i+=this[e+n]*r;return i>=128*r&&(i-=Math.pow(2,8*t)),i};ue.prototype.readIntBE=function(e,t,i){e|=0,t|=0,i||gt(e,t,this.length),i=t;for(var r=1,n=this[e+--i];0<i&&(r*=256);)n+=this[e+--i]*r;return n>=128*r&&(n-=Math.pow(2,8*t)),n};ue.prototype.readInt8=function(e,t){return t||gt(e,1,this.length),this[e]&128?-1*(255-this[e]+1):this[e]};ue.prototype.readInt16LE=function(e,t){return t||gt(e,2,this.length),e=this[e]|this[e+1]<<8,e&32768?e|4294901760:e};ue.prototype.readInt16BE=function(e,t){return t||gt(e,2,this.length),e=this[e+1]|this[e]<<8,e&32768?e|4294901760:e};ue.prototype.readInt32LE=function(e,t){return t||gt(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};ue.prototype.readInt32BE=function(e,t){return t||gt(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};ue.prototype.readFloatLE=function(e,t){return t||gt(e,4,this.length),La(this,e,!0,23,4)};ue.prototype.readFloatBE=function(e,t){return t||gt(e,4,this.length),La(this,e,!1,23,4)};ue.prototype.readDoubleLE=function(e,t){return t||gt(e,8,this.length),La(this,e,!0,52,8)};ue.prototype.readDoubleBE=function(e,t){return t||gt(e,8,this.length),La(this,e,!1,52,8)};function ti(e,t,i,r,n,o){if(!lr(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>n||t<o)throw new RangeError('"value" argument is out of bounds');if(i+r>e.length)throw new RangeError("Index out of range")}ue.prototype.writeUIntLE=function(e,t,i,r){e=+e,t|=0,i|=0,r||ti(this,e,t,i,Math.pow(2,8*i)-1,0),r=1;var n=0;for(this[t]=e&255;++n<i&&(r*=256);)this[t+n]=e/r&255;return t+i};ue.prototype.writeUIntBE=function(e,t,i,r){e=+e,t|=0,i|=0,r||ti(this,e,t,i,Math.pow(2,8*i)-1,0),r=i-1;var n=1;for(this[t+r]=e&255;0<=--r&&(n*=256);)this[t+r]=e/n&255;return t+i};ue.prototype.writeUInt8=function(e,t,i){return e=+e,t|=0,i||ti(this,e,t,1,255,0),ue.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=e&255,t+1};function Ta(e,t,i,r){0>t&&(t=65535+t+1);for(var n=0,o=Math.min(e.length-i,2);n<o;++n)e[i+n]=(t&255<<8*(r?n:1-n))>>>8*(r?n:1-n)}ue.prototype.writeUInt16LE=function(e,t,i){return e=+e,t|=0,i||ti(this,e,t,2,65535,0),ue.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8):Ta(this,e,t,!0),t+2};ue.prototype.writeUInt16BE=function(e,t,i){return e=+e,t|=0,i||ti(this,e,t,2,65535,0),ue.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e&255):Ta(this,e,t,!1),t+2};function Xa(e,t,i,r){0>t&&(t=4294967295+t+1);for(var n=0,o=Math.min(e.length-i,4);n<o;++n)e[i+n]=t>>>8*(r?n:3-n)&255}ue.prototype.writeUInt32LE=function(e,t,i){return e=+e,t|=0,i||ti(this,e,t,4,4294967295,0),ue.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e&255):Xa(this,e,t,!0),t+4};ue.prototype.writeUInt32BE=function(e,t,i){return e=+e,t|=0,i||ti(this,e,t,4,4294967295,0),ue.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255):Xa(this,e,t,!1),t+4};ue.prototype.writeIntLE=function(e,t,i,r){e=+e,t|=0,r||(r=Math.pow(2,8*i-1),ti(this,e,t,i,r-1,-r)),r=0;var n=1,o=0;for(this[t]=e&255;++r<i&&(n*=256);)0>e&&o===0&&this[t+r-1]!==0&&(o=1),this[t+r]=(e/n>>0)-o&255;return t+i};ue.prototype.writeIntBE=function(e,t,i,r){e=+e,t|=0,r||(r=Math.pow(2,8*i-1),ti(this,e,t,i,r-1,-r)),r=i-1;var n=1,o=0;for(this[t+r]=e&255;0<=--r&&(n*=256);)0>e&&o===0&&this[t+r+1]!==0&&(o=1),this[t+r]=(e/n>>0)-o&255;return t+i};ue.prototype.writeInt8=function(e,t,i){return e=+e,t|=0,i||ti(this,e,t,1,127,-128),ue.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),0>e&&(e=255+e+1),this[t]=e&255,t+1};ue.prototype.writeInt16LE=function(e,t,i){return e=+e,t|=0,i||ti(this,e,t,2,32767,-32768),ue.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8):Ta(this,e,t,!0),t+2};ue.prototype.writeInt16BE=function(e,t,i){return e=+e,t|=0,i||ti(this,e,t,2,32767,-32768),ue.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e&255):Ta(this,e,t,!1),t+2};ue.prototype.writeInt32LE=function(e,t,i){return e=+e,t|=0,i||ti(this,e,t,4,2147483647,-2147483648),ue.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):Xa(this,e,t,!0),t+4};ue.prototype.writeInt32BE=function(e,t,i){return e=+e,t|=0,i||ti(this,e,t,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),ue.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255):Xa(this,e,t,!1),t+4};function Va(e,t,i,r){if(i+r>e.length)throw new RangeError("Index out of range");if(0>i)throw new RangeError("Index out of range")}ue.prototype.writeFloatLE=function(e,t,i){return i||Va(this,e,t,4),wa(this,e,t,!0,23,4),t+4};ue.prototype.writeFloatBE=function(e,t,i){return i||Va(this,e,t,4),wa(this,e,t,!1,23,4),t+4};ue.prototype.writeDoubleLE=function(e,t,i){return i||Va(this,e,t,8),wa(this,e,t,!0,52,8),t+8};ue.prototype.writeDoubleBE=function(e,t,i){return i||Va(this,e,t,8),wa(this,e,t,!1,52,8),t+8};ue.prototype.copy=function(e,t,i,r){if(i||(i=0),r||r===0||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),0<r&&r<i&&(r=i),r===i||e.length===0||this.length===0)return 0;if(0>t)throw new RangeError("targetStart out of bounds");if(0>i||i>=this.length)throw new RangeError("sourceStart out of bounds");if(0>r)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-i&&(r=e.length-t+i);var n=r-i;if(this===e&&i<t&&t<r)for(r=n-1;0<=r;--r)e[r+t]=this[r+i];else if(1e3>n||!ue.TYPED_ARRAY_SUPPORT)for(r=0;r<n;++r)e[r+t]=this[r+i];else Uint8Array.prototype.set.call(e,this.subarray(i,i+n),t);return n};ue.prototype.fill=function(e,t,i,r){if(typeof e=="string"){if(typeof t=="string"?(r=t,t=0,i=this.length):typeof i=="string"&&(r=i,i=this.length),e.length===1){var n=e.charCodeAt(0);256>n&&(e=n)}if(r!==void 0&&typeof r!="string")throw new TypeError("encoding must be a string");if(typeof r=="string"&&!ue.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else typeof e=="number"&&(e&=255);if(0>t||this.length<t||this.length<i)throw new RangeError("Out of range index");if(i<=t)return this;if(t>>>=0,i=i===void 0?this.length:i>>>0,e||(e=0),typeof e=="number")for(r=t;r<i;++r)this[r]=e;else for(e=lr(e)?e:na(new ue(e,r).toString()),n=e.length,r=0;r<i-t;++r)this[r+t]=e[r%n];return this};var Ug=/[^+\/0-9A-Za-z-_]/g;function na(e,t){t=t||1/0;for(var i,r=e.length,n=null,o=[],s=0;s<r;++s){if(i=e.charCodeAt(s),55295<i&&57344>i){if(!n){if(56319<i){-1<(t-=3)&&o.push(239,191,189);continue}else if(s+1===r){-1<(t-=3)&&o.push(239,191,189);continue}n=i;continue}if(56320>i){-1<(t-=3)&&o.push(239,191,189),n=i;continue}i=(n-55296<<10|i-56320)+65536}else n&&-1<(t-=3)&&o.push(239,191,189);if(n=null,128>i){if(0>--t)break;o.push(i)}else if(2048>i){if(0>(t-=2))break;o.push(i>>6|192,i&63|128)}else if(65536>i){if(0>(t-=3))break;o.push(i>>12|224,i>>6&63|128,i&63|128)}else if(1114112>i){if(0>(t-=4))break;o.push(i>>18|240,i>>12&63|128,i>>6&63|128,i&63|128)}else throw Error("Invalid code point")}return o}function Yp(e){for(var t=[],i=0;i<e.length;++i)t.push(e.charCodeAt(i)&255);return t}function Ey(e){if(e=(e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")).replace(Ug,""),2>e.length)e="";else for(;e.length%4!==0;)e+="=";Td||Wy();var t=e.length;if(0<t%4)throw Error("Invalid string. Length must be a multiple of 4");var i=e[t-2]==="="?2:e[t-1]==="="?1:0,r=new Pg(3*t/4-i),n=0<i?t-4:t,o=0;for(t=0;t<n;t+=4){var s=Gi[e.charCodeAt(t)]<<18|Gi[e.charCodeAt(t+1)]<<12|Gi[e.charCodeAt(t+2)]<<6|Gi[e.charCodeAt(t+3)];r[o++]=s>>16&255,r[o++]=s>>8&255,r[o++]=s&255}return i===2?(s=Gi[e.charCodeAt(t)]<<2|Gi[e.charCodeAt(t+1)]>>4,r[o++]=s&255):i===1&&(s=Gi[e.charCodeAt(t)]<<10|Gi[e.charCodeAt(t+1)]<<4|Gi[e.charCodeAt(t+2)]>>2,r[o++]=s>>8&255,r[o++]=s&255),r}function Os(e,t,i,r){for(var n=0;n<r&&!(n+i>=t.length||n>=e.length);++n)t[n+i]=e[n];return n}function Wr(e){return e!=null&&(!!e._isBuffer||Rp(e)||typeof e.readFloatLE=="function"&&typeof e.slice=="function"&&Rp(e.slice(0,0)))}function Rp(e){return!!e.constructor&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}var Bs=Object.freeze({__proto__:null,INSPECT_MAX_BYTES:50,kMaxLength:Fg,Buffer:ue,SlowBuffer:function(e){return+e!=e&&(e=0),ue.alloc(+e)},isBuffer:Wr}),ze=Et(function(e,t){function i(n){for(var o=[],s=1;s<arguments.length;s++)o[s-1]=arguments[s];return new(Bs.Buffer.bind.apply(Bs.Buffer,r([void 0,n],o)))}var r=at&&at.__spreadArrays||function(){for(var n=0,o=0,s=arguments.length;o<s;o++)n+=arguments[o].length;n=Array(n);var u=0;for(o=0;o<s;o++)for(var l=arguments[o],a=0,h=l.length;a<h;a++,u++)n[u]=l[a];return n};Object.defineProperty(t,"__esModule",{value:!0}),t.Buffer=Bs.Buffer,t.bufferAllocUnsafe=Bs.Buffer.allocUnsafe||i,t.bufferFrom=Bs.Buffer.from||i});Ft(ze);function ky(){throw Error("setTimeout has not been defined")}function xy(){throw Error("clearTimeout has not been defined")}var zr=ky,Ar=xy;typeof uo.setTimeout=="function"&&(zr=setTimeout);typeof uo.clearTimeout=="function"&&(Ar=clearTimeout);function Ky(e){if(zr===setTimeout)return setTimeout(e,0);if((zr===ky||!zr)&&setTimeout)return zr=setTimeout,setTimeout(e,0);try{return zr(e,0)}catch{try{return zr.call(null,e,0)}catch{return zr.call(this,e,0)}}}function jg(e){if(Ar===clearTimeout)return clearTimeout(e);if((Ar===xy||!Ar)&&clearTimeout)return Ar=clearTimeout,clearTimeout(e);try{return Ar(e)}catch{try{return Ar.call(null,e)}catch{return Ar.call(this,e)}}}var Ir=[],as=!1,Qn,Ic=-1;function Hg(){as&&Qn&&(as=!1,Qn.length?Ir=Qn.concat(Ir):Ic=-1,Ir.length&&My())}function My(){if(!as){var e=Ky(Hg);as=!0;for(var t=Ir.length;t;){for(Qn=Ir,Ir=[];++Ic<t;)Qn&&Qn[Ic].run();Ic=-1,t=Ir.length}Qn=null,as=!1,jg(e)}}function pi(e){var t=Array(arguments.length-1);if(1<arguments.length)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];Ir.push(new Py(e,t)),Ir.length!==1||as||Ky(My)}function Py(e,t){this.fun=e,this.array=t}Py.prototype.run=function(){this.fun.apply(null,this.array)};function Nn(){}var Po=uo.performance||{},Dg=Po.now||Po.mozNow||Po.msNow||Po.oNow||Po.webkitNow||function(){return new Date().getTime()},zg=new Date,us={nextTick:pi,title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:Nn,addListener:Nn,once:Nn,off:Nn,removeListener:Nn,removeAllListeners:Nn,emit:Nn,binding:function(){throw Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(){throw Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(e){var t=.001*Dg.call(Po),i=Math.floor(t);return t=Math.floor(t%1*1e9),e&&(i-=e[0],t-=e[1],0>t&&(i--,t+=1e9)),[i,t]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-zg)/1e3}},Cn=typeof Object.create=="function"?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){function i(){}e.super_=t,i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e},Ag=/%[sdj%]/g;function Zh(e){if(!po(e)){for(var t=[],i=0;i<arguments.length;i++)t.push(nr(arguments[i]));return t.join(" ")}i=1;var r=arguments,n=r.length;t=String(e).replace(Ag,function(s){if(s==="%%")return"%";if(i>=n)return s;switch(s){case"%s":return String(r[i++]);case"%d":return Number(r[i++]);case"%j":try{return JSON.stringify(r[i++])}catch{return"[Circular]"}default:return s}});for(var o=r[i];i<n;o=r[++i])t=o!==null&&Yn(o)?t+(" "+nr(o)):t+(" "+o);return t}function Ed(e,t){if(Lr(uo.process))return function(){return Ed(e,t).apply(this,arguments)};if(us.noDeprecation===!0)return e;var i=!1;return function(){if(!i){if(us.throwDeprecation)throw Error(t);us.traceDeprecation?console.trace(t):console.error(t),i=!0}return e.apply(this,arguments)}}var uc={},fu;function Ny(e){return Lr(fu)&&(fu=us.env.NODE_DEBUG||""),e=e.toUpperCase(),uc[e]||(new RegExp("\\b"+e+"\\b","i").test(fu)?uc[e]=function(){var t=Zh.apply(null,arguments);console.error("%s %d: %s",e,0,t)}:uc[e]=function(){}),uc[e]}function nr(e,t){var i={seen:[],stylize:qg};return 3<=arguments.length&&(i.depth=arguments[2]),4<=arguments.length&&(i.colors=arguments[3]),kd(t)?i.showHidden=t:t&&Oy(i,t),Lr(i.showHidden)&&(i.showHidden=!1),Lr(i.depth)&&(i.depth=2),Lr(i.colors)&&(i.colors=!1),Lr(i.customInspect)&&(i.customInspect=!0),i.colors&&(i.stylize=Qg),oa(i,e,i.depth)}nr.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};nr.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function Qg(e,t){return(t=nr.styles[t])?"\x1B["+nr.colors[t][0]+"m"+e+"\x1B["+nr.colors[t][1]+"m":e}function qg(e){return e}function $g(e){var t={};return e.forEach(function(i){t[i]=!0}),t}function oa(e,t,i){if(e.customInspect&&t&&ds(t.inspect)&&t.inspect!==nr&&(!t.constructor||t.constructor.prototype!==t)){var r=t.inspect(i,e);return po(r)||(r=oa(e,r,i)),r}if(r=eZ(e,t))return r;var n=Object.keys(t),o=$g(n);if(e.showHidden&&(n=Object.getOwnPropertyNames(t)),cl(t)&&(0<=n.indexOf("message")||0<=n.indexOf("description")))return pu(t);if(n.length===0){if(ds(t))return e.stylize("[Function"+(t.name?": "+t.name:"")+"]","special");if(hs(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(Tl(t))return e.stylize(Date.prototype.toString.call(t),"date");if(cl(t))return pu(t)}r="";var s=!1,u=["{","}"];return Jy(t)&&(s=!0,u=["[","]"]),ds(t)&&(r=" [Function"+(t.name?": "+t.name:"")+"]"),hs(t)&&(r=" "+RegExp.prototype.toString.call(t)),Tl(t)&&(r=" "+Date.prototype.toUTCString.call(t)),cl(t)&&(r=" "+pu(t)),n.length===0&&(!s||t.length==0)?u[0]+r+u[1]:0>i?hs(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special"):(e.seen.push(t),n=s?tZ(e,t,i,o,n):n.map(function(l){return Sh(e,t,i,o,l,s)}),e.seen.pop(),iZ(n,r,u))}function eZ(e,t){if(Lr(t))return e.stylize("undefined","undefined");if(po(t))return t="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'",e.stylize(t,"string");if(Fy(t))return e.stylize(""+t,"number");if(kd(t))return e.stylize(""+t,"boolean");if(t===null)return e.stylize("null","null")}function pu(e){return"["+Error.prototype.toString.call(e)+"]"}function tZ(e,t,i,r,n){for(var o=[],s=0,u=t.length;s<u;++s)Object.prototype.hasOwnProperty.call(t,String(s))?o.push(Sh(e,t,i,r,String(s),!0)):o.push("");return n.forEach(function(l){l.match(/^\d+$/)||o.push(Sh(e,t,i,r,l,!0))}),o}function Sh(e,t,i,r,n,o){var s,u;if(t=Object.getOwnPropertyDescriptor(t,n)||{value:t[n]},t.get?u=t.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):t.set&&(u=e.stylize("[Setter]","special")),Object.prototype.hasOwnProperty.call(r,n)||(s="["+n+"]"),u||(0>e.seen.indexOf(t.value)?(u=i===null?oa(e,t.value,null):oa(e,t.value,i-1),-1<u.indexOf(`
`)&&(u=o?u.split(`
`).map(function(l){return"  "+l}).join(`
`).substr(2):`
`+u.split(`
`).map(function(l){return"   "+l}).join(`
`))):u=e.stylize("[Circular]","special")),Lr(s)){if(o&&n.match(/^\d+$/))return u;s=JSON.stringify(""+n),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+u}function iZ(e,t,i){return 60<e.reduce(function(r,n){return n.indexOf(`
`),r+n.replace(/\u001b\[\d\d?m/g,"").length+1},0)?i[0]+(t===""?"":t+`
 `)+" "+e.join(`,
  `)+" "+i[1]:i[0]+t+" "+e.join(", ")+" "+i[1]}function Jy(e){return Array.isArray(e)}function kd(e){return typeof e=="boolean"}function Fy(e){return typeof e=="number"}function po(e){return typeof e=="string"}function Lr(e){return e===void 0}function hs(e){return Yn(e)&&Object.prototype.toString.call(e)==="[object RegExp]"}function Yn(e){return typeof e=="object"&&e!==null}function Tl(e){return Yn(e)&&Object.prototype.toString.call(e)==="[object Date]"}function cl(e){return Yn(e)&&(Object.prototype.toString.call(e)==="[object Error]"||e instanceof Error)}function ds(e){return typeof e=="function"}function bh(e){return e===null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||typeof e=="symbol"||typeof e>"u"}function mu(e){return 10>e?"0"+e.toString(10):e.toString(10)}var rZ="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");function nZ(){var e=new Date,t=[mu(e.getHours()),mu(e.getMinutes()),mu(e.getSeconds())].join(":");return[e.getDate(),rZ[e.getMonth()],t].join(" ")}function Oy(e,t){if(!t||!Yn(t))return e;for(var i=Object.keys(t),r=i.length;r--;)e[i[r]]=t[i[r]];return e}var al={inherits:Cn,_extend:Oy,log:function(){console.log("%s - %s",nZ(),Zh.apply(null,arguments))},isBuffer:function(e){return Wr(e)},isPrimitive:bh,isFunction:ds,isError:cl,isDate:Tl,isObject:Yn,isRegExp:hs,isUndefined:Lr,isSymbol:function(e){return typeof e=="symbol"},isString:po,isNumber:Fy,isNullOrUndefined:function(e){return e==null},isNull:function(e){return e===null},isBoolean:kd,isArray:Jy,inspect:nr,deprecate:Ed,format:Zh,debuglog:Ny};function Wp(e,t){if(e===t)return 0;for(var i=e.length,r=t.length,n=0,o=Math.min(i,r);n<o;++n)if(e[n]!==t[n]){i=e[n],r=t[n];break}return i<r?-1:r<i?1:0}var oZ=Object.prototype.hasOwnProperty,Ip=Object.keys||function(e){var t=[],i;for(i in e)oZ.call(e,i)&&t.push(i);return t},Lp=Array.prototype.slice,yu;function By(){return typeof yu<"u"?yu:yu=function(){return function(){}.name==="foo"}()}function wp(e){return Wr(e)||typeof uo.ArrayBuffer!="function"?!1:typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e?!!(e instanceof DataView||e.buffer&&e.buffer instanceof ArrayBuffer):!1}function it(e,t){e||ei(e,!0,t,"==",Kd)}var sZ=/\s*function\s+([^\(\s]*)\s*/;function Uy(e){if(ds(e))return By()?e.name:(e=e.toString().match(sZ))&&e[1]}it.AssertionError=xd;function xd(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=Tp(Xp(this.actual),128)+" "+this.operator+" "+Tp(Xp(this.expected),128),this.generatedMessage=!0);var t=e.stackStartFunction||ei;Error.captureStackTrace?Error.captureStackTrace(this,t):(e=Error(),e.stack&&(e=e.stack,t=Uy(t),t=e.indexOf(`
`+t),0<=t&&(t=e.indexOf(`
`,t+1),e=e.substring(t+1)),this.stack=e))}Cn(xd,Error);function Tp(e,t){return typeof e=="string"?e.length<t?e:e.slice(0,t):e}function Xp(e){return By()||!ds(e)?nr(e):(e=Uy(e),"[Function"+(e?": "+e:"")+"]")}function ei(e,t,i,r,n){throw new xd({message:i,actual:e,expected:t,operator:r,stackStartFunction:n})}it.fail=ei;function Kd(e,t){e||ei(e,!0,t,"==",Kd)}it.ok=Kd;it.equal=jy;function jy(e,t,i){e!=t&&ei(e,t,i,"==",jy)}it.notEqual=Hy;function Hy(e,t,i){e==t&&ei(e,t,i,"!=",Hy)}it.deepEqual=Dy;function Dy(e,t,i){Gs(e,t,!1)||ei(e,t,i,"deepEqual",Dy)}it.deepStrictEqual=zy;function zy(e,t,i){Gs(e,t,!0)||ei(e,t,i,"deepStrictEqual",zy)}function Gs(e,t,i,r){if(e===t)return!0;if(Wr(e)&&Wr(t))return Wp(e,t)===0;if(Tl(e)&&Tl(t))return e.getTime()===t.getTime();if(hs(e)&&hs(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(e!==null&&typeof e=="object"||t!==null&&typeof t=="object"){if(!wp(e)||!wp(t)||Object.prototype.toString.call(e)!==Object.prototype.toString.call(t)||e instanceof Float32Array||e instanceof Float64Array){if(Wr(e)!==Wr(t))return!1;r=r||{actual:[],expected:[]};var n=r.actual.indexOf(e);return n!==-1&&n===r.expected.indexOf(t)?!0:(r.actual.push(e),r.expected.push(t),lZ(e,t,i,r))}return Wp(new Uint8Array(e.buffer),new Uint8Array(t.buffer))===0}return i?e===t:e==t}function lZ(e,t,i,r){if(e==null||t===null||t===void 0)return!1;if(bh(e)||bh(t))return e===t;if(i&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var n=Object.prototype.toString.call(e)=="[object Arguments]",o=Object.prototype.toString.call(t)=="[object Arguments]";if(n&&!o||!n&&o)return!1;if(n)return e=Lp.call(e),t=Lp.call(t),Gs(e,t,i);n=Ip(e);var s=Ip(t);if(n.length!==s.length)return!1;for(n.sort(),s.sort(),o=n.length-1;0<=o;o--)if(n[o]!==s[o])return!1;for(o=n.length-1;0<=o;o--)if(s=n[o],!Gs(e[s],t[s],i,r))return!1;return!0}it.notDeepEqual=Ay;function Ay(e,t,i){Gs(e,t,!1)&&ei(e,t,i,"notDeepEqual",Ay)}it.notDeepStrictEqual=Qy;function Qy(e,t,i){Gs(e,t,!0)&&ei(e,t,i,"notDeepStrictEqual",Qy)}it.strictEqual=qy;function qy(e,t,i){e!==t&&ei(e,t,i,"===",qy)}it.notStrictEqual=$y;function $y(e,t,i){e===t&&ei(e,t,i,"!==",$y)}function Vp(e,t){if(!e||!t)return!1;if(Object.prototype.toString.call(t)=="[object RegExp]")return t.test(e);try{if(e instanceof t)return!0}catch{}return Error.isPrototypeOf(t)?!1:t.call({},e)===!0}function ev(e,t,i,r){if(typeof t!="function")throw new TypeError('"block" argument must be a function');typeof i=="string"&&(r=i,i=null);try{t()}catch(u){var n=u}t=n,r=(i&&i.name?" ("+i.name+").":".")+(r?" "+r:"."),e&&!t&&ei(t,i,"Missing expected exception"+r),n=typeof r=="string";var o=!e&&cl(t),s=!e&&t&&!i;if((o&&n&&Vp(t,i)||s)&&ei(t,i,"Got unwanted exception"+r),e&&t&&i&&!Vp(t,i)||!e&&t)throw t}it.throws=cZ;function cZ(e,t,i){ev(!0,e,t,i)}it.doesNotThrow=aZ;function aZ(e,t,i){ev(!1,e,t,i)}it.ifError=uZ;function uZ(e){if(e)throw e}var ul=Et(function(e,t){function i(a){return function(h){function p(d){for(var c=[],y=1;y<arguments.length;y++)c[y-1]=arguments[y];return c=h.call(this,r(d,c))||this,c.code=d,c[u]=d,c.name=h.prototype.name+" ["+c[u]+"]",c}return s(p,h),p}(a)}function r(a,h){it.strictEqual(typeof a,"string");var p=l[a];if(it(p,"An invalid error message key was used: "+a+"."),typeof p=="function")a=p;else{if(a=al.format,h===void 0||h.length===0)return p;h.unshift(p)}return String(a.apply(null,h))}function n(a,h){l[a]=typeof h=="function"?h:String(h)}function o(a,h){if(it(a,"expected is required"),it(typeof h=="string","thing is required"),Array.isArray(a)){var p=a.length;return it(0<p,"At least one expected value needs to be specified"),a=a.map(function(d){return String(d)}),2<p?"one of "+h+" "+a.slice(0,p-1).join(", ")+", or "+a[p-1]:p===2?"one of "+h+" "+a[0]+" or "+a[1]:"of "+h+" "+a[0]}return"of "+h+" "+String(a)}var s=at&&at.__extends||function(){function a(h,p){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,c){d.__proto__=c}||function(d,c){for(var y in c)c.hasOwnProperty(y)&&(d[y]=c[y])},a(h,p)}return function(h,p){function d(){this.constructor=h}a(h,p),h.prototype=p===null?Object.create(p):(d.prototype=p.prototype,new d)}}();Object.defineProperty(t,"__esModule",{value:!0});var u=typeof Symbol>"u"?"_kCode":Symbol("code"),l={};e=function(a){function h(p){if(typeof p!="object"||p===null)throw new t.TypeError("ERR_INVALID_ARG_TYPE","options","object");var d=p.message?a.call(this,p.message)||this:a.call(this,al.inspect(p.actual).slice(0,128)+" "+(p.operator+" "+al.inspect(p.expected).slice(0,128)))||this;return d.generatedMessage=!p.message,d.name="AssertionError [ERR_ASSERTION]",d.code="ERR_ASSERTION",d.actual=p.actual,d.expected=p.expected,d.operator=p.operator,t.Error.captureStackTrace(d,p.stackStartFunction),d}return s(h,a),h}(at.Error),t.AssertionError=e,t.message=r,t.E=n,t.Error=i(at.Error),t.TypeError=i(at.TypeError),t.RangeError=i(at.RangeError),n("ERR_ARG_NOT_ITERABLE","%s must be iterable"),n("ERR_ASSERTION","%s"),n("ERR_BUFFER_OUT_OF_BOUNDS",function(a,h){return h?"Attempt to write outside buffer bounds":'"'+a+'" is outside of buffer bounds'}),n("ERR_CHILD_CLOSED_BEFORE_REPLY","Child closed before reply received"),n("ERR_CONSOLE_WRITABLE_STREAM","Console expects a writable stream instance for %s"),n("ERR_CPU_USAGE","Unable to obtain cpu usage %s"),n("ERR_DNS_SET_SERVERS_FAILED",function(a,h){return'c-ares failed to set servers: "'+a+'" ['+h+"]"}),n("ERR_FALSY_VALUE_REJECTION","Promise was rejected with falsy value"),n("ERR_ENCODING_NOT_SUPPORTED",function(a){return'The "'+a+'" encoding is not supported'}),n("ERR_ENCODING_INVALID_ENCODED_DATA",function(a){return"The encoded data was not valid for encoding "+a}),n("ERR_HTTP_HEADERS_SENT","Cannot render headers after they are sent to the client"),n("ERR_HTTP_INVALID_STATUS_CODE","Invalid status code: %s"),n("ERR_HTTP_TRAILER_INVALID","Trailers are invalid with this transfer encoding"),n("ERR_INDEX_OUT_OF_RANGE","Index out of range"),n("ERR_INVALID_ARG_TYPE",function(a,h,p){if(it(a,"name is required"),h.includes("not ")){var d="must not be";h=h.split("not ")[1]}else d="must be";if(Array.isArray(a))d="The "+a.map(function(y){return'"'+y+'"'}).join(", ")+" arguments "+d+" "+o(h,"type");else if(a.includes(" argument"))d="The "+a+" "+d+" "+o(h,"type");else{var c=a.includes(".")?"property":"argument";d='The "'+a+'" '+c+" "+d+" "+o(h,"type")}return 3<=arguments.length&&(d+=". Received type "+(p!==null?typeof p:"null")),d}),n("ERR_INVALID_ARRAY_LENGTH",function(a,h,p){return it.strictEqual(typeof p,"number"),'The array "'+a+'" (length '+p+") must be of length "+h+"."}),n("ERR_INVALID_BUFFER_SIZE","Buffer size must be a multiple of %s"),n("ERR_INVALID_CALLBACK","Callback must be a function"),n("ERR_INVALID_CHAR","Invalid character in %s"),n("ERR_INVALID_CURSOR_POS","Cannot set cursor row without setting its column"),n("ERR_INVALID_FD",'"fd" must be a positive integer: %s'),n("ERR_INVALID_FILE_URL_HOST",'File URL host must be "localhost" or empty on %s'),n("ERR_INVALID_FILE_URL_PATH","File URL path %s"),n("ERR_INVALID_HANDLE_TYPE","This handle type cannot be sent"),n("ERR_INVALID_IP_ADDRESS","Invalid IP address: %s"),n("ERR_INVALID_OPT_VALUE",function(a,h){return'The value "'+String(h)+'" is invalid for option "'+a+'"'}),n("ERR_INVALID_OPT_VALUE_ENCODING",function(a){return'The value "'+String(a)+'" is invalid for option "encoding"'}),n("ERR_INVALID_REPL_EVAL_CONFIG",'Cannot specify both "breakEvalOnSigint" and "eval" for REPL'),n("ERR_INVALID_SYNC_FORK_INPUT","Asynchronous forks do not support Buffer, Uint8Array or string input: %s"),n("ERR_INVALID_THIS",'Value of "this" must be of type %s'),n("ERR_INVALID_TUPLE","%s must be an iterable %s tuple"),n("ERR_INVALID_URL","Invalid URL: %s"),n("ERR_INVALID_URL_SCHEME",function(a){return"The URL must be "+o(a,"scheme")}),n("ERR_IPC_CHANNEL_CLOSED","Channel closed"),n("ERR_IPC_DISCONNECTED","IPC channel is already disconnected"),n("ERR_IPC_ONE_PIPE","Child process can have only one IPC pipe"),n("ERR_IPC_SYNC_FORK","IPC cannot be used with synchronous forks"),n("ERR_MISSING_ARGS",function(){for(var a=[],h=0;h<arguments.length;h++)a[h]=arguments[h];it(0<a.length,"At least one arg needs to be specified"),h="The ";var p=a.length;switch(a=a.map(function(d){return'"'+d+'"'}),p){case 1:h+=a[0]+" argument";break;case 2:h+=a[0]+" and "+a[1]+" arguments";break;default:h+=a.slice(0,p-1).join(", "),h+=", and "+a[p-1]+" arguments"}return h+" must be specified"}),n("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),n("ERR_NAPI_CONS_FUNCTION","Constructor must be a function"),n("ERR_NAPI_CONS_PROTOTYPE_OBJECT","Constructor.prototype must be an object"),n("ERR_NO_CRYPTO","Node.js is not compiled with OpenSSL crypto support"),n("ERR_NO_LONGER_SUPPORTED","%s is no longer supported"),n("ERR_PARSE_HISTORY_DATA","Could not parse history data in %s"),n("ERR_SOCKET_ALREADY_BOUND","Socket is already bound"),n("ERR_SOCKET_BAD_PORT","Port should be > 0 and < 65536"),n("ERR_SOCKET_BAD_TYPE","Bad socket type specified. Valid types are: udp4, udp6"),n("ERR_SOCKET_CANNOT_SEND","Unable to send data"),n("ERR_SOCKET_CLOSED","Socket is closed"),n("ERR_SOCKET_DGRAM_NOT_RUNNING","Not running"),n("ERR_STDERR_CLOSE","process.stderr cannot be closed"),n("ERR_STDOUT_CLOSE","process.stdout cannot be closed"),n("ERR_STREAM_WRAP","Stream has StringDecoder set or is in objectMode"),n("ERR_TLS_CERT_ALTNAME_INVALID","Hostname/IP does not match certificate's altnames: %s"),n("ERR_TLS_DH_PARAM_SIZE",function(a){return"DH parameter size "+a+" is less than 2048"}),n("ERR_TLS_HANDSHAKE_TIMEOUT","TLS handshake timeout"),n("ERR_TLS_RENEGOTIATION_FAILED","Failed to renegotiate"),n("ERR_TLS_REQUIRED_SERVER_NAME",'"servername" is required parameter for Server.addContext'),n("ERR_TLS_SESSION_ATTACK","TSL session renegotiation attack detected"),n("ERR_TRANSFORM_ALREADY_TRANSFORMING","Calling transform done when still transforming"),n("ERR_TRANSFORM_WITH_LENGTH_0","Calling transform done when writableState.length != 0"),n("ERR_UNKNOWN_ENCODING","Unknown encoding: %s"),n("ERR_UNKNOWN_SIGNAL","Unknown signal: %s"),n("ERR_UNKNOWN_STDIN_TYPE","Unknown stdin file type"),n("ERR_UNKNOWN_STREAM_TYPE","Unknown stream file type"),n("ERR_V8BREAKITERATOR","Full ICU data not installed. See https://github.com/nodejs/node/wiki/Intl")});Ft(ul);var bi=Et(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ENCODING_UTF8="utf8",t.assertEncoding=function(i){if(i&&!ze.Buffer.isEncoding(i))throw new ul.TypeError("ERR_INVALID_OPT_VALUE_ENCODING",i)},t.strToEncoding=function(i,r){return r&&r!==t.ENCODING_UTF8?r==="buffer"?new ze.Buffer(i):new ze.Buffer(i).toString(r):i}});Ft(bi);var Md=Et(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var i=Ie.constants.S_IFMT,r=Ie.constants.S_IFDIR,n=Ie.constants.S_IFREG,o=Ie.constants.S_IFBLK,s=Ie.constants.S_IFCHR,u=Ie.constants.S_IFLNK,l=Ie.constants.S_IFIFO,a=Ie.constants.S_IFSOCK;e=function(){function h(){this.name="",this.mode=0}return h.build=function(p,d){var c=new h,y=p.getNode().mode;return c.name=bi.strToEncoding(p.getName(),d),c.mode=y,c},h.prototype._checkModeProperty=function(p){return(this.mode&i)===p},h.prototype.isDirectory=function(){return this._checkModeProperty(r)},h.prototype.isFile=function(){return this._checkModeProperty(n)},h.prototype.isBlockDevice=function(){return this._checkModeProperty(o)},h.prototype.isCharacterDevice=function(){return this._checkModeProperty(s)},h.prototype.isSymbolicLink=function(){return this._checkModeProperty(u)},h.prototype.isFIFO=function(){return this._checkModeProperty(l)},h.prototype.isSocket=function(){return this._checkModeProperty(a)},h}(),t.Dirent=e,t.default=e});Ft(Md);function tv(e,t){for(var i=0,r=e.length-1;0<=r;r--){var n=e[r];n==="."?e.splice(r,1):n===".."?(e.splice(r,1),i++):i&&(e.splice(r,1),i--)}if(t)for(;i--;i)e.unshift("..");return e}var vu=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;function Gh(){for(var e="",t=!1,i=arguments.length-1;-1<=i&&!t;i--){var r=0<=i?arguments[i]:"/";if(typeof r!="string")throw new TypeError("Arguments to path.resolve must be strings");r&&(e=r+"/"+e,t=r.charAt(0)==="/")}return e=tv(Pd(e.split("/"),function(n){return!!n}),!t).join("/"),(t?"/":"")+e||"."}function Ep(e){var t=iv(e),i=hZ(e,-1)==="/";return(e=tv(Pd(e.split("/"),function(r){return!!r}),!t).join("/"))||t||(e="."),e&&i&&(e+="/"),(t?"/":"")+e}function iv(e){return e.charAt(0)==="/"}function Ch(e,t){function i(s){for(var u=0;u<s.length&&s[u]==="";u++);for(var l=s.length-1;0<=l&&s[l]==="";l--);return u>l?[]:s.slice(u,l-u+1)}e=Gh(e).substr(1),t=Gh(t).substr(1),e=i(e.split("/")),t=i(t.split("/"));for(var r=Math.min(e.length,t.length),n=r,o=0;o<r;o++)if(e[o]!==t[o]){n=o;break}for(r=[],o=n;o<e.length;o++)r.push("..");return r=r.concat(t.slice(n)),r.join("/")}var _u={extname:function(e){return vu.exec(e).slice(1)[3]},basename:function(e,t){return e=vu.exec(e).slice(1)[2],t&&e.substr(-1*t.length)===t&&(e=e.substr(0,e.length-t.length)),e},dirname:function(e){var t=vu.exec(e).slice(1);return e=t[0],t=t[1],!e&&!t?".":(t&&(t=t.substr(0,t.length-1)),e+t)},sep:"/",delimiter:":",relative:Ch,join:function(){var e=Array.prototype.slice.call(arguments,0);return Ep(Pd(e,function(t){if(typeof t!="string")throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},isAbsolute:iv,normalize:Ep,resolve:Gh};function Pd(e,t){if(e.filter)return e.filter(t);for(var i=[],r=0;r<e.length;r++)t(e[r],r,e)&&i.push(e[r]);return i}var hZ="ab".substr(-1)==="b"?function(e,t,i){return e.substr(t,i)}:function(e,t,i){return 0>t&&(t=e.length+t),e.substr(t,i)},es=Et(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),e=typeof setImmediate=="function"?setImmediate.bind(at):setTimeout.bind(at),t.default=e});Ft(es);var Mt=Et(function(e,t){function i(){var r=us||{};return r.getuid||(r.getuid=function(){return 0}),r.getgid||(r.getgid=function(){return 0}),r.cwd||(r.cwd=function(){return"/"}),r.nextTick||(r.nextTick=es.default),r.emitWarning||(r.emitWarning=function(n,o){console.warn(""+o+(o?": ":"")+n)}),r.env||(r.env={}),r}Object.defineProperty(t,"__esModule",{value:!0}),t.createProcess=i,t.default=i()});Ft(Mt);function mn(){}mn.prototype=Object.create(null);function Le(){Le.init.call(this)}Le.EventEmitter=Le;Le.usingDomains=!1;Le.prototype.domain=void 0;Le.prototype._events=void 0;Le.prototype._maxListeners=void 0;Le.defaultMaxListeners=10;Le.init=function(){this.domain=null,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new mn,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Le.prototype.setMaxListeners=function(e){if(typeof e!="number"||0>e||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this};Le.prototype.getMaxListeners=function(){return this._maxListeners===void 0?Le.defaultMaxListeners:this._maxListeners};Le.prototype.emit=function(e){var t,i,r=e==="error";if(t=this._events)r=r&&t.error==null;else if(!r)return!1;var n=this.domain;if(r){if(t=arguments[1],n)t||(t=Error('Uncaught, unspecified "error" event')),t.domainEmitter=this,t.domain=n,t.domainThrown=!1,n.emit("error",t);else throw t instanceof Error?t:(n=Error('Uncaught, unspecified "error" event. ('+t+")"),n.context=t,n);return!1}if(n=t[e],!n)return!1;t=typeof n=="function";var o=arguments.length;switch(o){case 1:if(t)n.call(this);else for(t=n.length,n=Us(n,t),r=0;r<t;++r)n[r].call(this);break;case 2:if(r=arguments[1],t)n.call(this,r);else for(t=n.length,n=Us(n,t),o=0;o<t;++o)n[o].call(this,r);break;case 3:if(r=arguments[1],o=arguments[2],t)n.call(this,r,o);else for(t=n.length,n=Us(n,t),i=0;i<t;++i)n[i].call(this,r,o);break;case 4:if(r=arguments[1],o=arguments[2],i=arguments[3],t)n.call(this,r,o,i);else{t=n.length,n=Us(n,t);for(var s=0;s<t;++s)n[s].call(this,r,o,i)}break;default:for(r=Array(o-1),i=1;i<o;i++)r[i-1]=arguments[i];if(t)n.apply(this,r);else for(t=n.length,n=Us(n,t),o=0;o<t;++o)n[o].apply(this,r)}return!0};function rv(e,t,i,r){var n;if(typeof i!="function")throw new TypeError('"listener" argument must be a function');if(n=e._events){n.newListener&&(e.emit("newListener",t,i.listener?i.listener:i),n=e._events);var o=n[t]}else n=e._events=new mn,e._eventsCount=0;return o?(typeof o=="function"?o=n[t]=r?[i,o]:[o,i]:r?o.unshift(i):o.push(i),o.warned||(i=e._maxListeners===void 0?Le.defaultMaxListeners:e._maxListeners)&&0<i&&o.length>i&&(o.warned=!0,i=Error("Possible EventEmitter memory leak detected. "+o.length+" "+t+" listeners added. Use emitter.setMaxListeners() to increase limit"),i.name="MaxListenersExceededWarning",i.emitter=e,i.type=t,i.count=o.length,typeof console.warn=="function"?console.warn(i):console.log(i))):(n[t]=i,++e._eventsCount),e}Le.prototype.addListener=function(e,t){return rv(this,e,t,!1)};Le.prototype.on=Le.prototype.addListener;Le.prototype.prependListener=function(e,t){return rv(this,e,t,!0)};function nv(e,t,i){function r(){e.removeListener(t,r),n||(n=!0,i.apply(e,arguments))}var n=!1;return r.listener=i,r}Le.prototype.once=function(e,t){if(typeof t!="function")throw new TypeError('"listener" argument must be a function');return this.on(e,nv(this,e,t)),this};Le.prototype.prependOnceListener=function(e,t){if(typeof t!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(e,nv(this,e,t)),this};Le.prototype.removeListener=function(e,t){var i;if(typeof t!="function")throw new TypeError('"listener" argument must be a function');var r=this._events;if(!r)return this;var n=r[e];if(!n)return this;if(n===t||n.listener&&n.listener===t)--this._eventsCount===0?this._events=new mn:(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if(typeof n!="function"){var o=-1;for(i=n.length;0<i--;)if(n[i]===t||n[i].listener&&n[i].listener===t){var s=n[i].listener;o=i;break}if(0>o)return this;if(n.length===1){if(n[0]=void 0,--this._eventsCount===0)return this._events=new mn,this;delete r[e]}else{i=o+1;for(var u=n.length;i<u;o+=1,i+=1)n[o]=n[i];n.pop()}r.removeListener&&this.emit("removeListener",e,s||t)}return this};Le.prototype.removeAllListeners=function(e){var t=this._events;if(!t)return this;if(!t.removeListener)return arguments.length===0?(this._events=new mn,this._eventsCount=0):t[e]&&(--this._eventsCount===0?this._events=new mn:delete t[e]),this;if(arguments.length===0){t=Object.keys(t);for(var i=0,r;i<t.length;++i)r=t[i],r!=="removeListener"&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=new mn,this._eventsCount=0,this}if(t=t[e],typeof t=="function")this.removeListener(e,t);else if(t)do this.removeListener(e,t[t.length-1]);while(t[0]);return this};Le.prototype.listeners=function(e){var t=this._events;if(t)if(e=t[e])if(typeof e=="function")e=[e.listener||e];else{t=Array(e.length);for(var i=0;i<t.length;++i)t[i]=e[i].listener||e[i];e=t}else e=[];else e=[];return e};Le.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):ov.call(e,t)};Le.prototype.listenerCount=ov;function ov(e){var t=this._events;if(t){if(e=t[e],typeof e=="function")return 1;if(e)return e.length}return 0}Le.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]};function Us(e,t){for(var i=Array(t);t--;)i[t]=e[t];return i}var hl=Et(function(e,t){var i=at&&at.__extends||function(){function l(a,h){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,d){p.__proto__=d}||function(p,d){for(var c in d)d.hasOwnProperty(c)&&(p[c]=d[c])},l(a,h)}return function(a,h){function p(){this.constructor=a}l(a,h),a.prototype=h===null?Object.create(h):(p.prototype=h.prototype,new p)}}();Object.defineProperty(t,"__esModule",{value:!0});var r=Ie.constants.S_IFMT,n=Ie.constants.S_IFDIR,o=Ie.constants.S_IFREG,s=Ie.constants.S_IFLNK,u=Ie.constants.O_APPEND;t.SEP="/",e=function(l){function a(h,p){p===void 0&&(p=438);var d=l.call(this)||this;return d.uid=Mt.default.getuid(),d.gid=Mt.default.getgid(),d.atime=new Date,d.mtime=new Date,d.ctime=new Date,d.perm=438,d.mode=o,d.nlink=1,d.perm=p,d.mode|=p,d.ino=h,d}return i(a,l),a.prototype.getString=function(h){return h===void 0&&(h="utf8"),this.getBuffer().toString(h)},a.prototype.setString=function(h){this.buf=ze.bufferFrom(h,"utf8"),this.touch()},a.prototype.getBuffer=function(){return this.buf||this.setBuffer(ze.bufferAllocUnsafe(0)),ze.bufferFrom(this.buf)},a.prototype.setBuffer=function(h){this.buf=ze.bufferFrom(h),this.touch()},a.prototype.getSize=function(){return this.buf?this.buf.length:0},a.prototype.setModeProperty=function(h){this.mode=this.mode&~r|h},a.prototype.setIsFile=function(){this.setModeProperty(o)},a.prototype.setIsDirectory=function(){this.setModeProperty(n)},a.prototype.setIsSymlink=function(){this.setModeProperty(s)},a.prototype.isFile=function(){return(this.mode&r)===o},a.prototype.isDirectory=function(){return(this.mode&r)===n},a.prototype.isSymlink=function(){return(this.mode&r)===s},a.prototype.makeSymlink=function(h){this.symlink=h,this.setIsSymlink()},a.prototype.write=function(h,p,d,c){if(p===void 0&&(p=0),d===void 0&&(d=h.length),c===void 0&&(c=0),this.buf||(this.buf=ze.bufferAllocUnsafe(0)),c+d>this.buf.length){var y=ze.bufferAllocUnsafe(c+d);this.buf.copy(y,0,0,this.buf.length),this.buf=y}return h.copy(this.buf,c,p,p+d),this.touch(),d},a.prototype.read=function(h,p,d,c){return p===void 0&&(p=0),d===void 0&&(d=h.byteLength),c===void 0&&(c=0),this.buf||(this.buf=ze.bufferAllocUnsafe(0)),d>h.byteLength&&(d=h.byteLength),d+c>this.buf.length&&(d=this.buf.length-c),this.buf.copy(h,p,c,c+d),d},a.prototype.truncate=function(h){if(h===void 0&&(h=0),h)if(this.buf||(this.buf=ze.bufferAllocUnsafe(0)),h<=this.buf.length)this.buf=this.buf.slice(0,h);else{var p=ze.bufferAllocUnsafe(0);this.buf.copy(p),p.fill(0,h)}else this.buf=ze.bufferAllocUnsafe(0);this.touch()},a.prototype.chmod=function(h){this.perm=h,this.mode=this.mode&-512|h,this.touch()},a.prototype.chown=function(h,p){this.uid=h,this.gid=p,this.touch()},a.prototype.touch=function(){this.mtime=new Date,this.emit("change",this)},a.prototype.canRead=function(h,p){return h===void 0&&(h=Mt.default.getuid()),p===void 0&&(p=Mt.default.getgid()),!!(this.perm&4||p===this.gid&&this.perm&32||h===this.uid&&this.perm&256)},a.prototype.canWrite=function(h,p){return h===void 0&&(h=Mt.default.getuid()),p===void 0&&(p=Mt.default.getgid()),!!(this.perm&2||p===this.gid&&this.perm&16||h===this.uid&&this.perm&128)},a.prototype.del=function(){this.emit("delete",this)},a.prototype.toJSON=function(){return{ino:this.ino,uid:this.uid,gid:this.gid,atime:this.atime.getTime(),mtime:this.mtime.getTime(),ctime:this.ctime.getTime(),perm:this.perm,mode:this.mode,nlink:this.nlink,symlink:this.symlink,data:this.getString()}},a}(Le.EventEmitter),t.Node=e,e=function(l){function a(h,p,d){var c=l.call(this)||this;return c.children={},c.steps=[],c.ino=0,c.length=0,c.vol=h,c.parent=p,c.steps=p?p.steps.concat([d]):[d],c}return i(a,l),a.prototype.setNode=function(h){this.node=h,this.ino=h.ino},a.prototype.getNode=function(){return this.node},a.prototype.createChild=function(h,p){p===void 0&&(p=this.vol.createNode());var d=new a(this.vol,this,h);return d.setNode(p),p.isDirectory(),this.setChild(h,d),d},a.prototype.setChild=function(h,p){return p===void 0&&(p=new a(this.vol,this,h)),this.children[h]=p,p.parent=this,this.length++,this.emit("child:add",p,this),p},a.prototype.deleteChild=function(h){delete this.children[h.getName()],this.length--,this.emit("child:delete",h,this)},a.prototype.getChild=function(h){if(Object.hasOwnProperty.call(this.children,h))return this.children[h]},a.prototype.getPath=function(){return this.steps.join(t.SEP)},a.prototype.getName=function(){return this.steps[this.steps.length-1]},a.prototype.walk=function(h,p,d){if(p===void 0&&(p=h.length),d===void 0&&(d=0),d>=h.length||d>=p)return this;var c=this.getChild(h[d]);return c?c.walk(h,p,d+1):null},a.prototype.toJSON=function(){return{steps:this.steps,ino:this.ino,children:Object.keys(this.children)}},a}(Le.EventEmitter),t.Link=e,e=function(){function l(a,h,p,d){this.position=0,this.link=a,this.node=h,this.flags=p,this.fd=d}return l.prototype.getString=function(){return this.node.getString()},l.prototype.setString=function(a){this.node.setString(a)},l.prototype.getBuffer=function(){return this.node.getBuffer()},l.prototype.setBuffer=function(a){this.node.setBuffer(a)},l.prototype.getSize=function(){return this.node.getSize()},l.prototype.truncate=function(a){this.node.truncate(a)},l.prototype.seekTo=function(a){this.position=a},l.prototype.stats=function(){return cs.default.build(this.node)},l.prototype.write=function(a,h,p,d){return h===void 0&&(h=0),p===void 0&&(p=a.length),typeof d!="number"&&(d=this.position),this.flags&u&&(d=this.getSize()),a=this.node.write(a,h,p,d),this.position=d+a,a},l.prototype.read=function(a,h,p,d){return h===void 0&&(h=0),p===void 0&&(p=a.byteLength),typeof d!="number"&&(d=this.position),a=this.node.read(a,h,p,d),this.position=d+a,a},l.prototype.chmod=function(a){this.node.chmod(a)},l.prototype.chown=function(a,h){this.node.chown(a,h)},l}(),t.File=e});Ft(hl);var dZ=hl.Node,sv=Et(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(i,r,n){var o=setTimeout.apply(null,arguments);return o&&typeof o=="object"&&typeof o.unref=="function"&&o.unref(),o}});Ft(sv);function mo(){this.tail=this.head=null,this.length=0}mo.prototype.push=function(e){e={data:e,next:null},0<this.length?this.tail.next=e:this.head=e,this.tail=e,++this.length};mo.prototype.unshift=function(e){e={data:e,next:this.head},this.length===0&&(this.tail=e),this.head=e,++this.length};mo.prototype.shift=function(){if(this.length!==0){var e=this.head.data;return this.head=this.length===1?this.tail=null:this.head.next,--this.length,e}};mo.prototype.clear=function(){this.head=this.tail=null,this.length=0};mo.prototype.join=function(e){if(this.length===0)return"";for(var t=this.head,i=""+t.data;t=t.next;)i+=e+t.data;return i};mo.prototype.concat=function(e){if(this.length===0)return ue.alloc(0);if(this.length===1)return this.head.data;e=ue.allocUnsafe(e>>>0);for(var t=this.head,i=0;t;)t.data.copy(e,i),i+=t.data.length,t=t.next;return e};var fZ=ue.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function Pl(e){if(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),e&&!fZ(e))throw Error("Unknown encoding: "+e);switch(this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=mZ;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=yZ;break;default:this.write=pZ;return}this.charBuffer=new ue(6),this.charLength=this.charReceived=0}Pl.prototype.write=function(e){for(var t="";this.charLength;){if(t=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length,e.copy(this.charBuffer,this.charReceived,0,t),this.charReceived+=t,this.charReceived<this.charLength)return"";e=e.slice(t,e.length),t=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var i=t.charCodeAt(t.length-1);if(55296<=i&&56319>=i)this.charLength+=this.surrogateSize,t="";else{if(this.charReceived=this.charLength=0,e.length===0)return t;break}}this.detectIncompleteChar(e);var r=e.length;return this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,r),r-=this.charReceived),t+=e.toString(this.encoding,0,r),r=t.length-1,i=t.charCodeAt(r),55296<=i&&56319>=i?(i=this.surrogateSize,this.charLength+=i,this.charReceived+=i,this.charBuffer.copy(this.charBuffer,i,0,i),e.copy(this.charBuffer,0,0,i),t.substring(0,r)):t};Pl.prototype.detectIncompleteChar=function(e){for(var t=3<=e.length?3:e.length;0<t;t--){var i=e[e.length-t];if(t==1&&i>>5==6){this.charLength=2;break}if(2>=t&&i>>4==14){this.charLength=3;break}if(3>=t&&i>>3==30){this.charLength=4;break}}this.charReceived=t};Pl.prototype.end=function(e){var t="";return e&&e.length&&(t=this.write(e)),this.charReceived&&(e=this.encoding,t+=this.charBuffer.slice(0,this.charReceived).toString(e)),t};function pZ(e){return e.toString(this.encoding)}function mZ(e){this.charLength=(this.charReceived=e.length%2)?2:0}function yZ(e){this.charLength=(this.charReceived=e.length%3)?3:0}rt.ReadableState=lv;var Me=Ny("stream");Cn(rt,Le);function vZ(e,t,i){if(typeof e.prependListener=="function")return e.prependListener(t,i);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(i):e._events[t]=[i,e._events[t]]:e.on(t,i)}function lv(e,t){e=e||{},this.objectMode=!!e.objectMode,t instanceof Ti&&(this.objectMode=this.objectMode||!!e.readableObjectMode),t=e.highWaterMark;var i=this.objectMode?16:16384;this.highWaterMark=t||t===0?t:i,this.highWaterMark=~~this.highWaterMark,this.buffer=new mo,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.reading=this.endEmitted=this.ended=!1,this.sync=!0,this.resumeScheduled=this.readableListening=this.emittedReadable=this.needReadable=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.encoding=this.decoder=null,e.encoding&&(this.decoder=new Pl(e.encoding),this.encoding=e.encoding)}function rt(e){if(!(this instanceof rt))return new rt(e);this._readableState=new lv(e,this),this.readable=!0,e&&typeof e.read=="function"&&(this._read=e.read),Le.call(this)}rt.prototype.push=function(e,t){var i=this._readableState;return i.objectMode||typeof e!="string"||(t=t||i.defaultEncoding,t!==i.encoding&&(e=ue.from(e,t),t="")),cv(this,i,e,t,!1)};rt.prototype.unshift=function(e){return cv(this,this._readableState,e,"",!0)};rt.prototype.isPaused=function(){return this._readableState.flowing===!1};function cv(e,t,i,r,n){var o=i,s=null;if(Wr(o)||typeof o=="string"||o===null||o===void 0||t.objectMode||(s=new TypeError("Invalid non-string/buffer chunk")),o=s)e.emit("error",o);else if(i===null)t.reading=!1,t.ended||(t.decoder&&(i=t.decoder.end())&&i.length&&(t.buffer.push(i),t.length+=t.objectMode?1:i.length),t.ended=!0,sa(e));else if(t.objectMode||i&&0<i.length)if(t.ended&&!n)e.emit("error",Error("stream.push() after EOF"));else if(t.endEmitted&&n)e.emit("error",Error("stream.unshift() after end event"));else{if(t.decoder&&!n&&!r){i=t.decoder.write(i);var u=!t.objectMode&&i.length===0}n||(t.reading=!1),u||(t.flowing&&t.length===0&&!t.sync?(e.emit("data",i),e.read(0)):(t.length+=t.objectMode?1:i.length,n?t.buffer.unshift(i):t.buffer.push(i),t.needReadable&&sa(e))),t.readingMore||(t.readingMore=!0,pi(_Z,e,t))}else n||(t.reading=!1);return!t.ended&&(t.needReadable||t.length<t.highWaterMark||t.length===0)}rt.prototype.setEncoding=function(e){return this._readableState.decoder=new Pl(e),this._readableState.encoding=e,this};function kp(e,t){if(0>=e||t.length===0&&t.ended)return 0;if(t.objectMode)return 1;if(e!==e)return t.flowing&&t.length?t.buffer.head.data.length:t.length;if(e>t.highWaterMark){var i=e;8388608<=i?i=8388608:(i--,i|=i>>>1,i|=i>>>2,i|=i>>>4,i|=i>>>8,i|=i>>>16,i++),t.highWaterMark=i}return e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0)}rt.prototype.read=function(e){Me("read",e),e=parseInt(e,10);var t=this._readableState,i=e;if(e!==0&&(t.emittedReadable=!1),e===0&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return Me("read: emitReadable",t.length,t.ended),t.length===0&&t.ended?gu(this):sa(this),null;if(e=kp(e,t),e===0&&t.ended)return t.length===0&&gu(this),null;var r=t.needReadable;return Me("need readable",r),(t.length===0||t.length-e<t.highWaterMark)&&(r=!0,Me("length less than watermark",r)),t.ended||t.reading?Me("reading or ended",!1):r&&(Me("do read"),t.reading=!0,t.sync=!0,t.length===0&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=kp(i,t))),r=0<e?av(e,t):null,r===null?(t.needReadable=!0,e=0):t.length-=e,t.length===0&&(t.ended||(t.needReadable=!0),i!==e&&t.ended&&gu(this)),r!==null&&this.emit("data",r),r};function sa(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(Me("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?pi(xp,e):xp(e))}function xp(e){Me("emit readable"),e.emit("readable"),Nd(e)}function _Z(e,t){for(var i=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(Me("maybeReadMore read 0"),e.read(0),i!==t.length);)i=t.length;t.readingMore=!1}rt.prototype._read=function(){this.emit("error",Error("not implemented"))};rt.prototype.pipe=function(e,t){function i(_){Me("onunpipe"),_===h&&n()}function r(){Me("onend"),e.end()}function n(){Me("cleanup"),e.removeListener("close",u),e.removeListener("finish",l),e.removeListener("drain",d),e.removeListener("error",s),e.removeListener("unpipe",i),h.removeListener("end",r),h.removeListener("end",n),h.removeListener("data",o),c=!0,!p.awaitDrain||e._writableState&&!e._writableState.needDrain||d()}function o(_){Me("ondata"),y=!1,e.write(_)!==!1||y||((p.pipesCount===1&&p.pipes===e||1<p.pipesCount&&uv(p.pipes,e)!==-1)&&!c&&(Me("false write response, pause",h._readableState.awaitDrain),h._readableState.awaitDrain++,y=!0),h.pause())}function s(_){Me("onerror",_),a(),e.removeListener("error",s),e.listeners("error").length===0&&e.emit("error",_)}function u(){e.removeListener("finish",l),a()}function l(){Me("onfinish"),e.removeListener("close",u),a()}function a(){Me("unpipe"),h.unpipe(e)}var h=this,p=this._readableState;switch(p.pipesCount){case 0:p.pipes=e;break;case 1:p.pipes=[p.pipes,e];break;default:p.pipes.push(e)}p.pipesCount+=1,Me("pipe count=%d opts=%j",p.pipesCount,t),t=t&&t.end===!1?n:r,p.endEmitted?pi(t):h.once("end",t),e.on("unpipe",i);var d=gZ(h);e.on("drain",d);var c=!1,y=!1;return h.on("data",o),vZ(e,"error",s),e.once("close",u),e.once("finish",l),e.emit("pipe",h),p.flowing||(Me("pipe resume"),h.resume()),e};function gZ(e){return function(){var t=e._readableState;Me("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,t.awaitDrain===0&&e.listeners("data").length&&(t.flowing=!0,Nd(e))}}rt.prototype.unpipe=function(e){var t=this._readableState;if(t.pipesCount===0)return this;if(t.pipesCount===1)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){e=t.pipes;var i=t.pipesCount;for(t.pipes=null,t.pipesCount=0,t.flowing=!1,t=0;t<i;t++)e[t].emit("unpipe",this);return this}return i=uv(t.pipes,e),i===-1?this:(t.pipes.splice(i,1),--t.pipesCount,t.pipesCount===1&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)};rt.prototype.on=function(e,t){return t=Le.prototype.on.call(this,e,t),e==="data"?this._readableState.flowing!==!1&&this.resume():e==="readable"&&(e=this._readableState,e.endEmitted||e.readableListening||(e.readableListening=e.needReadable=!0,e.emittedReadable=!1,e.reading?e.length&&sa(this):pi(ZZ,this))),t};rt.prototype.addListener=rt.prototype.on;function ZZ(e){Me("readable nexttick read 0"),e.read(0)}rt.prototype.resume=function(){var e=this._readableState;return e.flowing||(Me("resume"),e.flowing=!0,e.resumeScheduled||(e.resumeScheduled=!0,pi(SZ,this,e))),this};function SZ(e,t){t.reading||(Me("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),Nd(e),t.flowing&&!t.reading&&e.read(0)}rt.prototype.pause=function(){return Me("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(Me("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function Nd(e){var t=e._readableState;for(Me("flow",t.flowing);t.flowing&&e.read()!==null;);}rt.prototype.wrap=function(e){var t=this._readableState,i=!1,r=this;e.on("end",function(){if(Me("wrapped end"),t.decoder&&!t.ended){var o=t.decoder.end();o&&o.length&&r.push(o)}r.push(null)}),e.on("data",function(o){Me("wrapped data"),t.decoder&&(o=t.decoder.write(o)),t.objectMode&&o==null||!(t.objectMode||o&&o.length)||r.push(o)||(i=!0,e.pause())});for(var n in e)this[n]===void 0&&typeof e[n]=="function"&&(this[n]=function(o){return function(){return e[o].apply(e,arguments)}}(n));return GZ(["error","close","destroy","pause","resume"],function(o){e.on(o,r.emit.bind(r,o))}),r._read=function(o){Me("wrapped _read",o),i&&(i=!1,e.resume())},r};rt._fromList=av;function av(e,t){if(t.length===0)return null;if(t.objectMode)var i=t.buffer.shift();else if(!e||e>=t.length)i=t.decoder?t.buffer.join(""):t.buffer.length===1?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear();else{if(i=t.buffer,t=t.decoder,e<i.head.data.length)t=i.head.data.slice(0,e),i.head.data=i.head.data.slice(e);else{if(e===i.head.data.length)i=i.shift();else if(t){t=i.head;var r=1,n=t.data;for(e-=n.length;t=t.next;){var o=t.data,s=e>o.length?o.length:e;if(n=s===o.length?n+o:n+o.slice(0,e),e-=s,e===0){s===o.length?(++r,i.head=t.next?t.next:i.tail=null):(i.head=t,t.data=o.slice(s));break}++r}i.length-=r,i=n}else{for(t=ue.allocUnsafe(e),r=i.head,n=1,r.data.copy(t),e-=r.data.length;r=r.next;){if(o=r.data,s=e>o.length?o.length:e,o.copy(t,t.length-e,0,s),e-=s,e===0){s===o.length?(++n,i.head=r.next?r.next:i.tail=null):(i.head=r,r.data=o.slice(s));break}++n}i.length-=n,i=t}t=i}i=t}return i}function gu(e){var t=e._readableState;if(0<t.length)throw Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,pi(bZ,t,e))}function bZ(e,t){e.endEmitted||e.length!==0||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function GZ(e,t){for(var i=0,r=e.length;i<r;i++)t(e[i],i)}function uv(e,t){for(var i=0,r=e.length;i<r;i++)if(e[i]===t)return i;return-1}Vt.WritableState=Jd;Cn(Vt,Le);function CZ(){}function YZ(e,t,i){this.chunk=e,this.encoding=t,this.callback=i,this.next=null}function Jd(e,t){Object.defineProperty(this,"buffer",{get:Ed(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")}),e=e||{},this.objectMode=!!e.objectMode,t instanceof Ti&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var i=e.highWaterMark,r=this.objectMode?16:16384;this.highWaterMark=i||i===0?i:r,this.highWaterMark=~~this.highWaterMark,this.finished=this.ended=this.ending=this.needDrain=!1,this.decodeStrings=e.decodeStrings!==!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(n){var o=t._writableState,s=o.sync,u=o.writecb;o.writing=!1,o.writecb=null,o.length-=o.writelen,o.writelen=0,n?(--o.pendingcb,s?pi(u,n):u(n),t._writableState.errorEmitted=!0,t.emit("error",n)):((n=dv(o))||o.corked||o.bufferProcessing||!o.bufferedRequest||hv(t,o),s?pi(Kp,t,o,n,u):Kp(t,o,n,u))},this.writecb=null,this.writelen=0,this.lastBufferedRequest=this.bufferedRequest=null,this.pendingcb=0,this.errorEmitted=this.prefinished=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new pv(this)}Jd.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t};function Vt(e){if(!(this instanceof Vt||this instanceof Ti))return new Vt(e);this._writableState=new Jd(e,this),this.writable=!0,e&&(typeof e.write=="function"&&(this._write=e.write),typeof e.writev=="function"&&(this._writev=e.writev)),Le.call(this)}Vt.prototype.pipe=function(){this.emit("error",Error("Cannot pipe, not readable"))};Vt.prototype.write=function(e,t,i){var r=this._writableState,n=!1;if(typeof t=="function"&&(i=t,t=null),ue.isBuffer(e)?t="buffer":t||(t=r.defaultEncoding),typeof i!="function"&&(i=CZ),r.ended)r=i,e=Error("write after end"),this.emit("error",e),pi(r,e);else{var o=i,s=!0,u=!1;e===null?u=new TypeError("May not write null values to stream"):ue.isBuffer(e)||typeof e=="string"||e===void 0||r.objectMode||(u=new TypeError("Invalid non-string/buffer chunk")),u&&(this.emit("error",u),pi(o,u),s=!1),s&&(r.pendingcb++,n=t,r.objectMode||r.decodeStrings===!1||typeof e!="string"||(e=ue.from(e,n)),ue.isBuffer(e)&&(n="buffer"),o=r.objectMode?1:e.length,r.length+=o,t=r.length<r.highWaterMark,t||(r.needDrain=!0),r.writing||r.corked?(o=r.lastBufferedRequest,r.lastBufferedRequest=new YZ(e,n,i),o?o.next=r.lastBufferedRequest:r.bufferedRequest=r.lastBufferedRequest,r.bufferedRequestCount+=1):Yh(this,r,!1,o,e,n,i),n=t)}return n};Vt.prototype.cork=function(){this._writableState.corked++};Vt.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||hv(this,e))};Vt.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(-1<"hex utf8 utf-8 ascii binary base64 ucs2 ucs-2 utf16le utf-16le raw".split(" ").indexOf((e+"").toLowerCase())))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this};function Yh(e,t,i,r,n,o,s){t.writelen=r,t.writecb=s,t.writing=!0,t.sync=!0,i?e._writev(n,t.onwrite):e._write(n,o,t.onwrite),t.sync=!1}function Kp(e,t,i,r){!i&&t.length===0&&t.needDrain&&(t.needDrain=!1,e.emit("drain")),t.pendingcb--,r(),fv(e,t)}function hv(e,t){t.bufferProcessing=!0;var i=t.bufferedRequest;if(e._writev&&i&&i.next){var r=Array(t.bufferedRequestCount),n=t.corkedRequestsFree;n.entry=i;for(var o=0;i;)r[o]=i,i=i.next,o+=1;Yh(e,t,!0,t.length,r,"",n.finish),t.pendingcb++,t.lastBufferedRequest=null,n.next?(t.corkedRequestsFree=n.next,n.next=null):t.corkedRequestsFree=new pv(t)}else{for(;i&&(r=i.chunk,Yh(e,t,!1,t.objectMode?1:r.length,r,i.encoding,i.callback),i=i.next,!t.writing););i===null&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=i,t.bufferProcessing=!1}Vt.prototype._write=function(e,t,i){i(Error("not implemented"))};Vt.prototype._writev=null;Vt.prototype.end=function(e,t,i){var r=this._writableState;typeof e=="function"?(i=e,t=e=null):typeof t=="function"&&(i=t,t=null),e!=null&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),!r.ending&&!r.finished&&(e=i,r.ending=!0,fv(this,r),e&&(r.finished?pi(e):this.once("finish",e)),r.ended=!0,this.writable=!1)};function dv(e){return e.ending&&e.length===0&&e.bufferedRequest===null&&!e.finished&&!e.writing}function fv(e,t){var i=dv(t);return i&&(t.pendingcb===0?(t.prefinished||(t.prefinished=!0,e.emit("prefinish")),t.finished=!0,e.emit("finish")):t.prefinished||(t.prefinished=!0,e.emit("prefinish"))),i}function pv(e){var t=this;this.entry=this.next=null,this.finish=function(i){var r=t.entry;for(t.entry=null;r;){var n=r.callback;e.pendingcb--,n(i),r=r.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}}Cn(Ti,rt);for(var Mp=Object.keys(Vt.prototype),Zu=0;Zu<Mp.length;Zu++){var Su=Mp[Zu];Ti.prototype[Su]||(Ti.prototype[Su]=Vt.prototype[Su])}function Ti(e){if(!(this instanceof Ti))return new Ti(e);rt.call(this,e),Vt.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",RZ)}function RZ(){this.allowHalfOpen||this._writableState.ended||pi(WZ,this)}function WZ(e){e.end()}Cn(cr,Ti);function IZ(e){this.afterTransform=function(t,i){var r=e._transformState;r.transforming=!1;var n=r.writecb;return n?(r.writechunk=null,r.writecb=null,i!=null&&e.push(i),n(t),t=e._readableState,t.reading=!1,(t.needReadable||t.length<t.highWaterMark)&&e._read(t.highWaterMark),t=void 0):t=e.emit("error",Error("no writecb in Transform class")),t},this.transforming=this.needTransform=!1,this.writeencoding=this.writechunk=this.writecb=null}function cr(e){if(!(this instanceof cr))return new cr(e);Ti.call(this,e),this._transformState=new IZ(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&(typeof e.transform=="function"&&(this._transform=e.transform),typeof e.flush=="function"&&(this._flush=e.flush)),this.once("prefinish",function(){typeof this._flush=="function"?this._flush(function(i){Pp(t,i)}):Pp(t)})}cr.prototype.push=function(e,t){return this._transformState.needTransform=!1,Ti.prototype.push.call(this,e,t)};cr.prototype._transform=function(){throw Error("Not implemented")};cr.prototype._write=function(e,t,i){var r=this._transformState;r.writecb=i,r.writechunk=e,r.writeencoding=t,r.transforming||(e=this._readableState,(r.needTransform||e.needReadable||e.length<e.highWaterMark)&&this._read(e.highWaterMark))};cr.prototype._read=function(){var e=this._transformState;e.writechunk!==null&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};function Pp(e,t){if(t)return e.emit("error",t);if(t=e._transformState,e._writableState.length)throw Error("Calling transform done when ws.length != 0");if(t.transforming)throw Error("Calling transform done when still transforming");return e.push(null)}Cn(Xl,cr);function Xl(e){if(!(this instanceof Xl))return new Xl(e);cr.call(this,e)}Xl.prototype._transform=function(e,t,i){i(null,e)};Cn(hi,Le);hi.Readable=rt;hi.Writable=Vt;hi.Duplex=Ti;hi.Transform=cr;hi.PassThrough=Xl;hi.Stream=hi;function hi(){Le.call(this)}hi.prototype.pipe=function(e,t){function i(h){e.writable&&e.write(h)===!1&&l.pause&&l.pause()}function r(){l.readable&&l.resume&&l.resume()}function n(){a||(a=!0,e.end())}function o(){a||(a=!0,typeof e.destroy=="function"&&e.destroy())}function s(h){if(u(),Le.listenerCount(this,"error")===0)throw h}function u(){l.removeListener("data",i),e.removeListener("drain",r),l.removeListener("end",n),l.removeListener("close",o),l.removeListener("error",s),e.removeListener("error",s),l.removeListener("end",u),l.removeListener("close",u),e.removeListener("close",u)}var l=this;l.on("data",i),e.on("drain",r),e._isStdio||t&&t.end===!1||(l.on("end",n),l.on("close",o));var a=!1;return l.on("error",s),e.on("error",s),l.on("end",u),l.on("close",u),e.on("close",u),e.emit("pipe",l),e};var LZ=Array.prototype.slice,wZ={extend:function e(t,i){for(var r in i)t[r]=i[r];return 3>arguments.length?t:e.apply(null,[t].concat(LZ.call(arguments,2)))}},mv=Et(function(e,t){function i(o,s,u){return u===void 0&&(u=function(l){return l}),function(){for(var l=[],a=0;a<arguments.length;a++)l[a]=arguments[a];return new Promise(function(h,p){o[s].bind(o).apply(void 0,r(l,[function(d,c){return d?p(d):h(u(c))}]))})}}var r=at&&at.__spreadArrays||function(){for(var o=0,s=0,u=arguments.length;s<u;s++)o+=arguments[s].length;o=Array(o);var l=0;for(s=0;s<u;s++)for(var a=arguments[s],h=0,p=a.length;h<p;h++,l++)o[l]=a[h];return o};Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function o(s,u){this.vol=s,this.fd=u}return o.prototype.appendFile=function(s,u){return i(this.vol,"appendFile")(this.fd,s,u)},o.prototype.chmod=function(s){return i(this.vol,"fchmod")(this.fd,s)},o.prototype.chown=function(s,u){return i(this.vol,"fchown")(this.fd,s,u)},o.prototype.close=function(){return i(this.vol,"close")(this.fd)},o.prototype.datasync=function(){return i(this.vol,"fdatasync")(this.fd)},o.prototype.read=function(s,u,l,a){return i(this.vol,"read",function(h){return{bytesRead:h,buffer:s}})(this.fd,s,u,l,a)},o.prototype.readFile=function(s){return i(this.vol,"readFile")(this.fd,s)},o.prototype.stat=function(s){return i(this.vol,"fstat")(this.fd,s)},o.prototype.sync=function(){return i(this.vol,"fsync")(this.fd)},o.prototype.truncate=function(s){return i(this.vol,"ftruncate")(this.fd,s)},o.prototype.utimes=function(s,u){return i(this.vol,"futimes")(this.fd,s,u)},o.prototype.write=function(s,u,l,a){return i(this.vol,"write",function(h){return{bytesWritten:h,buffer:s}})(this.fd,s,u,l,a)},o.prototype.writeFile=function(s,u){return i(this.vol,"writeFile")(this.fd,s,u)},o}();t.FileHandle=n,t.default=function(o){return typeof Promise>"u"?null:{FileHandle:n,access:function(s,u){return i(o,"access")(s,u)},appendFile:function(s,u,l){return i(o,"appendFile")(s instanceof n?s.fd:s,u,l)},chmod:function(s,u){return i(o,"chmod")(s,u)},chown:function(s,u,l){return i(o,"chown")(s,u,l)},copyFile:function(s,u,l){return i(o,"copyFile")(s,u,l)},lchmod:function(s,u){return i(o,"lchmod")(s,u)},lchown:function(s,u,l){return i(o,"lchown")(s,u,l)},link:function(s,u){return i(o,"link")(s,u)},lstat:function(s,u){return i(o,"lstat")(s,u)},mkdir:function(s,u){return i(o,"mkdir")(s,u)},mkdtemp:function(s,u){return i(o,"mkdtemp")(s,u)},open:function(s,u,l){return i(o,"open",function(a){return new n(o,a)})(s,u,l)},readdir:function(s,u){return i(o,"readdir")(s,u)},readFile:function(s,u){return i(o,"readFile")(s instanceof n?s.fd:s,u)},readlink:function(s,u){return i(o,"readlink")(s,u)},realpath:function(s,u){return i(o,"realpath")(s,u)},rename:function(s,u){return i(o,"rename")(s,u)},rmdir:function(s){return i(o,"rmdir")(s)},stat:function(s,u){return i(o,"stat")(s,u)},symlink:function(s,u,l){return i(o,"symlink")(s,u,l)},truncate:function(s,u){return i(o,"truncate")(s,u)},unlink:function(s){return i(o,"unlink")(s)},utimes:function(s,u,l){return i(o,"utimes")(s,u,l)},writeFile:function(s,u,l){return i(o,"writeFile")(s instanceof n?s.fd:s,u,l)}}}});Ft(mv);var TZ=/[^\x20-\x7E]/,XZ=/[\x2E\u3002\uFF0E\uFF61]/g,Np={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},ko=Math.floor,bu=String.fromCharCode;function VZ(e,t){var i=e.split("@"),r="";1<i.length&&(r=i[0]+"@",e=i[1]),e=e.replace(XZ,"."),e=e.split("."),i=e.length;for(var n=[];i--;)n[i]=t(e[i]);return t=n.join("."),r+t}function Jp(e,t){return e+22+75*(26>e)-((t!=0)<<5)}function EZ(e){return VZ(e,function(t){if(TZ.test(t)){var i,r=[],n=[],o=0;for(i=t.length;o<i;){var s=t.charCodeAt(o++);if(55296<=s&&56319>=s&&o<i){var u=t.charCodeAt(o++);(u&64512)==56320?n.push(((s&1023)<<10)+(u&1023)+65536):(n.push(s),o--)}else n.push(s)}t=n,u=t.length,n=128;var l=0,a=72;for(s=0;s<u;++s){var h=t[s];128>h&&r.push(bu(h))}for((o=i=r.length)&&r.push("-");o<u;){var p=2147483647;for(s=0;s<u;++s)h=t[s],h>=n&&h<p&&(p=h);var d=o+1;if(p-n>ko((2147483647-l)/d))throw new RangeError(Np.overflow);for(l+=(p-n)*d,n=p,s=0;s<u;++s){if(h=t[s],h<n&&2147483647<++l)throw new RangeError(Np.overflow);if(h==n){var c=l;for(p=36;h=p<=a?1:p>=a+26?26:p-a,!(c<h);p+=36){var y=c-h;c=36-h,r.push(bu(Jp(h+y%c,0))),c=ko(y/c)}for(r.push(bu(Jp(c,0))),a=d,p=0,l=o==i?ko(l/700):l>>1,l+=ko(l/a);455<l;p+=36)l=ko(l/35);a=ko(p+36*l/(l+38)),l=0,++o}}++l,++n}r="xn--"+r.join("")}else r=t;return r})}var yv=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};function js(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}}function kZ(e,t,i,r){return t=t||"&",i=i||"=",e===null&&(e=void 0),typeof e=="object"?Fp(xZ(e),function(n){var o=encodeURIComponent(js(n))+i;return yv(e[n])?Fp(e[n],function(s){return o+encodeURIComponent(js(s))}).join(t):o+encodeURIComponent(js(e[n]))}).join(t):r?encodeURIComponent(js(r))+i+encodeURIComponent(js(e)):""}function Fp(e,t){if(e.map)return e.map(t);for(var i=[],r=0;r<e.length;r++)i.push(t(e[r],r));return i}var xZ=Object.keys||function(e){var t=[],i;for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.push(i);return t};function Op(e,t,i,r){i=i||"=";var n={};if(typeof e!="string"||e.length===0)return n;var o=/\+/g;for(e=e.split(t||"&"),t=1e3,r&&typeof r.maxKeys=="number"&&(t=r.maxKeys),r=e.length,0<t&&r>t&&(r=t),t=0;t<r;++t){var s=e[t].replace(o,"%20"),u=s.indexOf(i);if(0<=u){var l=s.substr(0,u);s=s.substr(u+1)}else l=s,s="";l=decodeURIComponent(l),s=decodeURIComponent(s),Object.prototype.hasOwnProperty.call(n,l)?yv(n[l])?n[l].push(s):n[l]=[n[l],s]:n[l]=s}return n}var KZ={parse:Ea,resolve:jZ,resolveObject:HZ,format:UZ,Url:or};function or(){this.href=this.path=this.pathname=this.query=this.search=this.hash=this.hostname=this.port=this.host=this.auth=this.slashes=this.protocol=null}var MZ=/^([a-z0-9.+-]+:)/i,PZ=/:[0-9]*$/,NZ=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,JZ="{}|\\^`".split("").concat('<>"` \r\n	'.split("")),Rh=["'"].concat(JZ),Bp=["%","/","?",";","#"].concat(Rh),Up=["/","?","#"],FZ=255,jp=/^[+a-z0-9A-Z_-]{0,63}$/,OZ=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,BZ={javascript:!0,"javascript:":!0},Wh={javascript:!0,"javascript:":!0},fs={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function Ea(e,t,i){if(e&&Yn(e)&&e instanceof or)return e;var r=new or;return r.parse(e,t,i),r}or.prototype.parse=function(e,t,i){return vv(this,e,t,i)};function vv(e,t,i,r){if(!po(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var n=t.indexOf("?");if(n=n!==-1&&n<t.indexOf("#")?"?":"#",t=t.split(n),t[0]=t[0].replace(/\\/g,"/"),t=t.join(n),n=t.trim(),!r&&t.split("#").length===1&&(t=NZ.exec(n)))return e.path=n,e.href=n,e.pathname=t[1],t[2]?(e.search=t[2],e.query=i?Op(e.search.substr(1)):e.search.substr(1)):i&&(e.search="",e.query={}),e;if(t=MZ.exec(n)){t=t[0];var o=t.toLowerCase();e.protocol=o,n=n.substr(t.length)}if(r||t||n.match(/^\/\/[^@\/]+@[^@\/]+/)){var s=n.substr(0,2)==="//";!s||t&&Wh[t]||(n=n.substr(2),e.slashes=!0)}if(!Wh[t]&&(s||t&&!fs[t])){for(t=-1,r=0;r<Up.length;r++)s=n.indexOf(Up[r]),s!==-1&&(t===-1||s<t)&&(t=s);for(s=t===-1?n.lastIndexOf("@"):n.lastIndexOf("@",t),s!==-1&&(r=n.slice(0,s),n=n.slice(s+1),e.auth=decodeURIComponent(r)),t=-1,r=0;r<Bp.length;r++)s=n.indexOf(Bp[r]),s!==-1&&(t===-1||s<t)&&(t=s);if(t===-1&&(t=n.length),e.host=n.slice(0,t),n=n.slice(t),_v(e),e.hostname=e.hostname||"",s=e.hostname[0]==="["&&e.hostname[e.hostname.length-1]==="]",!s){var u=e.hostname.split(/\./);for(r=0,t=u.length;r<t;r++){var l=u[r];if(l&&!l.match(jp)){for(var a="",h=0,p=l.length;h<p;h++)a=127<l.charCodeAt(h)?a+"x":a+l[h];if(!a.match(jp)){t=u.slice(0,r),r=u.slice(r+1),(l=l.match(OZ))&&(t.push(l[1]),r.unshift(l[2])),r.length&&(n="/"+r.join(".")+n),e.hostname=t.join(".");break}}}}e.hostname=e.hostname.length>FZ?"":e.hostname.toLowerCase(),s||(e.hostname=EZ(e.hostname)),r=e.port?":"+e.port:"",e.host=(e.hostname||"")+r,e.href+=e.host,s&&(e.hostname=e.hostname.substr(1,e.hostname.length-2),n[0]!=="/"&&(n="/"+n))}if(!BZ[o])for(r=0,t=Rh.length;r<t;r++)s=Rh[r],n.indexOf(s)!==-1&&(l=encodeURIComponent(s),l===s&&(l=escape(s)),n=n.split(s).join(l));return r=n.indexOf("#"),r!==-1&&(e.hash=n.substr(r),n=n.slice(0,r)),r=n.indexOf("?"),r!==-1?(e.search=n.substr(r),e.query=n.substr(r+1),i&&(e.query=Op(e.query)),n=n.slice(0,r)):i&&(e.search="",e.query={}),n&&(e.pathname=n),fs[o]&&e.hostname&&!e.pathname&&(e.pathname="/"),(e.pathname||e.search)&&(r=e.pathname||"",e.path=r+(e.search||"")),e.href=Fd(e),e}function UZ(e){return po(e)&&(e=vv({},e)),Fd(e)}function Fd(e){var t=e.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var i=e.protocol||"",r=e.pathname||"",n=e.hash||"",o=!1,s="";return e.host?o=t+e.host:e.hostname&&(o=t+(e.hostname.indexOf(":")===-1?e.hostname:"["+this.hostname+"]"),e.port&&(o+=":"+e.port)),e.query&&Yn(e.query)&&Object.keys(e.query).length&&(s=kZ(e.query)),t=e.search||s&&"?"+s||"",i&&i.substr(-1)!==":"&&(i+=":"),e.slashes||(!i||fs[i])&&o!==!1?(o="//"+(o||""),r&&r.charAt(0)!=="/"&&(r="/"+r)):o||(o=""),n&&n.charAt(0)!=="#"&&(n="#"+n),t&&t.charAt(0)!=="?"&&(t="?"+t),r=r.replace(/[?#]/g,function(u){return encodeURIComponent(u)}),t=t.replace("#","%23"),i+o+r+t+n}or.prototype.format=function(){return Fd(this)};function jZ(e,t){return Ea(e,!1,!0).resolve(t)}or.prototype.resolve=function(e){return this.resolveObject(Ea(e,!1,!0)).format()};function HZ(e,t){return e?Ea(e,!1,!0).resolveObject(t):t}or.prototype.resolveObject=function(e){if(po(e)){var t=new or;t.parse(e,!1,!0),e=t}t=new or;for(var i=Object.keys(this),r=0;r<i.length;r++){var n=i[r];t[n]=this[n]}if(t.hash=e.hash,e.href==="")return t.href=t.format(),t;if(e.slashes&&!e.protocol){for(i=Object.keys(e),r=0;r<i.length;r++)n=i[r],n!=="protocol"&&(t[n]=e[n]);return fs[t.protocol]&&t.hostname&&!t.pathname&&(t.path=t.pathname="/"),t.href=t.format(),t}var o;if(e.protocol&&e.protocol!==t.protocol){if(!fs[e.protocol]){for(i=Object.keys(e),r=0;r<i.length;r++)n=i[r],t[n]=e[n];return t.href=t.format(),t}if(t.protocol=e.protocol,e.host||Wh[e.protocol])t.pathname=e.pathname;else{for(o=(e.pathname||"").split("/");o.length&&!(e.host=o.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),o[0]!==""&&o.unshift(""),2>o.length&&o.unshift(""),t.pathname=o.join("/")}return t.search=e.search,t.query=e.query,t.host=e.host||"",t.auth=e.auth,t.hostname=e.hostname||e.host,t.port=e.port,(t.pathname||t.search)&&(t.path=(t.pathname||"")+(t.search||"")),t.slashes=t.slashes||e.slashes,t.href=t.format(),t}i=t.pathname&&t.pathname.charAt(0)==="/";var s=e.host||e.pathname&&e.pathname.charAt(0)==="/",u=i=s||i||t.host&&e.pathname;if(r=t.pathname&&t.pathname.split("/")||[],n=t.protocol&&!fs[t.protocol],o=e.pathname&&e.pathname.split("/")||[],n&&(t.hostname="",t.port=null,t.host&&(r[0]===""?r[0]=t.host:r.unshift(t.host)),t.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(o[0]===""?o[0]=e.host:o.unshift(e.host)),e.host=null),i=i&&(o[0]===""||r[0]==="")),s)t.host=e.host||e.host===""?e.host:t.host,t.hostname=e.hostname||e.hostname===""?e.hostname:t.hostname,t.search=e.search,t.query=e.query,r=o;else if(o.length)r||(r=[]),r.pop(),r=r.concat(o),t.search=e.search,t.query=e.query;else if(e.search!=null)return n&&(t.hostname=t.host=r.shift(),n=t.host&&0<t.host.indexOf("@")?t.host.split("@"):!1)&&(t.auth=n.shift(),t.host=t.hostname=n.shift()),t.search=e.search,t.query=e.query,(t.pathname!==null||t.search!==null)&&(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.href=t.format(),t;if(!r.length)return t.pathname=null,t.path=t.search?"/"+t.search:null,t.href=t.format(),t;s=r.slice(-1)[0],o=(t.host||e.host||1<r.length)&&(s==="."||s==="..")||s==="";for(var l=0,a=r.length;0<=a;a--)s=r[a],s==="."?r.splice(a,1):s===".."?(r.splice(a,1),l++):l&&(r.splice(a,1),l--);if(!i&&!u)for(;l--;l)r.unshift("..");return!i||r[0]===""||r[0]&&r[0].charAt(0)==="/"||r.unshift(""),o&&r.join("/").substr(-1)!=="/"&&r.push(""),u=r[0]===""||r[0]&&r[0].charAt(0)==="/",n&&(t.hostname=t.host=u?"":r.length?r.shift():"",n=t.host&&0<t.host.indexOf("@")?t.host.split("@"):!1)&&(t.auth=n.shift(),t.host=t.hostname=n.shift()),(i||t.host&&r.length)&&!u&&r.unshift(""),r.length?t.pathname=r.join("/"):(t.pathname=null,t.path=null),(t.pathname!==null||t.search!==null)&&(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.auth=e.auth||t.auth,t.slashes=t.slashes||e.slashes,t.href=t.format(),t};or.prototype.parseHost=function(){return _v(this)};function _v(e){var t=e.host,i=PZ.exec(t);i&&(i=i[0],i!==":"&&(e.port=i.substr(1)),t=t.substr(0,t.length-i.length)),t&&(e.hostname=t)}var gv=Et(function(e,t){function i(o,s){return o=o[s],0<s&&(o==="/"||n&&o==="\\")}function r(o){var s=1<arguments.length&&arguments[1]!==void 0?arguments[1]:!0;if(n){var u=o;if(typeof u!="string")throw new TypeError("expected a string");if(u=u.replace(/[\\\/]+/g,"/"),s!==!1)if(s=u,u=s.length-1,2>u)u=s;else{for(;i(s,u);)u--;u=s.substr(0,u+1)}return u.replace(/^([a-zA-Z]+:|\.\/)/,"")}return o}Object.defineProperty(t,"__esModule",{value:!0}),t.unixify=r,t.correctPath=function(o){return r(o.replace(/^\\\\\?\\.:\\/,"\\"))};var n=us.platform==="win32"});Ft(gv);var ro=Et(function(e,t){function i(O,W){return W===void 0&&(W=Mt.default.cwd()),N(W,O)}function r(O,W){return typeof O=="function"?[n(),O]:[n(O),p(W)]}function n(O){return O===void 0&&(O={}),E({},Ji,O)}function o(O){return typeof O=="number"?E({},je,{mode:O}):E({},je,O)}function s(O,W,T,k){W===void 0&&(W=""),T===void 0&&(T=""),k===void 0&&(k="");var z="";switch(T&&(z=" '"+T+"'"),k&&(z+=" -> '"+k+"'"),O){case"ENOENT":return"ENOENT: no such file or directory, "+W+z;case"EBADF":return"EBADF: bad file descriptor, "+W+z;case"EINVAL":return"EINVAL: invalid argument, "+W+z;case"EPERM":return"EPERM: operation not permitted, "+W+z;case"EPROTO":return"EPROTO: protocol error, "+W+z;case"EEXIST":return"EEXIST: file already exists, "+W+z;case"ENOTDIR":return"ENOTDIR: not a directory, "+W+z;case"EISDIR":return"EISDIR: illegal operation on a directory, "+W+z;case"EACCES":return"EACCES: permission denied, "+W+z;case"ENOTEMPTY":return"ENOTEMPTY: directory not empty, "+W+z;case"EMFILE":return"EMFILE: too many open files, "+W+z;case"ENOSYS":return"ENOSYS: function not implemented, "+W+z;default:return O+": error occurred, "+W+z}}function u(O,W,T,k,z){return W===void 0&&(W=""),T===void 0&&(T=""),k===void 0&&(k=""),z===void 0&&(z=Error),W=new z(s(O,W,T,k)),W.code=O,W}function l(O){if(typeof O=="number")return O;if(typeof O=="string"){var W=te[O];if(typeof W<"u")return W}throw new ul.TypeError("ERR_INVALID_OPT_VALUE","flags",O)}function a(O,W){if(W){var T=typeof W;switch(T){case"string":O=E({},O,{encoding:W});break;case"object":O=E({},O,W);break;default:throw TypeError("Expected options to be either an object or a string, but got "+T+" instead")}}else return O;return O.encoding!=="buffer"&&bi.assertEncoding(O.encoding),O}function h(O){return function(W){return a(O,W)}}function p(O){if(typeof O!="function")throw TypeError(ge.CB);return O}function d(O){return function(W,T){return typeof W=="function"?[O(),W]:[O(W),p(T)]}}function c(O){if(typeof O!="string"&&!ze.Buffer.isBuffer(O)){try{if(!(O instanceof KZ.URL))throw new TypeError(ge.PATH_STR)}catch{throw new TypeError(ge.PATH_STR)}if(O.hostname!=="")throw new ul.TypeError("ERR_INVALID_FILE_URL_HOST",Mt.default.platform);O=O.pathname;for(var W=0;W<O.length;W++)if(O[W]==="%"){var T=O.codePointAt(W+2)|32;if(O[W+1]==="2"&&T===102)throw new ul.TypeError("ERR_INVALID_FILE_URL_PATH","must not include encoded / characters")}O=decodeURIComponent(O)}return O=String(O),f(O),O}function y(O,W){return(O=i(O,W).substr(1))?O.split(Q):[]}function _(O){return y(c(O))}function g(O,W){return W===void 0&&(W=bi.ENCODING_UTF8),ze.Buffer.isBuffer(O)?O:O instanceof Uint8Array?ze.bufferFrom(O):ze.bufferFrom(String(O),W)}function m(O,W){return W&&W!=="buffer"?O.toString(W):O}function f(O,W){if((""+O).indexOf("\0")!==-1){if(O=Error("Path must be a string without null bytes"),O.code="ENOENT",typeof W!="function")throw O;return Mt.default.nextTick(W,O),!1}return!0}function v(O,W){if(O=typeof O=="number"?O:typeof O=="string"?parseInt(O,8):W?v(W):void 0,typeof O!="number"||isNaN(O))throw new TypeError(ge.MODE_INT);return O}function Z(O){if(O>>>0!==O)throw TypeError(ge.FD)}function b(O){if(typeof O=="string"&&+O==O)return+O;if(O instanceof Date)return O.getTime()/1e3;if(isFinite(O))return 0>O?Date.now()/1e3:O;throw Error("Cannot parse time: "+O)}function G(O){if(typeof O!="number")throw TypeError(ge.UID)}function S(O){if(typeof O!="number")throw TypeError(ge.GID)}function C(O){O.emit("stop")}function R(O,W,T){if(!(this instanceof R))return new R(O,W,T);if(this._vol=O,T=E({},a(T,{})),T.highWaterMark===void 0&&(T.highWaterMark=65536),hi.Readable.call(this,T),this.path=c(W),this.fd=T.fd===void 0?null:T.fd,this.flags=T.flags===void 0?"r":T.flags,this.mode=T.mode===void 0?438:T.mode,this.start=T.start,this.end=T.end,this.autoClose=T.autoClose===void 0?!0:T.autoClose,this.pos=void 0,this.bytesRead=0,this.start!==void 0){if(typeof this.start!="number")throw new TypeError('"start" option must be a Number');if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw new TypeError('"end" option must be a Number');if(this.start>this.end)throw Error('"start" option must be <= "end" option');this.pos=this.start}typeof this.fd!="number"&&this.open(),this.on("end",function(){this.autoClose&&this.destroy&&this.destroy()})}function Y(){this.close()}function I(O,W,T){if(!(this instanceof I))return new I(O,W,T);if(this._vol=O,T=E({},a(T,{})),hi.Writable.call(this,T),this.path=c(W),this.fd=T.fd===void 0?null:T.fd,this.flags=T.flags===void 0?"w":T.flags,this.mode=T.mode===void 0?438:T.mode,this.start=T.start,this.autoClose=T.autoClose===void 0?!0:!!T.autoClose,this.pos=void 0,this.bytesWritten=0,this.start!==void 0){if(typeof this.start!="number")throw new TypeError('"start" option must be a Number');if(0>this.start)throw Error('"start" must be >= zero');this.pos=this.start}T.encoding&&this.setDefaultEncoding(T.encoding),typeof this.fd!="number"&&this.open(),this.once("finish",function(){this.autoClose&&this.close()})}var w=at&&at.__extends||function(){function O(W,T){return O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,z){k.__proto__=z}||function(k,z){for(var ce in z)z.hasOwnProperty(ce)&&(k[ce]=z[ce])},O(W,T)}return function(W,T){function k(){this.constructor=W}O(W,T),W.prototype=T===null?Object.create(T):(k.prototype=T.prototype,new k)}}(),F=at&&at.__spreadArrays||function(){for(var O=0,W=0,T=arguments.length;W<T;W++)O+=arguments[W].length;O=Array(O);var k=0;for(W=0;W<T;W++)for(var z=arguments[W],ce=0,ye=z.length;ce<ye;ce++,k++)O[k]=z[ce];return O};Object.defineProperty(t,"__esModule",{value:!0});var E=wZ.extend,N=_u.resolve,L=Ie.constants.O_RDONLY,K=Ie.constants.O_WRONLY,J=Ie.constants.O_RDWR,P=Ie.constants.O_CREAT,ee=Ie.constants.O_EXCL,he=Ie.constants.O_TRUNC,$=Ie.constants.O_APPEND,de=Ie.constants.O_SYNC,pe=Ie.constants.O_DIRECTORY,j=Ie.constants.F_OK,ie=Ie.constants.COPYFILE_EXCL,H=Ie.constants.COPYFILE_FICLONE_FORCE,Q=_u.sep,D=_u.relative,X=Mt.default.platform==="win32",ge={PATH_STR:"path must be a string or Buffer",FD:"fd must be a file descriptor",MODE_INT:"mode must be an int",CB:"callback must be a function",UID:"uid must be an unsigned int",GID:"gid must be an unsigned int",LEN:"len must be an integer",ATIME:"atime must be an integer",MTIME:"mtime must be an integer",PREFIX:"filename prefix is required",BUFFER:"buffer must be an instance of Buffer or StaticBuffer",OFFSET:"offset must be an integer",LENGTH:"length must be an integer",POSITION:"position must be an integer"},te;(function(O){O[O.r=L]="r",O[O["r+"]=J]="r+",O[O.rs=L|de]="rs",O[O.sr=O.rs]="sr",O[O["rs+"]=J|de]="rs+",O[O["sr+"]=O["rs+"]]="sr+",O[O.w=K|P|he]="w",O[O.wx=K|P|he|ee]="wx",O[O.xw=O.wx]="xw",O[O["w+"]=J|P|he]="w+",O[O["wx+"]=J|P|he|ee]="wx+",O[O["xw+"]=O["wx+"]]="xw+",O[O.a=K|$|P]="a",O[O.ax=K|$|P|ee]="ax",O[O.xa=O.ax]="xa",O[O["a+"]=J|$|P]="a+",O[O["ax+"]=J|$|P|ee]="ax+",O[O["xa+"]=O["ax+"]]="xa+"})(te=t.FLAGS||(t.FLAGS={})),t.flagsToNumber=l,e={encoding:"utf8"};var x=h(e),A=d(x),le=h({flag:"r"}),Ge={encoding:"utf8",mode:438,flag:te[te.w]},be=h(Ge),Ye={encoding:"utf8",mode:438,flag:te[te.a]},ve=h(Ye),xe=d(ve),we=h(e),Ze=d(we),je={mode:511,recursive:!1},lt={recursive:!1},Rt=h({encoding:"utf8",withFileTypes:!1}),Ni=d(Rt),Ji={bigint:!1};if(t.pathToFilename=c,X){var Mr=i,Fi=gv.unixify;i=function(O,W){return Fi(Mr(O,W))}}t.filenameToSteps=y,t.pathToSteps=_,t.dataToStr=function(O,W){return W===void 0&&(W=bi.ENCODING_UTF8),ze.Buffer.isBuffer(O)?O.toString(W):O instanceof Uint8Array?ze.bufferFrom(O).toString(W):String(O)},t.dataToBuffer=g,t.bufferToEncoding=m,t.toUnixTimestamp=b,e=function(){function O(W){W===void 0&&(W={}),this.ino=0,this.inodes={},this.releasedInos=[],this.fds={},this.releasedFds=[],this.maxFiles=1e4,this.openFiles=0,this.promisesApi=mv.default(this),this.statWatchers={},this.props=E({Node:hl.Node,Link:hl.Link,File:hl.File},W),W=this.createLink(),W.setNode(this.createNode(!0));var T=this;this.StatWatcher=function(k){function z(){return k.call(this,T)||this}return w(z,k),z}(ur),this.ReadStream=function(k){function z(){for(var ce=[],ye=0;ye<arguments.length;ye++)ce[ye]=arguments[ye];return k.apply(this,F([T],ce))||this}return w(z,k),z}(R),this.WriteStream=function(k){function z(){for(var ce=[],ye=0;ye<arguments.length;ye++)ce[ye]=arguments[ye];return k.apply(this,F([T],ce))||this}return w(z,k),z}(I),this.FSWatcher=function(k){function z(){return k.call(this,T)||this}return w(z,k),z}(hr),this.root=W}return O.fromJSON=function(W,T){var k=new O;return k.fromJSON(W,T),k},Object.defineProperty(O.prototype,"promises",{get:function(){if(this.promisesApi===null)throw Error("Promise is not supported in this environment.");return this.promisesApi},enumerable:!0,configurable:!0}),O.prototype.createLink=function(W,T,k,z){if(k===void 0&&(k=!1),!W)return new this.props.Link(this,null,"");if(!T)throw Error("createLink: name cannot be empty");return W.createChild(T,this.createNode(k,z))},O.prototype.deleteLink=function(W){var T=W.parent;return T?(T.deleteChild(W),!0):!1},O.prototype.newInoNumber=function(){var W=this.releasedInos.pop();return W||(this.ino=(this.ino+1)%4294967295)},O.prototype.newFdNumber=function(){var W=this.releasedFds.pop();return typeof W=="number"?W:O.fd--},O.prototype.createNode=function(W,T){return W===void 0&&(W=!1),T=new this.props.Node(this.newInoNumber(),T),W&&T.setIsDirectory(),this.inodes[T.ino]=T},O.prototype.getNode=function(W){return this.inodes[W]},O.prototype.deleteNode=function(W){W.del(),delete this.inodes[W.ino],this.releasedInos.push(W.ino)},O.prototype.genRndStr=function(){var W=(Math.random()+1).toString(36).substr(2,6);return W.length===6?W:this.genRndStr()},O.prototype.getLink=function(W){return this.root.walk(W)},O.prototype.getLinkOrThrow=function(W,T){var k=y(W);if(k=this.getLink(k),!k)throw u("ENOENT",T,W);return k},O.prototype.getResolvedLink=function(W){W=typeof W=="string"?y(W):W;for(var T=this.root,k=0;k<W.length;){if(T=T.getChild(W[k]),!T)return null;var z=T.getNode();z.isSymlink()?(W=z.symlink.concat(W.slice(k+1)),T=this.root,k=0):k++}return T},O.prototype.getResolvedLinkOrThrow=function(W,T){var k=this.getResolvedLink(W);if(!k)throw u("ENOENT",T,W);return k},O.prototype.resolveSymlinks=function(W){return this.getResolvedLink(W.steps.slice(1))},O.prototype.getLinkAsDirOrThrow=function(W,T){var k=this.getLinkOrThrow(W,T);if(!k.getNode().isDirectory())throw u("ENOTDIR",T,W);return k},O.prototype.getLinkParent=function(W){return this.root.walk(W,W.length-1)},O.prototype.getLinkParentAsDirOrThrow=function(W,T){W=W instanceof Array?W:y(W);var k=this.getLinkParent(W);if(!k)throw u("ENOENT",T,Q+W.join(Q));if(!k.getNode().isDirectory())throw u("ENOTDIR",T,Q+W.join(Q));return k},O.prototype.getFileByFd=function(W){return this.fds[String(W)]},O.prototype.getFileByFdOrThrow=function(W,T){if(W>>>0!==W)throw TypeError(ge.FD);if(W=this.getFileByFd(W),!W)throw u("EBADF",T);return W},O.prototype.getNodeByIdOrCreate=function(W,T,k){if(typeof W=="number"){if(W=this.getFileByFd(W),!W)throw Error("File nto found");return W.node}var z=_(W),ce=this.getLink(z);if(ce)return ce.getNode();if(T&P&&(T=this.getLinkParent(z)))return ce=this.createLink(T,z[z.length-1],!1,k),ce.getNode();throw u("ENOENT","getNodeByIdOrCreate",c(W))},O.prototype.wrapAsync=function(W,T,k){var z=this;p(k),es.default(function(){try{k(null,W.apply(z,T))}catch(ce){k(ce)}})},O.prototype._toJSON=function(W,T,k){var z;W===void 0&&(W=this.root),T===void 0&&(T={});var ce=!0,ye=W.children;W.getNode().isFile()&&(ye=(z={},z[W.getName()]=W.parent.getChild(W.getName()),z),W=W.parent);for(var Ke in ye){if(ce=!1,ye=W.getChild(Ke),!ye)throw Error("_toJSON: unexpected undefined");z=ye.getNode(),z.isFile()?(ye=ye.getPath(),k&&(ye=D(k,ye)),T[ye]=z.getString()):z.isDirectory()&&this._toJSON(ye,T,k)}return W=W.getPath(),k&&(W=D(k,W)),W&&ce&&(T[W]=null),T},O.prototype.toJSON=function(W,T,k){T===void 0&&(T={}),k===void 0&&(k=!1);var z=[];if(W){W instanceof Array||(W=[W]);for(var ce=0;ce<W.length;ce++){var ye=c(W[ce]);(ye=this.getResolvedLink(ye))&&z.push(ye)}}else z.push(this.root);if(!z.length)return T;for(ce=0;ce<z.length;ce++)ye=z[ce],this._toJSON(ye,T,k?ye.getPath():"");return T},O.prototype.fromJSON=function(W,T){T===void 0&&(T=Mt.default.cwd());for(var k in W){var z=W[k];if(typeof z=="string"){k=i(k,T);var ce=y(k);1<ce.length&&(ce=Q+ce.slice(0,ce.length-1).join(Q),this.mkdirpBase(ce,511)),this.writeFileSync(k,z)}else this.mkdirpBase(k,511)}},O.prototype.reset=function(){this.ino=0,this.inodes={},this.releasedInos=[],this.fds={},this.releasedFds=[],this.openFiles=0,this.root=this.createLink(),this.root.setNode(this.createNode(!0))},O.prototype.mountSync=function(W,T){this.fromJSON(T,W)},O.prototype.openLink=function(W,T,k){if(k===void 0&&(k=!0),this.openFiles>=this.maxFiles)throw u("EMFILE","open",W.getPath());var z=W;if(k&&(z=this.resolveSymlinks(W)),!z)throw u("ENOENT","open",W.getPath());if(k=z.getNode(),k.isDirectory()){if((T&(L|J|K))!==L)throw u("EISDIR","open",W.getPath())}else if(T&pe)throw u("ENOTDIR","open",W.getPath());if(!(T&K||k.canRead()))throw u("EACCES","open",W.getPath());return W=new this.props.File(W,k,T,this.newFdNumber()),this.fds[W.fd]=W,this.openFiles++,T&he&&W.truncate(),W},O.prototype.openFile=function(W,T,k,z){z===void 0&&(z=!0);var ce=y(W),ye=z?this.getResolvedLink(ce):this.getLink(ce);if(!ye&&T&P){var Ke=this.getResolvedLink(ce.slice(0,ce.length-1));if(!Ke)throw u("ENOENT","open",Q+ce.join(Q));T&P&&typeof k=="number"&&(ye=this.createLink(Ke,ce[ce.length-1],!1,k))}if(ye)return this.openLink(ye,T,z);throw u("ENOENT","open",W)},O.prototype.openBase=function(W,T,k,z){if(z===void 0&&(z=!0),T=this.openFile(W,T,k,z),!T)throw u("ENOENT","open",W);return T.fd},O.prototype.openSync=function(W,T,k){return k===void 0&&(k=438),k=v(k),W=c(W),T=l(T),this.openBase(W,T,k)},O.prototype.open=function(W,T,k,z){var ce=k;typeof k=="function"&&(ce=438,z=k),k=v(ce||438),W=c(W),T=l(T),this.wrapAsync(this.openBase,[W,T,k],z)},O.prototype.closeFile=function(W){this.fds[W.fd]&&(this.openFiles--,delete this.fds[W.fd],this.releasedFds.push(W.fd))},O.prototype.closeSync=function(W){Z(W),W=this.getFileByFdOrThrow(W,"close"),this.closeFile(W)},O.prototype.close=function(W,T){Z(W),this.wrapAsync(this.closeSync,[W],T)},O.prototype.openFileOrGetById=function(W,T,k){if(typeof W=="number"){if(W=this.fds[W],!W)throw u("ENOENT");return W}return this.openFile(c(W),T,k)},O.prototype.readBase=function(W,T,k,z,ce){return this.getFileByFdOrThrow(W).read(T,Number(k),Number(z),ce)},O.prototype.readSync=function(W,T,k,z,ce){return Z(W),this.readBase(W,T,k,z,ce)},O.prototype.read=function(W,T,k,z,ce,ye){var Ke=this;if(p(ye),z===0)return Mt.default.nextTick(function(){ye&&ye(null,0,T)});es.default(function(){try{var He=Ke.readBase(W,T,k,z,ce);ye(null,He,T)}catch(Wt){ye(Wt)}})},O.prototype.readFileBase=function(W,T,k){var z=typeof W=="number"&&W>>>0===W;if(!z){var ce=c(W);if(ce=y(ce),(ce=this.getResolvedLink(ce))&&ce.getNode().isDirectory())throw u("EISDIR","open",ce.getPath());W=this.openSync(W,T)}try{var ye=m(this.getFileByFdOrThrow(W).getBuffer(),k)}finally{z||this.closeSync(W)}return ye},O.prototype.readFileSync=function(W,T){T=le(T);var k=l(T.flag);return this.readFileBase(W,k,T.encoding)},O.prototype.readFile=function(W,T,k){k=d(le)(T,k),T=k[0],k=k[1];var z=l(T.flag);this.wrapAsync(this.readFileBase,[W,z,T.encoding],k)},O.prototype.writeBase=function(W,T,k,z,ce){return this.getFileByFdOrThrow(W,"write").write(T,k,z,ce)},O.prototype.writeSync=function(W,T,k,z,ce){Z(W);var ye=typeof T!="string";if(ye){var Ke=(k||0)|0,He=z;k=ce}else var Wt=z;return T=g(T,Wt),ye?typeof He>"u"&&(He=T.length):(Ke=0,He=T.length),this.writeBase(W,T,Ke,He,k)},O.prototype.write=function(W,T,k,z,ce,ye){var Ke=this;Z(W);var He=typeof T,Wt=typeof k,vi=typeof z,Oi=typeof ce;if(He!=="string")if(Wt==="function")var Ot=k;else if(vi==="function"){var Xi=k|0;Ot=z}else if(Oi==="function"){Xi=k|0;var _i=z;Ot=ce}else{Xi=k|0,_i=z;var ct=ce;Ot=ye}else if(Wt==="function")Ot=k;else if(vi==="function")ct=k,Ot=z;else if(Oi==="function"){ct=k;var dr=z;Ot=ce}var gi=g(T,dr);He!=="string"?typeof _i>"u"&&(_i=gi.length):(Xi=0,_i=gi.length);var ri=p(Ot);es.default(function(){try{var Bi=Ke.writeBase(W,gi,Xi,_i,ct);He!=="string"?ri(null,Bi,gi):ri(null,Bi,T)}catch(Pr){ri(Pr)}})},O.prototype.writeFileBase=function(W,T,k,z){var ce=typeof W=="number";W=ce?W:this.openBase(c(W),k,z),z=0;var ye=T.length;k=k&$?void 0:0;try{for(;0<ye;){var Ke=this.writeSync(W,T,z,ye,k);z+=Ke,ye-=Ke,k!==void 0&&(k+=Ke)}}finally{ce||this.closeSync(W)}},O.prototype.writeFileSync=function(W,T,k){var z=be(k);k=l(z.flag);var ce=v(z.mode);T=g(T,z.encoding),this.writeFileBase(W,T,k,ce)},O.prototype.writeFile=function(W,T,k,z){var ce=k;typeof k=="function"&&(ce=Ge,z=k),k=p(z);var ye=be(ce);ce=l(ye.flag),z=v(ye.mode),T=g(T,ye.encoding),this.wrapAsync(this.writeFileBase,[W,T,ce,z],k)},O.prototype.linkBase=function(W,T){var k=y(W),z=this.getLink(k);if(!z)throw u("ENOENT","link",W,T);var ce=y(T);if(k=this.getLinkParent(ce),!k)throw u("ENOENT","link",W,T);if(ce=ce[ce.length-1],k.getChild(ce))throw u("EEXIST","link",W,T);W=z.getNode(),W.nlink++,k.createChild(ce,W)},O.prototype.copyFileBase=function(W,T,k){var z=this.readFileSync(W);if(k&ie&&this.existsSync(T))throw u("EEXIST","copyFile",W,T);if(k&H)throw u("ENOSYS","copyFile",W,T);this.writeFileBase(T,z,te.w,438)},O.prototype.copyFileSync=function(W,T,k){return W=c(W),T=c(T),this.copyFileBase(W,T,(k||0)|0)},O.prototype.copyFile=function(W,T,k,z){if(W=c(W),T=c(T),typeof k=="function")var ce=0;else ce=k,k=z;p(k),this.wrapAsync(this.copyFileBase,[W,T,ce],k)},O.prototype.linkSync=function(W,T){W=c(W),T=c(T),this.linkBase(W,T)},O.prototype.link=function(W,T,k){W=c(W),T=c(T),this.wrapAsync(this.linkBase,[W,T],k)},O.prototype.unlinkBase=function(W){var T=y(W);if(T=this.getLink(T),!T)throw u("ENOENT","unlink",W);if(T.length)throw Error("Dir not empty...");this.deleteLink(T),W=T.getNode(),W.nlink--,0>=W.nlink&&this.deleteNode(W)},O.prototype.unlinkSync=function(W){W=c(W),this.unlinkBase(W)},O.prototype.unlink=function(W,T){W=c(W),this.wrapAsync(this.unlinkBase,[W],T)},O.prototype.symlinkBase=function(W,T){var k=y(T),z=this.getLinkParent(k);if(!z)throw u("ENOENT","symlink",W,T);if(k=k[k.length-1],z.getChild(k))throw u("EEXIST","symlink",W,T);return T=z.createChild(k),T.getNode().makeSymlink(y(W)),T},O.prototype.symlinkSync=function(W,T){W=c(W),T=c(T),this.symlinkBase(W,T)},O.prototype.symlink=function(W,T,k,z){k=p(typeof k=="function"?k:z),W=c(W),T=c(T),this.wrapAsync(this.symlinkBase,[W,T],k)},O.prototype.realpathBase=function(W,T){var k=y(W);if(k=this.getResolvedLink(k),!k)throw u("ENOENT","realpath",W);return bi.strToEncoding(k.getPath(),T)},O.prototype.realpathSync=function(W,T){return this.realpathBase(c(W),we(T).encoding)},O.prototype.realpath=function(W,T,k){k=Ze(T,k),T=k[0],k=k[1],W=c(W),this.wrapAsync(this.realpathBase,[W,T.encoding],k)},O.prototype.lstatBase=function(W,T){T===void 0&&(T=!1);var k=this.getLink(y(W));if(!k)throw u("ENOENT","lstat",W);return cs.default.build(k.getNode(),T)},O.prototype.lstatSync=function(W,T){return this.lstatBase(c(W),n(T).bigint)},O.prototype.lstat=function(W,T,k){k=r(T,k),T=k[0],k=k[1],this.wrapAsync(this.lstatBase,[c(W),T.bigint],k)},O.prototype.statBase=function(W,T){T===void 0&&(T=!1);var k=this.getResolvedLink(y(W));if(!k)throw u("ENOENT","stat",W);return cs.default.build(k.getNode(),T)},O.prototype.statSync=function(W,T){return this.statBase(c(W),n(T).bigint)},O.prototype.stat=function(W,T,k){k=r(T,k),T=k[0],k=k[1],this.wrapAsync(this.statBase,[c(W),T.bigint],k)},O.prototype.fstatBase=function(W,T){if(T===void 0&&(T=!1),W=this.getFileByFd(W),!W)throw u("EBADF","fstat");return cs.default.build(W.node,T)},O.prototype.fstatSync=function(W,T){return this.fstatBase(W,n(T).bigint)},O.prototype.fstat=function(W,T,k){T=r(T,k),this.wrapAsync(this.fstatBase,[W,T[0].bigint],T[1])},O.prototype.renameBase=function(W,T){var k=this.getLink(y(W));if(!k)throw u("ENOENT","rename",W,T);var z=y(T),ce=this.getLinkParent(z);if(!ce)throw u("ENOENT","rename",W,T);(W=k.parent)&&W.deleteChild(k),k.steps=F(ce.steps,[z[z.length-1]]),ce.setChild(k.getName(),k)},O.prototype.renameSync=function(W,T){W=c(W),T=c(T),this.renameBase(W,T)},O.prototype.rename=function(W,T,k){W=c(W),T=c(T),this.wrapAsync(this.renameBase,[W,T],k)},O.prototype.existsBase=function(W){return!!this.statBase(W)},O.prototype.existsSync=function(W){try{return this.existsBase(c(W))}catch{return!1}},O.prototype.exists=function(W,T){var k=this,z=c(W);if(typeof T!="function")throw Error(ge.CB);es.default(function(){try{T(k.existsBase(z))}catch{T(!1)}})},O.prototype.accessBase=function(W){this.getLinkOrThrow(W,"access")},O.prototype.accessSync=function(W,T){T===void 0&&(T=j),W=c(W),this.accessBase(W,T|0)},O.prototype.access=function(W,T,k){var z=j;typeof T!="function"&&(z=T|0,T=p(k)),W=c(W),this.wrapAsync(this.accessBase,[W,z],T)},O.prototype.appendFileSync=function(W,T,k){k===void 0&&(k=Ye),k=ve(k),k.flag&&W>>>0!==W||(k.flag="a"),this.writeFileSync(W,T,k)},O.prototype.appendFile=function(W,T,k,z){z=xe(k,z),k=z[0],z=z[1],k.flag&&W>>>0!==W||(k.flag="a"),this.writeFile(W,T,k,z)},O.prototype.readdirBase=function(W,T){var k=y(W);if(k=this.getResolvedLink(k),!k)throw u("ENOENT","readdir",W);if(!k.getNode().isDirectory())throw u("ENOTDIR","scandir",W);if(T.withFileTypes){var z=[];for(ce in k.children)(W=k.getChild(ce))&&z.push(Md.default.build(W,T.encoding));return X||T.encoding==="buffer"||z.sort(function(ye,Ke){return ye.name<Ke.name?-1:ye.name>Ke.name?1:0}),z}var ce=[];for(z in k.children)ce.push(bi.strToEncoding(z,T.encoding));return X||T.encoding==="buffer"||ce.sort(),ce},O.prototype.readdirSync=function(W,T){return T=Rt(T),W=c(W),this.readdirBase(W,T)},O.prototype.readdir=function(W,T,k){k=Ni(T,k),T=k[0],k=k[1],W=c(W),this.wrapAsync(this.readdirBase,[W,T],k)},O.prototype.readlinkBase=function(W,T){var k=this.getLinkOrThrow(W,"readlink").getNode();if(!k.isSymlink())throw u("EINVAL","readlink",W);return W=Q+k.symlink.join(Q),bi.strToEncoding(W,T)},O.prototype.readlinkSync=function(W,T){return T=x(T),W=c(W),this.readlinkBase(W,T.encoding)},O.prototype.readlink=function(W,T,k){k=A(T,k),T=k[0],k=k[1],W=c(W),this.wrapAsync(this.readlinkBase,[W,T.encoding],k)},O.prototype.fsyncBase=function(W){this.getFileByFdOrThrow(W,"fsync")},O.prototype.fsyncSync=function(W){this.fsyncBase(W)},O.prototype.fsync=function(W,T){this.wrapAsync(this.fsyncBase,[W],T)},O.prototype.fdatasyncBase=function(W){this.getFileByFdOrThrow(W,"fdatasync")},O.prototype.fdatasyncSync=function(W){this.fdatasyncBase(W)},O.prototype.fdatasync=function(W,T){this.wrapAsync(this.fdatasyncBase,[W],T)},O.prototype.ftruncateBase=function(W,T){this.getFileByFdOrThrow(W,"ftruncate").truncate(T)},O.prototype.ftruncateSync=function(W,T){this.ftruncateBase(W,T)},O.prototype.ftruncate=function(W,T,k){var z=typeof T=="number"?T:0;T=p(typeof T=="number"?k:T),this.wrapAsync(this.ftruncateBase,[W,z],T)},O.prototype.truncateBase=function(W,T){W=this.openSync(W,"r+");try{this.ftruncateSync(W,T)}finally{this.closeSync(W)}},O.prototype.truncateSync=function(W,T){if(W>>>0===W)return this.ftruncateSync(W,T);this.truncateBase(W,T)},O.prototype.truncate=function(W,T,k){var z=typeof T=="number"?T:0;if(T=p(typeof T=="number"?k:T),W>>>0===W)return this.ftruncate(W,z,T);this.wrapAsync(this.truncateBase,[W,z],T)},O.prototype.futimesBase=function(W,T,k){W=this.getFileByFdOrThrow(W,"futimes").node,W.atime=new Date(1e3*T),W.mtime=new Date(1e3*k)},O.prototype.futimesSync=function(W,T,k){this.futimesBase(W,b(T),b(k))},O.prototype.futimes=function(W,T,k,z){this.wrapAsync(this.futimesBase,[W,b(T),b(k)],z)},O.prototype.utimesBase=function(W,T,k){W=this.openSync(W,"r+");try{this.futimesBase(W,T,k)}finally{this.closeSync(W)}},O.prototype.utimesSync=function(W,T,k){this.utimesBase(c(W),b(T),b(k))},O.prototype.utimes=function(W,T,k,z){this.wrapAsync(this.utimesBase,[c(W),b(T),b(k)],z)},O.prototype.mkdirBase=function(W,T){var k=y(W);if(!k.length)throw u("EISDIR","mkdir",W);var z=this.getLinkParentAsDirOrThrow(W,"mkdir");if(k=k[k.length-1],z.getChild(k))throw u("EEXIST","mkdir",W);z.createChild(k,this.createNode(!0,T))},O.prototype.mkdirpBase=function(W,T){W=y(W);for(var k=this.root,z=0;z<W.length;z++){var ce=W[z];if(!k.getNode().isDirectory())throw u("ENOTDIR","mkdir",k.getPath());var ye=k.getChild(ce);if(ye)if(ye.getNode().isDirectory())k=ye;else throw u("ENOTDIR","mkdir",ye.getPath());else k=k.createChild(ce,this.createNode(!0,T))}},O.prototype.mkdirSync=function(W,T){T=o(T);var k=v(T.mode,511);W=c(W),T.recursive?this.mkdirpBase(W,k):this.mkdirBase(W,k)},O.prototype.mkdir=function(W,T,k){var z=o(T);T=p(typeof T=="function"?T:k),k=v(z.mode,511),W=c(W),z.recursive?this.wrapAsync(this.mkdirpBase,[W,k],T):this.wrapAsync(this.mkdirBase,[W,k],T)},O.prototype.mkdirpSync=function(W,T){this.mkdirSync(W,{mode:T,recursive:!0})},O.prototype.mkdirp=function(W,T,k){var z=typeof T=="function"?void 0:T;T=p(typeof T=="function"?T:k),this.mkdir(W,{mode:z,recursive:!0},T)},O.prototype.mkdtempBase=function(W,T,k){k===void 0&&(k=5);var z=W+this.genRndStr();try{return this.mkdirBase(z,511),bi.strToEncoding(z,T)}catch(ce){if(ce.code==="EEXIST"){if(1<k)return this.mkdtempBase(W,T,k-1);throw Error("Could not create temp dir.")}throw ce}},O.prototype.mkdtempSync=function(W,T){if(T=x(T).encoding,!W||typeof W!="string")throw new TypeError("filename prefix is required");return f(W),this.mkdtempBase(W,T)},O.prototype.mkdtemp=function(W,T,k){if(k=A(T,k),T=k[0].encoding,k=k[1],!W||typeof W!="string")throw new TypeError("filename prefix is required");f(W)&&this.wrapAsync(this.mkdtempBase,[W,T],k)},O.prototype.rmdirBase=function(W,T){T=E({},lt,T);var k=this.getLinkAsDirOrThrow(W,"rmdir");if(k.length&&!T.recursive)throw u("ENOTEMPTY","rmdir",W);this.deleteLink(k)},O.prototype.rmdirSync=function(W,T){this.rmdirBase(c(W),T)},O.prototype.rmdir=function(W,T,k){var z=E({},lt,T);T=p(typeof T=="function"?T:k),this.wrapAsync(this.rmdirBase,[c(W),z],T)},O.prototype.fchmodBase=function(W,T){this.getFileByFdOrThrow(W,"fchmod").chmod(T)},O.prototype.fchmodSync=function(W,T){this.fchmodBase(W,v(T))},O.prototype.fchmod=function(W,T,k){this.wrapAsync(this.fchmodBase,[W,v(T)],k)},O.prototype.chmodBase=function(W,T){W=this.openSync(W,"r+");try{this.fchmodBase(W,T)}finally{this.closeSync(W)}},O.prototype.chmodSync=function(W,T){T=v(T),W=c(W),this.chmodBase(W,T)},O.prototype.chmod=function(W,T,k){T=v(T),W=c(W),this.wrapAsync(this.chmodBase,[W,T],k)},O.prototype.lchmodBase=function(W,T){W=this.openBase(W,J,0,!1);try{this.fchmodBase(W,T)}finally{this.closeSync(W)}},O.prototype.lchmodSync=function(W,T){T=v(T),W=c(W),this.lchmodBase(W,T)},O.prototype.lchmod=function(W,T,k){T=v(T),W=c(W),this.wrapAsync(this.lchmodBase,[W,T],k)},O.prototype.fchownBase=function(W,T,k){this.getFileByFdOrThrow(W,"fchown").chown(T,k)},O.prototype.fchownSync=function(W,T,k){G(T),S(k),this.fchownBase(W,T,k)},O.prototype.fchown=function(W,T,k,z){G(T),S(k),this.wrapAsync(this.fchownBase,[W,T,k],z)},O.prototype.chownBase=function(W,T,k){this.getResolvedLinkOrThrow(W,"chown").getNode().chown(T,k)},O.prototype.chownSync=function(W,T,k){G(T),S(k),this.chownBase(c(W),T,k)},O.prototype.chown=function(W,T,k,z){G(T),S(k),this.wrapAsync(this.chownBase,[c(W),T,k],z)},O.prototype.lchownBase=function(W,T,k){this.getLinkOrThrow(W,"lchown").getNode().chown(T,k)},O.prototype.lchownSync=function(W,T,k){G(T),S(k),this.lchownBase(c(W),T,k)},O.prototype.lchown=function(W,T,k,z){G(T),S(k),this.wrapAsync(this.lchownBase,[c(W),T,k],z)},O.prototype.watchFile=function(W,T,k){W=c(W);var z=T;if(typeof z=="function"&&(k=T,z=null),typeof k!="function")throw Error('"watchFile()" requires a listener function');T=5007;var ce=!0;return z&&typeof z=="object"&&(typeof z.interval=="number"&&(T=z.interval),typeof z.persistent=="boolean"&&(ce=z.persistent)),(z=this.statWatchers[W])||(z=new this.StatWatcher,z.start(W,ce,T),this.statWatchers[W]=z),z.addListener("change",k),z},O.prototype.unwatchFile=function(W,T){W=c(W);var k=this.statWatchers[W];k&&(typeof T=="function"?k.removeListener("change",T):k.removeAllListeners("change"),k.listenerCount("change")===0&&(k.stop(),delete this.statWatchers[W]))},O.prototype.createReadStream=function(W,T){return new this.ReadStream(W,T)},O.prototype.createWriteStream=function(W,T){return new this.WriteStream(W,T)},O.prototype.watch=function(W,T,k){W=c(W);var z=T;typeof T=="function"&&(k=T,z=null);var ce=x(z);T=ce.persistent,z=ce.recursive,ce=ce.encoding,T===void 0&&(T=!0),z===void 0&&(z=!1);var ye=new this.FSWatcher;return ye.start(W,T,z,ce),k&&ye.addListener("change",k),ye},O.fd=2147483647,O}(),t.Volume=e;var ur=function(O){function W(T){var k=O.call(this)||this;return k.onInterval=function(){try{var z=k.vol.statSync(k.filename);k.hasChanged(z)&&(k.emit("change",z,k.prev),k.prev=z)}finally{k.loop()}},k.vol=T,k}return w(W,O),W.prototype.loop=function(){this.timeoutRef=this.setTimeout(this.onInterval,this.interval)},W.prototype.hasChanged=function(T){return T.mtimeMs>this.prev.mtimeMs||T.nlink!==this.prev.nlink},W.prototype.start=function(T,k,z){k===void 0&&(k=!0),z===void 0&&(z=5007),this.filename=c(T),this.setTimeout=k?setTimeout:sv.default,this.interval=z,this.prev=this.vol.statSync(this.filename),this.loop()},W.prototype.stop=function(){clearTimeout(this.timeoutRef),Mt.default.nextTick(C,this)},W}(Le.EventEmitter);t.StatWatcher=ur;var nt;al.inherits(R,hi.Readable),t.ReadStream=R,R.prototype.open=function(){var O=this;this._vol.open(this.path,this.flags,this.mode,function(W,T){W?(O.autoClose&&O.destroy&&O.destroy(),O.emit("error",W)):(O.fd=T,O.emit("open",T),O.read())})},R.prototype._read=function(O){if(typeof this.fd!="number")return this.once("open",function(){this._read(O)});if(!this.destroyed){(!nt||128>nt.length-nt.used)&&(nt=ze.bufferAllocUnsafe(this._readableState.highWaterMark),nt.used=0);var W=nt,T=Math.min(nt.length-nt.used,O),k=nt.used;if(this.pos!==void 0&&(T=Math.min(this.end-this.pos+1,T)),0>=T)return this.push(null);var z=this;this._vol.read(this.fd,nt,nt.used,T,this.pos,function(ce,ye){ce?(z.autoClose&&z.destroy&&z.destroy(),z.emit("error",ce)):(ce=null,0<ye&&(z.bytesRead+=ye,ce=W.slice(k,k+ye)),z.push(ce))}),this.pos!==void 0&&(this.pos+=T),nt.used+=T}},R.prototype._destroy=function(O,W){this.close(function(T){W(O||T)})},R.prototype.close=function(O){var W=this;if(O&&this.once("close",O),this.closed||typeof this.fd!="number"){if(typeof this.fd!="number"){this.once("open",Y);return}return Mt.default.nextTick(function(){return W.emit("close")})}this.closed=!0,this._vol.close(this.fd,function(T){T?W.emit("error",T):W.emit("close")}),this.fd=null},al.inherits(I,hi.Writable),t.WriteStream=I,I.prototype.open=function(){this._vol.open(this.path,this.flags,this.mode,function(O,W){O?(this.autoClose&&this.destroy&&this.destroy(),this.emit("error",O)):(this.fd=W,this.emit("open",W))}.bind(this))},I.prototype._write=function(O,W,T){if(!(O instanceof ze.Buffer))return this.emit("error",Error("Invalid data"));if(typeof this.fd!="number")return this.once("open",function(){this._write(O,W,T)});var k=this;this._vol.write(this.fd,O,0,O.length,this.pos,function(z,ce){if(z)return k.autoClose&&k.destroy&&k.destroy(),T(z);k.bytesWritten+=ce,T()}),this.pos!==void 0&&(this.pos+=O.length)},I.prototype._writev=function(O,W){if(typeof this.fd!="number")return this.once("open",function(){this._writev(O,W)});for(var T=this,k=O.length,z=Array(k),ce=0,ye=0;ye<k;ye++){var Ke=O[ye].chunk;z[ye]=Ke,ce+=Ke.length}k=ze.Buffer.concat(z),this._vol.write(this.fd,k,0,k.length,this.pos,function(He,Wt){if(He)return T.destroy&&T.destroy(),W(He);T.bytesWritten+=Wt,W()}),this.pos!==void 0&&(this.pos+=ce)},I.prototype._destroy=R.prototype._destroy,I.prototype.close=R.prototype.close,I.prototype.destroySoon=I.prototype.end;var hr=function(O){function W(T){var k=O.call(this)||this;return k._filename="",k._filenameEncoded="",k._recursive=!1,k._encoding=bi.ENCODING_UTF8,k._onNodeChange=function(){k._emit("change")},k._onParentChild=function(z){z.getName()===k._getName()&&k._emit("rename")},k._emit=function(z){k.emit("change",z,k._filenameEncoded)},k._persist=function(){k._timer=setTimeout(k._persist,1e6)},k._vol=T,k}return w(W,O),W.prototype._getName=function(){return this._steps[this._steps.length-1]},W.prototype.start=function(T,k,z,ce){k===void 0&&(k=!0),z===void 0&&(z=!1),ce===void 0&&(ce=bi.ENCODING_UTF8),this._filename=c(T),this._steps=y(this._filename),this._filenameEncoded=bi.strToEncoding(this._filename),this._recursive=z,this._encoding=ce;try{this._link=this._vol.getLinkOrThrow(this._filename,"FSWatcher")}catch(ye){throw k=Error("watch "+this._filename+" "+ye.code),k.code=ye.code,k.errno=ye.code,k}this._link.getNode().on("change",this._onNodeChange),this._link.on("child:add",this._onNodeChange),this._link.on("child:delete",this._onNodeChange),(T=this._link.parent)&&(T.setMaxListeners(T.getMaxListeners()+1),T.on("child:delete",this._onParentChild)),k&&this._persist()},W.prototype.close=function(){clearTimeout(this._timer),this._link.getNode().removeListener("change",this._onNodeChange);var T=this._link.parent;T&&T.removeListener("child:delete",this._onParentChild)},W}(Le.EventEmitter);t.FSWatcher=hr});Ft(ro);var DZ=ro.pathToFilename,zZ=ro.filenameToSteps,Hp=ro.Volume,Ih=Et(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.fsProps="constants F_OK R_OK W_OK X_OK Stats".split(" "),t.fsSyncMethods="renameSync ftruncateSync truncateSync chownSync fchownSync lchownSync chmodSync fchmodSync lchmodSync statSync lstatSync fstatSync linkSync symlinkSync readlinkSync realpathSync unlinkSync rmdirSync mkdirSync mkdirpSync readdirSync closeSync openSync utimesSync futimesSync fsyncSync writeSync readSync readFileSync writeFileSync appendFileSync existsSync accessSync fdatasyncSync mkdtempSync copyFileSync createReadStream createWriteStream".split(" "),t.fsAsyncMethods="rename ftruncate truncate chown fchown lchown chmod fchmod lchmod stat lstat fstat link symlink readlink realpath unlink rmdir mkdir mkdirp readdir close open utimes futimes fsync write read readFile writeFile appendFile exists access fdatasync mkdtemp copyFile watchFile unwatchFile watch".split(" ")});Ft(Ih);var Zv=Et(function(e,t){function i(h){for(var p={F_OK:s,R_OK:u,W_OK:l,X_OK:a,constants:Ie.constants,Stats:cs.default,Dirent:Md.default},d=0,c=n;d<c.length;d++){var y=c[d];typeof h[y]=="function"&&(p[y]=h[y].bind(h))}for(d=0,c=o;d<c.length;d++)y=c[d],typeof h[y]=="function"&&(p[y]=h[y].bind(h));return p.StatWatcher=h.StatWatcher,p.FSWatcher=h.FSWatcher,p.WriteStream=h.WriteStream,p.ReadStream=h.ReadStream,p.promises=h.promises,p._toUnixTimestamp=ro.toUnixTimestamp,p}var r=at&&at.__assign||function(){return r=Object.assign||function(h){for(var p,d=1,c=arguments.length;d<c;d++){p=arguments[d];for(var y in p)Object.prototype.hasOwnProperty.call(p,y)&&(h[y]=p[y])}return h},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var n=Ih.fsSyncMethods,o=Ih.fsAsyncMethods,s=Ie.constants.F_OK,u=Ie.constants.R_OK,l=Ie.constants.W_OK,a=Ie.constants.X_OK;t.Volume=ro.Volume,t.vol=new ro.Volume,t.createFsFromVolume=i,t.fs=i(t.vol),e.exports=r(r({},e.exports),t.fs),e.exports.semantic=!0});Ft(Zv);var Dp=Zv.createFsFromVolume;dZ.prototype.emit=function(e){for(var t,i,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];n=this.listeners(e);try{for(var o=_h(n),s=o.next();!s.done;s=o.next()){var u=s.value;try{u.apply(void 0,Kg(r))}catch(l){console.error(l)}}}catch(l){t={error:l}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(t)throw t.error}}return 0<n.length};var Sv=function(){function e(){this.volume=new Hp,this.fs=Dp(this.volume),this.fromJSON({"/dev/stdin":"","/dev/stdout":"","/dev/stderr":""})}return e.prototype._toJSON=function(t,i,r){i===void 0&&(i={});var n=!0,o;for(o in t.children){n=!1;var s=t.getChild(o);if(s){var u=s.getNode();u&&u.isFile()?(s=s.getPath(),r&&(s=Ch(r,s)),i[s]=u.getBuffer()):u&&u.isDirectory()&&this._toJSON(s,i,r)}}return t=t.getPath(),r&&(t=Ch(r,t)),t&&n&&(i[t]=null),i},e.prototype.toJSON=function(t,i,r){var n,o;i===void 0&&(i={}),r===void 0&&(r=!1);var s=[];if(t){t instanceof Array||(t=[t]);try{for(var u=_h(t),l=u.next();!l.done;l=u.next()){var a=DZ(l.value),h=this.volume.getResolvedLink(a);h&&s.push(h)}}catch(_){var p={error:_}}finally{try{l&&!l.done&&(n=u.return)&&n.call(u)}finally{if(p)throw p.error}}}else s.push(this.volume.root);if(!s.length)return i;try{for(var d=_h(s),c=d.next();!c.done;c=d.next())h=c.value,this._toJSON(h,i,r?h.getPath():"")}catch(_){var y={error:_}}finally{try{c&&!c.done&&(o=d.return)&&o.call(d)}finally{if(y)throw y.error}}return i},e.prototype.fromJSONFixed=function(t,i){for(var r in i){var n=i[r];if(n?Object.getPrototypeOf(n)!==null:n!==null){var o=zZ(r);1<o.length&&(o="/"+o.slice(0,o.length-1).join("/"),t.mkdirpBase(o,511)),t.writeFileSync(r,n||"")}else t.mkdirpBase(r,511)}},e.prototype.fromJSON=function(t){this.volume=new Hp,this.fromJSONFixed(this.volume,t),this.fs=Dp(this.volume),this.volume.releasedFds=[0,1,2],t=this.volume.openSync("/dev/stderr","w");var i=this.volume.openSync("/dev/stdout","w"),r=this.volume.openSync("/dev/stdin","r");if(t!==2)throw Error("invalid handle for stderr: "+t);if(i!==1)throw Error("invalid handle for stdout: "+i);if(r!==0)throw Error("invalid handle for stdin: "+r)},e.prototype.getStdOut=function(){return Eg(this,void 0,void 0,function(){var t,i=this;return kg(this,function(){return t=new Promise(function(r){r(i.fs.readFileSync("/dev/stdout","utf8"))}),[2,t]})})},e}();function zp(e){if(!e)throw Error("You must provide a config for the Wasm terminal.");if(!e.fetchCommand)throw Error("You must provide a fetchCommand for the Wasm terminal config, to handle fetching commands to be run");e.processWorkerUrl||console.warn("Note: It is HIGHLY reccomended you pass in the processWorkerUrl in the terminal config to create process workers. Without this, some wasi programs will not work."),e.processWorkerUrl&&console.warn("The unoptimized bundle of wasm-terminal is currently being used. The process worker does not need to be passed, as it is already inlined into the bundle. If you would like to pass in the process worker url and improve performance, please use the optimized bundle. Instructions can be found in the documentation."),this.fetchCommand=e.fetchCommand,this.processWorkerUrl=e.processWorkerUrl,this.wasmFs=e.wasmFs?e.wasmFs:new Sv}function Lh(e,t){return Lh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},Lh(e,t)}function bv(e,t){function i(){this.constructor=e}Lh(e,t),e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}function sn(){return sn=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++){t=arguments[i];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},sn.apply(this,arguments)}function Ht(e,t,i,r){return new(i||(i=Promise))(function(n,o){function s(a){try{l(r.next(a))}catch(h){o(h)}}function u(a){try{l(r.throw(a))}catch(h){o(h)}}function l(a){a.done?n(a.value):new i(function(h){h(a.value)}).then(s,u)}l((r=r.apply(e,t||[])).next())})}function Dt(e,t){function i(a){return function(h){return r([a,h])}}function r(a){if(o)throw new TypeError("Generator is already executing.");for(;n;)try{if(o=1,s&&(u=a[0]&2?s.return:a[0]?s.throw||((u=s.return)&&u.call(s),0):s.next)&&!(u=u.call(s,a[1])).done)return u;switch(s=0,u&&(a=[a[0]&2,u.value]),a[0]){case 0:case 1:u=a;break;case 4:return n.label++,{value:a[1],done:!1};case 5:n.label++,s=a[1],a=[0];continue;case 7:a=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=0<u.length&&u[u.length-1])&&(a[0]===6||a[0]===2)){n=0;continue}if(a[0]===3&&(!u||a[1]>u[0]&&a[1]<u[3]))n.label=a[1];else if(a[0]===6&&n.label<u[1])n.label=u[1],u=a;else if(u&&n.label<u[2])n.label=u[2],n.ops.push(a);else{u[2]&&n.ops.pop(),n.trys.pop();continue}}a=t.call(e,n)}catch(h){a=[6,h],s=0}finally{o=u=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},o,s,u,l;return l={next:i(0),throw:i(1),return:i(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l}function wh(e,t){var i=typeof Symbol=="function"&&e[Symbol.iterator];if(!i)return e;e=i.call(e);var r,n=[];try{for(;(t===void 0||0<t--)&&!(r=e.next()).done;)n.push(r.value)}catch(s){var o={error:s}}finally{try{r&&!r.done&&(i=e.return)&&i.call(e)}finally{if(o)throw o.error}}return n}function AZ(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(wh(arguments[t]));return e}function Jn(e,t,i){for(var r=0,n=0,o=0;o<t;++o)e.charAt(o)===`
`?(n=0,r+=1):(n+=1,n>i&&(n=0,r+=1));return{row:r,col:n}}for(var QZ=function(){function e(t){this._firstInit=!0,this.xterm=t,this._termSize={cols:this.xterm.cols,rows:this.xterm.rows},this._input=this._continuationPromptPrefix=this._promptPrefix="",this._cursor=0}return e.prototype._getAsyncRead=function(){var t=this,i,r;return{promise:new Promise(function(n,o){i=function(s){t._promptPrefix="",t._continuationPromptPrefix="",n(s)},r=o}),resolve:i,reject:r}},e.prototype.read=function(t,i){return i===void 0&&(i="> "),0<t.length&&this.print(t),this._firstInit=!0,this._promptPrefix=t,this._continuationPromptPrefix=i,this._input="",this._cursor=0,sn({promptPrefix:t,continuationPromptPrefix:i},this._getAsyncRead())},e.prototype.readChar=function(t){return 0<t.length&&this.print(t),sn({promptPrefix:t},this._getAsyncRead())},e.prototype.println=function(t){this.print(t+`
`)},e.prototype.print=function(t,i){var r=this;t=t.replace(/[\r\n]+/g,`
`).replace(/\n/g,`\r
`),i?(this.xterm._core.writeSync(t),this.xterm._core._renderService._renderer._runOperation(function(n){return n.onGridChanged(0,r.xterm.rows-1)})):this.xterm.write(t)},e.prototype.printWide=function(t,i){if(i===void 0&&(i=2),t.length===0)return this.println("");i=t.reduce(function(h,p){return Math.max(h,p.length)},0)+i;for(var r=Math.floor(this._termSize.cols/i),n=Math.ceil(t.length/r),o=0,s=0;s<n;++s){for(var u="",l=0;l<r;++l)if(o<t.length){var a=t[o++];a+=" ".repeat(i-a.length),u+=a}this.println(u)}},e.prototype.printStatus=function(t,i){this.print("\x1B[s",i),this.print(t,i)},e.prototype.clearStatus=function(t){this.print("\x1B[u",t),this.print("\x1B[1000D",t),this.print("\x1B[0J",t)},e.prototype.applyPrompts=function(t){return this._promptPrefix+t.replace(/\n/g,`
`+this._continuationPromptPrefix)},e.prototype.applyPromptOffset=function(t,i){return this.applyPrompts(t.substr(0,i)).length},e.prototype.clearInput=function(){var t=this.applyPrompts(this._input),i=Jn(t,t.length,this._termSize.cols).row+1,r=this.applyPromptOffset(this._input,this._cursor);for(t=Jn(t,r,this._termSize.cols).row,t=i-t-1,r=0;r<t;++r)this.xterm.write("\x1B[E");for(this.xterm.write("\r\x1B[K"),r=1;r<i;++r)this.xterm.write("\x1B[F\x1B[K")},e.prototype.clearTty=function(){this.xterm.write("\x1B[2J"),this.xterm.write("\x1B[0;0H"),this._cursor=0},e.prototype.getFirstInit=function(){return this._firstInit},e.prototype.getPromptPrefix=function(){return this._promptPrefix},e.prototype.getContinuationPromptPrefix=function(){return this._continuationPromptPrefix},e.prototype.getTermSize=function(){return this._termSize},e.prototype.getInput=function(){return this._input},e.prototype.getCursor=function(){return this._cursor},e.prototype.getSize=function(){return this._termSize},e.prototype.getBuffer=function(){return this.xterm.buffer},e.prototype.setInput=function(t,i){i===void 0&&(i=!1),i||this.clearInput();var r=this.applyPrompts(t);this.print(r),this._cursor>t.length&&(this._cursor=t.length);var n=this.applyPromptOffset(t,this._cursor);for(i=Jn(r,r.length,this._termSize.cols).row+1,n=Jn(r,n,this._termSize.cols),r=n.col,i=i-n.row-1,this.xterm.write("\r"),n=0;n<i;++n)this.xterm.write("\x1B[F");for(n=0;n<r;++n)this.xterm.write("\x1B[C");this._input=t},e.prototype.setCursor=function(t){0>t&&(t=0),t>this._input.length&&(t=this._input.length),this._writeCursorPosition(t)},e.prototype.setCursorDirectly=function(t){this._writeCursorPosition(t)},e.prototype._writeCursorPosition=function(t){var i=this.applyPrompts(this._input);Jn(i,i.length,this._termSize.cols);var r=this.applyPromptOffset(this._input,this._cursor),n=Jn(i,r,this._termSize.cols);r=n.col,n=n.row;var o=this.applyPromptOffset(this._input,t);if(o=Jn(i,o,this._termSize.cols),i=o.col,o=o.row,o>n)for(var s=n;s<o;++s)this.xterm.write("\x1B[B");else for(s=o;s<n;++s)this.xterm.write("\x1B[A");if(i>r)for(s=r;s<i;++s)this.xterm.write("\x1B[C");else for(s=i;s<r;++s)this.xterm.write("\x1B[D");this._cursor=t},e.prototype.setTermSize=function(t,i){this._termSize={cols:t,rows:i}},e.prototype.setFirstInit=function(t){this._firstInit=t},e.prototype.setPromptPrefix=function(t){this._promptPrefix=t},e.prototype.setContinuationPromptPrefix=function(t){this._continuationPromptPrefix=t},e}(),qn="",Ap=0;4>Ap;Ap++)qn+=(Math.pow(16,8)*Math.random()).toString(16);function Gv(e,t,i){return e=qZ(e,t,i),typeof t!="function"?e:e.reduce(function(r,n){return typeof n=="object"?r.concat(n):(n=n.split(RegExp("("+qn+".*?"+qn+")","g")),n.length===1?r.concat(n[0]):r.concat(n.filter(Boolean).map(function(o){return RegExp("^"+qn).test(o)?JSON.parse(o.split(qn)[1]):o})))},[])}function qZ(e,t,i){var r=e.match(/((?:\|\||\&\&|;;|\|\&|\<\(|>>|>\&|[&;()|<>]))|((\\['"|&;()<> \t]|[^\s'"|&;()<> \t])+|"((\\"|[^"])*?)"|'((\\'|[^'])*?)')*/g).filter(Boolean),n=!1;return r?(t||(t={}),i||(i={}),r.map(function(o,s){function u(){if(c+=1,o.charAt(c)==="{"){if(c+=1,o.charAt(c)==="}")throw Error("Bad substitution: "+o.substr(c-2,3));var g=o.indexOf("}",c);if(0>g)throw Error("Bad substitution: "+o.substr(c));var m=o.substr(c,g-c);c=g}else/[*@#?$!_\-]/.test(o.charAt(c))?(m=o.charAt(c),c+=1):(g=o.substr(c).match(/[^\w\d_]/))?(m=o.substr(c,g.index),c+=g.index-1):(m=o.substr(c),c=o.length);return g=m,m=typeof t=="function"?t(g):t[g],m===void 0&&g!=""?m="":m===void 0&&(m="$"),g=typeof m=="object"?""+qn+JSON.stringify(m)+qn:""+m,g}if(!n){if(/^(?:\|\||\&\&|;;|\|\&|\<\(|>>|>\&|[&;()|<>])$/.test(o))return{op:o};for(var l=i.escape||"\\",a=!1,h=!1,p="",d=!1,c=0,y=o.length;c<y;c++){var _=o.charAt(c);if(d=d||!a&&(_==="*"||_==="?"),h)p+=_,h=!1;else if(a)_===a?a=!1:a=="'"?p+=_:_===l?(c+=1,_=o.charAt(c),p=_==='"'||_===l||_==="$"?p+_:p+(l+_)):p=_==="$"?p+u():p+_;else if(_==='"'||_==="'")a=_;else{if(/^(?:\|\||\&\&|;;|\|\&|\<\(|>>|>\&|[&;()|<>])$/.test(_))return{op:o};if(/^#$/.test(_))return n=!0,p.length?[p,{comment:o.slice(c+1)+r.slice(s+1).join(" ")}]:[{comment:o.slice(c+1)+r.slice(s+1).join(" ")}];_===l?h=!0:p=_==="$"?p+u():p+_}}return d?{op:"glob",pattern:p}:p}}).reduce(function(o,s){return s===void 0?o:o.concat(s)},[])):[]}function Cv(e,t){t===void 0&&(t=!0);var i,r=[],n=/\w+/g;for(i=n.exec(e);i;)t?r.push(i.index):r.push(i.index+i[0].length),i=n.exec(e);return r}function Qp(e,t){return e=Cv(e,!0).reverse().find(function(i){return i<t}),e===void 0?0:e}function $Z(e,t){var i=Cv(e,!1).find(function(r){return r>t});return i===void 0?e.length:i}function eS(e){return e.trim()===""?!1:!!((e.match(/'/g)||[]).length%2!==0||(e.match(/"/g)||[]).length%2!==0||e.split(/(\|\||\||&&)/g).pop().trim()===""||e.endsWith("\\")&&!e.endsWith("\\\\"))}function Od(e){return e.match(/[^\\][ \t]$/m)!==null}function tS(e){return e.trim()===""||Od(e)?"":Gv(e).pop()||""}function iS(e,t){var i=Gv(t),r=i.length-1,n=i[r]||"";return t.trim()===""?(r=0,n=""):Od(t)&&(r+=1,n=""),e.reduce(function(o,s){try{var u=s(r,i);return o.concat(u)}catch(l){return console.error("Auto-complete error:",l),o}},[]).filter(function(o){return o.startsWith(n)})}var rS=function(){function e(t){this.size=t,this.entries=[],this.cursor=0}return e.prototype.push=function(t){t.trim()!==""&&t!==this.entries[this.entries.length-1]&&(this.entries.push(t),this.entries.length>this.size&&this.entries.pop(),this.cursor=this.entries.length)},e.prototype.includes=function(t){return this.entries.includes(t)},e.prototype.rewind=function(){this.cursor=this.entries.length},e.prototype.getPrevious=function(){var t=Math.max(0,this.cursor-1);return this.cursor=t,this.entries[t]},e.prototype.getNext=function(){var t=Math.min(this.entries.length,this.cursor+1);return this.cursor=t,this.entries[t]},e}();let Yv=Symbol("Comlink.proxy"),nS=Symbol("Comlink.endpoint"),oS=Symbol("Comlink.releaseProxy"),Th=new WeakSet,Rv=new Map([["proxy",{canHandle:e=>e&&e[Yv],serialize(e){const{port1:t,port2:i}=new MessageChannel;return Wv(e,t),[i,[i]]},deserialize:e=>(e.start(),la(e,[],void 0))}],["throw",{canHandle:e=>Th.has(e),serialize(e){const t=e instanceof Error;let i=e;return t&&(i={isError:t,message:e.message,stack:e.stack}),[i,[]]},deserialize(e){throw e.isError?Object.assign(Error(),e):e}}]]);function Wv(e,t=self){t.addEventListener("message",function i(r){if(r&&r.data){var{id:n,type:o,path:s}=Object.assign({path:[]},r.data),u=(r.data.argumentList||[]).map(jn);try{let a=s.slice(0,-1).reduce((p,d)=>p[d],e),h=s.reduce((p,d)=>p[d],e);switch(o){case 0:var l=h;break;case 1:a[s.slice(-1)[0]]=jn(r.data.value),l=!0;break;case 2:l=h.apply(a,u);break;case 3:{let p=new h(...u);l=No(p)}break;case 4:{let{port1:p,port2:d}=new MessageChannel;Wv(e,d),l=sS(p,[p])}break;case 5:l=void 0}}catch(a){l=a,Th.add(a)}Promise.resolve(l).catch(a=>(Th.add(a),a)).then(a=>{let[h,p]=Bd(a);t.postMessage(Object.assign(Object.assign({},h),{id:n}),p),o===5&&(t.removeEventListener("message",i),t.constructor.name==="MessagePort"&&t.close())})}}),t.start&&t.start()}function hc(e){if(e)throw Error("Proxy has been released and is not useable")}function la(e,t=[],i=function(){}){let r=!1,n=new Proxy(i,{get(o,s){return hc(r),s===oS?()=>xo(e,{type:5,path:t.map(u=>u.toString())}).then(()=>{e.constructor.name==="MessagePort"&&e.close(),r=!0}):s==="then"?t.length===0?{then:()=>n}:(o=xo(e,{type:0,path:t.map(u=>u.toString())}).then(jn),o.then.bind(o)):la(e,[...t,s])},set(o,s,u){hc(r);const[l,a]=Bd(u);return xo(e,{type:1,path:[...t,s].map(h=>h.toString()),value:l},a).then(jn)},apply(o,s,u){if(hc(r),o=t[t.length-1],o===nS)return xo(e,{type:4}).then(jn);if(o==="bind")return la(e,t.slice(0,-1));const[l,a]=qp(u);return xo(e,{type:2,path:t.map(h=>h.toString()),argumentList:l},a).then(jn)},construct(o,s){hc(r);const[u,l]=qp(s);return xo(e,{type:3,path:t.map(a=>a.toString()),argumentList:u},l).then(jn)}});return n}function qp(e){return e=e.map(Bd),[e.map(t=>t[0]),Array.prototype.concat.apply([],e.map(t=>t[1]))]}let Iv=new WeakMap;function sS(e,t){return Iv.set(e,t),e}function No(e){return Object.assign(e,{[Yv]:!0})}function Bd(e){for(let[t,i]of Rv)if(i.canHandle(e)){let[r,n]=i.serialize(e);return[{type:3,name:t,value:r},n]}return[{type:0,value:e},Iv.get(e)||[]]}function jn(e){switch(e.type){case 3:return Rv.get(e.name).deserialize(e.value);case 0:return e.value}}function xo(e,t,i){return new Promise(r=>{let n=lS();e.addEventListener("message",function o(s){s.data&&s.data.id&&s.data.id===n&&(e.removeEventListener("message",o),r(s.data))}),e.start&&e.start(),e.postMessage(Object.assign({id:n},t),i)})}function lS(){return Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}var cS=Array.isArray||function(e){return Object.prototype.toString.call(e)=="[object Array]"};function aS(e,t){if(e.map)return e.map(t);for(var i=[],r=0;r<e.length;r++){var n=e[r];uS.call(e,r)&&i.push(t(n,r,e))}return i}var uS=Object.prototype.hasOwnProperty;function Lv(e,t){return t?typeof t=="string"&&(t={startRule:t}):t={},wv.parse(e,t)}var wv=function(){function e(i,r,n,o,s,u){this.message=i,this.expected=r,this.found=n,this.offset=o,this.line=s,this.column=u,this.name="SyntaxError"}function t(i){function r(M){return M=M.map(function(B){return ci(B)?j(B):B}),Q(M)}function n(M,B,U,q){var se={type:"command",command:B,args:[],redirects:[],env:{},control:";",next:null};return xt(M,ie).concat(xt(U,H)).forEach(function(ae){if(ae&&ae.type)switch(ae.type){case"moveFd":case"duplicateFd":case"redirectFd":return se.redirects.push(ae);case"variableAssignment":return se.env[ae.name]=ae.value;default:se.args.push(ae)}}),q&&se.redirects.push(q[1]),se}function o(M,B){var U=[M],q=M;return xt(B,function(se){for(var ae=q;ae.next;)ae=ae.next;ae.control=se[1],U.push(q=se[3])}),U}function s(M){var B=[];return xt(M,function(U){B=B.concat(U[1])}),B}function u(M){if(bt!==M){bt>M&&(bt=0,zi={line:1,column:1,seenCR:!1});var B=zi,U;for(U=bt;U<M;U++){var q=i.charAt(U);q===`
`?(B.seenCR||B.line++,B.column=1,B.seenCR=!1):q==="\r"||q==="\u2028"||q==="\u2029"?(B.line++,B.column=1,B.seenCR=!0):(B.column++,B.seenCR=!1)}bt=M}return zi}function l(M){V<si||(V>si&&(si=V,li=[]),li.push(M))}function a(){var M,B,U=V,q=[],se=V,ae=[];for(M=de();M!==X;)ae.push(M),M=de();if(ae!==X)if(M=h(),M!==X){var Se=[];for(B=de();B!==X;)Se.push(B),B=de();Se!==X?se=ae=[ae,M,Se]:(V=se,se=x)}else V=se,se=x;else V=se,se=x;if(se!==X)for(;se!==X;){for(q.push(se),se=V,ae=[],M=de();M!==X;)ae.push(M),M=de();if(ae!==X)if(M=h(),M!==X){for(Se=[],B=de();B!==X;)Se.push(B),B=de();Se!==X?se=ae=[ae,M,Se]:(V=se,se=x)}else V=se,se=x;else V=se,se=x}else q=x;return q!==X&&(Re=U,q=s(q)),q}function h(){var M,B;re++;var U=V,q=p();if(q!==X){var se=[],ae=V,Se=[];for(M=$();M!==X;)Se.push(M),M=$();if(Se!==X)if(M=d(),M!==X){var We=[];for(B=de();B!==X;)We.push(B),B=de();We!==X?(B=p(),B!==X?ae=Se=[Se,M,We,B]:(V=ae,ae=x)):(V=ae,ae=x)}else V=ae,ae=x;else V=ae,ae=x;for(;ae!==X;){for(se.push(ae),ae=V,Se=[],M=$();M!==X;)Se.push(M),M=$();if(Se!==X)if(M=d(),M!==X){for(We=[],B=de();B!==X;)We.push(B),B=de();We!==X?(B=p(),B!==X?ae=Se=[Se,M,We,B]:(V=ae,ae=x)):(V=ae,ae=x)}else V=ae,ae=x;else V=ae,ae=x}if(se!==X){for(ae=V,Se=[],M=$();M!==X;)Se.push(M),M=$();Se!==X?(M=d(),M!==X?ae=Se=[Se,M]:(V=ae,ae=x)):(V=ae,ae=x),ae===X&&(ae=le),ae!==X?(Re=U,U=q=o(q,se)):(V=U,U=x)}else V=U,U=x}else V=U,U=x;return re--,U===X&&re===0&&l(A),U}function p(){var M=V,B=c();if(B===X&&(B=g(),B===X)){var U,q=V;if(i.substr(V,5)===Ji?(B=Ji,V+=5):(B=X,re===0&&l(Mr)),B===X&&(i.substr(V,5)===Fi?(B=Fi,V+=5):(B=X,re===0&&l(ur))),B!==X){var se=[],ae=de();if(ae!==X)for(;ae!==X;)se.push(ae),ae=de();else se=x;if(se!==X)if(ae=_(),ae!==X){for(se=[],U=de();U!==X;)se.push(U),U=de();se!==X?(i.substr(V,2)===nt?(U=nt,V+=2):(U=X,re===0&&l(hr)),U!==X?(se=de(),se!==X?(se=a(),se!==X?(i.substr(V,4)===O?(U=O,V+=4):(U=X,re===0&&l(W)),U!==X?(Re=q,q=B={type:B+"-loop",test:ae,body:se}):(V=q,q=x)):(V=q,q=x)):(V=q,q=x)):(V=q,q=x)):(V=q,q=x)}else V=q,q=x;else V=q,q=x}else V=q,q=x;if(B=q,B===X){if(q=V,i.substr(V,2)===T?(B=T,V+=2):(B=X,re===0&&l(k)),B!==X){if(ae=[],B=de(),B!==X)for(;B!==X;)ae.push(B),B=de();else ae=x;if(ae!==X)if(B=a(),B!==X)if(i.substr(V,4)===z?(ae=z,V+=4):(ae=X,re===0&&l(ce)),ae!==X){if(se=[],ae=de(),ae!==X)for(;ae!==X;)se.push(ae),ae=de();else se=x;if(se!==X)if(ae=a(),ae!==X){for(se=[],U=y();U!==X;)se.push(U),U=y();if(se!==X){if(U=V,i.substr(V,4)===ye){var Se=ye;V+=4}else Se=X,re===0&&l(Ke);if(Se!==X){var We=a();We!==X?U=Se=[Se,We]:(V=U,U=x)}else V=U,U=x;U===X&&(U=le),U!==X?(i.substr(V,2)===He?(Se=He,V+=2):(Se=X,re===0&&l(Wt)),Se!==X?(Re=q,q=B={type:"ifElse",test:B,body:ae,elifBlocks:se.length?se:null,elseBody:U?U[1]:null}):(V=q,q=x)):(V=q,q=x)}else V=q,q=x}else V=q,q=x;else V=q,q=x}else V=q,q=x;else V=q,q=x;else V=q,q=x}else V=q,q=x;B=q}}if(B!==X){for(q=V,ae=[],se=$();se!==X;)ae.push(se),se=$();if(ae!==X){if(se=V,i.substr(V,2)===Ge?(U=Ge,V+=2):(U=X,re===0&&l(be)),U===X&&(i.substr(V,2)===Ye?(U=Ye,V+=2):(U=X,re===0&&l(ve))),U!==X){for(Se=[],We=de();We!==X;)Se.push(We),We=de();Se!==X?(We=p(),We!==X?(Re=se,se=U=[U,We]):(V=se,se=x)):(V=se,se=x)}else V=se,se=x;se!==X?q=ae=[ae,se]:(V=q,q=x)}else V=q,q=x;q===X&&(q=le),q!==X?(Re=M,M=B,typeof q<"u"&&q?(q=q[1],M.control=q[0],M.next=q[1]):(M.control=";",M.next=null)):(V=M,M=x)}else V=M,M=x;return M}function d(){var M=V;if(i.charCodeAt(V)===38){var B=xe;V++}else B=X,re===0&&l(we);return B===X&&(i.charCodeAt(V)===59?(B=Ze,V++):(B=X,re===0&&l(je)),B===X&&(i.charCodeAt(V)===10?(B=lt,V++):(B=X,re===0&&l(Rt)))),B!==X&&(Re=M,B=B==`
`?";":B),B}function c(){re++;var M=V,B=[],U=V,q=g();if(q===X&&(q=ee()),q!==X){var se=[],ae=$();if(ae!==X)for(;ae!==X;)se.push(ae),ae=$();else se=x;se!==X?U=q=[q,se]:(V=U,U=x)}else V=U,U=x;for(;U!==X;)if(B.push(U),U=V,q=g(),q===X&&(q=ee()),q!==X){if(se=[],ae=$(),ae!==X)for(;ae!==X;)se.push(ae),ae=$();else se=x;se!==X?U=q=[q,se]:(V=U,U=x)}else V=U,U=x;if(B!==X)if(U=m(),U===X&&(U=f()),U!==X){q=[],se=V,ae=[];var Se=$();if(Se!==X)for(;Se!==X;)ae.push(Se),Se=$();else ae=x;for(ae!==X?(Se=ee(),Se===X&&(Se=v()),Se!==X?se=ae=[ae,Se]:(V=se,se=x)):(V=se,se=x);se!==X;){if(q.push(se),se=V,ae=[],Se=$(),Se!==X)for(;Se!==X;)ae.push(Se),Se=$();else ae=x;ae!==X?(Se=ee(),Se===X&&(Se=v()),Se!==X?se=ae=[ae,Se]:(V=se,se=x)):(V=se,se=x)}if(q!==X){for(se=V,ae=[],Se=$();Se!==X;)ae.push(Se),Se=$();if(ae!==X){var We;if(Se=V,i.charCodeAt(V)===124){var ot=Nl;V++}else ot=X,re===0&&l(Xs);if(ot!==X){for(ot=[],We=de();We!==X;)ot.push(We),We=de();ot!==X?(We=c(),We!==X?(Re=Se,Se=ot={type:"pipe",command:We}):(V=Se,Se=x)):(V=Se,Se=x)}else V=Se,Se=x;Se!==X?se=ae=[ae,Se]:(V=se,se=x)}else V=se,se=x;se===X&&(se=le),se!==X?(Re=M,M=B=n(B,U,q,se)):(V=M,M=x)}else V=M,M=x}else V=M,M=x;else V=M,M=x;return re--,M===X&&re===0&&l(Ni),M}function y(){var M=V;if(i.substr(V,4)===vi){var B=vi;V+=4}else B=X,re===0&&l(Oi);if(B!==X){var U=[];if(B=de(),B!==X)for(;B!==X;)U.push(B),B=de();else U=x;if(U!==X)if(B=_(),B!==X)if(i.substr(V,4)===z?(U=z,V+=4):(U=X,re===0&&l(ce)),U!==X){U=[];var q=de();if(q!==X)for(;q!==X;)U.push(q),q=de();else U=x;U!==X?(q=a(),q!==X?(Re=M,M=B={type:"ifElse",test:B,body:q}):(V=M,M=x)):(V=M,M=x)}else V=M,M=x;else V=M,M=x;else V=M,M=x}else V=M,M=x;return M}function _(){var M=V,B=a();return B!==X&&(Re=M),B}function g(){var M=V,B=L();if(B!==X){if(i.charCodeAt(V)===61){var U=Ot;V++}else U=X,re===0&&l(Xi);U!==X?(U=v(),U!==X?(Re=M,M=B={type:"variableAssignment",name:B,value:U}):(V=M,M=x)):(V=M,M=x)}else V=M,M=x;return M}function m(){var M;re++;var B=M=V;re++;var U=ee();if(re--,U===X?B=ct:(V=B,B=x),B!==X)if(U=V,re++,B=pe(),re--,B===X?U=ct:(V=U,U=x),U!==X)if(B=V,re++,U=g(),re--,U===X?B=ct:(V=B,B=x),B!==X){U=V,B=[];var q=S();if(q===X&&(q=Z(),q===X&&(q=N(),q===X&&(q=K(),q===X&&(q=J(),q===X&&(q=Y(),q===X&&(q=I())))))),q!==X)for(;q!==X;)B.push(q),q=S(),q===X&&(q=Z(),q===X&&(q=N(),q===X&&(q=K(),q===X&&(q=J(),q===X&&(q=Y(),q===X&&(q=I()))))));else B=x;B!==X&&(Re=U,B=Q(B)),U=B,U===X&&(U=f()),U!==X?(Re=M,M=U):(V=M,M=x)}else V=M,M=x;else V=M,M=x;else V=M,M=x;return re--,M===X&&re===0&&l(_i),M}function f(){if(i.charCodeAt(V)===91){var M=dr;V++}else M=X,re===0&&l(gi);return M===X&&(i.substr(V,2)===ri?(M=ri,V+=2):(M=X,re===0&&l(Bi))),M}function v(){re++;var M=m();if(M===X){if(M=V,ws.test(i.charAt(V))){var B=i.charAt(V);V++}else B=X,re===0&&l(Ts);if(B!==X){if(i.charCodeAt(V)===40){var U=Xo;V++}else U=X,re===0&&l(Vo);if(U!==X)if(U=h(),U!==X){if(i.charCodeAt(V)===41){var q=Lo;V++}else q=X,re===0&&l(wo);q!==X?(Re=M,M=B={type:"processSubstitution",readWrite:B,commands:U}):(V=M,M=x)}else V=M,M=x;else V=M,M=x}else V=M,M=x}return re--,M===X&&re===0&&l(Pr),M}function Z(){var M=V,B=[],U=b();if(U!==X)for(;U!==X;)B.push(U),U=b();else B=x;return B!==X&&(Re=M,B=j(B)),B}function b(){var M=V;if(i.charCodeAt(V)===92){var B=Wn;V++}else B=X,re===0&&l(In);if(B!==X){var U=G();U!==X?(Re=M,M=U):(V=M,M=x)}else V=M,M=x;return M===X&&(B=M=V,re++,U=G(),re--,U===X?B=ct:(V=B,B=x),B!==X?(i.length>V?(U=i.charAt(V),V++):(U=X,re===0&&l(Bt)),U!==X?(Re=M,M=U):(V=M,M=x)):(V=M,M=x)),M}function G(){if(vo.test(i.charAt(V))){var M=i.charAt(V);V++}else M=X,re===0&&l(_o);return M}function S(){var M,B=V,U=[];for(M=b();M!==X;)U.push(M),M=b();if(U!==X){if(M=[],i.charCodeAt(V)===42?(U=Ln,V++):(U=X,re===0&&l(wn)),U===X&&(i.charCodeAt(V)===63?(U=Nr,V++):(U=X,re===0&&l(Jr)),U===X&&(U=C(),U===X&&(U=R()))),U!==X)for(;U!==X;)M.push(U),i.charCodeAt(V)===42?(U=Ln,V++):(U=X,re===0&&l(wn)),U===X&&(i.charCodeAt(V)===63?(U=Nr,V++):(U=X,re===0&&l(Jr)),U===X&&(U=C(),U===X&&(U=R())));else M=x;if(M!==X){for(U=[],M=b();M!==X;)U.push(M),M=b();U!==X?(Re=B,B=U={type:"glob",value:i.substring(Re,V)}):(V=B,B=x)}else V=B,B=x}else V=B,B=x;return B}function C(){var M,B=M=V;if(i.charCodeAt(V)===91){var U=dr;V++}else U=X,re===0&&l(gi);if(U!==X){var q=V;if(re++,i.charCodeAt(V)===45){var se=fr;V++}else se=X,re===0&&l(pr);if(re--,se===X?q=ct:(V=q,q=x),q!==X)if(i.length>V?(se=i.charAt(V),V++):(se=X,re===0&&l(Bt)),se!==X){if(i.charCodeAt(V)===45){var ae=fr;V++}else ae=X,re===0&&l(pr);if(ae!==X){var Se=V;if(re++,i.charCodeAt(V)===45){var We=fr;V++}else We=X,re===0&&l(pr);if(re--,We===X?Se=ct:(V=Se,Se=x),Se!==X)if(i.length>V?(We=i.charAt(V),V++):(We=X,re===0&&l(Bt)),We!==X){if(i.charCodeAt(V)===93){var ot=go;V++}else ot=X,re===0&&l(Zo);ot!==X?B=U=[U,q,se,ae,Se,We,ot]:(V=B,B=x)}else V=B,B=x;else V=B,B=x}else V=B,B=x}else V=B,B=x;else V=B,B=x}else V=B,B=x;return B!==X&&(B=i.substring(M,V)),B}function R(){var M,B=M=V;if(i.length>V){var U=i.charAt(V);V++}else U=X,re===0&&l(Bt);if(U===X&&(U=le),U!==X){var q=V;if(re++,i.charCodeAt(V)===36){var se=Fr;V++}else se=X,re===0&&l(Or);re--,se===X?q=ct:(V=q,q=x),q!==X?B=U=[U,q]:(V=B,B=x)}else V=B,B=x;if(B!==X)if(i.charCodeAt(V)===123?(U=So,V++):(U=X,re===0&&l(bo)),U!==X){if(q=[],se=b(),se!==X)for(;se!==X;)q.push(se),se=b();else q=x;q!==X?(i.charCodeAt(V)===125?(se=Tn,V++):(se=X,re===0&&l(Xn)),se!==X?M=B=[B,U,q,se]:(V=M,M=x)):(V=M,M=x)}else V=M,M=x;else V=M,M=x;return M}function Y(){var M=V;if(i.charCodeAt(V)===39){var B=Br;V++}else B=X,re===0&&l(Ur);if(B!==X){B=V;var U=[];if(Vn.test(i.charAt(V))){var q=i.charAt(V);V++}else q=X,re===0&&l(En);for(;q!==X;)U.push(q),Vn.test(i.charAt(V))?(q=i.charAt(V),V++):(q=X,re===0&&l(En));U!==X&&(U=i.substring(B,V)),B=U,B!==X?(i.charCodeAt(V)===39?(U=Br,V++):(U=X,re===0&&l(Ur)),U!==X?(Re=M,M=B=j(B)):(V=M,M=x)):(V=M,M=x)}else V=M,M=x;return M}function I(){var M=V;if(i.charCodeAt(V)===34){var B=mr;V++}else B=X,re===0&&l(yr);if(B!==X){B=[];var U=E();if(U===X){U=[];var q=w();if(q!==X)for(;q!==X;)U.push(q),q=w();else U=x}for(;U!==X;)if(B.push(U),U=E(),U===X)if(U=[],q=w(),q!==X)for(;q!==X;)U.push(q),q=w();else U=x;B!==X?(i.charCodeAt(V)===34?(U=mr,V++):(U=X,re===0&&l(yr)),U!==X?(Re=M,M=B=r(B)):(V=M,M=x)):(V=M,M=x)}else V=M,M=x;return M}function w(){var M=V;if(i.charCodeAt(V)===92){var B=Wn;V++}else B=X,re===0&&l(In);if(B!==X){var U=F();U!==X?(Re=M,M=U):(V=M,M=x)}else V=M,M=x;return M===X&&(M=V,i.substr(V,2)===vr?(B=vr,V+=2):(B=X,re===0&&l(kn)),B!==X&&(Re=M,B="\\"),M=B,M===X&&(B=M=V,re++,U=F(),re--,U===X?B=ct:(V=B,B=x),B!==X?(i.length>V?(U=i.charAt(V),V++):(U=X,re===0&&l(Bt)),U!==X?(Re=M,M=U):(V=M,M=x)):(V=M,M=x))),M}function F(){if(i.charCodeAt(V)===34){var M=mr;V++}else M=X,re===0&&l(yr);return M===X&&(i.charCodeAt(V)===36?(M=Fr,V++):(M=X,re===0&&l(Or)),M===X&&(i.charCodeAt(V)===96?(M=Ui,V++):(M=X,re===0&&l(ji)))),M}function E(){var M=J();return M===X&&(M=N(),M===X&&(M=K())),M}function N(){var M=V;if(i.charCodeAt(V)===36){var B=Fr;V++}else B=X,re===0&&l(Or);return B!==X?(B=L(),B===X&&(i.charCodeAt(V)===63?(B=Nr,V++):(B=X,re===0&&l(Jr))),B!==X?(Re=M,M=B={type:"variable",name:B}):(V=M,M=x)):(V=M,M=x),M}function L(){var M=V,B=[];if(Go.test(i.charAt(V))){var U=i.charAt(V);V++}else U=X,re===0&&l(Co);if(U!==X)for(;U!==X;)B.push(U),Go.test(i.charAt(V))?(U=i.charAt(V),V++):(U=X,re===0&&l(Co));else B=x;return B!==X&&(Re=M,B=i.substring(Re,V)),B}function K(){var M=V;if(i.substr(V,2)===jr){var B=jr;V+=2}else B=X,re===0&&l(Yo);if(B!==X){if(B=[],Ro.test(i.charAt(V))){var U=i.charAt(V);V++}else U=X,re===0&&l(Wo);for(;U!==X;)B.push(U),Ro.test(i.charAt(V))?(U=i.charAt(V),V++):(U=X,re===0&&l(Wo));B!==X?(i.charCodeAt(V)===125?(U=Tn,V++):(U=X,re===0&&l(Xn)),U!==X?(Re=M,M=B={type:"variableSubstitution",expression:B.join("")}):(V=M,M=x)):(V=M,M=x)}else V=M,M=x;return M}function J(){var M=V;if(i.substr(V,2)===Hr){var B=Hr;V+=2}else B=X,re===0&&l(Io);if(B!==X)if(B=h(),B!==X){if(i.charCodeAt(V)===41){var U=Lo;V++}else U=X,re===0&&l(wo);U!==X?(Re=M,M=B={type:"commandSubstitution",commands:B}):(V=M,M=x)}else V=M,M=x;else V=M,M=x;if(M===X)if(M=V,i.charCodeAt(V)===96?(B=Ui,V++):(B=X,re===0&&l(ji)),B!==X){if(B=[],U=P(),U!==X)for(;U!==X;)B.push(U),U=P();else B=x;B!==X?(i.charCodeAt(V)===96?(U=Ui,V++):(U=X,re===0&&l(ji)),U!==X?(Re=M,M=B={type:"commandSubstitution",commands:t(B.join(""))}):(V=M,M=x)):(V=M,M=x)}else V=M,M=x;return M}function P(){var M=V;if(i.substr(V,2)===To){var B=To;V+=2}else B=X,re===0&&l(Ls);if(B!==X&&(Re=M,B="`"),M=B,M===X&&(M=V,i.substr(V,2)===vr?(B=vr,V+=2):(B=X,re===0&&l(kn)),B!==X&&(Re=M,B="\\"),M=B,M===X)){if(B=M=V,re++,i.charCodeAt(V)===96){var U=Ui;V++}else U=X,re===0&&l(ji);re--,U===X?B=ct:(V=B,B=x),B!==X?(i.length>V?(U=i.charAt(V),V++):(U=X,re===0&&l(Bt)),U!==X?(Re=M,M=U):(V=M,M=x)):(V=M,M=x)}return M}function ee(){var M=V,B=he();if(B===X&&(B=le),B!==X){if(i.substr(V,2)===xn){var U=xn;V+=2}else U=X,re===0&&l(Jl);if(U===X&&(i.substr(V,2)===Kn?(U=Kn,V+=2):(U=X,re===0&&l(Vs))),U!==X){var q=he();if(q!==X){if(i.charCodeAt(V)===45){var se=fr;V++}else se=X,re===0&&l(pr);se!==X?(Re=M,M=B,M==null&&(M=U[0]=="<"?0:1),M=B={type:"moveFd",fd:M,op:U,dest:q}):(V=M,M=x)}else V=M,M=x}else V=M,M=x}else V=M,M=x;if(U=M,U===X){if(M=V,B=he(),B===X&&(B=le),B!==X)if(i.substr(V,2)===xn?(U=xn,V+=2):(U=X,re===0&&l(Jl)),U===X&&(i.substr(V,2)===Kn?(U=Kn,V+=2):(U=X,re===0&&l(Vs))),U!==X){for(se=[],q=$();q!==X;)se.push(q),q=$();se!==X?(q=he(),q!==X?(Re=M,M=B,M==null&&(M=U[0]=="<"?0:1),M=B={type:"duplicateFd",srcFd:M,op:U,destFd:q}):(V=M,M=x)):(V=M,M=x)}else V=M,M=x;else V=M,M=x;if(U=M,U===X)if(U=V,q=he(),q===X&&(q=le),q!==X)if(i.charCodeAt(V)===60?(M=Fl,V++):(M=X,re===0&&l(Ol)),M===X&&(i.charCodeAt(V)===62?(M=ne,V++):(M=X,re===0&&l(oe)),M===X&&(i.substr(V,2)===$e?(M=$e,V+=2):(M=X,re===0&&l(It)),M===X&&(i.substr(V,2)===ni?(M=ni,V+=2):(M=X,re===0&&l(kt)),M===X&&(i.substr(V,2)===De?(M=De,V+=2):(M=X,re===0&&l(Ut)),M===X&&(i.substr(V,3)===oi?(M=oi,V+=3):(M=X,re===0&&l(Mn))))))),M!==X){for(se=[],B=$();B!==X;)se.push(B),B=$();se!==X?(B=v(),B!==X?(Re=U,U=q,U==null&&(U=M[0]=="<"?0:1),U=q={type:"redirectFd",fd:U,op:M,filename:B}):(V=U,U=x)):(V=U,U=x)}else V=U,U=x;else V=U,U=x}return U}function he(){var M=V,B=[];if(Je.test(i.charAt(V))){var U=i.charAt(V);V++}else U=X,re===0&&l(St);if(U!==X)for(;U!==X;)B.push(U),Je.test(i.charAt(V))?(U=i.charAt(V),V++):(U=X,re===0&&l(St));else B=x;return B!==X&&(Re=M,B=parseInt(B.join(""),10)),B}function $(){if(i.charCodeAt(V)===32){var M=_r;V++}else M=X,re===0&&l(gr);return M===X&&(i.charCodeAt(V)===9?(M=Hi,V++):(M=X,re===0&&l(Di))),M}function de(){var M=$();return M===X&&(i.charCodeAt(V)===10?(M=lt,V++):(M=X,re===0&&l(Rt))),M}function pe(){var M=V;if(i.substr(V,5)===Ji){var B=Ji;V+=5}else B=X,re===0&&l(Mr);if(B===X&&(i.substr(V,5)===Fi?(B=Fi,V+=5):(B=X,re===0&&l(ur)),B===X&&(i.substr(V,3)===ht?(B=ht,V+=3):(B=X,re===0&&l(pt)),B===X&&(i.substr(V,4)===O?(B=O,V+=4):(B=X,re===0&&l(W)),B===X&&(i.substr(V,2)===nt?(B=nt,V+=2):(B=X,re===0&&l(hr)),B===X&&(i.substr(V,4)===Ee?(B=Ee,V+=4):(B=X,re===0&&l(mt)),B===X&&(i.substr(V,4)===yt?(B=yt,V+=4):(B=X,re===0&&l(jt)),B===X&&(i.substr(V,2)===T?(B=T,V+=2):(B=X,re===0&&l(k)),B===X&&(i.substr(V,4)===z?(B=z,V+=4):(B=X,re===0&&l(ce)),B===X&&(i.substr(V,4)===ye?(B=ye,V+=4):(B=X,re===0&&l(Ke)),B===X&&(i.substr(V,4)===vi?(B=vi,V+=4):(B=X,re===0&&l(Oi)),B===X&&(i.substr(V,2)===He?(B=He,V+=2):(B=X,re===0&&l(Wt)),B===X&&(i.substr(V,2)===ri?(B=ri,V+=2):(B=X,re===0&&l(Bi)))))))))))))),B!==X){var U=[],q=de();if(q!==X)for(;q!==X;)U.push(q),q=de();else U=x;U===X&&(U=V,re++,i.length>V?(q=i.charAt(V),V++):(q=X,re===0&&l(Bt)),re--,q===X?U=ct:(V=U,U=x)),U!==X?M=B=[B,U]:(V=M,M=x)}else V=M,M=x;return M}function j(M){return{type:"literal",value:ci(M)?M.join(""):M}}function ie(M){return M[0]}function H(M){return M[1]}function Q(M){for(var B=[M[0]],U=M.length,q=M[0],se,ae=1;ae<U;ae++)se=M[ae],se.type=="concatenation"&&(se=Q(se.pieces)),se.type=="concatenation"?B=B.concat(se.pieces):se.type!="literal"&&se.type!="glob"||q.type!="literal"&&q.type!="glob"?(B.push(se),q=se):(q.value+=se.value,q.type!="glob"&&se.type=="glob"&&(q.type="glob"));return B.length==1?B[0]:{type:"concatenation",pieces:B}}var D=1<arguments.length?arguments[1]:{},X={},ge={script:a,command:c,argument:v,continuationStart:function(){var M,B=M=V;re++;var U=pe();if(U===X&&(i.charCodeAt(V)===34?(U=mr,V++):(U=X,re===0&&l(yr)),U===X&&(i.charCodeAt(V)===39?(U=Br,V++):(U=X,re===0&&l(Ur)),U===X&&(i.charCodeAt(V)===96?(U=Ui,V++):(U=X,re===0&&l(ji)),U===X&&(i.substr(V,2)===Hr?(U=Hr,V+=2):(U=X,re===0&&l(Io)),U===X&&(i.substr(V,2)===jr?(U=jr,V+=2):(U=X,re===0&&l(Yo)),U===X&&(i.charCodeAt(V)===40?(U=Xo,V++):(U=X,re===0&&l(Vo)))))))),re--,U!==X?(V=B,B=ct):B=x,B!==X){if(U=[],i.length>V){var q=i.charAt(V);V++}else q=X,re===0&&l(Bt);for(;q!==X;)U.push(q),i.length>V?(q=i.charAt(V),V++):(q=X,re===0&&l(Bt));U!==X?M=B=[B,U]:(V=M,M=x)}else V=M,M=x;return M}},te=a,x=X,A={type:"other",description:"a list of statements"},le=null,Ge="&&",be={type:"literal",value:"&&",description:'"&&"'},Ye="||",ve={type:"literal",value:"||",description:'"||"'},xe="&",we={type:"literal",value:"&",description:'"&"'},Ze=";",je={type:"literal",value:";",description:'";"'},lt=`
`,Rt={type:"literal",value:`
`,description:'"\\n"'},Ni={type:"other",description:"a single command"},Ji="while",Mr={type:"literal",value:"while",description:'"while"'},Fi="until",ur={type:"literal",value:"until",description:'"until"'},nt="do",hr={type:"literal",value:"do",description:'"do"'},O="done",W={type:"literal",value:"done",description:'"done"'},T="if",k={type:"literal",value:"if",description:'"if"'},z="then",ce={type:"literal",value:"then",description:'"then"'},ye="else",Ke={type:"literal",value:"else",description:'"else"'},He="fi",Wt={type:"literal",value:"fi",description:'"fi"'},vi="elif",Oi={type:"literal",value:"elif",description:'"elif"'},Ot="=",Xi={type:"literal",value:"=",description:'"="'},_i={type:"other",description:"command name"},ct=void 0,dr="[",gi={type:"literal",value:"[",description:'"["'},ri="[[",Bi={type:"literal",value:"[[",description:'"[["'},Pr={type:"other",description:"command argument"},Wn="\\",In={type:"literal",value:"\\",description:'"\\\\"'},Bt={type:"any",description:"any character"},vo=/^[$"';&<>\n()[*?|` ]/,_o={type:"class",value:"[$\"';&<>\\n()[*?|` ]",description:"[$\"';&<>\\n()[*?|` ]"},Ln="*",wn={type:"literal",value:"*",description:'"*"'},Nr="?",Jr={type:"literal",value:"?",description:'"?"'},fr="-",pr={type:"literal",value:"-",description:'"-"'},go="]",Zo={type:"literal",value:"]",description:'"]"'},Fr="$",Or={type:"literal",value:"$",description:'"$"'},So="{",bo={type:"literal",value:"{",description:'"{"'},Tn="}",Xn={type:"literal",value:"}",description:'"}"'},Br="'",Ur={type:"literal",value:"'",description:`"'"`},Vn=/^[^']/,En={type:"class",value:"[^']",description:"[^']"},mr='"',yr={type:"literal",value:'"',description:'"\\""'},vr="\\\\",kn={type:"literal",value:"\\\\",description:'"\\\\\\\\"'},Ui="`",ji={type:"literal",value:"`",description:'"`"'},Go=/^[a-zA-Z0-9_]/,Co={type:"class",value:"[a-zA-Z0-9_]",description:"[a-zA-Z0-9_]"},jr="${",Yo={type:"literal",value:"${",description:'"${"'},Ro=/^[^}]/,Wo={type:"class",value:"[^}]",description:"[^}]"},Hr="$(",Io={type:"literal",value:"$(",description:'"$("'},Lo=")",wo={type:"literal",value:")",description:'")"'},To="\\`",Ls={type:"literal",value:"\\`",description:'"\\\\`"'},ws=/^[<>]/,Ts={type:"class",value:"[<>]",description:"[<>]"},Xo="(",Vo={type:"literal",value:"(",description:'"("'},Nl="|",Xs={type:"literal",value:"|",description:'"|"'},xn="<&",Jl={type:"literal",value:"<&",description:'"<&"'},Kn=">&",Vs={type:"literal",value:">&",description:'">&"'},Fl="<",Ol={type:"literal",value:"<",description:'"<"'},ne=">",oe={type:"literal",value:">",description:'">"'},$e=">|",It={type:"literal",value:">|",description:'">|"'},ni="&>",kt={type:"literal",value:"&>",description:'"&>"'},De=">>",Ut={type:"literal",value:">>",description:'">>"'},oi="&>>",Mn={type:"literal",value:"&>>",description:'"&>>"'},Je=/^[0-9]/,St={type:"class",value:"[0-9]",description:"[0-9]"},_r=" ",gr={type:"literal",value:" ",description:'" "'},Hi="	",Di={type:"literal",value:"	",description:'"\\t"'},ht="for",pt={type:"literal",value:"for",description:'"for"'},Ee="case",mt={type:"literal",value:"case",description:'"case"'},yt="esac",jt={type:"literal",value:"esac",description:'"esac"'},V=0,Re=0,bt=0,zi={line:1,column:1,seenCR:!1},si=0,li=[],re=0;if("startRule"in D){if(!(D.startRule in ge))throw Error(`Can't start parsing from rule "`+D.startRule+'".');te=ge[D.startRule]}var ci=cS,xt=aS,Zr=te();if(Zr!==X&&V===i.length)return Zr;throw Zr!==X&&V<i.length&&l({type:"end",description:"end of input"}),function(M,B,U){function q(We){var ot=1;for(We.sort(function(Bl,Pn){return Bl.description<Pn.description?-1:Bl.description>Pn.description?1:0});ot<We.length;)We[ot-1]===We[ot]?We.splice(ot,1):ot++}function se(We,ot){function Bl($v){function Ul(Sr){return Sr.charCodeAt(0).toString(16).toUpperCase()}return $v.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(Sr){return"\\x0"+Ul(Sr)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(Sr){return"\\x"+Ul(Sr)}).replace(/[\u0180-\u0FFF]/g,function(Sr){return"\\u0"+Ul(Sr)}).replace(/[\u1080-\uFFFF]/g,function(Sr){return"\\u"+Ul(Sr)})}var Pn=Array(We.length),Es;for(Es=0;Es<We.length;Es++)Pn[Es]=We[Es].description;return We=1<We.length?Pn.slice(0,-1).join(", ")+" or "+Pn[We.length-1]:Pn[0],ot=ot?'"'+Bl(ot)+'"':"end of input","Expected "+We+" but "+ot+" found."}var ae=u(U),Se=U<i.length?i.charAt(U):null;return B!==null&&q(B),new e(M!==null?M:se(B,Se),B,Se,U,ae.line,ae.column)}(null,li,si)}return function(i,r){function n(){this.constructor=i}n.prototype=r.prototype,i.prototype=new n}(e,Error),{SyntaxError:e,parse:t}}(),hS=wv.SyntaxError;Lv.SyntaxError=hS;var Zi={FILE_PATH:{DEVICE_FRAMEBUFFER_ZERO:{PATH:"/_wasmer/dev/fb0",FRAME_BUFFER:"/_wasmer/dev/fb0/fb",VIRTUAL_SIZE:"/_wasmer/dev/fb0/virtual_size",DRAW:"/_wasmer/dev/fb0/draw",INPUT:"/_wasmer/dev/fb0/input"}}},Lc=void 0;typeof window=="object"?Lc=window.TextDecoder:typeof self=="object"?Lc=self.TextDecoder:typeof require=="function"&&(Lc=require("util").TextDecoder);var dS=function(){function e(t){this.wasmFs=t,this.wasmFs.volume.mkdirSync(Zi.FILE_PATH.DEVICE_FRAMEBUFFER_ZERO.PATH,{recursive:!0}),this.wasmFs.volume.writeFileSync(Zi.FILE_PATH.DEVICE_FRAMEBUFFER_ZERO.FRAME_BUFFER,""),this.wasmFs.volume.writeFileSync(Zi.FILE_PATH.DEVICE_FRAMEBUFFER_ZERO.VIRTUAL_SIZE,""),this.wasmFs.volume.writeFileSync(Zi.FILE_PATH.DEVICE_FRAMEBUFFER_ZERO.DRAW,""),this.wasmFs.volume.writeFileSync(Zi.FILE_PATH.DEVICE_FRAMEBUFFER_ZERO.INPUT,""),this.windowSizeCallback=function(){},this.bufferIndexDisplayCallback=function(){},this.inputCallback=function(){return new Uint8Array},this.fdFrameBuffer=this.wasmFs.volume.openSync(Zi.FILE_PATH.DEVICE_FRAMEBUFFER_ZERO.FRAME_BUFFER,"w+"),this.fdBufferIndexDisplay=this.wasmFs.volume.openSync(Zi.FILE_PATH.DEVICE_FRAMEBUFFER_ZERO.DRAW,"w+"),this.fdWindowSize=this.wasmFs.fs.openSync(Zi.FILE_PATH.DEVICE_FRAMEBUFFER_ZERO.VIRTUAL_SIZE,"w+"),this.fdInput=this.wasmFs.volume.openSync(Zi.FILE_PATH.DEVICE_FRAMEBUFFER_ZERO.INPUT,"w+");var i=this,r=this.wasmFs.volume.fds[this.fdInput].node.read;this.wasmFs.volume.fds[this.fdInput].node.read=function(){var s=i.inputCallback();return i.wasmFs.volume.writeFileSync(Zi.FILE_PATH.DEVICE_FRAMEBUFFER_ZERO.INPUT,s),s=Array.prototype.slice.call(arguments),r.apply(i.wasmFs.volume.fds[i.fdInput].node,s)};var n=this.wasmFs.volume.fds[this.fdWindowSize].node.write;this.wasmFs.volume.fds[this.fdWindowSize].node.write=function(){var s=Array.prototype.slice.call(arguments);return s=n.apply(i.wasmFs.volume.fds[i.fdWindowSize].node,s),i.windowSizeCallback(),s};var o=this.wasmFs.volume.fds[this.fdBufferIndexDisplay].node.write;this.wasmFs.volume.fds[this.fdBufferIndexDisplay].node.write=function(){var s=Array.prototype.slice.call(arguments);return s=o.apply(i.wasmFs.volume.fds[i.fdBufferIndexDisplay].node,s),i.bufferIndexDisplayCallback(),s}}return e.prototype.getFrameBuffer=function(){return this.wasmFs.fs.readFileSync(Zi.FILE_PATH.DEVICE_FRAMEBUFFER_ZERO.FRAME_BUFFER)},e.prototype.getWindowSize=function(){var t=this.wasmFs.fs.readFileSync(Zi.FILE_PATH.DEVICE_FRAMEBUFFER_ZERO.VIRTUAL_SIZE);return 0<t.length?(t=new Lc("utf-8").decode(t).split("x"),[parseInt(t[0],10),parseInt(t[1],10)]):[0,0]},e.prototype.setWindowSizeCallback=function(t){this.windowSizeCallback=t},e.prototype.setBufferIndexDisplayCallback=function(t){this.bufferIndexDisplayCallback=t},e.prototype.setInputCallback=function(t){this.inputCallback=t},e}();function Xh(e,t){return Xh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},Xh(e,t)}function Ud(e,t){function i(){this.constructor=e}Xh(e,t),e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}function dc(e){var t=typeof Symbol=="function"&&e[Symbol.iterator],i=0;return t?t.call(e):{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}}}function wc(e,t){var i=typeof Symbol=="function"&&e[Symbol.iterator];if(!i)return e;e=i.call(e);var r,n=[];try{for(;(t===void 0||0<t--)&&!(r=e.next()).done;)n.push(r.value)}catch(s){var o={error:s}}finally{try{r&&!r.done&&(i=e.return)&&i.call(e)}finally{if(o)throw o.error}}return n}function Tc(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(wc(arguments[t]));return e}var fS=typeof globalThis<"u"?globalThis:typeof sr<"u"?sr:{},_e=typeof BigInt<"u"?BigInt:fS.BigInt||Number,Xc=DataView;Xc.prototype.setBigUint64||(Xc.prototype.setBigUint64=function(e,t,i){if(t<Math.pow(2,32)){t=Number(t);var r=0}else{r=t.toString(2),t="";for(var n=0;n<64-r.length;n++)t+="0";t+=r,r=parseInt(t.substring(0,32),2),t=parseInt(t.substring(32),2)}this.setUint32(e+(i?0:4),t,i),this.setUint32(e+(i?4:0),r,i)},Xc.prototype.getBigUint64=function(e,t){var i=this.getUint32(e+(t?0:4),t);e=this.getUint32(e+(t?4:0),t),i=i.toString(2),e=e.toString(2),t="";for(var r=0;r<32-i.length;r++)t+="0";return _e("0b"+e+(t+i))});var Vl=typeof sr<"u"?sr:typeof self<"u"?self:typeof window<"u"?window:{},tr=[],Ci=[],pS=typeof Uint8Array<"u"?Uint8Array:Array,jd=!1;function Tv(){jd=!0;for(var e=0;64>e;++e)tr[e]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[e],Ci["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(e)]=e;Ci[45]=62,Ci[95]=63}function mS(e,t,i){for(var r=[],n=t;n<i;n+=3)t=(e[n]<<16)+(e[n+1]<<8)+e[n+2],r.push(tr[t>>18&63]+tr[t>>12&63]+tr[t>>6&63]+tr[t&63]);return r.join("")}function $p(e){jd||Tv();for(var t=e.length,i=t%3,r="",n=[],o=0,s=t-i;o<s;o+=16383)n.push(mS(e,o,o+16383>s?s:o+16383));return i===1?(e=e[t-1],r+=tr[e>>2],r+=tr[e<<4&63],r+="=="):i===2&&(e=(e[t-2]<<8)+e[t-1],r+=tr[e>>10],r+=tr[e>>4&63],r+=tr[e<<2&63],r+="="),n.push(r),n.join("")}function ka(e,t,i,r,n){var o=8*n-r-1,s=(1<<o)-1,u=s>>1,l=-7;n=i?n-1:0;var a=i?-1:1,h=e[t+n];for(n+=a,i=h&(1<<-l)-1,h>>=-l,l+=o;0<l;i=256*i+e[t+n],n+=a,l-=8);for(o=i&(1<<-l)-1,i>>=-l,l+=r;0<l;o=256*o+e[t+n],n+=a,l-=8);if(i===0)i=1-u;else{if(i===s)return o?NaN:1/0*(h?-1:1);o+=Math.pow(2,r),i-=u}return(h?-1:1)*o*Math.pow(2,i-r)}function xa(e,t,i,r,n,o){var s,u=8*o-n-1,l=(1<<u)-1,a=l>>1,h=n===23?Math.pow(2,-24)-Math.pow(2,-77):0;o=r?0:o-1;var p=r?1:-1,d=0>t||t===0&&0>1/t?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(t=isNaN(t)?1:0,r=l):(r=Math.floor(Math.log(t)/Math.LN2),1>t*(s=Math.pow(2,-r))&&(r--,s*=2),t=1<=r+a?t+h/s:t+h*Math.pow(2,1-a),2<=t*s&&(r++,s/=2),r+a>=l?(t=0,r=l):1<=r+a?(t=(t*s-1)*Math.pow(2,n),r+=a):(t=t*Math.pow(2,a-1)*Math.pow(2,n),r=0));8<=n;e[i+o]=t&255,o+=p,t/=256,n-=8);for(r=r<<n|t,u+=n;0<u;e[i+o]=r&255,o+=p,r/=256,u-=8);e[i+o-p]|=128*d}var yS={}.toString,Xv=Array.isArray||function(e){return yS.call(e)=="[object Array]"};fe.TYPED_ARRAY_SUPPORT=Vl.TYPED_ARRAY_SUPPORT!==void 0?Vl.TYPED_ARRAY_SUPPORT:!0;var vS=fe.TYPED_ARRAY_SUPPORT?2147483647:1073741823;function wr(e,t){if((fe.TYPED_ARRAY_SUPPORT?2147483647:1073741823)<t)throw new RangeError("Invalid typed array length");return fe.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=fe.prototype):(e===null&&(e=new fe(t)),e.length=t),e}function fe(e,t,i){if(!(fe.TYPED_ARRAY_SUPPORT||this instanceof fe))return new fe(e,t,i);if(typeof e=="number"){if(typeof t=="string")throw Error("If encoding is specified then the first argument must be a string");return Hd(this,e)}return Vv(this,e,t,i)}fe.poolSize=8192;fe._augment=function(e){return e.__proto__=fe.prototype,e};function Vv(e,t,i,r){if(typeof t=="number")throw new TypeError('"value" argument must not be a number');if(typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer){if(t.byteLength,0>i||t.byteLength<i)throw new RangeError("'offset' is out of bounds");if(t.byteLength<i+(r||0))throw new RangeError("'length' is out of bounds");return t=i===void 0&&r===void 0?new Uint8Array(t):r===void 0?new Uint8Array(t,i):new Uint8Array(t,i,r),fe.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=fe.prototype):e=Vh(e,t),e}if(typeof t=="string"){if(r=e,e=i,(typeof e!="string"||e==="")&&(e="utf8"),!fe.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');return i=kv(t,e)|0,r=wr(r,i),t=r.write(t,e),t!==i&&(r=r.slice(0,t)),r}return _S(e,t)}fe.from=function(e,t,i){return Vv(null,e,t,i)};fe.TYPED_ARRAY_SUPPORT&&(fe.prototype.__proto__=Uint8Array.prototype,fe.__proto__=Uint8Array);function Ev(e){if(typeof e!="number")throw new TypeError('"size" argument must be a number');if(0>e)throw new RangeError('"size" argument must not be negative')}fe.alloc=function(e,t,i){return Ev(e),e=0>=e?wr(null,e):t!==void 0?typeof i=="string"?wr(null,e).fill(t,i):wr(null,e).fill(t):wr(null,e)};function Hd(e,t){if(Ev(t),e=wr(e,0>t?0:Dd(t)|0),!fe.TYPED_ARRAY_SUPPORT)for(var i=0;i<t;++i)e[i]=0;return e}fe.allocUnsafe=function(e){return Hd(null,e)};fe.allocUnsafeSlow=function(e){return Hd(null,e)};function Vh(e,t){var i=0>t.length?0:Dd(t.length)|0;e=wr(e,i);for(var r=0;r<i;r+=1)e[r]=t[r]&255;return e}function _S(e,t){if(ar(t)){var i=Dd(t.length)|0;return e=wr(e,i),e.length===0||t.copy(e,0,0,i),e}if(t){if(typeof ArrayBuffer<"u"&&t.buffer instanceof ArrayBuffer||"length"in t)return(i=typeof t.length!="number")||(i=t.length,i=i!==i),i?wr(e,0):Vh(e,t);if(t.type==="Buffer"&&Xv(t.data))return Vh(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function Dd(e){if(e>=(fe.TYPED_ARRAY_SUPPORT?2147483647:1073741823))throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+(fe.TYPED_ARRAY_SUPPORT?2147483647:1073741823).toString(16)+" bytes");return e|0}fe.isBuffer=Pv;function ar(e){return!(e==null||!e._isBuffer)}fe.compare=function(e,t){if(!ar(e)||!ar(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var i=e.length,r=t.length,n=0,o=Math.min(i,r);n<o;++n)if(e[n]!==t[n]){i=e[n],r=t[n];break}return i<r?-1:r<i?1:0};fe.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};fe.concat=function(e,t){if(!Xv(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return fe.alloc(0);var i;if(t===void 0)for(i=t=0;i<e.length;++i)t+=e[i].length;t=fe.allocUnsafe(t);var r=0;for(i=0;i<e.length;++i){var n=e[i];if(!ar(n))throw new TypeError('"list" argument must be an Array of Buffers');n.copy(t,r),r+=n.length}return t};function kv(e,t){if(ar(e))return e.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;typeof e!="string"&&(e=""+e);var i=e.length;if(i===0)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":case void 0:return ca(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return Mv(e).length;default:if(r)return ca(e).length;t=(""+t).toLowerCase(),r=!0}}fe.byteLength=kv;function gS(e,t,i){var r=!1;if((t===void 0||0>t)&&(t=0),t>this.length||((i===void 0||i>this.length)&&(i=this.length),0>=i)||(i>>>=0,t>>>=0,i<=t))return"";for(e||(e="utf8");;)switch(e){case"hex":for(e=t,t=i,i=this.length,(!e||0>e)&&(e=0),(!t||0>t||t>i)&&(t=i),r="",i=e;i<t;++i)e=r,r=this[i],r=16>r?"0"+r.toString(16):r.toString(16),r=e+r;return r;case"utf8":case"utf-8":return Kv(this,t,i);case"ascii":for(e="",i=Math.min(this.length,i);t<i;++t)e+=String.fromCharCode(this[t]&127);return e;case"latin1":case"binary":for(e="",i=Math.min(this.length,i);t<i;++t)e+=String.fromCharCode(this[t]);return e;case"base64":return t=t===0&&i===this.length?$p(this):$p(this.slice(t,i)),t;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(t=this.slice(t,i),i="",e=0;e<t.length;e+=2)i+=String.fromCharCode(t[e]+256*t[e+1]);return i;default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}fe.prototype._isBuffer=!0;function $n(e,t,i){var r=e[t];e[t]=e[i],e[i]=r}fe.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)$n(this,t,t+1);return this};fe.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)$n(this,t,t+3),$n(this,t+1,t+2);return this};fe.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)$n(this,t,t+7),$n(this,t+1,t+6),$n(this,t+2,t+5),$n(this,t+3,t+4);return this};fe.prototype.toString=function(){var e=this.length|0;return e===0?"":arguments.length===0?Kv(this,0,e):gS.apply(this,arguments)};fe.prototype.equals=function(e){if(!ar(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:fe.compare(this,e)===0};fe.prototype.inspect=function(){var e="";return 0<this.length&&(e=this.toString("hex",0,50).match(/.{2}/g).join(" "),50<this.length&&(e+=" ... ")),"<Buffer "+e+">"};fe.prototype.compare=function(e,t,i,r,n){if(!ar(e))throw new TypeError("Argument must be a Buffer");if(t===void 0&&(t=0),i===void 0&&(i=e?e.length:0),r===void 0&&(r=0),n===void 0&&(n=this.length),0>t||i>e.length||0>r||n>this.length)throw new RangeError("out of range index");if(r>=n&&t>=i)return 0;if(r>=n)return-1;if(t>=i)return 1;if(t>>>=0,i>>>=0,r>>>=0,n>>>=0,this===e)return 0;var o=n-r,s=i-t,u=Math.min(o,s);for(r=this.slice(r,n),e=e.slice(t,i),t=0;t<u;++t)if(r[t]!==e[t]){o=r[t],s=e[t];break}return o<s?-1:s<o?1:0};function xv(e,t,i,r,n){if(e.length===0)return-1;if(typeof i=="string"?(r=i,i=0):2147483647<i?i=2147483647:-2147483648>i&&(i=-2147483648),i=+i,isNaN(i)&&(i=n?0:e.length-1),0>i&&(i=e.length+i),i>=e.length){if(n)return-1;i=e.length-1}else if(0>i)if(n)i=0;else return-1;if(typeof t=="string"&&(t=fe.from(t,r)),ar(t))return t.length===0?-1:em(e,t,i,r,n);if(typeof t=="number")return t&=255,fe.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?n?Uint8Array.prototype.indexOf.call(e,t,i):Uint8Array.prototype.lastIndexOf.call(e,t,i):em(e,[t],i,r,n);throw new TypeError("val must be string, number or Buffer")}function em(e,t,i,r,n){function o(a,h){return s===1?a[h]:a.readUInt16BE(h*s)}var s=1,u=e.length,l=t.length;if(r!==void 0&&(r=String(r).toLowerCase(),r==="ucs2"||r==="ucs-2"||r==="utf16le"||r==="utf-16le")){if(2>e.length||2>t.length)return-1;s=2,u/=2,l/=2,i/=2}if(n)for(r=-1;i<u;i++)if(o(e,i)===o(t,r===-1?0:i-r)){if(r===-1&&(r=i),i-r+1===l)return r*s}else r!==-1&&(i-=i-r),r=-1;else for(i+l>u&&(i=u-l);0<=i;i--){for(u=!0,r=0;r<l;r++)if(o(e,i+r)!==o(t,r)){u=!1;break}if(u)return i}return-1}fe.prototype.includes=function(e,t,i){return this.indexOf(e,t,i)!==-1};fe.prototype.indexOf=function(e,t,i){return xv(this,e,t,i,!0)};fe.prototype.lastIndexOf=function(e,t,i){return xv(this,e,t,i,!1)};fe.prototype.write=function(e,t,i,r){if(t===void 0)r="utf8",i=this.length,t=0;else if(i===void 0&&typeof t=="string")r=t,i=this.length,t=0;else if(isFinite(t))t|=0,isFinite(i)?(i|=0,r===void 0&&(r="utf8")):(r=i,i=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var n=this.length-t;if((i===void 0||i>n)&&(i=n),0<e.length&&(0>i||0>t)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");for(r||(r="utf8"),n=!1;;)switch(r){case"hex":e:{if(t=Number(t)||0,r=this.length-t,i?(i=Number(i),i>r&&(i=r)):i=r,r=e.length,r%2!==0)throw new TypeError("Invalid hex string");for(i>r/2&&(i=r/2),r=0;r<i;++r){if(n=parseInt(e.substr(2*r,2),16),isNaN(n)){e=r;break e}this[t+r]=n}e=r}return e;case"utf8":case"utf-8":return Hs(ca(e,this.length-t),this,t,i);case"ascii":return Hs(im(e),this,t,i);case"latin1":case"binary":return Hs(im(e),this,t,i);case"base64":return Hs(Mv(e),this,t,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":r=e,n=this.length-t;for(var o=[],s=0;s<r.length&&!(0>(n-=2));++s){var u=r.charCodeAt(s);e=u>>8,u%=256,o.push(u),o.push(e)}return Hs(o,this,t,i);default:if(n)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),n=!0}};fe.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Kv(e,t,i){i=Math.min(e.length,i);for(var r=[];t<i;){var n=e[t],o=null,s=239<n?4:223<n?3:191<n?2:1;if(t+s<=i)switch(s){case 1:128>n&&(o=n);break;case 2:var u=e[t+1];(u&192)===128&&(n=(n&31)<<6|u&63,127<n&&(o=n));break;case 3:u=e[t+1];var l=e[t+2];(u&192)===128&&(l&192)===128&&(n=(n&15)<<12|(u&63)<<6|l&63,2047<n&&(55296>n||57343<n)&&(o=n));break;case 4:u=e[t+1],l=e[t+2];var a=e[t+3];(u&192)===128&&(l&192)===128&&(a&192)===128&&(n=(n&15)<<18|(u&63)<<12|(l&63)<<6|a&63,65535<n&&1114112>n&&(o=n))}o===null?(o=65533,s=1):65535<o&&(o-=65536,r.push(o>>>10&1023|55296),o=56320|o&1023),r.push(o),t+=s}if(e=r.length,e<=tm)r=String.fromCharCode.apply(String,r);else{for(i="",t=0;t<e;)i+=String.fromCharCode.apply(String,r.slice(t,t+=tm));r=i}return r}var tm=4096;fe.prototype.slice=function(e,t){var i=this.length;if(e=~~e,t=t===void 0?i:~~t,0>e?(e+=i,0>e&&(e=0)):e>i&&(e=i),0>t?(t+=i,0>t&&(t=0)):t>i&&(t=i),t<e&&(t=e),fe.TYPED_ARRAY_SUPPORT)t=this.subarray(e,t),t.__proto__=fe.prototype;else{i=t-e,t=new fe(i,void 0);for(var r=0;r<i;++r)t[r]=this[r+e]}return t};function Zt(e,t,i){if(e%1!==0||0>e)throw new RangeError("offset is not uint");if(e+t>i)throw new RangeError("Trying to access beyond buffer length")}fe.prototype.readUIntLE=function(e,t,i){e|=0,t|=0,i||Zt(e,t,this.length),i=this[e];for(var r=1,n=0;++n<t&&(r*=256);)i+=this[e+n]*r;return i};fe.prototype.readUIntBE=function(e,t,i){e|=0,t|=0,i||Zt(e,t,this.length),i=this[e+--t];for(var r=1;0<t&&(r*=256);)i+=this[e+--t]*r;return i};fe.prototype.readUInt8=function(e,t){return t||Zt(e,1,this.length),this[e]};fe.prototype.readUInt16LE=function(e,t){return t||Zt(e,2,this.length),this[e]|this[e+1]<<8};fe.prototype.readUInt16BE=function(e,t){return t||Zt(e,2,this.length),this[e]<<8|this[e+1]};fe.prototype.readUInt32LE=function(e,t){return t||Zt(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]};fe.prototype.readUInt32BE=function(e,t){return t||Zt(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])};fe.prototype.readIntLE=function(e,t,i){e|=0,t|=0,i||Zt(e,t,this.length),i=this[e];for(var r=1,n=0;++n<t&&(r*=256);)i+=this[e+n]*r;return i>=128*r&&(i-=Math.pow(2,8*t)),i};fe.prototype.readIntBE=function(e,t,i){e|=0,t|=0,i||Zt(e,t,this.length),i=t;for(var r=1,n=this[e+--i];0<i&&(r*=256);)n+=this[e+--i]*r;return n>=128*r&&(n-=Math.pow(2,8*t)),n};fe.prototype.readInt8=function(e,t){return t||Zt(e,1,this.length),this[e]&128?-1*(255-this[e]+1):this[e]};fe.prototype.readInt16LE=function(e,t){return t||Zt(e,2,this.length),e=this[e]|this[e+1]<<8,e&32768?e|4294901760:e};fe.prototype.readInt16BE=function(e,t){return t||Zt(e,2,this.length),e=this[e+1]|this[e]<<8,e&32768?e|4294901760:e};fe.prototype.readInt32LE=function(e,t){return t||Zt(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};fe.prototype.readInt32BE=function(e,t){return t||Zt(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};fe.prototype.readFloatLE=function(e,t){return t||Zt(e,4,this.length),ka(this,e,!0,23,4)};fe.prototype.readFloatBE=function(e,t){return t||Zt(e,4,this.length),ka(this,e,!1,23,4)};fe.prototype.readDoubleLE=function(e,t){return t||Zt(e,8,this.length),ka(this,e,!0,52,8)};fe.prototype.readDoubleBE=function(e,t){return t||Zt(e,8,this.length),ka(this,e,!1,52,8)};function ii(e,t,i,r,n,o){if(!ar(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>n||t<o)throw new RangeError('"value" argument is out of bounds');if(i+r>e.length)throw new RangeError("Index out of range")}fe.prototype.writeUIntLE=function(e,t,i,r){e=+e,t|=0,i|=0,r||ii(this,e,t,i,Math.pow(2,8*i)-1,0),r=1;var n=0;for(this[t]=e&255;++n<i&&(r*=256);)this[t+n]=e/r&255;return t+i};fe.prototype.writeUIntBE=function(e,t,i,r){e=+e,t|=0,i|=0,r||ii(this,e,t,i,Math.pow(2,8*i)-1,0),r=i-1;var n=1;for(this[t+r]=e&255;0<=--r&&(n*=256);)this[t+r]=e/n&255;return t+i};fe.prototype.writeUInt8=function(e,t,i){return e=+e,t|=0,i||ii(this,e,t,1,255,0),fe.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=e&255,t+1};function Ka(e,t,i,r){0>t&&(t=65535+t+1);for(var n=0,o=Math.min(e.length-i,2);n<o;++n)e[i+n]=(t&255<<8*(r?n:1-n))>>>8*(r?n:1-n)}fe.prototype.writeUInt16LE=function(e,t,i){return e=+e,t|=0,i||ii(this,e,t,2,65535,0),fe.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8):Ka(this,e,t,!0),t+2};fe.prototype.writeUInt16BE=function(e,t,i){return e=+e,t|=0,i||ii(this,e,t,2,65535,0),fe.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e&255):Ka(this,e,t,!1),t+2};function Ma(e,t,i,r){0>t&&(t=4294967295+t+1);for(var n=0,o=Math.min(e.length-i,4);n<o;++n)e[i+n]=t>>>8*(r?n:3-n)&255}fe.prototype.writeUInt32LE=function(e,t,i){return e=+e,t|=0,i||ii(this,e,t,4,4294967295,0),fe.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e&255):Ma(this,e,t,!0),t+4};fe.prototype.writeUInt32BE=function(e,t,i){return e=+e,t|=0,i||ii(this,e,t,4,4294967295,0),fe.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255):Ma(this,e,t,!1),t+4};fe.prototype.writeIntLE=function(e,t,i,r){e=+e,t|=0,r||(r=Math.pow(2,8*i-1),ii(this,e,t,i,r-1,-r)),r=0;var n=1,o=0;for(this[t]=e&255;++r<i&&(n*=256);)0>e&&o===0&&this[t+r-1]!==0&&(o=1),this[t+r]=(e/n>>0)-o&255;return t+i};fe.prototype.writeIntBE=function(e,t,i,r){e=+e,t|=0,r||(r=Math.pow(2,8*i-1),ii(this,e,t,i,r-1,-r)),r=i-1;var n=1,o=0;for(this[t+r]=e&255;0<=--r&&(n*=256);)0>e&&o===0&&this[t+r+1]!==0&&(o=1),this[t+r]=(e/n>>0)-o&255;return t+i};fe.prototype.writeInt8=function(e,t,i){return e=+e,t|=0,i||ii(this,e,t,1,127,-128),fe.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),0>e&&(e=255+e+1),this[t]=e&255,t+1};fe.prototype.writeInt16LE=function(e,t,i){return e=+e,t|=0,i||ii(this,e,t,2,32767,-32768),fe.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8):Ka(this,e,t,!0),t+2};fe.prototype.writeInt16BE=function(e,t,i){return e=+e,t|=0,i||ii(this,e,t,2,32767,-32768),fe.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e&255):Ka(this,e,t,!1),t+2};fe.prototype.writeInt32LE=function(e,t,i){return e=+e,t|=0,i||ii(this,e,t,4,2147483647,-2147483648),fe.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):Ma(this,e,t,!0),t+4};fe.prototype.writeInt32BE=function(e,t,i){return e=+e,t|=0,i||ii(this,e,t,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),fe.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255):Ma(this,e,t,!1),t+4};function Pa(e,t,i,r){if(i+r>e.length)throw new RangeError("Index out of range");if(0>i)throw new RangeError("Index out of range")}fe.prototype.writeFloatLE=function(e,t,i){return i||Pa(this,e,t,4),xa(this,e,t,!0,23,4),t+4};fe.prototype.writeFloatBE=function(e,t,i){return i||Pa(this,e,t,4),xa(this,e,t,!1,23,4),t+4};fe.prototype.writeDoubleLE=function(e,t,i){return i||Pa(this,e,t,8),xa(this,e,t,!0,52,8),t+8};fe.prototype.writeDoubleBE=function(e,t,i){return i||Pa(this,e,t,8),xa(this,e,t,!1,52,8),t+8};fe.prototype.copy=function(e,t,i,r){if(i||(i=0),r||r===0||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),0<r&&r<i&&(r=i),r===i||e.length===0||this.length===0)return 0;if(0>t)throw new RangeError("targetStart out of bounds");if(0>i||i>=this.length)throw new RangeError("sourceStart out of bounds");if(0>r)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-i&&(r=e.length-t+i);var n=r-i;if(this===e&&i<t&&t<r)for(r=n-1;0<=r;--r)e[r+t]=this[r+i];else if(1e3>n||!fe.TYPED_ARRAY_SUPPORT)for(r=0;r<n;++r)e[r+t]=this[r+i];else Uint8Array.prototype.set.call(e,this.subarray(i,i+n),t);return n};fe.prototype.fill=function(e,t,i,r){if(typeof e=="string"){if(typeof t=="string"?(r=t,t=0,i=this.length):typeof i=="string"&&(r=i,i=this.length),e.length===1){var n=e.charCodeAt(0);256>n&&(e=n)}if(r!==void 0&&typeof r!="string")throw new TypeError("encoding must be a string");if(typeof r=="string"&&!fe.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else typeof e=="number"&&(e&=255);if(0>t||this.length<t||this.length<i)throw new RangeError("Out of range index");if(i<=t)return this;if(t>>>=0,i=i===void 0?this.length:i>>>0,e||(e=0),typeof e=="number")for(r=t;r<i;++r)this[r]=e;else for(e=ar(e)?e:ca(new fe(e,r).toString()),n=e.length,r=0;r<i-t;++r)this[r+t]=e[r%n];return this};var ZS=/[^+\/0-9A-Za-z-_]/g;function ca(e,t){t=t||1/0;for(var i,r=e.length,n=null,o=[],s=0;s<r;++s){if(i=e.charCodeAt(s),55295<i&&57344>i){if(!n){if(56319<i){-1<(t-=3)&&o.push(239,191,189);continue}else if(s+1===r){-1<(t-=3)&&o.push(239,191,189);continue}n=i;continue}if(56320>i){-1<(t-=3)&&o.push(239,191,189),n=i;continue}i=(n-55296<<10|i-56320)+65536}else n&&-1<(t-=3)&&o.push(239,191,189);if(n=null,128>i){if(0>--t)break;o.push(i)}else if(2048>i){if(0>(t-=2))break;o.push(i>>6|192,i&63|128)}else if(65536>i){if(0>(t-=3))break;o.push(i>>12|224,i>>6&63|128,i&63|128)}else if(1114112>i){if(0>(t-=4))break;o.push(i>>18|240,i>>12&63|128,i>>6&63|128,i&63|128)}else throw Error("Invalid code point")}return o}function im(e){for(var t=[],i=0;i<e.length;++i)t.push(e.charCodeAt(i)&255);return t}function Mv(e){if(e=(e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")).replace(ZS,""),2>e.length)e="";else for(;e.length%4!==0;)e+="=";jd||Tv();var t=e.length;if(0<t%4)throw Error("Invalid string. Length must be a multiple of 4");var i=e[t-2]==="="?2:e[t-1]==="="?1:0,r=new pS(3*t/4-i),n=0<i?t-4:t,o=0;for(t=0;t<n;t+=4){var s=Ci[e.charCodeAt(t)]<<18|Ci[e.charCodeAt(t+1)]<<12|Ci[e.charCodeAt(t+2)]<<6|Ci[e.charCodeAt(t+3)];r[o++]=s>>16&255,r[o++]=s>>8&255,r[o++]=s&255}return i===2?(s=Ci[e.charCodeAt(t)]<<2|Ci[e.charCodeAt(t+1)]>>4,r[o++]=s&255):i===1&&(s=Ci[e.charCodeAt(t)]<<10|Ci[e.charCodeAt(t+1)]<<4|Ci[e.charCodeAt(t+2)]>>2,r[o++]=s>>8&255,r[o++]=s&255),r}function Hs(e,t,i,r){for(var n=0;n<r&&!(n+i>=t.length||n>=e.length);++n)t[n+i]=e[n];return n}function Pv(e){return e!=null&&(!!e._isBuffer||rm(e)||typeof e.readFloatLE=="function"&&typeof e.slice=="function"&&rm(e.slice(0,0)))}function rm(e){return!!e.constructor&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}var fc=Object.freeze({__proto__:null,INSPECT_MAX_BYTES:50,kMaxLength:vS,Buffer:fe,SlowBuffer:function(e){return+e!=e&&(e=0),fe.alloc(+e)},isBuffer:Pv}),et=fe,pc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof sr<"u"?sr:typeof self<"u"?self:{};function zd(e,t){return t={exports:{}},e(t,t.exports),t.exports}function Nv(){throw Error("setTimeout has not been defined")}function Jv(){throw Error("clearTimeout has not been defined")}var Qr=Nv,qr=Jv;typeof Vl.setTimeout=="function"&&(Qr=setTimeout);typeof Vl.clearTimeout=="function"&&(qr=clearTimeout);function Fv(e){if(Qr===setTimeout)return setTimeout(e,0);if((Qr===Nv||!Qr)&&setTimeout)return Qr=setTimeout,setTimeout(e,0);try{return Qr(e,0)}catch{try{return Qr.call(null,e,0)}catch{return Qr.call(this,e,0)}}}function SS(e){if(qr===clearTimeout)return clearTimeout(e);if((qr===Jv||!qr)&&clearTimeout)return qr=clearTimeout,clearTimeout(e);try{return qr(e)}catch{try{return qr.call(null,e)}catch{return qr.call(this,e)}}}var Tr=[],ps=!1,eo,Vc=-1;function bS(){ps&&eo&&(ps=!1,eo.length?Tr=eo.concat(Tr):Vc=-1,Tr.length&&Ov())}function Ov(){if(!ps){var e=Fv(bS);ps=!0;for(var t=Tr.length;t;){for(eo=Tr,Tr=[];++Vc<t;)eo&&eo[Vc].run();Vc=-1,t=Tr.length}eo=null,ps=!1,SS(e)}}function Bv(e){var t=Array(arguments.length-1);if(1<arguments.length)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];Tr.push(new Uv(e,t)),Tr.length!==1||ps||Fv(Ov)}function Uv(e,t){this.fun=e,this.array=t}Uv.prototype.run=function(){this.fun.apply(null,this.array)};function Fn(){}var Jo=Vl.performance||{},GS=Jo.now||Jo.mozNow||Jo.msNow||Jo.oNow||Jo.webkitNow||function(){return new Date().getTime()},CS=new Date,YS={nextTick:Bv,title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:Fn,addListener:Fn,once:Fn,off:Fn,removeListener:Fn,removeAllListeners:Fn,emit:Fn,binding:function(){throw Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(){throw Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(e){var t=.001*GS.call(Jo),i=Math.floor(t);return t=Math.floor(t%1*1e9),e&&(i-=e[0],t-=e[1],0>t&&(i--,t+=1e9)),[i,t]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-CS)/1e3}},nm=zd(function(e,t){function i(o,s){for(var u in o)s[u]=o[u]}function r(o,s,u){return n(o,s,u)}var n=fc.Buffer;n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?e.exports=fc:(i(fc,t),t.Buffer=r),r.prototype=Object.create(n.prototype),i(n,r),r.from=function(o,s,u){if(typeof o=="number")throw new TypeError("Argument must not be a number");return n(o,s,u)},r.alloc=function(o,s,u){if(typeof o!="number")throw new TypeError("Argument must be a number");return o=n(o),s!==void 0?typeof u=="string"?o.fill(s,u):o.fill(s):o.fill(0),o},r.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n(o)},r.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return fc.SlowBuffer(o)}}),RS=zd(function(e,t){function i(){throw Error(`secure random number generation not supported by this browser
use chrome, FireFox or Internet Explorer 11`)}function r(d,c){if(typeof d!="number"||d!==d)throw new TypeError("offset must be a number");if(d>p||0>d)throw new TypeError("offset must be a uint32");if(d>a||d>c)throw new RangeError("offset out of range")}function n(d,c,y){if(typeof d!="number"||d!==d)throw new TypeError("size must be a number");if(d>p||0>d)throw new TypeError("size must be a uint32");if(d+c>y||d>a)throw new RangeError("buffer too small")}function o(d,c,y,_){if(!(l.isBuffer(d)||d instanceof pc.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if(typeof c=="function")_=c,c=0,y=d.length;else if(typeof y=="function")_=y,y=d.length-c;else if(typeof _!="function")throw new TypeError('"cb" argument must be a function');return r(c,d.length),n(y,c,d.length),s(d,c,y,_)}function s(d,c,y,_){if(c=new Uint8Array(d.buffer,c,y),h.getRandomValues(c),_)Bv(function(){_(null,d)});else return d}function u(d,c,y){if(typeof c>"u"&&(c=0),!(l.isBuffer(d)||d instanceof pc.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');return r(c,d.length),y===void 0&&(y=d.length-c),n(y,c,d.length),s(d,c,y)}var l=nm.Buffer,a=nm.kMaxLength,h=pc.crypto||pc.msCrypto,p=Math.pow(2,32)-1;h&&h.getRandomValues?(t.randomFill=o,t.randomFillSync=u):(t.randomFill=i,t.randomFillSync=i)}),WS=zd(function(e){e.exports=RS}).randomFillSync,IS=Math.floor(.001*(Date.now()-performance.now()));function Qi(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function om(e,t){for(var i="",r=0,n=-1,o=0,s,u=0;u<=e.length;++u){if(u<e.length)s=e.charCodeAt(u);else{if(s===47)break;s=47}if(s===47){if(n!==u-1&&o!==1)if(n!==u-1&&o===2){if(2>i.length||r!==2||i.charCodeAt(i.length-1)!==46||i.charCodeAt(i.length-2)!==46){if(2<i.length){if(n=i.lastIndexOf("/"),n!==i.length-1){n===-1?(i="",r=0):(i=i.slice(0,n),r=i.length-1-i.lastIndexOf("/")),n=u,o=0;continue}}else if(i.length===2||i.length===1){i="",r=0,n=u,o=0;continue}}t&&(i=0<i.length?i+"/..":"..",r=2)}else i=0<i.length?i+("/"+e.slice(n+1,u)):e.slice(n+1,u),r=u-n-1;n=u,o=0}else s===46&&o!==-1?++o:o=-1}return i}var dl={resolve:function(){for(var e="",t=!1,i,r=arguments.length-1;-1<=r&&!t;r--){if(0<=r)var n=arguments[r];else i===void 0&&(i=YS.cwd()),n=i;Qi(n),n.length!==0&&(e=n+"/"+e,t=n.charCodeAt(0)===47)}return e=om(e,!t),t?0<e.length?"/"+e:"/":0<e.length?e:"."},normalize:function(e){if(Qi(e),e.length===0)return".";var t=e.charCodeAt(0)===47,i=e.charCodeAt(e.length-1)===47;return e=om(e,!t),e.length!==0||t||(e="."),0<e.length&&i&&(e+="/"),t?"/"+e:e},isAbsolute:function(e){return Qi(e),0<e.length&&e.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var e,t=0;t<arguments.length;++t){var i=arguments[t];Qi(i),0<i.length&&(e=e===void 0?i:e+("/"+i))}return e===void 0?".":dl.normalize(e)},relative:function(e,t){if(Qi(e),Qi(t),e===t||(e=dl.resolve(e),t=dl.resolve(t),e===t))return"";for(var i=1;i<e.length&&e.charCodeAt(i)===47;++i);for(var r=e.length,n=r-i,o=1;o<t.length&&t.charCodeAt(o)===47;++o);for(var s=t.length-o,u=n<s?n:s,l=-1,a=0;a<=u;++a){if(a===u){if(s>u){if(t.charCodeAt(o+a)===47)return t.slice(o+a+1);if(a===0)return t.slice(o+a)}else n>u&&(e.charCodeAt(i+a)===47?l=a:a===0&&(l=0));break}var h=e.charCodeAt(i+a),p=t.charCodeAt(o+a);if(h!==p)break;h===47&&(l=a)}for(n="",a=i+l+1;a<=r;++a)(a===r||e.charCodeAt(a)===47)&&(n=n.length===0?n+"..":n+"/..");return 0<n.length?n+t.slice(o+l):(o+=l,t.charCodeAt(o)===47&&++o,t.slice(o))},_makeLong:function(e){return e},dirname:function(e){if(Qi(e),e.length===0)return".";for(var t=e.charCodeAt(0),i=t===47,r=-1,n=!0,o=e.length-1;1<=o;--o)if(t=e.charCodeAt(o),t===47){if(!n){r=o;break}}else n=!1;return r===-1?i?"/":".":i&&r===1?"//":e.slice(0,r)},basename:function(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');Qi(e);var i=0,r=-1,n=!0,o;if(t!==void 0&&0<t.length&&t.length<=e.length){if(t.length===e.length&&t===e)return"";var s=t.length-1,u=-1;for(o=e.length-1;0<=o;--o){var l=e.charCodeAt(o);if(l===47){if(!n){i=o+1;break}}else u===-1&&(n=!1,u=o+1),0<=s&&(l===t.charCodeAt(s)?--s===-1&&(r=o):(s=-1,r=u))}return i===r?r=u:r===-1&&(r=e.length),e.slice(i,r)}for(o=e.length-1;0<=o;--o)if(e.charCodeAt(o)===47){if(!n){i=o+1;break}}else r===-1&&(n=!1,r=o+1);return r===-1?"":e.slice(i,r)},extname:function(e){Qi(e);for(var t=-1,i=0,r=-1,n=!0,o=0,s=e.length-1;0<=s;--s){var u=e.charCodeAt(s);if(u===47){if(!n){i=s+1;break}}else r===-1&&(n=!1,r=s+1),u===46?t===-1?t=s:o!==1&&(o=1):t!==-1&&(o=-1)}return t===-1||r===-1||o===0||o===1&&t===r-1&&t===i+1?"":e.slice(t,r)},format:function(e){if(e===null||typeof e!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);var t=e.dir||e.root,i=e.base||(e.name||"")+(e.ext||"");return e=t?t===e.root?t+i:t+"/"+i:i},parse:function(e){Qi(e);var t={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return t;var i=e.charCodeAt(0),r=i===47;if(r){t.root="/";var n=1}else n=0;for(var o=-1,s=0,u=-1,l=!0,a=e.length-1,h=0;a>=n;--a)if(i=e.charCodeAt(a),i===47){if(!l){s=a+1;break}}else u===-1&&(l=!1,u=a+1),i===46?o===-1?o=a:h!==1&&(h=1):o!==-1&&(h=-1);return o===-1||u===-1||h===0||h===1&&o===u-1&&o===s+1?u!==-1&&(t.base=s===0&&r?t.name=e.slice(1,u):t.name=e.slice(s,u)):(s===0&&r?(t.name=e.slice(1,o),t.base=e.slice(1,u)):(t.name=e.slice(s,o),t.base=e.slice(s,u)),t.ext=e.slice(o,u)),0<s?t.dir=e.slice(0,s-1):r&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null},sm=dl.posix=dl,LS=Object.freeze({__proto__:null,default:sm,__moduleExports:sm}),lm={hrtime:function(e){return function(t){return t=e(t),1e9*t[0]+t[1]}}(function(e){var t=.001*performance.now(),i=Math.floor(t)+IS;return t=Math.floor(t%1*1e9),e&&(i-=e[0],t-=e[1],0>t&&(i--,t+=1e9)),[i,t]}),exit:function(e){throw new Av(e)},kill:function(e){throw new kS(e)},randomFillSync:WS,isTTY:function(){return!0},path:LS,fs:null},Ne,no=_e(1),yn=_e(2),ts=_e(4),Ws=_e(8),vn=_e(16),Ad=_e(32),_n=_e(64),Is=_e(128),aa=_e(256),Qd=_e(512),qd=_e(1024),$d=_e(2048),ef=_e(4096),ua=_e(8192),ha=_e(16384),tf=_e(32768),rf=_e(65536),nf=_e(131072),of=_e(262144),sf=_e(524288),lf=_e(1048576),Rn=_e(2097152),da=_e(4194304),Na=_e(8388608),cf=_e(16777216),af=_e(33554432),uf=_e(67108864),yo=_e(134217728),jv=_e(268435456),Ko=no|yn|ts|Ws|vn|Ad|_n|Is|aa|Qd|qd|$d|ef|ua|ha|tf|rf|nf|of|sf|lf|Rn|Na|da|cf|uf|af|yo|jv,Hv=no|yn|ts|Ws|vn|Ad|_n|Is|aa|Rn|da|Na|yo,wS=_e(0),hf=Ws|vn|Is|Qd|qd|$d|ef|ua|ha|tf|rf|nf|of|sf|lf|Rn|Na|cf|uf|af|yo,Dv=hf|Hv,cm=yn|Ws|_n|Rn|yo|jv,TS=yn|Ws|_n|Rn|yo,XS=_e(0),VS={E2BIG:1,EACCES:2,EADDRINUSE:3,EADDRNOTAVAIL:4,EAFNOSUPPORT:5,EALREADY:7,EAGAIN:6,EBADF:8,EBADMSG:9,EBUSY:10,ECANCELED:11,ECHILD:12,ECONNABORTED:13,ECONNREFUSED:14,ECONNRESET:15,EDEADLOCK:16,EDESTADDRREQ:17,EDOM:18,EDQUOT:19,EEXIST:20,EFAULT:21,EFBIG:22,EHOSTDOWN:23,EHOSTUNREACH:23,EIDRM:24,EILSEQ:25,EINPROGRESS:26,EINTR:27,EINVAL:28,EIO:29,EISCONN:30,EISDIR:31,ELOOP:32,EMFILE:33,EMLINK:34,EMSGSIZE:35,EMULTIHOP:36,ENAMETOOLONG:37,ENETDOWN:38,ENETRESET:39,ENETUNREACH:40,ENFILE:41,ENOBUFS:42,ENODEV:43,ENOENT:44,ENOEXEC:45,ENOLCK:46,ENOLINK:47,ENOMEM:48,ENOMSG:49,ENOPROTOOPT:50,ENOSPC:51,ENOSYS:52,ENOTCONN:53,ENOTDIR:54,ENOTEMPTY:55,ENOTRECOVERABLE:56,ENOTSOCK:57,ENOTTY:59,ENXIO:60,EOVERFLOW:61,EOWNERDEAD:62,EPERM:63,EPIPE:64,EPROTO:65,EPROTONOSUPPORT:66,EPROTOTYPE:67,ERANGE:68,EROFS:69,ESPIPE:70,ESRCH:71,ESTALE:72,ETIMEDOUT:73,ETXTBSY:74,EXDEV:75},am=(Ne={},Ne[6]="SIGHUP",Ne[8]="SIGINT",Ne[11]="SIGQUIT",Ne[7]="SIGILL",Ne[15]="SIGTRAP",Ne[0]="SIGABRT",Ne[2]="SIGBUS",Ne[5]="SIGFPE",Ne[9]="SIGKILL",Ne[20]="SIGUSR1",Ne[12]="SIGSEGV",Ne[21]="SIGUSR2",Ne[10]="SIGPIPE",Ne[1]="SIGALRM",Ne[14]="SIGTERM",Ne[3]="SIGCHLD",Ne[4]="SIGCONT",Ne[13]="SIGSTOP",Ne[16]="SIGTSTP",Ne[17]="SIGTTIN",Ne[18]="SIGTTOU",Ne[19]="SIGURG",Ne[23]="SIGXCPU",Ne[24]="SIGXFSZ",Ne[22]="SIGVTALRM",Ne),ES=no|yn|vn|Is|Rn|yo,um=no|_n|vn|Is|Rn|yo;function On(e){var t=Math.trunc(e);return e=_e(Math.round(1e6*(e-t))),_e(t)*_e(1e6)+e}function Mo(e){return typeof e=="number"&&(e=Math.trunc(e)),e=_e(e),Number(e/_e(1e6))}function Ve(e){return function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];try{return e.apply(void 0,Tc(t))}catch(r){if(r&&r.code&&typeof r.code=="string")return VS[r.code]||28;if(r instanceof df)return r.errno;throw r}}}function hm(e,t){var i=e.FD_MAP.get(t);if(!i)throw new df(8);if(i.filetype===void 0){var r=e.bindings.fs.fstatSync(i.real);e=zv(e,t,r),t=e.rightsBase,r=e.rightsInheriting,i.filetype=e.filetype,i.rights||(i.rights={base:t,inheriting:r})}return i}function zv(e,t,i){switch(!0){case i.isBlockDevice():return{filetype:1,rightsBase:Ko,rightsInheriting:Ko};case i.isCharacterDevice():return t!==void 0&&e.bindings.isTTY(t)?{filetype:2,rightsBase:TS,rightsInheriting:XS}:{filetype:2,rightsBase:Ko,rightsInheriting:Ko};case i.isDirectory():return{filetype:3,rightsBase:hf,rightsInheriting:Dv};case i.isFIFO():return{filetype:6,rightsBase:cm,rightsInheriting:Ko};case i.isFile():return{filetype:4,rightsBase:Hv,rightsInheriting:wS};case i.isSocket():return{filetype:6,rightsBase:cm,rightsInheriting:Ko};case i.isSymbolicLink():return{filetype:7,rightsBase:_e(0),rightsInheriting:_e(0)};default:return{filetype:0,rightsBase:_e(0),rightsInheriting:_e(0)}}}var df=function(e){function t(i){var r=e.call(this)||this;return r.errno=i,Object.setPrototypeOf(r,t.prototype),r}return Ud(t,e),t}(Error),Av=function(e){function t(i){var r=e.call(this,"WASI Exit error: "+i)||this;return r.code=i,Object.setPrototypeOf(r,t.prototype),r}return Ud(t,e),t}(Error),kS=function(e){function t(i){var r=e.call(this,"WASI Kill signal: "+i)||this;return r.signal=i,Object.setPrototypeOf(r,t.prototype),r}return Ud(t,e),t}(Error),dm=function(){function e(t){function i(G){switch(G){case 1:return h.hrtime();case 0:return On(Date.now());case 2:case 3:return h.hrtime()-b;default:return null}}function r(G,S){if(G=hm(s,G),S!==_e(0)&&(G.rights.base&S)===_e(0))throw new df(63);return G}function n(G,S){return s.refreshMemory(),Array.from({length:S},function(C,R){return R=G+8*R,C=s.view.getUint32(R,!0),R=s.view.getUint32(R+4,!0),new Uint8Array(s.memory.buffer,C,R)})}var o,s=this,u={};t&&t.preopens?u=t.preopens:t&&t.preopenDirectories&&(u=t.preopenDirectories);var l={};t&&t.env&&(l=t.env);var a=[];t&&t.args&&(a=t.args);var h=lm;t&&t.bindings&&(h=t.bindings),this.view=this.memory=void 0,this.bindings=h,this.FD_MAP=new Map([[0,{real:0,filetype:2,rights:{base:ES,inheriting:_e(0)},path:void 0}],[1,{real:1,filetype:2,rights:{base:um,inheriting:_e(0)},path:void 0}],[2,{real:2,filetype:2,rights:{base:um,inheriting:_e(0)},path:void 0}]]);var p=this.bindings.fs,d=this.bindings.path;try{for(var c=dc(Object.entries(u)),y=c.next();!y.done;y=c.next()){var _=wc(y.value,2),g=_[0],m=_[1],f=p.openSync(m,p.constants.O_RDONLY),v=Tc(this.FD_MAP.keys()).reverse()[0]+1;this.FD_MAP.set(v,{real:f,filetype:3,rights:{base:hf,inheriting:Dv},fakePath:g,path:m})}}catch(G){var Z={error:G}}finally{try{y&&!y.done&&(o=c.return)&&o.call(c)}finally{if(Z)throw Z.error}}var b=h.hrtime();this.wasiImport={args_get:function(G,S){s.refreshMemory();var C=G,R=S;return a.forEach(function(Y){s.view.setUint32(C,R,!0),C+=4,R+=et.from(s.memory.buffer).write(Y+"\0",R)}),0},args_sizes_get:function(G,S){return s.refreshMemory(),s.view.setUint32(G,a.length,!0),G=a.reduce(function(C,R){return C+et.byteLength(R)+1},0),s.view.setUint32(S,G,!0),0},environ_get:function(G,S){s.refreshMemory();var C=G,R=S;return Object.entries(l).forEach(function(Y){var I=wc(Y,2);Y=I[0],I=I[1],s.view.setUint32(C,R,!0),C+=4,R+=et.from(s.memory.buffer).write(Y+"="+I+"\0",R)}),0},environ_sizes_get:function(G,S){s.refreshMemory();var C=Object.entries(l).map(function(Y){return Y=wc(Y,2),Y[0]+"="+Y[1]+"\0"}),R=C.reduce(function(Y,I){return Y+et.byteLength(I)},0);return s.view.setUint32(G,C.length,!0),s.view.setUint32(S,R,!0),0},clock_res_get:function(G,S){switch(G){case 1:case 2:case 3:var C=_e(1);break;case 0:C=_e(1e3)}return s.view.setBigUint64(S,C),0},clock_time_get:function(G,S,C){return s.refreshMemory(),G=i(G),G===null?28:(s.view.setBigUint64(C,_e(G),!0),0)},fd_advise:Ve(function(G){return r(G,Is),52}),fd_allocate:Ve(function(G){return r(G,aa),52}),fd_close:Ve(function(G){var S=r(G,_e(0));return p.closeSync(S.real),s.FD_MAP.delete(G),0}),fd_datasync:Ve(function(G){return G=r(G,no),p.fdatasyncSync(G.real),0}),fd_fdstat_get:Ve(function(G,S){return G=r(G,_e(0)),s.refreshMemory(),s.view.setUint8(S,G.filetype),s.view.setUint16(S+2,0,!0),s.view.setUint16(S+4,0,!0),s.view.setBigUint64(S+8,_e(G.rights.base),!0),s.view.setBigUint64(S+8+8,_e(G.rights.inheriting),!0),0}),fd_fdstat_set_flags:Ve(function(G){return r(G,Ws),52}),fd_fdstat_set_rights:Ve(function(G,S,C){return G=r(G,_e(0)),(G.rights.base|S)>G.rights.base||(G.rights.inheriting|C)>G.rights.inheriting?63:(G.rights.base=S,G.rights.inheriting=C,0)}),fd_filestat_get:Ve(function(G,S){G=r(G,Rn);var C=p.fstatSync(G.real);return s.refreshMemory(),s.view.setBigUint64(S,_e(C.dev),!0),S+=8,s.view.setBigUint64(S,_e(C.ino),!0),S+=8,s.view.setUint8(S,G.filetype),S+=8,s.view.setBigUint64(S,_e(C.nlink),!0),S+=8,s.view.setBigUint64(S,_e(C.size),!0),S+=8,s.view.setBigUint64(S,On(C.atimeMs),!0),S+=8,s.view.setBigUint64(S,On(C.mtimeMs),!0),s.view.setBigUint64(S+8,On(C.ctimeMs),!0),0}),fd_filestat_set_size:Ve(function(G,S){return G=r(G,da),p.ftruncateSync(G.real,Number(S)),0}),fd_filestat_set_times:Ve(function(G,S,C,R){G=r(G,Na);var Y=p.fstatSync(G.real),I=Y.atime;Y=Y.mtime;var w=Mo(i(0));return(R&3)===3||(R&12)===12?28:((R&1)===1?I=Mo(S):(R&2)===2&&(I=w),(R&4)===4?Y=Mo(C):(R&8)===8&&(Y=w),p.futimesSync(G.real,new Date(I),new Date(Y)),0)}),fd_prestat_get:Ve(function(G,S){return G=r(G,_e(0)),G.path?(s.refreshMemory(),s.view.setUint8(S,0),s.view.setUint32(S+4,et.byteLength(G.fakePath),!0),0):28}),fd_prestat_dir_name:Ve(function(G,S,C){return G=r(G,_e(0)),G.path?(s.refreshMemory(),et.from(s.memory.buffer).write(G.fakePath,S,C,"utf8"),0):28}),fd_pwrite:Ve(function(G,S,C,R,Y){var I=r(G,_n|ts),w=0;return n(S,C).forEach(function(F){for(var E=0;E<F.byteLength;)E+=p.writeSync(I.real,F,E,F.byteLength-E,Number(R)+w+E);w+=E}),s.view.setUint32(Y,w,!0),0}),fd_write:Ve(function(G,S,C,R){var Y=r(G,_n),I=0;return n(S,C).forEach(function(w){for(var F=0;F<w.byteLength;){var E=p.writeSync(Y.real,w,F,w.byteLength-F,Y.offset?Number(Y.offset):null);Y.offset&&(Y.offset+=_e(E)),F+=E}I+=F}),s.view.setUint32(R,I,!0),0}),fd_pread:Ve(function(G,S,C,R,Y){var I;G=r(G,yn|ts);var w=0;try{var F=dc(n(S,C)),E=F.next();e:for(;!E.done;E=F.next()){var N=E.value;for(S=0;S<N.byteLength;){var L=N.byteLength-S,K=p.readSync(G.real,N,S,N.byteLength-S,Number(R)+w+S);if(S+=K,w+=K,K===0||K<L)break e}w+=S}}catch(P){var J={error:P}}finally{try{E&&!E.done&&(I=F.return)&&I.call(F)}finally{if(J)throw J.error}}return s.view.setUint32(Y,w,!0),0}),fd_read:Ve(function(G,S,C,R){var Y;G=r(G,yn);var I=G.real===0,w=0;try{var F=dc(n(S,C)),E=F.next();e:for(;!E.done;E=F.next()){var N=E.value;for(S=0;S<N.byteLength;){var L=N.byteLength-S,K=p.readSync(G.real,N,S,L,I||G.offset===void 0?null:Number(G.offset));if(I||(G.offset=(G.offset?G.offset:_e(0))+_e(K)),S+=K,w+=K,K===0||K<L)break e}}}catch(P){var J={error:P}}finally{try{E&&!E.done&&(Y=F.return)&&Y.call(F)}finally{if(J)throw J.error}}return s.view.setUint32(R,w,!0),0}),fd_readdir:Ve(function(G,S,C,R,Y){G=r(G,ha),s.refreshMemory();var I=p.readdirSync(G.path,{withFileTypes:!0}),w=S;for(R=Number(R);R<I.length;R+=1){var F=I[R],E=et.byteLength(F.name);if(S-w>C||(s.view.setBigUint64(S,_e(R+1),!0),S+=8,S-w>C))break;var N=p.statSync(d.resolve(G.path,F.name));if(s.view.setBigUint64(S,_e(N.ino),!0),S+=8,S-w>C||(s.view.setUint32(S,E,!0),S+=4,S-w>C))break;switch(!0){case N.isBlockDevice():N=1;break;case N.isCharacterDevice():N=2;break;case N.isDirectory():N=3;break;case N.isFIFO():N=6;break;case N.isFile():N=4;break;case N.isSocket():N=6;break;case N.isSymbolicLink():N=7;break;default:N=0}if(s.view.setUint8(S,N),S+=1,S+=3,S+E>=w+C)break;et.from(s.memory.buffer).write(F.name,S),S+=E}return s.view.setUint32(Y,Math.min(S-w,C),!0),0}),fd_renumber:Ve(function(G,S){return r(G,_e(0)),r(S,_e(0)),p.closeSync(s.FD_MAP.get(G).real),s.FD_MAP.set(G,s.FD_MAP.get(S)),s.FD_MAP.delete(S),0}),fd_seek:Ve(function(G,S,C,R){switch(G=r(G,ts),s.refreshMemory(),C){case 1:G.offset=(G.offset?G.offset:_e(0))+_e(S);break;case 2:C=p.fstatSync(G.real).size,G.offset=_e(C)+_e(S);break;case 0:G.offset=_e(S)}return s.view.setBigUint64(R,G.offset,!0),0}),fd_tell:Ve(function(G,S){return G=r(G,Ad),s.refreshMemory(),G.offset||(G.offset=_e(0)),s.view.setBigUint64(S,G.offset,!0),0}),fd_sync:Ve(function(G){return G=r(G,vn),p.fsyncSync(G.real),0}),path_create_directory:Ve(function(G,S,C){return G=r(G,Qd),G.path?(s.refreshMemory(),S=et.from(s.memory.buffer,S,C).toString(),p.mkdirSync(d.resolve(G.path,S)),0):28}),path_filestat_get:Ve(function(G,S,C,R,Y){return G=r(G,of),G.path?(s.refreshMemory(),C=et.from(s.memory.buffer,C,R).toString(),C=p.statSync(d.resolve(G.path,C)),s.view.setBigUint64(Y,_e(C.dev),!0),Y+=8,s.view.setBigUint64(Y,_e(C.ino),!0),Y+=8,s.view.setUint8(Y,zv(s,void 0,C).filetype),Y+=8,s.view.setBigUint64(Y,_e(C.nlink),!0),Y+=8,s.view.setBigUint64(Y,_e(C.size),!0),Y+=8,s.view.setBigUint64(Y,On(C.atimeMs),!0),Y+=8,s.view.setBigUint64(Y,On(C.mtimeMs),!0),s.view.setBigUint64(Y+8,On(C.ctimeMs),!0),0):28}),path_filestat_set_times:Ve(function(G,S,C,R,Y,I,w){if(G=r(G,lf),!G.path)return 28;s.refreshMemory();var F=p.fstatSync(G.real);S=F.atime,F=F.mtime;var E=Mo(i(0));return(w&3)===3||(w&12)===12?28:((w&1)===1?S=Mo(Y):(w&2)===2&&(S=E),(w&4)===4?F=Mo(I):(w&8)===8&&(F=E),C=et.from(s.memory.buffer,C,R).toString(),p.utimesSync(d.resolve(G.path,C),new Date(S),new Date(F)),0)}),path_link:Ve(function(G,S,C,R,Y,I,w){return G=r(G,$d),Y=r(Y,ef),!G.path||!Y.path?28:(s.refreshMemory(),C=et.from(s.memory.buffer,C,R).toString(),I=et.from(s.memory.buffer,I,w).toString(),p.linkSync(d.resolve(G.path,C),d.resolve(Y.path,I)),0)}),path_open:Ve(function(G,S,C,R,Y,I,w,F,E){S=r(G,ua),I=_e(I),w=_e(w),G=(I&(yn|ha))!==_e(0);var N=(I&(no|_n|aa|da))!==_e(0);if(N&&G)var L=p.constants.O_RDWR;else G?L=p.constants.O_RDONLY:N&&(L=p.constants.O_WRONLY);if(G=I|ua,I|=w,Y&1&&(L|=p.constants.O_CREAT,G|=qd),Y&2&&(L|=p.constants.O_DIRECTORY),Y&4&&(L|=p.constants.O_EXCL),Y&8&&(L|=p.constants.O_TRUNC,G|=sf),F&1&&(L|=p.constants.O_APPEND),F&2&&(L=p.constants.O_DSYNC?L|p.constants.O_DSYNC:L|p.constants.O_SYNC,I|=no),F&4&&(L|=p.constants.O_NONBLOCK),F&8&&(L=p.constants.O_RSYNC?L|p.constants.O_RSYNC:L|p.constants.O_SYNC,I|=vn),F&16&&(L|=p.constants.O_SYNC,I|=vn),N&&!(L&(p.constants.O_APPEND|p.constants.O_TRUNC))&&(I|=ts),s.refreshMemory(),C=et.from(s.memory.buffer,C,R).toString(),C=d.resolve(S.path,C),d.relative(S.path,C).startsWith(".."))return 76;try{var K=p.realpathSync(C);if(d.relative(S.path,K).startsWith(".."))return 76}catch(P){if(P.code==="ENOENT")K=C;else throw P}try{var J=p.statSync(K).isDirectory()}catch{}return L=!N&&J?p.openSync(K,p.constants.O_RDONLY):p.openSync(K,L),J=Tc(s.FD_MAP.keys()).reverse()[0]+1,s.FD_MAP.set(J,{real:L,filetype:void 0,rights:{base:G,inheriting:I},path:K}),hm(s,J),s.view.setUint32(E,J,!0),0}),path_readlink:Ve(function(G,S,C,R,Y,I){return G=r(G,tf),G.path?(s.refreshMemory(),S=et.from(s.memory.buffer,S,C).toString(),S=d.resolve(G.path,S),S=p.readlinkSync(S),R=et.from(s.memory.buffer).write(S,R,Y),s.view.setUint32(I,R,!0),0):28}),path_remove_directory:Ve(function(G,S,C){return G=r(G,af),G.path?(s.refreshMemory(),S=et.from(s.memory.buffer,S,C).toString(),p.rmdirSync(d.resolve(G.path,S)),0):28}),path_rename:Ve(function(G,S,C,R,Y,I){return G=r(G,rf),R=r(R,nf),!G.path||!R.path?28:(s.refreshMemory(),S=et.from(s.memory.buffer,S,C).toString(),Y=et.from(s.memory.buffer,Y,I).toString(),p.renameSync(d.resolve(G.path,S),d.resolve(R.path,Y)),0)}),path_symlink:Ve(function(G,S,C,R,Y){return C=r(C,cf),C.path?(s.refreshMemory(),G=et.from(s.memory.buffer,G,S).toString(),R=et.from(s.memory.buffer,R,Y).toString(),p.symlinkSync(G,d.resolve(C.path,R)),0):28}),path_unlink_file:Ve(function(G,S,C){return G=r(G,uf),G.path?(s.refreshMemory(),S=et.from(s.memory.buffer,S,C).toString(),p.unlinkSync(d.resolve(G.path,S)),0):28}),poll_oneoff:function(G,S,C,R){var Y=0,I=0;s.refreshMemory();for(var w=0;w<C;w+=1){var F=s.view.getBigUint64(G,!0);G+=8;var E=s.view.getUint8(G);switch(G+=1,E){case 0:G+=7,s.view.getBigUint64(G,!0),G+=8;var N=s.view.getUint32(G,!0);G+=4,G+=4,E=s.view.getBigUint64(G,!0),G+=8,s.view.getBigUint64(G,!0),G+=8;var L=s.view.getUint16(G,!0);G+=2,G+=6;var K=L===1;L=0,N=_e(i(N)),N===null?L=28:(E=K?E:N+E,I=E>I?E:I),s.view.setBigUint64(S,F,!0),S+=8,s.view.setUint16(S,L,!0),S+=2,s.view.setUint8(S,0),S+=1,S+=5,Y+=1;break;case 1:case 2:G+=3,s.view.getUint32(G,!0),G+=4,s.view.setBigUint64(S,F,!0),S+=8,s.view.setUint16(S,52,!0),S+=2,s.view.setUint8(S,E),S+=1,S+=5,Y+=1;break;default:return 28}}for(s.view.setUint32(R,Y,!0);h.hrtime()<I;);return 0},proc_exit:function(G){return h.exit(G),0},proc_raise:function(G){return G in am?(h.kill(am[G]),0):28},random_get:function(G,S){return s.refreshMemory(),h.randomFillSync(new Uint8Array(s.memory.buffer),G,S),0},sched_yield:function(){return 0},sock_recv:function(){return 52},sock_send:function(){return 52},sock_shutdown:function(){return 52}},t.traceSyscalls&&Object.keys(this.wasiImport).forEach(function(G){var S=s.wasiImport[G];s.wasiImport[G]=function(){for(var C=[],R=0;R<arguments.length;R++)C[R]=arguments[R];console.log("WASI: wasiImport called: "+G+" ("+C+")");try{var Y=S.apply(void 0,Tc(C));return console.log("WASI:  => "+Y),Y}catch(I){throw console.log("Catched error: "+I),I}}})}return e.prototype.refreshMemory=function(){this.view&&this.view.buffer.byteLength!==0||(this.view=new Xc(this.memory.buffer))},e.prototype.setMemory=function(t){this.memory=t},e.prototype.start=function(t){if(t=t.exports,t===null||typeof t!="object")throw Error("instance.exports must be an Object. Received "+t+".");var i=t.memory;if(!(i instanceof WebAssembly.Memory))throw Error("instance.exports.memory must be a WebAssembly.Memory. Recceived "+i+".");this.setMemory(i),t._start&&t._start()},e.prototype.getImportNamespace=function(t){var i,r=null;try{for(var n=dc(WebAssembly.Module.imports(t)),o=n.next();!o.done;o=n.next()){var s=o.value;if(s.kind==="function"&&s.module.startsWith("wasi_")){if(!r)r=s.module;else if(r!==s.module)throw Error("Multiple namespaces detected.")}}}catch(l){var u={error:l}}finally{try{o&&!o.done&&(i=n.return)&&i.call(n)}finally{if(u)throw u.error}}return r},e.prototype.getImports=function(t){switch(this.getImportNamespace(t)){case"wasi_unstable":return{wasi_unstable:this.wasiImport};case"wasi_snapshot_preview1":return{wasi_snapshot_preview1:this.wasiImport};default:throw Error("Can't detect a WASI namespace for the WebAssembly Module")}},e.defaultBindings=lm,e}(),Qv=function(){function e(t){this.options=t}return e.prototype.run=function(){return Ht(this,void 0,void 0,function(){return Dt(this,function(){throw Error("run not implemented by the Command subclass")})})},e}(),xS=function(e){function t(i){var r=e.call(this,i)||this;if(!i.module)throw Error("Did not find a WebAssembly.Module for the WASI Command");return r}return bv(t,e),t.prototype.run=function(i){return Ht(this,void 0,void 0,function(){var r,n,o,s;return Dt(this,function(u){switch(u.label){case 0:return r={preopens:sn({".":".","/":"/"},this.options.preopens||{}),env:this.options.env,args:this.options.args,bindings:sn(sn({},dm.defaultBindings),{fs:i.fs})},n=new dm(r),o=this.options.module,[4,WebAssembly.instantiate(o,sn({},n.getImports(o)))];case 1:return s=u.sent(),n.start(s),[2]}})})},t}(Qv),KS=function(e){function t(i){var r=e.call(this,i)||this;if(!i.callback)throw Error("The Command Options provided are not for a Callback Command");return r.callback=i.callback,r}return bv(t,e),t.prototype.run=function(i){return Ht(this,void 0,void 0,function(){var r;return Dt(this,function(n){switch(n.label){case 0:return[4,Promise.resolve(this.callback(this.options,i))];case 1:return r=n.sent(),typeof r=="string"&&i.fs.writeFileSync("/dev/stdout",new TextEncoder().encode(r+`
`)),[2]}})})},t}(Qv),MS=function(){function e(t,i,r,n,o,s,u,l,a){var h=this;this.stdinPrompt="",this.commandOptions=t,this.wasmFs=new Sv,this.wasmFs.fromJSON(i),this.originalWasmFsJson=i,this.ioDevices=new dS(this.wasmFs),this.ioDeviceWindow=s,this.ioDevices.setWindowSizeCallback(function(){var p=h.ioDevices.getWindowSize();h.ioDeviceWindow.resize(p[0],p[1])}),this.ioDevices.setBufferIndexDisplayCallback(function(){var p=h.ioDevices.getFrameBuffer();h.ioDeviceWindow.drawRgbaArrayToFrameBuffer(p)}),this.ioDevices.setInputCallback(function(){if(h.sharedIoDeviceInput){h.ioDeviceWindow.getInputBuffer(),Atomics.wait(h.sharedIoDeviceInput,0,-1);var p=h.sharedIoDeviceInput[0];if(h.sharedIoDeviceInput[0]=-1,0<p){for(var d=new Uint8Array(p),c=0;c<p;c++)d[c]=h.sharedIoDeviceInput[c+1];return d}return new Uint8Array}return h.ioDeviceWindow.getInputBuffer()}),this.dataCallback=r,this.endCallback=n,this.errorCallback=o,i=void 0,u&&(i=new Int32Array(u)),this.sharedIoDeviceInput=i,u=void 0,l&&(u=new Int32Array(l)),this.command=t.module?new xS(t):new KS(t),this.wasmFs.volume.fds[0].node.read=this.stdinRead.bind(this),this.wasmFs.volume.fds[1].node.write=this.stdoutWrite.bind(this),this.wasmFs.volume.fds[2].node.write=this.stdoutWrite.bind(this),t=this.wasmFs.volume.openSync("/dev/tty","w+"),this.wasmFs.volume.fds[t].node.read=this.stdinRead.bind(this),this.wasmFs.volume.fds[t].node.write=this.stdoutWrite.bind(this),this.sharedStdin=u,this.startStdinReadCallback=a,this.readStdinCounter=0,this.pipedStdin=""}return e.prototype.start=function(t){return Ht(this,void 0,void 0,function(){var i,r,n,o=this;return Dt(this,function(s){switch(s.label){case 0:i=function(){o.ioDeviceWindow.resize(0,0),setTimeout(function(){o.endCallback(o.wasmFs.toJSON())},50)},s.label=1;case 1:return s.trys.push([1,3,,4]),t&&(this.pipedStdin=new TextDecoder("utf-8").decode(t)),[4,this.command.run(this.wasmFs)];case 2:return s.sent(),i(),[3,4];case 3:if(r=s.sent(),r instanceof Av)return i(),[2];if(n="Unknown Error",r.code!==void 0)n="exited with code: "+r.code;else if(r.signal!==void 0)n="killed with signal: "+r.signal;else if(r.user!==void 0)return i(),[2];return console.error(r),this.errorCallback(n,this.wasmFs.toJSON(),r.user!==void 0),[3,4];case 4:return[2]}})})},e.prototype.stdoutWrite=function(t){this.dataCallback&&this.dataCallback(t);var i=new TextDecoder("utf-8").decode(t).split(`
`);return this.stdinPrompt=0<i.length?i[i.length-1].replace(/[\u001B\u009B][[\]()#;?]*(?:(?:(?:[a-zA-Z\d]*(?:;[-a-zA-Z\d\/#&.:=?%@~_]*)*)?\u0007)|(?:(?:\d{1,4}(?:;\d{0,4})*)?[\dA-PR-TZcf-ntqry=><~]))/g,""):"",t.length},e.prototype.stdinRead=function(t){if(this.readStdinCounter%2!==0)return this.readStdinCounter++,0;if(this.pipedStdin){var i=this.pipedStdin;this.pipedStdin="",this.readStdinCounter++}else if(this.sharedStdin&&this.startStdinReadCallback){this.startStdinReadCallback(),Atomics.wait(this.sharedStdin,0,-1),i=this.sharedStdin[0],this.sharedStdin[0]=-1;for(var r=new Uint8Array(i),n=0;n<i;n++)r[n]=this.sharedStdin[1+n];i=new TextDecoder("utf-8").decode(r)}else{if(i=prompt(`Please enter text for stdin:
`+this.stdinPrompt),i===null)throw this.dataCallback&&this.dataCallback(new TextEncoder().encode(`
`)),t=Error("Process killed by user"),t.user=!0,t;i+=`
`,this.dataCallback&&this.dataCallback(new TextEncoder().encode(i))}if(!i)return 0;for(i=new TextEncoder().encode(i),r=0;r<i.length;++r)t[r]=i[r];return i.length},e}(),fm=function(){function e(t){this.oldPopupKeyCodes=[],this.popupKeyCodes=[],this.oldMouseMovePosition={x:0,y:0},this.mouseMovePosition={x:0,y:0},this.mouseMiddleClickPosition=this.mouseRightClickPosition=this.mouseLeftClickPosition=void 0,t&&(this.sharedIoDeviceInput=new Int32Array(t))}return e.prototype.resize=function(t,i){t===0&&i===0?this.close():this.popupWindow&&this.popupCanvas&&this.popupCanvasContext?(this.popupCanvas.width=t,this.popupCanvas.height=i,this.popupImageData=this.popupCanvasContext.getImageData(0,0,t,i)):this._open(t,i)},e.prototype.close=function(){this.popupWindow&&(this.popupWindow.close(),this.popupWindow=void 0)},e.prototype.drawRgbaArrayToFrameBuffer=function(t){this.popupCanvas&&this.popupCanvasContext&&this.popupImageData&&(this.popupImageData.data.set(t),this.popupCanvasContext.putImageData(this.popupImageData,0,0))},e.prototype.getInputBuffer=function(){var t=this,i=[];this.popupKeyCodes.forEach(function(o){t.oldPopupKeyCodes.includes(o)||(i.push(1),i.push(o))}),(this.oldMouseMovePosition.x!==this.mouseMovePosition.x||this.oldMouseMovePosition.y!==this.mouseMovePosition.y)&&(i.push(2),this._append32BitIntToByteArray(this.mouseMovePosition.x,i),this._append32BitIntToByteArray(this.mouseMovePosition.y,i)),this.oldMouseMovePosition=this.mouseMovePosition,this.oldPopupKeyCodes.forEach(function(o){t.popupKeyCodes.includes(o)||(i.push(3),i.push(o))}),this.oldPopupKeyCodes=this.popupKeyCodes.slice(0),this.mouseLeftClickPosition&&(i.push(4),this._append32BitIntToByteArray(this.mouseLeftClickPosition.x,i),this._append32BitIntToByteArray(this.mouseLeftClickPosition.y,i),this.mouseLeftClickPosition=void 0),this.mouseRightClickPosition&&(i.push(5),this._append32BitIntToByteArray(this.mouseRightClickPosition.x,i),this._append32BitIntToByteArray(this.mouseRightClickPosition.y,i),this.mouseRightClickPosition=void 0),this.mouseMiddleClickPosition&&(i.push(4),this._append32BitIntToByteArray(this.mouseMiddleClickPosition.x,i),this._append32BitIntToByteArray(this.mouseMiddleClickPosition.y,i),this.mouseMiddleClickPosition=void 0);var r=new Uint8Array(i);if(this.sharedIoDeviceInput){for(var n=0;n<r.length;n++)this.sharedIoDeviceInput[n+1]=r[n];this.sharedIoDeviceInput[0]=r.length,Atomics.notify(this.sharedIoDeviceInput,0,1)}return r},e.prototype._open=function(t,i){var r=Math.min(Math.floor(screen.width/t),Math.floor(screen.height/i));this.popupWindow=window.open("about:blank","WasmerExperimentalFramebuffer","width="+t*r+",height="+i*r),this.popupWindow.document.body.innerHTML=`
      <style>
        html, body {
          width: 100%;
          height: 100%;
        }

        body {
          display: flex;
          flex-direction: column;
          justify-content: center;
          align-items: center;

          margin: 0px;
          margin-left: auto;
          margin-right: auto;
        }

        #io-device-framebuffer {

          width: 100%;
          height: auto;

          /* Will Keep pixel art looking good */
          image-rendering: pixelated;
          image-rendering: -moz-crisp-edges;
          image-rendering: crisp-edges;
        }
      </style>
      <canvas id="io-device-framebuffer" width="`+t+'" height="'+i+`"></canvas>
    `,this.popupWindow.document.head.innerHTML=`
      <title>Wasmer Experimental Framebuffer</title>
    `,this.popupCanvas=this.popupWindow.document.querySelector("#io-device-framebuffer"),this.popupCanvasContext=this.popupCanvas.getContext("2d"),this.popupImageData=this.popupCanvasContext.getImageData(0,0,t,i),this.popupWindow.document.addEventListener("keydown",this._eventListenerKeydown.bind(this)),this.popupWindow.document.addEventListener("keyup",this._eventListenerKeyup.bind(this)),this.popupWindow.document.addEventListener("mousemove",this._eventListenerMousemove.bind(this)),this.popupWindow.document.addEventListener("click",this._eventListenerClick.bind(this))},e.prototype._append32BitIntToByteArray=function(t,i){for(var r=0;4>r;r++){var n=t;n&=255<<8*r,n>>=8*r,i.push(n)}},e.prototype._eventListenerKeydown=function(t){t.preventDefault(),this.popupKeyCodes.includes(t.keyCode)||this.popupKeyCodes.push(t.keyCode)},e.prototype._eventListenerKeyup=function(t){t.preventDefault(),t=this.popupKeyCodes.indexOf(t.keyCode),-1<t&&this.popupKeyCodes.splice(t,1)},e.prototype._eventListenerMousemove=function(t){t=this._getPositionFromMouseEvent(t),t!==void 0&&(this.mouseMovePosition=t)},e.prototype._eventListenerClick=function(t){var i=this._getPositionFromMouseEvent(t);i!==void 0&&(t.button===0?this.mouseLeftClickPosition=i:t.button===1?this.mouseMiddleClickPosition=i:t.button===2&&(this.mouseRightClickPosition=i))},e.prototype._getPositionFromMouseEvent=function(t){if(this.popupCanvas){var i=this.popupCanvas.getBoundingClientRect(),r=i.x,n=i.x+i.width,o=i.y,s=i.y+i.height,u=void 0,l=void 0;if(t.x>=r&&t.x<=n&&(u=t.x-r),t.y>=o&&t.y<=s&&(l=t.y-o),u!==void 0&&l!==void 0)return{x:this.popupCanvas.width/i.width*u,y:this.popupCanvas.height/i.height*l}}},e}();function PS(e){return e&&(Object.prototype.toString.call(e)==="[object Function]"||typeof e=="function"||e instanceof Function)}var mc,NS=function(){function e(t,i,r,n,o){this.wasmTerminalConfig=t,this.commandString=i,this.commandStartReadCallback=r,this.commandEndCallback=n,o&&(this.wasmTty=o),this.commandOptionsForProcessesToRun=[],this.spawnedProcessObjects=[],this.spawnedProcesses=0,this.pipedStdinDataForNextProcess=new Uint8Array,this.isRunning=!1,this.supportsSharedArrayBuffer=this.wasmTerminalConfig.processWorkerUrl&&window.SharedArrayBuffer&&window.Atomics}return e.prototype.runCommand=function(){return Ht(this,void 0,void 0,function(){var t,i,r;return Dt(this,function(n){switch(n.label){case 0:t=Lv(this.commandString),n.label=1;case 1:if(n.trys.push([1,3,,4]),1<t.length)throw Error("Only one command permitted");if(t[0].type!=="command")throw Error("Only commands allowed");return i=this,[4,this._getCommandOptionsFromAST(t[0],this.wasmTerminalConfig,this.wasmTty)];case 2:return i.commandOptionsForProcessesToRun=n.sent(),[3,4];case 3:return r=n.sent(),this.wasmTty&&(this.wasmTty.print(`\r
`),this.wasmTty.print("wasm shell: parse error ("+r.toString()+`)\r
`)),console.error(r),this.commandEndCallback(),[2];case 4:return this.isRunning=!0,[4,this._tryToSpawnProcess(0)];case 5:return n.sent(),[2]}})})},e.prototype.kill=function(){this.isRunning&&(this.spawnedProcessObjects.forEach(function(t){t.worker&&t.worker.terminate(),t.ioDeviceWindow&&t.ioDeviceWindow.close()}),this.commandOptionsForProcessesToRun=[],this.spawnedProcessObjects=[],this.isRunning=!1,this.commandEndCallback())},e.prototype._addStdinToSharedStdin=function(t,i){if(this.spawnedProcessObjects[i]){var r=this.spawnedProcessObjects[i].sharedStdin,n=1;0<r[0]&&(n=r[0]),t.forEach(function(o,s){r[n+s]=o}),r[0]=n+t.length-1,Atomics.notify(r,0,1)}},e.prototype._tryToSpawnProcess=function(t){return Ht(this,void 0,void 0,function(){return Dt(this,function(i){switch(i.label){case 0:return t+1>this.spawnedProcesses&&2>this.spawnedProcessObjects.length&&t<this.commandOptionsForProcessesToRun.length?(this.spawnedProcesses++,[4,this._spawnProcess(t)]):[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}})})},e.prototype._spawnProcess=function(t){return Ht(this,void 0,void 0,function(){var i,r;return Dt(this,function(n){switch(n.label){case 0:return i=void 0,this.commandOptionsForProcessesToRun[t].module&&this.supportsSharedArrayBuffer?[4,this._spawnProcessAsWorker(t)]:[3,2];case 1:return i=n.sent(),[3,4];case 2:return[4,this._spawnProcessAsService(t)];case 3:i=n.sent(),n.label=4;case 4:return this.spawnedProcessObjects.push(i),i.process.start(0<this.pipedStdinDataForNextProcess.length?this.pipedStdinDataForNextProcess:void 0),0<this.pipedStdinDataForNextProcess.length&&(this.pipedStdinDataForNextProcess=new Uint8Array),r=!1,this.commandOptionsForProcessesToRun.length>t+1&&(r=this.commandOptionsForProcessesToRun[t+1].callback!==void 0),this.supportsSharedArrayBuffer&&!r&&this._tryToSpawnProcess(t+1),[2]}})})},e.prototype._spawnProcessAsWorker=function(t){return Ht(this,void 0,void 0,function(){var i,r,n,o,s,u,l,a,h,p;return Dt(this,function(d){switch(d.label){case 0:if(!this.wasmTerminalConfig.processWorkerUrl)throw Error("Terminal Config missing the Process Worker URL");return i=this.wasmTerminalConfig.processWorkerUrl,i="data:application/javascript;base64,LyoKICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCiAgICBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICAgIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOyB5b3UgbWF5IG5vdCB1c2UKICAgIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlCiAgICBMaWNlbnNlIGF0IGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoKICAgIFRISVMgQ09ERSBJUyBQUk9WSURFRCBPTiBBTiAqQVMgSVMqIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICAgIEtJTkQsIEVJVEhFUiBFWFBSRVNTIE9SIElNUExJRUQsIElOQ0xVRElORyBXSVRIT1VUIExJTUlUQVRJT04gQU5ZIElNUExJRUQKICAgIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBUSVRMRSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UsCiAgICBNRVJDSEFOVEFCTElUWSBPUiBOT04tSU5GUklOR0VNRU5ULgoKICAgIFNlZSB0aGUgQXBhY2hlIFZlcnNpb24gMi4wIExpY2Vuc2UgZm9yIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucwogICAgYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KJ3VzZSBzdHJpY3QnOyhmdW5jdGlvbigpe2Z1bmN0aW9uIG1jKGMsYT1zZWxmKXthLmFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLGZ1bmN0aW9uIGUoZCl7aWYoZCYmZC5kYXRhKXt2YXIge2lkOmYsdHlwZTpnLHBhdGg6aH09T2JqZWN0LmFzc2lnbih7cGF0aDpbXX0sZC5kYXRhKSxrPShkLmRhdGEuYXJndW1lbnRMaXN0fHxbXSkubWFwKEZhKTt0cnl7bGV0IGE9aC5zbGljZSgwLC0xKS5yZWR1Y2UoKGEsYyk9PmFbY10sYyksZT1oLnJlZHVjZSgoYSxjKT0+YVtjXSxjKTtzd2l0Y2goZyl7Y2FzZSAwOnZhciB0PWU7YnJlYWs7Y2FzZSAxOmFbaC5zbGljZSgtMSlbMF1dPUZhKGQuZGF0YS52YWx1ZSk7dD0hMDticmVhaztjYXNlIDI6dD1lLmFwcGx5KGEsayk7YnJlYWs7Y2FzZSAzOntsZXQgYT1uZXcgZSguLi5rKTt0PU9iamVjdC5hc3NpZ24oYSx7W3ZkXTohMH0pfWJyZWFrO2Nhc2UgNDp7bGV0IHtwb3J0MTphLHBvcnQyOmR9PW5ldyBNZXNzYWdlQ2hhbm5lbDttYyhjLGQpO3Q9CkNmKGEsW2FdKX1icmVhaztjYXNlIDU6dD12b2lkIDB9fWNhdGNoKHEpe3Q9cSxuYy5hZGQocSl9UHJvbWlzZS5yZXNvbHZlKHQpLmNhdGNoKGE9PntuYy5hZGQoYSk7cmV0dXJuIGF9KS50aGVuKGM9PntsZXQgW2QsaF09b2MoYyk7YS5wb3N0TWVzc2FnZShPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sZCkse2lkOmZ9KSxoKTs1PT09ZyYmKGEucmVtb3ZlRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsZSksIk1lc3NhZ2VQb3J0Ij09PWEuY29uc3RydWN0b3IubmFtZSYmYS5jbG9zZSgpKX0pfX0pO2Euc3RhcnQmJmEuc3RhcnQoKX1mdW5jdGlvbiBEYihjKXtpZihjKXRocm93IEVycm9yKCJQcm94eSBoYXMgYmVlbiByZWxlYXNlZCBhbmQgaXMgbm90IHVzZWFibGUiKTt9ZnVuY3Rpb24gcGMoYyxhPVtdLGI9ZnVuY3Rpb24oKXt9KXtsZXQgZD0hMSxlPW5ldyBQcm94eShiLHtnZXQoYixnKXtEYihkKTtpZihnPT09RGYpcmV0dXJuKCk9PlRhKGMse3R5cGU6NSxwYXRoOmEubWFwKGE9PgphLnRvU3RyaW5nKCkpfSkudGhlbigoKT0+eyJNZXNzYWdlUG9ydCI9PT1jLmNvbnN0cnVjdG9yLm5hbWUmJmMuY2xvc2UoKTtkPSEwfSk7aWYoInRoZW4iPT09Zyl7aWYoMD09PWEubGVuZ3RoKXJldHVybnt0aGVuOigpPT5lfTtiPVRhKGMse3R5cGU6MCxwYXRoOmEubWFwKGE9PmEudG9TdHJpbmcoKSl9KS50aGVuKEZhKTtyZXR1cm4gYi50aGVuLmJpbmQoYil9cmV0dXJuIHBjKGMsWy4uLmEsZ10pfSxzZXQoYixlLGgpe0RiKGQpO2NvbnN0IFtmLGddPW9jKGgpO3JldHVybiBUYShjLHt0eXBlOjEscGF0aDpbLi4uYSxlXS5tYXAoYT0+YS50b1N0cmluZygpKSx2YWx1ZTpmfSxnKS50aGVuKEZhKX0sYXBwbHkoYixlLGgpe0RiKGQpO2I9YVthLmxlbmd0aC0xXTtpZihiPT09RWYpcmV0dXJuIFRhKGMse3R5cGU6NH0pLnRoZW4oRmEpO2lmKCJiaW5kIj09PWIpcmV0dXJuIHBjKGMsYS5zbGljZSgwLC0xKSk7Y29uc3QgW2YsZ109d2QoaCk7cmV0dXJuIFRhKGMse3R5cGU6MixwYXRoOmEubWFwKGE9PgphLnRvU3RyaW5nKCkpLGFyZ3VtZW50TGlzdDpmfSxnKS50aGVuKEZhKX0sY29uc3RydWN0KGIsZSl7RGIoZCk7Y29uc3QgW2YsZ109d2QoZSk7cmV0dXJuIFRhKGMse3R5cGU6MyxwYXRoOmEubWFwKGE9PmEudG9TdHJpbmcoKSksYXJndW1lbnRMaXN0OmZ9LGcpLnRoZW4oRmEpfX0pO3JldHVybiBlfWZ1bmN0aW9uIHdkKGMpe2M9Yy5tYXAob2MpO3JldHVybltjLm1hcChhPT5hWzBdKSxBcnJheS5wcm90b3R5cGUuY29uY2F0LmFwcGx5KFtdLGMubWFwKGE9PmFbMV0pKV19ZnVuY3Rpb24gQ2YoYyxhKXt4ZC5zZXQoYyxhKTtyZXR1cm4gY31mdW5jdGlvbiBvYyhjKXtmb3IobGV0IFthLGJdb2YgeWQpaWYoYi5jYW5IYW5kbGUoYykpe2xldCBbZCxlXT1iLnNlcmlhbGl6ZShjKTtyZXR1cm5be3R5cGU6MyxuYW1lOmEsdmFsdWU6ZH0sZV19cmV0dXJuW3t0eXBlOjAsdmFsdWU6Y30seGQuZ2V0KGMpfHxbXV19ZnVuY3Rpb24gRmEoYyl7c3dpdGNoKGMudHlwZSl7Y2FzZSAzOnJldHVybiB5ZC5nZXQoYy5uYW1lKS5kZXNlcmlhbGl6ZShjLnZhbHVlKTsKY2FzZSAwOnJldHVybiBjLnZhbHVlfX1mdW5jdGlvbiBUYShjLGEsYil7cmV0dXJuIG5ldyBQcm9taXNlKGQ9PntsZXQgZT1GZigpO2MuYWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsZnVuY3Rpb24gaChhKXthLmRhdGEmJmEuZGF0YS5pZCYmYS5kYXRhLmlkPT09ZSYmKGMucmVtb3ZlRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsaCksZChhLmRhdGEpKX0pO2Muc3RhcnQmJmMuc3RhcnQoKTtjLnBvc3RNZXNzYWdlKE9iamVjdC5hc3NpZ24oe2lkOmV9LGEpLGIpfSl9ZnVuY3Rpb24gRmYoKXtyZXR1cm4gQXJyYXkoNCkuZmlsbCgwKS5tYXAoKCk9Pk1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSpOdW1iZXIuTUFYX1NBRkVfSU5URUdFUikudG9TdHJpbmcoMTYpKS5qb2luKCItIil9ZnVuY3Rpb24gemQoYyxhKXtmdW5jdGlvbiBiKCl7dGhpcy5jb25zdHJ1Y3Rvcj1jfXFjKGMsYSk7Yy5wcm90b3R5cGU9bnVsbD09PWE/T2JqZWN0LmNyZWF0ZShhKTooYi5wcm90b3R5cGU9YS5wcm90b3R5cGUsCm5ldyBiKX1mdW5jdGlvbiBFYihjLGEsYixkKXtyZXR1cm4gbmV3IChifHwoYj1Qcm9taXNlKSkoZnVuY3Rpb24oZSxmKXtmdW5jdGlvbiBnKGEpe3RyeXtrKGQubmV4dChhKSl9Y2F0Y2gocSl7ZihxKX19ZnVuY3Rpb24gaChhKXt0cnl7ayhkWyJ0aHJvdyJdKGEpKX1jYXRjaChxKXtmKHEpfX1mdW5jdGlvbiBrKGEpe2EuZG9uZT9lKGEudmFsdWUpOihuZXcgYihmdW5jdGlvbihjKXtjKGEudmFsdWUpfSkpLnRoZW4oZyxoKX1rKChkPWQuYXBwbHkoYyxhfHxbXSkpLm5leHQoKSl9KX1mdW5jdGlvbiBGYihjLGEpe2Z1bmN0aW9uIGIoYSl7cmV0dXJuIGZ1bmN0aW9uKGMpe3JldHVybiBkKFthLGNdKX19ZnVuY3Rpb24gZChiKXtpZihmKXRocm93IG5ldyBUeXBlRXJyb3IoIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy4iKTtmb3IoO2U7KXRyeXtpZihmPTEsZyYmKGg9YlswXSYyP2dbInJldHVybiJdOmJbMF0/Z1sidGhyb3ciXXx8KChoPWdbInJldHVybiJdKSYmaC5jYWxsKGcpLAowKTpnLm5leHQpJiYhKGg9aC5jYWxsKGcsYlsxXSkpLmRvbmUpcmV0dXJuIGg7aWYoZz0wLGgpYj1bYlswXSYyLGgudmFsdWVdO3N3aXRjaChiWzBdKXtjYXNlIDA6Y2FzZSAxOmg9YjticmVhaztjYXNlIDQ6cmV0dXJuIGUubGFiZWwrKyx7dmFsdWU6YlsxXSxkb25lOiExfTtjYXNlIDU6ZS5sYWJlbCsrO2c9YlsxXTtiPVswXTtjb250aW51ZTtjYXNlIDc6Yj1lLm9wcy5wb3AoKTtlLnRyeXMucG9wKCk7Y29udGludWU7ZGVmYXVsdDppZighKGg9ZS50cnlzLGg9MDxoLmxlbmd0aCYmaFtoLmxlbmd0aC0xXSkmJig2PT09YlswXXx8Mj09PWJbMF0pKXtlPTA7Y29udGludWV9aWYoMz09PWJbMF0mJighaHx8YlsxXT5oWzBdJiZiWzFdPGhbM10pKWUubGFiZWw9YlsxXTtlbHNlIGlmKDY9PT1iWzBdJiZlLmxhYmVsPGhbMV0pZS5sYWJlbD1oWzFdLGg9YjtlbHNlIGlmKGgmJmUubGFiZWw8aFsyXSllLmxhYmVsPWhbMl0sZS5vcHMucHVzaChiKTtlbHNle2hbMl0mJmUub3BzLnBvcCgpO2UudHJ5cy5wb3AoKTsKY29udGludWV9fWI9YS5jYWxsKGMsZSl9Y2F0Y2gocSl7Yj1bNixxXSxnPTB9ZmluYWxseXtmPWg9MH1pZihiWzBdJjUpdGhyb3cgYlsxXTtyZXR1cm57dmFsdWU6YlswXT9iWzFdOnZvaWQgMCxkb25lOiEwfX12YXIgZT17bGFiZWw6MCxzZW50OmZ1bmN0aW9uKCl7aWYoaFswXSYxKXRocm93IGhbMV07cmV0dXJuIGhbMV19LHRyeXM6W10sb3BzOltdfSxmLGcsaCxrO3JldHVybiBrPXtuZXh0OmIoMCksInRocm93IjpiKDEpLCJyZXR1cm4iOmIoMil9LCJmdW5jdGlvbiI9PT10eXBlb2YgU3ltYm9sJiYoa1tTeW1ib2wuaXRlcmF0b3JdPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KSxrfWZ1bmN0aW9uIEdmKGMsYSxiLGQpe3JldHVybiBuZXcgKGJ8fChiPVByb21pc2UpKShmdW5jdGlvbihlLGYpe2Z1bmN0aW9uIGcoYSl7dHJ5e2soZC5uZXh0KGEpKX1jYXRjaChxKXtmKHEpfX1mdW5jdGlvbiBoKGEpe3RyeXtrKGRbInRocm93Il0oYSkpfWNhdGNoKHEpe2YocSl9fWZ1bmN0aW9uIGsoYSl7YS5kb25lPwplKGEudmFsdWUpOihuZXcgYihmdW5jdGlvbihjKXtjKGEudmFsdWUpfSkpLnRoZW4oZyxoKX1rKChkPWQuYXBwbHkoYyxhfHxbXSkpLm5leHQoKSl9KX1mdW5jdGlvbiBIZihjLGEpe2Z1bmN0aW9uIGIoYSl7cmV0dXJuIGZ1bmN0aW9uKGMpe3JldHVybiBkKFthLGNdKX19ZnVuY3Rpb24gZChiKXtpZihmKXRocm93IG5ldyBUeXBlRXJyb3IoIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy4iKTtmb3IoO2U7KXRyeXtpZihmPTEsZyYmKGg9YlswXSYyP2dbInJldHVybiJdOmJbMF0/Z1sidGhyb3ciXXx8KChoPWdbInJldHVybiJdKSYmaC5jYWxsKGcpLDApOmcubmV4dCkmJiEoaD1oLmNhbGwoZyxiWzFdKSkuZG9uZSlyZXR1cm4gaDtpZihnPTAsaCliPVtiWzBdJjIsaC52YWx1ZV07c3dpdGNoKGJbMF0pe2Nhc2UgMDpjYXNlIDE6aD1iO2JyZWFrO2Nhc2UgNDpyZXR1cm4gZS5sYWJlbCsrLHt2YWx1ZTpiWzFdLGRvbmU6ITF9O2Nhc2UgNTplLmxhYmVsKys7Zz1iWzFdO2I9WzBdOwpjb250aW51ZTtjYXNlIDc6Yj1lLm9wcy5wb3AoKTtlLnRyeXMucG9wKCk7Y29udGludWU7ZGVmYXVsdDppZighKGg9ZS50cnlzLGg9MDxoLmxlbmd0aCYmaFtoLmxlbmd0aC0xXSkmJig2PT09YlswXXx8Mj09PWJbMF0pKXtlPTA7Y29udGludWV9aWYoMz09PWJbMF0mJighaHx8YlsxXT5oWzBdJiZiWzFdPGhbM10pKWUubGFiZWw9YlsxXTtlbHNlIGlmKDY9PT1iWzBdJiZlLmxhYmVsPGhbMV0pZS5sYWJlbD1oWzFdLGg9YjtlbHNlIGlmKGgmJmUubGFiZWw8aFsyXSllLmxhYmVsPWhbMl0sZS5vcHMucHVzaChiKTtlbHNle2hbMl0mJmUub3BzLnBvcCgpO2UudHJ5cy5wb3AoKTtjb250aW51ZX19Yj1hLmNhbGwoYyxlKX1jYXRjaChxKXtiPVs2LHFdLGc9MH1maW5hbGx5e2Y9aD0wfWlmKGJbMF0mNSl0aHJvdyBiWzFdO3JldHVybnt2YWx1ZTpiWzBdP2JbMV06dm9pZCAwLGRvbmU6ITB9fXZhciBlPXtsYWJlbDowLHNlbnQ6ZnVuY3Rpb24oKXtpZihoWzBdJjEpdGhyb3cgaFsxXTtyZXR1cm4gaFsxXX0sCnRyeXM6W10sb3BzOltdfSxmLGcsaCxrO3JldHVybiBrPXtuZXh0OmIoMCksInRocm93IjpiKDEpLCJyZXR1cm4iOmIoMil9LCJmdW5jdGlvbiI9PT10eXBlb2YgU3ltYm9sJiYoa1tTeW1ib2wuaXRlcmF0b3JdPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KSxrfWZ1bmN0aW9uIHJjKGMpe3ZhciBhPSJmdW5jdGlvbiI9PT10eXBlb2YgU3ltYm9sJiZjW1N5bWJvbC5pdGVyYXRvcl0sYj0wO3JldHVybiBhP2EuY2FsbChjKTp7bmV4dDpmdW5jdGlvbigpe2MmJmI+PWMubGVuZ3RoJiYoYz12b2lkIDApO3JldHVybnt2YWx1ZTpjJiZjW2IrK10sZG9uZTohY319fX1mdW5jdGlvbiBJZihjLGEpe3ZhciBiPSJmdW5jdGlvbiI9PT10eXBlb2YgU3ltYm9sJiZjW1N5bWJvbC5pdGVyYXRvcl07aWYoIWIpcmV0dXJuIGM7Yz1iLmNhbGwoYyk7dmFyIGQsZT1bXTt0cnl7Zm9yKDsodm9pZCAwPT09YXx8MDxhLS0pJiYhKGQ9Yy5uZXh0KCkpLmRvbmU7KWUucHVzaChkLnZhbHVlKX1jYXRjaChnKXt2YXIgZj0Ke2Vycm9yOmd9fWZpbmFsbHl7dHJ5e2QmJiFkLmRvbmUmJihiPWNbInJldHVybiJdKSYmYi5jYWxsKGMpfWZpbmFsbHl7aWYoZil0aHJvdyBmLmVycm9yO319cmV0dXJuIGV9ZnVuY3Rpb24gSmYoKXtmb3IodmFyIGM9W10sYT0wO2E8YXJndW1lbnRzLmxlbmd0aDthKyspYz1jLmNvbmNhdChJZihhcmd1bWVudHNbYV0pKTtyZXR1cm4gY31mdW5jdGlvbiBRKGMpe3JldHVybiBjJiZjLl9fZXNNb2R1bGUmJk9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChjLCJkZWZhdWx0Iik/Y1siZGVmYXVsdCJdOmN9ZnVuY3Rpb24gSyhjLGEpe3JldHVybiBhPXtleHBvcnRzOnt9fSxjKGEsYS5leHBvcnRzKSxhLmV4cG9ydHN9ZnVuY3Rpb24gQWQoKXtzYz0hMDtmb3IodmFyIGM9MDs2ND5jOysrYylSW2NdPSJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvIltjXSxIWyJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvIi5jaGFyQ29kZUF0KGMpXT0KYztIWzQ1XT02MjtIWzk1XT02M31mdW5jdGlvbiBLZihjLGEsYil7Zm9yKHZhciBkPVtdLGU9YTtlPGI7ZSs9MylhPShjW2VdPDwxNikrKGNbZSsxXTw8OCkrY1tlKzJdLGQucHVzaChSW2E+PjE4JjYzXStSW2E+PjEyJjYzXStSW2E+PjYmNjNdK1JbYSY2M10pO3JldHVybiBkLmpvaW4oIiIpfWZ1bmN0aW9uIEJkKGMpe3NjfHxBZCgpO2Zvcih2YXIgYT1jLmxlbmd0aCxiPWElMyxkPSIiLGU9W10sZj0wLGc9YS1iO2Y8ZztmKz0xNjM4MyllLnB1c2goS2YoYyxmLGYrMTYzODM+Zz9nOmYrMTYzODMpKTsxPT09Yj8oYz1jW2EtMV0sZCs9UltjPj4yXSxkKz1SW2M8PDQmNjNdLGQrPSI9PSIpOjI9PT1iJiYoYz0oY1thLTJdPDw4KStjW2EtMV0sZCs9UltjPj4xMF0sZCs9UltjPj40JjYzXSxkKz1SW2M8PDImNjNdLGQrPSI9Iik7ZS5wdXNoKGQpO3JldHVybiBlLmpvaW4oIiIpfWZ1bmN0aW9uIEdiKGMsYSxiLGQsZSl7dmFyIGY9OCplLWQtMSxnPSgxPDxmKS0xLGg9Zz4+MSxrPS03O2U9CmI/ZS0xOjA7dmFyIHQ9Yj8tMToxLHE9Y1thK2VdO2UrPXQ7Yj1xJigxPDwtayktMTtxPj49LWs7Zm9yKGsrPWY7MDxrO2I9MjU2KmIrY1thK2VdLGUrPXQsay09OCk7Zj1iJigxPDwtayktMTtiPj49LWs7Zm9yKGsrPWQ7MDxrO2Y9MjU2KmYrY1thK2VdLGUrPXQsay09OCk7aWYoMD09PWIpYj0xLWg7ZWxzZXtpZihiPT09ZylyZXR1cm4gZj9OYU46SW5maW5pdHkqKHE/LTE6MSk7Zis9TWF0aC5wb3coMixkKTtiLT1ofXJldHVybihxPy0xOjEpKmYqTWF0aC5wb3coMixiLWQpfWZ1bmN0aW9uIEhiKGMsYSxiLGQsZSxmKXt2YXIgZyxoPTgqZi1lLTEsaz0oMTw8aCktMSx0PWs+PjEscT0yMz09PWU/TWF0aC5wb3coMiwtMjQpLU1hdGgucG93KDIsLTc3KTowO2Y9ZD8wOmYtMTt2YXIgQT1kPzE6LTEscj0wPmF8fDA9PT1hJiYwPjEvYT8xOjA7YT1NYXRoLmFicyhhKTtmb3IoaXNOYU4oYSl8fEluZmluaXR5PT09YT8oYT1pc05hTihhKT8xOjAsZD1rKTooZD1NYXRoLmZsb29yKE1hdGgubG9nKGEpLwpNYXRoLkxOMiksMT5hKihnPU1hdGgucG93KDIsLWQpKSYmKGQtLSxnKj0yKSxhPTE8PWQrdD9hK3EvZzphK3EqTWF0aC5wb3coMiwxLXQpLDI8PWEqZyYmKGQrKyxnLz0yKSxkK3Q+PWs/KGE9MCxkPWspOjE8PWQrdD8oYT0oYSpnLTEpKk1hdGgucG93KDIsZSksZCs9dCk6KGE9YSpNYXRoLnBvdygyLHQtMSkqTWF0aC5wb3coMixlKSxkPTApKTs4PD1lO2NbYitmXT1hJjI1NSxmKz1BLGEvPTI1NixlLT04KTtkPWQ8PGV8YTtmb3IoaCs9ZTswPGg7Y1tiK2ZdPWQmMjU1LGYrPUEsZC89MjU2LGgtPTgpO2NbYitmLUFdfD0xMjgqcn1mdW5jdGlvbiBqYShjLGEpe2lmKChsLlRZUEVEX0FSUkFZX1NVUFBPUlQ/MjE0NzQ4MzY0NzoxMDczNzQxODIzKTxhKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIHR5cGVkIGFycmF5IGxlbmd0aCIpO2wuVFlQRURfQVJSQVlfU1VQUE9SVD8oYz1uZXcgVWludDhBcnJheShhKSxjLl9fcHJvdG9fXz1sLnByb3RvdHlwZSk6KG51bGw9PT1jJiYoYz0KbmV3IGwoYSkpLGMubGVuZ3RoPWEpO3JldHVybiBjfWZ1bmN0aW9uIGwoYyxhLGIpe2lmKCEobC5UWVBFRF9BUlJBWV9TVVBQT1JUfHx0aGlzIGluc3RhbmNlb2YgbCkpcmV0dXJuIG5ldyBsKGMsYSxiKTtpZigibnVtYmVyIj09PXR5cGVvZiBjKXtpZigic3RyaW5nIj09PXR5cGVvZiBhKXRocm93IEVycm9yKCJJZiBlbmNvZGluZyBpcyBzcGVjaWZpZWQgdGhlbiB0aGUgZmlyc3QgYXJndW1lbnQgbXVzdCBiZSBhIHN0cmluZyIpO3JldHVybiB0Yyh0aGlzLGMpfXJldHVybiBDZCh0aGlzLGMsYSxiKX1mdW5jdGlvbiBDZChjLGEsYixkKXtpZigibnVtYmVyIj09PXR5cGVvZiBhKXRocm93IG5ldyBUeXBlRXJyb3IoJyJ2YWx1ZSIgYXJndW1lbnQgbXVzdCBub3QgYmUgYSBudW1iZXInKTtpZigidW5kZWZpbmVkIiE9PXR5cGVvZiBBcnJheUJ1ZmZlciYmYSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKXthLmJ5dGVMZW5ndGg7aWYoMD5ifHxhLmJ5dGVMZW5ndGg8Yil0aHJvdyBuZXcgUmFuZ2VFcnJvcigiJ29mZnNldCcgaXMgb3V0IG9mIGJvdW5kcyIpOwppZihhLmJ5dGVMZW5ndGg8YisoZHx8MCkpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIidsZW5ndGgnIGlzIG91dCBvZiBib3VuZHMiKTthPXZvaWQgMD09PWImJnZvaWQgMD09PWQ/bmV3IFVpbnQ4QXJyYXkoYSk6dm9pZCAwPT09ZD9uZXcgVWludDhBcnJheShhLGIpOm5ldyBVaW50OEFycmF5KGEsYixkKTtsLlRZUEVEX0FSUkFZX1NVUFBPUlQ/KGM9YSxjLl9fcHJvdG9fXz1sLnByb3RvdHlwZSk6Yz11YyhjLGEpO3JldHVybiBjfWlmKCJzdHJpbmciPT09dHlwZW9mIGEpe2Q9YztjPWI7aWYoInN0cmluZyIhPT10eXBlb2YgY3x8IiI9PT1jKWM9InV0ZjgiO2lmKCFsLmlzRW5jb2RpbmcoYykpdGhyb3cgbmV3IFR5cGVFcnJvcignImVuY29kaW5nIiBtdXN0IGJlIGEgdmFsaWQgc3RyaW5nIGVuY29kaW5nJyk7Yj1EZChhLGMpfDA7ZD1qYShkLGIpO2E9ZC53cml0ZShhLGMpO2EhPT1iJiYoZD1kLnNsaWNlKDAsYSkpO3JldHVybiBkfXJldHVybiBMZihjLGEpfWZ1bmN0aW9uIEVkKGMpe2lmKCJudW1iZXIiIT09CnR5cGVvZiBjKXRocm93IG5ldyBUeXBlRXJyb3IoJyJzaXplIiBhcmd1bWVudCBtdXN0IGJlIGEgbnVtYmVyJyk7aWYoMD5jKXRocm93IG5ldyBSYW5nZUVycm9yKCcic2l6ZSIgYXJndW1lbnQgbXVzdCBub3QgYmUgbmVnYXRpdmUnKTt9ZnVuY3Rpb24gdGMoYyxhKXtFZChhKTtjPWphKGMsMD5hPzA6dmMoYSl8MCk7aWYoIWwuVFlQRURfQVJSQVlfU1VQUE9SVClmb3IodmFyIGI9MDtiPGE7KytiKWNbYl09MDtyZXR1cm4gY31mdW5jdGlvbiB1YyhjLGEpe3ZhciBiPTA+YS5sZW5ndGg/MDp2YyhhLmxlbmd0aCl8MDtjPWphKGMsYik7Zm9yKHZhciBkPTA7ZDxiO2QrPTEpY1tkXT1hW2RdJjI1NTtyZXR1cm4gY31mdW5jdGlvbiBMZihjLGEpe2lmKFcoYSkpe3ZhciBiPXZjKGEubGVuZ3RoKXwwO2M9amEoYyxiKTtpZigwPT09Yy5sZW5ndGgpcmV0dXJuIGM7YS5jb3B5KGMsMCwwLGIpO3JldHVybiBjfWlmKGEpe2lmKCJ1bmRlZmluZWQiIT09dHlwZW9mIEFycmF5QnVmZmVyJiZhLmJ1ZmZlciBpbnN0YW5jZW9mCkFycmF5QnVmZmVyfHwibGVuZ3RoImluIGEpcmV0dXJuKGI9Im51bWJlciIhPT10eXBlb2YgYS5sZW5ndGgpfHwoYj1hLmxlbmd0aCxiPWIhPT1iKSxiP2phKGMsMCk6dWMoYyxhKTtpZigiQnVmZmVyIj09PWEudHlwZSYmRmQoYS5kYXRhKSlyZXR1cm4gdWMoYyxhLmRhdGEpfXRocm93IG5ldyBUeXBlRXJyb3IoIkZpcnN0IGFyZ3VtZW50IG11c3QgYmUgYSBzdHJpbmcsIEJ1ZmZlciwgQXJyYXlCdWZmZXIsIEFycmF5LCBvciBhcnJheS1saWtlIG9iamVjdC4iKTt9ZnVuY3Rpb24gdmMoYyl7aWYoYz49KGwuVFlQRURfQVJSQVlfU1VQUE9SVD8yMTQ3NDgzNjQ3OjEwNzM3NDE4MjMpKXRocm93IG5ldyBSYW5nZUVycm9yKCJBdHRlbXB0IHRvIGFsbG9jYXRlIEJ1ZmZlciBsYXJnZXIgdGhhbiBtYXhpbXVtIHNpemU6IDB4IisobC5UWVBFRF9BUlJBWV9TVVBQT1JUPzIxNDc0ODM2NDc6MTA3Mzc0MTgyMykudG9TdHJpbmcoMTYpKyIgYnl0ZXMiKTtyZXR1cm4gY3wwfWZ1bmN0aW9uIFcoYyl7cmV0dXJuIShudWxsPT0KY3x8IWMuX2lzQnVmZmVyKX1mdW5jdGlvbiBEZChjLGEpe2lmKFcoYykpcmV0dXJuIGMubGVuZ3RoO2lmKCJ1bmRlZmluZWQiIT09dHlwZW9mIEFycmF5QnVmZmVyJiYiZnVuY3Rpb24iPT09dHlwZW9mIEFycmF5QnVmZmVyLmlzVmlldyYmKEFycmF5QnVmZmVyLmlzVmlldyhjKXx8YyBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSlyZXR1cm4gYy5ieXRlTGVuZ3RoOyJzdHJpbmciIT09dHlwZW9mIGMmJihjPSIiK2MpO3ZhciBiPWMubGVuZ3RoO2lmKDA9PT1iKXJldHVybiAwO2Zvcih2YXIgZD0hMTs7KXN3aXRjaChhKXtjYXNlICJhc2NpaSI6Y2FzZSAibGF0aW4xIjpjYXNlICJiaW5hcnkiOnJldHVybiBiO2Nhc2UgInV0ZjgiOmNhc2UgInV0Zi04IjpjYXNlIHZvaWQgMDpyZXR1cm4gSWIoYykubGVuZ3RoO2Nhc2UgInVjczIiOmNhc2UgInVjcy0yIjpjYXNlICJ1dGYxNmxlIjpjYXNlICJ1dGYtMTZsZSI6cmV0dXJuIDIqYjtjYXNlICJoZXgiOnJldHVybiBiPj4+MTtjYXNlICJiYXNlNjQiOnJldHVybiBHZChjKS5sZW5ndGg7CmRlZmF1bHQ6aWYoZClyZXR1cm4gSWIoYykubGVuZ3RoO2E9KCIiK2EpLnRvTG93ZXJDYXNlKCk7ZD0hMH19ZnVuY3Rpb24gTWYoYyxhLGIpe3ZhciBkPSExO2lmKHZvaWQgMD09PWF8fDA+YSlhPTA7aWYoYT50aGlzLmxlbmd0aClyZXR1cm4iIjtpZih2b2lkIDA9PT1ifHxiPnRoaXMubGVuZ3RoKWI9dGhpcy5sZW5ndGg7aWYoMD49YilyZXR1cm4iIjtiPj4+PTA7YT4+Pj0wO2lmKGI8PWEpcmV0dXJuIiI7Zm9yKGN8fChjPSJ1dGY4Iik7Oylzd2l0Y2goYyl7Y2FzZSAiaGV4IjpjPWE7YT1iO2I9dGhpcy5sZW5ndGg7aWYoIWN8fDA+YyljPTA7aWYoIWF8fDA+YXx8YT5iKWE9YjtkPSIiO2ZvcihiPWM7YjxhOysrYiljPWQsZD10aGlzW2JdLGQ9MTY+ZD8iMCIrZC50b1N0cmluZygxNik6ZC50b1N0cmluZygxNiksZD1jK2Q7cmV0dXJuIGQ7Y2FzZSAidXRmOCI6Y2FzZSAidXRmLTgiOnJldHVybiBIZCh0aGlzLGEsYik7Y2FzZSAiYXNjaWkiOmM9IiI7Zm9yKGI9TWF0aC5taW4odGhpcy5sZW5ndGgsCmIpO2E8YjsrK2EpYys9U3RyaW5nLmZyb21DaGFyQ29kZSh0aGlzW2FdJjEyNyk7cmV0dXJuIGM7Y2FzZSAibGF0aW4xIjpjYXNlICJiaW5hcnkiOmM9IiI7Zm9yKGI9TWF0aC5taW4odGhpcy5sZW5ndGgsYik7YTxiOysrYSljKz1TdHJpbmcuZnJvbUNoYXJDb2RlKHRoaXNbYV0pO3JldHVybiBjO2Nhc2UgImJhc2U2NCI6cmV0dXJuIGE9MD09PWEmJmI9PT10aGlzLmxlbmd0aD9CZCh0aGlzKTpCZCh0aGlzLnNsaWNlKGEsYikpLGE7Y2FzZSAidWNzMiI6Y2FzZSAidWNzLTIiOmNhc2UgInV0ZjE2bGUiOmNhc2UgInV0Zi0xNmxlIjphPXRoaXMuc2xpY2UoYSxiKTtiPSIiO2ZvcihjPTA7YzxhLmxlbmd0aDtjKz0yKWIrPVN0cmluZy5mcm9tQ2hhckNvZGUoYVtjXSsyNTYqYVtjKzFdKTtyZXR1cm4gYjtkZWZhdWx0OmlmKGQpdGhyb3cgbmV3IFR5cGVFcnJvcigiVW5rbm93biBlbmNvZGluZzogIitjKTtjPShjKyIiKS50b0xvd2VyQ2FzZSgpO2Q9ITB9fWZ1bmN0aW9uIEdhKGMsYSxiKXt2YXIgZD0KY1thXTtjW2FdPWNbYl07Y1tiXT1kfWZ1bmN0aW9uIElkKGMsYSxiLGQsZSl7aWYoMD09PWMubGVuZ3RoKXJldHVybi0xOyJzdHJpbmciPT09dHlwZW9mIGI/KGQ9YixiPTApOjIxNDc0ODM2NDc8Yj9iPTIxNDc0ODM2NDc6LTIxNDc0ODM2NDg+YiYmKGI9LTIxNDc0ODM2NDgpO2I9K2I7aXNOYU4oYikmJihiPWU/MDpjLmxlbmd0aC0xKTswPmImJihiPWMubGVuZ3RoK2IpO2lmKGI+PWMubGVuZ3RoKXtpZihlKXJldHVybi0xO2I9Yy5sZW5ndGgtMX1lbHNlIGlmKDA+YilpZihlKWI9MDtlbHNlIHJldHVybi0xOyJzdHJpbmciPT09dHlwZW9mIGEmJihhPWwuZnJvbShhLGQpKTtpZihXKGEpKXJldHVybiAwPT09YS5sZW5ndGg/LTE6SmQoYyxhLGIsZCxlKTtpZigibnVtYmVyIj09PXR5cGVvZiBhKXJldHVybiBhJj0yNTUsbC5UWVBFRF9BUlJBWV9TVVBQT1JUJiYiZnVuY3Rpb24iPT09dHlwZW9mIFVpbnQ4QXJyYXkucHJvdG90eXBlLmluZGV4T2Y/ZT9VaW50OEFycmF5LnByb3RvdHlwZS5pbmRleE9mLmNhbGwoYywKYSxiKTpVaW50OEFycmF5LnByb3RvdHlwZS5sYXN0SW5kZXhPZi5jYWxsKGMsYSxiKTpKZChjLFthXSxiLGQsZSk7dGhyb3cgbmV3IFR5cGVFcnJvcigidmFsIG11c3QgYmUgc3RyaW5nLCBudW1iZXIgb3IgQnVmZmVyIik7fWZ1bmN0aW9uIEpkKGMsYSxiLGQsZSl7ZnVuY3Rpb24gZihhLGMpe3JldHVybiAxPT09Zz9hW2NdOmEucmVhZFVJbnQxNkJFKGMqZyl9dmFyIGc9MSxoPWMubGVuZ3RoLGs9YS5sZW5ndGg7aWYodm9pZCAwIT09ZCYmKGQ9U3RyaW5nKGQpLnRvTG93ZXJDYXNlKCksInVjczIiPT09ZHx8InVjcy0yIj09PWR8fCJ1dGYxNmxlIj09PWR8fCJ1dGYtMTZsZSI9PT1kKSl7aWYoMj5jLmxlbmd0aHx8Mj5hLmxlbmd0aClyZXR1cm4tMTtnPTI7aC89MjtrLz0yO2IvPTJ9aWYoZSlmb3IoZD0tMTtiPGg7YisrKWlmKGYoYyxiKT09PWYoYSwtMT09PWQ/MDpiLWQpKXtpZigtMT09PWQmJihkPWIpLGItZCsxPT09aylyZXR1cm4gZCpnfWVsc2UtMSE9PWQmJihiLT1iLWQpLGQ9Ci0xO2Vsc2UgZm9yKGIraz5oJiYoYj1oLWspOzA8PWI7Yi0tKXtoPSEwO2ZvcihkPTA7ZDxrO2QrKylpZihmKGMsYitkKSE9PWYoYSxkKSl7aD0hMTticmVha31pZihoKXJldHVybiBifXJldHVybi0xfWZ1bmN0aW9uIEhkKGMsYSxiKXtiPU1hdGgubWluKGMubGVuZ3RoLGIpO2Zvcih2YXIgZD1bXTthPGI7KXt2YXIgZT1jW2FdLGY9bnVsbCxnPTIzOTxlPzQ6MjIzPGU/MzoxOTE8ZT8yOjE7aWYoYStnPD1iKXN3aXRjaChnKXtjYXNlIDE6MTI4PmUmJihmPWUpO2JyZWFrO2Nhc2UgMjp2YXIgaD1jW2ErMV07MTI4PT09KGgmMTkyKSYmKGU9KGUmMzEpPDw2fGgmNjMsMTI3PGUmJihmPWUpKTticmVhaztjYXNlIDM6aD1jW2ErMV07dmFyIGs9Y1thKzJdOzEyOD09PShoJjE5MikmJjEyOD09PShrJjE5MikmJihlPShlJjE1KTw8MTJ8KGgmNjMpPDw2fGsmNjMsMjA0NzxlJiYoNTUyOTY+ZXx8NTczNDM8ZSkmJihmPWUpKTticmVhaztjYXNlIDQ6aD1jW2ErMV07az1jW2ErMl07dmFyIHQ9Y1thKwozXTsxMjg9PT0oaCYxOTIpJiYxMjg9PT0oayYxOTIpJiYxMjg9PT0odCYxOTIpJiYoZT0oZSYxNSk8PDE4fChoJjYzKTw8MTJ8KGsmNjMpPDw2fHQmNjMsNjU1MzU8ZSYmMTExNDExMj5lJiYoZj1lKSl9bnVsbD09PWY/KGY9NjU1MzMsZz0xKTo2NTUzNTxmJiYoZi09NjU1MzYsZC5wdXNoKGY+Pj4xMCYxMDIzfDU1Mjk2KSxmPTU2MzIwfGYmMTAyMyk7ZC5wdXNoKGYpO2ErPWd9Yz1kLmxlbmd0aDtpZihjPD1LZClkPVN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoU3RyaW5nLGQpO2Vsc2V7Yj0iIjtmb3IoYT0wO2E8YzspYis9U3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShTdHJpbmcsZC5zbGljZShhLGErPUtkKSk7ZD1ifXJldHVybiBkfWZ1bmN0aW9uIEQoYyxhLGIpe2lmKDAhPT1jJTF8fDA+Yyl0aHJvdyBuZXcgUmFuZ2VFcnJvcigib2Zmc2V0IGlzIG5vdCB1aW50Iik7aWYoYythPmIpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlRyeWluZyB0byBhY2Nlc3MgYmV5b25kIGJ1ZmZlciBsZW5ndGgiKTsKfWZ1bmN0aW9uIFQoYyxhLGIsZCxlLGYpe2lmKCFXKGMpKXRocm93IG5ldyBUeXBlRXJyb3IoJyJidWZmZXIiIGFyZ3VtZW50IG11c3QgYmUgYSBCdWZmZXIgaW5zdGFuY2UnKTtpZihhPmV8fGE8Zil0aHJvdyBuZXcgUmFuZ2VFcnJvcignInZhbHVlIiBhcmd1bWVudCBpcyBvdXQgb2YgYm91bmRzJyk7aWYoYitkPmMubGVuZ3RoKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbmRleCBvdXQgb2YgcmFuZ2UiKTt9ZnVuY3Rpb24gSmIoYyxhLGIsZCl7MD5hJiYoYT02NTUzNSthKzEpO2Zvcih2YXIgZT0wLGY9TWF0aC5taW4oYy5sZW5ndGgtYiwyKTtlPGY7KytlKWNbYitlXT0oYSYyNTU8PDgqKGQ/ZToxLWUpKT4+PjgqKGQ/ZToxLWUpfWZ1bmN0aW9uIEtiKGMsYSxiLGQpezA+YSYmKGE9NDI5NDk2NzI5NSthKzEpO2Zvcih2YXIgZT0wLGY9TWF0aC5taW4oYy5sZW5ndGgtYiw0KTtlPGY7KytlKWNbYitlXT1hPj4+OCooZD9lOjMtZSkmMjU1fWZ1bmN0aW9uIExiKGMsYSxiLGQpe2lmKGIrCmQ+Yy5sZW5ndGgpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkluZGV4IG91dCBvZiByYW5nZSIpO2lmKDA+Yil0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW5kZXggb3V0IG9mIHJhbmdlIik7fWZ1bmN0aW9uIEliKGMsYSl7YT1hfHxJbmZpbml0eTtmb3IodmFyIGIsZD1jLmxlbmd0aCxlPW51bGwsZj1bXSxnPTA7ZzxkOysrZyl7Yj1jLmNoYXJDb2RlQXQoZyk7aWYoNTUyOTU8YiYmNTczNDQ+Yil7aWYoIWUpe2lmKDU2MzE5PGIpey0xPChhLT0zKSYmZi5wdXNoKDIzOSwxOTEsMTg5KTtjb250aW51ZX1lbHNlIGlmKGcrMT09PWQpey0xPChhLT0zKSYmZi5wdXNoKDIzOSwxOTEsMTg5KTtjb250aW51ZX1lPWI7Y29udGludWV9aWYoNTYzMjA+Yil7LTE8KGEtPTMpJiZmLnB1c2goMjM5LDE5MSwxODkpO2U9Yjtjb250aW51ZX1iPShlLTU1Mjk2PDwxMHxiLTU2MzIwKSs2NTUzNn1lbHNlIGUmJi0xPChhLT0zKSYmZi5wdXNoKDIzOSwxOTEsMTg5KTtlPW51bGw7aWYoMTI4PmIpe2lmKDA+LS1hKWJyZWFrOwpmLnB1c2goYil9ZWxzZSBpZigyMDQ4PmIpe2lmKDA+KGEtPTIpKWJyZWFrO2YucHVzaChiPj42fDE5MixiJjYzfDEyOCl9ZWxzZSBpZig2NTUzNj5iKXtpZigwPihhLT0zKSlicmVhaztmLnB1c2goYj4+MTJ8MjI0LGI+PjYmNjN8MTI4LGImNjN8MTI4KX1lbHNlIGlmKDExMTQxMTI+Yil7aWYoMD4oYS09NCkpYnJlYWs7Zi5wdXNoKGI+PjE4fDI0MCxiPj4xMiY2M3wxMjgsYj4+NiY2M3wxMjgsYiY2M3wxMjgpfWVsc2UgdGhyb3cgRXJyb3IoIkludmFsaWQgY29kZSBwb2ludCIpO31yZXR1cm4gZn1mdW5jdGlvbiBMZChjKXtmb3IodmFyIGE9W10sYj0wO2I8Yy5sZW5ndGg7KytiKWEucHVzaChjLmNoYXJDb2RlQXQoYikmMjU1KTtyZXR1cm4gYX1mdW5jdGlvbiBHZChjKXtjPShjLnRyaW0/Yy50cmltKCk6Yy5yZXBsYWNlKC9eXHMrfFxzKyQvZywiIikpLnJlcGxhY2UoTmYsIiIpO2lmKDI+Yy5sZW5ndGgpYz0iIjtlbHNlIGZvcig7MCE9PWMubGVuZ3RoJTQ7KWMrPSI9IjtzY3x8QWQoKTsKdmFyIGE9Yy5sZW5ndGg7aWYoMDxhJTQpdGhyb3cgRXJyb3IoIkludmFsaWQgc3RyaW5nLiBMZW5ndGggbXVzdCBiZSBhIG11bHRpcGxlIG9mIDQiKTt2YXIgYj0iPSI9PT1jW2EtMl0/MjoiPSI9PT1jW2EtMV0/MTowLGQ9bmV3IE9mKDMqYS80LWIpLGU9MDxiP2EtNDphLGY9MDtmb3IoYT0wO2E8ZTthKz00KXt2YXIgZz1IW2MuY2hhckNvZGVBdChhKV08PDE4fEhbYy5jaGFyQ29kZUF0KGErMSldPDwxMnxIW2MuY2hhckNvZGVBdChhKzIpXTw8NnxIW2MuY2hhckNvZGVBdChhKzMpXTtkW2YrK109Zz4+MTYmMjU1O2RbZisrXT1nPj44JjI1NTtkW2YrK109ZyYyNTV9Mj09PWI/KGc9SFtjLmNoYXJDb2RlQXQoYSldPDwyfEhbYy5jaGFyQ29kZUF0KGErMSldPj40LGRbZisrXT1nJjI1NSk6MT09PWImJihnPUhbYy5jaGFyQ29kZUF0KGEpXTw8MTB8SFtjLmNoYXJDb2RlQXQoYSsxKV08PDR8SFtjLmNoYXJDb2RlQXQoYSsyKV0+PjIsZFtmKytdPWc+PjgmMjU1LGRbZisrXT1nJjI1NSk7CnJldHVybiBkfWZ1bmN0aW9uIG5iKGMsYSxiLGQpe2Zvcih2YXIgZT0wO2U8ZCYmIShlK2I+PWEubGVuZ3RofHxlPj1jLmxlbmd0aCk7KytlKWFbZStiXT1jW2VdO3JldHVybiBlfWZ1bmN0aW9uIHBhKGMpe3JldHVybiBudWxsIT1jJiYoISFjLl9pc0J1ZmZlcnx8TWQoYyl8fCJmdW5jdGlvbiI9PT10eXBlb2YgYy5yZWFkRmxvYXRMRSYmImZ1bmN0aW9uIj09PXR5cGVvZiBjLnNsaWNlJiZNZChjLnNsaWNlKDAsMCkpKX1mdW5jdGlvbiBNZChjKXtyZXR1cm4hIWMuY29uc3RydWN0b3ImJiJmdW5jdGlvbiI9PT10eXBlb2YgYy5jb25zdHJ1Y3Rvci5pc0J1ZmZlciYmYy5jb25zdHJ1Y3Rvci5pc0J1ZmZlcihjKX1mdW5jdGlvbiBOZCgpe3Rocm93IEVycm9yKCJzZXRUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkIik7fWZ1bmN0aW9uIE9kKCl7dGhyb3cgRXJyb3IoImNsZWFyVGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCIpO31mdW5jdGlvbiBQZChjKXtpZih1YT09PXNldFRpbWVvdXQpcmV0dXJuIHNldFRpbWVvdXQoYywKMCk7aWYoKHVhPT09TmR8fCF1YSkmJnNldFRpbWVvdXQpcmV0dXJuIHVhPXNldFRpbWVvdXQsc2V0VGltZW91dChjLDApO3RyeXtyZXR1cm4gdWEoYywwKX1jYXRjaChhKXt0cnl7cmV0dXJuIHVhLmNhbGwobnVsbCxjLDApfWNhdGNoKGIpe3JldHVybiB1YS5jYWxsKHRoaXMsYywwKX19fWZ1bmN0aW9uIFBmKGMpe2lmKHZhPT09Y2xlYXJUaW1lb3V0KXJldHVybiBjbGVhclRpbWVvdXQoYyk7aWYoKHZhPT09T2R8fCF2YSkmJmNsZWFyVGltZW91dClyZXR1cm4gdmE9Y2xlYXJUaW1lb3V0LGNsZWFyVGltZW91dChjKTt0cnl7cmV0dXJuIHZhKGMpfWNhdGNoKGEpe3RyeXtyZXR1cm4gdmEuY2FsbChudWxsLGMpfWNhdGNoKGIpe3JldHVybiB2YS5jYWxsKHRoaXMsYyl9fX1mdW5jdGlvbiBRZigpe1VhJiZIYSYmKFVhPSExLEhhLmxlbmd0aD9rYT1IYS5jb25jYXQoa2EpOk1iPS0xLGthLmxlbmd0aCYmUWQoKSl9ZnVuY3Rpb24gUWQoKXtpZighVWEpe3ZhciBjPVBkKFFmKTtVYT0hMDtmb3IodmFyIGE9CmthLmxlbmd0aDthOyl7SGE9a2E7Zm9yKGthPVtdOysrTWI8YTspSGEmJkhhW01iXS5ydW4oKTtNYj0tMTthPWthLmxlbmd0aH1IYT1udWxsO1VhPSExO1BmKGMpfX1mdW5jdGlvbiBYKGMpe3ZhciBhPUFycmF5KGFyZ3VtZW50cy5sZW5ndGgtMSk7aWYoMTxhcmd1bWVudHMubGVuZ3RoKWZvcih2YXIgYj0xO2I8YXJndW1lbnRzLmxlbmd0aDtiKyspYVtiLTFdPWFyZ3VtZW50c1tiXTtrYS5wdXNoKG5ldyBSZChjLGEpKTsxIT09a2EubGVuZ3RofHxVYXx8UGQoUWQpfWZ1bmN0aW9uIFJkKGMsYSl7dGhpcy5mdW49Yzt0aGlzLmFycmF5PWF9ZnVuY3Rpb24gSWEoKXt9ZnVuY3Rpb24gd2MoYyl7aWYoIUphKGMpKXtmb3IodmFyIGE9W10sYj0wO2I8YXJndW1lbnRzLmxlbmd0aDtiKyspYS5wdXNoKGFhKGFyZ3VtZW50c1tiXSkpO3JldHVybiBhLmpvaW4oIiAiKX1iPTE7dmFyIGQ9YXJndW1lbnRzLGU9ZC5sZW5ndGg7YT1TdHJpbmcoYykucmVwbGFjZShSZixmdW5jdGlvbihhKXtpZigiJSUiPT09CmEpcmV0dXJuIiUiO2lmKGI+PWUpcmV0dXJuIGE7c3dpdGNoKGEpe2Nhc2UgIiVzIjpyZXR1cm4gU3RyaW5nKGRbYisrXSk7Y2FzZSAiJWQiOnJldHVybiBOdW1iZXIoZFtiKytdKTtjYXNlICIlaiI6dHJ5e3JldHVybiBKU09OLnN0cmluZ2lmeShkW2IrK10pfWNhdGNoKGgpe3JldHVybiJbQ2lyY3VsYXJdIn1kZWZhdWx0OnJldHVybiBhfX0pO2Zvcih2YXIgZj1kW2JdO2I8ZTtmPWRbKytiXSlhPW51bGwhPT1mJiZ3YShmKT9hKygiICIrYWEoZikpOmErKCIgIitmKTtyZXR1cm4gYX1mdW5jdGlvbiB4YyhjLGEpe2lmKGxhKEthLnByb2Nlc3MpKXJldHVybiBmdW5jdGlvbigpe3JldHVybiB4YyhjLGEpLmFwcGx5KHRoaXMsYXJndW1lbnRzKX07aWYoITA9PT1WYS5ub0RlcHJlY2F0aW9uKXJldHVybiBjO3ZhciBiPSExO3JldHVybiBmdW5jdGlvbigpe2lmKCFiKXtpZihWYS50aHJvd0RlcHJlY2F0aW9uKXRocm93IEVycm9yKGEpO1ZhLnRyYWNlRGVwcmVjYXRpb24/Y29uc29sZS50cmFjZShhKToKY29uc29sZS5lcnJvcihhKTtiPSEwfXJldHVybiBjLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19ZnVuY3Rpb24gU2QoYyl7bGEoeWMpJiYoeWM9VmEuZW52Lk5PREVfREVCVUd8fCIiKTtjPWMudG9VcHBlckNhc2UoKTtOYltjXXx8KChuZXcgUmVnRXhwKCJcXGIiK2MrIlxcYiIsImkiKSkudGVzdCh5Yyk/TmJbY109ZnVuY3Rpb24oKXt2YXIgYT13Yy5hcHBseShudWxsLGFyZ3VtZW50cyk7Y29uc29sZS5lcnJvcigiJXMgJWQ6ICVzIixjLDAsYSl9Ok5iW2NdPWZ1bmN0aW9uKCl7fSk7cmV0dXJuIE5iW2NdfWZ1bmN0aW9uIGFhKGMsYSl7dmFyIGI9e3NlZW46W10sc3R5bGl6ZTpTZn07Mzw9YXJndW1lbnRzLmxlbmd0aCYmKGIuZGVwdGg9YXJndW1lbnRzWzJdKTs0PD1hcmd1bWVudHMubGVuZ3RoJiYoYi5jb2xvcnM9YXJndW1lbnRzWzNdKTt6YyhhKT9iLnNob3dIaWRkZW49YTphJiZUZChiLGEpO2xhKGIuc2hvd0hpZGRlbikmJihiLnNob3dIaWRkZW49ITEpO2xhKGIuZGVwdGgpJiYoYi5kZXB0aD0KMik7bGEoYi5jb2xvcnMpJiYoYi5jb2xvcnM9ITEpO2xhKGIuY3VzdG9tSW5zcGVjdCkmJihiLmN1c3RvbUluc3BlY3Q9ITApO2IuY29sb3JzJiYoYi5zdHlsaXplPVRmKTtyZXR1cm4gT2IoYixjLGIuZGVwdGgpfWZ1bmN0aW9uIFRmKGMsYSl7cmV0dXJuKGE9YWEuc3R5bGVzW2FdKT8iXHUwMDFiWyIrYWEuY29sb3JzW2FdWzBdKyJtIitjKyJcdTAwMWJbIithYS5jb2xvcnNbYV1bMV0rIm0iOmN9ZnVuY3Rpb24gU2YoYyl7cmV0dXJuIGN9ZnVuY3Rpb24gVWYoYyl7dmFyIGE9e307Yy5mb3JFYWNoKGZ1bmN0aW9uKGMpe2FbY109ITB9KTtyZXR1cm4gYX1mdW5jdGlvbiBPYihjLGEsYil7aWYoYy5jdXN0b21JbnNwZWN0JiZhJiZXYShhLmluc3BlY3QpJiZhLmluc3BlY3QhPT1hYSYmKCFhLmNvbnN0cnVjdG9yfHxhLmNvbnN0cnVjdG9yLnByb3RvdHlwZSE9PWEpKXt2YXIgZD1hLmluc3BlY3QoYixjKTtKYShkKXx8KGQ9T2IoYyxkLGIpKTtyZXR1cm4gZH1pZihkPVZmKGMsYSkpcmV0dXJuIGQ7CnZhciBlPU9iamVjdC5rZXlzKGEpLGY9VWYoZSk7Yy5zaG93SGlkZGVuJiYoZT1PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhhKSk7aWYob2IoYSkmJigwPD1lLmluZGV4T2YoIm1lc3NhZ2UiKXx8MDw9ZS5pbmRleE9mKCJkZXNjcmlwdGlvbiIpKSlyZXR1cm4gQWMoYSk7aWYoMD09PWUubGVuZ3RoKXtpZihXYShhKSlyZXR1cm4gYy5zdHlsaXplKCJbRnVuY3Rpb24iKyhhLm5hbWU/IjogIithLm5hbWU6IiIpKyJdIiwic3BlY2lhbCIpO2lmKFhhKGEpKXJldHVybiBjLnN0eWxpemUoUmVnRXhwLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGEpLCJyZWdleHAiKTtpZihwYihhKSlyZXR1cm4gYy5zdHlsaXplKERhdGUucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYSksImRhdGUiKTtpZihvYihhKSlyZXR1cm4gQWMoYSl9ZD0iIjt2YXIgZz0hMSxoPVsieyIsIn0iXTtVZChhKSYmKGc9ITAsaD1bIlsiLCJdIl0pO1dhKGEpJiYoZD0iIFtGdW5jdGlvbiIrKGEubmFtZT8iOiAiK2EubmFtZToKIiIpKyJdIik7WGEoYSkmJihkPSIgIitSZWdFeHAucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYSkpO3BiKGEpJiYoZD0iICIrRGF0ZS5wcm90b3R5cGUudG9VVENTdHJpbmcuY2FsbChhKSk7b2IoYSkmJihkPSIgIitBYyhhKSk7aWYoMD09PWUubGVuZ3RoJiYoIWd8fDA9PWEubGVuZ3RoKSlyZXR1cm4gaFswXStkK2hbMV07aWYoMD5iKXJldHVybiBYYShhKT9jLnN0eWxpemUoUmVnRXhwLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGEpLCJyZWdleHAiKTpjLnN0eWxpemUoIltPYmplY3RdIiwic3BlY2lhbCIpO2Muc2Vlbi5wdXNoKGEpO2U9Zz9XZihjLGEsYixmLGUpOmUubWFwKGZ1bmN0aW9uKGQpe3JldHVybiBCYyhjLGEsYixmLGQsZyl9KTtjLnNlZW4ucG9wKCk7cmV0dXJuIFhmKGUsZCxoKX1mdW5jdGlvbiBWZihjLGEpe2lmKGxhKGEpKXJldHVybiBjLnN0eWxpemUoInVuZGVmaW5lZCIsInVuZGVmaW5lZCIpO2lmKEphKGEpKXJldHVybiBhPSInIitKU09OLnN0cmluZ2lmeShhKS5yZXBsYWNlKC9eInwiJC9nLAoiIikucmVwbGFjZSgvJy9nLCJcXCciKS5yZXBsYWNlKC9cXCIvZywnIicpKyInIixjLnN0eWxpemUoYSwic3RyaW5nIik7aWYoVmQoYSkpcmV0dXJuIGMuc3R5bGl6ZSgiIithLCJudW1iZXIiKTtpZih6YyhhKSlyZXR1cm4gYy5zdHlsaXplKCIiK2EsImJvb2xlYW4iKTtpZihudWxsPT09YSlyZXR1cm4gYy5zdHlsaXplKCJudWxsIiwibnVsbCIpfWZ1bmN0aW9uIEFjKGMpe3JldHVybiJbIitFcnJvci5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChjKSsiXSJ9ZnVuY3Rpb24gV2YoYyxhLGIsZCxlKXtmb3IodmFyIGY9W10sZz0wLGg9YS5sZW5ndGg7ZzxoOysrZylPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYSxTdHJpbmcoZykpP2YucHVzaChCYyhjLGEsYixkLFN0cmluZyhnKSwhMCkpOmYucHVzaCgiIik7ZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2UubWF0Y2goL15cZCskLyl8fGYucHVzaChCYyhjLGEsYixkLGUsITApKX0pO3JldHVybiBmfWZ1bmN0aW9uIEJjKGMsCmEsYixkLGUsZil7dmFyIGcsaDthPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoYSxlKXx8e3ZhbHVlOmFbZV19O2EuZ2V0P2g9YS5zZXQ/Yy5zdHlsaXplKCJbR2V0dGVyL1NldHRlcl0iLCJzcGVjaWFsIik6Yy5zdHlsaXplKCJbR2V0dGVyXSIsInNwZWNpYWwiKTphLnNldCYmKGg9Yy5zdHlsaXplKCJbU2V0dGVyXSIsInNwZWNpYWwiKSk7T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGQsZSl8fChnPSJbIitlKyJdIik7aHx8KDA+Yy5zZWVuLmluZGV4T2YoYS52YWx1ZSk/KGg9bnVsbD09PWI/T2IoYyxhLnZhbHVlLG51bGwpOk9iKGMsYS52YWx1ZSxiLTEpLC0xPGguaW5kZXhPZigiXG4iKSYmKGg9Zj9oLnNwbGl0KCJcbiIpLm1hcChmdW5jdGlvbihhKXtyZXR1cm4iICAiK2F9KS5qb2luKCJcbiIpLnN1YnN0cigyKToiXG4iK2guc3BsaXQoIlxuIikubWFwKGZ1bmN0aW9uKGEpe3JldHVybiIgICAiK2F9KS5qb2luKCJcbiIpKSk6aD1jLnN0eWxpemUoIltDaXJjdWxhcl0iLAoic3BlY2lhbCIpKTtpZihsYShnKSl7aWYoZiYmZS5tYXRjaCgvXlxkKyQvKSlyZXR1cm4gaDtnPUpTT04uc3RyaW5naWZ5KCIiK2UpO2cubWF0Y2goL14iKFthLXpBLVpfXVthLXpBLVpfMC05XSopIiQvKT8oZz1nLnN1YnN0cigxLGcubGVuZ3RoLTIpLGc9Yy5zdHlsaXplKGcsIm5hbWUiKSk6KGc9Zy5yZXBsYWNlKC8nL2csIlxcJyIpLnJlcGxhY2UoL1xcIi9nLCciJykucmVwbGFjZSgvKF4ifCIkKS9nLCInIiksZz1jLnN0eWxpemUoZywic3RyaW5nIikpfXJldHVybiBnKyI6ICIraH1mdW5jdGlvbiBYZihjLGEsYil7cmV0dXJuIDYwPGMucmVkdWNlKGZ1bmN0aW9uKGEsYyl7Yy5pbmRleE9mKCJcbiIpO3JldHVybiBhK2MucmVwbGFjZSgvXHUwMDFiXFtcZFxkP20vZywiIikubGVuZ3RoKzF9LDApP2JbMF0rKCIiPT09YT8iIjphKyJcbiAiKSsiICIrYy5qb2luKCIsXG4gICIpKyIgIitiWzFdOmJbMF0rYSsiICIrYy5qb2luKCIsICIpKyIgIitiWzFdfWZ1bmN0aW9uIFVkKGMpe3JldHVybiBBcnJheS5pc0FycmF5KGMpfQpmdW5jdGlvbiB6YyhjKXtyZXR1cm4iYm9vbGVhbiI9PT10eXBlb2YgY31mdW5jdGlvbiBWZChjKXtyZXR1cm4ibnVtYmVyIj09PXR5cGVvZiBjfWZ1bmN0aW9uIEphKGMpe3JldHVybiJzdHJpbmciPT09dHlwZW9mIGN9ZnVuY3Rpb24gbGEoYyl7cmV0dXJuIHZvaWQgMD09PWN9ZnVuY3Rpb24gWGEoYyl7cmV0dXJuIHdhKGMpJiYiW29iamVjdCBSZWdFeHBdIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChjKX1mdW5jdGlvbiB3YShjKXtyZXR1cm4ib2JqZWN0Ij09PXR5cGVvZiBjJiZudWxsIT09Y31mdW5jdGlvbiBwYihjKXtyZXR1cm4gd2EoYykmJiJbb2JqZWN0IERhdGVdIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChjKX1mdW5jdGlvbiBvYihjKXtyZXR1cm4gd2EoYykmJigiW29iamVjdCBFcnJvcl0iPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGMpfHxjIGluc3RhbmNlb2YgRXJyb3IpfWZ1bmN0aW9uIFdhKGMpe3JldHVybiJmdW5jdGlvbiI9PT0KdHlwZW9mIGN9ZnVuY3Rpb24gQ2MoYyl7cmV0dXJuIG51bGw9PT1jfHwiYm9vbGVhbiI9PT10eXBlb2YgY3x8Im51bWJlciI9PT10eXBlb2YgY3x8InN0cmluZyI9PT10eXBlb2YgY3x8InN5bWJvbCI9PT10eXBlb2YgY3x8InVuZGVmaW5lZCI9PT10eXBlb2YgY31mdW5jdGlvbiBEYyhjKXtyZXR1cm4gMTA+Yz8iMCIrYy50b1N0cmluZygxMCk6Yy50b1N0cmluZygxMCl9ZnVuY3Rpb24gWWYoKXt2YXIgYz1uZXcgRGF0ZSxhPVtEYyhjLmdldEhvdXJzKCkpLERjKGMuZ2V0TWludXRlcygpKSxEYyhjLmdldFNlY29uZHMoKSldLmpvaW4oIjoiKTtyZXR1cm5bYy5nZXREYXRlKCksWmZbYy5nZXRNb250aCgpXSxhXS5qb2luKCIgIil9ZnVuY3Rpb24gVGQoYyxhKXtpZighYXx8IXdhKGEpKXJldHVybiBjO2Zvcih2YXIgYj1PYmplY3Qua2V5cyhhKSxkPWIubGVuZ3RoO2QtLTspY1tiW2RdXT1hW2JbZF1dO3JldHVybiBjfWZ1bmN0aW9uIFdkKGMsYSl7aWYoYz09PWEpcmV0dXJuIDA7Zm9yKHZhciBiPQpjLmxlbmd0aCxkPWEubGVuZ3RoLGU9MCxmPU1hdGgubWluKGIsZCk7ZTxmOysrZSlpZihjW2VdIT09YVtlXSl7Yj1jW2VdO2Q9YVtlXTticmVha31yZXR1cm4gYjxkPy0xOmQ8Yj8xOjB9ZnVuY3Rpb24gWGQoKXtyZXR1cm4idW5kZWZpbmVkIiE9PXR5cGVvZiBFYz9FYzpFYz1mdW5jdGlvbigpe3JldHVybiJmb28iPT09ZnVuY3Rpb24oKXt9Lm5hbWV9KCl9ZnVuY3Rpb24gWWQoYyl7cmV0dXJuIHBhKGMpfHwiZnVuY3Rpb24iIT09dHlwZW9mIEthLkFycmF5QnVmZmVyPyExOiJmdW5jdGlvbiI9PT10eXBlb2YgQXJyYXlCdWZmZXIuaXNWaWV3P0FycmF5QnVmZmVyLmlzVmlldyhjKTpjP2MgaW5zdGFuY2VvZiBEYXRhVmlld3x8Yy5idWZmZXImJmMuYnVmZmVyIGluc3RhbmNlb2YgQXJyYXlCdWZmZXI/ITA6ITE6ITF9ZnVuY3Rpb24gRShjLGEpe2N8fFMoYywhMCxhLCI9PSIsRmMpfWZ1bmN0aW9uIFpkKGMpe2lmKFdhKGMpKXJldHVybiBYZCgpP2MubmFtZTooYz1jLnRvU3RyaW5nKCkubWF0Y2goJGYpKSYmCmNbMV19ZnVuY3Rpb24gR2MoYyl7dGhpcy5uYW1lPSJBc3NlcnRpb25FcnJvciI7dGhpcy5hY3R1YWw9Yy5hY3R1YWw7dGhpcy5leHBlY3RlZD1jLmV4cGVjdGVkO3RoaXMub3BlcmF0b3I9Yy5vcGVyYXRvcjtjLm1lc3NhZ2U/KHRoaXMubWVzc2FnZT1jLm1lc3NhZ2UsdGhpcy5nZW5lcmF0ZWRNZXNzYWdlPSExKToodGhpcy5tZXNzYWdlPSRkKGFlKHRoaXMuYWN0dWFsKSwxMjgpKyIgIit0aGlzLm9wZXJhdG9yKyIgIiskZChhZSh0aGlzLmV4cGVjdGVkKSwxMjgpLHRoaXMuZ2VuZXJhdGVkTWVzc2FnZT0hMCk7dmFyIGE9Yy5zdGFja1N0YXJ0RnVuY3Rpb258fFM7RXJyb3IuY2FwdHVyZVN0YWNrVHJhY2U/RXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UodGhpcyxhKTooYz1FcnJvcigpLGMuc3RhY2smJihjPWMuc3RhY2ssYT1aZChhKSxhPWMuaW5kZXhPZigiXG4iK2EpLDA8PWEmJihhPWMuaW5kZXhPZigiXG4iLGErMSksYz1jLnN1YnN0cmluZyhhKzEpKSx0aGlzLnN0YWNrPWMpKX1mdW5jdGlvbiAkZChjLAphKXtyZXR1cm4ic3RyaW5nIj09PXR5cGVvZiBjP2MubGVuZ3RoPGE/YzpjLnNsaWNlKDAsYSk6Y31mdW5jdGlvbiBhZShjKXtpZihYZCgpfHwhV2EoYykpcmV0dXJuIGFhKGMpO2M9WmQoYyk7cmV0dXJuIltGdW5jdGlvbiIrKGM/IjogIitjOiIiKSsiXSJ9ZnVuY3Rpb24gUyhjLGEsYixkLGUpe3Rocm93IG5ldyBHYyh7bWVzc2FnZTpiLGFjdHVhbDpjLGV4cGVjdGVkOmEsb3BlcmF0b3I6ZCxzdGFja1N0YXJ0RnVuY3Rpb246ZX0pO31mdW5jdGlvbiBGYyhjLGEpe2N8fFMoYywhMCxhLCI9PSIsRmMpfWZ1bmN0aW9uIGJlKGMsYSxiKXtjIT1hJiZTKGMsYSxiLCI9PSIsYmUpfWZ1bmN0aW9uIGNlKGMsYSxiKXtjPT1hJiZTKGMsYSxiLCIhPSIsY2UpfWZ1bmN0aW9uIGRlKGMsYSxiKXtZYShjLGEsITEpfHxTKGMsYSxiLCJkZWVwRXF1YWwiLGRlKX1mdW5jdGlvbiBlZShjLGEsYil7WWEoYyxhLCEwKXx8UyhjLGEsYiwiZGVlcFN0cmljdEVxdWFsIixlZSl9ZnVuY3Rpb24gWWEoYyxhLGIsCmQpe2lmKGM9PT1hKXJldHVybiEwO2lmKHBhKGMpJiZwYShhKSlyZXR1cm4gMD09PVdkKGMsYSk7aWYocGIoYykmJnBiKGEpKXJldHVybiBjLmdldFRpbWUoKT09PWEuZ2V0VGltZSgpO2lmKFhhKGMpJiZYYShhKSlyZXR1cm4gYy5zb3VyY2U9PT1hLnNvdXJjZSYmYy5nbG9iYWw9PT1hLmdsb2JhbCYmYy5tdWx0aWxpbmU9PT1hLm11bHRpbGluZSYmYy5sYXN0SW5kZXg9PT1hLmxhc3RJbmRleCYmYy5pZ25vcmVDYXNlPT09YS5pZ25vcmVDYXNlO2lmKG51bGwhPT1jJiYib2JqZWN0Ij09PXR5cGVvZiBjfHxudWxsIT09YSYmIm9iamVjdCI9PT10eXBlb2YgYSl7aWYoIVlkKGMpfHwhWWQoYSl8fE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChjKSE9PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhKXx8YyBpbnN0YW5jZW9mIEZsb2F0MzJBcnJheXx8YyBpbnN0YW5jZW9mIEZsb2F0NjRBcnJheSl7aWYocGEoYykhPT1wYShhKSlyZXR1cm4hMTtkPWR8fHthY3R1YWw6W10sCmV4cGVjdGVkOltdfTt2YXIgZT1kLmFjdHVhbC5pbmRleE9mKGMpO2lmKC0xIT09ZSYmZT09PWQuZXhwZWN0ZWQuaW5kZXhPZihhKSlyZXR1cm4hMDtkLmFjdHVhbC5wdXNoKGMpO2QuZXhwZWN0ZWQucHVzaChhKTtyZXR1cm4gYWcoYyxhLGIsZCl9cmV0dXJuIDA9PT1XZChuZXcgVWludDhBcnJheShjLmJ1ZmZlciksbmV3IFVpbnQ4QXJyYXkoYS5idWZmZXIpKX1yZXR1cm4gYj9jPT09YTpjPT1hfWZ1bmN0aW9uIGFnKGMsYSxiLGQpe2lmKG51bGw9PT1jfHx2b2lkIDA9PT1jfHxudWxsPT09YXx8dm9pZCAwPT09YSlyZXR1cm4hMTtpZihDYyhjKXx8Q2MoYSkpcmV0dXJuIGM9PT1hO2lmKGImJk9iamVjdC5nZXRQcm90b3R5cGVPZihjKSE9PU9iamVjdC5nZXRQcm90b3R5cGVPZihhKSlyZXR1cm4hMTt2YXIgZT0iW29iamVjdCBBcmd1bWVudHNdIj09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGMpLGY9IltvYmplY3QgQXJndW1lbnRzXSI9PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhKTsKaWYoZSYmIWZ8fCFlJiZmKXJldHVybiExO2lmKGUpcmV0dXJuIGM9ZmUuY2FsbChjKSxhPWZlLmNhbGwoYSksWWEoYyxhLGIpO2U9Z2UoYyk7dmFyIGc9Z2UoYSk7aWYoZS5sZW5ndGghPT1nLmxlbmd0aClyZXR1cm4hMTtlLnNvcnQoKTtnLnNvcnQoKTtmb3IoZj1lLmxlbmd0aC0xOzA8PWY7Zi0tKWlmKGVbZl0hPT1nW2ZdKXJldHVybiExO2ZvcihmPWUubGVuZ3RoLTE7MDw9ZjtmLS0paWYoZz1lW2ZdLCFZYShjW2ddLGFbZ10sYixkKSlyZXR1cm4hMTtyZXR1cm4hMH1mdW5jdGlvbiBoZShjLGEsYil7WWEoYyxhLCExKSYmUyhjLGEsYiwibm90RGVlcEVxdWFsIixoZSl9ZnVuY3Rpb24gaWUoYyxhLGIpe1lhKGMsYSwhMCkmJlMoYyxhLGIsIm5vdERlZXBTdHJpY3RFcXVhbCIsaWUpfWZ1bmN0aW9uIGplKGMsYSxiKXtjIT09YSYmUyhjLGEsYiwiPT09IixqZSl9ZnVuY3Rpb24ga2UoYyxhLGIpe2M9PT1hJiZTKGMsYSxiLCIhPT0iLGtlKX1mdW5jdGlvbiBsZShjLGEpe2lmKCFjfHwhYSlyZXR1cm4hMTsKaWYoIltvYmplY3QgUmVnRXhwXSI9PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhKSlyZXR1cm4gYS50ZXN0KGMpO3RyeXtpZihjIGluc3RhbmNlb2YgYSlyZXR1cm4hMH1jYXRjaChiKXt9cmV0dXJuIEVycm9yLmlzUHJvdG90eXBlT2YoYSk/ITE6ITA9PT1hLmNhbGwoe30sYyl9ZnVuY3Rpb24gbWUoYyxhLGIsZCl7aWYoImZ1bmN0aW9uIiE9PXR5cGVvZiBhKXRocm93IG5ldyBUeXBlRXJyb3IoJyJibG9jayIgYXJndW1lbnQgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7InN0cmluZyI9PT10eXBlb2YgYiYmKGQ9YixiPW51bGwpO3RyeXthKCl9Y2F0Y2goaCl7dmFyIGU9aH1hPWU7ZD0oYiYmYi5uYW1lPyIgKCIrYi5uYW1lKyIpLiI6Ii4iKSsoZD8iICIrZDoiLiIpO2MmJiFhJiZTKGEsYiwiTWlzc2luZyBleHBlY3RlZCBleGNlcHRpb24iK2QpO2U9InN0cmluZyI9PT10eXBlb2YgZDt2YXIgZj0hYyYmb2IoYSksZz0hYyYmYSYmIWI7KGYmJmUmJmxlKGEsYil8fGcpJiZTKGEsCmIsIkdvdCB1bndhbnRlZCBleGNlcHRpb24iK2QpO2lmKGMmJmEmJmImJiFsZShhLGIpfHwhYyYmYSl0aHJvdyBhO31mdW5jdGlvbiBiZyhjLGEpe2Zvcih2YXIgYj0wLGQ9Yy5sZW5ndGgtMTswPD1kO2QtLSl7dmFyIGU9Y1tkXTsiLiI9PT1lP2Muc3BsaWNlKGQsMSk6Ii4uIj09PWU/KGMuc3BsaWNlKGQsMSksYisrKTpiJiYoYy5zcGxpY2UoZCwxKSxiLS0pfWlmKGEpZm9yKDtiLS07YiljLnVuc2hpZnQoIi4uIik7cmV0dXJuIGN9ZnVuY3Rpb24gSGMoKXtmb3IodmFyIGM9IiIsYT0hMSxiPWFyZ3VtZW50cy5sZW5ndGgtMTstMTw9YiYmIWE7Yi0tKXt2YXIgZD0wPD1iP2FyZ3VtZW50c1tiXToiLyI7aWYoInN0cmluZyIhPT10eXBlb2YgZCl0aHJvdyBuZXcgVHlwZUVycm9yKCJBcmd1bWVudHMgdG8gcGF0aC5yZXNvbHZlIG11c3QgYmUgc3RyaW5ncyIpO2QmJihjPWQrIi8iK2MsYT0iLyI9PT1kLmNoYXJBdCgwKSl9Yz1iZyhjZyhjLnNwbGl0KCIvIiksZnVuY3Rpb24oYSl7cmV0dXJuISFhfSksCiFhKS5qb2luKCIvIik7cmV0dXJuKGE/Ii8iOiIiKStjfHwiLiJ9ZnVuY3Rpb24gUGIoYyxhKXtmdW5jdGlvbiBiKGEpe2Zvcih2YXIgYz0wO2M8YS5sZW5ndGgmJiIiPT09YVtjXTtjKyspO2Zvcih2YXIgYj1hLmxlbmd0aC0xOzA8PWImJiIiPT09YVtiXTtiLS0pO3JldHVybiBjPmI/W106YS5zbGljZShjLGItYysxKX1jPUhjKGMpLnN1YnN0cigxKTthPUhjKGEpLnN1YnN0cigxKTtjPWIoYy5zcGxpdCgiLyIpKTthPWIoYS5zcGxpdCgiLyIpKTtmb3IodmFyIGQ9TWF0aC5taW4oYy5sZW5ndGgsYS5sZW5ndGgpLGU9ZCxmPTA7ZjxkO2YrKylpZihjW2ZdIT09YVtmXSl7ZT1mO2JyZWFrfWQ9W107Zm9yKGY9ZTtmPGMubGVuZ3RoO2YrKylkLnB1c2goIi4uIik7ZD1kLmNvbmNhdChhLnNsaWNlKGUpKTtyZXR1cm4gZC5qb2luKCIvIil9ZnVuY3Rpb24gY2coYyxhKXtpZihjLmZpbHRlcilyZXR1cm4gYy5maWx0ZXIoYSk7Zm9yKHZhciBiPVtdLGQ9MDtkPGMubGVuZ3RoO2QrKylhKGNbZF0sCmQsYykmJmIucHVzaChjW2RdKTtyZXR1cm4gYn1mdW5jdGlvbiBxYSgpe31mdW5jdGlvbiB4KCl7eC5pbml0LmNhbGwodGhpcyl9ZnVuY3Rpb24gbmUoYyxhLGIsZCl7dmFyIGU7aWYoImZ1bmN0aW9uIiE9PXR5cGVvZiBiKXRocm93IG5ldyBUeXBlRXJyb3IoJyJsaXN0ZW5lciIgYXJndW1lbnQgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7aWYoZT1jLl9ldmVudHMpe2UubmV3TGlzdGVuZXImJihjLmVtaXQoIm5ld0xpc3RlbmVyIixhLGIubGlzdGVuZXI/Yi5saXN0ZW5lcjpiKSxlPWMuX2V2ZW50cyk7dmFyIGY9ZVthXX1lbHNlIGU9Yy5fZXZlbnRzPW5ldyBxYSxjLl9ldmVudHNDb3VudD0wO2Y/KCJmdW5jdGlvbiI9PT10eXBlb2YgZj9mPWVbYV09ZD9bYixmXTpbZixiXTpkP2YudW5zaGlmdChiKTpmLnB1c2goYiksZi53YXJuZWR8fChiPXZvaWQgMD09PWMuX21heExpc3RlbmVycz94LmRlZmF1bHRNYXhMaXN0ZW5lcnM6Yy5fbWF4TGlzdGVuZXJzKSYmMDxiJiZmLmxlbmd0aD5iJiYoZi53YXJuZWQ9CiEwLGI9RXJyb3IoIlBvc3NpYmxlIEV2ZW50RW1pdHRlciBtZW1vcnkgbGVhayBkZXRlY3RlZC4gIitmLmxlbmd0aCsiICIrYSsiIGxpc3RlbmVycyBhZGRlZC4gVXNlIGVtaXR0ZXIuc2V0TWF4TGlzdGVuZXJzKCkgdG8gaW5jcmVhc2UgbGltaXQiKSxiLm5hbWU9Ik1heExpc3RlbmVyc0V4Y2VlZGVkV2FybmluZyIsYi5lbWl0dGVyPWMsYi50eXBlPWEsYi5jb3VudD1mLmxlbmd0aCwiZnVuY3Rpb24iPT09dHlwZW9mIGNvbnNvbGUud2Fybj9jb25zb2xlLndhcm4oYik6Y29uc29sZS5sb2coYikpKTooZVthXT1iLCsrYy5fZXZlbnRzQ291bnQpO3JldHVybiBjfWZ1bmN0aW9uIG9lKGMsYSxiKXtmdW5jdGlvbiBkKCl7Yy5yZW1vdmVMaXN0ZW5lcihhLGQpO2V8fChlPSEwLGIuYXBwbHkoYyxhcmd1bWVudHMpKX12YXIgZT0hMTtkLmxpc3RlbmVyPWI7cmV0dXJuIGR9ZnVuY3Rpb24gcGUoYyl7dmFyIGE9dGhpcy5fZXZlbnRzO2lmKGEpe2M9YVtjXTtpZigiZnVuY3Rpb24iPT09dHlwZW9mIGMpcmV0dXJuIDE7CmlmKGMpcmV0dXJuIGMubGVuZ3RofXJldHVybiAwfWZ1bmN0aW9uIHFiKGMsYSl7Zm9yKHZhciBiPUFycmF5KGEpO2EtLTspYlthXT1jW2FdO3JldHVybiBifWZ1bmN0aW9uIExhKCl7dGhpcy50YWlsPXRoaXMuaGVhZD1udWxsO3RoaXMubGVuZ3RoPTB9ZnVuY3Rpb24gcmIoYyl7dGhpcy5lbmNvZGluZz0oY3x8InV0ZjgiKS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL1stX10vLCIiKTtpZihjJiYhZGcoYykpdGhyb3cgRXJyb3IoIlVua25vd24gZW5jb2Rpbmc6ICIrYyk7c3dpdGNoKHRoaXMuZW5jb2Rpbmcpe2Nhc2UgInV0ZjgiOnRoaXMuc3Vycm9nYXRlU2l6ZT0zO2JyZWFrO2Nhc2UgInVjczIiOmNhc2UgInV0ZjE2bGUiOnRoaXMuc3Vycm9nYXRlU2l6ZT0yO3RoaXMuZGV0ZWN0SW5jb21wbGV0ZUNoYXI9ZWc7YnJlYWs7Y2FzZSAiYmFzZTY0Ijp0aGlzLnN1cnJvZ2F0ZVNpemU9Mzt0aGlzLmRldGVjdEluY29tcGxldGVDaGFyPWZnO2JyZWFrO2RlZmF1bHQ6dGhpcy53cml0ZT1nZzsKcmV0dXJufXRoaXMuY2hhckJ1ZmZlcj1uZXcgbCg2KTt0aGlzLmNoYXJMZW5ndGg9dGhpcy5jaGFyUmVjZWl2ZWQ9MH1mdW5jdGlvbiBnZyhjKXtyZXR1cm4gYy50b1N0cmluZyh0aGlzLmVuY29kaW5nKX1mdW5jdGlvbiBlZyhjKXt0aGlzLmNoYXJMZW5ndGg9KHRoaXMuY2hhclJlY2VpdmVkPWMubGVuZ3RoJTIpPzI6MH1mdW5jdGlvbiBmZyhjKXt0aGlzLmNoYXJMZW5ndGg9KHRoaXMuY2hhclJlY2VpdmVkPWMubGVuZ3RoJTMpPzM6MH1mdW5jdGlvbiBoZyhjLGEsYil7aWYoImZ1bmN0aW9uIj09PXR5cGVvZiBjLnByZXBlbmRMaXN0ZW5lcilyZXR1cm4gYy5wcmVwZW5kTGlzdGVuZXIoYSxiKTtpZihjLl9ldmVudHMmJmMuX2V2ZW50c1thXSlBcnJheS5pc0FycmF5KGMuX2V2ZW50c1thXSk/Yy5fZXZlbnRzW2FdLnVuc2hpZnQoYik6Yy5fZXZlbnRzW2FdPVtiLGMuX2V2ZW50c1thXV07ZWxzZSBjLm9uKGEsYil9ZnVuY3Rpb24gcWUoYyxhKXtjPWN8fHt9O3RoaXMub2JqZWN0TW9kZT0KISFjLm9iamVjdE1vZGU7YSBpbnN0YW5jZW9mIFUmJih0aGlzLm9iamVjdE1vZGU9dGhpcy5vYmplY3RNb2RlfHwhIWMucmVhZGFibGVPYmplY3RNb2RlKTthPWMuaGlnaFdhdGVyTWFyazt2YXIgYj10aGlzLm9iamVjdE1vZGU/MTY6MTYzODQ7dGhpcy5oaWdoV2F0ZXJNYXJrPWF8fDA9PT1hP2E6Yjt0aGlzLmhpZ2hXYXRlck1hcms9fn50aGlzLmhpZ2hXYXRlck1hcms7dGhpcy5idWZmZXI9bmV3IExhO3RoaXMubGVuZ3RoPTA7dGhpcy5waXBlcz1udWxsO3RoaXMucGlwZXNDb3VudD0wO3RoaXMuZmxvd2luZz1udWxsO3RoaXMucmVhZGluZz10aGlzLmVuZEVtaXR0ZWQ9dGhpcy5lbmRlZD0hMTt0aGlzLnN5bmM9ITA7dGhpcy5yZXN1bWVTY2hlZHVsZWQ9dGhpcy5yZWFkYWJsZUxpc3RlbmluZz10aGlzLmVtaXR0ZWRSZWFkYWJsZT10aGlzLm5lZWRSZWFkYWJsZT0hMTt0aGlzLmRlZmF1bHRFbmNvZGluZz1jLmRlZmF1bHRFbmNvZGluZ3x8InV0ZjgiO3RoaXMucmFuT3V0PSExO3RoaXMuYXdhaXREcmFpbj0KMDt0aGlzLnJlYWRpbmdNb3JlPSExO3RoaXMuZW5jb2Rpbmc9dGhpcy5kZWNvZGVyPW51bGw7Yy5lbmNvZGluZyYmKHRoaXMuZGVjb2Rlcj1uZXcgcmIoYy5lbmNvZGluZyksdGhpcy5lbmNvZGluZz1jLmVuY29kaW5nKX1mdW5jdGlvbiB5KGMpe2lmKCEodGhpcyBpbnN0YW5jZW9mIHkpKXJldHVybiBuZXcgeShjKTt0aGlzLl9yZWFkYWJsZVN0YXRlPW5ldyBxZShjLHRoaXMpO3RoaXMucmVhZGFibGU9ITA7YyYmImZ1bmN0aW9uIj09PXR5cGVvZiBjLnJlYWQmJih0aGlzLl9yZWFkPWMucmVhZCk7eC5jYWxsKHRoaXMpfWZ1bmN0aW9uIHJlKGMsYSxiLGQsZSl7dmFyIGY9YixnPW51bGw7cGEoZil8fCJzdHJpbmciPT09dHlwZW9mIGZ8fG51bGw9PT1mfHx2b2lkIDA9PT1mfHxhLm9iamVjdE1vZGV8fChnPW5ldyBUeXBlRXJyb3IoIkludmFsaWQgbm9uLXN0cmluZy9idWZmZXIgY2h1bmsiKSk7aWYoZj1nKWMuZW1pdCgiZXJyb3IiLGYpO2Vsc2UgaWYobnVsbD09PWIpYS5yZWFkaW5nPQohMSxhLmVuZGVkfHwoYS5kZWNvZGVyJiYoYj1hLmRlY29kZXIuZW5kKCkpJiZiLmxlbmd0aCYmKGEuYnVmZmVyLnB1c2goYiksYS5sZW5ndGgrPWEub2JqZWN0TW9kZT8xOmIubGVuZ3RoKSxhLmVuZGVkPSEwLFFiKGMpKTtlbHNlIGlmKGEub2JqZWN0TW9kZXx8YiYmMDxiLmxlbmd0aClpZihhLmVuZGVkJiYhZSljLmVtaXQoImVycm9yIixFcnJvcigic3RyZWFtLnB1c2goKSBhZnRlciBFT0YiKSk7ZWxzZSBpZihhLmVuZEVtaXR0ZWQmJmUpYy5lbWl0KCJlcnJvciIsRXJyb3IoInN0cmVhbS51bnNoaWZ0KCkgYWZ0ZXIgZW5kIGV2ZW50IikpO2Vsc2V7aWYoYS5kZWNvZGVyJiYhZSYmIWQpe2I9YS5kZWNvZGVyLndyaXRlKGIpO3ZhciBoPSFhLm9iamVjdE1vZGUmJjA9PT1iLmxlbmd0aH1lfHwoYS5yZWFkaW5nPSExKTtofHwoYS5mbG93aW5nJiYwPT09YS5sZW5ndGgmJiFhLnN5bmM/KGMuZW1pdCgiZGF0YSIsYiksYy5yZWFkKDApKTooYS5sZW5ndGgrPWEub2JqZWN0TW9kZT8xOmIubGVuZ3RoLAplP2EuYnVmZmVyLnVuc2hpZnQoYik6YS5idWZmZXIucHVzaChiKSxhLm5lZWRSZWFkYWJsZSYmUWIoYykpKTthLnJlYWRpbmdNb3JlfHwoYS5yZWFkaW5nTW9yZT0hMCxYKGlnLGMsYSkpfWVsc2UgZXx8KGEucmVhZGluZz0hMSk7cmV0dXJuIWEuZW5kZWQmJihhLm5lZWRSZWFkYWJsZXx8YS5sZW5ndGg8YS5oaWdoV2F0ZXJNYXJrfHwwPT09YS5sZW5ndGgpfWZ1bmN0aW9uIHNlKGMsYSl7aWYoMD49Y3x8MD09PWEubGVuZ3RoJiZhLmVuZGVkKXJldHVybiAwO2lmKGEub2JqZWN0TW9kZSlyZXR1cm4gMTtpZihjIT09YylyZXR1cm4gYS5mbG93aW5nJiZhLmxlbmd0aD9hLmJ1ZmZlci5oZWFkLmRhdGEubGVuZ3RoOmEubGVuZ3RoO2lmKGM+YS5oaWdoV2F0ZXJNYXJrKXt2YXIgYj1jOzgzODg2MDg8PWI/Yj04Mzg4NjA4OihiLS0sYnw9Yj4+PjEsYnw9Yj4+PjIsYnw9Yj4+PjQsYnw9Yj4+PjgsYnw9Yj4+PjE2LGIrKyk7YS5oaWdoV2F0ZXJNYXJrPWJ9cmV0dXJuIGM8PWEubGVuZ3RoP2M6CmEuZW5kZWQ/YS5sZW5ndGg6KGEubmVlZFJlYWRhYmxlPSEwLDApfWZ1bmN0aW9uIFFiKGMpe3ZhciBhPWMuX3JlYWRhYmxlU3RhdGU7YS5uZWVkUmVhZGFibGU9ITE7YS5lbWl0dGVkUmVhZGFibGV8fCh6KCJlbWl0UmVhZGFibGUiLGEuZmxvd2luZyksYS5lbWl0dGVkUmVhZGFibGU9ITAsYS5zeW5jP1godGUsYyk6dGUoYykpfWZ1bmN0aW9uIHRlKGMpe3ooImVtaXQgcmVhZGFibGUiKTtjLmVtaXQoInJlYWRhYmxlIik7SWMoYyl9ZnVuY3Rpb24gaWcoYyxhKXtmb3IodmFyIGI9YS5sZW5ndGg7IWEucmVhZGluZyYmIWEuZmxvd2luZyYmIWEuZW5kZWQmJmEubGVuZ3RoPGEuaGlnaFdhdGVyTWFyayYmKHooIm1heWJlUmVhZE1vcmUgcmVhZCAwIiksYy5yZWFkKDApLGIhPT1hLmxlbmd0aCk7KWI9YS5sZW5ndGg7YS5yZWFkaW5nTW9yZT0hMX1mdW5jdGlvbiBqZyhjKXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgYT1jLl9yZWFkYWJsZVN0YXRlO3ooInBpcGVPbkRyYWluIixhLmF3YWl0RHJhaW4pOwphLmF3YWl0RHJhaW4mJmEuYXdhaXREcmFpbi0tOzA9PT1hLmF3YWl0RHJhaW4mJmMubGlzdGVuZXJzKCJkYXRhIikubGVuZ3RoJiYoYS5mbG93aW5nPSEwLEljKGMpKX19ZnVuY3Rpb24ga2coYyl7eigicmVhZGFibGUgbmV4dHRpY2sgcmVhZCAwIik7Yy5yZWFkKDApfWZ1bmN0aW9uIGxnKGMsYSl7YS5yZWFkaW5nfHwoeigicmVzdW1lIHJlYWQgMCIpLGMucmVhZCgwKSk7YS5yZXN1bWVTY2hlZHVsZWQ9ITE7YS5hd2FpdERyYWluPTA7Yy5lbWl0KCJyZXN1bWUiKTtJYyhjKTthLmZsb3dpbmcmJiFhLnJlYWRpbmcmJmMucmVhZCgwKX1mdW5jdGlvbiBJYyhjKXt2YXIgYT1jLl9yZWFkYWJsZVN0YXRlO2Zvcih6KCJmbG93IixhLmZsb3dpbmcpO2EuZmxvd2luZyYmbnVsbCE9PWMucmVhZCgpOyk7fWZ1bmN0aW9uIHVlKGMsYSl7aWYoMD09PWEubGVuZ3RoKXJldHVybiBudWxsO2lmKGEub2JqZWN0TW9kZSl2YXIgYj1hLmJ1ZmZlci5zaGlmdCgpO2Vsc2UgaWYoIWN8fGM+PWEubGVuZ3RoKWI9CmEuZGVjb2Rlcj9hLmJ1ZmZlci5qb2luKCIiKToxPT09YS5idWZmZXIubGVuZ3RoP2EuYnVmZmVyLmhlYWQuZGF0YTphLmJ1ZmZlci5jb25jYXQoYS5sZW5ndGgpLGEuYnVmZmVyLmNsZWFyKCk7ZWxzZXtiPWEuYnVmZmVyO2E9YS5kZWNvZGVyO2lmKGM8Yi5oZWFkLmRhdGEubGVuZ3RoKWE9Yi5oZWFkLmRhdGEuc2xpY2UoMCxjKSxiLmhlYWQuZGF0YT1iLmhlYWQuZGF0YS5zbGljZShjKTtlbHNle2lmKGM9PT1iLmhlYWQuZGF0YS5sZW5ndGgpYj1iLnNoaWZ0KCk7ZWxzZSBpZihhKXthPWIuaGVhZDt2YXIgZD0xLGU9YS5kYXRhO2ZvcihjLT1lLmxlbmd0aDthPWEubmV4dDspe3ZhciBmPWEuZGF0YSxnPWM+Zi5sZW5ndGg/Zi5sZW5ndGg6YztlPWc9PT1mLmxlbmd0aD9lK2Y6ZStmLnNsaWNlKDAsYyk7Yy09ZztpZigwPT09Yyl7Zz09PWYubGVuZ3RoPygrK2QsYi5oZWFkPWEubmV4dD9hLm5leHQ6Yi50YWlsPW51bGwpOihiLmhlYWQ9YSxhLmRhdGE9Zi5zbGljZShnKSk7YnJlYWt9KytkfWIubGVuZ3RoLT0KZDtiPWV9ZWxzZXthPWwuYWxsb2NVbnNhZmUoYyk7ZD1iLmhlYWQ7ZT0xO2QuZGF0YS5jb3B5KGEpO2ZvcihjLT1kLmRhdGEubGVuZ3RoO2Q9ZC5uZXh0Oyl7Zj1kLmRhdGE7Zz1jPmYubGVuZ3RoP2YubGVuZ3RoOmM7Zi5jb3B5KGEsYS5sZW5ndGgtYywwLGcpO2MtPWc7aWYoMD09PWMpe2c9PT1mLmxlbmd0aD8oKytlLGIuaGVhZD1kLm5leHQ/ZC5uZXh0OmIudGFpbD1udWxsKTooYi5oZWFkPWQsZC5kYXRhPWYuc2xpY2UoZykpO2JyZWFrfSsrZX1iLmxlbmd0aC09ZTtiPWF9YT1ifWI9YX1yZXR1cm4gYn1mdW5jdGlvbiBKYyhjKXt2YXIgYT1jLl9yZWFkYWJsZVN0YXRlO2lmKDA8YS5sZW5ndGgpdGhyb3cgRXJyb3IoJyJlbmRSZWFkYWJsZSgpIiBjYWxsZWQgb24gbm9uLWVtcHR5IHN0cmVhbScpO2EuZW5kRW1pdHRlZHx8KGEuZW5kZWQ9ITAsWChtZyxhLGMpKX1mdW5jdGlvbiBtZyhjLGEpe2MuZW5kRW1pdHRlZHx8MCE9PWMubGVuZ3RofHwoYy5lbmRFbWl0dGVkPSEwLGEucmVhZGFibGU9CiExLGEuZW1pdCgiZW5kIikpfWZ1bmN0aW9uIG5nKGMsYSl7Zm9yKHZhciBiPTAsZD1jLmxlbmd0aDtiPGQ7YisrKWEoY1tiXSxiKX1mdW5jdGlvbiB2ZShjLGEpe2Zvcih2YXIgYj0wLGQ9Yy5sZW5ndGg7YjxkO2IrKylpZihjW2JdPT09YSlyZXR1cm4gYjtyZXR1cm4tMX1mdW5jdGlvbiBvZygpe31mdW5jdGlvbiBwZyhjLGEsYil7dGhpcy5jaHVuaz1jO3RoaXMuZW5jb2Rpbmc9YTt0aGlzLmNhbGxiYWNrPWI7dGhpcy5uZXh0PW51bGx9ZnVuY3Rpb24gS2MoYyxhKXtPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywiYnVmZmVyIix7Z2V0OnhjKGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0QnVmZmVyKCl9LCJfd3JpdGFibGVTdGF0ZS5idWZmZXIgaXMgZGVwcmVjYXRlZC4gVXNlIF93cml0YWJsZVN0YXRlLmdldEJ1ZmZlciBpbnN0ZWFkLiIpfSk7Yz1jfHx7fTt0aGlzLm9iamVjdE1vZGU9ISFjLm9iamVjdE1vZGU7YSBpbnN0YW5jZW9mIFUmJih0aGlzLm9iamVjdE1vZGU9dGhpcy5vYmplY3RNb2RlfHwKISFjLndyaXRhYmxlT2JqZWN0TW9kZSk7dmFyIGI9Yy5oaWdoV2F0ZXJNYXJrLGQ9dGhpcy5vYmplY3RNb2RlPzE2OjE2Mzg0O3RoaXMuaGlnaFdhdGVyTWFyaz1ifHwwPT09Yj9iOmQ7dGhpcy5oaWdoV2F0ZXJNYXJrPX5+dGhpcy5oaWdoV2F0ZXJNYXJrO3RoaXMuZmluaXNoZWQ9dGhpcy5lbmRlZD10aGlzLmVuZGluZz10aGlzLm5lZWREcmFpbj0hMTt0aGlzLmRlY29kZVN0cmluZ3M9ITEhPT1jLmRlY29kZVN0cmluZ3M7dGhpcy5kZWZhdWx0RW5jb2Rpbmc9Yy5kZWZhdWx0RW5jb2Rpbmd8fCJ1dGY4Ijt0aGlzLmxlbmd0aD0wO3RoaXMud3JpdGluZz0hMTt0aGlzLmNvcmtlZD0wO3RoaXMuc3luYz0hMDt0aGlzLmJ1ZmZlclByb2Nlc3Npbmc9ITE7dGhpcy5vbndyaXRlPWZ1bmN0aW9uKGMpe3ZhciBiPWEuX3dyaXRhYmxlU3RhdGUsZD1iLnN5bmMsZT1iLndyaXRlY2I7Yi53cml0aW5nPSExO2Iud3JpdGVjYj1udWxsO2IubGVuZ3RoLT1iLndyaXRlbGVuO2Iud3JpdGVsZW49MDtjPwooLS1iLnBlbmRpbmdjYixkP1goZSxjKTplKGMpLGEuX3dyaXRhYmxlU3RhdGUuZXJyb3JFbWl0dGVkPSEwLGEuZW1pdCgiZXJyb3IiLGMpKTooKGM9d2UoYikpfHxiLmNvcmtlZHx8Yi5idWZmZXJQcm9jZXNzaW5nfHwhYi5idWZmZXJlZFJlcXVlc3R8fHhlKGEsYiksZD9YKHllLGEsYixjLGUpOnllKGEsYixjLGUpKX07dGhpcy53cml0ZWNiPW51bGw7dGhpcy53cml0ZWxlbj0wO3RoaXMubGFzdEJ1ZmZlcmVkUmVxdWVzdD10aGlzLmJ1ZmZlcmVkUmVxdWVzdD1udWxsO3RoaXMucGVuZGluZ2NiPTA7dGhpcy5lcnJvckVtaXR0ZWQ9dGhpcy5wcmVmaW5pc2hlZD0hMTt0aGlzLmJ1ZmZlcmVkUmVxdWVzdENvdW50PTA7dGhpcy5jb3JrZWRSZXF1ZXN0c0ZyZWU9bmV3IHplKHRoaXMpfWZ1bmN0aW9uIEwoYyl7aWYoISh0aGlzIGluc3RhbmNlb2YgTHx8dGhpcyBpbnN0YW5jZW9mIFUpKXJldHVybiBuZXcgTChjKTt0aGlzLl93cml0YWJsZVN0YXRlPW5ldyBLYyhjLHRoaXMpO3RoaXMud3JpdGFibGU9CiEwO2MmJigiZnVuY3Rpb24iPT09dHlwZW9mIGMud3JpdGUmJih0aGlzLl93cml0ZT1jLndyaXRlKSwiZnVuY3Rpb24iPT09dHlwZW9mIGMud3JpdGV2JiYodGhpcy5fd3JpdGV2PWMud3JpdGV2KSk7eC5jYWxsKHRoaXMpfWZ1bmN0aW9uIExjKGMsYSxiLGQsZSxmLGcpe2Eud3JpdGVsZW49ZDthLndyaXRlY2I9ZzthLndyaXRpbmc9ITA7YS5zeW5jPSEwO2I/Yy5fd3JpdGV2KGUsYS5vbndyaXRlKTpjLl93cml0ZShlLGYsYS5vbndyaXRlKTthLnN5bmM9ITF9ZnVuY3Rpb24geWUoYyxhLGIsZCl7IWImJjA9PT1hLmxlbmd0aCYmYS5uZWVkRHJhaW4mJihhLm5lZWREcmFpbj0hMSxjLmVtaXQoImRyYWluIikpO2EucGVuZGluZ2NiLS07ZCgpO0FlKGMsYSl9ZnVuY3Rpb24geGUoYyxhKXthLmJ1ZmZlclByb2Nlc3Npbmc9ITA7dmFyIGI9YS5idWZmZXJlZFJlcXVlc3Q7aWYoYy5fd3JpdGV2JiZiJiZiLm5leHQpe3ZhciBkPUFycmF5KGEuYnVmZmVyZWRSZXF1ZXN0Q291bnQpLGU9YS5jb3JrZWRSZXF1ZXN0c0ZyZWU7CmUuZW50cnk9Yjtmb3IodmFyIGY9MDtiOylkW2ZdPWIsYj1iLm5leHQsZis9MTtMYyhjLGEsITAsYS5sZW5ndGgsZCwiIixlLmZpbmlzaCk7YS5wZW5kaW5nY2IrKzthLmxhc3RCdWZmZXJlZFJlcXVlc3Q9bnVsbDtlLm5leHQ/KGEuY29ya2VkUmVxdWVzdHNGcmVlPWUubmV4dCxlLm5leHQ9bnVsbCk6YS5jb3JrZWRSZXF1ZXN0c0ZyZWU9bmV3IHplKGEpfWVsc2V7Zm9yKDtiJiYoZD1iLmNodW5rLExjKGMsYSwhMSxhLm9iamVjdE1vZGU/MTpkLmxlbmd0aCxkLGIuZW5jb2RpbmcsYi5jYWxsYmFjayksYj1iLm5leHQsIWEud3JpdGluZyk7KTtudWxsPT09YiYmKGEubGFzdEJ1ZmZlcmVkUmVxdWVzdD1udWxsKX1hLmJ1ZmZlcmVkUmVxdWVzdENvdW50PTA7YS5idWZmZXJlZFJlcXVlc3Q9YjthLmJ1ZmZlclByb2Nlc3Npbmc9ITF9ZnVuY3Rpb24gd2UoYyl7cmV0dXJuIGMuZW5kaW5nJiYwPT09Yy5sZW5ndGgmJm51bGw9PT1jLmJ1ZmZlcmVkUmVxdWVzdCYmIWMuZmluaXNoZWQmJiFjLndyaXRpbmd9CmZ1bmN0aW9uIEFlKGMsYSl7dmFyIGI9d2UoYSk7YiYmKDA9PT1hLnBlbmRpbmdjYj8oYS5wcmVmaW5pc2hlZHx8KGEucHJlZmluaXNoZWQ9ITAsYy5lbWl0KCJwcmVmaW5pc2giKSksYS5maW5pc2hlZD0hMCxjLmVtaXQoImZpbmlzaCIpKTphLnByZWZpbmlzaGVkfHwoYS5wcmVmaW5pc2hlZD0hMCxjLmVtaXQoInByZWZpbmlzaCIpKSk7cmV0dXJuIGJ9ZnVuY3Rpb24gemUoYyl7dmFyIGE9dGhpczt0aGlzLmVudHJ5PXRoaXMubmV4dD1udWxsO3RoaXMuZmluaXNoPWZ1bmN0aW9uKGIpe3ZhciBkPWEuZW50cnk7Zm9yKGEuZW50cnk9bnVsbDtkOyl7dmFyIGU9ZC5jYWxsYmFjaztjLnBlbmRpbmdjYi0tO2UoYik7ZD1kLm5leHR9Yy5jb3JrZWRSZXF1ZXN0c0ZyZWU/Yy5jb3JrZWRSZXF1ZXN0c0ZyZWUubmV4dD1hOmMuY29ya2VkUmVxdWVzdHNGcmVlPWF9fWZ1bmN0aW9uIFUoYyl7aWYoISh0aGlzIGluc3RhbmNlb2YgVSkpcmV0dXJuIG5ldyBVKGMpO3kuY2FsbCh0aGlzLGMpO0wuY2FsbCh0aGlzLApjKTtjJiYhMT09PWMucmVhZGFibGUmJih0aGlzLnJlYWRhYmxlPSExKTtjJiYhMT09PWMud3JpdGFibGUmJih0aGlzLndyaXRhYmxlPSExKTt0aGlzLmFsbG93SGFsZk9wZW49ITA7YyYmITE9PT1jLmFsbG93SGFsZk9wZW4mJih0aGlzLmFsbG93SGFsZk9wZW49ITEpO3RoaXMub25jZSgiZW5kIixxZyl9ZnVuY3Rpb24gcWcoKXt0aGlzLmFsbG93SGFsZk9wZW58fHRoaXMuX3dyaXRhYmxlU3RhdGUuZW5kZWR8fFgocmcsdGhpcyl9ZnVuY3Rpb24gcmcoYyl7Yy5lbmQoKX1mdW5jdGlvbiBzZyhjKXt0aGlzLmFmdGVyVHJhbnNmb3JtPWZ1bmN0aW9uKGEsYil7dmFyIGQ9Yy5fdHJhbnNmb3JtU3RhdGU7ZC50cmFuc2Zvcm1pbmc9ITE7dmFyIGU9ZC53cml0ZWNiO2U/KGQud3JpdGVjaHVuaz1udWxsLGQud3JpdGVjYj1udWxsLG51bGwhPT1iJiZ2b2lkIDAhPT1iJiZjLnB1c2goYiksZShhKSxhPWMuX3JlYWRhYmxlU3RhdGUsYS5yZWFkaW5nPSExLChhLm5lZWRSZWFkYWJsZXx8YS5sZW5ndGg8CmEuaGlnaFdhdGVyTWFyaykmJmMuX3JlYWQoYS5oaWdoV2F0ZXJNYXJrKSxhPXZvaWQgMCk6YT1jLmVtaXQoImVycm9yIixFcnJvcigibm8gd3JpdGVjYiBpbiBUcmFuc2Zvcm0gY2xhc3MiKSk7cmV0dXJuIGF9O3RoaXMudHJhbnNmb3JtaW5nPXRoaXMubmVlZFRyYW5zZm9ybT0hMTt0aGlzLndyaXRlZW5jb2Rpbmc9dGhpcy53cml0ZWNodW5rPXRoaXMud3JpdGVjYj1udWxsfWZ1bmN0aW9uIGJhKGMpe2lmKCEodGhpcyBpbnN0YW5jZW9mIGJhKSlyZXR1cm4gbmV3IGJhKGMpO1UuY2FsbCh0aGlzLGMpO3RoaXMuX3RyYW5zZm9ybVN0YXRlPW5ldyBzZyh0aGlzKTt2YXIgYT10aGlzO3RoaXMuX3JlYWRhYmxlU3RhdGUubmVlZFJlYWRhYmxlPSEwO3RoaXMuX3JlYWRhYmxlU3RhdGUuc3luYz0hMTtjJiYoImZ1bmN0aW9uIj09PXR5cGVvZiBjLnRyYW5zZm9ybSYmKHRoaXMuX3RyYW5zZm9ybT1jLnRyYW5zZm9ybSksImZ1bmN0aW9uIj09PXR5cGVvZiBjLmZsdXNoJiYodGhpcy5fZmx1c2g9CmMuZmx1c2gpKTt0aGlzLm9uY2UoInByZWZpbmlzaCIsZnVuY3Rpb24oKXsiZnVuY3Rpb24iPT09dHlwZW9mIHRoaXMuX2ZsdXNoP3RoaXMuX2ZsdXNoKGZ1bmN0aW9uKGMpe0JlKGEsYyl9KTpCZShhKX0pfWZ1bmN0aW9uIEJlKGMsYSl7aWYoYSlyZXR1cm4gYy5lbWl0KCJlcnJvciIsYSk7YT1jLl90cmFuc2Zvcm1TdGF0ZTtpZihjLl93cml0YWJsZVN0YXRlLmxlbmd0aCl0aHJvdyBFcnJvcigiQ2FsbGluZyB0cmFuc2Zvcm0gZG9uZSB3aGVuIHdzLmxlbmd0aCAhPSAwIik7aWYoYS50cmFuc2Zvcm1pbmcpdGhyb3cgRXJyb3IoIkNhbGxpbmcgdHJhbnNmb3JtIGRvbmUgd2hlbiBzdGlsbCB0cmFuc2Zvcm1pbmciKTtyZXR1cm4gYy5wdXNoKG51bGwpfWZ1bmN0aW9uIHNiKGMpe2lmKCEodGhpcyBpbnN0YW5jZW9mIHNiKSlyZXR1cm4gbmV3IHNiKGMpO2JhLmNhbGwodGhpcyxjKX1mdW5jdGlvbiBjYSgpe3guY2FsbCh0aGlzKX1mdW5jdGlvbiB0ZyhjLGEpe3ZhciBiPWMuc3BsaXQoIkAiKSwKZD0iIjsxPGIubGVuZ3RoJiYoZD1iWzBdKyJAIixjPWJbMV0pO2M9Yy5yZXBsYWNlKHVnLCIuIik7Yz1jLnNwbGl0KCIuIik7Yj1jLmxlbmd0aDtmb3IodmFyIGU9W107Yi0tOyllW2JdPWEoY1tiXSk7YT1lLmpvaW4oIi4iKTtyZXR1cm4gZCthfWZ1bmN0aW9uIENlKGMsYSl7cmV0dXJuIGMrMjIrNzUqKDI2PmMpLSgoMCE9YSk8PDUpfWZ1bmN0aW9uIHZnKGMpe3JldHVybiB0ZyhjLGZ1bmN0aW9uKGEpe2lmKHdnLnRlc3QoYSkpe3ZhciBjLGQ9W10sZT1bXSxmPTA7Zm9yKGM9YS5sZW5ndGg7ZjxjOyl7dmFyIGc9YS5jaGFyQ29kZUF0KGYrKyk7aWYoNTUyOTY8PWcmJjU2MzE5Pj1nJiZmPGMpe3ZhciBoPWEuY2hhckNvZGVBdChmKyspOzU2MzIwPT0oaCY2NDUxMik/ZS5wdXNoKCgoZyYxMDIzKTw8MTApKyhoJjEwMjMpKzY1NTM2KTooZS5wdXNoKGcpLGYtLSl9ZWxzZSBlLnB1c2goZyl9YT1lO2g9YS5sZW5ndGg7ZT0xMjg7dmFyIGs9MCx0PTcyO2ZvcihnPTA7ZzxoOysrZyl7dmFyIHE9CmFbZ107MTI4PnEmJmQucHVzaChNYyhxKSl9Zm9yKChmPWM9ZC5sZW5ndGgpJiZkLnB1c2goIi0iKTtmPGg7KXt2YXIgQT0yMTQ3NDgzNjQ3O2ZvcihnPTA7ZzxoOysrZylxPWFbZ10scT49ZSYmcTxBJiYoQT1xKTt2YXIgcj1mKzE7aWYoQS1lPlphKCgyMTQ3NDgzNjQ3LWspL3IpKXRocm93IG5ldyBSYW5nZUVycm9yKERlLm92ZXJmbG93KTtrKz0oQS1lKSpyO2U9QTtmb3IoZz0wO2c8aDsrK2cpe3E9YVtnXTtpZihxPGUmJjIxNDc0ODM2NDc8KytrKXRocm93IG5ldyBSYW5nZUVycm9yKERlLm92ZXJmbG93KTtpZihxPT1lKXt2YXIgUD1rO2ZvcihBPTM2OztBKz0zNil7cT1BPD10PzE6QT49dCsyNj8yNjpBLXQ7aWYoUDxxKWJyZWFrO3ZhciBwPVAtcTtQPTM2LXE7ZC5wdXNoKE1jKENlKHErcCVQLDApKSk7UD1aYShwL1ApfWQucHVzaChNYyhDZShQLDApKSk7dD1yO0E9MDtrPWY9PWM/WmEoay83MDApOms+PjE7Zm9yKGsrPVphKGsvdCk7NDU1PGs7QSs9MzYpaz1aYShrLzM1KTt0PQpaYShBKzM2KmsvKGsrMzgpKTtrPTA7KytmfX0rK2s7KytlfWQ9InhuLS0iK2Quam9pbigiIil9ZWxzZSBkPWE7cmV0dXJuIGR9KX1mdW5jdGlvbiB0YihjKXtzd2l0Y2godHlwZW9mIGMpe2Nhc2UgInN0cmluZyI6cmV0dXJuIGM7Y2FzZSAiYm9vbGVhbiI6cmV0dXJuIGM/InRydWUiOiJmYWxzZSI7Y2FzZSAibnVtYmVyIjpyZXR1cm4gaXNGaW5pdGUoYyk/YzoiIjtkZWZhdWx0OnJldHVybiIifX1mdW5jdGlvbiB4ZyhjLGEsYixkKXthPWF8fCImIjtiPWJ8fCI9IjtudWxsPT09YyYmKGM9dm9pZCAwKTtyZXR1cm4ib2JqZWN0Ij09PXR5cGVvZiBjP0VlKHlnKGMpLGZ1bmN0aW9uKGQpe3ZhciBlPWVuY29kZVVSSUNvbXBvbmVudCh0YihkKSkrYjtyZXR1cm4gRmUoY1tkXSk/RWUoY1tkXSxmdW5jdGlvbihhKXtyZXR1cm4gZStlbmNvZGVVUklDb21wb25lbnQodGIoYSkpfSkuam9pbihhKTplK2VuY29kZVVSSUNvbXBvbmVudCh0YihjW2RdKSl9KS5qb2luKGEpOmQ/ZW5jb2RlVVJJQ29tcG9uZW50KHRiKGQpKSsKYitlbmNvZGVVUklDb21wb25lbnQodGIoYykpOiIifWZ1bmN0aW9uIEVlKGMsYSl7aWYoYy5tYXApcmV0dXJuIGMubWFwKGEpO2Zvcih2YXIgYj1bXSxkPTA7ZDxjLmxlbmd0aDtkKyspYi5wdXNoKGEoY1tkXSxkKSk7cmV0dXJuIGJ9ZnVuY3Rpb24gR2UoYyxhLGIsZCl7Yj1ifHwiPSI7dmFyIGU9e307aWYoInN0cmluZyIhPT10eXBlb2YgY3x8MD09PWMubGVuZ3RoKXJldHVybiBlO3ZhciBmPS9cKy9nO2M9Yy5zcGxpdChhfHwiJiIpO2E9MUUzO2QmJiJudW1iZXIiPT09dHlwZW9mIGQubWF4S2V5cyYmKGE9ZC5tYXhLZXlzKTtkPWMubGVuZ3RoOzA8YSYmZD5hJiYoZD1hKTtmb3IoYT0wO2E8ZDsrK2Epe3ZhciBnPWNbYV0ucmVwbGFjZShmLCIlMjAiKSxoPWcuaW5kZXhPZihiKTtpZigwPD1oKXt2YXIgaz1nLnN1YnN0cigwLGgpO2c9Zy5zdWJzdHIoaCsxKX1lbHNlIGs9ZyxnPSIiO2s9ZGVjb2RlVVJJQ29tcG9uZW50KGspO2c9ZGVjb2RlVVJJQ29tcG9uZW50KGcpO09iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLAprKT9GZShlW2tdKT9lW2tdLnB1c2goZyk6ZVtrXT1bZVtrXSxnXTplW2tdPWd9cmV0dXJuIGV9ZnVuY3Rpb24gZGEoKXt0aGlzLmhyZWY9dGhpcy5wYXRoPXRoaXMucGF0aG5hbWU9dGhpcy5xdWVyeT10aGlzLnNlYXJjaD10aGlzLmhhc2g9dGhpcy5ob3N0bmFtZT10aGlzLnBvcnQ9dGhpcy5ob3N0PXRoaXMuYXV0aD10aGlzLnNsYXNoZXM9dGhpcy5wcm90b2NvbD1udWxsfWZ1bmN0aW9uIFJiKGMsYSxiKXtpZihjJiZ3YShjKSYmYyBpbnN0YW5jZW9mIGRhKXJldHVybiBjO3ZhciBkPW5ldyBkYTtkLnBhcnNlKGMsYSxiKTtyZXR1cm4gZH1mdW5jdGlvbiBIZShjLGEsYixkKXtpZighSmEoYSkpdGhyb3cgbmV3IFR5cGVFcnJvcigiUGFyYW1ldGVyICd1cmwnIG11c3QgYmUgYSBzdHJpbmcsIG5vdCAiK3R5cGVvZiBhKTt2YXIgZT1hLmluZGV4T2YoIj8iKTtlPS0xIT09ZSYmZTxhLmluZGV4T2YoIiMiKT8iPyI6IiMiO2E9YS5zcGxpdChlKTthWzBdPWFbMF0ucmVwbGFjZSgvXFwvZywKIi8iKTthPWEuam9pbihlKTtlPWEudHJpbSgpO2lmKCFkJiYxPT09YS5zcGxpdCgiIyIpLmxlbmd0aCYmKGE9emcuZXhlYyhlKSkpcmV0dXJuIGMucGF0aD1lLGMuaHJlZj1lLGMucGF0aG5hbWU9YVsxXSxhWzJdPyhjLnNlYXJjaD1hWzJdLGMucXVlcnk9Yj9HZShjLnNlYXJjaC5zdWJzdHIoMSkpOmMuc2VhcmNoLnN1YnN0cigxKSk6YiYmKGMuc2VhcmNoPSIiLGMucXVlcnk9e30pLGM7aWYoYT1BZy5leGVjKGUpKXthPWFbMF07dmFyIGY9YS50b0xvd2VyQ2FzZSgpO2MucHJvdG9jb2w9ZjtlPWUuc3Vic3RyKGEubGVuZ3RoKX1pZihkfHxhfHxlLm1hdGNoKC9eXC9cL1teQFwvXStAW15AXC9dKy8pKXt2YXIgZz0iLy8iPT09ZS5zdWJzdHIoMCwyKTshZ3x8YSYmTmNbYV18fChlPWUuc3Vic3RyKDIpLGMuc2xhc2hlcz0hMCl9aWYoIU5jW2FdJiYoZ3x8YSYmISRhW2FdKSl7YT0tMTtmb3IoZD0wO2Q8SWUubGVuZ3RoO2QrKylnPWUuaW5kZXhPZihJZVtkXSksLTEhPT1nJiYoLTE9PT1hfHwKZzxhKSYmKGE9Zyk7Zz0tMT09PWE/ZS5sYXN0SW5kZXhPZigiQCIpOmUubGFzdEluZGV4T2YoIkAiLGEpOy0xIT09ZyYmKGQ9ZS5zbGljZSgwLGcpLGU9ZS5zbGljZShnKzEpLGMuYXV0aD1kZWNvZGVVUklDb21wb25lbnQoZCkpO2E9LTE7Zm9yKGQ9MDtkPEplLmxlbmd0aDtkKyspZz1lLmluZGV4T2YoSmVbZF0pLC0xIT09ZyYmKC0xPT09YXx8ZzxhKSYmKGE9Zyk7LTE9PT1hJiYoYT1lLmxlbmd0aCk7Yy5ob3N0PWUuc2xpY2UoMCxhKTtlPWUuc2xpY2UoYSk7S2UoYyk7Yy5ob3N0bmFtZT1jLmhvc3RuYW1lfHwiIjtnPSJbIj09PWMuaG9zdG5hbWVbMF0mJiJdIj09PWMuaG9zdG5hbWVbYy5ob3N0bmFtZS5sZW5ndGgtMV07aWYoIWcpe3ZhciBoPWMuaG9zdG5hbWUuc3BsaXQoL1wuLyk7ZD0wO2ZvcihhPWgubGVuZ3RoO2Q8YTtkKyspe3ZhciBrPWhbZF07aWYoayYmIWsubWF0Y2goTGUpKXtmb3IodmFyIHQ9IiIscT0wLEE9ay5sZW5ndGg7cTxBO3ErKyl0PTEyNzxrLmNoYXJDb2RlQXQocSk/CnQrIngiOnQra1txXTtpZighdC5tYXRjaChMZSkpe2E9aC5zbGljZSgwLGQpO2Q9aC5zbGljZShkKzEpO2lmKGs9ay5tYXRjaChCZykpYS5wdXNoKGtbMV0pLGQudW5zaGlmdChrWzJdKTtkLmxlbmd0aCYmKGU9Ii8iK2Quam9pbigiLiIpK2UpO2MuaG9zdG5hbWU9YS5qb2luKCIuIik7YnJlYWt9fX19Yy5ob3N0bmFtZT1jLmhvc3RuYW1lLmxlbmd0aD5DZz8iIjpjLmhvc3RuYW1lLnRvTG93ZXJDYXNlKCk7Z3x8KGMuaG9zdG5hbWU9dmcoYy5ob3N0bmFtZSkpO2Q9Yy5wb3J0PyI6IitjLnBvcnQ6IiI7Yy5ob3N0PShjLmhvc3RuYW1lfHwiIikrZDtjLmhyZWYrPWMuaG9zdDtnJiYoYy5ob3N0bmFtZT1jLmhvc3RuYW1lLnN1YnN0cigxLGMuaG9zdG5hbWUubGVuZ3RoLTIpLCIvIiE9PWVbMF0mJihlPSIvIitlKSl9aWYoIURnW2ZdKWZvcihkPTAsYT1PYy5sZW5ndGg7ZDxhO2QrKylnPU9jW2RdLC0xIT09ZS5pbmRleE9mKGcpJiYoaz1lbmNvZGVVUklDb21wb25lbnQoZyksaz09PWcmJgooaz1lc2NhcGUoZykpLGU9ZS5zcGxpdChnKS5qb2luKGspKTtkPWUuaW5kZXhPZigiIyIpOy0xIT09ZCYmKGMuaGFzaD1lLnN1YnN0cihkKSxlPWUuc2xpY2UoMCxkKSk7ZD1lLmluZGV4T2YoIj8iKTstMSE9PWQ/KGMuc2VhcmNoPWUuc3Vic3RyKGQpLGMucXVlcnk9ZS5zdWJzdHIoZCsxKSxiJiYoYy5xdWVyeT1HZShjLnF1ZXJ5KSksZT1lLnNsaWNlKDAsZCkpOmImJihjLnNlYXJjaD0iIixjLnF1ZXJ5PXt9KTtlJiYoYy5wYXRobmFtZT1lKTskYVtmXSYmYy5ob3N0bmFtZSYmIWMucGF0aG5hbWUmJihjLnBhdGhuYW1lPSIvIik7aWYoYy5wYXRobmFtZXx8Yy5zZWFyY2gpZD1jLnBhdGhuYW1lfHwiIixjLnBhdGg9ZCsoYy5zZWFyY2h8fCIiKTtjLmhyZWY9UGMoYyk7cmV0dXJuIGN9ZnVuY3Rpb24gUGMoYyl7dmFyIGE9Yy5hdXRofHwiIjthJiYoYT1lbmNvZGVVUklDb21wb25lbnQoYSksYT1hLnJlcGxhY2UoLyUzQS9pLCI6IiksYSs9IkAiKTt2YXIgYj1jLnByb3RvY29sfHwiIiwKZD1jLnBhdGhuYW1lfHwiIixlPWMuaGFzaHx8IiIsZj0hMSxnPSIiO2MuaG9zdD9mPWErYy5ob3N0OmMuaG9zdG5hbWUmJihmPWErKC0xPT09Yy5ob3N0bmFtZS5pbmRleE9mKCI6Iik/Yy5ob3N0bmFtZToiWyIrdGhpcy5ob3N0bmFtZSsiXSIpLGMucG9ydCYmKGYrPSI6IitjLnBvcnQpKTtjLnF1ZXJ5JiZ3YShjLnF1ZXJ5KSYmT2JqZWN0LmtleXMoYy5xdWVyeSkubGVuZ3RoJiYoZz14ZyhjLnF1ZXJ5KSk7YT1jLnNlYXJjaHx8ZyYmIj8iK2d8fCIiO2ImJiI6IiE9PWIuc3Vic3RyKC0xKSYmKGIrPSI6Iik7Yy5zbGFzaGVzfHwoIWJ8fCRhW2JdKSYmITEhPT1mPyhmPSIvLyIrKGZ8fCIiKSxkJiYiLyIhPT1kLmNoYXJBdCgwKSYmKGQ9Ii8iK2QpKTpmfHwoZj0iIik7ZSYmIiMiIT09ZS5jaGFyQXQoMCkmJihlPSIjIitlKTthJiYiPyIhPT1hLmNoYXJBdCgwKSYmKGE9Ij8iK2EpO2Q9ZC5yZXBsYWNlKC9bPyNdL2csZnVuY3Rpb24oYSl7cmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudChhKX0pOwphPWEucmVwbGFjZSgiIyIsIiUyMyIpO3JldHVybiBiK2YrZCthK2V9ZnVuY3Rpb24gS2UoYyl7dmFyIGE9Yy5ob3N0LGI9RWcuZXhlYyhhKTtiJiYoYj1iWzBdLCI6IiE9PWImJihjLnBvcnQ9Yi5zdWJzdHIoMSkpLGE9YS5zdWJzdHIoMCxhLmxlbmd0aC1iLmxlbmd0aCkpO2EmJihjLmhvc3RuYW1lPWEpfWZ1bmN0aW9uIFFjKGMsYSl7UWM9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGEsYyl7YS5fX3Byb3RvX189Y318fGZ1bmN0aW9uKGEsYyl7Zm9yKHZhciBiIGluIGMpYy5oYXNPd25Qcm9wZXJ0eShiKSYmKGFbYl09Y1tiXSl9O3JldHVybiBRYyhjLGEpfWZ1bmN0aW9uIFJjKGMsYSl7ZnVuY3Rpb24gYigpe3RoaXMuY29uc3RydWN0b3I9Y31RYyhjLGEpO2MucHJvdG90eXBlPW51bGw9PT1hP09iamVjdC5jcmVhdGUoYSk6KGIucHJvdG90eXBlPWEucHJvdG90eXBlLG5ldyBiKX1mdW5jdGlvbiBTYihjKXt2YXIgYT0KImZ1bmN0aW9uIj09PXR5cGVvZiBTeW1ib2wmJmNbU3ltYm9sLml0ZXJhdG9yXSxiPTA7cmV0dXJuIGE/YS5jYWxsKGMpOntuZXh0OmZ1bmN0aW9uKCl7YyYmYj49Yy5sZW5ndGgmJihjPXZvaWQgMCk7cmV0dXJue3ZhbHVlOmMmJmNbYisrXSxkb25lOiFjfX19fWZ1bmN0aW9uIFRiKGMsYSl7dmFyIGI9ImZ1bmN0aW9uIj09PXR5cGVvZiBTeW1ib2wmJmNbU3ltYm9sLml0ZXJhdG9yXTtpZighYilyZXR1cm4gYztjPWIuY2FsbChjKTt2YXIgZCxlPVtdO3RyeXtmb3IoOyh2b2lkIDA9PT1hfHwwPGEtLSkmJiEoZD1jLm5leHQoKSkuZG9uZTspZS5wdXNoKGQudmFsdWUpfWNhdGNoKGcpe3ZhciBmPXtlcnJvcjpnfX1maW5hbGx5e3RyeXtkJiYhZC5kb25lJiYoYj1jWyJyZXR1cm4iXSkmJmIuY2FsbChjKX1maW5hbGx5e2lmKGYpdGhyb3cgZi5lcnJvcjt9fXJldHVybiBlfWZ1bmN0aW9uIFViKCl7Zm9yKHZhciBjPVtdLGE9MDthPGFyZ3VtZW50cy5sZW5ndGg7YSsrKWM9Yy5jb25jYXQoVGIoYXJndW1lbnRzW2FdKSk7CnJldHVybiBjfWZ1bmN0aW9uIE1lKCl7U2M9ITA7Zm9yKHZhciBjPTA7NjQ+YzsrK2MpZWFbY109IkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky8iW2NdLE1bIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky8iLmNoYXJDb2RlQXQoYyldPWM7TVs0NV09NjI7TVs5NV09NjN9ZnVuY3Rpb24gRmcoYyxhLGIpe2Zvcih2YXIgZD1bXSxlPWE7ZTxiO2UrPTMpYT0oY1tlXTw8MTYpKyhjW2UrMV08PDgpK2NbZSsyXSxkLnB1c2goZWFbYT4+MTgmNjNdK2VhW2E+PjEyJjYzXStlYVthPj42JjYzXStlYVthJjYzXSk7cmV0dXJuIGQuam9pbigiIil9ZnVuY3Rpb24gTmUoYyl7U2N8fE1lKCk7Zm9yKHZhciBhPWMubGVuZ3RoLGI9YSUzLGQ9IiIsZT1bXSxmPTAsZz1hLWI7ZjxnO2YrPTE2MzgzKWUucHVzaChGZyhjLGYsZisxNjM4Mz5nP2c6ZisxNjM4MykpOzE9PT0KYj8oYz1jW2EtMV0sZCs9ZWFbYz4+Ml0sZCs9ZWFbYzw8NCY2M10sZCs9Ij09Iik6Mj09PWImJihjPShjW2EtMl08PDgpK2NbYS0xXSxkKz1lYVtjPj4xMF0sZCs9ZWFbYz4+NCY2M10sZCs9ZWFbYzw8MiY2M10sZCs9Ij0iKTtlLnB1c2goZCk7cmV0dXJuIGUuam9pbigiIil9ZnVuY3Rpb24gVmIoYyxhLGIsZCxlKXt2YXIgZj04KmUtZC0xLGc9KDE8PGYpLTEsaD1nPj4xLGs9LTc7ZT1iP2UtMTowO3ZhciB0PWI/LTE6MSxxPWNbYStlXTtlKz10O2I9cSYoMTw8LWspLTE7cT4+PS1rO2ZvcihrKz1mOzA8aztiPTI1NipiK2NbYStlXSxlKz10LGstPTgpO2Y9YiYoMTw8LWspLTE7Yj4+PS1rO2ZvcihrKz1kOzA8aztmPTI1NipmK2NbYStlXSxlKz10LGstPTgpO2lmKDA9PT1iKWI9MS1oO2Vsc2V7aWYoYj09PWcpcmV0dXJuIGY/TmFOOkluZmluaXR5KihxPy0xOjEpO2YrPU1hdGgucG93KDIsZCk7Yi09aH1yZXR1cm4ocT8tMToxKSpmKk1hdGgucG93KDIsYi1kKX1mdW5jdGlvbiBXYihjLAphLGIsZCxlLGYpe3ZhciBnLGg9OCpmLWUtMSxrPSgxPDxoKS0xLHQ9az4+MSxxPTIzPT09ZT9NYXRoLnBvdygyLC0yNCktTWF0aC5wb3coMiwtNzcpOjA7Zj1kPzA6Zi0xO3ZhciBBPWQ/MTotMSxyPTA+YXx8MD09PWEmJjA+MS9hPzE6MDthPU1hdGguYWJzKGEpO2Zvcihpc05hTihhKXx8SW5maW5pdHk9PT1hPyhhPWlzTmFOKGEpPzE6MCxkPWspOihkPU1hdGguZmxvb3IoTWF0aC5sb2coYSkvTWF0aC5MTjIpLDE+YSooZz1NYXRoLnBvdygyLC1kKSkmJihkLS0sZyo9MiksYT0xPD1kK3Q/YStxL2c6YStxKk1hdGgucG93KDIsMS10KSwyPD1hKmcmJihkKyssZy89MiksZCt0Pj1rPyhhPTAsZD1rKToxPD1kK3Q/KGE9KGEqZy0xKSpNYXRoLnBvdygyLGUpLGQrPXQpOihhPWEqTWF0aC5wb3coMix0LTEpKk1hdGgucG93KDIsZSksZD0wKSk7ODw9ZTtjW2IrZl09YSYyNTUsZis9QSxhLz0yNTYsZS09OCk7ZD1kPDxlfGE7Zm9yKGgrPWU7MDxoO2NbYitmXT1kJjI1NSxmKz1BLGQvPTI1NiwKaC09OCk7Y1tiK2YtQV18PTEyOCpyfWZ1bmN0aW9uIG1hKGMsYSl7aWYoKG0uVFlQRURfQVJSQVlfU1VQUE9SVD8yMTQ3NDgzNjQ3OjEwNzM3NDE4MjMpPGEpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgdHlwZWQgYXJyYXkgbGVuZ3RoIik7bS5UWVBFRF9BUlJBWV9TVVBQT1JUPyhjPW5ldyBVaW50OEFycmF5KGEpLGMuX19wcm90b19fPW0ucHJvdG90eXBlKToobnVsbD09PWMmJihjPW5ldyBtKGEpKSxjLmxlbmd0aD1hKTtyZXR1cm4gY31mdW5jdGlvbiBtKGMsYSxiKXtpZighKG0uVFlQRURfQVJSQVlfU1VQUE9SVHx8dGhpcyBpbnN0YW5jZW9mIG0pKXJldHVybiBuZXcgbShjLGEsYik7aWYoIm51bWJlciI9PT10eXBlb2YgYyl7aWYoInN0cmluZyI9PT10eXBlb2YgYSl0aHJvdyBFcnJvcigiSWYgZW5jb2RpbmcgaXMgc3BlY2lmaWVkIHRoZW4gdGhlIGZpcnN0IGFyZ3VtZW50IG11c3QgYmUgYSBzdHJpbmciKTtyZXR1cm4gVGModGhpcyxjKX1yZXR1cm4gT2UodGhpcyxjLAphLGIpfWZ1bmN0aW9uIE9lKGMsYSxiLGQpe2lmKCJudW1iZXIiPT09dHlwZW9mIGEpdGhyb3cgbmV3IFR5cGVFcnJvcignInZhbHVlIiBhcmd1bWVudCBtdXN0IG5vdCBiZSBhIG51bWJlcicpO2lmKCJ1bmRlZmluZWQiIT09dHlwZW9mIEFycmF5QnVmZmVyJiZhIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpe2EuYnl0ZUxlbmd0aDtpZigwPmJ8fGEuYnl0ZUxlbmd0aDxiKXRocm93IG5ldyBSYW5nZUVycm9yKCInb2Zmc2V0JyBpcyBvdXQgb2YgYm91bmRzIik7aWYoYS5ieXRlTGVuZ3RoPGIrKGR8fDApKXRocm93IG5ldyBSYW5nZUVycm9yKCInbGVuZ3RoJyBpcyBvdXQgb2YgYm91bmRzIik7YT12b2lkIDA9PT1iJiZ2b2lkIDA9PT1kP25ldyBVaW50OEFycmF5KGEpOnZvaWQgMD09PWQ/bmV3IFVpbnQ4QXJyYXkoYSxiKTpuZXcgVWludDhBcnJheShhLGIsZCk7bS5UWVBFRF9BUlJBWV9TVVBQT1JUPyhjPWEsYy5fX3Byb3RvX189bS5wcm90b3R5cGUpOmM9VWMoYyxhKTtyZXR1cm4gY31pZigic3RyaW5nIj09PQp0eXBlb2YgYSl7ZD1jO2M9YjtpZigic3RyaW5nIiE9PXR5cGVvZiBjfHwiIj09PWMpYz0idXRmOCI7aWYoIW0uaXNFbmNvZGluZyhjKSl0aHJvdyBuZXcgVHlwZUVycm9yKCciZW5jb2RpbmciIG11c3QgYmUgYSB2YWxpZCBzdHJpbmcgZW5jb2RpbmcnKTtiPVBlKGEsYyl8MDtkPW1hKGQsYik7YT1kLndyaXRlKGEsYyk7YSE9PWImJihkPWQuc2xpY2UoMCxhKSk7cmV0dXJuIGR9cmV0dXJuIEdnKGMsYSl9ZnVuY3Rpb24gUWUoYyl7aWYoIm51bWJlciIhPT10eXBlb2YgYyl0aHJvdyBuZXcgVHlwZUVycm9yKCcic2l6ZSIgYXJndW1lbnQgbXVzdCBiZSBhIG51bWJlcicpO2lmKDA+Yyl0aHJvdyBuZXcgUmFuZ2VFcnJvcignInNpemUiIGFyZ3VtZW50IG11c3Qgbm90IGJlIG5lZ2F0aXZlJyk7fWZ1bmN0aW9uIFRjKGMsYSl7UWUoYSk7Yz1tYShjLDA+YT8wOlZjKGEpfDApO2lmKCFtLlRZUEVEX0FSUkFZX1NVUFBPUlQpZm9yKHZhciBiPTA7YjxhOysrYiljW2JdPTA7cmV0dXJuIGN9ZnVuY3Rpb24gVWMoYywKYSl7dmFyIGI9MD5hLmxlbmd0aD8wOlZjKGEubGVuZ3RoKXwwO2M9bWEoYyxiKTtmb3IodmFyIGQ9MDtkPGI7ZCs9MSljW2RdPWFbZF0mMjU1O3JldHVybiBjfWZ1bmN0aW9uIEdnKGMsYSl7aWYoZmEoYSkpe3ZhciBiPVZjKGEubGVuZ3RoKXwwO2M9bWEoYyxiKTtpZigwPT09Yy5sZW5ndGgpcmV0dXJuIGM7YS5jb3B5KGMsMCwwLGIpO3JldHVybiBjfWlmKGEpe2lmKCJ1bmRlZmluZWQiIT09dHlwZW9mIEFycmF5QnVmZmVyJiZhLmJ1ZmZlciBpbnN0YW5jZW9mIEFycmF5QnVmZmVyfHwibGVuZ3RoImluIGEpcmV0dXJuKGI9Im51bWJlciIhPT10eXBlb2YgYS5sZW5ndGgpfHwoYj1hLmxlbmd0aCxiPWIhPT1iKSxiP21hKGMsMCk6VWMoYyxhKTtpZigiQnVmZmVyIj09PWEudHlwZSYmUmUoYS5kYXRhKSlyZXR1cm4gVWMoYyxhLmRhdGEpfXRocm93IG5ldyBUeXBlRXJyb3IoIkZpcnN0IGFyZ3VtZW50IG11c3QgYmUgYSBzdHJpbmcsIEJ1ZmZlciwgQXJyYXlCdWZmZXIsIEFycmF5LCBvciBhcnJheS1saWtlIG9iamVjdC4iKTsKfWZ1bmN0aW9uIFZjKGMpe2lmKGM+PShtLlRZUEVEX0FSUkFZX1NVUFBPUlQ/MjE0NzQ4MzY0NzoxMDczNzQxODIzKSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiQXR0ZW1wdCB0byBhbGxvY2F0ZSBCdWZmZXIgbGFyZ2VyIHRoYW4gbWF4aW11bSBzaXplOiAweCIrKG0uVFlQRURfQVJSQVlfU1VQUE9SVD8yMTQ3NDgzNjQ3OjEwNzM3NDE4MjMpLnRvU3RyaW5nKDE2KSsiIGJ5dGVzIik7cmV0dXJuIGN8MH1mdW5jdGlvbiBmYShjKXtyZXR1cm4hKG51bGw9PWN8fCFjLl9pc0J1ZmZlcil9ZnVuY3Rpb24gUGUoYyxhKXtpZihmYShjKSlyZXR1cm4gYy5sZW5ndGg7aWYoInVuZGVmaW5lZCIhPT10eXBlb2YgQXJyYXlCdWZmZXImJiJmdW5jdGlvbiI9PT10eXBlb2YgQXJyYXlCdWZmZXIuaXNWaWV3JiYoQXJyYXlCdWZmZXIuaXNWaWV3KGMpfHxjIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpKXJldHVybiBjLmJ5dGVMZW5ndGg7InN0cmluZyIhPT10eXBlb2YgYyYmKGM9IiIrYyk7dmFyIGI9Yy5sZW5ndGg7CmlmKDA9PT1iKXJldHVybiAwO2Zvcih2YXIgZD0hMTs7KXN3aXRjaChhKXtjYXNlICJhc2NpaSI6Y2FzZSAibGF0aW4xIjpjYXNlICJiaW5hcnkiOnJldHVybiBiO2Nhc2UgInV0ZjgiOmNhc2UgInV0Zi04IjpjYXNlIHZvaWQgMDpyZXR1cm4gWGIoYykubGVuZ3RoO2Nhc2UgInVjczIiOmNhc2UgInVjcy0yIjpjYXNlICJ1dGYxNmxlIjpjYXNlICJ1dGYtMTZsZSI6cmV0dXJuIDIqYjtjYXNlICJoZXgiOnJldHVybiBiPj4+MTtjYXNlICJiYXNlNjQiOnJldHVybiBTZShjKS5sZW5ndGg7ZGVmYXVsdDppZihkKXJldHVybiBYYihjKS5sZW5ndGg7YT0oIiIrYSkudG9Mb3dlckNhc2UoKTtkPSEwfX1mdW5jdGlvbiBIZyhjLGEsYil7dmFyIGQ9ITE7aWYodm9pZCAwPT09YXx8MD5hKWE9MDtpZihhPnRoaXMubGVuZ3RoKXJldHVybiIiO2lmKHZvaWQgMD09PWJ8fGI+dGhpcy5sZW5ndGgpYj10aGlzLmxlbmd0aDtpZigwPj1iKXJldHVybiIiO2I+Pj49MDthPj4+PTA7aWYoYjw9YSlyZXR1cm4iIjsKZm9yKGN8fChjPSJ1dGY4Iik7Oylzd2l0Y2goYyl7Y2FzZSAiaGV4IjpjPWE7YT1iO2I9dGhpcy5sZW5ndGg7aWYoIWN8fDA+YyljPTA7aWYoIWF8fDA+YXx8YT5iKWE9YjtkPSIiO2ZvcihiPWM7YjxhOysrYiljPWQsZD10aGlzW2JdLGQ9MTY+ZD8iMCIrZC50b1N0cmluZygxNik6ZC50b1N0cmluZygxNiksZD1jK2Q7cmV0dXJuIGQ7Y2FzZSAidXRmOCI6Y2FzZSAidXRmLTgiOnJldHVybiBUZSh0aGlzLGEsYik7Y2FzZSAiYXNjaWkiOmM9IiI7Zm9yKGI9TWF0aC5taW4odGhpcy5sZW5ndGgsYik7YTxiOysrYSljKz1TdHJpbmcuZnJvbUNoYXJDb2RlKHRoaXNbYV0mMTI3KTtyZXR1cm4gYztjYXNlICJsYXRpbjEiOmNhc2UgImJpbmFyeSI6Yz0iIjtmb3IoYj1NYXRoLm1pbih0aGlzLmxlbmd0aCxiKTthPGI7KythKWMrPVN0cmluZy5mcm9tQ2hhckNvZGUodGhpc1thXSk7cmV0dXJuIGM7Y2FzZSAiYmFzZTY0IjpyZXR1cm4gYT0wPT09YSYmYj09PXRoaXMubGVuZ3RoP05lKHRoaXMpOgpOZSh0aGlzLnNsaWNlKGEsYikpLGE7Y2FzZSAidWNzMiI6Y2FzZSAidWNzLTIiOmNhc2UgInV0ZjE2bGUiOmNhc2UgInV0Zi0xNmxlIjphPXRoaXMuc2xpY2UoYSxiKTtiPSIiO2ZvcihjPTA7YzxhLmxlbmd0aDtjKz0yKWIrPVN0cmluZy5mcm9tQ2hhckNvZGUoYVtjXSsyNTYqYVtjKzFdKTtyZXR1cm4gYjtkZWZhdWx0OmlmKGQpdGhyb3cgbmV3IFR5cGVFcnJvcigiVW5rbm93biBlbmNvZGluZzogIitjKTtjPShjKyIiKS50b0xvd2VyQ2FzZSgpO2Q9ITB9fWZ1bmN0aW9uIE1hKGMsYSxiKXt2YXIgZD1jW2FdO2NbYV09Y1tiXTtjW2JdPWR9ZnVuY3Rpb24gVWUoYyxhLGIsZCxlKXtpZigwPT09Yy5sZW5ndGgpcmV0dXJuLTE7InN0cmluZyI9PT10eXBlb2YgYj8oZD1iLGI9MCk6MjE0NzQ4MzY0NzxiP2I9MjE0NzQ4MzY0NzotMjE0NzQ4MzY0OD5iJiYoYj0tMjE0NzQ4MzY0OCk7Yj0rYjtpc05hTihiKSYmKGI9ZT8wOmMubGVuZ3RoLTEpOzA+YiYmKGI9Yy5sZW5ndGgrYik7aWYoYj49CmMubGVuZ3RoKXtpZihlKXJldHVybi0xO2I9Yy5sZW5ndGgtMX1lbHNlIGlmKDA+YilpZihlKWI9MDtlbHNlIHJldHVybi0xOyJzdHJpbmciPT09dHlwZW9mIGEmJihhPW0uZnJvbShhLGQpKTtpZihmYShhKSlyZXR1cm4gMD09PWEubGVuZ3RoPy0xOlZlKGMsYSxiLGQsZSk7aWYoIm51bWJlciI9PT10eXBlb2YgYSlyZXR1cm4gYSY9MjU1LG0uVFlQRURfQVJSQVlfU1VQUE9SVCYmImZ1bmN0aW9uIj09PXR5cGVvZiBVaW50OEFycmF5LnByb3RvdHlwZS5pbmRleE9mP2U/VWludDhBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKGMsYSxiKTpVaW50OEFycmF5LnByb3RvdHlwZS5sYXN0SW5kZXhPZi5jYWxsKGMsYSxiKTpWZShjLFthXSxiLGQsZSk7dGhyb3cgbmV3IFR5cGVFcnJvcigidmFsIG11c3QgYmUgc3RyaW5nLCBudW1iZXIgb3IgQnVmZmVyIik7fWZ1bmN0aW9uIFZlKGMsYSxiLGQsZSl7ZnVuY3Rpb24gZihhLGMpe3JldHVybiAxPT09Zz9hW2NdOmEucmVhZFVJbnQxNkJFKGMqCmcpfXZhciBnPTEsaD1jLmxlbmd0aCxrPWEubGVuZ3RoO2lmKHZvaWQgMCE9PWQmJihkPVN0cmluZyhkKS50b0xvd2VyQ2FzZSgpLCJ1Y3MyIj09PWR8fCJ1Y3MtMiI9PT1kfHwidXRmMTZsZSI9PT1kfHwidXRmLTE2bGUiPT09ZCkpe2lmKDI+Yy5sZW5ndGh8fDI+YS5sZW5ndGgpcmV0dXJuLTE7Zz0yO2gvPTI7ay89MjtiLz0yfWlmKGUpZm9yKGQ9LTE7YjxoO2IrKylpZihmKGMsYik9PT1mKGEsLTE9PT1kPzA6Yi1kKSl7aWYoLTE9PT1kJiYoZD1iKSxiLWQrMT09PWspcmV0dXJuIGQqZ31lbHNlLTEhPT1kJiYoYi09Yi1kKSxkPS0xO2Vsc2UgZm9yKGIraz5oJiYoYj1oLWspOzA8PWI7Yi0tKXtoPSEwO2ZvcihkPTA7ZDxrO2QrKylpZihmKGMsYitkKSE9PWYoYSxkKSl7aD0hMTticmVha31pZihoKXJldHVybiBifXJldHVybi0xfWZ1bmN0aW9uIFRlKGMsYSxiKXtiPU1hdGgubWluKGMubGVuZ3RoLGIpO2Zvcih2YXIgZD1bXTthPGI7KXt2YXIgZT1jW2FdLGY9bnVsbCxnPTIzOTxlPwo0OjIyMzxlPzM6MTkxPGU/MjoxO2lmKGErZzw9Yilzd2l0Y2goZyl7Y2FzZSAxOjEyOD5lJiYoZj1lKTticmVhaztjYXNlIDI6dmFyIGg9Y1thKzFdOzEyOD09PShoJjE5MikmJihlPShlJjMxKTw8NnxoJjYzLDEyNzxlJiYoZj1lKSk7YnJlYWs7Y2FzZSAzOmg9Y1thKzFdO3ZhciBrPWNbYSsyXTsxMjg9PT0oaCYxOTIpJiYxMjg9PT0oayYxOTIpJiYoZT0oZSYxNSk8PDEyfChoJjYzKTw8NnxrJjYzLDIwNDc8ZSYmKDU1Mjk2PmV8fDU3MzQzPGUpJiYoZj1lKSk7YnJlYWs7Y2FzZSA0Omg9Y1thKzFdO2s9Y1thKzJdO3ZhciB0PWNbYSszXTsxMjg9PT0oaCYxOTIpJiYxMjg9PT0oayYxOTIpJiYxMjg9PT0odCYxOTIpJiYoZT0oZSYxNSk8PDE4fChoJjYzKTw8MTJ8KGsmNjMpPDw2fHQmNjMsNjU1MzU8ZSYmMTExNDExMj5lJiYoZj1lKSl9bnVsbD09PWY/KGY9NjU1MzMsZz0xKTo2NTUzNTxmJiYoZi09NjU1MzYsZC5wdXNoKGY+Pj4xMCYxMDIzfDU1Mjk2KSxmPTU2MzIwfGYmMTAyMyk7CmQucHVzaChmKTthKz1nfWM9ZC5sZW5ndGg7aWYoYzw9V2UpZD1TdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFN0cmluZyxkKTtlbHNle2I9IiI7Zm9yKGE9MDthPGM7KWIrPVN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoU3RyaW5nLGQuc2xpY2UoYSxhKz1XZSkpO2Q9Yn1yZXR1cm4gZH1mdW5jdGlvbiBJKGMsYSxiKXtpZigwIT09YyUxfHwwPmMpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIm9mZnNldCBpcyBub3QgdWludCIpO2lmKGMrYT5iKXRocm93IG5ldyBSYW5nZUVycm9yKCJUcnlpbmcgdG8gYWNjZXNzIGJleW9uZCBidWZmZXIgbGVuZ3RoIik7fWZ1bmN0aW9uIFYoYyxhLGIsZCxlLGYpe2lmKCFmYShjKSl0aHJvdyBuZXcgVHlwZUVycm9yKCciYnVmZmVyIiBhcmd1bWVudCBtdXN0IGJlIGEgQnVmZmVyIGluc3RhbmNlJyk7aWYoYT5lfHxhPGYpdGhyb3cgbmV3IFJhbmdlRXJyb3IoJyJ2YWx1ZSIgYXJndW1lbnQgaXMgb3V0IG9mIGJvdW5kcycpO2lmKGIrZD5jLmxlbmd0aCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW5kZXggb3V0IG9mIHJhbmdlIik7Cn1mdW5jdGlvbiBZYihjLGEsYixkKXswPmEmJihhPTY1NTM1K2ErMSk7Zm9yKHZhciBlPTAsZj1NYXRoLm1pbihjLmxlbmd0aC1iLDIpO2U8ZjsrK2UpY1tiK2VdPShhJjI1NTw8OCooZD9lOjEtZSkpPj4+OCooZD9lOjEtZSl9ZnVuY3Rpb24gWmIoYyxhLGIsZCl7MD5hJiYoYT00Mjk0OTY3Mjk1K2ErMSk7Zm9yKHZhciBlPTAsZj1NYXRoLm1pbihjLmxlbmd0aC1iLDQpO2U8ZjsrK2UpY1tiK2VdPWE+Pj44KihkP2U6My1lKSYyNTV9ZnVuY3Rpb24gJGIoYyxhLGIsZCl7aWYoYitkPmMubGVuZ3RoKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbmRleCBvdXQgb2YgcmFuZ2UiKTtpZigwPmIpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkluZGV4IG91dCBvZiByYW5nZSIpO31mdW5jdGlvbiBYYihjLGEpe2E9YXx8SW5maW5pdHk7Zm9yKHZhciBiLGQ9Yy5sZW5ndGgsZT1udWxsLGY9W10sZz0wO2c8ZDsrK2cpe2I9Yy5jaGFyQ29kZUF0KGcpO2lmKDU1Mjk1PGImJjU3MzQ0PmIpe2lmKCFlKXtpZig1NjMxOTwKYil7LTE8KGEtPTMpJiZmLnB1c2goMjM5LDE5MSwxODkpO2NvbnRpbnVlfWVsc2UgaWYoZysxPT09ZCl7LTE8KGEtPTMpJiZmLnB1c2goMjM5LDE5MSwxODkpO2NvbnRpbnVlfWU9Yjtjb250aW51ZX1pZig1NjMyMD5iKXstMTwoYS09MykmJmYucHVzaCgyMzksMTkxLDE4OSk7ZT1iO2NvbnRpbnVlfWI9KGUtNTUyOTY8PDEwfGItNTYzMjApKzY1NTM2fWVsc2UgZSYmLTE8KGEtPTMpJiZmLnB1c2goMjM5LDE5MSwxODkpO2U9bnVsbDtpZigxMjg+Yil7aWYoMD4tLWEpYnJlYWs7Zi5wdXNoKGIpfWVsc2UgaWYoMjA0OD5iKXtpZigwPihhLT0yKSlicmVhaztmLnB1c2goYj4+NnwxOTIsYiY2M3wxMjgpfWVsc2UgaWYoNjU1MzY+Yil7aWYoMD4oYS09MykpYnJlYWs7Zi5wdXNoKGI+PjEyfDIyNCxiPj42JjYzfDEyOCxiJjYzfDEyOCl9ZWxzZSBpZigxMTE0MTEyPmIpe2lmKDA+KGEtPTQpKWJyZWFrO2YucHVzaChiPj4xOHwyNDAsYj4+MTImNjN8MTI4LGI+PjYmNjN8MTI4LGImNjN8MTI4KX1lbHNlIHRocm93IEVycm9yKCJJbnZhbGlkIGNvZGUgcG9pbnQiKTsKfXJldHVybiBmfWZ1bmN0aW9uIFhlKGMpe2Zvcih2YXIgYT1bXSxiPTA7YjxjLmxlbmd0aDsrK2IpYS5wdXNoKGMuY2hhckNvZGVBdChiKSYyNTUpO3JldHVybiBhfWZ1bmN0aW9uIFNlKGMpe2M9KGMudHJpbT9jLnRyaW0oKTpjLnJlcGxhY2UoL15ccyt8XHMrJC9nLCIiKSkucmVwbGFjZShJZywiIik7aWYoMj5jLmxlbmd0aCljPSIiO2Vsc2UgZm9yKDswIT09Yy5sZW5ndGglNDspYys9Ij0iO1NjfHxNZSgpO3ZhciBhPWMubGVuZ3RoO2lmKDA8YSU0KXRocm93IEVycm9yKCJJbnZhbGlkIHN0cmluZy4gTGVuZ3RoIG11c3QgYmUgYSBtdWx0aXBsZSBvZiA0Iik7dmFyIGI9Ij0iPT09Y1thLTJdPzI6Ij0iPT09Y1thLTFdPzE6MCxkPW5ldyBKZygzKmEvNC1iKSxlPTA8Yj9hLTQ6YSxmPTA7Zm9yKGE9MDthPGU7YSs9NCl7dmFyIGc9TVtjLmNoYXJDb2RlQXQoYSldPDwxOHxNW2MuY2hhckNvZGVBdChhKzEpXTw8MTJ8TVtjLmNoYXJDb2RlQXQoYSsyKV08PDZ8TVtjLmNoYXJDb2RlQXQoYSsKMyldO2RbZisrXT1nPj4xNiYyNTU7ZFtmKytdPWc+PjgmMjU1O2RbZisrXT1nJjI1NX0yPT09Yj8oZz1NW2MuY2hhckNvZGVBdChhKV08PDJ8TVtjLmNoYXJDb2RlQXQoYSsxKV0+PjQsZFtmKytdPWcmMjU1KToxPT09YiYmKGc9TVtjLmNoYXJDb2RlQXQoYSldPDwxMHxNW2MuY2hhckNvZGVBdChhKzEpXTw8NHxNW2MuY2hhckNvZGVBdChhKzIpXT4+MixkW2YrK109Zz4+OCYyNTUsZFtmKytdPWcmMjU1KTtyZXR1cm4gZH1mdW5jdGlvbiB1YihjLGEsYixkKXtmb3IodmFyIGU9MDtlPGQmJiEoZStiPj1hLmxlbmd0aHx8ZT49Yy5sZW5ndGgpOysrZSlhW2UrYl09Y1tlXTtyZXR1cm4gZX1mdW5jdGlvbiBZZShjKXtyZXR1cm4gbnVsbCE9YyYmKCEhYy5faXNCdWZmZXJ8fFplKGMpfHwiZnVuY3Rpb24iPT09dHlwZW9mIGMucmVhZEZsb2F0TEUmJiJmdW5jdGlvbiI9PT10eXBlb2YgYy5zbGljZSYmWmUoYy5zbGljZSgwLDApKSl9ZnVuY3Rpb24gWmUoYyl7cmV0dXJuISFjLmNvbnN0cnVjdG9yJiYKImZ1bmN0aW9uIj09PXR5cGVvZiBjLmNvbnN0cnVjdG9yLmlzQnVmZmVyJiZjLmNvbnN0cnVjdG9yLmlzQnVmZmVyKGMpfWZ1bmN0aW9uIFdjKGMsYSl7cmV0dXJuIGE9e2V4cG9ydHM6e319LGMoYSxhLmV4cG9ydHMpLGEuZXhwb3J0c31mdW5jdGlvbiAkZSgpe3Rocm93IEVycm9yKCJzZXRUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkIik7fWZ1bmN0aW9uIGFmKCl7dGhyb3cgRXJyb3IoImNsZWFyVGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCIpO31mdW5jdGlvbiBiZihjKXtpZihyYT09PXNldFRpbWVvdXQpcmV0dXJuIHNldFRpbWVvdXQoYywwKTtpZigocmE9PT0kZXx8IXJhKSYmc2V0VGltZW91dClyZXR1cm4gcmE9c2V0VGltZW91dCxzZXRUaW1lb3V0KGMsMCk7dHJ5e3JldHVybiByYShjLDApfWNhdGNoKGEpe3RyeXtyZXR1cm4gcmEuY2FsbChudWxsLGMsMCl9Y2F0Y2goYil7cmV0dXJuIHJhLmNhbGwodGhpcyxjLDApfX19ZnVuY3Rpb24gS2coYyl7aWYoeWE9PT1jbGVhclRpbWVvdXQpcmV0dXJuIGNsZWFyVGltZW91dChjKTsKaWYoKHlhPT09YWZ8fCF5YSkmJmNsZWFyVGltZW91dClyZXR1cm4geWE9Y2xlYXJUaW1lb3V0LGNsZWFyVGltZW91dChjKTt0cnl7cmV0dXJuIHlhKGMpfWNhdGNoKGEpe3RyeXtyZXR1cm4geWEuY2FsbChudWxsLGMpfWNhdGNoKGIpe3JldHVybiB5YS5jYWxsKHRoaXMsYyl9fX1mdW5jdGlvbiBMZygpe2FiJiZOYSYmKGFiPSExLE5hLmxlbmd0aD9zYT1OYS5jb25jYXQoc2EpOmFjPS0xLHNhLmxlbmd0aCYmY2YoKSl9ZnVuY3Rpb24gY2YoKXtpZighYWIpe3ZhciBjPWJmKExnKTthYj0hMDtmb3IodmFyIGE9c2EubGVuZ3RoO2E7KXtOYT1zYTtmb3Ioc2E9W107KythYzxhOylOYSYmTmFbYWNdLnJ1bigpO2FjPS0xO2E9c2EubGVuZ3RofU5hPW51bGw7YWI9ITE7S2coYyl9fWZ1bmN0aW9uIGRmKGMpe3ZhciBhPUFycmF5KGFyZ3VtZW50cy5sZW5ndGgtMSk7aWYoMTxhcmd1bWVudHMubGVuZ3RoKWZvcih2YXIgYj0xO2I8YXJndW1lbnRzLmxlbmd0aDtiKyspYVtiLTFdPWFyZ3VtZW50c1tiXTsKc2EucHVzaChuZXcgZWYoYyxhKSk7MSE9PXNhLmxlbmd0aHx8YWJ8fGJmKGNmKX1mdW5jdGlvbiBlZihjLGEpe3RoaXMuZnVuPWM7dGhpcy5hcnJheT1hfWZ1bmN0aW9uIE9hKCl7fWZ1bmN0aW9uIGhhKGMpe2lmKCJzdHJpbmciIT09dHlwZW9mIGMpdGhyb3cgbmV3IFR5cGVFcnJvcigiUGF0aCBtdXN0IGJlIGEgc3RyaW5nLiBSZWNlaXZlZCAiK0pTT04uc3RyaW5naWZ5KGMpKTt9ZnVuY3Rpb24gZmYoYyxhKXtmb3IodmFyIGI9IiIsZD0wLGU9LTEsZj0wLGcsaD0wO2g8PWMubGVuZ3RoOysraCl7aWYoaDxjLmxlbmd0aClnPWMuY2hhckNvZGVBdChoKTtlbHNlIGlmKDQ3PT09ZylicmVhaztlbHNlIGc9NDc7aWYoNDc9PT1nKXtpZihlIT09aC0xJiYxIT09ZilpZihlIT09aC0xJiYyPT09Zil7aWYoMj5iLmxlbmd0aHx8MiE9PWR8fDQ2IT09Yi5jaGFyQ29kZUF0KGIubGVuZ3RoLTEpfHw0NiE9PWIuY2hhckNvZGVBdChiLmxlbmd0aC0yKSlpZigyPGIubGVuZ3RoKXtpZihlPWIubGFzdEluZGV4T2YoIi8iKSwKZSE9PWIubGVuZ3RoLTEpey0xPT09ZT8oYj0iIixkPTApOihiPWIuc2xpY2UoMCxlKSxkPWIubGVuZ3RoLTEtYi5sYXN0SW5kZXhPZigiLyIpKTtlPWg7Zj0wO2NvbnRpbnVlfX1lbHNlIGlmKDI9PT1iLmxlbmd0aHx8MT09PWIubGVuZ3RoKXtiPSIiO2Q9MDtlPWg7Zj0wO2NvbnRpbnVlfWEmJihiPTA8Yi5sZW5ndGg/YisiLy4uIjoiLi4iLGQ9Mil9ZWxzZSBiPTA8Yi5sZW5ndGg/YisoIi8iK2Muc2xpY2UoZSsxLGgpKTpjLnNsaWNlKGUrMSxoKSxkPWgtZS0xO2U9aDtmPTB9ZWxzZSA0Nj09PWcmJi0xIT09Zj8rK2Y6Zj0tMX1yZXR1cm4gYn1mdW5jdGlvbiBQYShjKXt2YXIgYT1NYXRoLnRydW5jKGMpO2M9bihNYXRoLnJvdW5kKDFFNiooYy1hKSkpO3JldHVybiBuKGEpKm4oMUU2KStjfWZ1bmN0aW9uIGJiKGMpeyJudW1iZXIiPT09dHlwZW9mIGMmJihjPU1hdGgudHJ1bmMoYykpO2M9bihjKTtyZXR1cm4gTnVtYmVyKGMvbigxRTYpKX1mdW5jdGlvbiBCKGMpe3JldHVybiBmdW5jdGlvbigpe2Zvcih2YXIgYT0KW10sYj0wO2I8YXJndW1lbnRzLmxlbmd0aDtiKyspYVtiXT1hcmd1bWVudHNbYl07dHJ5e3JldHVybiBjLmFwcGx5KHZvaWQgMCxVYihhKSl9Y2F0Y2goZCl7aWYoZCYmZC5jb2RlJiYic3RyaW5nIj09PXR5cGVvZiBkLmNvZGUpcmV0dXJuIE1nW2QuY29kZV18fDI4O2lmKGQgaW5zdGFuY2VvZiBYYylyZXR1cm4gZC5lcnJubzt0aHJvdyBkO319fWZ1bmN0aW9uIGdmKGMsYSl7dmFyIGI9Yy5GRF9NQVAuZ2V0KGEpO2lmKCFiKXRocm93IG5ldyBYYyg4KTtpZih2b2lkIDA9PT1iLmZpbGV0eXBlKXt2YXIgZD1jLmJpbmRpbmdzLmZzLmZzdGF0U3luYyhiLnJlYWwpO2M9aGYoYyxhLGQpO2E9Yy5yaWdodHNCYXNlO2Q9Yy5yaWdodHNJbmhlcml0aW5nO2IuZmlsZXR5cGU9Yy5maWxldHlwZTtiLnJpZ2h0c3x8KGIucmlnaHRzPXtiYXNlOmEsaW5oZXJpdGluZzpkfSl9cmV0dXJuIGJ9ZnVuY3Rpb24gaGYoYyxhLGIpe3N3aXRjaCghMCl7Y2FzZSBiLmlzQmxvY2tEZXZpY2UoKTpyZXR1cm57ZmlsZXR5cGU6MSwKcmlnaHRzQmFzZTpjYixyaWdodHNJbmhlcml0aW5nOmNifTtjYXNlIGIuaXNDaGFyYWN0ZXJEZXZpY2UoKTpyZXR1cm4gdm9pZCAwIT09YSYmYy5iaW5kaW5ncy5pc1RUWShhKT97ZmlsZXR5cGU6MixyaWdodHNCYXNlOk5nLHJpZ2h0c0luaGVyaXRpbmc6T2d9OntmaWxldHlwZToyLHJpZ2h0c0Jhc2U6Y2IscmlnaHRzSW5oZXJpdGluZzpjYn07Y2FzZSBiLmlzRGlyZWN0b3J5KCk6cmV0dXJue2ZpbGV0eXBlOjMscmlnaHRzQmFzZTpZYyxyaWdodHNJbmhlcml0aW5nOmpmfTtjYXNlIGIuaXNGSUZPKCk6cmV0dXJue2ZpbGV0eXBlOjYscmlnaHRzQmFzZTprZixyaWdodHNJbmhlcml0aW5nOmNifTtjYXNlIGIuaXNGaWxlKCk6cmV0dXJue2ZpbGV0eXBlOjQscmlnaHRzQmFzZTpsZixyaWdodHNJbmhlcml0aW5nOlBnfTtjYXNlIGIuaXNTb2NrZXQoKTpyZXR1cm57ZmlsZXR5cGU6NixyaWdodHNCYXNlOmtmLHJpZ2h0c0luaGVyaXRpbmc6Y2J9O2Nhc2UgYi5pc1N5bWJvbGljTGluaygpOnJldHVybntmaWxldHlwZTo3LApyaWdodHNCYXNlOm4oMCkscmlnaHRzSW5oZXJpdGluZzpuKDApfTtkZWZhdWx0OnJldHVybntmaWxldHlwZTowLHJpZ2h0c0Jhc2U6bigwKSxyaWdodHNJbmhlcml0aW5nOm4oMCl9fX1sZXQgdmQ9U3ltYm9sKCJDb21saW5rLnByb3h5IiksRWY9U3ltYm9sKCJDb21saW5rLmVuZHBvaW50IiksRGY9U3ltYm9sKCJDb21saW5rLnJlbGVhc2VQcm94eSIpLG5jPW5ldyBXZWFrU2V0LHlkPW5ldyBNYXAoW1sicHJveHkiLHtjYW5IYW5kbGU6Yz0+YyYmY1t2ZF0sc2VyaWFsaXplKGMpe2NvbnN0IHtwb3J0MTphLHBvcnQyOmJ9PW5ldyBNZXNzYWdlQ2hhbm5lbDttYyhjLGEpO3JldHVybltiLFtiXV19LGRlc2VyaWFsaXplOmM9PntjLnN0YXJ0KCk7cmV0dXJuIHBjKGMsW10sdm9pZCAwKX19XSxbInRocm93Iix7Y2FuSGFuZGxlOmM9Pm5jLmhhcyhjKSxzZXJpYWxpemUoYyl7Y29uc3QgYT1jIGluc3RhbmNlb2YgRXJyb3I7bGV0IGI9YzthJiYoYj17aXNFcnJvcjphLG1lc3NhZ2U6Yy5tZXNzYWdlLApzdGFjazpjLnN0YWNrfSk7cmV0dXJuW2IsW11dfSxkZXNlcmlhbGl6ZShjKXtpZihjLmlzRXJyb3IpdGhyb3cgT2JqZWN0LmFzc2lnbihFcnJvcigpLGMpO3Rocm93IGM7fX1dXSkseGQ9bmV3IFdlYWtNYXA7dmFyIHFjPWZ1bmN0aW9uKGMsYSl7cWM9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGEsYyl7YS5fX3Byb3RvX189Y318fGZ1bmN0aW9uKGEsYyl7Zm9yKHZhciBiIGluIGMpYy5oYXNPd25Qcm9wZXJ0eShiKSYmKGFbYl09Y1tiXSl9O3JldHVybiBxYyhjLGEpfSxkYj1mdW5jdGlvbigpe2RiPU9iamVjdC5hc3NpZ258fGZ1bmN0aW9uKGMpe2Zvcih2YXIgYSxiPTEsZD1hcmd1bWVudHMubGVuZ3RoO2I8ZDtiKyspe2E9YXJndW1lbnRzW2JdO2Zvcih2YXIgZSBpbiBhKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChhLGUpJiYoY1tlXT1hW2VdKX1yZXR1cm4gY307cmV0dXJuIGRiLmFwcGx5KHRoaXMsCmFyZ3VtZW50cyl9LG5hPSJ1bmRlZmluZWQiIT09dHlwZW9mIGdsb2JhbD9nbG9iYWw6InVuZGVmaW5lZCIhPT10eXBlb2Ygc2VsZj9zZWxmOiJ1bmRlZmluZWQiIT09dHlwZW9mIHdpbmRvdz93aW5kb3c6e30sTj0idW5kZWZpbmVkIiE9PXR5cGVvZiBnbG9iYWxUaGlzP2dsb2JhbFRoaXM6InVuZGVmaW5lZCIhPT10eXBlb2Ygd2luZG93P3dpbmRvdzoidW5kZWZpbmVkIiE9PXR5cGVvZiBuYT9uYToidW5kZWZpbmVkIiE9PXR5cGVvZiBzZWxmP3NlbGY6e30sdT1LKGZ1bmN0aW9uKGMsYSl7T2JqZWN0LmRlZmluZVByb3BlcnR5KGEsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO2EuY29uc3RhbnRzPXtPX1JET05MWTowLE9fV1JPTkxZOjEsT19SRFdSOjIsU19JRk1UOjYxNDQwLFNfSUZSRUc6MzI3NjgsU19JRkRJUjoxNjM4NCxTX0lGQ0hSOjgxOTIsU19JRkJMSzoyNDU3NixTX0lGSUZPOjQwOTYsU19JRkxOSzo0MDk2MCxTX0lGU09DSzo0OTE1MixPX0NSRUFUOjY0LE9fRVhDTDoxMjgsCk9fTk9DVFRZOjI1NixPX1RSVU5DOjUxMixPX0FQUEVORDoxMDI0LE9fRElSRUNUT1JZOjY1NTM2LE9fTk9BVElNRToyNjIxNDQsT19OT0ZPTExPVzoxMzEwNzIsT19TWU5DOjEwNTI2NzIsT19ESVJFQ1Q6MTYzODQsT19OT05CTE9DSzoyMDQ4LFNfSVJXWFU6NDQ4LFNfSVJVU1I6MjU2LFNfSVdVU1I6MTI4LFNfSVhVU1I6NjQsU19JUldYRzo1NixTX0lSR1JQOjMyLFNfSVdHUlA6MTYsU19JWEdSUDo4LFNfSVJXWE86NyxTX0lST1RIOjQsU19JV09USDoyLFNfSVhPVEg6MSxGX09LOjAsUl9PSzo0LFdfT0s6MixYX09LOjEsVVZfRlNfU1lNTElOS19ESVI6MSxVVl9GU19TWU1MSU5LX0pVTkNUSU9OOjIsVVZfRlNfQ09QWUZJTEVfRVhDTDoxLFVWX0ZTX0NPUFlGSUxFX0ZJQ0xPTkU6MixVVl9GU19DT1BZRklMRV9GSUNMT05FX0ZPUkNFOjQsQ09QWUZJTEVfRVhDTDoxLENPUFlGSUxFX0ZJQ0xPTkU6MixDT1BZRklMRV9GSUNMT05FX0ZPUkNFOjR9fSk7USh1KTt2YXIgUWc9SyhmdW5jdGlvbihjLAphKXthLmRlZmF1bHQ9ImZ1bmN0aW9uIj09PXR5cGVvZiBCaWdJbnQ/QmlnSW50OmZ1bmN0aW9uKCl7dGhyb3cgRXJyb3IoIkJpZ0ludCBpcyBub3Qgc3VwcG9ydGVkIGluIHRoaXMgZW52aXJvbm1lbnQuIik7fX0pLGViPUsoZnVuY3Rpb24oYyxhKXtPYmplY3QuZGVmaW5lUHJvcGVydHkoYSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIGI9dS5jb25zdGFudHMuU19JRk1ULGQ9dS5jb25zdGFudHMuU19JRkRJUixlPXUuY29uc3RhbnRzLlNfSUZSRUcsZj11LmNvbnN0YW50cy5TX0lGQkxLLGc9dS5jb25zdGFudHMuU19JRkNIUixoPXUuY29uc3RhbnRzLlNfSUZMTkssaz11LmNvbnN0YW50cy5TX0lGSUZPLHQ9dS5jb25zdGFudHMuU19JRlNPQ0s7Yz1mdW5jdGlvbigpe2Z1bmN0aW9uIGEoKXt9YS5idWlsZD1mdW5jdGlvbihjLGIpe3ZvaWQgMD09PWImJihiPSExKTt2YXIgZD1uZXcgYSxlPWMuZ2lkLGY9Yy5hdGltZSxoPWMubXRpbWUsZz1jLmN0aW1lO2I9Yj9RZy5kZWZhdWx0OgpmdW5jdGlvbihhKXtyZXR1cm4gYX07ZC51aWQ9YihjLnVpZCk7ZC5naWQ9YihlKTtkLnJkZXY9YigwKTtkLmJsa3NpemU9Yig0MDk2KTtkLmlubz1iKGMuaW5vKTtkLnNpemU9YihjLmdldFNpemUoKSk7ZC5ibG9ja3M9YigxKTtkLmF0aW1lPWY7ZC5tdGltZT1oO2QuY3RpbWU9ZztkLmJpcnRodGltZT1nO2QuYXRpbWVNcz1iKGYuZ2V0VGltZSgpKTtkLm10aW1lTXM9YihoLmdldFRpbWUoKSk7ZT1iKGcuZ2V0VGltZSgpKTtkLmN0aW1lTXM9ZTtkLmJpcnRodGltZU1zPWU7ZC5kZXY9YigwKTtkLm1vZGU9YihjLm1vZGUpO2Qubmxpbms9YihjLm5saW5rKTtyZXR1cm4gZH07YS5wcm90b3R5cGUuX2NoZWNrTW9kZVByb3BlcnR5PWZ1bmN0aW9uKGEpe3JldHVybihOdW1iZXIodGhpcy5tb2RlKSZiKT09PWF9O2EucHJvdG90eXBlLmlzRGlyZWN0b3J5PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NoZWNrTW9kZVByb3BlcnR5KGQpfTthLnByb3RvdHlwZS5pc0ZpbGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2hlY2tNb2RlUHJvcGVydHkoZSl9OwphLnByb3RvdHlwZS5pc0Jsb2NrRGV2aWNlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NoZWNrTW9kZVByb3BlcnR5KGYpfTthLnByb3RvdHlwZS5pc0NoYXJhY3RlckRldmljZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9jaGVja01vZGVQcm9wZXJ0eShnKX07YS5wcm90b3R5cGUuaXNTeW1ib2xpY0xpbms9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2hlY2tNb2RlUHJvcGVydHkoaCl9O2EucHJvdG90eXBlLmlzRklGTz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9jaGVja01vZGVQcm9wZXJ0eShrKX07YS5wcm90b3R5cGUuaXNTb2NrZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2hlY2tNb2RlUHJvcGVydHkodCl9O3JldHVybiBhfSgpO2EuU3RhdHM9YzthLmRlZmF1bHQ9Y30pO1EoZWIpO3ZhciBLYT0idW5kZWZpbmVkIiE9PXR5cGVvZiBuYT9uYToidW5kZWZpbmVkIiE9PXR5cGVvZiBzZWxmP3NlbGY6InVuZGVmaW5lZCIhPT10eXBlb2Ygd2luZG93P3dpbmRvdzp7fSxSPVtdLApIPVtdLE9mPSJ1bmRlZmluZWQiIT09dHlwZW9mIFVpbnQ4QXJyYXk/VWludDhBcnJheTpBcnJheSxzYz0hMSxSZz17fS50b1N0cmluZyxGZD1BcnJheS5pc0FycmF5fHxmdW5jdGlvbihjKXtyZXR1cm4iW29iamVjdCBBcnJheV0iPT1SZy5jYWxsKGMpfTtsLlRZUEVEX0FSUkFZX1NVUFBPUlQ9dm9pZCAwIT09S2EuVFlQRURfQVJSQVlfU1VQUE9SVD9LYS5UWVBFRF9BUlJBWV9TVVBQT1JUOiEwO3ZhciBTZz1sLlRZUEVEX0FSUkFZX1NVUFBPUlQ/MjE0NzQ4MzY0NzoxMDczNzQxODIzO2wucG9vbFNpemU9ODE5MjtsLl9hdWdtZW50PWZ1bmN0aW9uKGMpe2MuX19wcm90b19fPWwucHJvdG90eXBlO3JldHVybiBjfTtsLmZyb209ZnVuY3Rpb24oYyxhLGIpe3JldHVybiBDZChudWxsLGMsYSxiKX07bC5UWVBFRF9BUlJBWV9TVVBQT1JUJiYobC5wcm90b3R5cGUuX19wcm90b19fPVVpbnQ4QXJyYXkucHJvdG90eXBlLGwuX19wcm90b19fPVVpbnQ4QXJyYXkpO2wuYWxsb2M9ZnVuY3Rpb24oYywKYSxiKXtFZChjKTtyZXR1cm4gYz0wPj1jP2phKG51bGwsYyk6dm9pZCAwIT09YT8ic3RyaW5nIj09PXR5cGVvZiBiP2phKG51bGwsYykuZmlsbChhLGIpOmphKG51bGwsYykuZmlsbChhKTpqYShudWxsLGMpfTtsLmFsbG9jVW5zYWZlPWZ1bmN0aW9uKGMpe3JldHVybiB0YyhudWxsLGMpfTtsLmFsbG9jVW5zYWZlU2xvdz1mdW5jdGlvbihjKXtyZXR1cm4gdGMobnVsbCxjKX07bC5pc0J1ZmZlcj1wYTtsLmNvbXBhcmU9ZnVuY3Rpb24oYyxhKXtpZighVyhjKXx8IVcoYSkpdGhyb3cgbmV3IFR5cGVFcnJvcigiQXJndW1lbnRzIG11c3QgYmUgQnVmZmVycyIpO2lmKGM9PT1hKXJldHVybiAwO2Zvcih2YXIgYj1jLmxlbmd0aCxkPWEubGVuZ3RoLGU9MCxmPU1hdGgubWluKGIsZCk7ZTxmOysrZSlpZihjW2VdIT09YVtlXSl7Yj1jW2VdO2Q9YVtlXTticmVha31yZXR1cm4gYjxkPy0xOmQ8Yj8xOjB9O2wuaXNFbmNvZGluZz1mdW5jdGlvbihjKXtzd2l0Y2goU3RyaW5nKGMpLnRvTG93ZXJDYXNlKCkpe2Nhc2UgImhleCI6Y2FzZSAidXRmOCI6Y2FzZSAidXRmLTgiOmNhc2UgImFzY2lpIjpjYXNlICJsYXRpbjEiOmNhc2UgImJpbmFyeSI6Y2FzZSAiYmFzZTY0IjpjYXNlICJ1Y3MyIjpjYXNlICJ1Y3MtMiI6Y2FzZSAidXRmMTZsZSI6Y2FzZSAidXRmLTE2bGUiOnJldHVybiEwOwpkZWZhdWx0OnJldHVybiExfX07bC5jb25jYXQ9ZnVuY3Rpb24oYyxhKXtpZighRmQoYykpdGhyb3cgbmV3IFR5cGVFcnJvcignImxpc3QiIGFyZ3VtZW50IG11c3QgYmUgYW4gQXJyYXkgb2YgQnVmZmVycycpO2lmKDA9PT1jLmxlbmd0aClyZXR1cm4gbC5hbGxvYygwKTt2YXIgYjtpZih2b2lkIDA9PT1hKWZvcihiPWE9MDtiPGMubGVuZ3RoOysrYilhKz1jW2JdLmxlbmd0aDthPWwuYWxsb2NVbnNhZmUoYSk7dmFyIGQ9MDtmb3IoYj0wO2I8Yy5sZW5ndGg7KytiKXt2YXIgZT1jW2JdO2lmKCFXKGUpKXRocm93IG5ldyBUeXBlRXJyb3IoJyJsaXN0IiBhcmd1bWVudCBtdXN0IGJlIGFuIEFycmF5IG9mIEJ1ZmZlcnMnKTtlLmNvcHkoYSxkKTtkKz1lLmxlbmd0aH1yZXR1cm4gYX07bC5ieXRlTGVuZ3RoPURkO2wucHJvdG90eXBlLl9pc0J1ZmZlcj0hMDtsLnByb3RvdHlwZS5zd2FwMTY9ZnVuY3Rpb24oKXt2YXIgYz10aGlzLmxlbmd0aDtpZigwIT09YyUyKXRocm93IG5ldyBSYW5nZUVycm9yKCJCdWZmZXIgc2l6ZSBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgMTYtYml0cyIpOwpmb3IodmFyIGE9MDthPGM7YSs9MilHYSh0aGlzLGEsYSsxKTtyZXR1cm4gdGhpc307bC5wcm90b3R5cGUuc3dhcDMyPWZ1bmN0aW9uKCl7dmFyIGM9dGhpcy5sZW5ndGg7aWYoMCE9PWMlNCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiQnVmZmVyIHNpemUgbXVzdCBiZSBhIG11bHRpcGxlIG9mIDMyLWJpdHMiKTtmb3IodmFyIGE9MDthPGM7YSs9NClHYSh0aGlzLGEsYSszKSxHYSh0aGlzLGErMSxhKzIpO3JldHVybiB0aGlzfTtsLnByb3RvdHlwZS5zd2FwNjQ9ZnVuY3Rpb24oKXt2YXIgYz10aGlzLmxlbmd0aDtpZigwIT09YyU4KXRocm93IG5ldyBSYW5nZUVycm9yKCJCdWZmZXIgc2l6ZSBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgNjQtYml0cyIpO2Zvcih2YXIgYT0wO2E8YzthKz04KUdhKHRoaXMsYSxhKzcpLEdhKHRoaXMsYSsxLGErNiksR2EodGhpcyxhKzIsYSs1KSxHYSh0aGlzLGErMyxhKzQpO3JldHVybiB0aGlzfTtsLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3ZhciBjPQp0aGlzLmxlbmd0aHwwO3JldHVybiAwPT09Yz8iIjowPT09YXJndW1lbnRzLmxlbmd0aD9IZCh0aGlzLDAsYyk6TWYuYXBwbHkodGhpcyxhcmd1bWVudHMpfTtsLnByb3RvdHlwZS5lcXVhbHM9ZnVuY3Rpb24oYyl7aWYoIVcoYykpdGhyb3cgbmV3IFR5cGVFcnJvcigiQXJndW1lbnQgbXVzdCBiZSBhIEJ1ZmZlciIpO3JldHVybiB0aGlzPT09Yz8hMDowPT09bC5jb21wYXJlKHRoaXMsYyl9O2wucHJvdG90eXBlLmluc3BlY3Q9ZnVuY3Rpb24oKXt2YXIgYz0iIjswPHRoaXMubGVuZ3RoJiYoYz10aGlzLnRvU3RyaW5nKCJoZXgiLDAsNTApLm1hdGNoKC8uezJ9L2cpLmpvaW4oIiAiKSw1MDx0aGlzLmxlbmd0aCYmKGMrPSIgLi4uICIpKTtyZXR1cm4iPEJ1ZmZlciAiK2MrIj4ifTtsLnByb3RvdHlwZS5jb21wYXJlPWZ1bmN0aW9uKGMsYSxiLGQsZSl7aWYoIVcoYykpdGhyb3cgbmV3IFR5cGVFcnJvcigiQXJndW1lbnQgbXVzdCBiZSBhIEJ1ZmZlciIpO3ZvaWQgMD09PWEmJihhPTApO3ZvaWQgMD09PQpiJiYoYj1jP2MubGVuZ3RoOjApO3ZvaWQgMD09PWQmJihkPTApO3ZvaWQgMD09PWUmJihlPXRoaXMubGVuZ3RoKTtpZigwPmF8fGI+Yy5sZW5ndGh8fDA+ZHx8ZT50aGlzLmxlbmd0aCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigib3V0IG9mIHJhbmdlIGluZGV4Iik7aWYoZD49ZSYmYT49YilyZXR1cm4gMDtpZihkPj1lKXJldHVybi0xO2lmKGE+PWIpcmV0dXJuIDE7YT4+Pj0wO2I+Pj49MDtkPj4+PTA7ZT4+Pj0wO2lmKHRoaXM9PT1jKXJldHVybiAwO3ZhciBmPWUtZCxnPWItYSxoPU1hdGgubWluKGYsZyk7ZD10aGlzLnNsaWNlKGQsZSk7Yz1jLnNsaWNlKGEsYik7Zm9yKGE9MDthPGg7KythKWlmKGRbYV0hPT1jW2FdKXtmPWRbYV07Zz1jW2FdO2JyZWFrfXJldHVybiBmPGc/LTE6ZzxmPzE6MH07bC5wcm90b3R5cGUuaW5jbHVkZXM9ZnVuY3Rpb24oYyxhLGIpe3JldHVybi0xIT09dGhpcy5pbmRleE9mKGMsYSxiKX07bC5wcm90b3R5cGUuaW5kZXhPZj1mdW5jdGlvbihjLGEsYil7cmV0dXJuIElkKHRoaXMsCmMsYSxiLCEwKX07bC5wcm90b3R5cGUubGFzdEluZGV4T2Y9ZnVuY3Rpb24oYyxhLGIpe3JldHVybiBJZCh0aGlzLGMsYSxiLCExKX07bC5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24oYyxhLGIsZCl7aWYodm9pZCAwPT09YSlkPSJ1dGY4IixiPXRoaXMubGVuZ3RoLGE9MDtlbHNlIGlmKHZvaWQgMD09PWImJiJzdHJpbmciPT09dHlwZW9mIGEpZD1hLGI9dGhpcy5sZW5ndGgsYT0wO2Vsc2UgaWYoaXNGaW5pdGUoYSkpYXw9MCxpc0Zpbml0ZShiKT8oYnw9MCx2b2lkIDA9PT1kJiYoZD0idXRmOCIpKTooZD1iLGI9dm9pZCAwKTtlbHNlIHRocm93IEVycm9yKCJCdWZmZXIud3JpdGUoc3RyaW5nLCBlbmNvZGluZywgb2Zmc2V0WywgbGVuZ3RoXSkgaXMgbm8gbG9uZ2VyIHN1cHBvcnRlZCIpO3ZhciBlPXRoaXMubGVuZ3RoLWE7aWYodm9pZCAwPT09Ynx8Yj5lKWI9ZTtpZigwPGMubGVuZ3RoJiYoMD5ifHwwPmEpfHxhPnRoaXMubGVuZ3RoKXRocm93IG5ldyBSYW5nZUVycm9yKCJBdHRlbXB0IHRvIHdyaXRlIG91dHNpZGUgYnVmZmVyIGJvdW5kcyIpOwpkfHwoZD0idXRmOCIpO2ZvcihlPSExOzspc3dpdGNoKGQpe2Nhc2UgImhleCI6YTp7YT1OdW1iZXIoYSl8fDA7ZD10aGlzLmxlbmd0aC1hO2I/KGI9TnVtYmVyKGIpLGI+ZCYmKGI9ZCkpOmI9ZDtkPWMubGVuZ3RoO2lmKDAhPT1kJTIpdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBoZXggc3RyaW5nIik7Yj5kLzImJihiPWQvMik7Zm9yKGQ9MDtkPGI7KytkKXtlPXBhcnNlSW50KGMuc3Vic3RyKDIqZCwyKSwxNik7aWYoaXNOYU4oZSkpe2M9ZDticmVhayBhfXRoaXNbYStkXT1lfWM9ZH1yZXR1cm4gYztjYXNlICJ1dGY4IjpjYXNlICJ1dGYtOCI6cmV0dXJuIG5iKEliKGMsdGhpcy5sZW5ndGgtYSksdGhpcyxhLGIpO2Nhc2UgImFzY2lpIjpyZXR1cm4gbmIoTGQoYyksdGhpcyxhLGIpO2Nhc2UgImxhdGluMSI6Y2FzZSAiYmluYXJ5IjpyZXR1cm4gbmIoTGQoYyksdGhpcyxhLGIpO2Nhc2UgImJhc2U2NCI6cmV0dXJuIG5iKEdkKGMpLHRoaXMsYSxiKTtjYXNlICJ1Y3MyIjpjYXNlICJ1Y3MtMiI6Y2FzZSAidXRmMTZsZSI6Y2FzZSAidXRmLTE2bGUiOmQ9CmM7ZT10aGlzLmxlbmd0aC1hO2Zvcih2YXIgZj1bXSxnPTA7ZzxkLmxlbmd0aCYmISgwPihlLT0yKSk7KytnKXt2YXIgaD1kLmNoYXJDb2RlQXQoZyk7Yz1oPj44O2glPTI1NjtmLnB1c2goaCk7Zi5wdXNoKGMpfXJldHVybiBuYihmLHRoaXMsYSxiKTtkZWZhdWx0OmlmKGUpdGhyb3cgbmV3IFR5cGVFcnJvcigiVW5rbm93biBlbmNvZGluZzogIitkKTtkPSgiIitkKS50b0xvd2VyQ2FzZSgpO2U9ITB9fTtsLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm57dHlwZToiQnVmZmVyIixkYXRhOkFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHRoaXMuX2Fycnx8dGhpcywwKX19O3ZhciBLZD00MDk2O2wucHJvdG90eXBlLnNsaWNlPWZ1bmN0aW9uKGMsYSl7dmFyIGI9dGhpcy5sZW5ndGg7Yz1+fmM7YT12b2lkIDA9PT1hP2I6fn5hOzA+Yz8oYys9YiwwPmMmJihjPTApKTpjPmImJihjPWIpOzA+YT8oYSs9YiwwPmEmJihhPTApKTphPmImJihhPWIpO2E8YyYmKGE9Yyk7aWYobC5UWVBFRF9BUlJBWV9TVVBQT1JUKWE9CnRoaXMuc3ViYXJyYXkoYyxhKSxhLl9fcHJvdG9fXz1sLnByb3RvdHlwZTtlbHNle2I9YS1jO2E9bmV3IGwoYix2b2lkIDApO2Zvcih2YXIgZD0wO2Q8YjsrK2QpYVtkXT10aGlzW2QrY119cmV0dXJuIGF9O2wucHJvdG90eXBlLnJlYWRVSW50TEU9ZnVuY3Rpb24oYyxhLGIpe2N8PTA7YXw9MDtifHxEKGMsYSx0aGlzLmxlbmd0aCk7Yj10aGlzW2NdO2Zvcih2YXIgZD0xLGU9MDsrK2U8YSYmKGQqPTI1Nik7KWIrPXRoaXNbYytlXSpkO3JldHVybiBifTtsLnByb3RvdHlwZS5yZWFkVUludEJFPWZ1bmN0aW9uKGMsYSxiKXtjfD0wO2F8PTA7Ynx8RChjLGEsdGhpcy5sZW5ndGgpO2I9dGhpc1tjKy0tYV07Zm9yKHZhciBkPTE7MDxhJiYoZCo9MjU2KTspYis9dGhpc1tjKy0tYV0qZDtyZXR1cm4gYn07bC5wcm90b3R5cGUucmVhZFVJbnQ4PWZ1bmN0aW9uKGMsYSl7YXx8RChjLDEsdGhpcy5sZW5ndGgpO3JldHVybiB0aGlzW2NdfTtsLnByb3RvdHlwZS5yZWFkVUludDE2TEU9ZnVuY3Rpb24oYywKYSl7YXx8RChjLDIsdGhpcy5sZW5ndGgpO3JldHVybiB0aGlzW2NdfHRoaXNbYysxXTw8OH07bC5wcm90b3R5cGUucmVhZFVJbnQxNkJFPWZ1bmN0aW9uKGMsYSl7YXx8RChjLDIsdGhpcy5sZW5ndGgpO3JldHVybiB0aGlzW2NdPDw4fHRoaXNbYysxXX07bC5wcm90b3R5cGUucmVhZFVJbnQzMkxFPWZ1bmN0aW9uKGMsYSl7YXx8RChjLDQsdGhpcy5sZW5ndGgpO3JldHVybih0aGlzW2NdfHRoaXNbYysxXTw8OHx0aGlzW2MrMl08PDE2KSsxNjc3NzIxNip0aGlzW2MrM119O2wucHJvdG90eXBlLnJlYWRVSW50MzJCRT1mdW5jdGlvbihjLGEpe2F8fEQoYyw0LHRoaXMubGVuZ3RoKTtyZXR1cm4gMTY3NzcyMTYqdGhpc1tjXSsodGhpc1tjKzFdPDwxNnx0aGlzW2MrMl08PDh8dGhpc1tjKzNdKX07bC5wcm90b3R5cGUucmVhZEludExFPWZ1bmN0aW9uKGMsYSxiKXtjfD0wO2F8PTA7Ynx8RChjLGEsdGhpcy5sZW5ndGgpO2I9dGhpc1tjXTtmb3IodmFyIGQ9MSxlPTA7KytlPGEmJihkKj0yNTYpOyliKz0KdGhpc1tjK2VdKmQ7Yj49MTI4KmQmJihiLT1NYXRoLnBvdygyLDgqYSkpO3JldHVybiBifTtsLnByb3RvdHlwZS5yZWFkSW50QkU9ZnVuY3Rpb24oYyxhLGIpe2N8PTA7YXw9MDtifHxEKGMsYSx0aGlzLmxlbmd0aCk7Yj1hO2Zvcih2YXIgZD0xLGU9dGhpc1tjKy0tYl07MDxiJiYoZCo9MjU2KTspZSs9dGhpc1tjKy0tYl0qZDtlPj0xMjgqZCYmKGUtPU1hdGgucG93KDIsOCphKSk7cmV0dXJuIGV9O2wucHJvdG90eXBlLnJlYWRJbnQ4PWZ1bmN0aW9uKGMsYSl7YXx8RChjLDEsdGhpcy5sZW5ndGgpO3JldHVybiB0aGlzW2NdJjEyOD8tMSooMjU1LXRoaXNbY10rMSk6dGhpc1tjXX07bC5wcm90b3R5cGUucmVhZEludDE2TEU9ZnVuY3Rpb24oYyxhKXthfHxEKGMsMix0aGlzLmxlbmd0aCk7Yz10aGlzW2NdfHRoaXNbYysxXTw8ODtyZXR1cm4gYyYzMjc2OD9jfDQyOTQ5MDE3NjA6Y307bC5wcm90b3R5cGUucmVhZEludDE2QkU9ZnVuY3Rpb24oYyxhKXthfHxEKGMsMix0aGlzLmxlbmd0aCk7CmM9dGhpc1tjKzFdfHRoaXNbY108PDg7cmV0dXJuIGMmMzI3Njg/Y3w0Mjk0OTAxNzYwOmN9O2wucHJvdG90eXBlLnJlYWRJbnQzMkxFPWZ1bmN0aW9uKGMsYSl7YXx8RChjLDQsdGhpcy5sZW5ndGgpO3JldHVybiB0aGlzW2NdfHRoaXNbYysxXTw8OHx0aGlzW2MrMl08PDE2fHRoaXNbYyszXTw8MjR9O2wucHJvdG90eXBlLnJlYWRJbnQzMkJFPWZ1bmN0aW9uKGMsYSl7YXx8RChjLDQsdGhpcy5sZW5ndGgpO3JldHVybiB0aGlzW2NdPDwyNHx0aGlzW2MrMV08PDE2fHRoaXNbYysyXTw8OHx0aGlzW2MrM119O2wucHJvdG90eXBlLnJlYWRGbG9hdExFPWZ1bmN0aW9uKGMsYSl7YXx8RChjLDQsdGhpcy5sZW5ndGgpO3JldHVybiBHYih0aGlzLGMsITAsMjMsNCl9O2wucHJvdG90eXBlLnJlYWRGbG9hdEJFPWZ1bmN0aW9uKGMsYSl7YXx8RChjLDQsdGhpcy5sZW5ndGgpO3JldHVybiBHYih0aGlzLGMsITEsMjMsNCl9O2wucHJvdG90eXBlLnJlYWREb3VibGVMRT1mdW5jdGlvbihjLGEpe2F8fApEKGMsOCx0aGlzLmxlbmd0aCk7cmV0dXJuIEdiKHRoaXMsYywhMCw1Miw4KX07bC5wcm90b3R5cGUucmVhZERvdWJsZUJFPWZ1bmN0aW9uKGMsYSl7YXx8RChjLDgsdGhpcy5sZW5ndGgpO3JldHVybiBHYih0aGlzLGMsITEsNTIsOCl9O2wucHJvdG90eXBlLndyaXRlVUludExFPWZ1bmN0aW9uKGMsYSxiLGQpe2M9K2M7YXw9MDtifD0wO2R8fFQodGhpcyxjLGEsYixNYXRoLnBvdygyLDgqYiktMSwwKTtkPTE7dmFyIGU9MDtmb3IodGhpc1thXT1jJjI1NTsrK2U8YiYmKGQqPTI1Nik7KXRoaXNbYStlXT1jL2QmMjU1O3JldHVybiBhK2J9O2wucHJvdG90eXBlLndyaXRlVUludEJFPWZ1bmN0aW9uKGMsYSxiLGQpe2M9K2M7YXw9MDtifD0wO2R8fFQodGhpcyxjLGEsYixNYXRoLnBvdygyLDgqYiktMSwwKTtkPWItMTt2YXIgZT0xO2Zvcih0aGlzW2ErZF09YyYyNTU7MDw9LS1kJiYoZSo9MjU2KTspdGhpc1thK2RdPWMvZSYyNTU7cmV0dXJuIGErYn07bC5wcm90b3R5cGUud3JpdGVVSW50OD0KZnVuY3Rpb24oYyxhLGIpe2M9K2M7YXw9MDtifHxUKHRoaXMsYyxhLDEsMjU1LDApO2wuVFlQRURfQVJSQVlfU1VQUE9SVHx8KGM9TWF0aC5mbG9vcihjKSk7dGhpc1thXT1jJjI1NTtyZXR1cm4gYSsxfTtsLnByb3RvdHlwZS53cml0ZVVJbnQxNkxFPWZ1bmN0aW9uKGMsYSxiKXtjPStjO2F8PTA7Ynx8VCh0aGlzLGMsYSwyLDY1NTM1LDApO2wuVFlQRURfQVJSQVlfU1VQUE9SVD8odGhpc1thXT1jJjI1NSx0aGlzW2ErMV09Yz4+PjgpOkpiKHRoaXMsYyxhLCEwKTtyZXR1cm4gYSsyfTtsLnByb3RvdHlwZS53cml0ZVVJbnQxNkJFPWZ1bmN0aW9uKGMsYSxiKXtjPStjO2F8PTA7Ynx8VCh0aGlzLGMsYSwyLDY1NTM1LDApO2wuVFlQRURfQVJSQVlfU1VQUE9SVD8odGhpc1thXT1jPj4+OCx0aGlzW2ErMV09YyYyNTUpOkpiKHRoaXMsYyxhLCExKTtyZXR1cm4gYSsyfTtsLnByb3RvdHlwZS53cml0ZVVJbnQzMkxFPWZ1bmN0aW9uKGMsYSxiKXtjPStjO2F8PTA7Ynx8VCh0aGlzLGMsYSw0LAo0Mjk0OTY3Mjk1LDApO2wuVFlQRURfQVJSQVlfU1VQUE9SVD8odGhpc1thKzNdPWM+Pj4yNCx0aGlzW2ErMl09Yz4+PjE2LHRoaXNbYSsxXT1jPj4+OCx0aGlzW2FdPWMmMjU1KTpLYih0aGlzLGMsYSwhMCk7cmV0dXJuIGErNH07bC5wcm90b3R5cGUud3JpdGVVSW50MzJCRT1mdW5jdGlvbihjLGEsYil7Yz0rYzthfD0wO2J8fFQodGhpcyxjLGEsNCw0Mjk0OTY3Mjk1LDApO2wuVFlQRURfQVJSQVlfU1VQUE9SVD8odGhpc1thXT1jPj4+MjQsdGhpc1thKzFdPWM+Pj4xNix0aGlzW2ErMl09Yz4+PjgsdGhpc1thKzNdPWMmMjU1KTpLYih0aGlzLGMsYSwhMSk7cmV0dXJuIGErNH07bC5wcm90b3R5cGUud3JpdGVJbnRMRT1mdW5jdGlvbihjLGEsYixkKXtjPStjO2F8PTA7ZHx8KGQ9TWF0aC5wb3coMiw4KmItMSksVCh0aGlzLGMsYSxiLGQtMSwtZCkpO2Q9MDt2YXIgZT0xLGY9MDtmb3IodGhpc1thXT1jJjI1NTsrK2Q8YiYmKGUqPTI1Nik7KTA+YyYmMD09PWYmJjAhPT10aGlzW2ErZC0KMV0mJihmPTEpLHRoaXNbYStkXT0oYy9lPj4wKS1mJjI1NTtyZXR1cm4gYStifTtsLnByb3RvdHlwZS53cml0ZUludEJFPWZ1bmN0aW9uKGMsYSxiLGQpe2M9K2M7YXw9MDtkfHwoZD1NYXRoLnBvdygyLDgqYi0xKSxUKHRoaXMsYyxhLGIsZC0xLC1kKSk7ZD1iLTE7dmFyIGU9MSxmPTA7Zm9yKHRoaXNbYStkXT1jJjI1NTswPD0tLWQmJihlKj0yNTYpOykwPmMmJjA9PT1mJiYwIT09dGhpc1thK2QrMV0mJihmPTEpLHRoaXNbYStkXT0oYy9lPj4wKS1mJjI1NTtyZXR1cm4gYStifTtsLnByb3RvdHlwZS53cml0ZUludDg9ZnVuY3Rpb24oYyxhLGIpe2M9K2M7YXw9MDtifHxUKHRoaXMsYyxhLDEsMTI3LC0xMjgpO2wuVFlQRURfQVJSQVlfU1VQUE9SVHx8KGM9TWF0aC5mbG9vcihjKSk7MD5jJiYoYz0yNTUrYysxKTt0aGlzW2FdPWMmMjU1O3JldHVybiBhKzF9O2wucHJvdG90eXBlLndyaXRlSW50MTZMRT1mdW5jdGlvbihjLGEsYil7Yz0rYzthfD0wO2J8fFQodGhpcyxjLGEsMiwzMjc2NywKLTMyNzY4KTtsLlRZUEVEX0FSUkFZX1NVUFBPUlQ/KHRoaXNbYV09YyYyNTUsdGhpc1thKzFdPWM+Pj44KTpKYih0aGlzLGMsYSwhMCk7cmV0dXJuIGErMn07bC5wcm90b3R5cGUud3JpdGVJbnQxNkJFPWZ1bmN0aW9uKGMsYSxiKXtjPStjO2F8PTA7Ynx8VCh0aGlzLGMsYSwyLDMyNzY3LC0zMjc2OCk7bC5UWVBFRF9BUlJBWV9TVVBQT1JUPyh0aGlzW2FdPWM+Pj44LHRoaXNbYSsxXT1jJjI1NSk6SmIodGhpcyxjLGEsITEpO3JldHVybiBhKzJ9O2wucHJvdG90eXBlLndyaXRlSW50MzJMRT1mdW5jdGlvbihjLGEsYil7Yz0rYzthfD0wO2J8fFQodGhpcyxjLGEsNCwyMTQ3NDgzNjQ3LC0yMTQ3NDgzNjQ4KTtsLlRZUEVEX0FSUkFZX1NVUFBPUlQ/KHRoaXNbYV09YyYyNTUsdGhpc1thKzFdPWM+Pj44LHRoaXNbYSsyXT1jPj4+MTYsdGhpc1thKzNdPWM+Pj4yNCk6S2IodGhpcyxjLGEsITApO3JldHVybiBhKzR9O2wucHJvdG90eXBlLndyaXRlSW50MzJCRT1mdW5jdGlvbihjLGEsYil7Yz0KK2M7YXw9MDtifHxUKHRoaXMsYyxhLDQsMjE0NzQ4MzY0NywtMjE0NzQ4MzY0OCk7MD5jJiYoYz00Mjk0OTY3Mjk1K2MrMSk7bC5UWVBFRF9BUlJBWV9TVVBQT1JUPyh0aGlzW2FdPWM+Pj4yNCx0aGlzW2ErMV09Yz4+PjE2LHRoaXNbYSsyXT1jPj4+OCx0aGlzW2ErM109YyYyNTUpOktiKHRoaXMsYyxhLCExKTtyZXR1cm4gYSs0fTtsLnByb3RvdHlwZS53cml0ZUZsb2F0TEU9ZnVuY3Rpb24oYyxhLGIpe2J8fExiKHRoaXMsYyxhLDQpO0hiKHRoaXMsYyxhLCEwLDIzLDQpO3JldHVybiBhKzR9O2wucHJvdG90eXBlLndyaXRlRmxvYXRCRT1mdW5jdGlvbihjLGEsYil7Ynx8TGIodGhpcyxjLGEsNCk7SGIodGhpcyxjLGEsITEsMjMsNCk7cmV0dXJuIGErNH07bC5wcm90b3R5cGUud3JpdGVEb3VibGVMRT1mdW5jdGlvbihjLGEsYil7Ynx8TGIodGhpcyxjLGEsOCk7SGIodGhpcyxjLGEsITAsNTIsOCk7cmV0dXJuIGErOH07bC5wcm90b3R5cGUud3JpdGVEb3VibGVCRT1mdW5jdGlvbihjLAphLGIpe2J8fExiKHRoaXMsYyxhLDgpO0hiKHRoaXMsYyxhLCExLDUyLDgpO3JldHVybiBhKzh9O2wucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24oYyxhLGIsZCl7Ynx8KGI9MCk7ZHx8MD09PWR8fChkPXRoaXMubGVuZ3RoKTthPj1jLmxlbmd0aCYmKGE9Yy5sZW5ndGgpO2F8fChhPTApOzA8ZCYmZDxiJiYoZD1iKTtpZihkPT09Ynx8MD09PWMubGVuZ3RofHwwPT09dGhpcy5sZW5ndGgpcmV0dXJuIDA7aWYoMD5hKXRocm93IG5ldyBSYW5nZUVycm9yKCJ0YXJnZXRTdGFydCBvdXQgb2YgYm91bmRzIik7aWYoMD5ifHxiPj10aGlzLmxlbmd0aCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigic291cmNlU3RhcnQgb3V0IG9mIGJvdW5kcyIpO2lmKDA+ZCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigic291cmNlRW5kIG91dCBvZiBib3VuZHMiKTtkPnRoaXMubGVuZ3RoJiYoZD10aGlzLmxlbmd0aCk7Yy5sZW5ndGgtYTxkLWImJihkPWMubGVuZ3RoLWErYik7dmFyIGU9ZC1iO2lmKHRoaXM9PT1jJiZiPGEmJgphPGQpZm9yKGQ9ZS0xOzA8PWQ7LS1kKWNbZCthXT10aGlzW2QrYl07ZWxzZSBpZigxRTM+ZXx8IWwuVFlQRURfQVJSQVlfU1VQUE9SVClmb3IoZD0wO2Q8ZTsrK2QpY1tkK2FdPXRoaXNbZCtiXTtlbHNlIFVpbnQ4QXJyYXkucHJvdG90eXBlLnNldC5jYWxsKGMsdGhpcy5zdWJhcnJheShiLGIrZSksYSk7cmV0dXJuIGV9O2wucHJvdG90eXBlLmZpbGw9ZnVuY3Rpb24oYyxhLGIsZCl7aWYoInN0cmluZyI9PT10eXBlb2YgYyl7InN0cmluZyI9PT10eXBlb2YgYT8oZD1hLGE9MCxiPXRoaXMubGVuZ3RoKToic3RyaW5nIj09PXR5cGVvZiBiJiYoZD1iLGI9dGhpcy5sZW5ndGgpO2lmKDE9PT1jLmxlbmd0aCl7dmFyIGU9Yy5jaGFyQ29kZUF0KDApOzI1Nj5lJiYoYz1lKX1pZih2b2lkIDAhPT1kJiYic3RyaW5nIiE9PXR5cGVvZiBkKXRocm93IG5ldyBUeXBlRXJyb3IoImVuY29kaW5nIG11c3QgYmUgYSBzdHJpbmciKTtpZigic3RyaW5nIj09PXR5cGVvZiBkJiYhbC5pc0VuY29kaW5nKGQpKXRocm93IG5ldyBUeXBlRXJyb3IoIlVua25vd24gZW5jb2Rpbmc6ICIrCmQpO31lbHNlIm51bWJlciI9PT10eXBlb2YgYyYmKGMmPTI1NSk7aWYoMD5hfHx0aGlzLmxlbmd0aDxhfHx0aGlzLmxlbmd0aDxiKXRocm93IG5ldyBSYW5nZUVycm9yKCJPdXQgb2YgcmFuZ2UgaW5kZXgiKTtpZihiPD1hKXJldHVybiB0aGlzO2E+Pj49MDtiPXZvaWQgMD09PWI/dGhpcy5sZW5ndGg6Yj4+PjA7Y3x8KGM9MCk7aWYoIm51bWJlciI9PT10eXBlb2YgYylmb3IoZD1hO2Q8YjsrK2QpdGhpc1tkXT1jO2Vsc2UgZm9yKGM9VyhjKT9jOkliKChuZXcgbChjLGQpKS50b1N0cmluZygpKSxlPWMubGVuZ3RoLGQ9MDtkPGItYTsrK2QpdGhpc1tkK2FdPWNbZCVlXTtyZXR1cm4gdGhpc307dmFyIE5mPS9bXitcLzAtOUEtWmEtei1fXS9nLHZiPU9iamVjdC5mcmVlemUoe19fcHJvdG9fXzpudWxsLElOU1BFQ1RfTUFYX0JZVEVTOjUwLGtNYXhMZW5ndGg6U2csQnVmZmVyOmwsU2xvd0J1ZmZlcjpmdW5jdGlvbihjKXsrYyE9YyYmKGM9MCk7cmV0dXJuIGwuYWxsb2MoK2MpfSxpc0J1ZmZlcjpwYX0pLApKPUsoZnVuY3Rpb24oYyxhKXtmdW5jdGlvbiBiKGEpe2Zvcih2YXIgYz1bXSxiPTE7Yjxhcmd1bWVudHMubGVuZ3RoO2IrKyljW2ItMV09YXJndW1lbnRzW2JdO3JldHVybiBuZXcgKHZiLkJ1ZmZlci5iaW5kLmFwcGx5KHZiLkJ1ZmZlcixkKFt2b2lkIDAsYV0sYykpKX12YXIgZD1OJiZOLl9fc3ByZWFkQXJyYXlzfHxmdW5jdGlvbigpe2Zvcih2YXIgYT0wLGM9MCxiPWFyZ3VtZW50cy5sZW5ndGg7YzxiO2MrKylhKz1hcmd1bWVudHNbY10ubGVuZ3RoO2E9QXJyYXkoYSk7dmFyIGQ9MDtmb3IoYz0wO2M8YjtjKyspZm9yKHZhciBrPWFyZ3VtZW50c1tjXSx0PTAscT1rLmxlbmd0aDt0PHE7dCsrLGQrKylhW2RdPWtbdF07cmV0dXJuIGF9O09iamVjdC5kZWZpbmVQcm9wZXJ0eShhLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTthLkJ1ZmZlcj12Yi5CdWZmZXI7YS5idWZmZXJBbGxvY1Vuc2FmZT12Yi5CdWZmZXIuYWxsb2NVbnNhZmV8fGI7YS5idWZmZXJGcm9tPXZiLkJ1ZmZlci5mcm9tfHwKYn0pO1EoSik7dmFyIHVhPU5kLHZhPU9kOyJmdW5jdGlvbiI9PT10eXBlb2YgS2Euc2V0VGltZW91dCYmKHVhPXNldFRpbWVvdXQpOyJmdW5jdGlvbiI9PT10eXBlb2YgS2EuY2xlYXJUaW1lb3V0JiYodmE9Y2xlYXJUaW1lb3V0KTt2YXIga2E9W10sVWE9ITEsSGEsTWI9LTE7UmQucHJvdG90eXBlLnJ1bj1mdW5jdGlvbigpe3RoaXMuZnVuLmFwcGx5KG51bGwsdGhpcy5hcnJheSl9O3ZhciBmYj1LYS5wZXJmb3JtYW5jZXx8e30sVGc9ZmIubm93fHxmYi5tb3pOb3d8fGZiLm1zTm93fHxmYi5vTm93fHxmYi53ZWJraXROb3d8fGZ1bmN0aW9uKCl7cmV0dXJuKG5ldyBEYXRlKS5nZXRUaW1lKCl9LFVnPW5ldyBEYXRlLFZhPXtuZXh0VGljazpYLHRpdGxlOiJicm93c2VyIixicm93c2VyOiEwLGVudjp7fSxhcmd2OltdLHZlcnNpb246IiIsdmVyc2lvbnM6e30sb246SWEsYWRkTGlzdGVuZXI6SWEsb25jZTpJYSxvZmY6SWEscmVtb3ZlTGlzdGVuZXI6SWEscmVtb3ZlQWxsTGlzdGVuZXJzOklhLAplbWl0OklhLGJpbmRpbmc6ZnVuY3Rpb24oKXt0aHJvdyBFcnJvcigicHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWQiKTt9LGN3ZDpmdW5jdGlvbigpe3JldHVybiIvIn0sY2hkaXI6ZnVuY3Rpb24oKXt0aHJvdyBFcnJvcigicHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkIik7fSx1bWFzazpmdW5jdGlvbigpe3JldHVybiAwfSxocnRpbWU6ZnVuY3Rpb24oYyl7dmFyIGE9LjAwMSpUZy5jYWxsKGZiKSxiPU1hdGguZmxvb3IoYSk7YT1NYXRoLmZsb29yKGElMSoxRTkpO2MmJihiLT1jWzBdLGEtPWNbMV0sMD5hJiYoYi0tLGErPTFFOSkpO3JldHVybltiLGFdfSxwbGF0Zm9ybToiYnJvd3NlciIscmVsZWFzZTp7fSxjb25maWc6e30sdXB0aW1lOmZ1bmN0aW9uKCl7cmV0dXJuKG5ldyBEYXRlLVVnKS8xRTN9fSx6YT0iZnVuY3Rpb24iPT09dHlwZW9mIE9iamVjdC5jcmVhdGU/ZnVuY3Rpb24oYyxhKXtjLnN1cGVyXz1hO2MucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYS5wcm90b3R5cGUsCntjb25zdHJ1Y3Rvcjp7dmFsdWU6YyxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KX06ZnVuY3Rpb24oYyxhKXtmdW5jdGlvbiBiKCl7fWMuc3VwZXJfPWE7Yi5wcm90b3R5cGU9YS5wcm90b3R5cGU7Yy5wcm90b3R5cGU9bmV3IGI7Yy5wcm90b3R5cGUuY29uc3RydWN0b3I9Y30sUmY9LyVbc2RqJV0vZyxOYj17fSx5YzthYS5jb2xvcnM9e2JvbGQ6WzEsMjJdLGl0YWxpYzpbMywyM10sdW5kZXJsaW5lOls0LDI0XSxpbnZlcnNlOls3LDI3XSx3aGl0ZTpbMzcsMzldLGdyZXk6WzkwLDM5XSxibGFjazpbMzAsMzldLGJsdWU6WzM0LDM5XSxjeWFuOlszNiwzOV0sZ3JlZW46WzMyLDM5XSxtYWdlbnRhOlszNSwzOV0scmVkOlszMSwzOV0seWVsbG93OlszMywzOV19O2FhLnN0eWxlcz17c3BlY2lhbDoiY3lhbiIsbnVtYmVyOiJ5ZWxsb3ciLCJib29sZWFuIjoieWVsbG93Iix1bmRlZmluZWQ6ImdyZXkiLCJudWxsIjoiYm9sZCIsc3RyaW5nOiJncmVlbiIsZGF0ZToibWFnZW50YSIsCnJlZ2V4cDoicmVkIn07dmFyIFpmPSJKYW4gRmViIE1hciBBcHIgTWF5IEp1biBKdWwgQXVnIFNlcCBPY3QgTm92IERlYyIuc3BsaXQoIiAiKSx3Yj17aW5oZXJpdHM6emEsX2V4dGVuZDpUZCxsb2c6ZnVuY3Rpb24oKXtjb25zb2xlLmxvZygiJXMgLSAlcyIsWWYoKSx3Yy5hcHBseShudWxsLGFyZ3VtZW50cykpfSxpc0J1ZmZlcjpmdW5jdGlvbihjKXtyZXR1cm4gcGEoYyl9LGlzUHJpbWl0aXZlOkNjLGlzRnVuY3Rpb246V2EsaXNFcnJvcjpvYixpc0RhdGU6cGIsaXNPYmplY3Q6d2EsaXNSZWdFeHA6WGEsaXNVbmRlZmluZWQ6bGEsaXNTeW1ib2w6ZnVuY3Rpb24oYyl7cmV0dXJuInN5bWJvbCI9PT10eXBlb2YgY30saXNTdHJpbmc6SmEsaXNOdW1iZXI6VmQsaXNOdWxsT3JVbmRlZmluZWQ6ZnVuY3Rpb24oYyl7cmV0dXJuIG51bGw9PWN9LGlzTnVsbDpmdW5jdGlvbihjKXtyZXR1cm4gbnVsbD09PWN9LGlzQm9vbGVhbjp6Yyxpc0FycmF5OlVkLGluc3BlY3Q6YWEsZGVwcmVjYXRlOnhjLApmb3JtYXQ6d2MsZGVidWdsb2c6U2R9LFZnPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHksZ2U9T2JqZWN0LmtleXN8fGZ1bmN0aW9uKGMpe3ZhciBhPVtdLGI7Zm9yKGIgaW4gYylWZy5jYWxsKGMsYikmJmEucHVzaChiKTtyZXR1cm4gYX0sZmU9QXJyYXkucHJvdG90eXBlLnNsaWNlLEVjLCRmPS9ccypmdW5jdGlvblxzKyhbXlwoXHNdKilccyovO0UuQXNzZXJ0aW9uRXJyb3I9R2M7emEoR2MsRXJyb3IpO0UuZmFpbD1TO0Uub2s9RmM7RS5lcXVhbD1iZTtFLm5vdEVxdWFsPWNlO0UuZGVlcEVxdWFsPWRlO0UuZGVlcFN0cmljdEVxdWFsPWVlO0Uubm90RGVlcEVxdWFsPWhlO0Uubm90RGVlcFN0cmljdEVxdWFsPWllO0Uuc3RyaWN0RXF1YWw9amU7RS5ub3RTdHJpY3RFcXVhbD1rZTtFLnRocm93cz1mdW5jdGlvbihjLGEsYil7bWUoITAsYyxhLGIpfTtFLmRvZXNOb3RUaHJvdz1mdW5jdGlvbihjLGEsYil7bWUoITEsYyxhLGIpfTtFLmlmRXJyb3I9ZnVuY3Rpb24oYyl7aWYoYyl0aHJvdyBjOwp9O3ZhciB4Yj1LKGZ1bmN0aW9uKGMsYSl7ZnVuY3Rpb24gYihhKXtyZXR1cm4gZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYyhjKXtmb3IodmFyIGI9W10sZT0xO2U8YXJndW1lbnRzLmxlbmd0aDtlKyspYltlLTFdPWFyZ3VtZW50c1tlXTtiPWEuY2FsbCh0aGlzLGQoYyxiKSl8fHRoaXM7Yi5jb2RlPWM7YltoXT1jO2IubmFtZT1hLnByb3RvdHlwZS5uYW1lKyIgWyIrYltoXSsiXSI7cmV0dXJuIGJ9ZyhjLGEpO3JldHVybiBjfShhKX1mdW5jdGlvbiBkKGEsYyl7RS5zdHJpY3RFcXVhbCh0eXBlb2YgYSwic3RyaW5nIik7dmFyIGI9a1thXTtFKGIsIkFuIGludmFsaWQgZXJyb3IgbWVzc2FnZSBrZXkgd2FzIHVzZWQ6ICIrYSsiLiIpO2lmKCJmdW5jdGlvbiI9PT10eXBlb2YgYilhPWI7ZWxzZXthPXdiLmZvcm1hdDtpZih2b2lkIDA9PT1jfHwwPT09Yy5sZW5ndGgpcmV0dXJuIGI7Yy51bnNoaWZ0KGIpfXJldHVybiBTdHJpbmcoYS5hcHBseShudWxsLGMpKX1mdW5jdGlvbiBlKGEsYyl7a1thXT0KImZ1bmN0aW9uIj09PXR5cGVvZiBjP2M6U3RyaW5nKGMpfWZ1bmN0aW9uIGYoYSxjKXtFKGEsImV4cGVjdGVkIGlzIHJlcXVpcmVkIik7RSgic3RyaW5nIj09PXR5cGVvZiBjLCJ0aGluZyBpcyByZXF1aXJlZCIpO2lmKEFycmF5LmlzQXJyYXkoYSkpe3ZhciBiPWEubGVuZ3RoO0UoMDxiLCJBdCBsZWFzdCBvbmUgZXhwZWN0ZWQgdmFsdWUgbmVlZHMgdG8gYmUgc3BlY2lmaWVkIik7YT1hLm1hcChmdW5jdGlvbihhKXtyZXR1cm4gU3RyaW5nKGEpfSk7cmV0dXJuIDI8Yj8ib25lIG9mICIrYysiICIrYS5zbGljZSgwLGItMSkuam9pbigiLCAiKSsiLCBvciAiK2FbYi0xXToyPT09Yj8ib25lIG9mICIrYysiICIrYVswXSsiIG9yICIrYVsxXToib2YgIitjKyIgIithWzBdfXJldHVybiJvZiAiK2MrIiAiK1N0cmluZyhhKX12YXIgZz1OJiZOLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGMsYil7YT1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZgpBcnJheSYmZnVuY3Rpb24oYSxjKXthLl9fcHJvdG9fXz1jfXx8ZnVuY3Rpb24oYSxjKXtmb3IodmFyIGIgaW4gYyljLmhhc093blByb3BlcnR5KGIpJiYoYVtiXT1jW2JdKX07cmV0dXJuIGEoYyxiKX1yZXR1cm4gZnVuY3Rpb24oYyxiKXtmdW5jdGlvbiBkKCl7dGhpcy5jb25zdHJ1Y3Rvcj1jfWEoYyxiKTtjLnByb3RvdHlwZT1udWxsPT09Yj9PYmplY3QuY3JlYXRlKGIpOihkLnByb3RvdHlwZT1iLnByb3RvdHlwZSxuZXcgZCl9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShhLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgaD0idW5kZWZpbmVkIj09PXR5cGVvZiBTeW1ib2w/Il9rQ29kZSI6U3ltYm9sKCJjb2RlIiksaz17fTtjPWZ1bmN0aW9uKGMpe2Z1bmN0aW9uIGIoYil7aWYoIm9iamVjdCIhPT10eXBlb2YgYnx8bnVsbD09PWIpdGhyb3cgbmV3IGEuVHlwZUVycm9yKCJFUlJfSU5WQUxJRF9BUkdfVFlQRSIsIm9wdGlvbnMiLCJvYmplY3QiKTt2YXIgZD1iLm1lc3NhZ2U/CmMuY2FsbCh0aGlzLGIubWVzc2FnZSl8fHRoaXM6Yy5jYWxsKHRoaXMsd2IuaW5zcGVjdChiLmFjdHVhbCkuc2xpY2UoMCwxMjgpKyIgIisoYi5vcGVyYXRvcisiICIrd2IuaW5zcGVjdChiLmV4cGVjdGVkKS5zbGljZSgwLDEyOCkpKXx8dGhpcztkLmdlbmVyYXRlZE1lc3NhZ2U9IWIubWVzc2FnZTtkLm5hbWU9IkFzc2VydGlvbkVycm9yIFtFUlJfQVNTRVJUSU9OXSI7ZC5jb2RlPSJFUlJfQVNTRVJUSU9OIjtkLmFjdHVhbD1iLmFjdHVhbDtkLmV4cGVjdGVkPWIuZXhwZWN0ZWQ7ZC5vcGVyYXRvcj1iLm9wZXJhdG9yO2EuRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UoZCxiLnN0YWNrU3RhcnRGdW5jdGlvbik7cmV0dXJuIGR9ZyhiLGMpO3JldHVybiBifShOLkVycm9yKTthLkFzc2VydGlvbkVycm9yPWM7YS5tZXNzYWdlPWQ7YS5FPWU7YS5FcnJvcj1iKE4uRXJyb3IpO2EuVHlwZUVycm9yPWIoTi5UeXBlRXJyb3IpO2EuUmFuZ2VFcnJvcj1iKE4uUmFuZ2VFcnJvcik7ZSgiRVJSX0FSR19OT1RfSVRFUkFCTEUiLAoiJXMgbXVzdCBiZSBpdGVyYWJsZSIpO2UoIkVSUl9BU1NFUlRJT04iLCIlcyIpO2UoIkVSUl9CVUZGRVJfT1VUX09GX0JPVU5EUyIsZnVuY3Rpb24oYSxjKXtyZXR1cm4gYz8iQXR0ZW1wdCB0byB3cml0ZSBvdXRzaWRlIGJ1ZmZlciBib3VuZHMiOiciJythKyciIGlzIG91dHNpZGUgb2YgYnVmZmVyIGJvdW5kcyd9KTtlKCJFUlJfQ0hJTERfQ0xPU0VEX0JFRk9SRV9SRVBMWSIsIkNoaWxkIGNsb3NlZCBiZWZvcmUgcmVwbHkgcmVjZWl2ZWQiKTtlKCJFUlJfQ09OU09MRV9XUklUQUJMRV9TVFJFQU0iLCJDb25zb2xlIGV4cGVjdHMgYSB3cml0YWJsZSBzdHJlYW0gaW5zdGFuY2UgZm9yICVzIik7ZSgiRVJSX0NQVV9VU0FHRSIsIlVuYWJsZSB0byBvYnRhaW4gY3B1IHVzYWdlICVzIik7ZSgiRVJSX0ROU19TRVRfU0VSVkVSU19GQUlMRUQiLGZ1bmN0aW9uKGEsYyl7cmV0dXJuJ2MtYXJlcyBmYWlsZWQgdG8gc2V0IHNlcnZlcnM6ICInK2ErJyIgWycrYysiXSJ9KTtlKCJFUlJfRkFMU1lfVkFMVUVfUkVKRUNUSU9OIiwKIlByb21pc2Ugd2FzIHJlamVjdGVkIHdpdGggZmFsc3kgdmFsdWUiKTtlKCJFUlJfRU5DT0RJTkdfTk9UX1NVUFBPUlRFRCIsZnVuY3Rpb24oYSl7cmV0dXJuJ1RoZSAiJythKyciIGVuY29kaW5nIGlzIG5vdCBzdXBwb3J0ZWQnfSk7ZSgiRVJSX0VOQ09ESU5HX0lOVkFMSURfRU5DT0RFRF9EQVRBIixmdW5jdGlvbihhKXtyZXR1cm4iVGhlIGVuY29kZWQgZGF0YSB3YXMgbm90IHZhbGlkIGZvciBlbmNvZGluZyAiK2F9KTtlKCJFUlJfSFRUUF9IRUFERVJTX1NFTlQiLCJDYW5ub3QgcmVuZGVyIGhlYWRlcnMgYWZ0ZXIgdGhleSBhcmUgc2VudCB0byB0aGUgY2xpZW50Iik7ZSgiRVJSX0hUVFBfSU5WQUxJRF9TVEFUVVNfQ09ERSIsIkludmFsaWQgc3RhdHVzIGNvZGU6ICVzIik7ZSgiRVJSX0hUVFBfVFJBSUxFUl9JTlZBTElEIiwiVHJhaWxlcnMgYXJlIGludmFsaWQgd2l0aCB0aGlzIHRyYW5zZmVyIGVuY29kaW5nIik7ZSgiRVJSX0lOREVYX09VVF9PRl9SQU5HRSIsIkluZGV4IG91dCBvZiByYW5nZSIpOwplKCJFUlJfSU5WQUxJRF9BUkdfVFlQRSIsZnVuY3Rpb24oYSxjLGIpe0UoYSwibmFtZSBpcyByZXF1aXJlZCIpO2lmKGMuaW5jbHVkZXMoIm5vdCAiKSl7dmFyIGQ9Im11c3Qgbm90IGJlIjtjPWMuc3BsaXQoIm5vdCAiKVsxXX1lbHNlIGQ9Im11c3QgYmUiO2lmKEFycmF5LmlzQXJyYXkoYSkpZD0iVGhlICIrYS5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuJyInK2ErJyInfSkuam9pbigiLCAiKSsiIGFyZ3VtZW50cyAiK2QrIiAiK2YoYywidHlwZSIpO2Vsc2UgaWYoYS5pbmNsdWRlcygiIGFyZ3VtZW50IikpZD0iVGhlICIrYSsiICIrZCsiICIrZihjLCJ0eXBlIik7ZWxzZXt2YXIgZT1hLmluY2x1ZGVzKCIuIik/InByb3BlcnR5IjoiYXJndW1lbnQiO2Q9J1RoZSAiJythKyciICcrZSsiICIrZCsiICIrZihjLCJ0eXBlIil9Mzw9YXJndW1lbnRzLmxlbmd0aCYmKGQrPSIuIFJlY2VpdmVkIHR5cGUgIisobnVsbCE9PWI/dHlwZW9mIGI6Im51bGwiKSk7cmV0dXJuIGR9KTtlKCJFUlJfSU5WQUxJRF9BUlJBWV9MRU5HVEgiLApmdW5jdGlvbihhLGMsYil7RS5zdHJpY3RFcXVhbCh0eXBlb2YgYiwibnVtYmVyIik7cmV0dXJuJ1RoZSBhcnJheSAiJythKyciIChsZW5ndGggJytiKyIpIG11c3QgYmUgb2YgbGVuZ3RoICIrYysiLiJ9KTtlKCJFUlJfSU5WQUxJRF9CVUZGRVJfU0laRSIsIkJ1ZmZlciBzaXplIG11c3QgYmUgYSBtdWx0aXBsZSBvZiAlcyIpO2UoIkVSUl9JTlZBTElEX0NBTExCQUNLIiwiQ2FsbGJhY2sgbXVzdCBiZSBhIGZ1bmN0aW9uIik7ZSgiRVJSX0lOVkFMSURfQ0hBUiIsIkludmFsaWQgY2hhcmFjdGVyIGluICVzIik7ZSgiRVJSX0lOVkFMSURfQ1VSU09SX1BPUyIsIkNhbm5vdCBzZXQgY3Vyc29yIHJvdyB3aXRob3V0IHNldHRpbmcgaXRzIGNvbHVtbiIpO2UoIkVSUl9JTlZBTElEX0ZEIiwnImZkIiBtdXN0IGJlIGEgcG9zaXRpdmUgaW50ZWdlcjogJXMnKTtlKCJFUlJfSU5WQUxJRF9GSUxFX1VSTF9IT1NUIiwnRmlsZSBVUkwgaG9zdCBtdXN0IGJlICJsb2NhbGhvc3QiIG9yIGVtcHR5IG9uICVzJyk7CmUoIkVSUl9JTlZBTElEX0ZJTEVfVVJMX1BBVEgiLCJGaWxlIFVSTCBwYXRoICVzIik7ZSgiRVJSX0lOVkFMSURfSEFORExFX1RZUEUiLCJUaGlzIGhhbmRsZSB0eXBlIGNhbm5vdCBiZSBzZW50Iik7ZSgiRVJSX0lOVkFMSURfSVBfQUREUkVTUyIsIkludmFsaWQgSVAgYWRkcmVzczogJXMiKTtlKCJFUlJfSU5WQUxJRF9PUFRfVkFMVUUiLGZ1bmN0aW9uKGEsYyl7cmV0dXJuJ1RoZSB2YWx1ZSAiJytTdHJpbmcoYykrJyIgaXMgaW52YWxpZCBmb3Igb3B0aW9uICInK2ErJyInfSk7ZSgiRVJSX0lOVkFMSURfT1BUX1ZBTFVFX0VOQ09ESU5HIixmdW5jdGlvbihhKXtyZXR1cm4nVGhlIHZhbHVlICInK1N0cmluZyhhKSsnIiBpcyBpbnZhbGlkIGZvciBvcHRpb24gImVuY29kaW5nIid9KTtlKCJFUlJfSU5WQUxJRF9SRVBMX0VWQUxfQ09ORklHIiwnQ2Fubm90IHNwZWNpZnkgYm90aCAiYnJlYWtFdmFsT25TaWdpbnQiIGFuZCAiZXZhbCIgZm9yIFJFUEwnKTtlKCJFUlJfSU5WQUxJRF9TWU5DX0ZPUktfSU5QVVQiLAoiQXN5bmNocm9ub3VzIGZvcmtzIGRvIG5vdCBzdXBwb3J0IEJ1ZmZlciwgVWludDhBcnJheSBvciBzdHJpbmcgaW5wdXQ6ICVzIik7ZSgiRVJSX0lOVkFMSURfVEhJUyIsJ1ZhbHVlIG9mICJ0aGlzIiBtdXN0IGJlIG9mIHR5cGUgJXMnKTtlKCJFUlJfSU5WQUxJRF9UVVBMRSIsIiVzIG11c3QgYmUgYW4gaXRlcmFibGUgJXMgdHVwbGUiKTtlKCJFUlJfSU5WQUxJRF9VUkwiLCJJbnZhbGlkIFVSTDogJXMiKTtlKCJFUlJfSU5WQUxJRF9VUkxfU0NIRU1FIixmdW5jdGlvbihhKXtyZXR1cm4iVGhlIFVSTCBtdXN0IGJlICIrZihhLCJzY2hlbWUiKX0pO2UoIkVSUl9JUENfQ0hBTk5FTF9DTE9TRUQiLCJDaGFubmVsIGNsb3NlZCIpO2UoIkVSUl9JUENfRElTQ09OTkVDVEVEIiwiSVBDIGNoYW5uZWwgaXMgYWxyZWFkeSBkaXNjb25uZWN0ZWQiKTtlKCJFUlJfSVBDX09ORV9QSVBFIiwiQ2hpbGQgcHJvY2VzcyBjYW4gaGF2ZSBvbmx5IG9uZSBJUEMgcGlwZSIpO2UoIkVSUl9JUENfU1lOQ19GT1JLIiwKIklQQyBjYW5ub3QgYmUgdXNlZCB3aXRoIHN5bmNocm9ub3VzIGZvcmtzIik7ZSgiRVJSX01JU1NJTkdfQVJHUyIsZnVuY3Rpb24oKXtmb3IodmFyIGE9W10sYz0wO2M8YXJndW1lbnRzLmxlbmd0aDtjKyspYVtjXT1hcmd1bWVudHNbY107RSgwPGEubGVuZ3RoLCJBdCBsZWFzdCBvbmUgYXJnIG5lZWRzIHRvIGJlIHNwZWNpZmllZCIpO2M9IlRoZSAiO3ZhciBiPWEubGVuZ3RoO2E9YS5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuJyInK2ErJyInfSk7c3dpdGNoKGIpe2Nhc2UgMTpjKz1hWzBdKyIgYXJndW1lbnQiO2JyZWFrO2Nhc2UgMjpjKz1hWzBdKyIgYW5kICIrYVsxXSsiIGFyZ3VtZW50cyI7YnJlYWs7ZGVmYXVsdDpjKz1hLnNsaWNlKDAsYi0xKS5qb2luKCIsICIpLGMrPSIsIGFuZCAiK2FbYi0xXSsiIGFyZ3VtZW50cyJ9cmV0dXJuIGMrIiBtdXN0IGJlIHNwZWNpZmllZCJ9KTtlKCJFUlJfTVVMVElQTEVfQ0FMTEJBQ0siLCJDYWxsYmFjayBjYWxsZWQgbXVsdGlwbGUgdGltZXMiKTsKZSgiRVJSX05BUElfQ09OU19GVU5DVElPTiIsIkNvbnN0cnVjdG9yIG11c3QgYmUgYSBmdW5jdGlvbiIpO2UoIkVSUl9OQVBJX0NPTlNfUFJPVE9UWVBFX09CSkVDVCIsIkNvbnN0cnVjdG9yLnByb3RvdHlwZSBtdXN0IGJlIGFuIG9iamVjdCIpO2UoIkVSUl9OT19DUllQVE8iLCJOb2RlLmpzIGlzIG5vdCBjb21waWxlZCB3aXRoIE9wZW5TU0wgY3J5cHRvIHN1cHBvcnQiKTtlKCJFUlJfTk9fTE9OR0VSX1NVUFBPUlRFRCIsIiVzIGlzIG5vIGxvbmdlciBzdXBwb3J0ZWQiKTtlKCJFUlJfUEFSU0VfSElTVE9SWV9EQVRBIiwiQ291bGQgbm90IHBhcnNlIGhpc3RvcnkgZGF0YSBpbiAlcyIpO2UoIkVSUl9TT0NLRVRfQUxSRUFEWV9CT1VORCIsIlNvY2tldCBpcyBhbHJlYWR5IGJvdW5kIik7ZSgiRVJSX1NPQ0tFVF9CQURfUE9SVCIsIlBvcnQgc2hvdWxkIGJlID4gMCBhbmQgPCA2NTUzNiIpO2UoIkVSUl9TT0NLRVRfQkFEX1RZUEUiLCJCYWQgc29ja2V0IHR5cGUgc3BlY2lmaWVkLiBWYWxpZCB0eXBlcyBhcmU6IHVkcDQsIHVkcDYiKTsKZSgiRVJSX1NPQ0tFVF9DQU5OT1RfU0VORCIsIlVuYWJsZSB0byBzZW5kIGRhdGEiKTtlKCJFUlJfU09DS0VUX0NMT1NFRCIsIlNvY2tldCBpcyBjbG9zZWQiKTtlKCJFUlJfU09DS0VUX0RHUkFNX05PVF9SVU5OSU5HIiwiTm90IHJ1bm5pbmciKTtlKCJFUlJfU1RERVJSX0NMT1NFIiwicHJvY2Vzcy5zdGRlcnIgY2Fubm90IGJlIGNsb3NlZCIpO2UoIkVSUl9TVERPVVRfQ0xPU0UiLCJwcm9jZXNzLnN0ZG91dCBjYW5ub3QgYmUgY2xvc2VkIik7ZSgiRVJSX1NUUkVBTV9XUkFQIiwiU3RyZWFtIGhhcyBTdHJpbmdEZWNvZGVyIHNldCBvciBpcyBpbiBvYmplY3RNb2RlIik7ZSgiRVJSX1RMU19DRVJUX0FMVE5BTUVfSU5WQUxJRCIsIkhvc3RuYW1lL0lQIGRvZXMgbm90IG1hdGNoIGNlcnRpZmljYXRlJ3MgYWx0bmFtZXM6ICVzIik7ZSgiRVJSX1RMU19ESF9QQVJBTV9TSVpFIixmdW5jdGlvbihhKXtyZXR1cm4iREggcGFyYW1ldGVyIHNpemUgIithKyIgaXMgbGVzcyB0aGFuIDIwNDgifSk7CmUoIkVSUl9UTFNfSEFORFNIQUtFX1RJTUVPVVQiLCJUTFMgaGFuZHNoYWtlIHRpbWVvdXQiKTtlKCJFUlJfVExTX1JFTkVHT1RJQVRJT05fRkFJTEVEIiwiRmFpbGVkIHRvIHJlbmVnb3RpYXRlIik7ZSgiRVJSX1RMU19SRVFVSVJFRF9TRVJWRVJfTkFNRSIsJyJzZXJ2ZXJuYW1lIiBpcyByZXF1aXJlZCBwYXJhbWV0ZXIgZm9yIFNlcnZlci5hZGRDb250ZXh0Jyk7ZSgiRVJSX1RMU19TRVNTSU9OX0FUVEFDSyIsIlRTTCBzZXNzaW9uIHJlbmVnb3RpYXRpb24gYXR0YWNrIGRldGVjdGVkIik7ZSgiRVJSX1RSQU5TRk9STV9BTFJFQURZX1RSQU5TRk9STUlORyIsIkNhbGxpbmcgdHJhbnNmb3JtIGRvbmUgd2hlbiBzdGlsbCB0cmFuc2Zvcm1pbmciKTtlKCJFUlJfVFJBTlNGT1JNX1dJVEhfTEVOR1RIXzAiLCJDYWxsaW5nIHRyYW5zZm9ybSBkb25lIHdoZW4gd3JpdGFibGVTdGF0ZS5sZW5ndGggIT0gMCIpO2UoIkVSUl9VTktOT1dOX0VOQ09ESU5HIiwiVW5rbm93biBlbmNvZGluZzogJXMiKTsKZSgiRVJSX1VOS05PV05fU0lHTkFMIiwiVW5rbm93biBzaWduYWw6ICVzIik7ZSgiRVJSX1VOS05PV05fU1RESU5fVFlQRSIsIlVua25vd24gc3RkaW4gZmlsZSB0eXBlIik7ZSgiRVJSX1VOS05PV05fU1RSRUFNX1RZUEUiLCJVbmtub3duIHN0cmVhbSBmaWxlIHR5cGUiKTtlKCJFUlJfVjhCUkVBS0lURVJBVE9SIiwiRnVsbCBJQ1UgZGF0YSBub3QgaW5zdGFsbGVkLiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL25vZGVqcy9ub2RlL3dpa2kvSW50bCIpfSk7USh4Yik7dmFyIG9hPUsoZnVuY3Rpb24oYyxhKXtPYmplY3QuZGVmaW5lUHJvcGVydHkoYSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7YS5FTkNPRElOR19VVEY4PSJ1dGY4IjthLmFzc2VydEVuY29kaW5nPWZ1bmN0aW9uKGEpe2lmKGEmJiFKLkJ1ZmZlci5pc0VuY29kaW5nKGEpKXRocm93IG5ldyB4Yi5UeXBlRXJyb3IoIkVSUl9JTlZBTElEX09QVF9WQUxVRV9FTkNPRElORyIsYSk7fTthLnN0clRvRW5jb2Rpbmc9ZnVuY3Rpb24oYywKZCl7cmV0dXJuIGQmJmQhPT1hLkVOQ09ESU5HX1VURjg/ImJ1ZmZlciI9PT1kP25ldyBKLkJ1ZmZlcihjKToobmV3IEouQnVmZmVyKGMpKS50b1N0cmluZyhkKTpjfX0pO1Eob2EpO3ZhciAkYz1LKGZ1bmN0aW9uKGMsYSl7T2JqZWN0LmRlZmluZVByb3BlcnR5KGEsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBiPXUuY29uc3RhbnRzLlNfSUZNVCxkPXUuY29uc3RhbnRzLlNfSUZESVIsZT11LmNvbnN0YW50cy5TX0lGUkVHLGY9dS5jb25zdGFudHMuU19JRkJMSyxnPXUuY29uc3RhbnRzLlNfSUZDSFIsaD11LmNvbnN0YW50cy5TX0lGTE5LLGs9dS5jb25zdGFudHMuU19JRklGTyx0PXUuY29uc3RhbnRzLlNfSUZTT0NLO2M9ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKCl7dGhpcy5uYW1lPSIiO3RoaXMubW9kZT0wfWEuYnVpbGQ9ZnVuY3Rpb24oYyxiKXt2YXIgZD1uZXcgYSxlPWMuZ2V0Tm9kZSgpLm1vZGU7ZC5uYW1lPW9hLnN0clRvRW5jb2RpbmcoYy5nZXROYW1lKCksYik7ZC5tb2RlPQplO3JldHVybiBkfTthLnByb3RvdHlwZS5fY2hlY2tNb2RlUHJvcGVydHk9ZnVuY3Rpb24oYSl7cmV0dXJuKHRoaXMubW9kZSZiKT09PWF9O2EucHJvdG90eXBlLmlzRGlyZWN0b3J5PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NoZWNrTW9kZVByb3BlcnR5KGQpfTthLnByb3RvdHlwZS5pc0ZpbGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2hlY2tNb2RlUHJvcGVydHkoZSl9O2EucHJvdG90eXBlLmlzQmxvY2tEZXZpY2U9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2hlY2tNb2RlUHJvcGVydHkoZil9O2EucHJvdG90eXBlLmlzQ2hhcmFjdGVyRGV2aWNlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NoZWNrTW9kZVByb3BlcnR5KGcpfTthLnByb3RvdHlwZS5pc1N5bWJvbGljTGluaz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9jaGVja01vZGVQcm9wZXJ0eShoKX07YS5wcm90b3R5cGUuaXNGSUZPPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NoZWNrTW9kZVByb3BlcnR5KGspfTsKYS5wcm90b3R5cGUuaXNTb2NrZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2hlY2tNb2RlUHJvcGVydHkodCl9O3JldHVybiBhfSgpO2EuRGlyZW50PWM7YS5kZWZhdWx0PWN9KTtRKCRjKTsiYWIiLnN1YnN0cigtMSk7dmFyIGdiPUsoZnVuY3Rpb24oYyxhKXtPYmplY3QuZGVmaW5lUHJvcGVydHkoYSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7Yz0iZnVuY3Rpb24iPT09dHlwZW9mIHNldEltbWVkaWF0ZT9zZXRJbW1lZGlhdGUuYmluZChOKTpzZXRUaW1lb3V0LmJpbmQoTik7YS5kZWZhdWx0PWN9KTtRKGdiKTt2YXIgWT1LKGZ1bmN0aW9uKGMsYSl7ZnVuY3Rpb24gYigpe3ZhciBhPVZhfHx7fTthLmdldHVpZHx8KGEuZ2V0dWlkPWZ1bmN0aW9uKCl7cmV0dXJuIDB9KTthLmdldGdpZHx8KGEuZ2V0Z2lkPWZ1bmN0aW9uKCl7cmV0dXJuIDB9KTthLmN3ZHx8KGEuY3dkPWZ1bmN0aW9uKCl7cmV0dXJuIi8ifSk7YS5uZXh0VGlja3x8KGEubmV4dFRpY2s9Z2IuZGVmYXVsdCk7YS5lbWl0V2FybmluZ3x8CihhLmVtaXRXYXJuaW5nPWZ1bmN0aW9uKGEsYyl7Y29uc29sZS53YXJuKCIiK2MrKGM/IjogIjoiIikrYSl9KTthLmVudnx8KGEuZW52PXt9KTtyZXR1cm4gYX1PYmplY3QuZGVmaW5lUHJvcGVydHkoYSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7YS5jcmVhdGVQcm9jZXNzPWI7YS5kZWZhdWx0PWIoKX0pO1EoWSk7cWEucHJvdG90eXBlPU9iamVjdC5jcmVhdGUobnVsbCk7eC5FdmVudEVtaXR0ZXI9eDt4LnVzaW5nRG9tYWlucz0hMTt4LnByb3RvdHlwZS5kb21haW49dm9pZCAwO3gucHJvdG90eXBlLl9ldmVudHM9dm9pZCAwO3gucHJvdG90eXBlLl9tYXhMaXN0ZW5lcnM9dm9pZCAwO3guZGVmYXVsdE1heExpc3RlbmVycz0xMDt4LmluaXQ9ZnVuY3Rpb24oKXt0aGlzLmRvbWFpbj1udWxsO3RoaXMuX2V2ZW50cyYmdGhpcy5fZXZlbnRzIT09T2JqZWN0LmdldFByb3RvdHlwZU9mKHRoaXMpLl9ldmVudHN8fCh0aGlzLl9ldmVudHM9bmV3IHFhLHRoaXMuX2V2ZW50c0NvdW50PTApOwp0aGlzLl9tYXhMaXN0ZW5lcnM9dGhpcy5fbWF4TGlzdGVuZXJzfHx2b2lkIDB9O3gucHJvdG90eXBlLnNldE1heExpc3RlbmVycz1mdW5jdGlvbihjKXtpZigibnVtYmVyIiE9PXR5cGVvZiBjfHwwPmN8fGlzTmFOKGMpKXRocm93IG5ldyBUeXBlRXJyb3IoJyJuIiBhcmd1bWVudCBtdXN0IGJlIGEgcG9zaXRpdmUgbnVtYmVyJyk7dGhpcy5fbWF4TGlzdGVuZXJzPWM7cmV0dXJuIHRoaXN9O3gucHJvdG90eXBlLmdldE1heExpc3RlbmVycz1mdW5jdGlvbigpe3JldHVybiB2b2lkIDA9PT10aGlzLl9tYXhMaXN0ZW5lcnM/eC5kZWZhdWx0TWF4TGlzdGVuZXJzOnRoaXMuX21heExpc3RlbmVyc307eC5wcm90b3R5cGUuZW1pdD1mdW5jdGlvbihjKXt2YXIgYSxiLGQ9ImVycm9yIj09PWM7aWYoYT10aGlzLl9ldmVudHMpZD1kJiZudWxsPT1hLmVycm9yO2Vsc2UgaWYoIWQpcmV0dXJuITE7dmFyIGU9dGhpcy5kb21haW47aWYoZCl7YT1hcmd1bWVudHNbMV07aWYoZSlhfHwoYT1FcnJvcignVW5jYXVnaHQsIHVuc3BlY2lmaWVkICJlcnJvciIgZXZlbnQnKSksCmEuZG9tYWluRW1pdHRlcj10aGlzLGEuZG9tYWluPWUsYS5kb21haW5UaHJvd249ITEsZS5lbWl0KCJlcnJvciIsYSk7ZWxzZXtpZihhIGluc3RhbmNlb2YgRXJyb3IpdGhyb3cgYTtlPUVycm9yKCdVbmNhdWdodCwgdW5zcGVjaWZpZWQgImVycm9yIiBldmVudC4gKCcrYSsiKSIpO2UuY29udGV4dD1hO3Rocm93IGU7fXJldHVybiExfWU9YVtjXTtpZighZSlyZXR1cm4hMTthPSJmdW5jdGlvbiI9PT10eXBlb2YgZTt2YXIgZj1hcmd1bWVudHMubGVuZ3RoO3N3aXRjaChmKXtjYXNlIDE6aWYoYSllLmNhbGwodGhpcyk7ZWxzZSBmb3IoYT1lLmxlbmd0aCxlPXFiKGUsYSksZD0wO2Q8YTsrK2QpZVtkXS5jYWxsKHRoaXMpO2JyZWFrO2Nhc2UgMjpkPWFyZ3VtZW50c1sxXTtpZihhKWUuY2FsbCh0aGlzLGQpO2Vsc2UgZm9yKGE9ZS5sZW5ndGgsZT1xYihlLGEpLGY9MDtmPGE7KytmKWVbZl0uY2FsbCh0aGlzLGQpO2JyZWFrO2Nhc2UgMzpkPWFyZ3VtZW50c1sxXTtmPWFyZ3VtZW50c1syXTsKaWYoYSllLmNhbGwodGhpcyxkLGYpO2Vsc2UgZm9yKGE9ZS5sZW5ndGgsZT1xYihlLGEpLGI9MDtiPGE7KytiKWVbYl0uY2FsbCh0aGlzLGQsZik7YnJlYWs7Y2FzZSA0OmQ9YXJndW1lbnRzWzFdO2Y9YXJndW1lbnRzWzJdO2I9YXJndW1lbnRzWzNdO2lmKGEpZS5jYWxsKHRoaXMsZCxmLGIpO2Vsc2V7YT1lLmxlbmd0aDtlPXFiKGUsYSk7Zm9yKHZhciBnPTA7ZzxhOysrZyllW2ddLmNhbGwodGhpcyxkLGYsYil9YnJlYWs7ZGVmYXVsdDpkPUFycmF5KGYtMSk7Zm9yKGI9MTtiPGY7YisrKWRbYi0xXT1hcmd1bWVudHNbYl07aWYoYSllLmFwcGx5KHRoaXMsZCk7ZWxzZSBmb3IoYT1lLmxlbmd0aCxlPXFiKGUsYSksZj0wO2Y8YTsrK2YpZVtmXS5hcHBseSh0aGlzLGQpfXJldHVybiEwfTt4LnByb3RvdHlwZS5hZGRMaXN0ZW5lcj1mdW5jdGlvbihjLGEpe3JldHVybiBuZSh0aGlzLGMsYSwhMSl9O3gucHJvdG90eXBlLm9uPXgucHJvdG90eXBlLmFkZExpc3RlbmVyO3gucHJvdG90eXBlLnByZXBlbmRMaXN0ZW5lcj0KZnVuY3Rpb24oYyxhKXtyZXR1cm4gbmUodGhpcyxjLGEsITApfTt4LnByb3RvdHlwZS5vbmNlPWZ1bmN0aW9uKGMsYSl7aWYoImZ1bmN0aW9uIiE9PXR5cGVvZiBhKXRocm93IG5ldyBUeXBlRXJyb3IoJyJsaXN0ZW5lciIgYXJndW1lbnQgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7dGhpcy5vbihjLG9lKHRoaXMsYyxhKSk7cmV0dXJuIHRoaXN9O3gucHJvdG90eXBlLnByZXBlbmRPbmNlTGlzdGVuZXI9ZnVuY3Rpb24oYyxhKXtpZigiZnVuY3Rpb24iIT09dHlwZW9mIGEpdGhyb3cgbmV3IFR5cGVFcnJvcignImxpc3RlbmVyIiBhcmd1bWVudCBtdXN0IGJlIGEgZnVuY3Rpb24nKTt0aGlzLnByZXBlbmRMaXN0ZW5lcihjLG9lKHRoaXMsYyxhKSk7cmV0dXJuIHRoaXN9O3gucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyPWZ1bmN0aW9uKGMsYSl7dmFyIGI7aWYoImZ1bmN0aW9uIiE9PXR5cGVvZiBhKXRocm93IG5ldyBUeXBlRXJyb3IoJyJsaXN0ZW5lciIgYXJndW1lbnQgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7CnZhciBkPXRoaXMuX2V2ZW50cztpZighZClyZXR1cm4gdGhpczt2YXIgZT1kW2NdO2lmKCFlKXJldHVybiB0aGlzO2lmKGU9PT1hfHxlLmxpc3RlbmVyJiZlLmxpc3RlbmVyPT09YSkwPT09LS10aGlzLl9ldmVudHNDb3VudD90aGlzLl9ldmVudHM9bmV3IHFhOihkZWxldGUgZFtjXSxkLnJlbW92ZUxpc3RlbmVyJiZ0aGlzLmVtaXQoInJlbW92ZUxpc3RlbmVyIixjLGUubGlzdGVuZXJ8fGEpKTtlbHNlIGlmKCJmdW5jdGlvbiIhPT10eXBlb2YgZSl7dmFyIGY9LTE7Zm9yKGI9ZS5sZW5ndGg7MDxiLS07KWlmKGVbYl09PT1hfHxlW2JdLmxpc3RlbmVyJiZlW2JdLmxpc3RlbmVyPT09YSl7dmFyIGc9ZVtiXS5saXN0ZW5lcjtmPWI7YnJlYWt9aWYoMD5mKXJldHVybiB0aGlzO2lmKDE9PT1lLmxlbmd0aCl7ZVswXT12b2lkIDA7aWYoMD09PS0tdGhpcy5fZXZlbnRzQ291bnQpcmV0dXJuIHRoaXMuX2V2ZW50cz1uZXcgcWEsdGhpcztkZWxldGUgZFtjXX1lbHNle2I9ZisxO2Zvcih2YXIgaD0KZS5sZW5ndGg7YjxoO2YrPTEsYis9MSllW2ZdPWVbYl07ZS5wb3AoKX1kLnJlbW92ZUxpc3RlbmVyJiZ0aGlzLmVtaXQoInJlbW92ZUxpc3RlbmVyIixjLGd8fGEpfXJldHVybiB0aGlzfTt4LnByb3RvdHlwZS5yZW1vdmVBbGxMaXN0ZW5lcnM9ZnVuY3Rpb24oYyl7dmFyIGE9dGhpcy5fZXZlbnRzO2lmKCFhKXJldHVybiB0aGlzO2lmKCFhLnJlbW92ZUxpc3RlbmVyKXJldHVybiAwPT09YXJndW1lbnRzLmxlbmd0aD8odGhpcy5fZXZlbnRzPW5ldyBxYSx0aGlzLl9ldmVudHNDb3VudD0wKTphW2NdJiYoMD09PS0tdGhpcy5fZXZlbnRzQ291bnQ/dGhpcy5fZXZlbnRzPW5ldyBxYTpkZWxldGUgYVtjXSksdGhpcztpZigwPT09YXJndW1lbnRzLmxlbmd0aCl7YT1PYmplY3Qua2V5cyhhKTtmb3IodmFyIGI9MCxkO2I8YS5sZW5ndGg7KytiKWQ9YVtiXSwicmVtb3ZlTGlzdGVuZXIiIT09ZCYmdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoZCk7dGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoInJlbW92ZUxpc3RlbmVyIik7CnRoaXMuX2V2ZW50cz1uZXcgcWE7dGhpcy5fZXZlbnRzQ291bnQ9MDtyZXR1cm4gdGhpc31hPWFbY107aWYoImZ1bmN0aW9uIj09PXR5cGVvZiBhKXRoaXMucmVtb3ZlTGlzdGVuZXIoYyxhKTtlbHNlIGlmKGEpe2RvIHRoaXMucmVtb3ZlTGlzdGVuZXIoYyxhW2EubGVuZ3RoLTFdKTt3aGlsZShhWzBdKX1yZXR1cm4gdGhpc307eC5wcm90b3R5cGUubGlzdGVuZXJzPWZ1bmN0aW9uKGMpe3ZhciBhPXRoaXMuX2V2ZW50cztpZihhKWlmKGM9YVtjXSlpZigiZnVuY3Rpb24iPT09dHlwZW9mIGMpYz1bYy5saXN0ZW5lcnx8Y107ZWxzZXthPUFycmF5KGMubGVuZ3RoKTtmb3IodmFyIGI9MDtiPGEubGVuZ3RoOysrYilhW2JdPWNbYl0ubGlzdGVuZXJ8fGNbYl07Yz1hfWVsc2UgYz1bXTtlbHNlIGM9W107cmV0dXJuIGN9O3gubGlzdGVuZXJDb3VudD1mdW5jdGlvbihjLGEpe3JldHVybiJmdW5jdGlvbiI9PT10eXBlb2YgYy5saXN0ZW5lckNvdW50P2MubGlzdGVuZXJDb3VudChhKTpwZS5jYWxsKGMsCmEpfTt4LnByb3RvdHlwZS5saXN0ZW5lckNvdW50PXBlO3gucHJvdG90eXBlLmV2ZW50TmFtZXM9ZnVuY3Rpb24oKXtyZXR1cm4gMDx0aGlzLl9ldmVudHNDb3VudD9SZWZsZWN0Lm93bktleXModGhpcy5fZXZlbnRzKTpbXX07dmFyIHliPUsoZnVuY3Rpb24oYyxhKXt2YXIgYj1OJiZOLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGMsYil7YT1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oYSxjKXthLl9fcHJvdG9fXz1jfXx8ZnVuY3Rpb24oYSxjKXtmb3IodmFyIGIgaW4gYyljLmhhc093blByb3BlcnR5KGIpJiYoYVtiXT1jW2JdKX07cmV0dXJuIGEoYyxiKX1yZXR1cm4gZnVuY3Rpb24oYyxiKXtmdW5jdGlvbiBkKCl7dGhpcy5jb25zdHJ1Y3Rvcj1jfWEoYyxiKTtjLnByb3RvdHlwZT1udWxsPT09Yj9PYmplY3QuY3JlYXRlKGIpOihkLnByb3RvdHlwZT1iLnByb3RvdHlwZSxuZXcgZCl9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShhLAoiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIGQ9dS5jb25zdGFudHMuU19JRk1ULGU9dS5jb25zdGFudHMuU19JRkRJUixmPXUuY29uc3RhbnRzLlNfSUZSRUcsZz11LmNvbnN0YW50cy5TX0lGTE5LLGg9dS5jb25zdGFudHMuT19BUFBFTkQ7YS5TRVA9Ii8iO2M9ZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYyhjLGIpe3ZvaWQgMD09PWImJihiPTQzOCk7dmFyIGQ9YS5jYWxsKHRoaXMpfHx0aGlzO2QudWlkPVkuZGVmYXVsdC5nZXR1aWQoKTtkLmdpZD1ZLmRlZmF1bHQuZ2V0Z2lkKCk7ZC5hdGltZT1uZXcgRGF0ZTtkLm10aW1lPW5ldyBEYXRlO2QuY3RpbWU9bmV3IERhdGU7ZC5wZXJtPTQzODtkLm1vZGU9ZjtkLm5saW5rPTE7ZC5wZXJtPWI7ZC5tb2RlfD1iO2QuaW5vPWM7cmV0dXJuIGR9YihjLGEpO2MucHJvdG90eXBlLmdldFN0cmluZz1mdW5jdGlvbihhKXt2b2lkIDA9PT1hJiYoYT0idXRmOCIpO3JldHVybiB0aGlzLmdldEJ1ZmZlcigpLnRvU3RyaW5nKGEpfTtjLnByb3RvdHlwZS5zZXRTdHJpbmc9CmZ1bmN0aW9uKGEpe3RoaXMuYnVmPUouYnVmZmVyRnJvbShhLCJ1dGY4Iik7dGhpcy50b3VjaCgpfTtjLnByb3RvdHlwZS5nZXRCdWZmZXI9ZnVuY3Rpb24oKXt0aGlzLmJ1Znx8dGhpcy5zZXRCdWZmZXIoSi5idWZmZXJBbGxvY1Vuc2FmZSgwKSk7cmV0dXJuIEouYnVmZmVyRnJvbSh0aGlzLmJ1Zil9O2MucHJvdG90eXBlLnNldEJ1ZmZlcj1mdW5jdGlvbihhKXt0aGlzLmJ1Zj1KLmJ1ZmZlckZyb20oYSk7dGhpcy50b3VjaCgpfTtjLnByb3RvdHlwZS5nZXRTaXplPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYnVmP3RoaXMuYnVmLmxlbmd0aDowfTtjLnByb3RvdHlwZS5zZXRNb2RlUHJvcGVydHk9ZnVuY3Rpb24oYSl7dGhpcy5tb2RlPXRoaXMubW9kZSZ+ZHxhfTtjLnByb3RvdHlwZS5zZXRJc0ZpbGU9ZnVuY3Rpb24oKXt0aGlzLnNldE1vZGVQcm9wZXJ0eShmKX07Yy5wcm90b3R5cGUuc2V0SXNEaXJlY3Rvcnk9ZnVuY3Rpb24oKXt0aGlzLnNldE1vZGVQcm9wZXJ0eShlKX07Yy5wcm90b3R5cGUuc2V0SXNTeW1saW5rPQpmdW5jdGlvbigpe3RoaXMuc2V0TW9kZVByb3BlcnR5KGcpfTtjLnByb3RvdHlwZS5pc0ZpbGU9ZnVuY3Rpb24oKXtyZXR1cm4odGhpcy5tb2RlJmQpPT09Zn07Yy5wcm90b3R5cGUuaXNEaXJlY3Rvcnk9ZnVuY3Rpb24oKXtyZXR1cm4odGhpcy5tb2RlJmQpPT09ZX07Yy5wcm90b3R5cGUuaXNTeW1saW5rPWZ1bmN0aW9uKCl7cmV0dXJuKHRoaXMubW9kZSZkKT09PWd9O2MucHJvdG90eXBlLm1ha2VTeW1saW5rPWZ1bmN0aW9uKGEpe3RoaXMuc3ltbGluaz1hO3RoaXMuc2V0SXNTeW1saW5rKCl9O2MucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKGEsYyxiLGQpe3ZvaWQgMD09PWMmJihjPTApO3ZvaWQgMD09PWImJihiPWEubGVuZ3RoKTt2b2lkIDA9PT1kJiYoZD0wKTt0aGlzLmJ1Znx8KHRoaXMuYnVmPUouYnVmZmVyQWxsb2NVbnNhZmUoMCkpO2lmKGQrYj50aGlzLmJ1Zi5sZW5ndGgpe3ZhciBlPUouYnVmZmVyQWxsb2NVbnNhZmUoZCtiKTt0aGlzLmJ1Zi5jb3B5KGUsMCwwLHRoaXMuYnVmLmxlbmd0aCk7CnRoaXMuYnVmPWV9YS5jb3B5KHRoaXMuYnVmLGQsYyxjK2IpO3RoaXMudG91Y2goKTtyZXR1cm4gYn07Yy5wcm90b3R5cGUucmVhZD1mdW5jdGlvbihhLGMsYixkKXt2b2lkIDA9PT1jJiYoYz0wKTt2b2lkIDA9PT1iJiYoYj1hLmJ5dGVMZW5ndGgpO3ZvaWQgMD09PWQmJihkPTApO3RoaXMuYnVmfHwodGhpcy5idWY9Si5idWZmZXJBbGxvY1Vuc2FmZSgwKSk7Yj5hLmJ5dGVMZW5ndGgmJihiPWEuYnl0ZUxlbmd0aCk7YitkPnRoaXMuYnVmLmxlbmd0aCYmKGI9dGhpcy5idWYubGVuZ3RoLWQpO3RoaXMuYnVmLmNvcHkoYSxjLGQsZCtiKTtyZXR1cm4gYn07Yy5wcm90b3R5cGUudHJ1bmNhdGU9ZnVuY3Rpb24oYSl7dm9pZCAwPT09YSYmKGE9MCk7aWYoYSlpZih0aGlzLmJ1Znx8KHRoaXMuYnVmPUouYnVmZmVyQWxsb2NVbnNhZmUoMCkpLGE8PXRoaXMuYnVmLmxlbmd0aCl0aGlzLmJ1Zj10aGlzLmJ1Zi5zbGljZSgwLGEpO2Vsc2V7dmFyIGM9Si5idWZmZXJBbGxvY1Vuc2FmZSgwKTt0aGlzLmJ1Zi5jb3B5KGMpOwpjLmZpbGwoMCxhKX1lbHNlIHRoaXMuYnVmPUouYnVmZmVyQWxsb2NVbnNhZmUoMCk7dGhpcy50b3VjaCgpfTtjLnByb3RvdHlwZS5jaG1vZD1mdW5jdGlvbihhKXt0aGlzLnBlcm09YTt0aGlzLm1vZGU9dGhpcy5tb2RlJi01MTJ8YTt0aGlzLnRvdWNoKCl9O2MucHJvdG90eXBlLmNob3duPWZ1bmN0aW9uKGEsYyl7dGhpcy51aWQ9YTt0aGlzLmdpZD1jO3RoaXMudG91Y2goKX07Yy5wcm90b3R5cGUudG91Y2g9ZnVuY3Rpb24oKXt0aGlzLm10aW1lPW5ldyBEYXRlO3RoaXMuZW1pdCgiY2hhbmdlIix0aGlzKX07Yy5wcm90b3R5cGUuY2FuUmVhZD1mdW5jdGlvbihhLGMpe3ZvaWQgMD09PWEmJihhPVkuZGVmYXVsdC5nZXR1aWQoKSk7dm9pZCAwPT09YyYmKGM9WS5kZWZhdWx0LmdldGdpZCgpKTtyZXR1cm4gdGhpcy5wZXJtJjR8fGM9PT10aGlzLmdpZCYmdGhpcy5wZXJtJjMyfHxhPT09dGhpcy51aWQmJnRoaXMucGVybSYyNTY/ITA6ITF9O2MucHJvdG90eXBlLmNhbldyaXRlPWZ1bmN0aW9uKGEsCmMpe3ZvaWQgMD09PWEmJihhPVkuZGVmYXVsdC5nZXR1aWQoKSk7dm9pZCAwPT09YyYmKGM9WS5kZWZhdWx0LmdldGdpZCgpKTtyZXR1cm4gdGhpcy5wZXJtJjJ8fGM9PT10aGlzLmdpZCYmdGhpcy5wZXJtJjE2fHxhPT09dGhpcy51aWQmJnRoaXMucGVybSYxMjg/ITA6ITF9O2MucHJvdG90eXBlLmRlbD1mdW5jdGlvbigpe3RoaXMuZW1pdCgiZGVsZXRlIix0aGlzKX07Yy5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJue2lubzp0aGlzLmlubyx1aWQ6dGhpcy51aWQsZ2lkOnRoaXMuZ2lkLGF0aW1lOnRoaXMuYXRpbWUuZ2V0VGltZSgpLG10aW1lOnRoaXMubXRpbWUuZ2V0VGltZSgpLGN0aW1lOnRoaXMuY3RpbWUuZ2V0VGltZSgpLHBlcm06dGhpcy5wZXJtLG1vZGU6dGhpcy5tb2RlLG5saW5rOnRoaXMubmxpbmssc3ltbGluazp0aGlzLnN5bWxpbmssZGF0YTp0aGlzLmdldFN0cmluZygpfX07cmV0dXJuIGN9KHguRXZlbnRFbWl0dGVyKTthLk5vZGU9YztjPWZ1bmN0aW9uKGMpe2Z1bmN0aW9uIGQoYSwKYixkKXt2YXIgZT1jLmNhbGwodGhpcyl8fHRoaXM7ZS5jaGlsZHJlbj17fTtlLnN0ZXBzPVtdO2UuaW5vPTA7ZS5sZW5ndGg9MDtlLnZvbD1hO2UucGFyZW50PWI7ZS5zdGVwcz1iP2Iuc3RlcHMuY29uY2F0KFtkXSk6W2RdO3JldHVybiBlfWIoZCxjKTtkLnByb3RvdHlwZS5zZXROb2RlPWZ1bmN0aW9uKGEpe3RoaXMubm9kZT1hO3RoaXMuaW5vPWEuaW5vfTtkLnByb3RvdHlwZS5nZXROb2RlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubm9kZX07ZC5wcm90b3R5cGUuY3JlYXRlQ2hpbGQ9ZnVuY3Rpb24oYSxjKXt2b2lkIDA9PT1jJiYoYz10aGlzLnZvbC5jcmVhdGVOb2RlKCkpO3ZhciBiPW5ldyBkKHRoaXMudm9sLHRoaXMsYSk7Yi5zZXROb2RlKGMpO2MuaXNEaXJlY3RvcnkoKTt0aGlzLnNldENoaWxkKGEsYik7cmV0dXJuIGJ9O2QucHJvdG90eXBlLnNldENoaWxkPWZ1bmN0aW9uKGEsYyl7dm9pZCAwPT09YyYmKGM9bmV3IGQodGhpcy52b2wsdGhpcyxhKSk7dGhpcy5jaGlsZHJlblthXT0KYztjLnBhcmVudD10aGlzO3RoaXMubGVuZ3RoKys7dGhpcy5lbWl0KCJjaGlsZDphZGQiLGMsdGhpcyk7cmV0dXJuIGN9O2QucHJvdG90eXBlLmRlbGV0ZUNoaWxkPWZ1bmN0aW9uKGEpe2RlbGV0ZSB0aGlzLmNoaWxkcmVuW2EuZ2V0TmFtZSgpXTt0aGlzLmxlbmd0aC0tO3RoaXMuZW1pdCgiY2hpbGQ6ZGVsZXRlIixhLHRoaXMpfTtkLnByb3RvdHlwZS5nZXRDaGlsZD1mdW5jdGlvbihhKXtpZihPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbCh0aGlzLmNoaWxkcmVuLGEpKXJldHVybiB0aGlzLmNoaWxkcmVuW2FdfTtkLnByb3RvdHlwZS5nZXRQYXRoPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3RlcHMuam9pbihhLlNFUCl9O2QucHJvdG90eXBlLmdldE5hbWU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdGVwc1t0aGlzLnN0ZXBzLmxlbmd0aC0xXX07ZC5wcm90b3R5cGUud2Fsaz1mdW5jdGlvbihhLGMsYil7dm9pZCAwPT09YyYmKGM9YS5sZW5ndGgpO3ZvaWQgMD09PWImJihiPTApOwppZihiPj1hLmxlbmd0aHx8Yj49YylyZXR1cm4gdGhpczt2YXIgZD10aGlzLmdldENoaWxkKGFbYl0pO3JldHVybiBkP2Qud2FsayhhLGMsYisxKTpudWxsfTtkLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm57c3RlcHM6dGhpcy5zdGVwcyxpbm86dGhpcy5pbm8sY2hpbGRyZW46T2JqZWN0LmtleXModGhpcy5jaGlsZHJlbil9fTtyZXR1cm4gZH0oeC5FdmVudEVtaXR0ZXIpO2EuTGluaz1jO2M9ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEsYyxiLGQpe3RoaXMucG9zaXRpb249MDt0aGlzLmxpbms9YTt0aGlzLm5vZGU9Yzt0aGlzLmZsYWdzPWI7dGhpcy5mZD1kfWEucHJvdG90eXBlLmdldFN0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLm5vZGUuZ2V0U3RyaW5nKCl9O2EucHJvdG90eXBlLnNldFN0cmluZz1mdW5jdGlvbihhKXt0aGlzLm5vZGUuc2V0U3RyaW5nKGEpfTthLnByb3RvdHlwZS5nZXRCdWZmZXI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ub2RlLmdldEJ1ZmZlcigpfTsKYS5wcm90b3R5cGUuc2V0QnVmZmVyPWZ1bmN0aW9uKGEpe3RoaXMubm9kZS5zZXRCdWZmZXIoYSl9O2EucHJvdG90eXBlLmdldFNpemU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ub2RlLmdldFNpemUoKX07YS5wcm90b3R5cGUudHJ1bmNhdGU9ZnVuY3Rpb24oYSl7dGhpcy5ub2RlLnRydW5jYXRlKGEpfTthLnByb3RvdHlwZS5zZWVrVG89ZnVuY3Rpb24oYSl7dGhpcy5wb3NpdGlvbj1hfTthLnByb3RvdHlwZS5zdGF0cz1mdW5jdGlvbigpe3JldHVybiBlYi5kZWZhdWx0LmJ1aWxkKHRoaXMubm9kZSl9O2EucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKGEsYyxiLGQpe3ZvaWQgMD09PWMmJihjPTApO3ZvaWQgMD09PWImJihiPWEubGVuZ3RoKTsibnVtYmVyIiE9PXR5cGVvZiBkJiYoZD10aGlzLnBvc2l0aW9uKTt0aGlzLmZsYWdzJmgmJihkPXRoaXMuZ2V0U2l6ZSgpKTthPXRoaXMubm9kZS53cml0ZShhLGMsYixkKTt0aGlzLnBvc2l0aW9uPWQrYTtyZXR1cm4gYX07YS5wcm90b3R5cGUucmVhZD0KZnVuY3Rpb24oYSxjLGIsZCl7dm9pZCAwPT09YyYmKGM9MCk7dm9pZCAwPT09YiYmKGI9YS5ieXRlTGVuZ3RoKTsibnVtYmVyIiE9PXR5cGVvZiBkJiYoZD10aGlzLnBvc2l0aW9uKTthPXRoaXMubm9kZS5yZWFkKGEsYyxiLGQpO3RoaXMucG9zaXRpb249ZCthO3JldHVybiBhfTthLnByb3RvdHlwZS5jaG1vZD1mdW5jdGlvbihhKXt0aGlzLm5vZGUuY2htb2QoYSl9O2EucHJvdG90eXBlLmNob3duPWZ1bmN0aW9uKGEsYyl7dGhpcy5ub2RlLmNob3duKGEsYyl9O3JldHVybiBhfSgpO2EuRmlsZT1jfSk7USh5Yik7dmFyIFdnPXliLk5vZGUsbWY9SyhmdW5jdGlvbihjLGEpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShhLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTthLmRlZmF1bHQ9ZnVuY3Rpb24oYSxjLGUpe3ZhciBiPXNldFRpbWVvdXQuYXBwbHkobnVsbCxhcmd1bWVudHMpO2ImJiJvYmplY3QiPT09dHlwZW9mIGImJiJmdW5jdGlvbiI9PT10eXBlb2YgYi51bnJlZiYmYi51bnJlZigpOwpyZXR1cm4gYn19KTtRKG1mKTtMYS5wcm90b3R5cGUucHVzaD1mdW5jdGlvbihjKXtjPXtkYXRhOmMsbmV4dDpudWxsfTswPHRoaXMubGVuZ3RoP3RoaXMudGFpbC5uZXh0PWM6dGhpcy5oZWFkPWM7dGhpcy50YWlsPWM7Kyt0aGlzLmxlbmd0aH07TGEucHJvdG90eXBlLnVuc2hpZnQ9ZnVuY3Rpb24oYyl7Yz17ZGF0YTpjLG5leHQ6dGhpcy5oZWFkfTswPT09dGhpcy5sZW5ndGgmJih0aGlzLnRhaWw9Yyk7dGhpcy5oZWFkPWM7Kyt0aGlzLmxlbmd0aH07TGEucHJvdG90eXBlLnNoaWZ0PWZ1bmN0aW9uKCl7aWYoMCE9PXRoaXMubGVuZ3RoKXt2YXIgYz10aGlzLmhlYWQuZGF0YTt0aGlzLmhlYWQ9MT09PXRoaXMubGVuZ3RoP3RoaXMudGFpbD1udWxsOnRoaXMuaGVhZC5uZXh0Oy0tdGhpcy5sZW5ndGg7cmV0dXJuIGN9fTtMYS5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXt0aGlzLmhlYWQ9dGhpcy50YWlsPW51bGw7dGhpcy5sZW5ndGg9MH07TGEucHJvdG90eXBlLmpvaW49ZnVuY3Rpb24oYyl7aWYoMD09PQp0aGlzLmxlbmd0aClyZXR1cm4iIjtmb3IodmFyIGE9dGhpcy5oZWFkLGI9IiIrYS5kYXRhO2E9YS5uZXh0OyliKz1jK2EuZGF0YTtyZXR1cm4gYn07TGEucHJvdG90eXBlLmNvbmNhdD1mdW5jdGlvbihjKXtpZigwPT09dGhpcy5sZW5ndGgpcmV0dXJuIGwuYWxsb2MoMCk7aWYoMT09PXRoaXMubGVuZ3RoKXJldHVybiB0aGlzLmhlYWQuZGF0YTtjPWwuYWxsb2NVbnNhZmUoYz4+PjApO2Zvcih2YXIgYT10aGlzLmhlYWQsYj0wO2E7KWEuZGF0YS5jb3B5KGMsYiksYis9YS5kYXRhLmxlbmd0aCxhPWEubmV4dDtyZXR1cm4gY307dmFyIGRnPWwuaXNFbmNvZGluZ3x8ZnVuY3Rpb24oYyl7c3dpdGNoKGMmJmMudG9Mb3dlckNhc2UoKSl7Y2FzZSAiaGV4IjpjYXNlICJ1dGY4IjpjYXNlICJ1dGYtOCI6Y2FzZSAiYXNjaWkiOmNhc2UgImJpbmFyeSI6Y2FzZSAiYmFzZTY0IjpjYXNlICJ1Y3MyIjpjYXNlICJ1Y3MtMiI6Y2FzZSAidXRmMTZsZSI6Y2FzZSAidXRmLTE2bGUiOmNhc2UgInJhdyI6cmV0dXJuITA7CmRlZmF1bHQ6cmV0dXJuITF9fTtyYi5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24oYyl7Zm9yKHZhciBhPSIiO3RoaXMuY2hhckxlbmd0aDspe2E9Yy5sZW5ndGg+PXRoaXMuY2hhckxlbmd0aC10aGlzLmNoYXJSZWNlaXZlZD90aGlzLmNoYXJMZW5ndGgtdGhpcy5jaGFyUmVjZWl2ZWQ6Yy5sZW5ndGg7Yy5jb3B5KHRoaXMuY2hhckJ1ZmZlcix0aGlzLmNoYXJSZWNlaXZlZCwwLGEpO3RoaXMuY2hhclJlY2VpdmVkKz1hO2lmKHRoaXMuY2hhclJlY2VpdmVkPHRoaXMuY2hhckxlbmd0aClyZXR1cm4iIjtjPWMuc2xpY2UoYSxjLmxlbmd0aCk7YT10aGlzLmNoYXJCdWZmZXIuc2xpY2UoMCx0aGlzLmNoYXJMZW5ndGgpLnRvU3RyaW5nKHRoaXMuZW5jb2RpbmcpO3ZhciBiPWEuY2hhckNvZGVBdChhLmxlbmd0aC0xKTtpZig1NTI5Njw9YiYmNTYzMTk+PWIpdGhpcy5jaGFyTGVuZ3RoKz10aGlzLnN1cnJvZ2F0ZVNpemUsYT0iIjtlbHNle3RoaXMuY2hhclJlY2VpdmVkPXRoaXMuY2hhckxlbmd0aD0KMDtpZigwPT09Yy5sZW5ndGgpcmV0dXJuIGE7YnJlYWt9fXRoaXMuZGV0ZWN0SW5jb21wbGV0ZUNoYXIoYyk7dmFyIGQ9Yy5sZW5ndGg7dGhpcy5jaGFyTGVuZ3RoJiYoYy5jb3B5KHRoaXMuY2hhckJ1ZmZlciwwLGMubGVuZ3RoLXRoaXMuY2hhclJlY2VpdmVkLGQpLGQtPXRoaXMuY2hhclJlY2VpdmVkKTthKz1jLnRvU3RyaW5nKHRoaXMuZW5jb2RpbmcsMCxkKTtkPWEubGVuZ3RoLTE7Yj1hLmNoYXJDb2RlQXQoZCk7cmV0dXJuIDU1Mjk2PD1iJiY1NjMxOT49Yj8oYj10aGlzLnN1cnJvZ2F0ZVNpemUsdGhpcy5jaGFyTGVuZ3RoKz1iLHRoaXMuY2hhclJlY2VpdmVkKz1iLHRoaXMuY2hhckJ1ZmZlci5jb3B5KHRoaXMuY2hhckJ1ZmZlcixiLDAsYiksYy5jb3B5KHRoaXMuY2hhckJ1ZmZlciwwLDAsYiksYS5zdWJzdHJpbmcoMCxkKSk6YX07cmIucHJvdG90eXBlLmRldGVjdEluY29tcGxldGVDaGFyPWZ1bmN0aW9uKGMpe2Zvcih2YXIgYT0zPD1jLmxlbmd0aD8zOmMubGVuZ3RoOzA8CmE7YS0tKXt2YXIgYj1jW2MubGVuZ3RoLWFdO2lmKDE9PWEmJjY9PWI+PjUpe3RoaXMuY2hhckxlbmd0aD0yO2JyZWFrfWlmKDI+PWEmJjE0PT1iPj40KXt0aGlzLmNoYXJMZW5ndGg9MzticmVha31pZigzPj1hJiYzMD09Yj4+Myl7dGhpcy5jaGFyTGVuZ3RoPTQ7YnJlYWt9fXRoaXMuY2hhclJlY2VpdmVkPWF9O3JiLnByb3RvdHlwZS5lbmQ9ZnVuY3Rpb24oYyl7dmFyIGE9IiI7YyYmYy5sZW5ndGgmJihhPXRoaXMud3JpdGUoYykpO3RoaXMuY2hhclJlY2VpdmVkJiYoYz10aGlzLmVuY29kaW5nLGErPXRoaXMuY2hhckJ1ZmZlci5zbGljZSgwLHRoaXMuY2hhclJlY2VpdmVkKS50b1N0cmluZyhjKSk7cmV0dXJuIGF9O3kuUmVhZGFibGVTdGF0ZT1xZTt2YXIgej1TZCgic3RyZWFtIik7emEoeSx4KTt5LnByb3RvdHlwZS5wdXNoPWZ1bmN0aW9uKGMsYSl7dmFyIGI9dGhpcy5fcmVhZGFibGVTdGF0ZTtiLm9iamVjdE1vZGV8fCJzdHJpbmciIT09dHlwZW9mIGN8fChhPWF8fGIuZGVmYXVsdEVuY29kaW5nLAphIT09Yi5lbmNvZGluZyYmKGM9bC5mcm9tKGMsYSksYT0iIikpO3JldHVybiByZSh0aGlzLGIsYyxhLCExKX07eS5wcm90b3R5cGUudW5zaGlmdD1mdW5jdGlvbihjKXtyZXR1cm4gcmUodGhpcyx0aGlzLl9yZWFkYWJsZVN0YXRlLGMsIiIsITApfTt5LnByb3RvdHlwZS5pc1BhdXNlZD1mdW5jdGlvbigpe3JldHVybiExPT09dGhpcy5fcmVhZGFibGVTdGF0ZS5mbG93aW5nfTt5LnByb3RvdHlwZS5zZXRFbmNvZGluZz1mdW5jdGlvbihjKXt0aGlzLl9yZWFkYWJsZVN0YXRlLmRlY29kZXI9bmV3IHJiKGMpO3RoaXMuX3JlYWRhYmxlU3RhdGUuZW5jb2Rpbmc9YztyZXR1cm4gdGhpc307eS5wcm90b3R5cGUucmVhZD1mdW5jdGlvbihjKXt6KCJyZWFkIixjKTtjPXBhcnNlSW50KGMsMTApO3ZhciBhPXRoaXMuX3JlYWRhYmxlU3RhdGUsYj1jOzAhPT1jJiYoYS5lbWl0dGVkUmVhZGFibGU9ITEpO2lmKDA9PT1jJiZhLm5lZWRSZWFkYWJsZSYmKGEubGVuZ3RoPj1hLmhpZ2hXYXRlck1hcmt8fAphLmVuZGVkKSlyZXR1cm4geigicmVhZDogZW1pdFJlYWRhYmxlIixhLmxlbmd0aCxhLmVuZGVkKSwwPT09YS5sZW5ndGgmJmEuZW5kZWQ/SmModGhpcyk6UWIodGhpcyksbnVsbDtjPXNlKGMsYSk7aWYoMD09PWMmJmEuZW5kZWQpcmV0dXJuIDA9PT1hLmxlbmd0aCYmSmModGhpcyksbnVsbDt2YXIgZD1hLm5lZWRSZWFkYWJsZTt6KCJuZWVkIHJlYWRhYmxlIixkKTtpZigwPT09YS5sZW5ndGh8fGEubGVuZ3RoLWM8YS5oaWdoV2F0ZXJNYXJrKWQ9ITAseigibGVuZ3RoIGxlc3MgdGhhbiB3YXRlcm1hcmsiLGQpO2EuZW5kZWR8fGEucmVhZGluZz96KCJyZWFkaW5nIG9yIGVuZGVkIiwhMSk6ZCYmKHooImRvIHJlYWQiKSxhLnJlYWRpbmc9ITAsYS5zeW5jPSEwLDA9PT1hLmxlbmd0aCYmKGEubmVlZFJlYWRhYmxlPSEwKSx0aGlzLl9yZWFkKGEuaGlnaFdhdGVyTWFyayksYS5zeW5jPSExLGEucmVhZGluZ3x8KGM9c2UoYixhKSkpO2Q9MDxjP3VlKGMsYSk6bnVsbDtudWxsPT09ZD8oYS5uZWVkUmVhZGFibGU9CiEwLGM9MCk6YS5sZW5ndGgtPWM7MD09PWEubGVuZ3RoJiYoYS5lbmRlZHx8KGEubmVlZFJlYWRhYmxlPSEwKSxiIT09YyYmYS5lbmRlZCYmSmModGhpcykpO251bGwhPT1kJiZ0aGlzLmVtaXQoImRhdGEiLGQpO3JldHVybiBkfTt5LnByb3RvdHlwZS5fcmVhZD1mdW5jdGlvbigpe3RoaXMuZW1pdCgiZXJyb3IiLEVycm9yKCJub3QgaW1wbGVtZW50ZWQiKSl9O3kucHJvdG90eXBlLnBpcGU9ZnVuY3Rpb24oYyxhKXtmdW5jdGlvbiBiKGEpe3ooIm9udW5waXBlIik7YT09PXEmJmUoKX1mdW5jdGlvbiBkKCl7eigib25lbmQiKTtjLmVuZCgpfWZ1bmN0aW9uIGUoKXt6KCJjbGVhbnVwIik7Yy5yZW1vdmVMaXN0ZW5lcigiY2xvc2UiLGgpO2MucmVtb3ZlTGlzdGVuZXIoImZpbmlzaCIsayk7Yy5yZW1vdmVMaXN0ZW5lcigiZHJhaW4iLHIpO2MucmVtb3ZlTGlzdGVuZXIoImVycm9yIixnKTtjLnJlbW92ZUxpc3RlbmVyKCJ1bnBpcGUiLGIpO3EucmVtb3ZlTGlzdGVuZXIoImVuZCIsZCk7cS5yZW1vdmVMaXN0ZW5lcigiZW5kIiwKZSk7cS5yZW1vdmVMaXN0ZW5lcigiZGF0YSIsZik7bT0hMDshbC5hd2FpdERyYWlufHxjLl93cml0YWJsZVN0YXRlJiYhYy5fd3JpdGFibGVTdGF0ZS5uZWVkRHJhaW58fHIoKX1mdW5jdGlvbiBmKGEpe3ooIm9uZGF0YSIpO3A9ITE7ITEhPT1jLndyaXRlKGEpfHxwfHwoKDE9PT1sLnBpcGVzQ291bnQmJmwucGlwZXM9PT1jfHwxPGwucGlwZXNDb3VudCYmLTEhPT12ZShsLnBpcGVzLGMpKSYmIW0mJih6KCJmYWxzZSB3cml0ZSByZXNwb25zZSwgcGF1c2UiLHEuX3JlYWRhYmxlU3RhdGUuYXdhaXREcmFpbikscS5fcmVhZGFibGVTdGF0ZS5hd2FpdERyYWluKysscD0hMCkscS5wYXVzZSgpKX1mdW5jdGlvbiBnKGEpe3ooIm9uZXJyb3IiLGEpO3QoKTtjLnJlbW92ZUxpc3RlbmVyKCJlcnJvciIsZyk7MD09PWMubGlzdGVuZXJzKCJlcnJvciIpLmxlbmd0aCYmYy5lbWl0KCJlcnJvciIsYSl9ZnVuY3Rpb24gaCgpe2MucmVtb3ZlTGlzdGVuZXIoImZpbmlzaCIsayk7dCgpfWZ1bmN0aW9uIGsoKXt6KCJvbmZpbmlzaCIpOwpjLnJlbW92ZUxpc3RlbmVyKCJjbG9zZSIsaCk7dCgpfWZ1bmN0aW9uIHQoKXt6KCJ1bnBpcGUiKTtxLnVucGlwZShjKX12YXIgcT10aGlzLGw9dGhpcy5fcmVhZGFibGVTdGF0ZTtzd2l0Y2gobC5waXBlc0NvdW50KXtjYXNlIDA6bC5waXBlcz1jO2JyZWFrO2Nhc2UgMTpsLnBpcGVzPVtsLnBpcGVzLGNdO2JyZWFrO2RlZmF1bHQ6bC5waXBlcy5wdXNoKGMpfWwucGlwZXNDb3VudCs9MTt6KCJwaXBlIGNvdW50PSVkIG9wdHM9JWoiLGwucGlwZXNDb3VudCxhKTthPWEmJiExPT09YS5lbmQ/ZTpkO2lmKGwuZW5kRW1pdHRlZClYKGEpO2Vsc2UgcS5vbmNlKCJlbmQiLGEpO2Mub24oInVucGlwZSIsYik7dmFyIHI9amcocSk7Yy5vbigiZHJhaW4iLHIpO3ZhciBtPSExLHA9ITE7cS5vbigiZGF0YSIsZik7aGcoYywiZXJyb3IiLGcpO2Mub25jZSgiY2xvc2UiLGgpO2Mub25jZSgiZmluaXNoIixrKTtjLmVtaXQoInBpcGUiLHEpO2wuZmxvd2luZ3x8KHooInBpcGUgcmVzdW1lIikscS5yZXN1bWUoKSk7CnJldHVybiBjfTt5LnByb3RvdHlwZS51bnBpcGU9ZnVuY3Rpb24oYyl7dmFyIGE9dGhpcy5fcmVhZGFibGVTdGF0ZTtpZigwPT09YS5waXBlc0NvdW50KXJldHVybiB0aGlzO2lmKDE9PT1hLnBpcGVzQ291bnQpe2lmKGMmJmMhPT1hLnBpcGVzKXJldHVybiB0aGlzO2N8fChjPWEucGlwZXMpO2EucGlwZXM9bnVsbDthLnBpcGVzQ291bnQ9MDthLmZsb3dpbmc9ITE7YyYmYy5lbWl0KCJ1bnBpcGUiLHRoaXMpO3JldHVybiB0aGlzfWlmKCFjKXtjPWEucGlwZXM7dmFyIGI9YS5waXBlc0NvdW50O2EucGlwZXM9bnVsbDthLnBpcGVzQ291bnQ9MDthLmZsb3dpbmc9ITE7Zm9yKGE9MDthPGI7YSsrKWNbYV0uZW1pdCgidW5waXBlIix0aGlzKTtyZXR1cm4gdGhpc31iPXZlKGEucGlwZXMsYyk7aWYoLTE9PT1iKXJldHVybiB0aGlzO2EucGlwZXMuc3BsaWNlKGIsMSk7LS1hLnBpcGVzQ291bnQ7MT09PWEucGlwZXNDb3VudCYmKGEucGlwZXM9YS5waXBlc1swXSk7Yy5lbWl0KCJ1bnBpcGUiLAp0aGlzKTtyZXR1cm4gdGhpc307eS5wcm90b3R5cGUub249ZnVuY3Rpb24oYyxhKXthPXgucHJvdG90eXBlLm9uLmNhbGwodGhpcyxjLGEpOyJkYXRhIj09PWM/ITEhPT10aGlzLl9yZWFkYWJsZVN0YXRlLmZsb3dpbmcmJnRoaXMucmVzdW1lKCk6InJlYWRhYmxlIj09PWMmJihjPXRoaXMuX3JlYWRhYmxlU3RhdGUsYy5lbmRFbWl0dGVkfHxjLnJlYWRhYmxlTGlzdGVuaW5nfHwoYy5yZWFkYWJsZUxpc3RlbmluZz1jLm5lZWRSZWFkYWJsZT0hMCxjLmVtaXR0ZWRSZWFkYWJsZT0hMSxjLnJlYWRpbmc/Yy5sZW5ndGgmJlFiKHRoaXMpOlgoa2csdGhpcykpKTtyZXR1cm4gYX07eS5wcm90b3R5cGUuYWRkTGlzdGVuZXI9eS5wcm90b3R5cGUub247eS5wcm90b3R5cGUucmVzdW1lPWZ1bmN0aW9uKCl7dmFyIGM9dGhpcy5fcmVhZGFibGVTdGF0ZTtjLmZsb3dpbmd8fCh6KCJyZXN1bWUiKSxjLmZsb3dpbmc9ITAsYy5yZXN1bWVTY2hlZHVsZWR8fChjLnJlc3VtZVNjaGVkdWxlZD0hMCxYKGxnLAp0aGlzLGMpKSk7cmV0dXJuIHRoaXN9O3kucHJvdG90eXBlLnBhdXNlPWZ1bmN0aW9uKCl7eigiY2FsbCBwYXVzZSBmbG93aW5nPSVqIix0aGlzLl9yZWFkYWJsZVN0YXRlLmZsb3dpbmcpOyExIT09dGhpcy5fcmVhZGFibGVTdGF0ZS5mbG93aW5nJiYoeigicGF1c2UiKSx0aGlzLl9yZWFkYWJsZVN0YXRlLmZsb3dpbmc9ITEsdGhpcy5lbWl0KCJwYXVzZSIpKTtyZXR1cm4gdGhpc307eS5wcm90b3R5cGUud3JhcD1mdW5jdGlvbihjKXt2YXIgYT10aGlzLl9yZWFkYWJsZVN0YXRlLGI9ITEsZD10aGlzO2Mub24oImVuZCIsZnVuY3Rpb24oKXt6KCJ3cmFwcGVkIGVuZCIpO2lmKGEuZGVjb2RlciYmIWEuZW5kZWQpe3ZhciBjPWEuZGVjb2Rlci5lbmQoKTtjJiZjLmxlbmd0aCYmZC5wdXNoKGMpfWQucHVzaChudWxsKX0pO2Mub24oImRhdGEiLGZ1bmN0aW9uKGUpe3ooIndyYXBwZWQgZGF0YSIpO2EuZGVjb2RlciYmKGU9YS5kZWNvZGVyLndyaXRlKGUpKTthLm9iamVjdE1vZGUmJihudWxsPT09CmV8fHZvaWQgMD09PWUpfHwhKGEub2JqZWN0TW9kZXx8ZSYmZS5sZW5ndGgpfHxkLnB1c2goZSl8fChiPSEwLGMucGF1c2UoKSl9KTtmb3IodmFyIGUgaW4gYyl2b2lkIDA9PT10aGlzW2VdJiYiZnVuY3Rpb24iPT09dHlwZW9mIGNbZV0mJih0aGlzW2VdPWZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBjW2FdLmFwcGx5KGMsYXJndW1lbnRzKX19KGUpKTtuZyhbImVycm9yIiwiY2xvc2UiLCJkZXN0cm95IiwicGF1c2UiLCJyZXN1bWUiXSxmdW5jdGlvbihhKXtjLm9uKGEsZC5lbWl0LmJpbmQoZCxhKSl9KTtkLl9yZWFkPWZ1bmN0aW9uKGEpe3ooIndyYXBwZWQgX3JlYWQiLGEpO2ImJihiPSExLGMucmVzdW1lKCkpfTtyZXR1cm4gZH07eS5fZnJvbUxpc3Q9dWU7TC5Xcml0YWJsZVN0YXRlPUtjO3phKEwseCk7S2MucHJvdG90eXBlLmdldEJ1ZmZlcj1mdW5jdGlvbigpe2Zvcih2YXIgYz10aGlzLmJ1ZmZlcmVkUmVxdWVzdCxhPVtdO2M7KWEucHVzaChjKSxjPWMubmV4dDsKcmV0dXJuIGF9O0wucHJvdG90eXBlLnBpcGU9ZnVuY3Rpb24oKXt0aGlzLmVtaXQoImVycm9yIixFcnJvcigiQ2Fubm90IHBpcGUsIG5vdCByZWFkYWJsZSIpKX07TC5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24oYyxhLGIpe3ZhciBkPXRoaXMuX3dyaXRhYmxlU3RhdGUsZT0hMTsiZnVuY3Rpb24iPT09dHlwZW9mIGEmJihiPWEsYT1udWxsKTtsLmlzQnVmZmVyKGMpP2E9ImJ1ZmZlciI6YXx8KGE9ZC5kZWZhdWx0RW5jb2RpbmcpOyJmdW5jdGlvbiIhPT10eXBlb2YgYiYmKGI9b2cpO2lmKGQuZW5kZWQpZD1iLGM9RXJyb3IoIndyaXRlIGFmdGVyIGVuZCIpLHRoaXMuZW1pdCgiZXJyb3IiLGMpLFgoZCxjKTtlbHNle3ZhciBmPWIsZz0hMCxoPSExO251bGw9PT1jP2g9bmV3IFR5cGVFcnJvcigiTWF5IG5vdCB3cml0ZSBudWxsIHZhbHVlcyB0byBzdHJlYW0iKTpsLmlzQnVmZmVyKGMpfHwic3RyaW5nIj09PXR5cGVvZiBjfHx2b2lkIDA9PT1jfHxkLm9iamVjdE1vZGV8fChoPW5ldyBUeXBlRXJyb3IoIkludmFsaWQgbm9uLXN0cmluZy9idWZmZXIgY2h1bmsiKSk7CmgmJih0aGlzLmVtaXQoImVycm9yIixoKSxYKGYsaCksZz0hMSk7ZyYmKGQucGVuZGluZ2NiKyssZT1hLGQub2JqZWN0TW9kZXx8ITE9PT1kLmRlY29kZVN0cmluZ3N8fCJzdHJpbmciIT09dHlwZW9mIGN8fChjPWwuZnJvbShjLGUpKSxsLmlzQnVmZmVyKGMpJiYoZT0iYnVmZmVyIiksZj1kLm9iamVjdE1vZGU/MTpjLmxlbmd0aCxkLmxlbmd0aCs9ZixhPWQubGVuZ3RoPGQuaGlnaFdhdGVyTWFyayxhfHwoZC5uZWVkRHJhaW49ITApLGQud3JpdGluZ3x8ZC5jb3JrZWQ/KGY9ZC5sYXN0QnVmZmVyZWRSZXF1ZXN0LGQubGFzdEJ1ZmZlcmVkUmVxdWVzdD1uZXcgcGcoYyxlLGIpLGY/Zi5uZXh0PWQubGFzdEJ1ZmZlcmVkUmVxdWVzdDpkLmJ1ZmZlcmVkUmVxdWVzdD1kLmxhc3RCdWZmZXJlZFJlcXVlc3QsZC5idWZmZXJlZFJlcXVlc3RDb3VudCs9MSk6TGModGhpcyxkLCExLGYsYyxlLGIpLGU9YSl9cmV0dXJuIGV9O0wucHJvdG90eXBlLmNvcms9ZnVuY3Rpb24oKXt0aGlzLl93cml0YWJsZVN0YXRlLmNvcmtlZCsrfTsKTC5wcm90b3R5cGUudW5jb3JrPWZ1bmN0aW9uKCl7dmFyIGM9dGhpcy5fd3JpdGFibGVTdGF0ZTtjLmNvcmtlZCYmKGMuY29ya2VkLS0sYy53cml0aW5nfHxjLmNvcmtlZHx8Yy5maW5pc2hlZHx8Yy5idWZmZXJQcm9jZXNzaW5nfHwhYy5idWZmZXJlZFJlcXVlc3R8fHhlKHRoaXMsYykpfTtMLnByb3RvdHlwZS5zZXREZWZhdWx0RW5jb2Rpbmc9ZnVuY3Rpb24oYyl7InN0cmluZyI9PT10eXBlb2YgYyYmKGM9Yy50b0xvd2VyQ2FzZSgpKTtpZighKC0xPCJoZXggdXRmOCB1dGYtOCBhc2NpaSBiaW5hcnkgYmFzZTY0IHVjczIgdWNzLTIgdXRmMTZsZSB1dGYtMTZsZSByYXciLnNwbGl0KCIgIikuaW5kZXhPZigoYysiIikudG9Mb3dlckNhc2UoKSkpKXRocm93IG5ldyBUeXBlRXJyb3IoIlVua25vd24gZW5jb2Rpbmc6ICIrYyk7dGhpcy5fd3JpdGFibGVTdGF0ZS5kZWZhdWx0RW5jb2Rpbmc9YztyZXR1cm4gdGhpc307TC5wcm90b3R5cGUuX3dyaXRlPWZ1bmN0aW9uKGMsYSxiKXtiKEVycm9yKCJub3QgaW1wbGVtZW50ZWQiKSl9OwpMLnByb3RvdHlwZS5fd3JpdGV2PW51bGw7TC5wcm90b3R5cGUuZW5kPWZ1bmN0aW9uKGMsYSxiKXt2YXIgZD10aGlzLl93cml0YWJsZVN0YXRlOyJmdW5jdGlvbiI9PT10eXBlb2YgYz8oYj1jLGE9Yz1udWxsKToiZnVuY3Rpb24iPT09dHlwZW9mIGEmJihiPWEsYT1udWxsKTtudWxsIT09YyYmdm9pZCAwIT09YyYmdGhpcy53cml0ZShjLGEpO2QuY29ya2VkJiYoZC5jb3JrZWQ9MSx0aGlzLnVuY29yaygpKTtpZighZC5lbmRpbmcmJiFkLmZpbmlzaGVkKXtjPWI7ZC5lbmRpbmc9ITA7QWUodGhpcyxkKTtpZihjKWlmKGQuZmluaXNoZWQpWChjKTtlbHNlIHRoaXMub25jZSgiZmluaXNoIixjKTtkLmVuZGVkPSEwO3RoaXMud3JpdGFibGU9ITF9fTt6YShVLHkpO2Zvcih2YXIgbmY9T2JqZWN0LmtleXMoTC5wcm90b3R5cGUpLGFkPTA7YWQ8bmYubGVuZ3RoO2FkKyspe3ZhciBiZD1uZlthZF07VS5wcm90b3R5cGVbYmRdfHwoVS5wcm90b3R5cGVbYmRdPUwucHJvdG90eXBlW2JkXSl9emEoYmEsClUpO2JhLnByb3RvdHlwZS5wdXNoPWZ1bmN0aW9uKGMsYSl7dGhpcy5fdHJhbnNmb3JtU3RhdGUubmVlZFRyYW5zZm9ybT0hMTtyZXR1cm4gVS5wcm90b3R5cGUucHVzaC5jYWxsKHRoaXMsYyxhKX07YmEucHJvdG90eXBlLl90cmFuc2Zvcm09ZnVuY3Rpb24oKXt0aHJvdyBFcnJvcigiTm90IGltcGxlbWVudGVkIik7fTtiYS5wcm90b3R5cGUuX3dyaXRlPWZ1bmN0aW9uKGMsYSxiKXt2YXIgZD10aGlzLl90cmFuc2Zvcm1TdGF0ZTtkLndyaXRlY2I9YjtkLndyaXRlY2h1bms9YztkLndyaXRlZW5jb2Rpbmc9YTtkLnRyYW5zZm9ybWluZ3x8KGM9dGhpcy5fcmVhZGFibGVTdGF0ZSwoZC5uZWVkVHJhbnNmb3JtfHxjLm5lZWRSZWFkYWJsZXx8Yy5sZW5ndGg8Yy5oaWdoV2F0ZXJNYXJrKSYmdGhpcy5fcmVhZChjLmhpZ2hXYXRlck1hcmspKX07YmEucHJvdG90eXBlLl9yZWFkPWZ1bmN0aW9uKCl7dmFyIGM9dGhpcy5fdHJhbnNmb3JtU3RhdGU7bnVsbCE9PWMud3JpdGVjaHVuayYmYy53cml0ZWNiJiYKIWMudHJhbnNmb3JtaW5nPyhjLnRyYW5zZm9ybWluZz0hMCx0aGlzLl90cmFuc2Zvcm0oYy53cml0ZWNodW5rLGMud3JpdGVlbmNvZGluZyxjLmFmdGVyVHJhbnNmb3JtKSk6Yy5uZWVkVHJhbnNmb3JtPSEwfTt6YShzYixiYSk7c2IucHJvdG90eXBlLl90cmFuc2Zvcm09ZnVuY3Rpb24oYyxhLGIpe2IobnVsbCxjKX07emEoY2EseCk7Y2EuUmVhZGFibGU9eTtjYS5Xcml0YWJsZT1MO2NhLkR1cGxleD1VO2NhLlRyYW5zZm9ybT1iYTtjYS5QYXNzVGhyb3VnaD1zYjtjYS5TdHJlYW09Y2E7Y2EucHJvdG90eXBlLnBpcGU9ZnVuY3Rpb24oYyxhKXtmdW5jdGlvbiBiKGEpe2Mud3JpdGFibGUmJiExPT09Yy53cml0ZShhKSYmay5wYXVzZSYmay5wYXVzZSgpfWZ1bmN0aW9uIGQoKXtrLnJlYWRhYmxlJiZrLnJlc3VtZSYmay5yZXN1bWUoKX1mdW5jdGlvbiBlKCl7dHx8KHQ9ITAsYy5lbmQoKSl9ZnVuY3Rpb24gZigpe3R8fCh0PSEwLCJmdW5jdGlvbiI9PT10eXBlb2YgYy5kZXN0cm95JiZjLmRlc3Ryb3koKSl9CmZ1bmN0aW9uIGcoYSl7aCgpO2lmKDA9PT14Lmxpc3RlbmVyQ291bnQodGhpcywiZXJyb3IiKSl0aHJvdyBhO31mdW5jdGlvbiBoKCl7ay5yZW1vdmVMaXN0ZW5lcigiZGF0YSIsYik7Yy5yZW1vdmVMaXN0ZW5lcigiZHJhaW4iLGQpO2sucmVtb3ZlTGlzdGVuZXIoImVuZCIsZSk7ay5yZW1vdmVMaXN0ZW5lcigiY2xvc2UiLGYpO2sucmVtb3ZlTGlzdGVuZXIoImVycm9yIixnKTtjLnJlbW92ZUxpc3RlbmVyKCJlcnJvciIsZyk7ay5yZW1vdmVMaXN0ZW5lcigiZW5kIixoKTtrLnJlbW92ZUxpc3RlbmVyKCJjbG9zZSIsaCk7Yy5yZW1vdmVMaXN0ZW5lcigiY2xvc2UiLGgpfXZhciBrPXRoaXM7ay5vbigiZGF0YSIsYik7Yy5vbigiZHJhaW4iLGQpO2MuX2lzU3RkaW98fGEmJiExPT09YS5lbmR8fChrLm9uKCJlbmQiLGUpLGsub24oImNsb3NlIixmKSk7dmFyIHQ9ITE7ay5vbigiZXJyb3IiLGcpO2Mub24oImVycm9yIixnKTtrLm9uKCJlbmQiLGgpO2sub24oImNsb3NlIixoKTtjLm9uKCJjbG9zZSIsCmgpO2MuZW1pdCgicGlwZSIsayk7cmV0dXJuIGN9O3ZhciBYZz1BcnJheS5wcm90b3R5cGUuc2xpY2UsWWc9ZnVuY3Rpb24gZChhLGIpe2Zvcih2YXIgZSBpbiBiKWFbZV09YltlXTtyZXR1cm4gMz5hcmd1bWVudHMubGVuZ3RoP2E6ZC5hcHBseShudWxsLFthXS5jb25jYXQoWGcuY2FsbChhcmd1bWVudHMsMikpKX0sb2Y9SyhmdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGQoYSxiLGQpe3ZvaWQgMD09PWQmJihkPWZ1bmN0aW9uKGEpe3JldHVybiBhfSk7cmV0dXJuIGZ1bmN0aW9uKCl7Zm9yKHZhciBmPVtdLGg9MDtoPGFyZ3VtZW50cy5sZW5ndGg7aCsrKWZbaF09YXJndW1lbnRzW2hdO3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihoLGcpe2FbYl0uYmluZChhKS5hcHBseSh2b2lkIDAsZShmLFtmdW5jdGlvbihhLGIpe3JldHVybiBhP2coYSk6aChkKGIpKX1dKSl9KX19dmFyIGU9TiYmTi5fX3NwcmVhZEFycmF5c3x8ZnVuY3Rpb24oKXtmb3IodmFyIGE9MCxiPTAsZD1hcmd1bWVudHMubGVuZ3RoO2I8CmQ7YisrKWErPWFyZ3VtZW50c1tiXS5sZW5ndGg7YT1BcnJheShhKTt2YXIgZT0wO2ZvcihiPTA7YjxkO2IrKylmb3IodmFyIGY9YXJndW1lbnRzW2JdLGw9MCxyPWYubGVuZ3RoO2w8cjtsKyssZSsrKWFbZV09ZltsXTtyZXR1cm4gYX07T2JqZWN0LmRlZmluZVByb3BlcnR5KGIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBmPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhLGIpe3RoaXMudm9sPWE7dGhpcy5mZD1ifWEucHJvdG90eXBlLmFwcGVuZEZpbGU9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gZCh0aGlzLnZvbCwiYXBwZW5kRmlsZSIpKHRoaXMuZmQsYSxiKX07YS5wcm90b3R5cGUuY2htb2Q9ZnVuY3Rpb24oYSl7cmV0dXJuIGQodGhpcy52b2wsImZjaG1vZCIpKHRoaXMuZmQsYSl9O2EucHJvdG90eXBlLmNob3duPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGQodGhpcy52b2wsImZjaG93biIpKHRoaXMuZmQsYSxiKX07YS5wcm90b3R5cGUuY2xvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gZCh0aGlzLnZvbCwKImNsb3NlIikodGhpcy5mZCl9O2EucHJvdG90eXBlLmRhdGFzeW5jPWZ1bmN0aW9uKCl7cmV0dXJuIGQodGhpcy52b2wsImZkYXRhc3luYyIpKHRoaXMuZmQpfTthLnByb3RvdHlwZS5yZWFkPWZ1bmN0aW9uKGEsYixlLGYpe3JldHVybiBkKHRoaXMudm9sLCJyZWFkIixmdW5jdGlvbihiKXtyZXR1cm57Ynl0ZXNSZWFkOmIsYnVmZmVyOmF9fSkodGhpcy5mZCxhLGIsZSxmKX07YS5wcm90b3R5cGUucmVhZEZpbGU9ZnVuY3Rpb24oYSl7cmV0dXJuIGQodGhpcy52b2wsInJlYWRGaWxlIikodGhpcy5mZCxhKX07YS5wcm90b3R5cGUuc3RhdD1mdW5jdGlvbihhKXtyZXR1cm4gZCh0aGlzLnZvbCwiZnN0YXQiKSh0aGlzLmZkLGEpfTthLnByb3RvdHlwZS5zeW5jPWZ1bmN0aW9uKCl7cmV0dXJuIGQodGhpcy52b2wsImZzeW5jIikodGhpcy5mZCl9O2EucHJvdG90eXBlLnRydW5jYXRlPWZ1bmN0aW9uKGEpe3JldHVybiBkKHRoaXMudm9sLCJmdHJ1bmNhdGUiKSh0aGlzLmZkLGEpfTthLnByb3RvdHlwZS51dGltZXM9CmZ1bmN0aW9uKGEsYil7cmV0dXJuIGQodGhpcy52b2wsImZ1dGltZXMiKSh0aGlzLmZkLGEsYil9O2EucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKGEsYixlLGYpe3JldHVybiBkKHRoaXMudm9sLCJ3cml0ZSIsZnVuY3Rpb24oYil7cmV0dXJue2J5dGVzV3JpdHRlbjpiLGJ1ZmZlcjphfX0pKHRoaXMuZmQsYSxiLGUsZil9O2EucHJvdG90eXBlLndyaXRlRmlsZT1mdW5jdGlvbihhLGIpe3JldHVybiBkKHRoaXMudm9sLCJ3cml0ZUZpbGUiKSh0aGlzLmZkLGEsYil9O3JldHVybiBhfSgpO2IuRmlsZUhhbmRsZT1mO2IuZGVmYXVsdD1mdW5jdGlvbihhKXtyZXR1cm4idW5kZWZpbmVkIj09PXR5cGVvZiBQcm9taXNlP251bGw6e0ZpbGVIYW5kbGU6ZixhY2Nlc3M6ZnVuY3Rpb24oYixlKXtyZXR1cm4gZChhLCJhY2Nlc3MiKShiLGUpfSxhcHBlbmRGaWxlOmZ1bmN0aW9uKGIsZSxnKXtyZXR1cm4gZChhLCJhcHBlbmRGaWxlIikoYiBpbnN0YW5jZW9mIGY/Yi5mZDpiLGUsZyl9LGNobW9kOmZ1bmN0aW9uKGIsCmUpe3JldHVybiBkKGEsImNobW9kIikoYixlKX0sY2hvd246ZnVuY3Rpb24oYixlLGYpe3JldHVybiBkKGEsImNob3duIikoYixlLGYpfSxjb3B5RmlsZTpmdW5jdGlvbihiLGUsZil7cmV0dXJuIGQoYSwiY29weUZpbGUiKShiLGUsZil9LGxjaG1vZDpmdW5jdGlvbihiLGUpe3JldHVybiBkKGEsImxjaG1vZCIpKGIsZSl9LGxjaG93bjpmdW5jdGlvbihiLGUsZil7cmV0dXJuIGQoYSwibGNob3duIikoYixlLGYpfSxsaW5rOmZ1bmN0aW9uKGIsZSl7cmV0dXJuIGQoYSwibGluayIpKGIsZSl9LGxzdGF0OmZ1bmN0aW9uKGIsZSl7cmV0dXJuIGQoYSwibHN0YXQiKShiLGUpfSxta2RpcjpmdW5jdGlvbihiLGUpe3JldHVybiBkKGEsIm1rZGlyIikoYixlKX0sbWtkdGVtcDpmdW5jdGlvbihiLGUpe3JldHVybiBkKGEsIm1rZHRlbXAiKShiLGUpfSxvcGVuOmZ1bmN0aW9uKGIsZSxnKXtyZXR1cm4gZChhLCJvcGVuIixmdW5jdGlvbihiKXtyZXR1cm4gbmV3IGYoYSxiKX0pKGIsZSxnKX0scmVhZGRpcjpmdW5jdGlvbihiLAplKXtyZXR1cm4gZChhLCJyZWFkZGlyIikoYixlKX0scmVhZEZpbGU6ZnVuY3Rpb24oYixlKXtyZXR1cm4gZChhLCJyZWFkRmlsZSIpKGIgaW5zdGFuY2VvZiBmP2IuZmQ6YixlKX0scmVhZGxpbms6ZnVuY3Rpb24oYixlKXtyZXR1cm4gZChhLCJyZWFkbGluayIpKGIsZSl9LHJlYWxwYXRoOmZ1bmN0aW9uKGIsZSl7cmV0dXJuIGQoYSwicmVhbHBhdGgiKShiLGUpfSxyZW5hbWU6ZnVuY3Rpb24oYixlKXtyZXR1cm4gZChhLCJyZW5hbWUiKShiLGUpfSxybWRpcjpmdW5jdGlvbihiKXtyZXR1cm4gZChhLCJybWRpciIpKGIpfSxzdGF0OmZ1bmN0aW9uKGIsZSl7cmV0dXJuIGQoYSwic3RhdCIpKGIsZSl9LHN5bWxpbms6ZnVuY3Rpb24oYixlLGYpe3JldHVybiBkKGEsInN5bWxpbmsiKShiLGUsZil9LHRydW5jYXRlOmZ1bmN0aW9uKGIsZSl7cmV0dXJuIGQoYSwidHJ1bmNhdGUiKShiLGUpfSx1bmxpbms6ZnVuY3Rpb24oYil7cmV0dXJuIGQoYSwidW5saW5rIikoYil9LHV0aW1lczpmdW5jdGlvbihiLAplLGYpe3JldHVybiBkKGEsInV0aW1lcyIpKGIsZSxmKX0sd3JpdGVGaWxlOmZ1bmN0aW9uKGIsZSxnKXtyZXR1cm4gZChhLCJ3cml0ZUZpbGUiKShiIGluc3RhbmNlb2YgZj9iLmZkOmIsZSxnKX19fX0pO1Eob2YpO3ZhciB3Zz0vW15ceDIwLVx4N0VdLyx1Zz0vW1x4MkVcdTMwMDJcdUZGMEVcdUZGNjFdL2csRGU9e292ZXJmbG93OiJPdmVyZmxvdzogaW5wdXQgbmVlZHMgd2lkZXIgaW50ZWdlcnMgdG8gcHJvY2VzcyIsIm5vdC1iYXNpYyI6IklsbGVnYWwgaW5wdXQgPj0gMHg4MCAobm90IGEgYmFzaWMgY29kZSBwb2ludCkiLCJpbnZhbGlkLWlucHV0IjoiSW52YWxpZCBpbnB1dCJ9LFphPU1hdGguZmxvb3IsTWM9U3RyaW5nLmZyb21DaGFyQ29kZSxGZT1BcnJheS5pc0FycmF5fHxmdW5jdGlvbihhKXtyZXR1cm4iW29iamVjdCBBcnJheV0iPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGEpfSx5Zz1PYmplY3Qua2V5c3x8ZnVuY3Rpb24oYSl7dmFyIGI9W10sZDtmb3IoZCBpbiBhKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChhLApkKSYmYi5wdXNoKGQpO3JldHVybiBifSxaZz17cGFyc2U6UmIscmVzb2x2ZTpmdW5jdGlvbihhLGIpe3JldHVybiBSYihhLCExLCEwKS5yZXNvbHZlKGIpfSxyZXNvbHZlT2JqZWN0OmZ1bmN0aW9uKGEsYil7cmV0dXJuIGE/UmIoYSwhMSwhMCkucmVzb2x2ZU9iamVjdChiKTpifSxmb3JtYXQ6ZnVuY3Rpb24oYSl7SmEoYSkmJihhPUhlKHt9LGEpKTtyZXR1cm4gUGMoYSl9LFVybDpkYX0sQWc9L14oW2EtejAtOS4rLV0rOikvaSxFZz0vOlswLTldKiQvLHpnPS9eKFwvXC8/KD8hXC8pW15cP1xzXSopKFw/W15cc10qKT8kLywkZz0ie318XFxeYCIuc3BsaXQoIiIpLmNvbmNhdCgnPD4iYCBcclxuXHQnLnNwbGl0KCIiKSksT2M9WyInIl0uY29uY2F0KCRnKSxKZT1bIiUiLCIvIiwiPyIsIjsiLCIjIl0uY29uY2F0KE9jKSxJZT1bIi8iLCI/IiwiIyJdLENnPTI1NSxMZT0vXlsrYS16MC05QS1aXy1dezAsNjN9JC8sQmc9L14oWythLXowLTlBLVpfLV17MCw2M30pKC4qKSQvLERnPXtqYXZhc2NyaXB0OiEwLAoiamF2YXNjcmlwdDoiOiEwfSxOYz17amF2YXNjcmlwdDohMCwiamF2YXNjcmlwdDoiOiEwfSwkYT17aHR0cDohMCxodHRwczohMCxmdHA6ITAsZ29waGVyOiEwLGZpbGU6ITAsImh0dHA6IjohMCwiaHR0cHM6IjohMCwiZnRwOiI6ITAsImdvcGhlcjoiOiEwLCJmaWxlOiI6ITB9O2RhLnByb3RvdHlwZS5wYXJzZT1mdW5jdGlvbihhLGIsZCl7cmV0dXJuIEhlKHRoaXMsYSxiLGQpfTtkYS5wcm90b3R5cGUuZm9ybWF0PWZ1bmN0aW9uKCl7cmV0dXJuIFBjKHRoaXMpfTtkYS5wcm90b3R5cGUucmVzb2x2ZT1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5yZXNvbHZlT2JqZWN0KFJiKGEsITEsITApKS5mb3JtYXQoKX07ZGEucHJvdG90eXBlLnJlc29sdmVPYmplY3Q9ZnVuY3Rpb24oYSl7aWYoSmEoYSkpe3ZhciBiPW5ldyBkYTtiLnBhcnNlKGEsITEsITApO2E9Yn1iPW5ldyBkYTtmb3IodmFyIGQ9T2JqZWN0LmtleXModGhpcyksZT0wO2U8ZC5sZW5ndGg7ZSsrKXt2YXIgZj1kW2VdO2JbZl09CnRoaXNbZl19Yi5oYXNoPWEuaGFzaDtpZigiIj09PWEuaHJlZilyZXR1cm4gYi5ocmVmPWIuZm9ybWF0KCksYjtpZihhLnNsYXNoZXMmJiFhLnByb3RvY29sKXtkPU9iamVjdC5rZXlzKGEpO2ZvcihlPTA7ZTxkLmxlbmd0aDtlKyspZj1kW2VdLCJwcm90b2NvbCIhPT1mJiYoYltmXT1hW2ZdKTskYVtiLnByb3RvY29sXSYmYi5ob3N0bmFtZSYmIWIucGF0aG5hbWUmJihiLnBhdGg9Yi5wYXRobmFtZT0iLyIpO2IuaHJlZj1iLmZvcm1hdCgpO3JldHVybiBifXZhciBnO2lmKGEucHJvdG9jb2wmJmEucHJvdG9jb2whPT1iLnByb3RvY29sKXtpZighJGFbYS5wcm90b2NvbF0pe2Q9T2JqZWN0LmtleXMoYSk7Zm9yKGU9MDtlPGQubGVuZ3RoO2UrKylmPWRbZV0sYltmXT1hW2ZdO2IuaHJlZj1iLmZvcm1hdCgpO3JldHVybiBifWIucHJvdG9jb2w9YS5wcm90b2NvbDtpZihhLmhvc3R8fE5jW2EucHJvdG9jb2xdKWIucGF0aG5hbWU9YS5wYXRobmFtZTtlbHNle2ZvcihnPShhLnBhdGhuYW1lfHwKIiIpLnNwbGl0KCIvIik7Zy5sZW5ndGgmJiEoYS5ob3N0PWcuc2hpZnQoKSk7KTthLmhvc3R8fChhLmhvc3Q9IiIpO2EuaG9zdG5hbWV8fChhLmhvc3RuYW1lPSIiKTsiIiE9PWdbMF0mJmcudW5zaGlmdCgiIik7Mj5nLmxlbmd0aCYmZy51bnNoaWZ0KCIiKTtiLnBhdGhuYW1lPWcuam9pbigiLyIpfWIuc2VhcmNoPWEuc2VhcmNoO2IucXVlcnk9YS5xdWVyeTtiLmhvc3Q9YS5ob3N0fHwiIjtiLmF1dGg9YS5hdXRoO2IuaG9zdG5hbWU9YS5ob3N0bmFtZXx8YS5ob3N0O2IucG9ydD1hLnBvcnQ7aWYoYi5wYXRobmFtZXx8Yi5zZWFyY2gpYi5wYXRoPShiLnBhdGhuYW1lfHwiIikrKGIuc2VhcmNofHwiIik7Yi5zbGFzaGVzPWIuc2xhc2hlc3x8YS5zbGFzaGVzO2IuaHJlZj1iLmZvcm1hdCgpO3JldHVybiBifWQ9Yi5wYXRobmFtZSYmIi8iPT09Yi5wYXRobmFtZS5jaGFyQXQoMCk7dmFyIGg9YS5ob3N0fHxhLnBhdGhuYW1lJiYiLyI9PT1hLnBhdGhuYW1lLmNoYXJBdCgwKSxrPWQ9aHx8CmR8fGIuaG9zdCYmYS5wYXRobmFtZTtlPWIucGF0aG5hbWUmJmIucGF0aG5hbWUuc3BsaXQoIi8iKXx8W107Zj1iLnByb3RvY29sJiYhJGFbYi5wcm90b2NvbF07Zz1hLnBhdGhuYW1lJiZhLnBhdGhuYW1lLnNwbGl0KCIvIil8fFtdO2YmJihiLmhvc3RuYW1lPSIiLGIucG9ydD1udWxsLGIuaG9zdCYmKCIiPT09ZVswXT9lWzBdPWIuaG9zdDplLnVuc2hpZnQoYi5ob3N0KSksYi5ob3N0PSIiLGEucHJvdG9jb2wmJihhLmhvc3RuYW1lPW51bGwsYS5wb3J0PW51bGwsYS5ob3N0JiYoIiI9PT1nWzBdP2dbMF09YS5ob3N0OmcudW5zaGlmdChhLmhvc3QpKSxhLmhvc3Q9bnVsbCksZD1kJiYoIiI9PT1nWzBdfHwiIj09PWVbMF0pKTtpZihoKWIuaG9zdD1hLmhvc3R8fCIiPT09YS5ob3N0P2EuaG9zdDpiLmhvc3QsYi5ob3N0bmFtZT1hLmhvc3RuYW1lfHwiIj09PWEuaG9zdG5hbWU/YS5ob3N0bmFtZTpiLmhvc3RuYW1lLGIuc2VhcmNoPWEuc2VhcmNoLGIucXVlcnk9YS5xdWVyeSxlPWc7ZWxzZSBpZihnLmxlbmd0aCllfHwKKGU9W10pLGUucG9wKCksZT1lLmNvbmNhdChnKSxiLnNlYXJjaD1hLnNlYXJjaCxiLnF1ZXJ5PWEucXVlcnk7ZWxzZSBpZihudWxsIT1hLnNlYXJjaCl7ZiYmKGIuaG9zdG5hbWU9Yi5ob3N0PWUuc2hpZnQoKSxmPWIuaG9zdCYmMDxiLmhvc3QuaW5kZXhPZigiQCIpP2IuaG9zdC5zcGxpdCgiQCIpOiExKSYmKGIuYXV0aD1mLnNoaWZ0KCksYi5ob3N0PWIuaG9zdG5hbWU9Zi5zaGlmdCgpKTtiLnNlYXJjaD1hLnNlYXJjaDtiLnF1ZXJ5PWEucXVlcnk7aWYobnVsbCE9PWIucGF0aG5hbWV8fG51bGwhPT1iLnNlYXJjaCliLnBhdGg9KGIucGF0aG5hbWU/Yi5wYXRobmFtZToiIikrKGIuc2VhcmNoP2Iuc2VhcmNoOiIiKTtiLmhyZWY9Yi5mb3JtYXQoKTtyZXR1cm4gYn1pZighZS5sZW5ndGgpcmV0dXJuIGIucGF0aG5hbWU9bnVsbCxiLnBhdGg9Yi5zZWFyY2g/Ii8iK2Iuc2VhcmNoOm51bGwsYi5ocmVmPWIuZm9ybWF0KCksYjtoPWUuc2xpY2UoLTEpWzBdO2c9KGIuaG9zdHx8YS5ob3N0fHwKMTxlLmxlbmd0aCkmJigiLiI9PT1ofHwiLi4iPT09aCl8fCIiPT09aDtmb3IodmFyIGw9MCxxPWUubGVuZ3RoOzA8PXE7cS0tKWg9ZVtxXSwiLiI9PT1oP2Uuc3BsaWNlKHEsMSk6Ii4uIj09PWg/KGUuc3BsaWNlKHEsMSksbCsrKTpsJiYoZS5zcGxpY2UocSwxKSxsLS0pO2lmKCFkJiYhaylmb3IoO2wtLTtsKWUudW5zaGlmdCgiLi4iKTshZHx8IiI9PT1lWzBdfHxlWzBdJiYiLyI9PT1lWzBdLmNoYXJBdCgwKXx8ZS51bnNoaWZ0KCIiKTtnJiYiLyIhPT1lLmpvaW4oIi8iKS5zdWJzdHIoLTEpJiZlLnB1c2goIiIpO2s9IiI9PT1lWzBdfHxlWzBdJiYiLyI9PT1lWzBdLmNoYXJBdCgwKTtmJiYoYi5ob3N0bmFtZT1iLmhvc3Q9az8iIjplLmxlbmd0aD9lLnNoaWZ0KCk6IiIsZj1iLmhvc3QmJjA8Yi5ob3N0LmluZGV4T2YoIkAiKT9iLmhvc3Quc3BsaXQoIkAiKTohMSkmJihiLmF1dGg9Zi5zaGlmdCgpLGIuaG9zdD1iLmhvc3RuYW1lPWYuc2hpZnQoKSk7KGR8fGIuaG9zdCYmZS5sZW5ndGgpJiYKIWsmJmUudW5zaGlmdCgiIik7ZS5sZW5ndGg/Yi5wYXRobmFtZT1lLmpvaW4oIi8iKTooYi5wYXRobmFtZT1udWxsLGIucGF0aD1udWxsKTtpZihudWxsIT09Yi5wYXRobmFtZXx8bnVsbCE9PWIuc2VhcmNoKWIucGF0aD0oYi5wYXRobmFtZT9iLnBhdGhuYW1lOiIiKSsoYi5zZWFyY2g/Yi5zZWFyY2g6IiIpO2IuYXV0aD1hLmF1dGh8fGIuYXV0aDtiLnNsYXNoZXM9Yi5zbGFzaGVzfHxhLnNsYXNoZXM7Yi5ocmVmPWIuZm9ybWF0KCk7cmV0dXJuIGJ9O2RhLnByb3RvdHlwZS5wYXJzZUhvc3Q9ZnVuY3Rpb24oKXtyZXR1cm4gS2UodGhpcyl9O3ZhciBwZj1LKGZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gZChhLGIpe2E9YVtiXTtyZXR1cm4gMDxiJiYoIi8iPT09YXx8ZiYmIlxcIj09PWEpfWZ1bmN0aW9uIGUoYSl7dmFyIGI9MTxhcmd1bWVudHMubGVuZ3RoJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOiEwO2lmKGYpe3ZhciBlPWE7aWYoInN0cmluZyIhPT10eXBlb2YgZSl0aHJvdyBuZXcgVHlwZUVycm9yKCJleHBlY3RlZCBhIHN0cmluZyIpOwplPWUucmVwbGFjZSgvW1xcXC9dKy9nLCIvIik7aWYoITEhPT1iKWlmKGI9ZSxlPWIubGVuZ3RoLTEsMj5lKWU9YjtlbHNle2Zvcig7ZChiLGUpOyllLS07ZT1iLnN1YnN0cigwLGUrMSl9cmV0dXJuIGUucmVwbGFjZSgvXihbYS16QS1aXSs6fFwuXC8pLywiIil9cmV0dXJuIGF9T2JqZWN0LmRlZmluZVByb3BlcnR5KGIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO2IudW5peGlmeT1lO2IuY29ycmVjdFBhdGg9ZnVuY3Rpb24oYSl7cmV0dXJuIGUoYS5yZXBsYWNlKC9eXFxcXFw/XFwuOlxcLywiXFwiKSl9O3ZhciBmPSJ3aW4zMiI9PT1WYS5wbGF0Zm9ybX0pO1EocGYpO3ZhciBRYT1LKGZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gZChhLGIpe3ZvaWQgMD09PWImJihiPVkuZGVmYXVsdC5jd2QoKSk7cmV0dXJuIGFoKGIsYSl9ZnVuY3Rpb24gZShhLGIpe3JldHVybiJmdW5jdGlvbiI9PT10eXBlb2YgYT9bZigpLGFdOltmKGEpLHIoYildfWZ1bmN0aW9uIGYoYSl7dm9pZCAwPT09YSYmKGE9Cnt9KTtyZXR1cm4geGEoe30sdWEsYSl9ZnVuY3Rpb24gZyhhKXtyZXR1cm4ibnVtYmVyIj09PXR5cGVvZiBhP3hhKHt9LGthLHttb2RlOmF9KTp4YSh7fSxrYSxhKX1mdW5jdGlvbiBoKGEsYixkLGUpe3ZvaWQgMD09PWImJihiPSIiKTt2b2lkIDA9PT1kJiYoZD0iIik7dm9pZCAwPT09ZSYmKGU9IiIpO3ZhciB2PSIiO2QmJih2PSIgJyIrZCsiJyIpO2UmJih2Kz0iIC0+ICciK2UrIiciKTtzd2l0Y2goYSl7Y2FzZSAiRU5PRU5UIjpyZXR1cm4iRU5PRU5UOiBubyBzdWNoIGZpbGUgb3IgZGlyZWN0b3J5LCAiK2IrdjtjYXNlICJFQkFERiI6cmV0dXJuIkVCQURGOiBiYWQgZmlsZSBkZXNjcmlwdG9yLCAiK2IrdjtjYXNlICJFSU5WQUwiOnJldHVybiJFSU5WQUw6IGludmFsaWQgYXJndW1lbnQsICIrYit2O2Nhc2UgIkVQRVJNIjpyZXR1cm4iRVBFUk06IG9wZXJhdGlvbiBub3QgcGVybWl0dGVkLCAiK2IrdjtjYXNlICJFUFJPVE8iOnJldHVybiJFUFJPVE86IHByb3RvY29sIGVycm9yLCAiKwpiK3Y7Y2FzZSAiRUVYSVNUIjpyZXR1cm4iRUVYSVNUOiBmaWxlIGFscmVhZHkgZXhpc3RzLCAiK2IrdjtjYXNlICJFTk9URElSIjpyZXR1cm4iRU5PVERJUjogbm90IGEgZGlyZWN0b3J5LCAiK2IrdjtjYXNlICJFSVNESVIiOnJldHVybiJFSVNESVI6IGlsbGVnYWwgb3BlcmF0aW9uIG9uIGEgZGlyZWN0b3J5LCAiK2IrdjtjYXNlICJFQUNDRVMiOnJldHVybiJFQUNDRVM6IHBlcm1pc3Npb24gZGVuaWVkLCAiK2IrdjtjYXNlICJFTk9URU1QVFkiOnJldHVybiJFTk9URU1QVFk6IGRpcmVjdG9yeSBub3QgZW1wdHksICIrYit2O2Nhc2UgIkVNRklMRSI6cmV0dXJuIkVNRklMRTogdG9vIG1hbnkgb3BlbiBmaWxlcywgIitiK3Y7Y2FzZSAiRU5PU1lTIjpyZXR1cm4iRU5PU1lTOiBmdW5jdGlvbiBub3QgaW1wbGVtZW50ZWQsICIrYit2O2RlZmF1bHQ6cmV0dXJuIGErIjogZXJyb3Igb2NjdXJyZWQsICIrYit2fX1mdW5jdGlvbiBrKGEsYixkLGUsZil7dm9pZCAwPT09YiYmKGI9IiIpO3ZvaWQgMD09PQpkJiYoZD0iIik7dm9pZCAwPT09ZSYmKGU9IiIpO3ZvaWQgMD09PWYmJihmPUVycm9yKTtiPW5ldyBmKGgoYSxiLGQsZSkpO2IuY29kZT1hO3JldHVybiBifWZ1bmN0aW9uIGwoYSl7aWYoIm51bWJlciI9PT10eXBlb2YgYSlyZXR1cm4gYTtpZigic3RyaW5nIj09PXR5cGVvZiBhKXt2YXIgYj1SW2FdO2lmKCJ1bmRlZmluZWQiIT09dHlwZW9mIGIpcmV0dXJuIGJ9dGhyb3cgbmV3IHhiLlR5cGVFcnJvcigiRVJSX0lOVkFMSURfT1BUX1ZBTFVFIiwiZmxhZ3MiLGEpO31mdW5jdGlvbiBxKGEsYil7aWYoYil7dmFyIGQ9dHlwZW9mIGI7c3dpdGNoKGQpe2Nhc2UgInN0cmluZyI6YT14YSh7fSxhLHtlbmNvZGluZzpifSk7YnJlYWs7Y2FzZSAib2JqZWN0IjphPXhhKHt9LGEsYik7YnJlYWs7ZGVmYXVsdDp0aHJvdyBUeXBlRXJyb3IoIkV4cGVjdGVkIG9wdGlvbnMgdG8gYmUgZWl0aGVyIGFuIG9iamVjdCBvciBhIHN0cmluZywgYnV0IGdvdCAiK2QrIiBpbnN0ZWFkIik7fX1lbHNlIHJldHVybiBhOwoiYnVmZmVyIiE9PWEuZW5jb2RpbmcmJm9hLmFzc2VydEVuY29kaW5nKGEuZW5jb2RpbmcpO3JldHVybiBhfWZ1bmN0aW9uIG0oYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3JldHVybiBxKGEsYil9fWZ1bmN0aW9uIHIoYSl7aWYoImZ1bmN0aW9uIiE9PXR5cGVvZiBhKXRocm93IFR5cGVFcnJvcihNLkNCKTtyZXR1cm4gYX1mdW5jdGlvbiBQKGEpe3JldHVybiBmdW5jdGlvbihiLGQpe3JldHVybiJmdW5jdGlvbiI9PT10eXBlb2YgYj9bYSgpLGJdOlthKGIpLHIoZCldfX1mdW5jdGlvbiBwKGEpe2lmKCJzdHJpbmciIT09dHlwZW9mIGEmJiFKLkJ1ZmZlci5pc0J1ZmZlcihhKSl7dHJ5e2lmKCEoYSBpbnN0YW5jZW9mIFpnLlVSTCkpdGhyb3cgbmV3IFR5cGVFcnJvcihNLlBBVEhfU1RSKTt9Y2F0Y2goY2Qpe3Rocm93IG5ldyBUeXBlRXJyb3IoTS5QQVRIX1NUUik7fWlmKCIiIT09YS5ob3N0bmFtZSl0aHJvdyBuZXcgeGIuVHlwZUVycm9yKCJFUlJfSU5WQUxJRF9GSUxFX1VSTF9IT1NUIiwKWS5kZWZhdWx0LnBsYXRmb3JtKTthPWEucGF0aG5hbWU7Zm9yKHZhciBiPTA7YjxhLmxlbmd0aDtiKyspaWYoIiUiPT09YVtiXSl7dmFyIGQ9YS5jb2RlUG9pbnRBdChiKzIpfDMyO2lmKCIyIj09PWFbYisxXSYmMTAyPT09ZCl0aHJvdyBuZXcgeGIuVHlwZUVycm9yKCJFUlJfSU5WQUxJRF9GSUxFX1VSTF9QQVRIIiwibXVzdCBub3QgaW5jbHVkZSBlbmNvZGVkIC8gY2hhcmFjdGVycyIpO31hPWRlY29kZVVSSUNvbXBvbmVudChhKX1hPVN0cmluZyhhKTtFKGEpO3JldHVybiBhfWZ1bmN0aW9uIG4oYSxiKXtyZXR1cm4oYT1kKGEsYikuc3Vic3RyKDEpKT9hLnNwbGl0KEgpOltdfWZ1bmN0aW9uIEIoYSl7cmV0dXJuIG4ocChhKSl9ZnVuY3Rpb24geihhLGIpe3ZvaWQgMD09PWImJihiPW9hLkVOQ09ESU5HX1VURjgpO3JldHVybiBKLkJ1ZmZlci5pc0J1ZmZlcihhKT9hOmEgaW5zdGFuY2VvZiBVaW50OEFycmF5P0ouYnVmZmVyRnJvbShhKTpKLmJ1ZmZlckZyb20oU3RyaW5nKGEpLGIpfQpmdW5jdGlvbiBDKGEsYil7cmV0dXJuIGImJiJidWZmZXIiIT09Yj9hLnRvU3RyaW5nKGIpOmF9ZnVuY3Rpb24gRShhLGIpe2lmKC0xIT09KCIiK2EpLmluZGV4T2YoIlx4MDAiKSl7YT1FcnJvcigiUGF0aCBtdXN0IGJlIGEgc3RyaW5nIHdpdGhvdXQgbnVsbCBieXRlcyIpO2EuY29kZT0iRU5PRU5UIjtpZigiZnVuY3Rpb24iIT09dHlwZW9mIGIpdGhyb3cgYTtZLmRlZmF1bHQubmV4dFRpY2soYixhKTtyZXR1cm4hMX1yZXR1cm4hMH1mdW5jdGlvbiB5KGEsYil7YT0ibnVtYmVyIj09PXR5cGVvZiBhP2E6InN0cmluZyI9PT10eXBlb2YgYT9wYXJzZUludChhLDgpOmI/eShiKTp2b2lkIDA7aWYoIm51bWJlciIhPT10eXBlb2YgYXx8aXNOYU4oYSkpdGhyb3cgbmV3IFR5cGVFcnJvcihNLk1PREVfSU5UKTtyZXR1cm4gYX1mdW5jdGlvbiBHKGEpe2lmKGE+Pj4wIT09YSl0aHJvdyBUeXBlRXJyb3IoTS5GRCk7fWZ1bmN0aW9uIEQoYSl7aWYoInN0cmluZyI9PT10eXBlb2YgYSYmK2E9PWEpcmV0dXJuK2E7CmlmKGEgaW5zdGFuY2VvZiBEYXRlKXJldHVybiBhLmdldFRpbWUoKS8xRTM7aWYoaXNGaW5pdGUoYSkpcmV0dXJuIDA+YT9EYXRlLm5vdygpLzFFMzphO3Rocm93IEVycm9yKCJDYW5ub3QgcGFyc2UgdGltZTogIithKTt9ZnVuY3Rpb24gdyhhKXtpZigibnVtYmVyIiE9PXR5cGVvZiBhKXRocm93IFR5cGVFcnJvcihNLlVJRCk7fWZ1bmN0aW9uIEYoYSl7aWYoIm51bWJlciIhPT10eXBlb2YgYSl0aHJvdyBUeXBlRXJyb3IoTS5HSUQpO31mdW5jdGlvbiBiYyhhKXthLmVtaXQoInN0b3AiKX1mdW5jdGlvbiB0YShhLGIsZCl7aWYoISh0aGlzIGluc3RhbmNlb2YgdGEpKXJldHVybiBuZXcgdGEoYSxiLGQpO3RoaXMuX3ZvbD1hO2Q9eGEoe30scShkLHt9KSk7dm9pZCAwPT09ZC5oaWdoV2F0ZXJNYXJrJiYoZC5oaWdoV2F0ZXJNYXJrPTY1NTM2KTtjYS5SZWFkYWJsZS5jYWxsKHRoaXMsZCk7dGhpcy5wYXRoPXAoYik7dGhpcy5mZD12b2lkIDA9PT1kLmZkP251bGw6ZC5mZDt0aGlzLmZsYWdzPQp2b2lkIDA9PT1kLmZsYWdzPyJyIjpkLmZsYWdzO3RoaXMubW9kZT12b2lkIDA9PT1kLm1vZGU/NDM4OmQubW9kZTt0aGlzLnN0YXJ0PWQuc3RhcnQ7dGhpcy5lbmQ9ZC5lbmQ7dGhpcy5hdXRvQ2xvc2U9dm9pZCAwPT09ZC5hdXRvQ2xvc2U/ITA6ZC5hdXRvQ2xvc2U7dGhpcy5wb3M9dm9pZCAwO3RoaXMuYnl0ZXNSZWFkPTA7aWYodm9pZCAwIT09dGhpcy5zdGFydCl7aWYoIm51bWJlciIhPT10eXBlb2YgdGhpcy5zdGFydCl0aHJvdyBuZXcgVHlwZUVycm9yKCcic3RhcnQiIG9wdGlvbiBtdXN0IGJlIGEgTnVtYmVyJyk7aWYodm9pZCAwPT09dGhpcy5lbmQpdGhpcy5lbmQ9SW5maW5pdHk7ZWxzZSBpZigibnVtYmVyIiE9PXR5cGVvZiB0aGlzLmVuZCl0aHJvdyBuZXcgVHlwZUVycm9yKCciZW5kIiBvcHRpb24gbXVzdCBiZSBhIE51bWJlcicpO2lmKHRoaXMuc3RhcnQ+dGhpcy5lbmQpdGhyb3cgRXJyb3IoJyJzdGFydCIgb3B0aW9uIG11c3QgYmUgPD0gImVuZCIgb3B0aW9uJyk7dGhpcy5wb3M9CnRoaXMuc3RhcnR9Im51bWJlciIhPT10eXBlb2YgdGhpcy5mZCYmdGhpcy5vcGVuKCk7dGhpcy5vbigiZW5kIixmdW5jdGlvbigpe3RoaXMuYXV0b0Nsb3NlJiZ0aGlzLmRlc3Ryb3kmJnRoaXMuZGVzdHJveSgpfSl9ZnVuY3Rpb24gYmgoKXt0aGlzLmNsb3NlKCl9ZnVuY3Rpb24gWihhLGIsZCl7aWYoISh0aGlzIGluc3RhbmNlb2YgWikpcmV0dXJuIG5ldyBaKGEsYixkKTt0aGlzLl92b2w9YTtkPXhhKHt9LHEoZCx7fSkpO2NhLldyaXRhYmxlLmNhbGwodGhpcyxkKTt0aGlzLnBhdGg9cChiKTt0aGlzLmZkPXZvaWQgMD09PWQuZmQ/bnVsbDpkLmZkO3RoaXMuZmxhZ3M9dm9pZCAwPT09ZC5mbGFncz8idyI6ZC5mbGFnczt0aGlzLm1vZGU9dm9pZCAwPT09ZC5tb2RlPzQzODpkLm1vZGU7dGhpcy5zdGFydD1kLnN0YXJ0O3RoaXMuYXV0b0Nsb3NlPXZvaWQgMD09PWQuYXV0b0Nsb3NlPyEwOiEhZC5hdXRvQ2xvc2U7dGhpcy5wb3M9dm9pZCAwO3RoaXMuYnl0ZXNXcml0dGVuPTA7aWYodm9pZCAwIT09CnRoaXMuc3RhcnQpe2lmKCJudW1iZXIiIT09dHlwZW9mIHRoaXMuc3RhcnQpdGhyb3cgbmV3IFR5cGVFcnJvcignInN0YXJ0IiBvcHRpb24gbXVzdCBiZSBhIE51bWJlcicpO2lmKDA+dGhpcy5zdGFydCl0aHJvdyBFcnJvcignInN0YXJ0IiBtdXN0IGJlID49IHplcm8nKTt0aGlzLnBvcz10aGlzLnN0YXJ0fWQuZW5jb2RpbmcmJnRoaXMuc2V0RGVmYXVsdEVuY29kaW5nKGQuZW5jb2RpbmcpOyJudW1iZXIiIT09dHlwZW9mIHRoaXMuZmQmJnRoaXMub3BlbigpO3RoaXMub25jZSgiZmluaXNoIixmdW5jdGlvbigpe3RoaXMuYXV0b0Nsb3NlJiZ0aGlzLmNsb3NlKCl9KX12YXIgaGI9TiYmTi5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShiLGQpe2E9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGEsYil7YS5fX3Byb3RvX189Yn18fGZ1bmN0aW9uKGEsYil7Zm9yKHZhciBkIGluIGIpYi5oYXNPd25Qcm9wZXJ0eShkKSYmCihhW2RdPWJbZF0pfTtyZXR1cm4gYShiLGQpfXJldHVybiBmdW5jdGlvbihiLGQpe2Z1bmN0aW9uIGUoKXt0aGlzLmNvbnN0cnVjdG9yPWJ9YShiLGQpO2IucHJvdG90eXBlPW51bGw9PT1kP09iamVjdC5jcmVhdGUoZCk6KGUucHJvdG90eXBlPWQucHJvdG90eXBlLG5ldyBlKX19KCksZmQ9TiYmTi5fX3NwcmVhZEFycmF5c3x8ZnVuY3Rpb24oKXtmb3IodmFyIGE9MCxiPTAsZD1hcmd1bWVudHMubGVuZ3RoO2I8ZDtiKyspYSs9YXJndW1lbnRzW2JdLmxlbmd0aDthPUFycmF5KGEpO3ZhciBlPTA7Zm9yKGI9MDtiPGQ7YisrKWZvcih2YXIgZj1hcmd1bWVudHNbYl0saD0wLGc9Zi5sZW5ndGg7aDxnO2grKyxlKyspYVtlXT1mW2hdO3JldHVybiBhfTtPYmplY3QuZGVmaW5lUHJvcGVydHkoYiwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIHhhPVlnLGFoPUhjLGNjPXUuY29uc3RhbnRzLk9fUkRPTkxZLGliPXUuY29uc3RhbnRzLk9fV1JPTkxZLEFhPXUuY29uc3RhbnRzLk9fUkRXUiwKTz11LmNvbnN0YW50cy5PX0NSRUFULEk9dS5jb25zdGFudHMuT19FWENMLEs9dS5jb25zdGFudHMuT19UUlVOQyxMPXUuY29uc3RhbnRzLk9fQVBQRU5ELFE9dS5jb25zdGFudHMuT19TWU5DLFQ9dS5jb25zdGFudHMuT19ESVJFQ1RPUlksUz11LmNvbnN0YW50cy5GX09LLFY9dS5jb25zdGFudHMuQ09QWUZJTEVfRVhDTCxYPXUuY29uc3RhbnRzLkNPUFlGSUxFX0ZJQ0xPTkVfRk9SQ0UsSD0iLyIsVT0id2luMzIiPT09WS5kZWZhdWx0LnBsYXRmb3JtLE09e1BBVEhfU1RSOiJwYXRoIG11c3QgYmUgYSBzdHJpbmcgb3IgQnVmZmVyIixGRDoiZmQgbXVzdCBiZSBhIGZpbGUgZGVzY3JpcHRvciIsTU9ERV9JTlQ6Im1vZGUgbXVzdCBiZSBhbiBpbnQiLENCOiJjYWxsYmFjayBtdXN0IGJlIGEgZnVuY3Rpb24iLFVJRDoidWlkIG11c3QgYmUgYW4gdW5zaWduZWQgaW50IixHSUQ6ImdpZCBtdXN0IGJlIGFuIHVuc2lnbmVkIGludCIsTEVOOiJsZW4gbXVzdCBiZSBhbiBpbnRlZ2VyIixBVElNRToiYXRpbWUgbXVzdCBiZSBhbiBpbnRlZ2VyIiwKTVRJTUU6Im10aW1lIG11c3QgYmUgYW4gaW50ZWdlciIsUFJFRklYOiJmaWxlbmFtZSBwcmVmaXggaXMgcmVxdWlyZWQiLEJVRkZFUjoiYnVmZmVyIG11c3QgYmUgYW4gaW5zdGFuY2Ugb2YgQnVmZmVyIG9yIFN0YXRpY0J1ZmZlciIsT0ZGU0VUOiJvZmZzZXQgbXVzdCBiZSBhbiBpbnRlZ2VyIixMRU5HVEg6Imxlbmd0aCBtdXN0IGJlIGFuIGludGVnZXIiLFBPU0lUSU9OOiJwb3NpdGlvbiBtdXN0IGJlIGFuIGludGVnZXIifSxSOyhmdW5jdGlvbihhKXthW2Eucj1jY109InIiO2FbYVsicisiXT1BYV09InIrIjthW2EucnM9Y2N8UV09InJzIjthW2Euc3I9YS5yc109InNyIjthW2FbInJzKyJdPUFhfFFdPSJycysiO2FbYVsic3IrIl09YVsicnMrIl1dPSJzcisiO2FbYS53PWlifE98S109InciO2FbYS53eD1pYnxPfEt8SV09Ind4IjthW2EueHc9YS53eF09Inh3IjthW2FbIncrIl09QWF8T3xLXT0idysiO2FbYVsid3grIl09QWF8T3xLfEldPSJ3eCsiO2FbYVsieHcrIl09YVsid3grIl1dPQoieHcrIjthW2EuYT1pYnxMfE9dPSJhIjthW2EuYXg9aWJ8THxPfEldPSJheCI7YVthLnhhPWEuYXhdPSJ4YSI7YVthWyJhKyJdPUFhfEx8T109ImErIjthW2FbImF4KyJdPUFhfEx8T3xJXT0iYXgrIjthW2FbInhhKyJdPWFbImF4KyJdXT0ieGErIn0pKFI9Yi5GTEFHU3x8KGIuRkxBR1M9e30pKTtiLmZsYWdzVG9OdW1iZXI9bDthPXtlbmNvZGluZzoidXRmOCJ9O3ZhciBXPW0oYSksYWE9UChXKSxiYT1tKHtmbGFnOiJyIn0pLGRhPXtlbmNvZGluZzoidXRmOCIsbW9kZTo0MzgsZmxhZzpSW1Iud119LGVhPW0oZGEpLGZhPXtlbmNvZGluZzoidXRmOCIsbW9kZTo0MzgsZmxhZzpSW1IuYV19LGhhPW0oZmEpLG5hPVAoaGEpLGphPW0oYSkscGE9UChqYSksa2E9e21vZGU6NTExLHJlY3Vyc2l2ZTohMX0sbGE9e3JlY3Vyc2l2ZTohMX0sbWE9bSh7ZW5jb2Rpbmc6InV0ZjgiLHdpdGhGaWxlVHlwZXM6ITF9KSxzYT1QKG1hKSx1YT17YmlnaW50OiExfTtiLnBhdGhUb0ZpbGVuYW1lPXA7aWYoVSl7dmFyIHZhPQpkLHdhPXBmLnVuaXhpZnk7ZD1mdW5jdGlvbihhLGIpe3JldHVybiB3YSh2YShhLGIpKX19Yi5maWxlbmFtZVRvU3RlcHM9bjtiLnBhdGhUb1N0ZXBzPUI7Yi5kYXRhVG9TdHI9ZnVuY3Rpb24oYSxiKXt2b2lkIDA9PT1iJiYoYj1vYS5FTkNPRElOR19VVEY4KTtyZXR1cm4gSi5CdWZmZXIuaXNCdWZmZXIoYSk/YS50b1N0cmluZyhiKTphIGluc3RhbmNlb2YgVWludDhBcnJheT9KLmJ1ZmZlckZyb20oYSkudG9TdHJpbmcoYik6U3RyaW5nKGEpfTtiLmRhdGFUb0J1ZmZlcj16O2IuYnVmZmVyVG9FbmNvZGluZz1DO2IudG9Vbml4VGltZXN0YW1wPUQ7YT1mdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSl7dm9pZCAwPT09YSYmKGE9e30pO3RoaXMuaW5vPTA7dGhpcy5pbm9kZXM9e307dGhpcy5yZWxlYXNlZElub3M9W107dGhpcy5mZHM9e307dGhpcy5yZWxlYXNlZEZkcz1bXTt0aGlzLm1heEZpbGVzPTFFNDt0aGlzLm9wZW5GaWxlcz0wO3RoaXMucHJvbWlzZXNBcGk9b2YuZGVmYXVsdCh0aGlzKTsKdGhpcy5zdGF0V2F0Y2hlcnM9e307dGhpcy5wcm9wcz14YSh7Tm9kZTp5Yi5Ob2RlLExpbms6eWIuTGluayxGaWxlOnliLkZpbGV9LGEpO2E9dGhpcy5jcmVhdGVMaW5rKCk7YS5zZXROb2RlKHRoaXMuY3JlYXRlTm9kZSghMCkpO3ZhciBiPXRoaXM7dGhpcy5TdGF0V2F0Y2hlcj1mdW5jdGlvbihhKXtmdW5jdGlvbiBkKCl7cmV0dXJuIGEuY2FsbCh0aGlzLGIpfHx0aGlzfWhiKGQsYSk7cmV0dXJuIGR9KHFhKTt0aGlzLlJlYWRTdHJlYW09ZnVuY3Rpb24oYSl7ZnVuY3Rpb24gZCgpe2Zvcih2YXIgZD1bXSxlPTA7ZTxhcmd1bWVudHMubGVuZ3RoO2UrKylkW2VdPWFyZ3VtZW50c1tlXTtyZXR1cm4gYS5hcHBseSh0aGlzLGZkKFtiXSxkKSl8fHRoaXN9aGIoZCxhKTtyZXR1cm4gZH0odGEpO3RoaXMuV3JpdGVTdHJlYW09ZnVuY3Rpb24oYSl7ZnVuY3Rpb24gZCgpe2Zvcih2YXIgZD1bXSxlPTA7ZTxhcmd1bWVudHMubGVuZ3RoO2UrKylkW2VdPWFyZ3VtZW50c1tlXTtyZXR1cm4gYS5hcHBseSh0aGlzLApmZChbYl0sZCkpfHx0aGlzfWhiKGQsYSk7cmV0dXJuIGR9KFopO3RoaXMuRlNXYXRjaGVyPWZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGQoKXtyZXR1cm4gYS5jYWxsKHRoaXMsYil8fHRoaXN9aGIoZCxhKTtyZXR1cm4gZH0ocmEpO3RoaXMucm9vdD1hfWEuZnJvbUpTT049ZnVuY3Rpb24oYixkKXt2YXIgZT1uZXcgYTtlLmZyb21KU09OKGIsZCk7cmV0dXJuIGV9O09iamVjdC5kZWZpbmVQcm9wZXJ0eShhLnByb3RvdHlwZSwicHJvbWlzZXMiLHtnZXQ6ZnVuY3Rpb24oKXtpZihudWxsPT09dGhpcy5wcm9taXNlc0FwaSl0aHJvdyBFcnJvcigiUHJvbWlzZSBpcyBub3Qgc3VwcG9ydGVkIGluIHRoaXMgZW52aXJvbm1lbnQuIik7cmV0dXJuIHRoaXMucHJvbWlzZXNBcGl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSk7YS5wcm90b3R5cGUuY3JlYXRlTGluaz1mdW5jdGlvbihhLGIsZCxlKXt2b2lkIDA9PT1kJiYoZD0hMSk7aWYoIWEpcmV0dXJuIG5ldyB0aGlzLnByb3BzLkxpbmsodGhpcywKbnVsbCwiIik7aWYoIWIpdGhyb3cgRXJyb3IoImNyZWF0ZUxpbms6IG5hbWUgY2Fubm90IGJlIGVtcHR5Iik7cmV0dXJuIGEuY3JlYXRlQ2hpbGQoYix0aGlzLmNyZWF0ZU5vZGUoZCxlKSl9O2EucHJvdG90eXBlLmRlbGV0ZUxpbms9ZnVuY3Rpb24oYSl7dmFyIGI9YS5wYXJlbnQ7cmV0dXJuIGI/KGIuZGVsZXRlQ2hpbGQoYSksITApOiExfTthLnByb3RvdHlwZS5uZXdJbm9OdW1iZXI9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnJlbGVhc2VkSW5vcy5wb3AoKTtyZXR1cm4gYT9hOnRoaXMuaW5vPSh0aGlzLmlubysxKSU0Mjk0OTY3Mjk1fTthLnByb3RvdHlwZS5uZXdGZE51bWJlcj1mdW5jdGlvbigpe3ZhciBiPXRoaXMucmVsZWFzZWRGZHMucG9wKCk7cmV0dXJuIm51bWJlciI9PT10eXBlb2YgYj9iOmEuZmQtLX07YS5wcm90b3R5cGUuY3JlYXRlTm9kZT1mdW5jdGlvbihhLGIpe3ZvaWQgMD09PWEmJihhPSExKTtiPW5ldyB0aGlzLnByb3BzLk5vZGUodGhpcy5uZXdJbm9OdW1iZXIoKSwKYik7YSYmYi5zZXRJc0RpcmVjdG9yeSgpO3JldHVybiB0aGlzLmlub2Rlc1tiLmlub109Yn07YS5wcm90b3R5cGUuZ2V0Tm9kZT1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5pbm9kZXNbYV19O2EucHJvdG90eXBlLmRlbGV0ZU5vZGU9ZnVuY3Rpb24oYSl7YS5kZWwoKTtkZWxldGUgdGhpcy5pbm9kZXNbYS5pbm9dO3RoaXMucmVsZWFzZWRJbm9zLnB1c2goYS5pbm8pfTthLnByb3RvdHlwZS5nZW5SbmRTdHI9ZnVuY3Rpb24oKXt2YXIgYT0oTWF0aC5yYW5kb20oKSsxKS50b1N0cmluZygzNikuc3Vic3RyKDIsNik7cmV0dXJuIDY9PT1hLmxlbmd0aD9hOnRoaXMuZ2VuUm5kU3RyKCl9O2EucHJvdG90eXBlLmdldExpbms9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucm9vdC53YWxrKGEpfTthLnByb3RvdHlwZS5nZXRMaW5rT3JUaHJvdz1mdW5jdGlvbihhLGIpe3ZhciBkPW4oYSk7ZD10aGlzLmdldExpbmsoZCk7aWYoIWQpdGhyb3cgaygiRU5PRU5UIixiLGEpO3JldHVybiBkfTthLnByb3RvdHlwZS5nZXRSZXNvbHZlZExpbms9CmZ1bmN0aW9uKGEpe2E9InN0cmluZyI9PT10eXBlb2YgYT9uKGEpOmE7Zm9yKHZhciBiPXRoaXMucm9vdCxkPTA7ZDxhLmxlbmd0aDspe2I9Yi5nZXRDaGlsZChhW2RdKTtpZighYilyZXR1cm4gbnVsbDt2YXIgZT1iLmdldE5vZGUoKTtlLmlzU3ltbGluaygpPyhhPWUuc3ltbGluay5jb25jYXQoYS5zbGljZShkKzEpKSxiPXRoaXMucm9vdCxkPTApOmQrK31yZXR1cm4gYn07YS5wcm90b3R5cGUuZ2V0UmVzb2x2ZWRMaW5rT3JUaHJvdz1mdW5jdGlvbihhLGIpe3ZhciBkPXRoaXMuZ2V0UmVzb2x2ZWRMaW5rKGEpO2lmKCFkKXRocm93IGsoIkVOT0VOVCIsYixhKTtyZXR1cm4gZH07YS5wcm90b3R5cGUucmVzb2x2ZVN5bWxpbmtzPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmdldFJlc29sdmVkTGluayhhLnN0ZXBzLnNsaWNlKDEpKX07YS5wcm90b3R5cGUuZ2V0TGlua0FzRGlyT3JUaHJvdz1mdW5jdGlvbihhLGIpe3ZhciBkPXRoaXMuZ2V0TGlua09yVGhyb3coYSxiKTtpZighZC5nZXROb2RlKCkuaXNEaXJlY3RvcnkoKSl0aHJvdyBrKCJFTk9URElSIiwKYixhKTtyZXR1cm4gZH07YS5wcm90b3R5cGUuZ2V0TGlua1BhcmVudD1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5yb290LndhbGsoYSxhLmxlbmd0aC0xKX07YS5wcm90b3R5cGUuZ2V0TGlua1BhcmVudEFzRGlyT3JUaHJvdz1mdW5jdGlvbihhLGIpe2E9YSBpbnN0YW5jZW9mIEFycmF5P2E6bihhKTt2YXIgZD10aGlzLmdldExpbmtQYXJlbnQoYSk7aWYoIWQpdGhyb3cgaygiRU5PRU5UIixiLEgrYS5qb2luKEgpKTtpZighZC5nZXROb2RlKCkuaXNEaXJlY3RvcnkoKSl0aHJvdyBrKCJFTk9URElSIixiLEgrYS5qb2luKEgpKTtyZXR1cm4gZH07YS5wcm90b3R5cGUuZ2V0RmlsZUJ5RmQ9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZmRzW1N0cmluZyhhKV19O2EucHJvdG90eXBlLmdldEZpbGVCeUZkT3JUaHJvdz1mdW5jdGlvbihhLGIpe2lmKGE+Pj4wIT09YSl0aHJvdyBUeXBlRXJyb3IoTS5GRCk7YT10aGlzLmdldEZpbGVCeUZkKGEpO2lmKCFhKXRocm93IGsoIkVCQURGIixiKTtyZXR1cm4gYX07CmEucHJvdG90eXBlLmdldE5vZGVCeUlkT3JDcmVhdGU9ZnVuY3Rpb24oYSxiLGQpe2lmKCJudW1iZXIiPT09dHlwZW9mIGEpe2E9dGhpcy5nZXRGaWxlQnlGZChhKTtpZighYSl0aHJvdyBFcnJvcigiRmlsZSBudG8gZm91bmQiKTtyZXR1cm4gYS5ub2RlfXZhciBlPUIoYSksZj10aGlzLmdldExpbmsoZSk7aWYoZilyZXR1cm4gZi5nZXROb2RlKCk7aWYoYiZPJiYoYj10aGlzLmdldExpbmtQYXJlbnQoZSkpKXJldHVybiBmPXRoaXMuY3JlYXRlTGluayhiLGVbZS5sZW5ndGgtMV0sITEsZCksZi5nZXROb2RlKCk7dGhyb3cgaygiRU5PRU5UIiwiZ2V0Tm9kZUJ5SWRPckNyZWF0ZSIscChhKSk7fTthLnByb3RvdHlwZS53cmFwQXN5bmM9ZnVuY3Rpb24oYSxiLGQpe3ZhciBlPXRoaXM7cihkKTtnYi5kZWZhdWx0KGZ1bmN0aW9uKCl7dHJ5e2QobnVsbCxhLmFwcGx5KGUsYikpfWNhdGNoKEFiKXtkKEFiKX19KX07YS5wcm90b3R5cGUuX3RvSlNPTj1mdW5jdGlvbihhLGIsZCl7dmFyIGU7dm9pZCAwPT09CmEmJihhPXRoaXMucm9vdCk7dm9pZCAwPT09YiYmKGI9e30pO3ZhciBmPSEwLHY9YS5jaGlsZHJlbjthLmdldE5vZGUoKS5pc0ZpbGUoKSYmKHY9KGU9e30sZVthLmdldE5hbWUoKV09YS5wYXJlbnQuZ2V0Q2hpbGQoYS5nZXROYW1lKCkpLGUpLGE9YS5wYXJlbnQpO2Zvcih2YXIgaCBpbiB2KXtmPSExO3Y9YS5nZXRDaGlsZChoKTtpZighdil0aHJvdyBFcnJvcigiX3RvSlNPTjogdW5leHBlY3RlZCB1bmRlZmluZWQiKTtlPXYuZ2V0Tm9kZSgpO2UuaXNGaWxlKCk/KHY9di5nZXRQYXRoKCksZCYmKHY9UGIoZCx2KSksYlt2XT1lLmdldFN0cmluZygpKTplLmlzRGlyZWN0b3J5KCkmJnRoaXMuX3RvSlNPTih2LGIsZCl9YT1hLmdldFBhdGgoKTtkJiYoYT1QYihkLGEpKTthJiZmJiYoYlthXT1udWxsKTtyZXR1cm4gYn07YS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKGEsYixkKXt2b2lkIDA9PT1iJiYoYj17fSk7dm9pZCAwPT09ZCYmKGQ9ITEpO3ZhciBlPVtdO2lmKGEpe2EgaW5zdGFuY2VvZgpBcnJheXx8KGE9W2FdKTtmb3IodmFyIGY9MDtmPGEubGVuZ3RoO2YrKyl7dmFyIHY9cChhW2ZdKTsodj10aGlzLmdldFJlc29sdmVkTGluayh2KSkmJmUucHVzaCh2KX19ZWxzZSBlLnB1c2godGhpcy5yb290KTtpZighZS5sZW5ndGgpcmV0dXJuIGI7Zm9yKGY9MDtmPGUubGVuZ3RoO2YrKyl2PWVbZl0sdGhpcy5fdG9KU09OKHYsYixkP3YuZ2V0UGF0aCgpOiIiKTtyZXR1cm4gYn07YS5wcm90b3R5cGUuZnJvbUpTT049ZnVuY3Rpb24oYSxiKXt2b2lkIDA9PT1iJiYoYj1ZLmRlZmF1bHQuY3dkKCkpO2Zvcih2YXIgZSBpbiBhKXt2YXIgZj1hW2VdO2lmKCJzdHJpbmciPT09dHlwZW9mIGYpe2U9ZChlLGIpO3ZhciB2PW4oZSk7MTx2Lmxlbmd0aCYmKHY9SCt2LnNsaWNlKDAsdi5sZW5ndGgtMSkuam9pbihIKSx0aGlzLm1rZGlycEJhc2Uodiw1MTEpKTt0aGlzLndyaXRlRmlsZVN5bmMoZSxmKX1lbHNlIHRoaXMubWtkaXJwQmFzZShlLDUxMSl9fTthLnByb3RvdHlwZS5yZXNldD1mdW5jdGlvbigpe3RoaXMuaW5vPQowO3RoaXMuaW5vZGVzPXt9O3RoaXMucmVsZWFzZWRJbm9zPVtdO3RoaXMuZmRzPXt9O3RoaXMucmVsZWFzZWRGZHM9W107dGhpcy5vcGVuRmlsZXM9MDt0aGlzLnJvb3Q9dGhpcy5jcmVhdGVMaW5rKCk7dGhpcy5yb290LnNldE5vZGUodGhpcy5jcmVhdGVOb2RlKCEwKSl9O2EucHJvdG90eXBlLm1vdW50U3luYz1mdW5jdGlvbihhLGIpe3RoaXMuZnJvbUpTT04oYixhKX07YS5wcm90b3R5cGUub3Blbkxpbms9ZnVuY3Rpb24oYSxiLGQpe3ZvaWQgMD09PWQmJihkPSEwKTtpZih0aGlzLm9wZW5GaWxlcz49dGhpcy5tYXhGaWxlcyl0aHJvdyBrKCJFTUZJTEUiLCJvcGVuIixhLmdldFBhdGgoKSk7dmFyIGU9YTtkJiYoZT10aGlzLnJlc29sdmVTeW1saW5rcyhhKSk7aWYoIWUpdGhyb3cgaygiRU5PRU5UIiwib3BlbiIsYS5nZXRQYXRoKCkpO2Q9ZS5nZXROb2RlKCk7aWYoZC5pc0RpcmVjdG9yeSgpKXtpZigoYiYoY2N8QWF8aWIpKSE9PWNjKXRocm93IGsoIkVJU0RJUiIsIm9wZW4iLGEuZ2V0UGF0aCgpKTsKfWVsc2UgaWYoYiZUKXRocm93IGsoIkVOT1RESVIiLCJvcGVuIixhLmdldFBhdGgoKSk7aWYoIShiJmlifHxkLmNhblJlYWQoKSkpdGhyb3cgaygiRUFDQ0VTIiwib3BlbiIsYS5nZXRQYXRoKCkpO2E9bmV3IHRoaXMucHJvcHMuRmlsZShhLGQsYix0aGlzLm5ld0ZkTnVtYmVyKCkpO3RoaXMuZmRzW2EuZmRdPWE7dGhpcy5vcGVuRmlsZXMrKztiJksmJmEudHJ1bmNhdGUoKTtyZXR1cm4gYX07YS5wcm90b3R5cGUub3BlbkZpbGU9ZnVuY3Rpb24oYSxiLGQsZSl7dm9pZCAwPT09ZSYmKGU9ITApO3ZhciBmPW4oYSksdj1lP3RoaXMuZ2V0UmVzb2x2ZWRMaW5rKGYpOnRoaXMuZ2V0TGluayhmKTtpZighdiYmYiZPKXt2YXIgaD10aGlzLmdldFJlc29sdmVkTGluayhmLnNsaWNlKDAsZi5sZW5ndGgtMSkpO2lmKCFoKXRocm93IGsoIkVOT0VOVCIsIm9wZW4iLEgrZi5qb2luKEgpKTtiJk8mJiJudW1iZXIiPT09dHlwZW9mIGQmJih2PXRoaXMuY3JlYXRlTGluayhoLGZbZi5sZW5ndGgtMV0sCiExLGQpKX1pZih2KXJldHVybiB0aGlzLm9wZW5MaW5rKHYsYixlKTt0aHJvdyBrKCJFTk9FTlQiLCJvcGVuIixhKTt9O2EucHJvdG90eXBlLm9wZW5CYXNlPWZ1bmN0aW9uKGEsYixkLGUpe3ZvaWQgMD09PWUmJihlPSEwKTtiPXRoaXMub3BlbkZpbGUoYSxiLGQsZSk7aWYoIWIpdGhyb3cgaygiRU5PRU5UIiwib3BlbiIsYSk7cmV0dXJuIGIuZmR9O2EucHJvdG90eXBlLm9wZW5TeW5jPWZ1bmN0aW9uKGEsYixkKXt2b2lkIDA9PT1kJiYoZD00MzgpO2Q9eShkKTthPXAoYSk7Yj1sKGIpO3JldHVybiB0aGlzLm9wZW5CYXNlKGEsYixkKX07YS5wcm90b3R5cGUub3Blbj1mdW5jdGlvbihhLGIsZCxlKXt2YXIgZj1kOyJmdW5jdGlvbiI9PT10eXBlb2YgZCYmKGY9NDM4LGU9ZCk7ZD15KGZ8fDQzOCk7YT1wKGEpO2I9bChiKTt0aGlzLndyYXBBc3luYyh0aGlzLm9wZW5CYXNlLFthLGIsZF0sZSl9O2EucHJvdG90eXBlLmNsb3NlRmlsZT1mdW5jdGlvbihhKXt0aGlzLmZkc1thLmZkXSYmKHRoaXMub3BlbkZpbGVzLS0sCmRlbGV0ZSB0aGlzLmZkc1thLmZkXSx0aGlzLnJlbGVhc2VkRmRzLnB1c2goYS5mZCkpfTthLnByb3RvdHlwZS5jbG9zZVN5bmM9ZnVuY3Rpb24oYSl7RyhhKTthPXRoaXMuZ2V0RmlsZUJ5RmRPclRocm93KGEsImNsb3NlIik7dGhpcy5jbG9zZUZpbGUoYSl9O2EucHJvdG90eXBlLmNsb3NlPWZ1bmN0aW9uKGEsYil7RyhhKTt0aGlzLndyYXBBc3luYyh0aGlzLmNsb3NlU3luYyxbYV0sYil9O2EucHJvdG90eXBlLm9wZW5GaWxlT3JHZXRCeUlkPWZ1bmN0aW9uKGEsYixkKXtpZigibnVtYmVyIj09PXR5cGVvZiBhKXthPXRoaXMuZmRzW2FdO2lmKCFhKXRocm93IGsoIkVOT0VOVCIpO3JldHVybiBhfXJldHVybiB0aGlzLm9wZW5GaWxlKHAoYSksYixkKX07YS5wcm90b3R5cGUucmVhZEJhc2U9ZnVuY3Rpb24oYSxiLGQsZSxmKXtyZXR1cm4gdGhpcy5nZXRGaWxlQnlGZE9yVGhyb3coYSkucmVhZChiLE51bWJlcihkKSxOdW1iZXIoZSksZil9O2EucHJvdG90eXBlLnJlYWRTeW5jPWZ1bmN0aW9uKGEsCmIsZCxlLGYpe0coYSk7cmV0dXJuIHRoaXMucmVhZEJhc2UoYSxiLGQsZSxmKX07YS5wcm90b3R5cGUucmVhZD1mdW5jdGlvbihhLGIsZCxlLGYsaCl7dmFyIGc9dGhpcztyKGgpO2lmKDA9PT1lKXJldHVybiBZLmRlZmF1bHQubmV4dFRpY2soZnVuY3Rpb24oKXtoJiZoKG51bGwsMCxiKX0pO2diLmRlZmF1bHQoZnVuY3Rpb24oKXt0cnl7dmFyIHY9Zy5yZWFkQmFzZShhLGIsZCxlLGYpO2gobnVsbCx2LGIpfWNhdGNoKGNoKXtoKGNoKX19KX07YS5wcm90b3R5cGUucmVhZEZpbGVCYXNlPWZ1bmN0aW9uKGEsYixkKXt2YXIgZT0ibnVtYmVyIj09PXR5cGVvZiBhJiZhPj4+MD09PWE7aWYoIWUpe3ZhciBmPXAoYSk7Zj1uKGYpO2lmKChmPXRoaXMuZ2V0UmVzb2x2ZWRMaW5rKGYpKSYmZi5nZXROb2RlKCkuaXNEaXJlY3RvcnkoKSl0aHJvdyBrKCJFSVNESVIiLCJvcGVuIixmLmdldFBhdGgoKSk7YT10aGlzLm9wZW5TeW5jKGEsYil9dHJ5e3ZhciBoPUModGhpcy5nZXRGaWxlQnlGZE9yVGhyb3coYSkuZ2V0QnVmZmVyKCksCmQpfWZpbmFsbHl7ZXx8dGhpcy5jbG9zZVN5bmMoYSl9cmV0dXJuIGh9O2EucHJvdG90eXBlLnJlYWRGaWxlU3luYz1mdW5jdGlvbihhLGIpe2I9YmEoYik7dmFyIGQ9bChiLmZsYWcpO3JldHVybiB0aGlzLnJlYWRGaWxlQmFzZShhLGQsYi5lbmNvZGluZyl9O2EucHJvdG90eXBlLnJlYWRGaWxlPWZ1bmN0aW9uKGEsYixkKXtkPVAoYmEpKGIsZCk7Yj1kWzBdO2Q9ZFsxXTt2YXIgZT1sKGIuZmxhZyk7dGhpcy53cmFwQXN5bmModGhpcy5yZWFkRmlsZUJhc2UsW2EsZSxiLmVuY29kaW5nXSxkKX07YS5wcm90b3R5cGUud3JpdGVCYXNlPWZ1bmN0aW9uKGEsYixkLGUsZil7cmV0dXJuIHRoaXMuZ2V0RmlsZUJ5RmRPclRocm93KGEsIndyaXRlIikud3JpdGUoYixkLGUsZil9O2EucHJvdG90eXBlLndyaXRlU3luYz1mdW5jdGlvbihhLGIsZCxlLGYpe0coYSk7dmFyIGg9InN0cmluZyIhPT10eXBlb2YgYjtpZihoKXt2YXIgZz0oZHx8MCl8MCx2PWU7ZD1mfWVsc2UgdmFyIHpiPWU7Yj16KGIsCnpiKTtoPyJ1bmRlZmluZWQiPT09dHlwZW9mIHYmJih2PWIubGVuZ3RoKTooZz0wLHY9Yi5sZW5ndGgpO3JldHVybiB0aGlzLndyaXRlQmFzZShhLGIsZyx2LGQpfTthLnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbihhLGIsZCxlLGYsaCl7dmFyIGc9dGhpcztHKGEpO3ZhciB2PXR5cGVvZiBiLHpiPXR5cGVvZiBkLGNkPXR5cGVvZiBlLGs9dHlwZW9mIGY7aWYoInN0cmluZyIhPT12KWlmKCJmdW5jdGlvbiI9PT16Yil2YXIgdz1kO2Vsc2UgaWYoImZ1bmN0aW9uIj09PWNkKXt2YXIgRj1kfDA7dz1lfWVsc2UgaWYoImZ1bmN0aW9uIj09PWspe0Y9ZHwwO3ZhciBsPWU7dz1mfWVsc2V7Rj1kfDA7bD1lO3ZhciBkZD1mO3c9aH1lbHNlIGlmKCJmdW5jdGlvbiI9PT16Yil3PWQ7ZWxzZSBpZigiZnVuY3Rpb24iPT09Y2QpZGQ9ZCx3PWU7ZWxzZSBpZigiZnVuY3Rpb24iPT09ayl7ZGQ9ZDt2YXIgcT1lO3c9Zn12YXIgcD16KGIscSk7InN0cmluZyIhPT12PyJ1bmRlZmluZWQiPT09dHlwZW9mIGwmJgoobD1wLmxlbmd0aCk6KEY9MCxsPXAubGVuZ3RoKTt2YXIgbT1yKHcpO2diLmRlZmF1bHQoZnVuY3Rpb24oKXt0cnl7dmFyIGQ9Zy53cml0ZUJhc2UoYSxwLEYsbCxkZCk7InN0cmluZyIhPT12P20obnVsbCxkLHApOm0obnVsbCxkLGIpfWNhdGNoKGRoKXttKGRoKX19KX07YS5wcm90b3R5cGUud3JpdGVGaWxlQmFzZT1mdW5jdGlvbihhLGIsZCxlKXt2YXIgZj0ibnVtYmVyIj09PXR5cGVvZiBhO2E9Zj9hOnRoaXMub3BlbkJhc2UocChhKSxkLGUpO2U9MDt2YXIgaD1iLmxlbmd0aDtkPWQmTD92b2lkIDA6MDt0cnl7Zm9yKDswPGg7KXt2YXIgZz10aGlzLndyaXRlU3luYyhhLGIsZSxoLGQpO2UrPWc7aC09Zzt2b2lkIDAhPT1kJiYoZCs9Zyl9fWZpbmFsbHl7Znx8dGhpcy5jbG9zZVN5bmMoYSl9fTthLnByb3RvdHlwZS53cml0ZUZpbGVTeW5jPWZ1bmN0aW9uKGEsYixkKXt2YXIgZT1lYShkKTtkPWwoZS5mbGFnKTt2YXIgZj15KGUubW9kZSk7Yj16KGIsZS5lbmNvZGluZyk7dGhpcy53cml0ZUZpbGVCYXNlKGEsCmIsZCxmKX07YS5wcm90b3R5cGUud3JpdGVGaWxlPWZ1bmN0aW9uKGEsYixkLGUpe3ZhciBmPWQ7ImZ1bmN0aW9uIj09PXR5cGVvZiBkJiYoZj1kYSxlPWQpO2Q9cihlKTt2YXIgaD1lYShmKTtmPWwoaC5mbGFnKTtlPXkoaC5tb2RlKTtiPXooYixoLmVuY29kaW5nKTt0aGlzLndyYXBBc3luYyh0aGlzLndyaXRlRmlsZUJhc2UsW2EsYixmLGVdLGQpfTthLnByb3RvdHlwZS5saW5rQmFzZT1mdW5jdGlvbihhLGIpe3ZhciBkPW4oYSksZT10aGlzLmdldExpbmsoZCk7aWYoIWUpdGhyb3cgaygiRU5PRU5UIiwibGluayIsYSxiKTt2YXIgZj1uKGIpO2Q9dGhpcy5nZXRMaW5rUGFyZW50KGYpO2lmKCFkKXRocm93IGsoIkVOT0VOVCIsImxpbmsiLGEsYik7Zj1mW2YubGVuZ3RoLTFdO2lmKGQuZ2V0Q2hpbGQoZikpdGhyb3cgaygiRUVYSVNUIiwibGluayIsYSxiKTthPWUuZ2V0Tm9kZSgpO2EubmxpbmsrKztkLmNyZWF0ZUNoaWxkKGYsYSl9O2EucHJvdG90eXBlLmNvcHlGaWxlQmFzZT1mdW5jdGlvbihhLApiLGQpe3ZhciBlPXRoaXMucmVhZEZpbGVTeW5jKGEpO2lmKGQmViYmdGhpcy5leGlzdHNTeW5jKGIpKXRocm93IGsoIkVFWElTVCIsImNvcHlGaWxlIixhLGIpO2lmKGQmWCl0aHJvdyBrKCJFTk9TWVMiLCJjb3B5RmlsZSIsYSxiKTt0aGlzLndyaXRlRmlsZUJhc2UoYixlLFIudyw0MzgpfTthLnByb3RvdHlwZS5jb3B5RmlsZVN5bmM9ZnVuY3Rpb24oYSxiLGQpe2E9cChhKTtiPXAoYik7cmV0dXJuIHRoaXMuY29weUZpbGVCYXNlKGEsYiwoZHx8MCl8MCl9O2EucHJvdG90eXBlLmNvcHlGaWxlPWZ1bmN0aW9uKGEsYixkLGUpe2E9cChhKTtiPXAoYik7aWYoImZ1bmN0aW9uIj09PXR5cGVvZiBkKXZhciBmPTA7ZWxzZSBmPWQsZD1lO3IoZCk7dGhpcy53cmFwQXN5bmModGhpcy5jb3B5RmlsZUJhc2UsW2EsYixmXSxkKX07YS5wcm90b3R5cGUubGlua1N5bmM9ZnVuY3Rpb24oYSxiKXthPXAoYSk7Yj1wKGIpO3RoaXMubGlua0Jhc2UoYSxiKX07YS5wcm90b3R5cGUubGluaz1mdW5jdGlvbihhLApiLGQpe2E9cChhKTtiPXAoYik7dGhpcy53cmFwQXN5bmModGhpcy5saW5rQmFzZSxbYSxiXSxkKX07YS5wcm90b3R5cGUudW5saW5rQmFzZT1mdW5jdGlvbihhKXt2YXIgYj1uKGEpO2I9dGhpcy5nZXRMaW5rKGIpO2lmKCFiKXRocm93IGsoIkVOT0VOVCIsInVubGluayIsYSk7aWYoYi5sZW5ndGgpdGhyb3cgRXJyb3IoIkRpciBub3QgZW1wdHkuLi4iKTt0aGlzLmRlbGV0ZUxpbmsoYik7YT1iLmdldE5vZGUoKTthLm5saW5rLS07MD49YS5ubGluayYmdGhpcy5kZWxldGVOb2RlKGEpfTthLnByb3RvdHlwZS51bmxpbmtTeW5jPWZ1bmN0aW9uKGEpe2E9cChhKTt0aGlzLnVubGlua0Jhc2UoYSl9O2EucHJvdG90eXBlLnVubGluaz1mdW5jdGlvbihhLGIpe2E9cChhKTt0aGlzLndyYXBBc3luYyh0aGlzLnVubGlua0Jhc2UsW2FdLGIpfTthLnByb3RvdHlwZS5zeW1saW5rQmFzZT1mdW5jdGlvbihhLGIpe3ZhciBkPW4oYiksZT10aGlzLmdldExpbmtQYXJlbnQoZCk7aWYoIWUpdGhyb3cgaygiRU5PRU5UIiwKInN5bWxpbmsiLGEsYik7ZD1kW2QubGVuZ3RoLTFdO2lmKGUuZ2V0Q2hpbGQoZCkpdGhyb3cgaygiRUVYSVNUIiwic3ltbGluayIsYSxiKTtiPWUuY3JlYXRlQ2hpbGQoZCk7Yi5nZXROb2RlKCkubWFrZVN5bWxpbmsobihhKSk7cmV0dXJuIGJ9O2EucHJvdG90eXBlLnN5bWxpbmtTeW5jPWZ1bmN0aW9uKGEsYil7YT1wKGEpO2I9cChiKTt0aGlzLnN5bWxpbmtCYXNlKGEsYil9O2EucHJvdG90eXBlLnN5bWxpbms9ZnVuY3Rpb24oYSxiLGQsZSl7ZD1yKCJmdW5jdGlvbiI9PT10eXBlb2YgZD9kOmUpO2E9cChhKTtiPXAoYik7dGhpcy53cmFwQXN5bmModGhpcy5zeW1saW5rQmFzZSxbYSxiXSxkKX07YS5wcm90b3R5cGUucmVhbHBhdGhCYXNlPWZ1bmN0aW9uKGEsYil7dmFyIGQ9bihhKTtkPXRoaXMuZ2V0UmVzb2x2ZWRMaW5rKGQpO2lmKCFkKXRocm93IGsoIkVOT0VOVCIsInJlYWxwYXRoIixhKTtyZXR1cm4gb2Euc3RyVG9FbmNvZGluZyhkLmdldFBhdGgoKSxiKX07YS5wcm90b3R5cGUucmVhbHBhdGhTeW5jPQpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLnJlYWxwYXRoQmFzZShwKGEpLGphKGIpLmVuY29kaW5nKX07YS5wcm90b3R5cGUucmVhbHBhdGg9ZnVuY3Rpb24oYSxiLGQpe2Q9cGEoYixkKTtiPWRbMF07ZD1kWzFdO2E9cChhKTt0aGlzLndyYXBBc3luYyh0aGlzLnJlYWxwYXRoQmFzZSxbYSxiLmVuY29kaW5nXSxkKX07YS5wcm90b3R5cGUubHN0YXRCYXNlPWZ1bmN0aW9uKGEsYil7dm9pZCAwPT09YiYmKGI9ITEpO3ZhciBkPXRoaXMuZ2V0TGluayhuKGEpKTtpZighZCl0aHJvdyBrKCJFTk9FTlQiLCJsc3RhdCIsYSk7cmV0dXJuIGViLmRlZmF1bHQuYnVpbGQoZC5nZXROb2RlKCksYil9O2EucHJvdG90eXBlLmxzdGF0U3luYz1mdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmxzdGF0QmFzZShwKGEpLGYoYikuYmlnaW50KX07YS5wcm90b3R5cGUubHN0YXQ9ZnVuY3Rpb24oYSxiLGQpe2Q9ZShiLGQpO2I9ZFswXTtkPWRbMV07dGhpcy53cmFwQXN5bmModGhpcy5sc3RhdEJhc2UsW3AoYSksCmIuYmlnaW50XSxkKX07YS5wcm90b3R5cGUuc3RhdEJhc2U9ZnVuY3Rpb24oYSxiKXt2b2lkIDA9PT1iJiYoYj0hMSk7dmFyIGQ9dGhpcy5nZXRSZXNvbHZlZExpbmsobihhKSk7aWYoIWQpdGhyb3cgaygiRU5PRU5UIiwic3RhdCIsYSk7cmV0dXJuIGViLmRlZmF1bHQuYnVpbGQoZC5nZXROb2RlKCksYil9O2EucHJvdG90eXBlLnN0YXRTeW5jPWZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuc3RhdEJhc2UocChhKSxmKGIpLmJpZ2ludCl9O2EucHJvdG90eXBlLnN0YXQ9ZnVuY3Rpb24oYSxiLGQpe2Q9ZShiLGQpO2I9ZFswXTtkPWRbMV07dGhpcy53cmFwQXN5bmModGhpcy5zdGF0QmFzZSxbcChhKSxiLmJpZ2ludF0sZCl9O2EucHJvdG90eXBlLmZzdGF0QmFzZT1mdW5jdGlvbihhLGIpe3ZvaWQgMD09PWImJihiPSExKTthPXRoaXMuZ2V0RmlsZUJ5RmQoYSk7aWYoIWEpdGhyb3cgaygiRUJBREYiLCJmc3RhdCIpO3JldHVybiBlYi5kZWZhdWx0LmJ1aWxkKGEubm9kZSxiKX07YS5wcm90b3R5cGUuZnN0YXRTeW5jPQpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmZzdGF0QmFzZShhLGYoYikuYmlnaW50KX07YS5wcm90b3R5cGUuZnN0YXQ9ZnVuY3Rpb24oYSxiLGQpe2I9ZShiLGQpO3RoaXMud3JhcEFzeW5jKHRoaXMuZnN0YXRCYXNlLFthLGJbMF0uYmlnaW50XSxiWzFdKX07YS5wcm90b3R5cGUucmVuYW1lQmFzZT1mdW5jdGlvbihhLGIpe3ZhciBkPXRoaXMuZ2V0TGluayhuKGEpKTtpZighZCl0aHJvdyBrKCJFTk9FTlQiLCJyZW5hbWUiLGEsYik7dmFyIGU9bihiKSxmPXRoaXMuZ2V0TGlua1BhcmVudChlKTtpZighZil0aHJvdyBrKCJFTk9FTlQiLCJyZW5hbWUiLGEsYik7KGE9ZC5wYXJlbnQpJiZhLmRlbGV0ZUNoaWxkKGQpO2Quc3RlcHM9ZmQoZi5zdGVwcyxbZVtlLmxlbmd0aC0xXV0pO2Yuc2V0Q2hpbGQoZC5nZXROYW1lKCksZCl9O2EucHJvdG90eXBlLnJlbmFtZVN5bmM9ZnVuY3Rpb24oYSxiKXthPXAoYSk7Yj1wKGIpO3RoaXMucmVuYW1lQmFzZShhLGIpfTthLnByb3RvdHlwZS5yZW5hbWU9CmZ1bmN0aW9uKGEsYixkKXthPXAoYSk7Yj1wKGIpO3RoaXMud3JhcEFzeW5jKHRoaXMucmVuYW1lQmFzZSxbYSxiXSxkKX07YS5wcm90b3R5cGUuZXhpc3RzQmFzZT1mdW5jdGlvbihhKXtyZXR1cm4hIXRoaXMuc3RhdEJhc2UoYSl9O2EucHJvdG90eXBlLmV4aXN0c1N5bmM9ZnVuY3Rpb24oYSl7dHJ5e3JldHVybiB0aGlzLmV4aXN0c0Jhc2UocChhKSl9Y2F0Y2goemIpe3JldHVybiExfX07YS5wcm90b3R5cGUuZXhpc3RzPWZ1bmN0aW9uKGEsYil7dmFyIGQ9dGhpcyxlPXAoYSk7aWYoImZ1bmN0aW9uIiE9PXR5cGVvZiBiKXRocm93IEVycm9yKE0uQ0IpO2diLmRlZmF1bHQoZnVuY3Rpb24oKXt0cnl7YihkLmV4aXN0c0Jhc2UoZSkpfWNhdGNoKEFiKXtiKCExKX19KX07YS5wcm90b3R5cGUuYWNjZXNzQmFzZT1mdW5jdGlvbihhKXt0aGlzLmdldExpbmtPclRocm93KGEsImFjY2VzcyIpfTthLnByb3RvdHlwZS5hY2Nlc3NTeW5jPWZ1bmN0aW9uKGEsYil7dm9pZCAwPT09YiYmKGI9Uyk7CmE9cChhKTt0aGlzLmFjY2Vzc0Jhc2UoYSxifDApfTthLnByb3RvdHlwZS5hY2Nlc3M9ZnVuY3Rpb24oYSxiLGQpe3ZhciBlPVM7ImZ1bmN0aW9uIiE9PXR5cGVvZiBiJiYoZT1ifDAsYj1yKGQpKTthPXAoYSk7dGhpcy53cmFwQXN5bmModGhpcy5hY2Nlc3NCYXNlLFthLGVdLGIpfTthLnByb3RvdHlwZS5hcHBlbmRGaWxlU3luYz1mdW5jdGlvbihhLGIsZCl7dm9pZCAwPT09ZCYmKGQ9ZmEpO2Q9aGEoZCk7ZC5mbGFnJiZhPj4+MCE9PWF8fChkLmZsYWc9ImEiKTt0aGlzLndyaXRlRmlsZVN5bmMoYSxiLGQpfTthLnByb3RvdHlwZS5hcHBlbmRGaWxlPWZ1bmN0aW9uKGEsYixkLGUpe2U9bmEoZCxlKTtkPWVbMF07ZT1lWzFdO2QuZmxhZyYmYT4+PjAhPT1hfHwoZC5mbGFnPSJhIik7dGhpcy53cml0ZUZpbGUoYSxiLGQsZSl9O2EucHJvdG90eXBlLnJlYWRkaXJCYXNlPWZ1bmN0aW9uKGEsYil7dmFyIGQ9bihhKTtkPXRoaXMuZ2V0UmVzb2x2ZWRMaW5rKGQpO2lmKCFkKXRocm93IGsoIkVOT0VOVCIsCiJyZWFkZGlyIixhKTtpZighZC5nZXROb2RlKCkuaXNEaXJlY3RvcnkoKSl0aHJvdyBrKCJFTk9URElSIiwic2NhbmRpciIsYSk7aWYoYi53aXRoRmlsZVR5cGVzKXt2YXIgZT1bXTtmb3IoZiBpbiBkLmNoaWxkcmVuKShhPWQuZ2V0Q2hpbGQoZikpJiZlLnB1c2goJGMuZGVmYXVsdC5idWlsZChhLGIuZW5jb2RpbmcpKTtVfHwiYnVmZmVyIj09PWIuZW5jb2Rpbmd8fGUuc29ydChmdW5jdGlvbihhLGIpe3JldHVybiBhLm5hbWU8Yi5uYW1lPy0xOmEubmFtZT5iLm5hbWU/MTowfSk7cmV0dXJuIGV9dmFyIGY9W107Zm9yKGUgaW4gZC5jaGlsZHJlbilmLnB1c2gob2Euc3RyVG9FbmNvZGluZyhlLGIuZW5jb2RpbmcpKTtVfHwiYnVmZmVyIj09PWIuZW5jb2Rpbmd8fGYuc29ydCgpO3JldHVybiBmfTthLnByb3RvdHlwZS5yZWFkZGlyU3luYz1mdW5jdGlvbihhLGIpe2I9bWEoYik7YT1wKGEpO3JldHVybiB0aGlzLnJlYWRkaXJCYXNlKGEsYil9O2EucHJvdG90eXBlLnJlYWRkaXI9ZnVuY3Rpb24oYSwKYixkKXtkPXNhKGIsZCk7Yj1kWzBdO2Q9ZFsxXTthPXAoYSk7dGhpcy53cmFwQXN5bmModGhpcy5yZWFkZGlyQmFzZSxbYSxiXSxkKX07YS5wcm90b3R5cGUucmVhZGxpbmtCYXNlPWZ1bmN0aW9uKGEsYil7dmFyIGQ9dGhpcy5nZXRMaW5rT3JUaHJvdyhhLCJyZWFkbGluayIpLmdldE5vZGUoKTtpZighZC5pc1N5bWxpbmsoKSl0aHJvdyBrKCJFSU5WQUwiLCJyZWFkbGluayIsYSk7YT1IK2Quc3ltbGluay5qb2luKEgpO3JldHVybiBvYS5zdHJUb0VuY29kaW5nKGEsYil9O2EucHJvdG90eXBlLnJlYWRsaW5rU3luYz1mdW5jdGlvbihhLGIpe2I9VyhiKTthPXAoYSk7cmV0dXJuIHRoaXMucmVhZGxpbmtCYXNlKGEsYi5lbmNvZGluZyl9O2EucHJvdG90eXBlLnJlYWRsaW5rPWZ1bmN0aW9uKGEsYixkKXtkPWFhKGIsZCk7Yj1kWzBdO2Q9ZFsxXTthPXAoYSk7dGhpcy53cmFwQXN5bmModGhpcy5yZWFkbGlua0Jhc2UsW2EsYi5lbmNvZGluZ10sZCl9O2EucHJvdG90eXBlLmZzeW5jQmFzZT0KZnVuY3Rpb24oYSl7dGhpcy5nZXRGaWxlQnlGZE9yVGhyb3coYSwiZnN5bmMiKX07YS5wcm90b3R5cGUuZnN5bmNTeW5jPWZ1bmN0aW9uKGEpe3RoaXMuZnN5bmNCYXNlKGEpfTthLnByb3RvdHlwZS5mc3luYz1mdW5jdGlvbihhLGIpe3RoaXMud3JhcEFzeW5jKHRoaXMuZnN5bmNCYXNlLFthXSxiKX07YS5wcm90b3R5cGUuZmRhdGFzeW5jQmFzZT1mdW5jdGlvbihhKXt0aGlzLmdldEZpbGVCeUZkT3JUaHJvdyhhLCJmZGF0YXN5bmMiKX07YS5wcm90b3R5cGUuZmRhdGFzeW5jU3luYz1mdW5jdGlvbihhKXt0aGlzLmZkYXRhc3luY0Jhc2UoYSl9O2EucHJvdG90eXBlLmZkYXRhc3luYz1mdW5jdGlvbihhLGIpe3RoaXMud3JhcEFzeW5jKHRoaXMuZmRhdGFzeW5jQmFzZSxbYV0sYil9O2EucHJvdG90eXBlLmZ0cnVuY2F0ZUJhc2U9ZnVuY3Rpb24oYSxiKXt0aGlzLmdldEZpbGVCeUZkT3JUaHJvdyhhLCJmdHJ1bmNhdGUiKS50cnVuY2F0ZShiKX07YS5wcm90b3R5cGUuZnRydW5jYXRlU3luYz0KZnVuY3Rpb24oYSxiKXt0aGlzLmZ0cnVuY2F0ZUJhc2UoYSxiKX07YS5wcm90b3R5cGUuZnRydW5jYXRlPWZ1bmN0aW9uKGEsYixkKXt2YXIgZT0ibnVtYmVyIj09PXR5cGVvZiBiP2I6MDtiPXIoIm51bWJlciI9PT10eXBlb2YgYj9kOmIpO3RoaXMud3JhcEFzeW5jKHRoaXMuZnRydW5jYXRlQmFzZSxbYSxlXSxiKX07YS5wcm90b3R5cGUudHJ1bmNhdGVCYXNlPWZ1bmN0aW9uKGEsYil7YT10aGlzLm9wZW5TeW5jKGEsInIrIik7dHJ5e3RoaXMuZnRydW5jYXRlU3luYyhhLGIpfWZpbmFsbHl7dGhpcy5jbG9zZVN5bmMoYSl9fTthLnByb3RvdHlwZS50cnVuY2F0ZVN5bmM9ZnVuY3Rpb24oYSxiKXtpZihhPj4+MD09PWEpcmV0dXJuIHRoaXMuZnRydW5jYXRlU3luYyhhLGIpO3RoaXMudHJ1bmNhdGVCYXNlKGEsYil9O2EucHJvdG90eXBlLnRydW5jYXRlPWZ1bmN0aW9uKGEsYixkKXt2YXIgZT0ibnVtYmVyIj09PXR5cGVvZiBiP2I6MDtiPXIoIm51bWJlciI9PT10eXBlb2YgYj9kOmIpOwppZihhPj4+MD09PWEpcmV0dXJuIHRoaXMuZnRydW5jYXRlKGEsZSxiKTt0aGlzLndyYXBBc3luYyh0aGlzLnRydW5jYXRlQmFzZSxbYSxlXSxiKX07YS5wcm90b3R5cGUuZnV0aW1lc0Jhc2U9ZnVuY3Rpb24oYSxiLGQpe2E9dGhpcy5nZXRGaWxlQnlGZE9yVGhyb3coYSwiZnV0aW1lcyIpLm5vZGU7YS5hdGltZT1uZXcgRGF0ZSgxRTMqYik7YS5tdGltZT1uZXcgRGF0ZSgxRTMqZCl9O2EucHJvdG90eXBlLmZ1dGltZXNTeW5jPWZ1bmN0aW9uKGEsYixkKXt0aGlzLmZ1dGltZXNCYXNlKGEsRChiKSxEKGQpKX07YS5wcm90b3R5cGUuZnV0aW1lcz1mdW5jdGlvbihhLGIsZCxlKXt0aGlzLndyYXBBc3luYyh0aGlzLmZ1dGltZXNCYXNlLFthLEQoYiksRChkKV0sZSl9O2EucHJvdG90eXBlLnV0aW1lc0Jhc2U9ZnVuY3Rpb24oYSxiLGQpe2E9dGhpcy5vcGVuU3luYyhhLCJyKyIpO3RyeXt0aGlzLmZ1dGltZXNCYXNlKGEsYixkKX1maW5hbGx5e3RoaXMuY2xvc2VTeW5jKGEpfX07YS5wcm90b3R5cGUudXRpbWVzU3luYz0KZnVuY3Rpb24oYSxiLGQpe3RoaXMudXRpbWVzQmFzZShwKGEpLEQoYiksRChkKSl9O2EucHJvdG90eXBlLnV0aW1lcz1mdW5jdGlvbihhLGIsZCxlKXt0aGlzLndyYXBBc3luYyh0aGlzLnV0aW1lc0Jhc2UsW3AoYSksRChiKSxEKGQpXSxlKX07YS5wcm90b3R5cGUubWtkaXJCYXNlPWZ1bmN0aW9uKGEsYil7dmFyIGQ9bihhKTtpZighZC5sZW5ndGgpdGhyb3cgaygiRUlTRElSIiwibWtkaXIiLGEpO3ZhciBlPXRoaXMuZ2V0TGlua1BhcmVudEFzRGlyT3JUaHJvdyhhLCJta2RpciIpO2Q9ZFtkLmxlbmd0aC0xXTtpZihlLmdldENoaWxkKGQpKXRocm93IGsoIkVFWElTVCIsIm1rZGlyIixhKTtlLmNyZWF0ZUNoaWxkKGQsdGhpcy5jcmVhdGVOb2RlKCEwLGIpKX07YS5wcm90b3R5cGUubWtkaXJwQmFzZT1mdW5jdGlvbihhLGIpe2E9bihhKTtmb3IodmFyIGQ9dGhpcy5yb290LGU9MDtlPGEubGVuZ3RoO2UrKyl7dmFyIGY9YVtlXTtpZighZC5nZXROb2RlKCkuaXNEaXJlY3RvcnkoKSl0aHJvdyBrKCJFTk9URElSIiwKIm1rZGlyIixkLmdldFBhdGgoKSk7dmFyIGg9ZC5nZXRDaGlsZChmKTtpZihoKWlmKGguZ2V0Tm9kZSgpLmlzRGlyZWN0b3J5KCkpZD1oO2Vsc2UgdGhyb3cgaygiRU5PVERJUiIsIm1rZGlyIixoLmdldFBhdGgoKSk7ZWxzZSBkPWQuY3JlYXRlQ2hpbGQoZix0aGlzLmNyZWF0ZU5vZGUoITAsYikpfX07YS5wcm90b3R5cGUubWtkaXJTeW5jPWZ1bmN0aW9uKGEsYil7Yj1nKGIpO3ZhciBkPXkoYi5tb2RlLDUxMSk7YT1wKGEpO2IucmVjdXJzaXZlP3RoaXMubWtkaXJwQmFzZShhLGQpOnRoaXMubWtkaXJCYXNlKGEsZCl9O2EucHJvdG90eXBlLm1rZGlyPWZ1bmN0aW9uKGEsYixkKXt2YXIgZT1nKGIpO2I9cigiZnVuY3Rpb24iPT09dHlwZW9mIGI/YjpkKTtkPXkoZS5tb2RlLDUxMSk7YT1wKGEpO2UucmVjdXJzaXZlP3RoaXMud3JhcEFzeW5jKHRoaXMubWtkaXJwQmFzZSxbYSxkXSxiKTp0aGlzLndyYXBBc3luYyh0aGlzLm1rZGlyQmFzZSxbYSxkXSxiKX07YS5wcm90b3R5cGUubWtkaXJwU3luYz0KZnVuY3Rpb24oYSxiKXt0aGlzLm1rZGlyU3luYyhhLHttb2RlOmIscmVjdXJzaXZlOiEwfSl9O2EucHJvdG90eXBlLm1rZGlycD1mdW5jdGlvbihhLGIsZCl7dmFyIGU9ImZ1bmN0aW9uIj09PXR5cGVvZiBiP3ZvaWQgMDpiO2I9cigiZnVuY3Rpb24iPT09dHlwZW9mIGI/YjpkKTt0aGlzLm1rZGlyKGEse21vZGU6ZSxyZWN1cnNpdmU6ITB9LGIpfTthLnByb3RvdHlwZS5ta2R0ZW1wQmFzZT1mdW5jdGlvbihhLGIsZCl7dm9pZCAwPT09ZCYmKGQ9NSk7dmFyIGU9YSt0aGlzLmdlblJuZFN0cigpO3RyeXtyZXR1cm4gdGhpcy5ta2RpckJhc2UoZSw1MTEpLG9hLnN0clRvRW5jb2RpbmcoZSxiKX1jYXRjaChBYil7aWYoIkVFWElTVCI9PT1BYi5jb2RlKXtpZigxPGQpcmV0dXJuIHRoaXMubWtkdGVtcEJhc2UoYSxiLGQtMSk7dGhyb3cgRXJyb3IoIkNvdWxkIG5vdCBjcmVhdGUgdGVtcCBkaXIuIik7fXRocm93IEFiO319O2EucHJvdG90eXBlLm1rZHRlbXBTeW5jPWZ1bmN0aW9uKGEsYil7Yj0KVyhiKS5lbmNvZGluZztpZighYXx8InN0cmluZyIhPT10eXBlb2YgYSl0aHJvdyBuZXcgVHlwZUVycm9yKCJmaWxlbmFtZSBwcmVmaXggaXMgcmVxdWlyZWQiKTtFKGEpO3JldHVybiB0aGlzLm1rZHRlbXBCYXNlKGEsYil9O2EucHJvdG90eXBlLm1rZHRlbXA9ZnVuY3Rpb24oYSxiLGQpe2Q9YWEoYixkKTtiPWRbMF0uZW5jb2Rpbmc7ZD1kWzFdO2lmKCFhfHwic3RyaW5nIiE9PXR5cGVvZiBhKXRocm93IG5ldyBUeXBlRXJyb3IoImZpbGVuYW1lIHByZWZpeCBpcyByZXF1aXJlZCIpO0UoYSkmJnRoaXMud3JhcEFzeW5jKHRoaXMubWtkdGVtcEJhc2UsW2EsYl0sZCl9O2EucHJvdG90eXBlLnJtZGlyQmFzZT1mdW5jdGlvbihhLGIpe2I9eGEoe30sbGEsYik7dmFyIGQ9dGhpcy5nZXRMaW5rQXNEaXJPclRocm93KGEsInJtZGlyIik7aWYoZC5sZW5ndGgmJiFiLnJlY3Vyc2l2ZSl0aHJvdyBrKCJFTk9URU1QVFkiLCJybWRpciIsYSk7dGhpcy5kZWxldGVMaW5rKGQpfTthLnByb3RvdHlwZS5ybWRpclN5bmM9CmZ1bmN0aW9uKGEsYil7dGhpcy5ybWRpckJhc2UocChhKSxiKX07YS5wcm90b3R5cGUucm1kaXI9ZnVuY3Rpb24oYSxiLGQpe3ZhciBlPXhhKHt9LGxhLGIpO2I9cigiZnVuY3Rpb24iPT09dHlwZW9mIGI/YjpkKTt0aGlzLndyYXBBc3luYyh0aGlzLnJtZGlyQmFzZSxbcChhKSxlXSxiKX07YS5wcm90b3R5cGUuZmNobW9kQmFzZT1mdW5jdGlvbihhLGIpe3RoaXMuZ2V0RmlsZUJ5RmRPclRocm93KGEsImZjaG1vZCIpLmNobW9kKGIpfTthLnByb3RvdHlwZS5mY2htb2RTeW5jPWZ1bmN0aW9uKGEsYil7dGhpcy5mY2htb2RCYXNlKGEseShiKSl9O2EucHJvdG90eXBlLmZjaG1vZD1mdW5jdGlvbihhLGIsZCl7dGhpcy53cmFwQXN5bmModGhpcy5mY2htb2RCYXNlLFthLHkoYildLGQpfTthLnByb3RvdHlwZS5jaG1vZEJhc2U9ZnVuY3Rpb24oYSxiKXthPXRoaXMub3BlblN5bmMoYSwicisiKTt0cnl7dGhpcy5mY2htb2RCYXNlKGEsYil9ZmluYWxseXt0aGlzLmNsb3NlU3luYyhhKX19OwphLnByb3RvdHlwZS5jaG1vZFN5bmM9ZnVuY3Rpb24oYSxiKXtiPXkoYik7YT1wKGEpO3RoaXMuY2htb2RCYXNlKGEsYil9O2EucHJvdG90eXBlLmNobW9kPWZ1bmN0aW9uKGEsYixkKXtiPXkoYik7YT1wKGEpO3RoaXMud3JhcEFzeW5jKHRoaXMuY2htb2RCYXNlLFthLGJdLGQpfTthLnByb3RvdHlwZS5sY2htb2RCYXNlPWZ1bmN0aW9uKGEsYil7YT10aGlzLm9wZW5CYXNlKGEsQWEsMCwhMSk7dHJ5e3RoaXMuZmNobW9kQmFzZShhLGIpfWZpbmFsbHl7dGhpcy5jbG9zZVN5bmMoYSl9fTthLnByb3RvdHlwZS5sY2htb2RTeW5jPWZ1bmN0aW9uKGEsYil7Yj15KGIpO2E9cChhKTt0aGlzLmxjaG1vZEJhc2UoYSxiKX07YS5wcm90b3R5cGUubGNobW9kPWZ1bmN0aW9uKGEsYixkKXtiPXkoYik7YT1wKGEpO3RoaXMud3JhcEFzeW5jKHRoaXMubGNobW9kQmFzZSxbYSxiXSxkKX07YS5wcm90b3R5cGUuZmNob3duQmFzZT1mdW5jdGlvbihhLGIsZCl7dGhpcy5nZXRGaWxlQnlGZE9yVGhyb3coYSwKImZjaG93biIpLmNob3duKGIsZCl9O2EucHJvdG90eXBlLmZjaG93blN5bmM9ZnVuY3Rpb24oYSxiLGQpe3coYik7RihkKTt0aGlzLmZjaG93bkJhc2UoYSxiLGQpfTthLnByb3RvdHlwZS5mY2hvd249ZnVuY3Rpb24oYSxiLGQsZSl7dyhiKTtGKGQpO3RoaXMud3JhcEFzeW5jKHRoaXMuZmNob3duQmFzZSxbYSxiLGRdLGUpfTthLnByb3RvdHlwZS5jaG93bkJhc2U9ZnVuY3Rpb24oYSxiLGQpe3RoaXMuZ2V0UmVzb2x2ZWRMaW5rT3JUaHJvdyhhLCJjaG93biIpLmdldE5vZGUoKS5jaG93bihiLGQpfTthLnByb3RvdHlwZS5jaG93blN5bmM9ZnVuY3Rpb24oYSxiLGQpe3coYik7RihkKTt0aGlzLmNob3duQmFzZShwKGEpLGIsZCl9O2EucHJvdG90eXBlLmNob3duPWZ1bmN0aW9uKGEsYixkLGUpe3coYik7RihkKTt0aGlzLndyYXBBc3luYyh0aGlzLmNob3duQmFzZSxbcChhKSxiLGRdLGUpfTthLnByb3RvdHlwZS5sY2hvd25CYXNlPWZ1bmN0aW9uKGEsYixkKXt0aGlzLmdldExpbmtPclRocm93KGEsCiJsY2hvd24iKS5nZXROb2RlKCkuY2hvd24oYixkKX07YS5wcm90b3R5cGUubGNob3duU3luYz1mdW5jdGlvbihhLGIsZCl7dyhiKTtGKGQpO3RoaXMubGNob3duQmFzZShwKGEpLGIsZCl9O2EucHJvdG90eXBlLmxjaG93bj1mdW5jdGlvbihhLGIsZCxlKXt3KGIpO0YoZCk7dGhpcy53cmFwQXN5bmModGhpcy5sY2hvd25CYXNlLFtwKGEpLGIsZF0sZSl9O2EucHJvdG90eXBlLndhdGNoRmlsZT1mdW5jdGlvbihhLGIsZCl7YT1wKGEpO3ZhciBlPWI7ImZ1bmN0aW9uIj09PXR5cGVvZiBlJiYoZD1iLGU9bnVsbCk7aWYoImZ1bmN0aW9uIiE9PXR5cGVvZiBkKXRocm93IEVycm9yKCcid2F0Y2hGaWxlKCkiIHJlcXVpcmVzIGEgbGlzdGVuZXIgZnVuY3Rpb24nKTtiPTUwMDc7dmFyIGY9ITA7ZSYmIm9iamVjdCI9PT10eXBlb2YgZSYmKCJudW1iZXIiPT09dHlwZW9mIGUuaW50ZXJ2YWwmJihiPWUuaW50ZXJ2YWwpLCJib29sZWFuIj09PXR5cGVvZiBlLnBlcnNpc3RlbnQmJihmPWUucGVyc2lzdGVudCkpOwooZT10aGlzLnN0YXRXYXRjaGVyc1thXSl8fChlPW5ldyB0aGlzLlN0YXRXYXRjaGVyLGUuc3RhcnQoYSxmLGIpLHRoaXMuc3RhdFdhdGNoZXJzW2FdPWUpO2UuYWRkTGlzdGVuZXIoImNoYW5nZSIsZCk7cmV0dXJuIGV9O2EucHJvdG90eXBlLnVud2F0Y2hGaWxlPWZ1bmN0aW9uKGEsYil7YT1wKGEpO3ZhciBkPXRoaXMuc3RhdFdhdGNoZXJzW2FdO2QmJigiZnVuY3Rpb24iPT09dHlwZW9mIGI/ZC5yZW1vdmVMaXN0ZW5lcigiY2hhbmdlIixiKTpkLnJlbW92ZUFsbExpc3RlbmVycygiY2hhbmdlIiksMD09PWQubGlzdGVuZXJDb3VudCgiY2hhbmdlIikmJihkLnN0b3AoKSxkZWxldGUgdGhpcy5zdGF0V2F0Y2hlcnNbYV0pKX07YS5wcm90b3R5cGUuY3JlYXRlUmVhZFN0cmVhbT1mdW5jdGlvbihhLGIpe3JldHVybiBuZXcgdGhpcy5SZWFkU3RyZWFtKGEsYil9O2EucHJvdG90eXBlLmNyZWF0ZVdyaXRlU3RyZWFtPWZ1bmN0aW9uKGEsYil7cmV0dXJuIG5ldyB0aGlzLldyaXRlU3RyZWFtKGEsCmIpfTthLnByb3RvdHlwZS53YXRjaD1mdW5jdGlvbihhLGIsZCl7YT1wKGEpO3ZhciBlPWI7ImZ1bmN0aW9uIj09PXR5cGVvZiBiJiYoZD1iLGU9bnVsbCk7dmFyIGY9VyhlKTtiPWYucGVyc2lzdGVudDtlPWYucmVjdXJzaXZlO2Y9Zi5lbmNvZGluZzt2b2lkIDA9PT1iJiYoYj0hMCk7dm9pZCAwPT09ZSYmKGU9ITEpO3ZhciBoPW5ldyB0aGlzLkZTV2F0Y2hlcjtoLnN0YXJ0KGEsYixlLGYpO2QmJmguYWRkTGlzdGVuZXIoImNoYW5nZSIsZCk7cmV0dXJuIGh9O2EuZmQ9MjE0NzQ4MzY0NztyZXR1cm4gYX0oKTtiLlZvbHVtZT1hO3ZhciBxYT1mdW5jdGlvbihhKXtmdW5jdGlvbiBiKGIpe3ZhciBkPWEuY2FsbCh0aGlzKXx8dGhpcztkLm9uSW50ZXJ2YWw9ZnVuY3Rpb24oKXt0cnl7dmFyIGE9ZC52b2wuc3RhdFN5bmMoZC5maWxlbmFtZSk7ZC5oYXNDaGFuZ2VkKGEpJiYoZC5lbWl0KCJjaGFuZ2UiLGEsZC5wcmV2KSxkLnByZXY9YSl9ZmluYWxseXtkLmxvb3AoKX19O2Qudm9sPWI7cmV0dXJuIGR9CmhiKGIsYSk7Yi5wcm90b3R5cGUubG9vcD1mdW5jdGlvbigpe3RoaXMudGltZW91dFJlZj10aGlzLnNldFRpbWVvdXQodGhpcy5vbkludGVydmFsLHRoaXMuaW50ZXJ2YWwpfTtiLnByb3RvdHlwZS5oYXNDaGFuZ2VkPWZ1bmN0aW9uKGEpe3JldHVybiBhLm10aW1lTXM+dGhpcy5wcmV2Lm10aW1lTXN8fGEubmxpbmshPT10aGlzLnByZXYubmxpbms/ITA6ITF9O2IucHJvdG90eXBlLnN0YXJ0PWZ1bmN0aW9uKGEsYixkKXt2b2lkIDA9PT1iJiYoYj0hMCk7dm9pZCAwPT09ZCYmKGQ9NTAwNyk7dGhpcy5maWxlbmFtZT1wKGEpO3RoaXMuc2V0VGltZW91dD1iP3NldFRpbWVvdXQ6bWYuZGVmYXVsdDt0aGlzLmludGVydmFsPWQ7dGhpcy5wcmV2PXRoaXMudm9sLnN0YXRTeW5jKHRoaXMuZmlsZW5hbWUpO3RoaXMubG9vcCgpfTtiLnByb3RvdHlwZS5zdG9wPWZ1bmN0aW9uKCl7Y2xlYXJUaW1lb3V0KHRoaXMudGltZW91dFJlZik7WS5kZWZhdWx0Lm5leHRUaWNrKGJjLHRoaXMpfTtyZXR1cm4gYn0oeC5FdmVudEVtaXR0ZXIpOwpiLlN0YXRXYXRjaGVyPXFhO3ZhciBpYTt3Yi5pbmhlcml0cyh0YSxjYS5SZWFkYWJsZSk7Yi5SZWFkU3RyZWFtPXRhO3RhLnByb3RvdHlwZS5vcGVuPWZ1bmN0aW9uKCl7dmFyIGE9dGhpczt0aGlzLl92b2wub3Blbih0aGlzLnBhdGgsdGhpcy5mbGFncyx0aGlzLm1vZGUsZnVuY3Rpb24oYixkKXtiPyhhLmF1dG9DbG9zZSYmYS5kZXN0cm95JiZhLmRlc3Ryb3koKSxhLmVtaXQoImVycm9yIixiKSk6KGEuZmQ9ZCxhLmVtaXQoIm9wZW4iLGQpLGEucmVhZCgpKX0pfTt0YS5wcm90b3R5cGUuX3JlYWQ9ZnVuY3Rpb24oYSl7aWYoIm51bWJlciIhPT10eXBlb2YgdGhpcy5mZClyZXR1cm4gdGhpcy5vbmNlKCJvcGVuIixmdW5jdGlvbigpe3RoaXMuX3JlYWQoYSl9KTtpZighdGhpcy5kZXN0cm95ZWQpe2lmKCFpYXx8MTI4PmlhLmxlbmd0aC1pYS51c2VkKWlhPUouYnVmZmVyQWxsb2NVbnNhZmUodGhpcy5fcmVhZGFibGVTdGF0ZS5oaWdoV2F0ZXJNYXJrKSxpYS51c2VkPTA7dmFyIGI9aWEsCmQ9TWF0aC5taW4oaWEubGVuZ3RoLWlhLnVzZWQsYSksZT1pYS51c2VkO3ZvaWQgMCE9PXRoaXMucG9zJiYoZD1NYXRoLm1pbih0aGlzLmVuZC10aGlzLnBvcysxLGQpKTtpZigwPj1kKXJldHVybiB0aGlzLnB1c2gobnVsbCk7dmFyIGY9dGhpczt0aGlzLl92b2wucmVhZCh0aGlzLmZkLGlhLGlhLnVzZWQsZCx0aGlzLnBvcyxmdW5jdGlvbihhLGQpe2E/KGYuYXV0b0Nsb3NlJiZmLmRlc3Ryb3kmJmYuZGVzdHJveSgpLGYuZW1pdCgiZXJyb3IiLGEpKTooYT1udWxsLDA8ZCYmKGYuYnl0ZXNSZWFkKz1kLGE9Yi5zbGljZShlLGUrZCkpLGYucHVzaChhKSl9KTt2b2lkIDAhPT10aGlzLnBvcyYmKHRoaXMucG9zKz1kKTtpYS51c2VkKz1kfX07dGEucHJvdG90eXBlLl9kZXN0cm95PWZ1bmN0aW9uKGEsYil7dGhpcy5jbG9zZShmdW5jdGlvbihkKXtiKGF8fGQpfSl9O3RhLnByb3RvdHlwZS5jbG9zZT1mdW5jdGlvbihhKXt2YXIgYj10aGlzO2lmKGEpdGhpcy5vbmNlKCJjbG9zZSIsYSk7aWYodGhpcy5jbG9zZWR8fAoibnVtYmVyIiE9PXR5cGVvZiB0aGlzLmZkKXtpZigibnVtYmVyIiE9PXR5cGVvZiB0aGlzLmZkKXt0aGlzLm9uY2UoIm9wZW4iLGJoKTtyZXR1cm59cmV0dXJuIFkuZGVmYXVsdC5uZXh0VGljayhmdW5jdGlvbigpe3JldHVybiBiLmVtaXQoImNsb3NlIil9KX10aGlzLmNsb3NlZD0hMDt0aGlzLl92b2wuY2xvc2UodGhpcy5mZCxmdW5jdGlvbihhKXthP2IuZW1pdCgiZXJyb3IiLGEpOmIuZW1pdCgiY2xvc2UiKX0pO3RoaXMuZmQ9bnVsbH07d2IuaW5oZXJpdHMoWixjYS5Xcml0YWJsZSk7Yi5Xcml0ZVN0cmVhbT1aO1oucHJvdG90eXBlLm9wZW49ZnVuY3Rpb24oKXt0aGlzLl92b2wub3Blbih0aGlzLnBhdGgsdGhpcy5mbGFncyx0aGlzLm1vZGUsZnVuY3Rpb24oYSxiKXthPyh0aGlzLmF1dG9DbG9zZSYmdGhpcy5kZXN0cm95JiZ0aGlzLmRlc3Ryb3koKSx0aGlzLmVtaXQoImVycm9yIixhKSk6KHRoaXMuZmQ9Yix0aGlzLmVtaXQoIm9wZW4iLGIpKX0uYmluZCh0aGlzKSl9O1oucHJvdG90eXBlLl93cml0ZT0KZnVuY3Rpb24oYSxiLGQpe2lmKCEoYSBpbnN0YW5jZW9mIEouQnVmZmVyKSlyZXR1cm4gdGhpcy5lbWl0KCJlcnJvciIsRXJyb3IoIkludmFsaWQgZGF0YSIpKTtpZigibnVtYmVyIiE9PXR5cGVvZiB0aGlzLmZkKXJldHVybiB0aGlzLm9uY2UoIm9wZW4iLGZ1bmN0aW9uKCl7dGhpcy5fd3JpdGUoYSxiLGQpfSk7dmFyIGU9dGhpczt0aGlzLl92b2wud3JpdGUodGhpcy5mZCxhLDAsYS5sZW5ndGgsdGhpcy5wb3MsZnVuY3Rpb24oYSxiKXtpZihhKXJldHVybiBlLmF1dG9DbG9zZSYmZS5kZXN0cm95JiZlLmRlc3Ryb3koKSxkKGEpO2UuYnl0ZXNXcml0dGVuKz1iO2QoKX0pO3ZvaWQgMCE9PXRoaXMucG9zJiYodGhpcy5wb3MrPWEubGVuZ3RoKX07Wi5wcm90b3R5cGUuX3dyaXRldj1mdW5jdGlvbihhLGIpe2lmKCJudW1iZXIiIT09dHlwZW9mIHRoaXMuZmQpcmV0dXJuIHRoaXMub25jZSgib3BlbiIsZnVuY3Rpb24oKXt0aGlzLl93cml0ZXYoYSxiKX0pO2Zvcih2YXIgZD10aGlzLGU9CmEubGVuZ3RoLGY9QXJyYXkoZSksaD0wLGc9MDtnPGU7ZysrKXt2YXIgaz1hW2ddLmNodW5rO2ZbZ109aztoKz1rLmxlbmd0aH1lPUouQnVmZmVyLmNvbmNhdChmKTt0aGlzLl92b2wud3JpdGUodGhpcy5mZCxlLDAsZS5sZW5ndGgsdGhpcy5wb3MsZnVuY3Rpb24oYSxlKXtpZihhKXJldHVybiBkLmRlc3Ryb3kmJmQuZGVzdHJveSgpLGIoYSk7ZC5ieXRlc1dyaXR0ZW4rPWU7YigpfSk7dm9pZCAwIT09dGhpcy5wb3MmJih0aGlzLnBvcys9aCl9O1oucHJvdG90eXBlLl9kZXN0cm95PXRhLnByb3RvdHlwZS5fZGVzdHJveTtaLnByb3RvdHlwZS5jbG9zZT10YS5wcm90b3R5cGUuY2xvc2U7Wi5wcm90b3R5cGUuZGVzdHJveVNvb249Wi5wcm90b3R5cGUuZW5kO3ZhciByYT1mdW5jdGlvbihhKXtmdW5jdGlvbiBiKGIpe3ZhciBkPWEuY2FsbCh0aGlzKXx8dGhpcztkLl9maWxlbmFtZT0iIjtkLl9maWxlbmFtZUVuY29kZWQ9IiI7ZC5fcmVjdXJzaXZlPSExO2QuX2VuY29kaW5nPW9hLkVOQ09ESU5HX1VURjg7CmQuX29uTm9kZUNoYW5nZT1mdW5jdGlvbigpe2QuX2VtaXQoImNoYW5nZSIpfTtkLl9vblBhcmVudENoaWxkPWZ1bmN0aW9uKGEpe2EuZ2V0TmFtZSgpPT09ZC5fZ2V0TmFtZSgpJiZkLl9lbWl0KCJyZW5hbWUiKX07ZC5fZW1pdD1mdW5jdGlvbihhKXtkLmVtaXQoImNoYW5nZSIsYSxkLl9maWxlbmFtZUVuY29kZWQpfTtkLl9wZXJzaXN0PWZ1bmN0aW9uKCl7ZC5fdGltZXI9c2V0VGltZW91dChkLl9wZXJzaXN0LDFFNil9O2QuX3ZvbD1iO3JldHVybiBkfWhiKGIsYSk7Yi5wcm90b3R5cGUuX2dldE5hbWU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3RlcHNbdGhpcy5fc3RlcHMubGVuZ3RoLTFdfTtiLnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbihhLGIsZCxlKXt2b2lkIDA9PT1iJiYoYj0hMCk7dm9pZCAwPT09ZCYmKGQ9ITEpO3ZvaWQgMD09PWUmJihlPW9hLkVOQ09ESU5HX1VURjgpO3RoaXMuX2ZpbGVuYW1lPXAoYSk7dGhpcy5fc3RlcHM9bih0aGlzLl9maWxlbmFtZSk7dGhpcy5fZmlsZW5hbWVFbmNvZGVkPQpvYS5zdHJUb0VuY29kaW5nKHRoaXMuX2ZpbGVuYW1lKTt0aGlzLl9yZWN1cnNpdmU9ZDt0aGlzLl9lbmNvZGluZz1lO3RyeXt0aGlzLl9saW5rPXRoaXMuX3ZvbC5nZXRMaW5rT3JUaHJvdyh0aGlzLl9maWxlbmFtZSwiRlNXYXRjaGVyIil9Y2F0Y2goZWQpe3Rocm93IGI9RXJyb3IoIndhdGNoICIrdGhpcy5fZmlsZW5hbWUrIiAiK2VkLmNvZGUpLGIuY29kZT1lZC5jb2RlLGIuZXJybm89ZWQuY29kZSxiO310aGlzLl9saW5rLmdldE5vZGUoKS5vbigiY2hhbmdlIix0aGlzLl9vbk5vZGVDaGFuZ2UpO3RoaXMuX2xpbmsub24oImNoaWxkOmFkZCIsdGhpcy5fb25Ob2RlQ2hhbmdlKTt0aGlzLl9saW5rLm9uKCJjaGlsZDpkZWxldGUiLHRoaXMuX29uTm9kZUNoYW5nZSk7aWYoYT10aGlzLl9saW5rLnBhcmVudClhLnNldE1heExpc3RlbmVycyhhLmdldE1heExpc3RlbmVycygpKzEpLGEub24oImNoaWxkOmRlbGV0ZSIsdGhpcy5fb25QYXJlbnRDaGlsZCk7YiYmdGhpcy5fcGVyc2lzdCgpfTsKYi5wcm90b3R5cGUuY2xvc2U9ZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQodGhpcy5fdGltZXIpO3RoaXMuX2xpbmsuZ2V0Tm9kZSgpLnJlbW92ZUxpc3RlbmVyKCJjaGFuZ2UiLHRoaXMuX29uTm9kZUNoYW5nZSk7dmFyIGE9dGhpcy5fbGluay5wYXJlbnQ7YSYmYS5yZW1vdmVMaXN0ZW5lcigiY2hpbGQ6ZGVsZXRlIix0aGlzLl9vblBhcmVudENoaWxkKX07cmV0dXJuIGJ9KHguRXZlbnRFbWl0dGVyKTtiLkZTV2F0Y2hlcj1yYX0pO1EoUWEpO3ZhciBlaD1RYS5wYXRoVG9GaWxlbmFtZSxmaD1RYS5maWxlbmFtZVRvU3RlcHMscWY9UWEuVm9sdW1lLGdkPUsoZnVuY3Rpb24oYSxiKXtPYmplY3QuZGVmaW5lUHJvcGVydHkoYiwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7Yi5mc1Byb3BzPSJjb25zdGFudHMgRl9PSyBSX09LIFdfT0sgWF9PSyBTdGF0cyIuc3BsaXQoIiAiKTtiLmZzU3luY01ldGhvZHM9InJlbmFtZVN5bmMgZnRydW5jYXRlU3luYyB0cnVuY2F0ZVN5bmMgY2hvd25TeW5jIGZjaG93blN5bmMgbGNob3duU3luYyBjaG1vZFN5bmMgZmNobW9kU3luYyBsY2htb2RTeW5jIHN0YXRTeW5jIGxzdGF0U3luYyBmc3RhdFN5bmMgbGlua1N5bmMgc3ltbGlua1N5bmMgcmVhZGxpbmtTeW5jIHJlYWxwYXRoU3luYyB1bmxpbmtTeW5jIHJtZGlyU3luYyBta2RpclN5bmMgbWtkaXJwU3luYyByZWFkZGlyU3luYyBjbG9zZVN5bmMgb3BlblN5bmMgdXRpbWVzU3luYyBmdXRpbWVzU3luYyBmc3luY1N5bmMgd3JpdGVTeW5jIHJlYWRTeW5jIHJlYWRGaWxlU3luYyB3cml0ZUZpbGVTeW5jIGFwcGVuZEZpbGVTeW5jIGV4aXN0c1N5bmMgYWNjZXNzU3luYyBmZGF0YXN5bmNTeW5jIG1rZHRlbXBTeW5jIGNvcHlGaWxlU3luYyBjcmVhdGVSZWFkU3RyZWFtIGNyZWF0ZVdyaXRlU3RyZWFtIi5zcGxpdCgiICIpOwpiLmZzQXN5bmNNZXRob2RzPSJyZW5hbWUgZnRydW5jYXRlIHRydW5jYXRlIGNob3duIGZjaG93biBsY2hvd24gY2htb2QgZmNobW9kIGxjaG1vZCBzdGF0IGxzdGF0IGZzdGF0IGxpbmsgc3ltbGluayByZWFkbGluayByZWFscGF0aCB1bmxpbmsgcm1kaXIgbWtkaXIgbWtkaXJwIHJlYWRkaXIgY2xvc2Ugb3BlbiB1dGltZXMgZnV0aW1lcyBmc3luYyB3cml0ZSByZWFkIHJlYWRGaWxlIHdyaXRlRmlsZSBhcHBlbmRGaWxlIGV4aXN0cyBhY2Nlc3MgZmRhdGFzeW5jIG1rZHRlbXAgY29weUZpbGUgd2F0Y2hGaWxlIHVud2F0Y2hGaWxlIHdhdGNoIi5zcGxpdCgiICIpfSk7UShnZCk7dmFyIHJmPUsoZnVuY3Rpb24oYSxiKXtmdW5jdGlvbiBkKGEpe2Zvcih2YXIgYj17Rl9PSzpoLFJfT0s6ayxXX09LOmwsWF9PSzptLGNvbnN0YW50czp1LmNvbnN0YW50cyxTdGF0czplYi5kZWZhdWx0LERpcmVudDokYy5kZWZhdWx0fSxkPTAsZT1mO2Q8ZS5sZW5ndGg7ZCsrKXt2YXIgcT1lW2RdOyJmdW5jdGlvbiI9PT0KdHlwZW9mIGFbcV0mJihiW3FdPWFbcV0uYmluZChhKSl9ZD0wO2ZvcihlPWc7ZDxlLmxlbmd0aDtkKyspcT1lW2RdLCJmdW5jdGlvbiI9PT10eXBlb2YgYVtxXSYmKGJbcV09YVtxXS5iaW5kKGEpKTtiLlN0YXRXYXRjaGVyPWEuU3RhdFdhdGNoZXI7Yi5GU1dhdGNoZXI9YS5GU1dhdGNoZXI7Yi5Xcml0ZVN0cmVhbT1hLldyaXRlU3RyZWFtO2IuUmVhZFN0cmVhbT1hLlJlYWRTdHJlYW07Yi5wcm9taXNlcz1hLnByb21pc2VzO2IuX3RvVW5peFRpbWVzdGFtcD1RYS50b1VuaXhUaW1lc3RhbXA7cmV0dXJuIGJ9dmFyIGU9TiYmTi5fX2Fzc2lnbnx8ZnVuY3Rpb24oKXtlPU9iamVjdC5hc3NpZ258fGZ1bmN0aW9uKGEpe2Zvcih2YXIgYixkPTEsZT1hcmd1bWVudHMubGVuZ3RoO2Q8ZTtkKyspe2I9YXJndW1lbnRzW2RdO2Zvcih2YXIgZiBpbiBiKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLGYpJiYoYVtmXT1iW2ZdKX1yZXR1cm4gYX07cmV0dXJuIGUuYXBwbHkodGhpcywKYXJndW1lbnRzKX07T2JqZWN0LmRlZmluZVByb3BlcnR5KGIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBmPWdkLmZzU3luY01ldGhvZHMsZz1nZC5mc0FzeW5jTWV0aG9kcyxoPXUuY29uc3RhbnRzLkZfT0ssaz11LmNvbnN0YW50cy5SX09LLGw9dS5jb25zdGFudHMuV19PSyxtPXUuY29uc3RhbnRzLlhfT0s7Yi5Wb2x1bWU9UWEuVm9sdW1lO2Iudm9sPW5ldyBRYS5Wb2x1bWU7Yi5jcmVhdGVGc0Zyb21Wb2x1bWU9ZDtiLmZzPWQoYi52b2wpO2EuZXhwb3J0cz1lKGUoe30sYS5leHBvcnRzKSxiLmZzKTthLmV4cG9ydHMuc2VtYW50aWM9ITB9KTtRKHJmKTt2YXIgc2Y9cmYuY3JlYXRlRnNGcm9tVm9sdW1lO1dnLnByb3RvdHlwZS5lbWl0PWZ1bmN0aW9uKGEpe2Zvcih2YXIgYixkLGU9W10sZj0xO2Y8YXJndW1lbnRzLmxlbmd0aDtmKyspZVtmLTFdPWFyZ3VtZW50c1tmXTtmPXRoaXMubGlzdGVuZXJzKGEpO3RyeXtmb3IodmFyIGc9cmMoZiksaD1nLm5leHQoKTshaC5kb25lO2g9CmcubmV4dCgpKXt2YXIgaz1oLnZhbHVlO3RyeXtrLmFwcGx5KHZvaWQgMCxKZihlKSl9Y2F0Y2godCl7Y29uc29sZS5lcnJvcih0KX19fWNhdGNoKHQpe2I9e2Vycm9yOnR9fWZpbmFsbHl7dHJ5e2gmJiFoLmRvbmUmJihkPWcucmV0dXJuKSYmZC5jYWxsKGcpfWZpbmFsbHl7aWYoYil0aHJvdyBiLmVycm9yO319cmV0dXJuIDA8Zi5sZW5ndGh9O3ZhciBnaD1mdW5jdGlvbigpe2Z1bmN0aW9uIGEoKXt0aGlzLnZvbHVtZT1uZXcgcWY7dGhpcy5mcz1zZih0aGlzLnZvbHVtZSk7dGhpcy5mcm9tSlNPTih7Ii9kZXYvc3RkaW4iOiIiLCIvZGV2L3N0ZG91dCI6IiIsIi9kZXYvc3RkZXJyIjoiIn0pfWEucHJvdG90eXBlLl90b0pTT049ZnVuY3Rpb24oYSxkLGUpe3ZvaWQgMD09PWQmJihkPXt9KTt2YXIgYj0hMCxnO2ZvcihnIGluIGEuY2hpbGRyZW4pe2I9ITE7dmFyIGg9YS5nZXRDaGlsZChnKTtpZihoKXt2YXIgaz1oLmdldE5vZGUoKTtrJiZrLmlzRmlsZSgpPyhoPWguZ2V0UGF0aCgpLAplJiYoaD1QYihlLGgpKSxkW2hdPWsuZ2V0QnVmZmVyKCkpOmsmJmsuaXNEaXJlY3RvcnkoKSYmdGhpcy5fdG9KU09OKGgsZCxlKX19YT1hLmdldFBhdGgoKTtlJiYoYT1QYihlLGEpKTthJiZiJiYoZFthXT1udWxsKTtyZXR1cm4gZH07YS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKGEsZCxlKXt2YXIgYixnO3ZvaWQgMD09PWQmJihkPXt9KTt2b2lkIDA9PT1lJiYoZT0hMSk7dmFyIGg9W107aWYoYSl7YSBpbnN0YW5jZW9mIEFycmF5fHwoYT1bYV0pO3RyeXtmb3IodmFyIGs9cmMoYSksbD1rLm5leHQoKTshbC5kb25lO2w9ay5uZXh0KCkpe3ZhciBxPWVoKGwudmFsdWUpLG09dGhpcy52b2x1bWUuZ2V0UmVzb2x2ZWRMaW5rKHEpO20mJmgucHVzaChtKX19Y2F0Y2goWmMpe3ZhciBuPXtlcnJvcjpaY319ZmluYWxseXt0cnl7bCYmIWwuZG9uZSYmKGI9ay5yZXR1cm4pJiZiLmNhbGwoayl9ZmluYWxseXtpZihuKXRocm93IG4uZXJyb3I7fX19ZWxzZSBoLnB1c2godGhpcy52b2x1bWUucm9vdCk7CmlmKCFoLmxlbmd0aClyZXR1cm4gZDt0cnl7Zm9yKHZhciBQPXJjKGgpLHA9UC5uZXh0KCk7IXAuZG9uZTtwPVAubmV4dCgpKW09cC52YWx1ZSx0aGlzLl90b0pTT04obSxkLGU/bS5nZXRQYXRoKCk6IiIpfWNhdGNoKFpjKXt2YXIgdT17ZXJyb3I6WmN9fWZpbmFsbHl7dHJ5e3AmJiFwLmRvbmUmJihnPVAucmV0dXJuKSYmZy5jYWxsKFApfWZpbmFsbHl7aWYodSl0aHJvdyB1LmVycm9yO319cmV0dXJuIGR9O2EucHJvdG90eXBlLmZyb21KU09ORml4ZWQ9ZnVuY3Rpb24oYSxkKXtmb3IodmFyIGIgaW4gZCl7dmFyIGY9ZFtiXTtpZihmP251bGwhPT1PYmplY3QuZ2V0UHJvdG90eXBlT2YoZik6bnVsbCE9PWYpe3ZhciBnPWZoKGIpOzE8Zy5sZW5ndGgmJihnPSIvIitnLnNsaWNlKDAsZy5sZW5ndGgtMSkuam9pbigiLyIpLGEubWtkaXJwQmFzZShnLDUxMSkpO2Eud3JpdGVGaWxlU3luYyhiLGZ8fCIiKX1lbHNlIGEubWtkaXJwQmFzZShiLDUxMSl9fTthLnByb3RvdHlwZS5mcm9tSlNPTj0KZnVuY3Rpb24oYSl7dGhpcy52b2x1bWU9bmV3IHFmO3RoaXMuZnJvbUpTT05GaXhlZCh0aGlzLnZvbHVtZSxhKTt0aGlzLmZzPXNmKHRoaXMudm9sdW1lKTt0aGlzLnZvbHVtZS5yZWxlYXNlZEZkcz1bMCwxLDJdO2E9dGhpcy52b2x1bWUub3BlblN5bmMoIi9kZXYvc3RkZXJyIiwidyIpO3ZhciBiPXRoaXMudm9sdW1lLm9wZW5TeW5jKCIvZGV2L3N0ZG91dCIsInciKSxlPXRoaXMudm9sdW1lLm9wZW5TeW5jKCIvZGV2L3N0ZGluIiwiciIpO2lmKDIhPT1hKXRocm93IEVycm9yKCJpbnZhbGlkIGhhbmRsZSBmb3Igc3RkZXJyOiAiK2EpO2lmKDEhPT1iKXRocm93IEVycm9yKCJpbnZhbGlkIGhhbmRsZSBmb3Igc3Rkb3V0OiAiK2IpO2lmKDAhPT1lKXRocm93IEVycm9yKCJpbnZhbGlkIGhhbmRsZSBmb3Igc3RkaW46ICIrZSk7fTthLnByb3RvdHlwZS5nZXRTdGRPdXQ9ZnVuY3Rpb24oKXtyZXR1cm4gR2YodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKCl7dmFyIGEsZD10aGlzO3JldHVybiBIZih0aGlzLApmdW5jdGlvbigpe2E9bmV3IFByb21pc2UoZnVuY3Rpb24oYSl7YShkLmZzLnJlYWRGaWxlU3luYygiL2Rldi9zdGRvdXQiLCJ1dGY4IikpfSk7cmV0dXJuWzIsYV19KX0pfTtyZXR1cm4gYX0oKSxkYz12b2lkIDA7Im9iamVjdCI9PT10eXBlb2Ygd2luZG93P2RjPXdpbmRvdy5UZXh0RGVjb2Rlcjoib2JqZWN0Ij09PXR5cGVvZiBzZWxmP2RjPXNlbGYuVGV4dERlY29kZXI6ImZ1bmN0aW9uIj09PXR5cGVvZiByZXF1aXJlJiYoZGM9cmVxdWlyZSgidXRpbCIpLlRleHREZWNvZGVyKTt2YXIgaGg9ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEpe3RoaXMud2FzbUZzPWE7dGhpcy53YXNtRnMudm9sdW1lLm1rZGlyU3luYygiL193YXNtZXIvZGV2L2ZiMCIse3JlY3Vyc2l2ZTohMH0pO3RoaXMud2FzbUZzLnZvbHVtZS53cml0ZUZpbGVTeW5jKCIvX3dhc21lci9kZXYvZmIwL2ZiIiwiIik7dGhpcy53YXNtRnMudm9sdW1lLndyaXRlRmlsZVN5bmMoIi9fd2FzbWVyL2Rldi9mYjAvdmlydHVhbF9zaXplIiwKIiIpO3RoaXMud2FzbUZzLnZvbHVtZS53cml0ZUZpbGVTeW5jKCIvX3dhc21lci9kZXYvZmIwL2RyYXciLCIiKTt0aGlzLndhc21Gcy52b2x1bWUud3JpdGVGaWxlU3luYygiL193YXNtZXIvZGV2L2ZiMC9pbnB1dCIsIiIpO3RoaXMud2luZG93U2l6ZUNhbGxiYWNrPWZ1bmN0aW9uKCl7fTt0aGlzLmJ1ZmZlckluZGV4RGlzcGxheUNhbGxiYWNrPWZ1bmN0aW9uKCl7fTt0aGlzLmlucHV0Q2FsbGJhY2s9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IFVpbnQ4QXJyYXl9O3RoaXMuZmRGcmFtZUJ1ZmZlcj10aGlzLndhc21Gcy52b2x1bWUub3BlblN5bmMoIi9fd2FzbWVyL2Rldi9mYjAvZmIiLCJ3KyIpO3RoaXMuZmRCdWZmZXJJbmRleERpc3BsYXk9dGhpcy53YXNtRnMudm9sdW1lLm9wZW5TeW5jKCIvX3dhc21lci9kZXYvZmIwL2RyYXciLCJ3KyIpO3RoaXMuZmRXaW5kb3dTaXplPXRoaXMud2FzbUZzLmZzLm9wZW5TeW5jKCIvX3dhc21lci9kZXYvZmIwL3ZpcnR1YWxfc2l6ZSIsIncrIik7CnRoaXMuZmRJbnB1dD10aGlzLndhc21Gcy52b2x1bWUub3BlblN5bmMoIi9fd2FzbWVyL2Rldi9mYjAvaW5wdXQiLCJ3KyIpO3ZhciBiPXRoaXMsZT10aGlzLndhc21Gcy52b2x1bWUuZmRzW3RoaXMuZmRJbnB1dF0ubm9kZS5yZWFkO3RoaXMud2FzbUZzLnZvbHVtZS5mZHNbdGhpcy5mZElucHV0XS5ub2RlLnJlYWQ9ZnVuY3Rpb24oKXt2YXIgYT1iLmlucHV0Q2FsbGJhY2soKTtiLndhc21Gcy52b2x1bWUud3JpdGVGaWxlU3luYygiL193YXNtZXIvZGV2L2ZiMC9pbnB1dCIsYSk7YT1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpO3JldHVybiBlLmFwcGx5KGIud2FzbUZzLnZvbHVtZS5mZHNbYi5mZElucHV0XS5ub2RlLGEpfTt2YXIgZj10aGlzLndhc21Gcy52b2x1bWUuZmRzW3RoaXMuZmRXaW5kb3dTaXplXS5ub2RlLndyaXRlO3RoaXMud2FzbUZzLnZvbHVtZS5mZHNbdGhpcy5mZFdpbmRvd1NpemVdLm5vZGUud3JpdGU9ZnVuY3Rpb24oKXt2YXIgYT1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpOwphPWYuYXBwbHkoYi53YXNtRnMudm9sdW1lLmZkc1tiLmZkV2luZG93U2l6ZV0ubm9kZSxhKTtiLndpbmRvd1NpemVDYWxsYmFjaygpO3JldHVybiBhfTt2YXIgZz10aGlzLndhc21Gcy52b2x1bWUuZmRzW3RoaXMuZmRCdWZmZXJJbmRleERpc3BsYXldLm5vZGUud3JpdGU7dGhpcy53YXNtRnMudm9sdW1lLmZkc1t0aGlzLmZkQnVmZmVySW5kZXhEaXNwbGF5XS5ub2RlLndyaXRlPWZ1bmN0aW9uKCl7dmFyIGE9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKTthPWcuYXBwbHkoYi53YXNtRnMudm9sdW1lLmZkc1tiLmZkQnVmZmVySW5kZXhEaXNwbGF5XS5ub2RlLGEpO2IuYnVmZmVySW5kZXhEaXNwbGF5Q2FsbGJhY2soKTtyZXR1cm4gYX19YS5wcm90b3R5cGUuZ2V0RnJhbWVCdWZmZXI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy53YXNtRnMuZnMucmVhZEZpbGVTeW5jKCIvX3dhc21lci9kZXYvZmIwL2ZiIil9O2EucHJvdG90eXBlLmdldFdpbmRvd1NpemU9ZnVuY3Rpb24oKXt2YXIgYT0KdGhpcy53YXNtRnMuZnMucmVhZEZpbGVTeW5jKCIvX3dhc21lci9kZXYvZmIwL3ZpcnR1YWxfc2l6ZSIpO3JldHVybiAwPGEubGVuZ3RoPyhhPShuZXcgZGMoInV0Zi04IikpLmRlY29kZShhKS5zcGxpdCgieCIpLFtwYXJzZUludChhWzBdLDEwKSxwYXJzZUludChhWzFdLDEwKV0pOlswLDBdfTthLnByb3RvdHlwZS5zZXRXaW5kb3dTaXplQ2FsbGJhY2s9ZnVuY3Rpb24oYSl7dGhpcy53aW5kb3dTaXplQ2FsbGJhY2s9YX07YS5wcm90b3R5cGUuc2V0QnVmZmVySW5kZXhEaXNwbGF5Q2FsbGJhY2s9ZnVuY3Rpb24oYSl7dGhpcy5idWZmZXJJbmRleERpc3BsYXlDYWxsYmFjaz1hfTthLnByb3RvdHlwZS5zZXRJbnB1dENhbGxiYWNrPWZ1bmN0aW9uKGEpe3RoaXMuaW5wdXRDYWxsYmFjaz1hfTtyZXR1cm4gYX0oKSxpaD0idW5kZWZpbmVkIiE9PXR5cGVvZiBnbG9iYWxUaGlzP2dsb2JhbFRoaXM6InVuZGVmaW5lZCIhPT10eXBlb2YgbmE/bmE6e30sbj0idW5kZWZpbmVkIiE9PXR5cGVvZiBCaWdJbnQ/CkJpZ0ludDppaC5CaWdJbnR8fE51bWJlcixlYz1EYXRhVmlldztlYy5wcm90b3R5cGUuc2V0QmlnVWludDY0fHwoZWMucHJvdG90eXBlLnNldEJpZ1VpbnQ2ND1mdW5jdGlvbihhLGIsZCl7aWYoYjxNYXRoLnBvdygyLDMyKSl7Yj1OdW1iZXIoYik7dmFyIGU9MH1lbHNle2U9Yi50b1N0cmluZygyKTtiPSIiO2Zvcih2YXIgZj0wO2Y8NjQtZS5sZW5ndGg7ZisrKWIrPSIwIjtiKz1lO2U9cGFyc2VJbnQoYi5zdWJzdHJpbmcoMCwzMiksMik7Yj1wYXJzZUludChiLnN1YnN0cmluZygzMiksMil9dGhpcy5zZXRVaW50MzIoYSsoZD8wOjQpLGIsZCk7dGhpcy5zZXRVaW50MzIoYSsoZD80OjApLGUsZCl9LGVjLnByb3RvdHlwZS5nZXRCaWdVaW50NjQ9ZnVuY3Rpb24oYSxiKXt2YXIgZD10aGlzLmdldFVpbnQzMihhKyhiPzA6NCksYik7YT10aGlzLmdldFVpbnQzMihhKyhiPzQ6MCksYik7ZD1kLnRvU3RyaW5nKDIpO2E9YS50b1N0cmluZygyKTtiPSIiO2Zvcih2YXIgZT0wO2U8MzItZC5sZW5ndGg7ZSsrKWIrPQoiMCI7cmV0dXJuIG4oIjBiIithKyhiK2QpKX0pO3ZhciBCYj0idW5kZWZpbmVkIiE9PXR5cGVvZiBuYT9uYToidW5kZWZpbmVkIiE9PXR5cGVvZiBzZWxmP3NlbGY6InVuZGVmaW5lZCIhPT10eXBlb2Ygd2luZG93P3dpbmRvdzp7fSxlYT1bXSxNPVtdLEpnPSJ1bmRlZmluZWQiIT09dHlwZW9mIFVpbnQ4QXJyYXk/VWludDhBcnJheTpBcnJheSxTYz0hMSxqaD17fS50b1N0cmluZyxSZT1BcnJheS5pc0FycmF5fHxmdW5jdGlvbihhKXtyZXR1cm4iW29iamVjdCBBcnJheV0iPT1qaC5jYWxsKGEpfTttLlRZUEVEX0FSUkFZX1NVUFBPUlQ9dm9pZCAwIT09QmIuVFlQRURfQVJSQVlfU1VQUE9SVD9CYi5UWVBFRF9BUlJBWV9TVVBQT1JUOiEwO3ZhciBraD1tLlRZUEVEX0FSUkFZX1NVUFBPUlQ/MjE0NzQ4MzY0NzoxMDczNzQxODIzO20ucG9vbFNpemU9ODE5MjttLl9hdWdtZW50PWZ1bmN0aW9uKGEpe2EuX19wcm90b19fPW0ucHJvdG90eXBlO3JldHVybiBhfTttLmZyb209ZnVuY3Rpb24oYSwKYixkKXtyZXR1cm4gT2UobnVsbCxhLGIsZCl9O20uVFlQRURfQVJSQVlfU1VQUE9SVCYmKG0ucHJvdG90eXBlLl9fcHJvdG9fXz1VaW50OEFycmF5LnByb3RvdHlwZSxtLl9fcHJvdG9fXz1VaW50OEFycmF5KTttLmFsbG9jPWZ1bmN0aW9uKGEsYixkKXtRZShhKTtyZXR1cm4gYT0wPj1hP21hKG51bGwsYSk6dm9pZCAwIT09Yj8ic3RyaW5nIj09PXR5cGVvZiBkP21hKG51bGwsYSkuZmlsbChiLGQpOm1hKG51bGwsYSkuZmlsbChiKTptYShudWxsLGEpfTttLmFsbG9jVW5zYWZlPWZ1bmN0aW9uKGEpe3JldHVybiBUYyhudWxsLGEpfTttLmFsbG9jVW5zYWZlU2xvdz1mdW5jdGlvbihhKXtyZXR1cm4gVGMobnVsbCxhKX07bS5pc0J1ZmZlcj1ZZTttLmNvbXBhcmU9ZnVuY3Rpb24oYSxiKXtpZighZmEoYSl8fCFmYShiKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJBcmd1bWVudHMgbXVzdCBiZSBCdWZmZXJzIik7aWYoYT09PWIpcmV0dXJuIDA7Zm9yKHZhciBkPWEubGVuZ3RoLGU9Yi5sZW5ndGgsCmY9MCxnPU1hdGgubWluKGQsZSk7ZjxnOysrZilpZihhW2ZdIT09YltmXSl7ZD1hW2ZdO2U9YltmXTticmVha31yZXR1cm4gZDxlPy0xOmU8ZD8xOjB9O20uaXNFbmNvZGluZz1mdW5jdGlvbihhKXtzd2l0Y2goU3RyaW5nKGEpLnRvTG93ZXJDYXNlKCkpe2Nhc2UgImhleCI6Y2FzZSAidXRmOCI6Y2FzZSAidXRmLTgiOmNhc2UgImFzY2lpIjpjYXNlICJsYXRpbjEiOmNhc2UgImJpbmFyeSI6Y2FzZSAiYmFzZTY0IjpjYXNlICJ1Y3MyIjpjYXNlICJ1Y3MtMiI6Y2FzZSAidXRmMTZsZSI6Y2FzZSAidXRmLTE2bGUiOnJldHVybiEwO2RlZmF1bHQ6cmV0dXJuITF9fTttLmNvbmNhdD1mdW5jdGlvbihhLGIpe2lmKCFSZShhKSl0aHJvdyBuZXcgVHlwZUVycm9yKCcibGlzdCIgYXJndW1lbnQgbXVzdCBiZSBhbiBBcnJheSBvZiBCdWZmZXJzJyk7aWYoMD09PWEubGVuZ3RoKXJldHVybiBtLmFsbG9jKDApO3ZhciBkO2lmKHZvaWQgMD09PWIpZm9yKGQ9Yj0wO2Q8YS5sZW5ndGg7KytkKWIrPQphW2RdLmxlbmd0aDtiPW0uYWxsb2NVbnNhZmUoYik7dmFyIGU9MDtmb3IoZD0wO2Q8YS5sZW5ndGg7KytkKXt2YXIgZj1hW2RdO2lmKCFmYShmKSl0aHJvdyBuZXcgVHlwZUVycm9yKCcibGlzdCIgYXJndW1lbnQgbXVzdCBiZSBhbiBBcnJheSBvZiBCdWZmZXJzJyk7Zi5jb3B5KGIsZSk7ZSs9Zi5sZW5ndGh9cmV0dXJuIGJ9O20uYnl0ZUxlbmd0aD1QZTttLnByb3RvdHlwZS5faXNCdWZmZXI9ITA7bS5wcm90b3R5cGUuc3dhcDE2PWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5sZW5ndGg7aWYoMCE9PWElMil0aHJvdyBuZXcgUmFuZ2VFcnJvcigiQnVmZmVyIHNpemUgbXVzdCBiZSBhIG11bHRpcGxlIG9mIDE2LWJpdHMiKTtmb3IodmFyIGI9MDtiPGE7Yis9MilNYSh0aGlzLGIsYisxKTtyZXR1cm4gdGhpc307bS5wcm90b3R5cGUuc3dhcDMyPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5sZW5ndGg7aWYoMCE9PWElNCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiQnVmZmVyIHNpemUgbXVzdCBiZSBhIG11bHRpcGxlIG9mIDMyLWJpdHMiKTsKZm9yKHZhciBiPTA7YjxhO2IrPTQpTWEodGhpcyxiLGIrMyksTWEodGhpcyxiKzEsYisyKTtyZXR1cm4gdGhpc307bS5wcm90b3R5cGUuc3dhcDY0PWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5sZW5ndGg7aWYoMCE9PWElOCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiQnVmZmVyIHNpemUgbXVzdCBiZSBhIG11bHRpcGxlIG9mIDY0LWJpdHMiKTtmb3IodmFyIGI9MDtiPGE7Yis9OClNYSh0aGlzLGIsYis3KSxNYSh0aGlzLGIrMSxiKzYpLE1hKHRoaXMsYisyLGIrNSksTWEodGhpcyxiKzMsYis0KTtyZXR1cm4gdGhpc307bS5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmxlbmd0aHwwO3JldHVybiAwPT09YT8iIjowPT09YXJndW1lbnRzLmxlbmd0aD9UZSh0aGlzLDAsYSk6SGcuYXBwbHkodGhpcyxhcmd1bWVudHMpfTttLnByb3RvdHlwZS5lcXVhbHM9ZnVuY3Rpb24oYSl7aWYoIWZhKGEpKXRocm93IG5ldyBUeXBlRXJyb3IoIkFyZ3VtZW50IG11c3QgYmUgYSBCdWZmZXIiKTsKcmV0dXJuIHRoaXM9PT1hPyEwOjA9PT1tLmNvbXBhcmUodGhpcyxhKX07bS5wcm90b3R5cGUuaW5zcGVjdD1mdW5jdGlvbigpe3ZhciBhPSIiOzA8dGhpcy5sZW5ndGgmJihhPXRoaXMudG9TdHJpbmcoImhleCIsMCw1MCkubWF0Y2goLy57Mn0vZykuam9pbigiICIpLDUwPHRoaXMubGVuZ3RoJiYoYSs9IiAuLi4gIikpO3JldHVybiI8QnVmZmVyICIrYSsiPiJ9O20ucHJvdG90eXBlLmNvbXBhcmU9ZnVuY3Rpb24oYSxiLGQsZSxmKXtpZighZmEoYSkpdGhyb3cgbmV3IFR5cGVFcnJvcigiQXJndW1lbnQgbXVzdCBiZSBhIEJ1ZmZlciIpO3ZvaWQgMD09PWImJihiPTApO3ZvaWQgMD09PWQmJihkPWE/YS5sZW5ndGg6MCk7dm9pZCAwPT09ZSYmKGU9MCk7dm9pZCAwPT09ZiYmKGY9dGhpcy5sZW5ndGgpO2lmKDA+Ynx8ZD5hLmxlbmd0aHx8MD5lfHxmPnRoaXMubGVuZ3RoKXRocm93IG5ldyBSYW5nZUVycm9yKCJvdXQgb2YgcmFuZ2UgaW5kZXgiKTtpZihlPj1mJiZiPj1kKXJldHVybiAwOwppZihlPj1mKXJldHVybi0xO2lmKGI+PWQpcmV0dXJuIDE7Yj4+Pj0wO2Q+Pj49MDtlPj4+PTA7Zj4+Pj0wO2lmKHRoaXM9PT1hKXJldHVybiAwO3ZhciBnPWYtZSxoPWQtYixrPU1hdGgubWluKGcsaCk7ZT10aGlzLnNsaWNlKGUsZik7YT1hLnNsaWNlKGIsZCk7Zm9yKGI9MDtiPGs7KytiKWlmKGVbYl0hPT1hW2JdKXtnPWVbYl07aD1hW2JdO2JyZWFrfXJldHVybiBnPGg/LTE6aDxnPzE6MH07bS5wcm90b3R5cGUuaW5jbHVkZXM9ZnVuY3Rpb24oYSxiLGQpe3JldHVybi0xIT09dGhpcy5pbmRleE9mKGEsYixkKX07bS5wcm90b3R5cGUuaW5kZXhPZj1mdW5jdGlvbihhLGIsZCl7cmV0dXJuIFVlKHRoaXMsYSxiLGQsITApfTttLnByb3RvdHlwZS5sYXN0SW5kZXhPZj1mdW5jdGlvbihhLGIsZCl7cmV0dXJuIFVlKHRoaXMsYSxiLGQsITEpfTttLnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbihhLGIsZCxlKXtpZih2b2lkIDA9PT1iKWU9InV0ZjgiLGQ9dGhpcy5sZW5ndGgsYj0wO2Vsc2UgaWYodm9pZCAwPT09CmQmJiJzdHJpbmciPT09dHlwZW9mIGIpZT1iLGQ9dGhpcy5sZW5ndGgsYj0wO2Vsc2UgaWYoaXNGaW5pdGUoYikpYnw9MCxpc0Zpbml0ZShkKT8oZHw9MCx2b2lkIDA9PT1lJiYoZT0idXRmOCIpKTooZT1kLGQ9dm9pZCAwKTtlbHNlIHRocm93IEVycm9yKCJCdWZmZXIud3JpdGUoc3RyaW5nLCBlbmNvZGluZywgb2Zmc2V0WywgbGVuZ3RoXSkgaXMgbm8gbG9uZ2VyIHN1cHBvcnRlZCIpO3ZhciBmPXRoaXMubGVuZ3RoLWI7aWYodm9pZCAwPT09ZHx8ZD5mKWQ9ZjtpZigwPGEubGVuZ3RoJiYoMD5kfHwwPmIpfHxiPnRoaXMubGVuZ3RoKXRocm93IG5ldyBSYW5nZUVycm9yKCJBdHRlbXB0IHRvIHdyaXRlIG91dHNpZGUgYnVmZmVyIGJvdW5kcyIpO2V8fChlPSJ1dGY4Iik7Zm9yKGY9ITE7Oylzd2l0Y2goZSl7Y2FzZSAiaGV4IjphOntiPU51bWJlcihiKXx8MDtlPXRoaXMubGVuZ3RoLWI7ZD8oZD1OdW1iZXIoZCksZD5lJiYoZD1lKSk6ZD1lO2U9YS5sZW5ndGg7aWYoMCE9PWUlMil0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGhleCBzdHJpbmciKTsKZD5lLzImJihkPWUvMik7Zm9yKGU9MDtlPGQ7KytlKXtmPXBhcnNlSW50KGEuc3Vic3RyKDIqZSwyKSwxNik7aWYoaXNOYU4oZikpe2E9ZTticmVhayBhfXRoaXNbYitlXT1mfWE9ZX1yZXR1cm4gYTtjYXNlICJ1dGY4IjpjYXNlICJ1dGYtOCI6cmV0dXJuIHViKFhiKGEsdGhpcy5sZW5ndGgtYiksdGhpcyxiLGQpO2Nhc2UgImFzY2lpIjpyZXR1cm4gdWIoWGUoYSksdGhpcyxiLGQpO2Nhc2UgImxhdGluMSI6Y2FzZSAiYmluYXJ5IjpyZXR1cm4gdWIoWGUoYSksdGhpcyxiLGQpO2Nhc2UgImJhc2U2NCI6cmV0dXJuIHViKFNlKGEpLHRoaXMsYixkKTtjYXNlICJ1Y3MyIjpjYXNlICJ1Y3MtMiI6Y2FzZSAidXRmMTZsZSI6Y2FzZSAidXRmLTE2bGUiOmU9YTtmPXRoaXMubGVuZ3RoLWI7Zm9yKHZhciBnPVtdLGg9MDtoPGUubGVuZ3RoJiYhKDA+KGYtPTIpKTsrK2gpe3ZhciBrPWUuY2hhckNvZGVBdChoKTthPWs+Pjg7ayU9MjU2O2cucHVzaChrKTtnLnB1c2goYSl9cmV0dXJuIHViKGcsCnRoaXMsYixkKTtkZWZhdWx0OmlmKGYpdGhyb3cgbmV3IFR5cGVFcnJvcigiVW5rbm93biBlbmNvZGluZzogIitlKTtlPSgiIitlKS50b0xvd2VyQ2FzZSgpO2Y9ITB9fTttLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm57dHlwZToiQnVmZmVyIixkYXRhOkFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHRoaXMuX2Fycnx8dGhpcywwKX19O3ZhciBXZT00MDk2O20ucHJvdG90eXBlLnNsaWNlPWZ1bmN0aW9uKGEsYil7dmFyIGQ9dGhpcy5sZW5ndGg7YT1+fmE7Yj12b2lkIDA9PT1iP2Q6fn5iOzA+YT8oYSs9ZCwwPmEmJihhPTApKTphPmQmJihhPWQpOzA+Yj8oYis9ZCwwPmImJihiPTApKTpiPmQmJihiPWQpO2I8YSYmKGI9YSk7aWYobS5UWVBFRF9BUlJBWV9TVVBQT1JUKWI9dGhpcy5zdWJhcnJheShhLGIpLGIuX19wcm90b19fPW0ucHJvdG90eXBlO2Vsc2V7ZD1iLWE7Yj1uZXcgbShkLHZvaWQgMCk7Zm9yKHZhciBlPTA7ZTxkOysrZSliW2VdPXRoaXNbZSthXX1yZXR1cm4gYn07Cm0ucHJvdG90eXBlLnJlYWRVSW50TEU9ZnVuY3Rpb24oYSxiLGQpe2F8PTA7Ynw9MDtkfHxJKGEsYix0aGlzLmxlbmd0aCk7ZD10aGlzW2FdO2Zvcih2YXIgZT0xLGY9MDsrK2Y8YiYmKGUqPTI1Nik7KWQrPXRoaXNbYStmXSplO3JldHVybiBkfTttLnByb3RvdHlwZS5yZWFkVUludEJFPWZ1bmN0aW9uKGEsYixkKXthfD0wO2J8PTA7ZHx8SShhLGIsdGhpcy5sZW5ndGgpO2Q9dGhpc1thKy0tYl07Zm9yKHZhciBlPTE7MDxiJiYoZSo9MjU2KTspZCs9dGhpc1thKy0tYl0qZTtyZXR1cm4gZH07bS5wcm90b3R5cGUucmVhZFVJbnQ4PWZ1bmN0aW9uKGEsYil7Ynx8SShhLDEsdGhpcy5sZW5ndGgpO3JldHVybiB0aGlzW2FdfTttLnByb3RvdHlwZS5yZWFkVUludDE2TEU9ZnVuY3Rpb24oYSxiKXtifHxJKGEsMix0aGlzLmxlbmd0aCk7cmV0dXJuIHRoaXNbYV18dGhpc1thKzFdPDw4fTttLnByb3RvdHlwZS5yZWFkVUludDE2QkU9ZnVuY3Rpb24oYSxiKXtifHxJKGEsMix0aGlzLmxlbmd0aCk7CnJldHVybiB0aGlzW2FdPDw4fHRoaXNbYSsxXX07bS5wcm90b3R5cGUucmVhZFVJbnQzMkxFPWZ1bmN0aW9uKGEsYil7Ynx8SShhLDQsdGhpcy5sZW5ndGgpO3JldHVybih0aGlzW2FdfHRoaXNbYSsxXTw8OHx0aGlzW2ErMl08PDE2KSsxNjc3NzIxNip0aGlzW2ErM119O20ucHJvdG90eXBlLnJlYWRVSW50MzJCRT1mdW5jdGlvbihhLGIpe2J8fEkoYSw0LHRoaXMubGVuZ3RoKTtyZXR1cm4gMTY3NzcyMTYqdGhpc1thXSsodGhpc1thKzFdPDwxNnx0aGlzW2ErMl08PDh8dGhpc1thKzNdKX07bS5wcm90b3R5cGUucmVhZEludExFPWZ1bmN0aW9uKGEsYixkKXthfD0wO2J8PTA7ZHx8SShhLGIsdGhpcy5sZW5ndGgpO2Q9dGhpc1thXTtmb3IodmFyIGU9MSxmPTA7KytmPGImJihlKj0yNTYpOylkKz10aGlzW2ErZl0qZTtkPj0xMjgqZSYmKGQtPU1hdGgucG93KDIsOCpiKSk7cmV0dXJuIGR9O20ucHJvdG90eXBlLnJlYWRJbnRCRT1mdW5jdGlvbihhLGIsZCl7YXw9MDtifD0wO2R8fEkoYSwKYix0aGlzLmxlbmd0aCk7ZD1iO2Zvcih2YXIgZT0xLGY9dGhpc1thKy0tZF07MDxkJiYoZSo9MjU2KTspZis9dGhpc1thKy0tZF0qZTtmPj0xMjgqZSYmKGYtPU1hdGgucG93KDIsOCpiKSk7cmV0dXJuIGZ9O20ucHJvdG90eXBlLnJlYWRJbnQ4PWZ1bmN0aW9uKGEsYil7Ynx8SShhLDEsdGhpcy5sZW5ndGgpO3JldHVybiB0aGlzW2FdJjEyOD8tMSooMjU1LXRoaXNbYV0rMSk6dGhpc1thXX07bS5wcm90b3R5cGUucmVhZEludDE2TEU9ZnVuY3Rpb24oYSxiKXtifHxJKGEsMix0aGlzLmxlbmd0aCk7YT10aGlzW2FdfHRoaXNbYSsxXTw8ODtyZXR1cm4gYSYzMjc2OD9hfDQyOTQ5MDE3NjA6YX07bS5wcm90b3R5cGUucmVhZEludDE2QkU9ZnVuY3Rpb24oYSxiKXtifHxJKGEsMix0aGlzLmxlbmd0aCk7YT10aGlzW2ErMV18dGhpc1thXTw8ODtyZXR1cm4gYSYzMjc2OD9hfDQyOTQ5MDE3NjA6YX07bS5wcm90b3R5cGUucmVhZEludDMyTEU9ZnVuY3Rpb24oYSxiKXtifHxJKGEsNCx0aGlzLmxlbmd0aCk7CnJldHVybiB0aGlzW2FdfHRoaXNbYSsxXTw8OHx0aGlzW2ErMl08PDE2fHRoaXNbYSszXTw8MjR9O20ucHJvdG90eXBlLnJlYWRJbnQzMkJFPWZ1bmN0aW9uKGEsYil7Ynx8SShhLDQsdGhpcy5sZW5ndGgpO3JldHVybiB0aGlzW2FdPDwyNHx0aGlzW2ErMV08PDE2fHRoaXNbYSsyXTw8OHx0aGlzW2ErM119O20ucHJvdG90eXBlLnJlYWRGbG9hdExFPWZ1bmN0aW9uKGEsYil7Ynx8SShhLDQsdGhpcy5sZW5ndGgpO3JldHVybiBWYih0aGlzLGEsITAsMjMsNCl9O20ucHJvdG90eXBlLnJlYWRGbG9hdEJFPWZ1bmN0aW9uKGEsYil7Ynx8SShhLDQsdGhpcy5sZW5ndGgpO3JldHVybiBWYih0aGlzLGEsITEsMjMsNCl9O20ucHJvdG90eXBlLnJlYWREb3VibGVMRT1mdW5jdGlvbihhLGIpe2J8fEkoYSw4LHRoaXMubGVuZ3RoKTtyZXR1cm4gVmIodGhpcyxhLCEwLDUyLDgpfTttLnByb3RvdHlwZS5yZWFkRG91YmxlQkU9ZnVuY3Rpb24oYSxiKXtifHxJKGEsOCx0aGlzLmxlbmd0aCk7cmV0dXJuIFZiKHRoaXMsCmEsITEsNTIsOCl9O20ucHJvdG90eXBlLndyaXRlVUludExFPWZ1bmN0aW9uKGEsYixkLGUpe2E9K2E7Ynw9MDtkfD0wO2V8fFYodGhpcyxhLGIsZCxNYXRoLnBvdygyLDgqZCktMSwwKTtlPTE7dmFyIGY9MDtmb3IodGhpc1tiXT1hJjI1NTsrK2Y8ZCYmKGUqPTI1Nik7KXRoaXNbYitmXT1hL2UmMjU1O3JldHVybiBiK2R9O20ucHJvdG90eXBlLndyaXRlVUludEJFPWZ1bmN0aW9uKGEsYixkLGUpe2E9K2E7Ynw9MDtkfD0wO2V8fFYodGhpcyxhLGIsZCxNYXRoLnBvdygyLDgqZCktMSwwKTtlPWQtMTt2YXIgZj0xO2Zvcih0aGlzW2IrZV09YSYyNTU7MDw9LS1lJiYoZio9MjU2KTspdGhpc1tiK2VdPWEvZiYyNTU7cmV0dXJuIGIrZH07bS5wcm90b3R5cGUud3JpdGVVSW50OD1mdW5jdGlvbihhLGIsZCl7YT0rYTtifD0wO2R8fFYodGhpcyxhLGIsMSwyNTUsMCk7bS5UWVBFRF9BUlJBWV9TVVBQT1JUfHwoYT1NYXRoLmZsb29yKGEpKTt0aGlzW2JdPWEmMjU1O3JldHVybiBiKzF9O20ucHJvdG90eXBlLndyaXRlVUludDE2TEU9CmZ1bmN0aW9uKGEsYixkKXthPSthO2J8PTA7ZHx8Vih0aGlzLGEsYiwyLDY1NTM1LDApO20uVFlQRURfQVJSQVlfU1VQUE9SVD8odGhpc1tiXT1hJjI1NSx0aGlzW2IrMV09YT4+PjgpOlliKHRoaXMsYSxiLCEwKTtyZXR1cm4gYisyfTttLnByb3RvdHlwZS53cml0ZVVJbnQxNkJFPWZ1bmN0aW9uKGEsYixkKXthPSthO2J8PTA7ZHx8Vih0aGlzLGEsYiwyLDY1NTM1LDApO20uVFlQRURfQVJSQVlfU1VQUE9SVD8odGhpc1tiXT1hPj4+OCx0aGlzW2IrMV09YSYyNTUpOlliKHRoaXMsYSxiLCExKTtyZXR1cm4gYisyfTttLnByb3RvdHlwZS53cml0ZVVJbnQzMkxFPWZ1bmN0aW9uKGEsYixkKXthPSthO2J8PTA7ZHx8Vih0aGlzLGEsYiw0LDQyOTQ5NjcyOTUsMCk7bS5UWVBFRF9BUlJBWV9TVVBQT1JUPyh0aGlzW2IrM109YT4+PjI0LHRoaXNbYisyXT1hPj4+MTYsdGhpc1tiKzFdPWE+Pj44LHRoaXNbYl09YSYyNTUpOlpiKHRoaXMsYSxiLCEwKTtyZXR1cm4gYis0fTttLnByb3RvdHlwZS53cml0ZVVJbnQzMkJFPQpmdW5jdGlvbihhLGIsZCl7YT0rYTtifD0wO2R8fFYodGhpcyxhLGIsNCw0Mjk0OTY3Mjk1LDApO20uVFlQRURfQVJSQVlfU1VQUE9SVD8odGhpc1tiXT1hPj4+MjQsdGhpc1tiKzFdPWE+Pj4xNix0aGlzW2IrMl09YT4+PjgsdGhpc1tiKzNdPWEmMjU1KTpaYih0aGlzLGEsYiwhMSk7cmV0dXJuIGIrNH07bS5wcm90b3R5cGUud3JpdGVJbnRMRT1mdW5jdGlvbihhLGIsZCxlKXthPSthO2J8PTA7ZXx8KGU9TWF0aC5wb3coMiw4KmQtMSksVih0aGlzLGEsYixkLGUtMSwtZSkpO2U9MDt2YXIgZj0xLGc9MDtmb3IodGhpc1tiXT1hJjI1NTsrK2U8ZCYmKGYqPTI1Nik7KTA+YSYmMD09PWcmJjAhPT10aGlzW2IrZS0xXSYmKGc9MSksdGhpc1tiK2VdPShhL2Y+PjApLWcmMjU1O3JldHVybiBiK2R9O20ucHJvdG90eXBlLndyaXRlSW50QkU9ZnVuY3Rpb24oYSxiLGQsZSl7YT0rYTtifD0wO2V8fChlPU1hdGgucG93KDIsOCpkLTEpLFYodGhpcyxhLGIsZCxlLTEsLWUpKTtlPWQtMTt2YXIgZj0KMSxnPTA7Zm9yKHRoaXNbYitlXT1hJjI1NTswPD0tLWUmJihmKj0yNTYpOykwPmEmJjA9PT1nJiYwIT09dGhpc1tiK2UrMV0mJihnPTEpLHRoaXNbYitlXT0oYS9mPj4wKS1nJjI1NTtyZXR1cm4gYitkfTttLnByb3RvdHlwZS53cml0ZUludDg9ZnVuY3Rpb24oYSxiLGQpe2E9K2E7Ynw9MDtkfHxWKHRoaXMsYSxiLDEsMTI3LC0xMjgpO20uVFlQRURfQVJSQVlfU1VQUE9SVHx8KGE9TWF0aC5mbG9vcihhKSk7MD5hJiYoYT0yNTUrYSsxKTt0aGlzW2JdPWEmMjU1O3JldHVybiBiKzF9O20ucHJvdG90eXBlLndyaXRlSW50MTZMRT1mdW5jdGlvbihhLGIsZCl7YT0rYTtifD0wO2R8fFYodGhpcyxhLGIsMiwzMjc2NywtMzI3NjgpO20uVFlQRURfQVJSQVlfU1VQUE9SVD8odGhpc1tiXT1hJjI1NSx0aGlzW2IrMV09YT4+PjgpOlliKHRoaXMsYSxiLCEwKTtyZXR1cm4gYisyfTttLnByb3RvdHlwZS53cml0ZUludDE2QkU9ZnVuY3Rpb24oYSxiLGQpe2E9K2E7Ynw9MDtkfHxWKHRoaXMsYSxiLAoyLDMyNzY3LC0zMjc2OCk7bS5UWVBFRF9BUlJBWV9TVVBQT1JUPyh0aGlzW2JdPWE+Pj44LHRoaXNbYisxXT1hJjI1NSk6WWIodGhpcyxhLGIsITEpO3JldHVybiBiKzJ9O20ucHJvdG90eXBlLndyaXRlSW50MzJMRT1mdW5jdGlvbihhLGIsZCl7YT0rYTtifD0wO2R8fFYodGhpcyxhLGIsNCwyMTQ3NDgzNjQ3LC0yMTQ3NDgzNjQ4KTttLlRZUEVEX0FSUkFZX1NVUFBPUlQ/KHRoaXNbYl09YSYyNTUsdGhpc1tiKzFdPWE+Pj44LHRoaXNbYisyXT1hPj4+MTYsdGhpc1tiKzNdPWE+Pj4yNCk6WmIodGhpcyxhLGIsITApO3JldHVybiBiKzR9O20ucHJvdG90eXBlLndyaXRlSW50MzJCRT1mdW5jdGlvbihhLGIsZCl7YT0rYTtifD0wO2R8fFYodGhpcyxhLGIsNCwyMTQ3NDgzNjQ3LC0yMTQ3NDgzNjQ4KTswPmEmJihhPTQyOTQ5NjcyOTUrYSsxKTttLlRZUEVEX0FSUkFZX1NVUFBPUlQ/KHRoaXNbYl09YT4+PjI0LHRoaXNbYisxXT1hPj4+MTYsdGhpc1tiKzJdPWE+Pj44LHRoaXNbYiszXT0KYSYyNTUpOlpiKHRoaXMsYSxiLCExKTtyZXR1cm4gYis0fTttLnByb3RvdHlwZS53cml0ZUZsb2F0TEU9ZnVuY3Rpb24oYSxiLGQpe2R8fCRiKHRoaXMsYSxiLDQpO1diKHRoaXMsYSxiLCEwLDIzLDQpO3JldHVybiBiKzR9O20ucHJvdG90eXBlLndyaXRlRmxvYXRCRT1mdW5jdGlvbihhLGIsZCl7ZHx8JGIodGhpcyxhLGIsNCk7V2IodGhpcyxhLGIsITEsMjMsNCk7cmV0dXJuIGIrNH07bS5wcm90b3R5cGUud3JpdGVEb3VibGVMRT1mdW5jdGlvbihhLGIsZCl7ZHx8JGIodGhpcyxhLGIsOCk7V2IodGhpcyxhLGIsITAsNTIsOCk7cmV0dXJuIGIrOH07bS5wcm90b3R5cGUud3JpdGVEb3VibGVCRT1mdW5jdGlvbihhLGIsZCl7ZHx8JGIodGhpcyxhLGIsOCk7V2IodGhpcyxhLGIsITEsNTIsOCk7cmV0dXJuIGIrOH07bS5wcm90b3R5cGUuY29weT1mdW5jdGlvbihhLGIsZCxlKXtkfHwoZD0wKTtlfHwwPT09ZXx8KGU9dGhpcy5sZW5ndGgpO2I+PWEubGVuZ3RoJiYoYj1hLmxlbmd0aCk7CmJ8fChiPTApOzA8ZSYmZTxkJiYoZT1kKTtpZihlPT09ZHx8MD09PWEubGVuZ3RofHwwPT09dGhpcy5sZW5ndGgpcmV0dXJuIDA7aWYoMD5iKXRocm93IG5ldyBSYW5nZUVycm9yKCJ0YXJnZXRTdGFydCBvdXQgb2YgYm91bmRzIik7aWYoMD5kfHxkPj10aGlzLmxlbmd0aCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigic291cmNlU3RhcnQgb3V0IG9mIGJvdW5kcyIpO2lmKDA+ZSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigic291cmNlRW5kIG91dCBvZiBib3VuZHMiKTtlPnRoaXMubGVuZ3RoJiYoZT10aGlzLmxlbmd0aCk7YS5sZW5ndGgtYjxlLWQmJihlPWEubGVuZ3RoLWIrZCk7dmFyIGY9ZS1kO2lmKHRoaXM9PT1hJiZkPGImJmI8ZSlmb3IoZT1mLTE7MDw9ZTstLWUpYVtlK2JdPXRoaXNbZStkXTtlbHNlIGlmKDFFMz5mfHwhbS5UWVBFRF9BUlJBWV9TVVBQT1JUKWZvcihlPTA7ZTxmOysrZSlhW2UrYl09dGhpc1tlK2RdO2Vsc2UgVWludDhBcnJheS5wcm90b3R5cGUuc2V0LmNhbGwoYSx0aGlzLnN1YmFycmF5KGQsCmQrZiksYik7cmV0dXJuIGZ9O20ucHJvdG90eXBlLmZpbGw9ZnVuY3Rpb24oYSxiLGQsZSl7aWYoInN0cmluZyI9PT10eXBlb2YgYSl7InN0cmluZyI9PT10eXBlb2YgYj8oZT1iLGI9MCxkPXRoaXMubGVuZ3RoKToic3RyaW5nIj09PXR5cGVvZiBkJiYoZT1kLGQ9dGhpcy5sZW5ndGgpO2lmKDE9PT1hLmxlbmd0aCl7dmFyIGY9YS5jaGFyQ29kZUF0KDApOzI1Nj5mJiYoYT1mKX1pZih2b2lkIDAhPT1lJiYic3RyaW5nIiE9PXR5cGVvZiBlKXRocm93IG5ldyBUeXBlRXJyb3IoImVuY29kaW5nIG11c3QgYmUgYSBzdHJpbmciKTtpZigic3RyaW5nIj09PXR5cGVvZiBlJiYhbS5pc0VuY29kaW5nKGUpKXRocm93IG5ldyBUeXBlRXJyb3IoIlVua25vd24gZW5jb2Rpbmc6ICIrZSk7fWVsc2UibnVtYmVyIj09PXR5cGVvZiBhJiYoYSY9MjU1KTtpZigwPmJ8fHRoaXMubGVuZ3RoPGJ8fHRoaXMubGVuZ3RoPGQpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIk91dCBvZiByYW5nZSBpbmRleCIpO2lmKGQ8PQpiKXJldHVybiB0aGlzO2I+Pj49MDtkPXZvaWQgMD09PWQ/dGhpcy5sZW5ndGg6ZD4+PjA7YXx8KGE9MCk7aWYoIm51bWJlciI9PT10eXBlb2YgYSlmb3IoZT1iO2U8ZDsrK2UpdGhpc1tlXT1hO2Vsc2UgZm9yKGE9ZmEoYSk/YTpYYigobmV3IG0oYSxlKSkudG9TdHJpbmcoKSksZj1hLmxlbmd0aCxlPTA7ZTxkLWI7KytlKXRoaXNbZStiXT1hW2UlZl07cmV0dXJuIHRoaXN9O3ZhciBJZz0vW14rXC8wLTlBLVphLXotX10vZyxmYz1PYmplY3QuZnJlZXplKHtfX3Byb3RvX186bnVsbCxJTlNQRUNUX01BWF9CWVRFUzo1MCxrTWF4TGVuZ3RoOmtoLEJ1ZmZlcjptLFNsb3dCdWZmZXI6ZnVuY3Rpb24oYSl7K2EhPWEmJihhPTApO3JldHVybiBtLmFsbG9jKCthKX0saXNCdWZmZXI6WWV9KSxHPW0sZ2M9InVuZGVmaW5lZCIhPT10eXBlb2YgZ2xvYmFsVGhpcz9nbG9iYWxUaGlzOiJ1bmRlZmluZWQiIT09dHlwZW9mIHdpbmRvdz93aW5kb3c6InVuZGVmaW5lZCIhPT10eXBlb2YgbmE/bmE6InVuZGVmaW5lZCIhPT0KdHlwZW9mIHNlbGY/c2VsZjp7fSxyYT0kZSx5YT1hZjsiZnVuY3Rpb24iPT09dHlwZW9mIEJiLnNldFRpbWVvdXQmJihyYT1zZXRUaW1lb3V0KTsiZnVuY3Rpb24iPT09dHlwZW9mIEJiLmNsZWFyVGltZW91dCYmKHlhPWNsZWFyVGltZW91dCk7dmFyIHNhPVtdLGFiPSExLE5hLGFjPS0xO2VmLnByb3RvdHlwZS5ydW49ZnVuY3Rpb24oKXt0aGlzLmZ1bi5hcHBseShudWxsLHRoaXMuYXJyYXkpfTt2YXIgamI9QmIucGVyZm9ybWFuY2V8fHt9LGxoPWpiLm5vd3x8amIubW96Tm93fHxqYi5tc05vd3x8amIub05vd3x8amIud2Via2l0Tm93fHxmdW5jdGlvbigpe3JldHVybihuZXcgRGF0ZSkuZ2V0VGltZSgpfSxtaD1uZXcgRGF0ZSxuaD17bmV4dFRpY2s6ZGYsdGl0bGU6ImJyb3dzZXIiLGJyb3dzZXI6ITAsZW52Ont9LGFyZ3Y6W10sdmVyc2lvbjoiIix2ZXJzaW9uczp7fSxvbjpPYSxhZGRMaXN0ZW5lcjpPYSxvbmNlOk9hLG9mZjpPYSxyZW1vdmVMaXN0ZW5lcjpPYSxyZW1vdmVBbGxMaXN0ZW5lcnM6T2EsCmVtaXQ6T2EsYmluZGluZzpmdW5jdGlvbigpe3Rocm93IEVycm9yKCJwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZCIpO30sY3dkOmZ1bmN0aW9uKCl7cmV0dXJuIi8ifSxjaGRpcjpmdW5jdGlvbigpe3Rocm93IEVycm9yKCJwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWQiKTt9LHVtYXNrOmZ1bmN0aW9uKCl7cmV0dXJuIDB9LGhydGltZTpmdW5jdGlvbihhKXt2YXIgYj0uMDAxKmxoLmNhbGwoamIpLGQ9TWF0aC5mbG9vcihiKTtiPU1hdGguZmxvb3IoYiUxKjFFOSk7YSYmKGQtPWFbMF0sYi09YVsxXSwwPmImJihkLS0sYis9MUU5KSk7cmV0dXJuW2QsYl19LHBsYXRmb3JtOiJicm93c2VyIixyZWxlYXNlOnt9LGNvbmZpZzp7fSx1cHRpbWU6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IERhdGUtbWgpLzFFM319LHRmPVdjKGZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gZChhLGIpe2Zvcih2YXIgZCBpbiBhKWJbZF09YVtkXX1mdW5jdGlvbiBlKGEsYixkKXtyZXR1cm4gZihhLApiLGQpfXZhciBmPWZjLkJ1ZmZlcjtmLmZyb20mJmYuYWxsb2MmJmYuYWxsb2NVbnNhZmUmJmYuYWxsb2NVbnNhZmVTbG93P2EuZXhwb3J0cz1mYzooZChmYyxiKSxiLkJ1ZmZlcj1lKTtlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGYucHJvdG90eXBlKTtkKGYsZSk7ZS5mcm9tPWZ1bmN0aW9uKGEsYixkKXtpZigibnVtYmVyIj09PXR5cGVvZiBhKXRocm93IG5ldyBUeXBlRXJyb3IoIkFyZ3VtZW50IG11c3Qgbm90IGJlIGEgbnVtYmVyIik7cmV0dXJuIGYoYSxiLGQpfTtlLmFsbG9jPWZ1bmN0aW9uKGEsYixkKXtpZigibnVtYmVyIiE9PXR5cGVvZiBhKXRocm93IG5ldyBUeXBlRXJyb3IoIkFyZ3VtZW50IG11c3QgYmUgYSBudW1iZXIiKTthPWYoYSk7dm9pZCAwIT09Yj8ic3RyaW5nIj09PXR5cGVvZiBkP2EuZmlsbChiLGQpOmEuZmlsbChiKTphLmZpbGwoMCk7cmV0dXJuIGF9O2UuYWxsb2NVbnNhZmU9ZnVuY3Rpb24oYSl7aWYoIm51bWJlciIhPT10eXBlb2YgYSl0aHJvdyBuZXcgVHlwZUVycm9yKCJBcmd1bWVudCBtdXN0IGJlIGEgbnVtYmVyIik7CnJldHVybiBmKGEpfTtlLmFsbG9jVW5zYWZlU2xvdz1mdW5jdGlvbihhKXtpZigibnVtYmVyIiE9PXR5cGVvZiBhKXRocm93IG5ldyBUeXBlRXJyb3IoIkFyZ3VtZW50IG11c3QgYmUgYSBudW1iZXIiKTtyZXR1cm4gZmMuU2xvd0J1ZmZlcihhKX19KSxvaD1XYyhmdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGQoKXt0aHJvdyBFcnJvcigic2VjdXJlIHJhbmRvbSBudW1iZXIgZ2VuZXJhdGlvbiBub3Qgc3VwcG9ydGVkIGJ5IHRoaXMgYnJvd3NlclxudXNlIGNocm9tZSwgRmlyZUZveCBvciBJbnRlcm5ldCBFeHBsb3JlciAxMSIpO31mdW5jdGlvbiBlKGEsYil7aWYoIm51bWJlciIhPT10eXBlb2YgYXx8YSE9PWEpdGhyb3cgbmV3IFR5cGVFcnJvcigib2Zmc2V0IG11c3QgYmUgYSBudW1iZXIiKTtpZihhPnJ8fDA+YSl0aHJvdyBuZXcgVHlwZUVycm9yKCJvZmZzZXQgbXVzdCBiZSBhIHVpbnQzMiIpO2lmKGE+bXx8YT5iKXRocm93IG5ldyBSYW5nZUVycm9yKCJvZmZzZXQgb3V0IG9mIHJhbmdlIik7Cn1mdW5jdGlvbiBmKGEsYixkKXtpZigibnVtYmVyIiE9PXR5cGVvZiBhfHxhIT09YSl0aHJvdyBuZXcgVHlwZUVycm9yKCJzaXplIG11c3QgYmUgYSBudW1iZXIiKTtpZihhPnJ8fDA+YSl0aHJvdyBuZXcgVHlwZUVycm9yKCJzaXplIG11c3QgYmUgYSB1aW50MzIiKTtpZihhK2I+ZHx8YT5tKXRocm93IG5ldyBSYW5nZUVycm9yKCJidWZmZXIgdG9vIHNtYWxsIik7fWZ1bmN0aW9uIGcoYSxiLGQsZyl7aWYoIShsLmlzQnVmZmVyKGEpfHxhIGluc3RhbmNlb2YgZ2MuVWludDhBcnJheSkpdGhyb3cgbmV3IFR5cGVFcnJvcignImJ1ZiIgYXJndW1lbnQgbXVzdCBiZSBhIEJ1ZmZlciBvciBVaW50OEFycmF5Jyk7aWYoImZ1bmN0aW9uIj09PXR5cGVvZiBiKWc9YixiPTAsZD1hLmxlbmd0aDtlbHNlIGlmKCJmdW5jdGlvbiI9PT10eXBlb2YgZClnPWQsZD1hLmxlbmd0aC1iO2Vsc2UgaWYoImZ1bmN0aW9uIiE9PXR5cGVvZiBnKXRocm93IG5ldyBUeXBlRXJyb3IoJyJjYiIgYXJndW1lbnQgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7CmUoYixhLmxlbmd0aCk7ZihkLGIsYS5sZW5ndGgpO3JldHVybiBoKGEsYixkLGcpfWZ1bmN0aW9uIGgoYSxiLGQsZSl7Yj1uZXcgVWludDhBcnJheShhLmJ1ZmZlcixiLGQpO24uZ2V0UmFuZG9tVmFsdWVzKGIpO2lmKGUpZGYoZnVuY3Rpb24oKXtlKG51bGwsYSl9KTtlbHNlIHJldHVybiBhfWZ1bmN0aW9uIGsoYSxiLGQpeyJ1bmRlZmluZWQiPT09dHlwZW9mIGImJihiPTApO2lmKCEobC5pc0J1ZmZlcihhKXx8YSBpbnN0YW5jZW9mIGdjLlVpbnQ4QXJyYXkpKXRocm93IG5ldyBUeXBlRXJyb3IoJyJidWYiIGFyZ3VtZW50IG11c3QgYmUgYSBCdWZmZXIgb3IgVWludDhBcnJheScpO2UoYixhLmxlbmd0aCk7dm9pZCAwPT09ZCYmKGQ9YS5sZW5ndGgtYik7ZihkLGIsYS5sZW5ndGgpO3JldHVybiBoKGEsYixkKX12YXIgbD10Zi5CdWZmZXIsbT10Zi5rTWF4TGVuZ3RoLG49Z2MuY3J5cHRvfHxnYy5tc0NyeXB0byxyPU1hdGgucG93KDIsMzIpLTE7biYmbi5nZXRSYW5kb21WYWx1ZXM/KGIucmFuZG9tRmlsbD0KZyxiLnJhbmRvbUZpbGxTeW5jPWspOihiLnJhbmRvbUZpbGw9ZCxiLnJhbmRvbUZpbGxTeW5jPWQpfSkscGg9V2MoZnVuY3Rpb24oYSl7YS5leHBvcnRzPW9ofSkucmFuZG9tRmlsbFN5bmMscWg9TWF0aC5mbG9vciguMDAxKihEYXRlLm5vdygpLXBlcmZvcm1hbmNlLm5vdygpKSksQ2I9e3Jlc29sdmU6ZnVuY3Rpb24oKXtmb3IodmFyIGE9IiIsYj0hMSxkLGU9YXJndW1lbnRzLmxlbmd0aC0xOy0xPD1lJiYhYjtlLS0pe2lmKDA8PWUpdmFyIGY9YXJndW1lbnRzW2VdO2Vsc2Ugdm9pZCAwPT09ZCYmKGQ9bmguY3dkKCkpLGY9ZDtoYShmKTswIT09Zi5sZW5ndGgmJihhPWYrIi8iK2EsYj00Nz09PWYuY2hhckNvZGVBdCgwKSl9YT1mZihhLCFiKTtyZXR1cm4gYj8wPGEubGVuZ3RoPyIvIithOiIvIjowPGEubGVuZ3RoP2E6Ii4ifSxub3JtYWxpemU6ZnVuY3Rpb24oYSl7aGEoYSk7aWYoMD09PWEubGVuZ3RoKXJldHVybiIuIjt2YXIgYj00Nz09PWEuY2hhckNvZGVBdCgwKSxkPTQ3PT09CmEuY2hhckNvZGVBdChhLmxlbmd0aC0xKTthPWZmKGEsIWIpOzAhPT1hLmxlbmd0aHx8Ynx8KGE9Ii4iKTswPGEubGVuZ3RoJiZkJiYoYSs9Ii8iKTtyZXR1cm4gYj8iLyIrYTphfSxpc0Fic29sdXRlOmZ1bmN0aW9uKGEpe2hhKGEpO3JldHVybiAwPGEubGVuZ3RoJiY0Nz09PWEuY2hhckNvZGVBdCgwKX0sam9pbjpmdW5jdGlvbigpe2lmKDA9PT1hcmd1bWVudHMubGVuZ3RoKXJldHVybiIuIjtmb3IodmFyIGEsYj0wO2I8YXJndW1lbnRzLmxlbmd0aDsrK2Ipe3ZhciBkPWFyZ3VtZW50c1tiXTtoYShkKTswPGQubGVuZ3RoJiYoYT12b2lkIDA9PT1hP2Q6YSsoIi8iK2QpKX1yZXR1cm4gdm9pZCAwPT09YT8iLiI6Q2Iubm9ybWFsaXplKGEpfSxyZWxhdGl2ZTpmdW5jdGlvbihhLGIpe2hhKGEpO2hhKGIpO2lmKGE9PT1iKXJldHVybiIiO2E9Q2IucmVzb2x2ZShhKTtiPUNiLnJlc29sdmUoYik7aWYoYT09PWIpcmV0dXJuIiI7Zm9yKHZhciBkPTE7ZDxhLmxlbmd0aCYmNDc9PT1hLmNoYXJDb2RlQXQoZCk7KytkKTsKZm9yKHZhciBlPWEubGVuZ3RoLGY9ZS1kLGc9MTtnPGIubGVuZ3RoJiY0Nz09PWIuY2hhckNvZGVBdChnKTsrK2cpO2Zvcih2YXIgaD1iLmxlbmd0aC1nLGs9ZjxoP2Y6aCxsPS0xLG09MDttPD1rOysrbSl7aWYobT09PWspe2lmKGg+ayl7aWYoNDc9PT1iLmNoYXJDb2RlQXQoZyttKSlyZXR1cm4gYi5zbGljZShnK20rMSk7aWYoMD09PW0pcmV0dXJuIGIuc2xpY2UoZyttKX1lbHNlIGY+ayYmKDQ3PT09YS5jaGFyQ29kZUF0KGQrbSk/bD1tOjA9PT1tJiYobD0wKSk7YnJlYWt9dmFyIG49YS5jaGFyQ29kZUF0KGQrbSkscj1iLmNoYXJDb2RlQXQoZyttKTtpZihuIT09cilicmVhaztlbHNlIDQ3PT09biYmKGw9bSl9Zj0iIjtmb3IobT1kK2wrMTttPD1lOysrbSlpZihtPT09ZXx8NDc9PT1hLmNoYXJDb2RlQXQobSkpZj0wPT09Zi5sZW5ndGg/ZisiLi4iOmYrIi8uLiI7aWYoMDxmLmxlbmd0aClyZXR1cm4gZitiLnNsaWNlKGcrbCk7Zys9bDs0Nz09PWIuY2hhckNvZGVBdChnKSYmKytnOwpyZXR1cm4gYi5zbGljZShnKX0sX21ha2VMb25nOmZ1bmN0aW9uKGEpe3JldHVybiBhfSxkaXJuYW1lOmZ1bmN0aW9uKGEpe2hhKGEpO2lmKDA9PT1hLmxlbmd0aClyZXR1cm4iLiI7Zm9yKHZhciBiPWEuY2hhckNvZGVBdCgwKSxkPTQ3PT09YixlPS0xLGY9ITAsZz1hLmxlbmd0aC0xOzE8PWc7LS1nKWlmKGI9YS5jaGFyQ29kZUF0KGcpLDQ3PT09Yil7aWYoIWYpe2U9ZzticmVha319ZWxzZSBmPSExO3JldHVybi0xPT09ZT9kPyIvIjoiLiI6ZCYmMT09PWU/Ii8vIjphLnNsaWNlKDAsZSl9LGJhc2VuYW1lOmZ1bmN0aW9uKGEsYil7aWYodm9pZCAwIT09YiYmInN0cmluZyIhPT10eXBlb2YgYil0aHJvdyBuZXcgVHlwZUVycm9yKCciZXh0IiBhcmd1bWVudCBtdXN0IGJlIGEgc3RyaW5nJyk7aGEoYSk7dmFyIGQ9MCxlPS0xLGY9ITAsZztpZih2b2lkIDAhPT1iJiYwPGIubGVuZ3RoJiZiLmxlbmd0aDw9YS5sZW5ndGgpe2lmKGIubGVuZ3RoPT09YS5sZW5ndGgmJmI9PT1hKXJldHVybiIiOwp2YXIgaD1iLmxlbmd0aC0xLGs9LTE7Zm9yKGc9YS5sZW5ndGgtMTswPD1nOy0tZyl7dmFyIGw9YS5jaGFyQ29kZUF0KGcpO2lmKDQ3PT09bCl7aWYoIWYpe2Q9ZysxO2JyZWFrfX1lbHNlLTE9PT1rJiYoZj0hMSxrPWcrMSksMDw9aCYmKGw9PT1iLmNoYXJDb2RlQXQoaCk/LTE9PT0tLWgmJihlPWcpOihoPS0xLGU9aykpfWQ9PT1lP2U9azotMT09PWUmJihlPWEubGVuZ3RoKTtyZXR1cm4gYS5zbGljZShkLGUpfWZvcihnPWEubGVuZ3RoLTE7MDw9ZzstLWcpaWYoNDc9PT1hLmNoYXJDb2RlQXQoZykpe2lmKCFmKXtkPWcrMTticmVha319ZWxzZS0xPT09ZSYmKGY9ITEsZT1nKzEpO3JldHVybi0xPT09ZT8iIjphLnNsaWNlKGQsZSl9LGV4dG5hbWU6ZnVuY3Rpb24oYSl7aGEoYSk7Zm9yKHZhciBiPS0xLGQ9MCxlPS0xLGY9ITAsZz0wLGg9YS5sZW5ndGgtMTswPD1oOy0taCl7dmFyIGs9YS5jaGFyQ29kZUF0KGgpO2lmKDQ3PT09ayl7aWYoIWYpe2Q9aCsxO2JyZWFrfX1lbHNlLTE9PT0KZSYmKGY9ITEsZT1oKzEpLDQ2PT09az8tMT09PWI/Yj1oOjEhPT1nJiYoZz0xKTotMSE9PWImJihnPS0xKX1yZXR1cm4tMT09PWJ8fC0xPT09ZXx8MD09PWd8fDE9PT1nJiZiPT09ZS0xJiZiPT09ZCsxPyIiOmEuc2xpY2UoYixlKX0sZm9ybWF0OmZ1bmN0aW9uKGEpe2lmKG51bGw9PT1hfHwib2JqZWN0IiE9PXR5cGVvZiBhKXRocm93IG5ldyBUeXBlRXJyb3IoJ1RoZSAicGF0aE9iamVjdCIgYXJndW1lbnQgbXVzdCBiZSBvZiB0eXBlIE9iamVjdC4gUmVjZWl2ZWQgdHlwZSAnK3R5cGVvZiBhKTt2YXIgYj1hLmRpcnx8YS5yb290LGQ9YS5iYXNlfHwoYS5uYW1lfHwiIikrKGEuZXh0fHwiIik7cmV0dXJuIGE9Yj9iPT09YS5yb290P2IrZDpiKyIvIitkOmR9LHBhcnNlOmZ1bmN0aW9uKGEpe2hhKGEpO3ZhciBiPXtyb290OiIiLGRpcjoiIixiYXNlOiIiLGV4dDoiIixuYW1lOiIifTtpZigwPT09YS5sZW5ndGgpcmV0dXJuIGI7dmFyIGQ9YS5jaGFyQ29kZUF0KDApLGU9NDc9PT1kO2lmKGUpe2Iucm9vdD0KIi8iO3ZhciBmPTF9ZWxzZSBmPTA7Zm9yKHZhciBnPS0xLGg9MCxrPS0xLGw9ITAsbT1hLmxlbmd0aC0xLG49MDttPj1mOy0tbSlpZihkPWEuY2hhckNvZGVBdChtKSw0Nz09PWQpe2lmKCFsKXtoPW0rMTticmVha319ZWxzZS0xPT09ayYmKGw9ITEsaz1tKzEpLDQ2PT09ZD8tMT09PWc/Zz1tOjEhPT1uJiYobj0xKTotMSE9PWcmJihuPS0xKTstMT09PWd8fC0xPT09a3x8MD09PW58fDE9PT1uJiZnPT09ay0xJiZnPT09aCsxPy0xIT09ayYmKGIuYmFzZT0wPT09aCYmZT9iLm5hbWU9YS5zbGljZSgxLGspOmIubmFtZT1hLnNsaWNlKGgsaykpOigwPT09aCYmZT8oYi5uYW1lPWEuc2xpY2UoMSxnKSxiLmJhc2U9YS5zbGljZSgxLGspKTooYi5uYW1lPWEuc2xpY2UoaCxnKSxiLmJhc2U9YS5zbGljZShoLGspKSxiLmV4dD1hLnNsaWNlKGcsaykpOzA8aD9iLmRpcj1hLnNsaWNlKDAsaC0xKTplJiYoYi5kaXI9Ii8iKTtyZXR1cm4gYn0sc2VwOiIvIixkZWxpbWl0ZXI6IjoiLHdpbjMyOm51bGwsCnBvc2l4Om51bGx9LHVmPUNiLnBvc2l4PUNiLHJoPU9iamVjdC5mcmVlemUoe19fcHJvdG9fXzpudWxsLCJkZWZhdWx0Ijp1ZixfX21vZHVsZUV4cG9ydHM6dWZ9KSx3Zj17aHJ0aW1lOmZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihiKXtiPWEoYik7cmV0dXJuIDFFOSpiWzBdK2JbMV19fShmdW5jdGlvbihhKXt2YXIgYj0uMDAxKnBlcmZvcm1hbmNlLm5vdygpLGQ9TWF0aC5mbG9vcihiKStxaDtiPU1hdGguZmxvb3IoYiUxKjFFOSk7YSYmKGQtPWFbMF0sYi09YVsxXSwwPmImJihkLS0sYis9MUU5KSk7cmV0dXJuW2QsYl19KSxleGl0OmZ1bmN0aW9uKGEpe3Rocm93IG5ldyB2ZihhKTt9LGtpbGw6ZnVuY3Rpb24oYSl7dGhyb3cgbmV3IHNoKGEpO30scmFuZG9tRmlsbFN5bmM6cGgsaXNUVFk6ZnVuY3Rpb24oKXtyZXR1cm4hMH0scGF0aDpyaCxmczpudWxsfSxDLFJhPW4oMSksQmE9bigyKSxrYj1uKDQpLGxiPW4oOCksQ2E9bigxNiksaGQ9bigzMiksRGE9big2NCksbWI9bigxMjgpLApoYz1uKDI1NiksaWQ9big1MTIpLGpkPW4oMTAyNCksa2Q9bigyMDQ4KSxsZD1uKDQwOTYpLGljPW4oODE5MiksamM9bigxNjM4NCksbWQ9bigzMjc2OCksbmQ9big2NTUzNiksb2Q9bigxMzEwNzIpLHBkPW4oMjYyMTQ0KSxxZD1uKDUyNDI4OCkscmQ9bigxMDQ4NTc2KSxFYT1uKDIwOTcxNTIpLGtjPW4oNDE5NDMwNCksbGM9big4Mzg4NjA4KSxzZD1uKDE2Nzc3MjE2KSx0ZD1uKDMzNTU0NDMyKSx1ZD1uKDY3MTA4ODY0KSxTYT1uKDEzNDIxNzcyOCkseGY9bigyNjg0MzU0NTYpLGNiPVJhfEJhfGtifGxifENhfGhkfERhfG1ifGhjfGlkfGpkfGtkfGxkfGljfGpjfG1kfG5kfG9kfHBkfHFkfHJkfEVhfGxjfGtjfHNkfHVkfHRkfFNhfHhmLGxmPVJhfEJhfGtifGxifENhfGhkfERhfG1ifGhjfEVhfGtjfGxjfFNhLFBnPW4oMCksWWM9bGJ8Q2F8bWJ8aWR8amR8a2R8bGR8aWN8amN8bWR8bmR8b2R8cGR8cWR8cmR8RWF8bGN8c2R8dWR8dGR8U2EsamY9WWN8bGYsa2Y9QmF8bGJ8RGF8RWF8ClNhfHhmLE5nPUJhfGxifERhfEVhfFNhLE9nPW4oMCksTWc9e0UyQklHOjEsRUFDQ0VTOjIsRUFERFJJTlVTRTozLEVBRERSTk9UQVZBSUw6NCxFQUZOT1NVUFBPUlQ6NSxFQUxSRUFEWTo3LEVBR0FJTjo2LEVCQURGOjgsRUJBRE1TRzo5LEVCVVNZOjEwLEVDQU5DRUxFRDoxMSxFQ0hJTEQ6MTIsRUNPTk5BQk9SVEVEOjEzLEVDT05OUkVGVVNFRDoxNCxFQ09OTlJFU0VUOjE1LEVERUFETE9DSzoxNixFREVTVEFERFJSRVE6MTcsRURPTToxOCxFRFFVT1Q6MTksRUVYSVNUOjIwLEVGQVVMVDoyMSxFRkJJRzoyMixFSE9TVERPV046MjMsRUhPU1RVTlJFQUNIOjIzLEVJRFJNOjI0LEVJTFNFUToyNSxFSU5QUk9HUkVTUzoyNixFSU5UUjoyNyxFSU5WQUw6MjgsRUlPOjI5LEVJU0NPTk46MzAsRUlTRElSOjMxLEVMT09QOjMyLEVNRklMRTozMyxFTUxJTks6MzQsRU1TR1NJWkU6MzUsRU1VTFRJSE9QOjM2LEVOQU1FVE9PTE9ORzozNyxFTkVURE9XTjozOCxFTkVUUkVTRVQ6MzksRU5FVFVOUkVBQ0g6NDAsCkVORklMRTo0MSxFTk9CVUZTOjQyLEVOT0RFVjo0MyxFTk9FTlQ6NDQsRU5PRVhFQzo0NSxFTk9MQ0s6NDYsRU5PTElOSzo0NyxFTk9NRU06NDgsRU5PTVNHOjQ5LEVOT1BST1RPT1BUOjUwLEVOT1NQQzo1MSxFTk9TWVM6NTIsRU5PVENPTk46NTMsRU5PVERJUjo1NCxFTk9URU1QVFk6NTUsRU5PVFJFQ09WRVJBQkxFOjU2LEVOT1RTT0NLOjU3LEVOT1RUWTo1OSxFTlhJTzo2MCxFT1ZFUkZMT1c6NjEsRU9XTkVSREVBRDo2MixFUEVSTTo2MyxFUElQRTo2NCxFUFJPVE86NjUsRVBST1RPTk9TVVBQT1JUOjY2LEVQUk9UT1RZUEU6NjcsRVJBTkdFOjY4LEVST0ZTOjY5LEVTUElQRTo3MCxFU1JDSDo3MSxFU1RBTEU6NzIsRVRJTUVET1VUOjczLEVUWFRCU1k6NzQsRVhERVY6NzV9LHlmPShDPXt9LENbNl09IlNJR0hVUCIsQ1s4XT0iU0lHSU5UIixDWzExXT0iU0lHUVVJVCIsQ1s3XT0iU0lHSUxMIixDWzE1XT0iU0lHVFJBUCIsQ1swXT0iU0lHQUJSVCIsQ1syXT0iU0lHQlVTIixDWzVdPQoiU0lHRlBFIixDWzldPSJTSUdLSUxMIixDWzIwXT0iU0lHVVNSMSIsQ1sxMl09IlNJR1NFR1YiLENbMjFdPSJTSUdVU1IyIixDWzEwXT0iU0lHUElQRSIsQ1sxXT0iU0lHQUxSTSIsQ1sxNF09IlNJR1RFUk0iLENbM109IlNJR0NITEQiLENbNF09IlNJR0NPTlQiLENbMTNdPSJTSUdTVE9QIixDWzE2XT0iU0lHVFNUUCIsQ1sxN109IlNJR1RUSU4iLENbMThdPSJTSUdUVE9VIixDWzE5XT0iU0lHVVJHIixDWzIzXT0iU0lHWENQVSIsQ1syNF09IlNJR1hGU1oiLENbMjJdPSJTSUdWVEFMUk0iLEMpLHRoPVJhfEJhfENhfG1ifEVhfFNhLHpmPVJhfERhfENhfG1ifEVhfFNhLFhjPWZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoZCl7dmFyIGU9YS5jYWxsKHRoaXMpfHx0aGlzO2UuZXJybm89ZDtPYmplY3Quc2V0UHJvdG90eXBlT2YoZSxiLnByb3RvdHlwZSk7cmV0dXJuIGV9UmMoYixhKTtyZXR1cm4gYn0oRXJyb3IpLHZmPWZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoZCl7dmFyIGU9YS5jYWxsKHRoaXMsCiJXQVNJIEV4aXQgZXJyb3I6ICIrZCl8fHRoaXM7ZS5jb2RlPWQ7T2JqZWN0LnNldFByb3RvdHlwZU9mKGUsYi5wcm90b3R5cGUpO3JldHVybiBlfVJjKGIsYSk7cmV0dXJuIGJ9KEVycm9yKSxzaD1mdW5jdGlvbihhKXtmdW5jdGlvbiBiKGQpe3ZhciBlPWEuY2FsbCh0aGlzLCJXQVNJIEtpbGwgc2lnbmFsOiAiK2QpfHx0aGlzO2Uuc2lnbmFsPWQ7T2JqZWN0LnNldFByb3RvdHlwZU9mKGUsYi5wcm90b3R5cGUpO3JldHVybiBlfVJjKGIsYSk7cmV0dXJuIGJ9KEVycm9yKSxBZj1mdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSl7ZnVuY3Rpb24gYihhKXtzd2l0Y2goYSl7Y2FzZSAxOnJldHVybiBBLmhydGltZSgpO2Nhc2UgMDpyZXR1cm4gUGEoRGF0ZS5ub3coKSk7Y2FzZSAyOmNhc2UgMzpyZXR1cm4gQS5ocnRpbWUoKS1JO2RlZmF1bHQ6cmV0dXJuIG51bGx9fWZ1bmN0aW9uIGUoYSxiKXthPWdmKGgsYSk7aWYoYiE9PW4oMCkmJihhLnJpZ2h0cy5iYXNlJmIpPT09bigwKSl0aHJvdyBuZXcgWGMoNjMpOwpyZXR1cm4gYX1mdW5jdGlvbiBmKGEsYil7aC5yZWZyZXNoTWVtb3J5KCk7cmV0dXJuIEFycmF5LmZyb20oe2xlbmd0aDpifSxmdW5jdGlvbihiLGQpe2Q9YSs4KmQ7Yj1oLnZpZXcuZ2V0VWludDMyKGQsITApO2Q9aC52aWV3LmdldFVpbnQzMihkKzQsITApO3JldHVybiBuZXcgVWludDhBcnJheShoLm1lbW9yeS5idWZmZXIsYixkKX0pfXZhciBnLGg9dGhpcyxrPXt9O2EmJmEucHJlb3BlbnM/az1hLnByZW9wZW5zOmEmJmEucHJlb3BlbkRpcmVjdG9yaWVzJiYoaz1hLnByZW9wZW5EaXJlY3Rvcmllcyk7dmFyIGw9e307YSYmYS5lbnYmJihsPWEuZW52KTt2YXIgbT1bXTthJiZhLmFyZ3MmJihtPWEuYXJncyk7dmFyIEE9d2Y7YSYmYS5iaW5kaW5ncyYmKEE9YS5iaW5kaW5ncyk7dGhpcy52aWV3PXRoaXMubWVtb3J5PXZvaWQgMDt0aGlzLmJpbmRpbmdzPUE7dGhpcy5GRF9NQVA9bmV3IE1hcChbWzAse3JlYWw6MCxmaWxldHlwZToyLHJpZ2h0czp7YmFzZTp0aCxpbmhlcml0aW5nOm4oMCl9LApwYXRoOnZvaWQgMH1dLFsxLHtyZWFsOjEsZmlsZXR5cGU6MixyaWdodHM6e2Jhc2U6emYsaW5oZXJpdGluZzpuKDApfSxwYXRoOnZvaWQgMH1dLFsyLHtyZWFsOjIsZmlsZXR5cGU6MixyaWdodHM6e2Jhc2U6emYsaW5oZXJpdGluZzpuKDApfSxwYXRoOnZvaWQgMH1dXSk7dmFyIHI9dGhpcy5iaW5kaW5ncy5mcyx1PXRoaXMuYmluZGluZ3MucGF0aDt0cnl7Zm9yKHZhciBwPVNiKE9iamVjdC5lbnRyaWVzKGspKSx4PXAubmV4dCgpOyF4LmRvbmU7eD1wLm5leHQoKSl7dmFyIHk9VGIoeC52YWx1ZSwyKSx6PXlbMF0sQz15WzFdLEQ9ci5vcGVuU3luYyhDLHIuY29uc3RhbnRzLk9fUkRPTkxZKSxFPVViKHRoaXMuRkRfTUFQLmtleXMoKSkucmV2ZXJzZSgpWzBdKzE7dGhpcy5GRF9NQVAuc2V0KEUse3JlYWw6RCxmaWxldHlwZTozLHJpZ2h0czp7YmFzZTpZYyxpbmhlcml0aW5nOmpmfSxmYWtlUGF0aDp6LHBhdGg6Q30pfX1jYXRjaCh3KXt2YXIgSD17ZXJyb3I6d319ZmluYWxseXt0cnl7eCYmCiF4LmRvbmUmJihnPXAucmV0dXJuKSYmZy5jYWxsKHApfWZpbmFsbHl7aWYoSCl0aHJvdyBILmVycm9yO319dmFyIEk9QS5ocnRpbWUoKTt0aGlzLndhc2lJbXBvcnQ9e2FyZ3NfZ2V0OmZ1bmN0aW9uKGEsYil7aC5yZWZyZXNoTWVtb3J5KCk7dmFyIGQ9YSxlPWI7bS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2gudmlldy5zZXRVaW50MzIoZCxlLCEwKTtkKz00O2UrPUcuZnJvbShoLm1lbW9yeS5idWZmZXIpLndyaXRlKGErIlx4MDAiLGUpfSk7cmV0dXJuIDB9LGFyZ3Nfc2l6ZXNfZ2V0OmZ1bmN0aW9uKGEsYil7aC5yZWZyZXNoTWVtb3J5KCk7aC52aWV3LnNldFVpbnQzMihhLG0ubGVuZ3RoLCEwKTthPW0ucmVkdWNlKGZ1bmN0aW9uKGEsYil7cmV0dXJuIGErRy5ieXRlTGVuZ3RoKGIpKzF9LDApO2gudmlldy5zZXRVaW50MzIoYixhLCEwKTtyZXR1cm4gMH0sZW52aXJvbl9nZXQ6ZnVuY3Rpb24oYSxiKXtoLnJlZnJlc2hNZW1vcnkoKTt2YXIgZD1hLGU9YjtPYmplY3QuZW50cmllcyhsKS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3ZhciBiPQpUYihhLDIpO2E9YlswXTtiPWJbMV07aC52aWV3LnNldFVpbnQzMihkLGUsITApO2QrPTQ7ZSs9Ry5mcm9tKGgubWVtb3J5LmJ1ZmZlcikud3JpdGUoYSsiPSIrYisiXHgwMCIsZSl9KTtyZXR1cm4gMH0sZW52aXJvbl9zaXplc19nZXQ6ZnVuY3Rpb24oYSxiKXtoLnJlZnJlc2hNZW1vcnkoKTt2YXIgZD1PYmplY3QuZW50cmllcyhsKS5tYXAoZnVuY3Rpb24oYSl7YT1UYihhLDIpO3JldHVybiBhWzBdKyI9IithWzFdKyJceDAwIn0pLGU9ZC5yZWR1Y2UoZnVuY3Rpb24oYSxiKXtyZXR1cm4gYStHLmJ5dGVMZW5ndGgoYil9LDApO2gudmlldy5zZXRVaW50MzIoYSxkLmxlbmd0aCwhMCk7aC52aWV3LnNldFVpbnQzMihiLGUsITApO3JldHVybiAwfSxjbG9ja19yZXNfZ2V0OmZ1bmN0aW9uKGEsYil7c3dpdGNoKGEpe2Nhc2UgMTpjYXNlIDI6Y2FzZSAzOnZhciBkPW4oMSk7YnJlYWs7Y2FzZSAwOmQ9bigxRTMpfWgudmlldy5zZXRCaWdVaW50NjQoYixkKTtyZXR1cm4gMH0sY2xvY2tfdGltZV9nZXQ6ZnVuY3Rpb24oYSwKZCxlKXtoLnJlZnJlc2hNZW1vcnkoKTthPWIoYSk7aWYobnVsbD09PWEpcmV0dXJuIDI4O2gudmlldy5zZXRCaWdVaW50NjQoZSxuKGEpLCEwKTtyZXR1cm4gMH0sZmRfYWR2aXNlOkIoZnVuY3Rpb24oYSl7ZShhLG1iKTtyZXR1cm4gNTJ9KSxmZF9hbGxvY2F0ZTpCKGZ1bmN0aW9uKGEpe2UoYSxoYyk7cmV0dXJuIDUyfSksZmRfY2xvc2U6QihmdW5jdGlvbihhKXt2YXIgYj1lKGEsbigwKSk7ci5jbG9zZVN5bmMoYi5yZWFsKTtoLkZEX01BUC5kZWxldGUoYSk7cmV0dXJuIDB9KSxmZF9kYXRhc3luYzpCKGZ1bmN0aW9uKGEpe2E9ZShhLFJhKTtyLmZkYXRhc3luY1N5bmMoYS5yZWFsKTtyZXR1cm4gMH0pLGZkX2Zkc3RhdF9nZXQ6QihmdW5jdGlvbihhLGIpe2E9ZShhLG4oMCkpO2gucmVmcmVzaE1lbW9yeSgpO2gudmlldy5zZXRVaW50OChiLGEuZmlsZXR5cGUpO2gudmlldy5zZXRVaW50MTYoYisyLDAsITApO2gudmlldy5zZXRVaW50MTYoYis0LDAsITApO2gudmlldy5zZXRCaWdVaW50NjQoYisKOCxuKGEucmlnaHRzLmJhc2UpLCEwKTtoLnZpZXcuc2V0QmlnVWludDY0KGIrOCs4LG4oYS5yaWdodHMuaW5oZXJpdGluZyksITApO3JldHVybiAwfSksZmRfZmRzdGF0X3NldF9mbGFnczpCKGZ1bmN0aW9uKGEpe2UoYSxsYik7cmV0dXJuIDUyfSksZmRfZmRzdGF0X3NldF9yaWdodHM6QihmdW5jdGlvbihhLGIsZCl7YT1lKGEsbigwKSk7aWYoKGEucmlnaHRzLmJhc2V8Yik+YS5yaWdodHMuYmFzZXx8KGEucmlnaHRzLmluaGVyaXRpbmd8ZCk+YS5yaWdodHMuaW5oZXJpdGluZylyZXR1cm4gNjM7YS5yaWdodHMuYmFzZT1iO2EucmlnaHRzLmluaGVyaXRpbmc9ZDtyZXR1cm4gMH0pLGZkX2ZpbGVzdGF0X2dldDpCKGZ1bmN0aW9uKGEsYil7YT1lKGEsRWEpO3ZhciBkPXIuZnN0YXRTeW5jKGEucmVhbCk7aC5yZWZyZXNoTWVtb3J5KCk7aC52aWV3LnNldEJpZ1VpbnQ2NChiLG4oZC5kZXYpLCEwKTtiKz04O2gudmlldy5zZXRCaWdVaW50NjQoYixuKGQuaW5vKSwhMCk7Yis9ODtoLnZpZXcuc2V0VWludDgoYiwKYS5maWxldHlwZSk7Yis9ODtoLnZpZXcuc2V0QmlnVWludDY0KGIsbihkLm5saW5rKSwhMCk7Yis9ODtoLnZpZXcuc2V0QmlnVWludDY0KGIsbihkLnNpemUpLCEwKTtiKz04O2gudmlldy5zZXRCaWdVaW50NjQoYixQYShkLmF0aW1lTXMpLCEwKTtiKz04O2gudmlldy5zZXRCaWdVaW50NjQoYixQYShkLm10aW1lTXMpLCEwKTtoLnZpZXcuc2V0QmlnVWludDY0KGIrOCxQYShkLmN0aW1lTXMpLCEwKTtyZXR1cm4gMH0pLGZkX2ZpbGVzdGF0X3NldF9zaXplOkIoZnVuY3Rpb24oYSxiKXthPWUoYSxrYyk7ci5mdHJ1bmNhdGVTeW5jKGEucmVhbCxOdW1iZXIoYikpO3JldHVybiAwfSksZmRfZmlsZXN0YXRfc2V0X3RpbWVzOkIoZnVuY3Rpb24oYSxkLGYsaCl7YT1lKGEsbGMpO3ZhciBnPXIuZnN0YXRTeW5jKGEucmVhbCksaz1nLmF0aW1lO2c9Zy5tdGltZTt2YXIgbD1iYihiKDApKTtpZigzPT09KGgmMyl8fDEyPT09KGgmMTIpKXJldHVybiAyODsxPT09KGgmMSk/az1iYihkKToyPT09CihoJjIpJiYoaz1sKTs0PT09KGgmNCk/Zz1iYihmKTo4PT09KGgmOCkmJihnPWwpO3IuZnV0aW1lc1N5bmMoYS5yZWFsLG5ldyBEYXRlKGspLG5ldyBEYXRlKGcpKTtyZXR1cm4gMH0pLGZkX3ByZXN0YXRfZ2V0OkIoZnVuY3Rpb24oYSxiKXthPWUoYSxuKDApKTtpZighYS5wYXRoKXJldHVybiAyODtoLnJlZnJlc2hNZW1vcnkoKTtoLnZpZXcuc2V0VWludDgoYiwwKTtoLnZpZXcuc2V0VWludDMyKGIrNCxHLmJ5dGVMZW5ndGgoYS5mYWtlUGF0aCksITApO3JldHVybiAwfSksZmRfcHJlc3RhdF9kaXJfbmFtZTpCKGZ1bmN0aW9uKGEsYixkKXthPWUoYSxuKDApKTtpZighYS5wYXRoKXJldHVybiAyODtoLnJlZnJlc2hNZW1vcnkoKTtHLmZyb20oaC5tZW1vcnkuYnVmZmVyKS53cml0ZShhLmZha2VQYXRoLGIsZCwidXRmOCIpO3JldHVybiAwfSksZmRfcHdyaXRlOkIoZnVuY3Rpb24oYSxiLGQsZyxrKXt2YXIgbD1lKGEsRGF8a2IpLG09MDtmKGIsZCkuZm9yRWFjaChmdW5jdGlvbihhKXtmb3IodmFyIGI9CjA7YjxhLmJ5dGVMZW5ndGg7KWIrPXIud3JpdGVTeW5jKGwucmVhbCxhLGIsYS5ieXRlTGVuZ3RoLWIsTnVtYmVyKGcpK20rYik7bSs9Yn0pO2gudmlldy5zZXRVaW50MzIoayxtLCEwKTtyZXR1cm4gMH0pLGZkX3dyaXRlOkIoZnVuY3Rpb24oYSxiLGQsZyl7dmFyIGs9ZShhLERhKSxsPTA7ZihiLGQpLmZvckVhY2goZnVuY3Rpb24oYSl7Zm9yKHZhciBiPTA7YjxhLmJ5dGVMZW5ndGg7KXt2YXIgZD1yLndyaXRlU3luYyhrLnJlYWwsYSxiLGEuYnl0ZUxlbmd0aC1iLGsub2Zmc2V0P051bWJlcihrLm9mZnNldCk6bnVsbCk7ay5vZmZzZXQmJihrLm9mZnNldCs9bihkKSk7Yis9ZH1sKz1ifSk7aC52aWV3LnNldFVpbnQzMihnLGwsITApO3JldHVybiAwfSksZmRfcHJlYWQ6QihmdW5jdGlvbihhLGIsZCxnLGspe3ZhciBsO2E9ZShhLEJhfGtiKTt2YXIgbT0wO3RyeXt2YXIgdz1TYihmKGIsZCkpLG49dy5uZXh0KCk7YTpmb3IoOyFuLmRvbmU7bj13Lm5leHQoKSl7dmFyIEY9bi52YWx1ZTsKZm9yKGI9MDtiPEYuYnl0ZUxlbmd0aDspe3ZhciBxPUYuYnl0ZUxlbmd0aC1iLHA9ci5yZWFkU3luYyhhLnJlYWwsRixiLEYuYnl0ZUxlbmd0aC1iLE51bWJlcihnKSttK2IpO2IrPXA7bSs9cDtpZigwPT09cHx8cDxxKWJyZWFrIGF9bSs9Yn19Y2F0Y2goTyl7dmFyIHQ9e2Vycm9yOk99fWZpbmFsbHl7dHJ5e24mJiFuLmRvbmUmJihsPXcucmV0dXJuKSYmbC5jYWxsKHcpfWZpbmFsbHl7aWYodCl0aHJvdyB0LmVycm9yO319aC52aWV3LnNldFVpbnQzMihrLG0sITApO3JldHVybiAwfSksZmRfcmVhZDpCKGZ1bmN0aW9uKGEsYixkLGcpe3ZhciBrO2E9ZShhLEJhKTt2YXIgbD0wPT09YS5yZWFsLG09MDt0cnl7dmFyIHc9U2IoZihiLGQpKSxGPXcubmV4dCgpO2E6Zm9yKDshRi5kb25lO0Y9dy5uZXh0KCkpe3ZhciBwPUYudmFsdWU7Zm9yKGI9MDtiPHAuYnl0ZUxlbmd0aDspe3ZhciBxPXAuYnl0ZUxlbmd0aC1iLHQ9ci5yZWFkU3luYyhhLnJlYWwscCxiLHEsbHx8dm9pZCAwPT09YS5vZmZzZXQ/Cm51bGw6TnVtYmVyKGEub2Zmc2V0KSk7bHx8KGEub2Zmc2V0PShhLm9mZnNldD9hLm9mZnNldDpuKDApKStuKHQpKTtiKz10O20rPXQ7aWYoMD09PXR8fHQ8cSlicmVhayBhfX19Y2F0Y2goTyl7dmFyIGJjPXtlcnJvcjpPfX1maW5hbGx5e3RyeXtGJiYhRi5kb25lJiYoaz13LnJldHVybikmJmsuY2FsbCh3KX1maW5hbGx5e2lmKGJjKXRocm93IGJjLmVycm9yO319aC52aWV3LnNldFVpbnQzMihnLG0sITApO3JldHVybiAwfSksZmRfcmVhZGRpcjpCKGZ1bmN0aW9uKGEsYixkLGYsZyl7YT1lKGEsamMpO2gucmVmcmVzaE1lbW9yeSgpO3ZhciBrPXIucmVhZGRpclN5bmMoYS5wYXRoLHt3aXRoRmlsZVR5cGVzOiEwfSksbD1iO2ZvcihmPU51bWJlcihmKTtmPGsubGVuZ3RoO2YrPTEpe3ZhciBtPWtbZl0sdz1HLmJ5dGVMZW5ndGgobS5uYW1lKTtpZihiLWw+ZClicmVhaztoLnZpZXcuc2V0QmlnVWludDY0KGIsbihmKzEpLCEwKTtiKz04O2lmKGItbD5kKWJyZWFrO3ZhciBwPXIuc3RhdFN5bmModS5yZXNvbHZlKGEucGF0aCwKbS5uYW1lKSk7aC52aWV3LnNldEJpZ1VpbnQ2NChiLG4ocC5pbm8pLCEwKTtiKz04O2lmKGItbD5kKWJyZWFrO2gudmlldy5zZXRVaW50MzIoYix3LCEwKTtiKz00O2lmKGItbD5kKWJyZWFrO3N3aXRjaCghMCl7Y2FzZSBwLmlzQmxvY2tEZXZpY2UoKTpwPTE7YnJlYWs7Y2FzZSBwLmlzQ2hhcmFjdGVyRGV2aWNlKCk6cD0yO2JyZWFrO2Nhc2UgcC5pc0RpcmVjdG9yeSgpOnA9MzticmVhaztjYXNlIHAuaXNGSUZPKCk6cD02O2JyZWFrO2Nhc2UgcC5pc0ZpbGUoKTpwPTQ7YnJlYWs7Y2FzZSBwLmlzU29ja2V0KCk6cD02O2JyZWFrO2Nhc2UgcC5pc1N5bWJvbGljTGluaygpOnA9NzticmVhaztkZWZhdWx0OnA9MH1oLnZpZXcuc2V0VWludDgoYixwKTtiKz0xO2IrPTM7aWYoYit3Pj1sK2QpYnJlYWs7Ry5mcm9tKGgubWVtb3J5LmJ1ZmZlcikud3JpdGUobS5uYW1lLGIpO2IrPXd9aC52aWV3LnNldFVpbnQzMihnLE1hdGgubWluKGItbCxkKSwhMCk7cmV0dXJuIDB9KSxmZF9yZW51bWJlcjpCKGZ1bmN0aW9uKGEsCmIpe2UoYSxuKDApKTtlKGIsbigwKSk7ci5jbG9zZVN5bmMoaC5GRF9NQVAuZ2V0KGEpLnJlYWwpO2guRkRfTUFQLnNldChhLGguRkRfTUFQLmdldChiKSk7aC5GRF9NQVAuZGVsZXRlKGIpO3JldHVybiAwfSksZmRfc2VlazpCKGZ1bmN0aW9uKGEsYixkLGYpe2E9ZShhLGtiKTtoLnJlZnJlc2hNZW1vcnkoKTtzd2l0Y2goZCl7Y2FzZSAxOmEub2Zmc2V0PShhLm9mZnNldD9hLm9mZnNldDpuKDApKStuKGIpO2JyZWFrO2Nhc2UgMjpkPXIuZnN0YXRTeW5jKGEucmVhbCkuc2l6ZTthLm9mZnNldD1uKGQpK24oYik7YnJlYWs7Y2FzZSAwOmEub2Zmc2V0PW4oYil9aC52aWV3LnNldEJpZ1VpbnQ2NChmLGEub2Zmc2V0LCEwKTtyZXR1cm4gMH0pLGZkX3RlbGw6QihmdW5jdGlvbihhLGIpe2E9ZShhLGhkKTtoLnJlZnJlc2hNZW1vcnkoKTthLm9mZnNldHx8KGEub2Zmc2V0PW4oMCkpO2gudmlldy5zZXRCaWdVaW50NjQoYixhLm9mZnNldCwhMCk7cmV0dXJuIDB9KSxmZF9zeW5jOkIoZnVuY3Rpb24oYSl7YT0KZShhLENhKTtyLmZzeW5jU3luYyhhLnJlYWwpO3JldHVybiAwfSkscGF0aF9jcmVhdGVfZGlyZWN0b3J5OkIoZnVuY3Rpb24oYSxiLGQpe2E9ZShhLGlkKTtpZighYS5wYXRoKXJldHVybiAyODtoLnJlZnJlc2hNZW1vcnkoKTtiPUcuZnJvbShoLm1lbW9yeS5idWZmZXIsYixkKS50b1N0cmluZygpO3IubWtkaXJTeW5jKHUucmVzb2x2ZShhLnBhdGgsYikpO3JldHVybiAwfSkscGF0aF9maWxlc3RhdF9nZXQ6QihmdW5jdGlvbihhLGIsZCxmLGcpe2E9ZShhLHBkKTtpZighYS5wYXRoKXJldHVybiAyODtoLnJlZnJlc2hNZW1vcnkoKTtkPUcuZnJvbShoLm1lbW9yeS5idWZmZXIsZCxmKS50b1N0cmluZygpO2Q9ci5zdGF0U3luYyh1LnJlc29sdmUoYS5wYXRoLGQpKTtoLnZpZXcuc2V0QmlnVWludDY0KGcsbihkLmRldiksITApO2crPTg7aC52aWV3LnNldEJpZ1VpbnQ2NChnLG4oZC5pbm8pLCEwKTtnKz04O2gudmlldy5zZXRVaW50OChnLGhmKGgsdm9pZCAwLGQpLmZpbGV0eXBlKTtnKz0KODtoLnZpZXcuc2V0QmlnVWludDY0KGcsbihkLm5saW5rKSwhMCk7Zys9ODtoLnZpZXcuc2V0QmlnVWludDY0KGcsbihkLnNpemUpLCEwKTtnKz04O2gudmlldy5zZXRCaWdVaW50NjQoZyxQYShkLmF0aW1lTXMpLCEwKTtnKz04O2gudmlldy5zZXRCaWdVaW50NjQoZyxQYShkLm10aW1lTXMpLCEwKTtoLnZpZXcuc2V0QmlnVWludDY0KGcrOCxQYShkLmN0aW1lTXMpLCEwKTtyZXR1cm4gMH0pLHBhdGhfZmlsZXN0YXRfc2V0X3RpbWVzOkIoZnVuY3Rpb24oYSxkLGYsZyxrLGwsbSl7YT1lKGEscmQpO2lmKCFhLnBhdGgpcmV0dXJuIDI4O2gucmVmcmVzaE1lbW9yeSgpO3ZhciBuPXIuZnN0YXRTeW5jKGEucmVhbCk7ZD1uLmF0aW1lO249bi5tdGltZTt2YXIgcD1iYihiKDApKTtpZigzPT09KG0mMyl8fDEyPT09KG0mMTIpKXJldHVybiAyODsxPT09KG0mMSk/ZD1iYihrKToyPT09KG0mMikmJihkPXApOzQ9PT0obSY0KT9uPWJiKGwpOjg9PT0obSY4KSYmKG49cCk7Zj1HLmZyb20oaC5tZW1vcnkuYnVmZmVyLApmLGcpLnRvU3RyaW5nKCk7ci51dGltZXNTeW5jKHUucmVzb2x2ZShhLnBhdGgsZiksbmV3IERhdGUoZCksbmV3IERhdGUobikpO3JldHVybiAwfSkscGF0aF9saW5rOkIoZnVuY3Rpb24oYSxiLGQsZixnLGssbCl7YT1lKGEsa2QpO2c9ZShnLGxkKTtpZighYS5wYXRofHwhZy5wYXRoKXJldHVybiAyODtoLnJlZnJlc2hNZW1vcnkoKTtkPUcuZnJvbShoLm1lbW9yeS5idWZmZXIsZCxmKS50b1N0cmluZygpO2s9Ry5mcm9tKGgubWVtb3J5LmJ1ZmZlcixrLGwpLnRvU3RyaW5nKCk7ci5saW5rU3luYyh1LnJlc29sdmUoYS5wYXRoLGQpLHUucmVzb2x2ZShnLnBhdGgsaykpO3JldHVybiAwfSkscGF0aF9vcGVuOkIoZnVuY3Rpb24oYSxiLGQsZixnLGssbCxtLHApe2I9ZShhLGljKTtrPW4oayk7bD1uKGwpO2E9KGsmKEJhfGpjKSkhPT1uKDApO3ZhciBxPShrJihSYXxEYXxoY3xrYykpIT09bigwKTtpZihxJiZhKXZhciB3PXIuY29uc3RhbnRzLk9fUkRXUjtlbHNlIGE/dz1yLmNvbnN0YW50cy5PX1JET05MWToKcSYmKHc9ci5jb25zdGFudHMuT19XUk9OTFkpO2E9a3xpYztrfD1sOzAhPT0oZyYxKSYmKHd8PXIuY29uc3RhbnRzLk9fQ1JFQVQsYXw9amQpOzAhPT0oZyYyKSYmKHd8PXIuY29uc3RhbnRzLk9fRElSRUNUT1JZKTswIT09KGcmNCkmJih3fD1yLmNvbnN0YW50cy5PX0VYQ0wpOzAhPT0oZyY4KSYmKHd8PXIuY29uc3RhbnRzLk9fVFJVTkMsYXw9cWQpOzAhPT0obSYxKSYmKHd8PXIuY29uc3RhbnRzLk9fQVBQRU5EKTswIT09KG0mMikmJih3PXIuY29uc3RhbnRzLk9fRFNZTkM/d3xyLmNvbnN0YW50cy5PX0RTWU5DOnd8ci5jb25zdGFudHMuT19TWU5DLGt8PVJhKTswIT09KG0mNCkmJih3fD1yLmNvbnN0YW50cy5PX05PTkJMT0NLKTswIT09KG0mOCkmJih3PXIuY29uc3RhbnRzLk9fUlNZTkM/d3xyLmNvbnN0YW50cy5PX1JTWU5DOnd8ci5jb25zdGFudHMuT19TWU5DLGt8PUNhKTswIT09KG0mMTYpJiYod3w9ci5jb25zdGFudHMuT19TWU5DLGt8PUNhKTtxJiYwPT09KHcmKHIuY29uc3RhbnRzLk9fQVBQRU5EfApyLmNvbnN0YW50cy5PX1RSVU5DKSkmJihrfD1rYik7aC5yZWZyZXNoTWVtb3J5KCk7ZD1HLmZyb20oaC5tZW1vcnkuYnVmZmVyLGQsZikudG9TdHJpbmcoKTtkPXUucmVzb2x2ZShiLnBhdGgsZCk7aWYodS5yZWxhdGl2ZShiLnBhdGgsZCkuc3RhcnRzV2l0aCgiLi4iKSlyZXR1cm4gNzY7dHJ5e3ZhciB0PXIucmVhbHBhdGhTeW5jKGQpO2lmKHUucmVsYXRpdmUoYi5wYXRoLHQpLnN0YXJ0c1dpdGgoIi4uIikpcmV0dXJuIDc2fWNhdGNoKE8pe2lmKCJFTk9FTlQiPT09Ty5jb2RlKXQ9ZDtlbHNlIHRocm93IE87fXRyeXt2YXIgRj1yLnN0YXRTeW5jKHQpLmlzRGlyZWN0b3J5KCl9Y2F0Y2goTyl7fXc9IXEmJkY/ci5vcGVuU3luYyh0LHIuY29uc3RhbnRzLk9fUkRPTkxZKTpyLm9wZW5TeW5jKHQsdyk7Rj1VYihoLkZEX01BUC5rZXlzKCkpLnJldmVyc2UoKVswXSsxO2guRkRfTUFQLnNldChGLHtyZWFsOncsZmlsZXR5cGU6dm9pZCAwLHJpZ2h0czp7YmFzZTphLGluaGVyaXRpbmc6a30sCnBhdGg6dH0pO2dmKGgsRik7aC52aWV3LnNldFVpbnQzMihwLEYsITApO3JldHVybiAwfSkscGF0aF9yZWFkbGluazpCKGZ1bmN0aW9uKGEsYixkLGYsZyxrKXthPWUoYSxtZCk7aWYoIWEucGF0aClyZXR1cm4gMjg7aC5yZWZyZXNoTWVtb3J5KCk7Yj1HLmZyb20oaC5tZW1vcnkuYnVmZmVyLGIsZCkudG9TdHJpbmcoKTtiPXUucmVzb2x2ZShhLnBhdGgsYik7Yj1yLnJlYWRsaW5rU3luYyhiKTtmPUcuZnJvbShoLm1lbW9yeS5idWZmZXIpLndyaXRlKGIsZixnKTtoLnZpZXcuc2V0VWludDMyKGssZiwhMCk7cmV0dXJuIDB9KSxwYXRoX3JlbW92ZV9kaXJlY3Rvcnk6QihmdW5jdGlvbihhLGIsZCl7YT1lKGEsdGQpO2lmKCFhLnBhdGgpcmV0dXJuIDI4O2gucmVmcmVzaE1lbW9yeSgpO2I9Ry5mcm9tKGgubWVtb3J5LmJ1ZmZlcixiLGQpLnRvU3RyaW5nKCk7ci5ybWRpclN5bmModS5yZXNvbHZlKGEucGF0aCxiKSk7cmV0dXJuIDB9KSxwYXRoX3JlbmFtZTpCKGZ1bmN0aW9uKGEsYixkLApmLGcsayl7YT1lKGEsbmQpO2Y9ZShmLG9kKTtpZighYS5wYXRofHwhZi5wYXRoKXJldHVybiAyODtoLnJlZnJlc2hNZW1vcnkoKTtiPUcuZnJvbShoLm1lbW9yeS5idWZmZXIsYixkKS50b1N0cmluZygpO2c9Ry5mcm9tKGgubWVtb3J5LmJ1ZmZlcixnLGspLnRvU3RyaW5nKCk7ci5yZW5hbWVTeW5jKHUucmVzb2x2ZShhLnBhdGgsYiksdS5yZXNvbHZlKGYucGF0aCxnKSk7cmV0dXJuIDB9KSxwYXRoX3N5bWxpbms6QihmdW5jdGlvbihhLGIsZCxmLGcpe2Q9ZShkLHNkKTtpZighZC5wYXRoKXJldHVybiAyODtoLnJlZnJlc2hNZW1vcnkoKTthPUcuZnJvbShoLm1lbW9yeS5idWZmZXIsYSxiKS50b1N0cmluZygpO2Y9Ry5mcm9tKGgubWVtb3J5LmJ1ZmZlcixmLGcpLnRvU3RyaW5nKCk7ci5zeW1saW5rU3luYyhhLHUucmVzb2x2ZShkLnBhdGgsZikpO3JldHVybiAwfSkscGF0aF91bmxpbmtfZmlsZTpCKGZ1bmN0aW9uKGEsYixkKXthPWUoYSx1ZCk7aWYoIWEucGF0aClyZXR1cm4gMjg7CmgucmVmcmVzaE1lbW9yeSgpO2I9Ry5mcm9tKGgubWVtb3J5LmJ1ZmZlcixiLGQpLnRvU3RyaW5nKCk7ci51bmxpbmtTeW5jKHUucmVzb2x2ZShhLnBhdGgsYikpO3JldHVybiAwfSkscG9sbF9vbmVvZmY6ZnVuY3Rpb24oYSxkLGUsZil7dmFyIGc9MCxrPTA7aC5yZWZyZXNoTWVtb3J5KCk7Zm9yKHZhciBsPTA7bDxlO2wrPTEpe3ZhciBtPWgudmlldy5nZXRCaWdVaW50NjQoYSwhMCk7YSs9ODt2YXIgcD1oLnZpZXcuZ2V0VWludDgoYSk7YSs9MTtzd2l0Y2gocCl7Y2FzZSAwOmErPTc7aC52aWV3LmdldEJpZ1VpbnQ2NChhLCEwKTthKz04O3ZhciBxPWgudmlldy5nZXRVaW50MzIoYSwhMCk7YSs9NDthKz00O3A9aC52aWV3LmdldEJpZ1VpbnQ2NChhLCEwKTthKz04O2gudmlldy5nZXRCaWdVaW50NjQoYSwhMCk7YSs9ODt2YXIgcj1oLnZpZXcuZ2V0VWludDE2KGEsITApO2ErPTI7YSs9Njt2YXIgdD0xPT09cjtyPTA7cT1uKGIocSkpO251bGw9PT1xP3I9Mjg6KHA9dD9wOnErcCxrPQpwPms/cDprKTtoLnZpZXcuc2V0QmlnVWludDY0KGQsbSwhMCk7ZCs9ODtoLnZpZXcuc2V0VWludDE2KGQsciwhMCk7ZCs9MjtoLnZpZXcuc2V0VWludDgoZCwwKTtkKz0xO2QrPTU7Zys9MTticmVhaztjYXNlIDE6Y2FzZSAyOmErPTM7aC52aWV3LmdldFVpbnQzMihhLCEwKTthKz00O2gudmlldy5zZXRCaWdVaW50NjQoZCxtLCEwKTtkKz04O2gudmlldy5zZXRVaW50MTYoZCw1MiwhMCk7ZCs9MjtoLnZpZXcuc2V0VWludDgoZCxwKTtkKz0xO2QrPTU7Zys9MTticmVhaztkZWZhdWx0OnJldHVybiAyOH19Zm9yKGgudmlldy5zZXRVaW50MzIoZixnLCEwKTtBLmhydGltZSgpPGs7KTtyZXR1cm4gMH0scHJvY19leGl0OmZ1bmN0aW9uKGEpe0EuZXhpdChhKTtyZXR1cm4gMH0scHJvY19yYWlzZTpmdW5jdGlvbihhKXtpZighKGEgaW4geWYpKXJldHVybiAyODtBLmtpbGwoeWZbYV0pO3JldHVybiAwfSxyYW5kb21fZ2V0OmZ1bmN0aW9uKGEsYil7aC5yZWZyZXNoTWVtb3J5KCk7QS5yYW5kb21GaWxsU3luYyhuZXcgVWludDhBcnJheShoLm1lbW9yeS5idWZmZXIpLAphLGIpO3JldHVybiAwfSxzY2hlZF95aWVsZDpmdW5jdGlvbigpe3JldHVybiAwfSxzb2NrX3JlY3Y6ZnVuY3Rpb24oKXtyZXR1cm4gNTJ9LHNvY2tfc2VuZDpmdW5jdGlvbigpe3JldHVybiA1Mn0sc29ja19zaHV0ZG93bjpmdW5jdGlvbigpe3JldHVybiA1Mn19O2EudHJhY2VTeXNjYWxscyYmT2JqZWN0LmtleXModGhpcy53YXNpSW1wb3J0KS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3ZhciBiPWgud2FzaUltcG9ydFthXTtoLndhc2lJbXBvcnRbYV09ZnVuY3Rpb24oKXtmb3IodmFyIGQ9W10sZT0wO2U8YXJndW1lbnRzLmxlbmd0aDtlKyspZFtlXT1hcmd1bWVudHNbZV07Y29uc29sZS5sb2coIldBU0k6IHdhc2lJbXBvcnQgY2FsbGVkOiAiK2ErIiAoIitkKyIpIik7dHJ5e3ZhciBmPWIuYXBwbHkodm9pZCAwLFViKGQpKTtjb25zb2xlLmxvZygiV0FTSTogID0+ICIrZik7cmV0dXJuIGZ9Y2F0Y2goWil7dGhyb3cgY29uc29sZS5sb2coIkNhdGNoZWQgZXJyb3I6ICIrWiksWjt9fX0pfWEucHJvdG90eXBlLnJlZnJlc2hNZW1vcnk9CmZ1bmN0aW9uKCl7dGhpcy52aWV3JiYwIT09dGhpcy52aWV3LmJ1ZmZlci5ieXRlTGVuZ3RofHwodGhpcy52aWV3PW5ldyBlYyh0aGlzLm1lbW9yeS5idWZmZXIpKX07YS5wcm90b3R5cGUuc2V0TWVtb3J5PWZ1bmN0aW9uKGEpe3RoaXMubWVtb3J5PWF9O2EucHJvdG90eXBlLnN0YXJ0PWZ1bmN0aW9uKGEpe2E9YS5leHBvcnRzO2lmKG51bGw9PT1hfHwib2JqZWN0IiE9PXR5cGVvZiBhKXRocm93IEVycm9yKCJpbnN0YW5jZS5leHBvcnRzIG11c3QgYmUgYW4gT2JqZWN0LiBSZWNlaXZlZCAiK2ErIi4iKTt2YXIgYj1hLm1lbW9yeTtpZighKGIgaW5zdGFuY2VvZiBXZWJBc3NlbWJseS5NZW1vcnkpKXRocm93IEVycm9yKCJpbnN0YW5jZS5leHBvcnRzLm1lbW9yeSBtdXN0IGJlIGEgV2ViQXNzZW1ibHkuTWVtb3J5LiBSZWNjZWl2ZWQgIitiKyIuIik7dGhpcy5zZXRNZW1vcnkoYik7YS5fc3RhcnQmJmEuX3N0YXJ0KCl9O2EucHJvdG90eXBlLmdldEltcG9ydE5hbWVzcGFjZT1mdW5jdGlvbihhKXt2YXIgYiwKZT1udWxsO3RyeXtmb3IodmFyIGY9U2IoV2ViQXNzZW1ibHkuTW9kdWxlLmltcG9ydHMoYSkpLGc9Zi5uZXh0KCk7IWcuZG9uZTtnPWYubmV4dCgpKXt2YXIgaD1nLnZhbHVlO2lmKCJmdW5jdGlvbiI9PT1oLmtpbmQmJmgubW9kdWxlLnN0YXJ0c1dpdGgoIndhc2lfIikpaWYoIWUpZT1oLm1vZHVsZTtlbHNlIGlmKGUhPT1oLm1vZHVsZSl0aHJvdyBFcnJvcigiTXVsdGlwbGUgbmFtZXNwYWNlcyBkZXRlY3RlZC4iKTt9fWNhdGNoKHQpe3ZhciBrPXtlcnJvcjp0fX1maW5hbGx5e3RyeXtnJiYhZy5kb25lJiYoYj1mLnJldHVybikmJmIuY2FsbChmKX1maW5hbGx5e2lmKGspdGhyb3cgay5lcnJvcjt9fXJldHVybiBlfTthLnByb3RvdHlwZS5nZXRJbXBvcnRzPWZ1bmN0aW9uKGEpe3N3aXRjaCh0aGlzLmdldEltcG9ydE5hbWVzcGFjZShhKSl7Y2FzZSAid2FzaV91bnN0YWJsZSI6cmV0dXJue3dhc2lfdW5zdGFibGU6dGhpcy53YXNpSW1wb3J0fTtjYXNlICJ3YXNpX3NuYXBzaG90X3ByZXZpZXcxIjpyZXR1cm57d2FzaV9zbmFwc2hvdF9wcmV2aWV3MTp0aGlzLndhc2lJbXBvcnR9OwpkZWZhdWx0OnRocm93IEVycm9yKCJDYW4ndCBkZXRlY3QgYSBXQVNJIG5hbWVzcGFjZSBmb3IgdGhlIFdlYkFzc2VtYmx5IE1vZHVsZSIpO319O2EuZGVmYXVsdEJpbmRpbmdzPXdmO3JldHVybiBhfSgpLEJmPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhKXt0aGlzLm9wdGlvbnM9YX1hLnByb3RvdHlwZS5ydW49ZnVuY3Rpb24oYSl7cmV0dXJuIEViKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbigpe3JldHVybiBGYih0aGlzLGZ1bmN0aW9uKGEpe3Rocm93IEVycm9yKCJydW4gbm90IGltcGxlbWVudGVkIGJ5IHRoZSBDb21tYW5kIHN1YmNsYXNzIik7fSl9KX07cmV0dXJuIGF9KCksdWg9ZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihiKXt2YXIgZD1hLmNhbGwodGhpcyxiKXx8dGhpcztpZighYi5tb2R1bGUpdGhyb3cgRXJyb3IoIkRpZCBub3QgZmluZCBhIFdlYkFzc2VtYmx5Lk1vZHVsZSBmb3IgdGhlIFdBU0kgQ29tbWFuZCIpO3JldHVybiBkfXpkKGIsYSk7Yi5wcm90b3R5cGUucnVuPQpmdW5jdGlvbihhKXtyZXR1cm4gRWIodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKCl7dmFyIGIsZCxnLGg7cmV0dXJuIEZiKHRoaXMsZnVuY3Rpb24oZSl7c3dpdGNoKGUubGFiZWwpe2Nhc2UgMDpyZXR1cm4gYj17cHJlb3BlbnM6ZGIoeyIuIjoiLiIsIi8iOiIvIn0sdGhpcy5vcHRpb25zLnByZW9wZW5zfHx7fSksZW52OnRoaXMub3B0aW9ucy5lbnYsYXJnczp0aGlzLm9wdGlvbnMuYXJncyxiaW5kaW5nczpkYihkYih7fSxBZi5kZWZhdWx0QmluZGluZ3MpLHtmczphLmZzfSl9LGQ9bmV3IEFmKGIpLGc9dGhpcy5vcHRpb25zLm1vZHVsZSxbNCxXZWJBc3NlbWJseS5pbnN0YW50aWF0ZShnLGRiKHt9LGQuZ2V0SW1wb3J0cyhnKSkpXTtjYXNlIDE6cmV0dXJuIGg9ZS5zZW50KCksZC5zdGFydChoKSxbMl19fSl9KX07cmV0dXJuIGJ9KEJmKSx2aD1mdW5jdGlvbihhKXtmdW5jdGlvbiBiKGIpe3ZhciBkPWEuY2FsbCh0aGlzLGIpfHx0aGlzO2lmKCFiLmNhbGxiYWNrKXRocm93IEVycm9yKCJUaGUgQ29tbWFuZCBPcHRpb25zIHByb3ZpZGVkIGFyZSBub3QgZm9yIGEgQ2FsbGJhY2sgQ29tbWFuZCIpOwpkLmNhbGxiYWNrPWIuY2FsbGJhY2s7cmV0dXJuIGR9emQoYixhKTtiLnByb3RvdHlwZS5ydW49ZnVuY3Rpb24oYSl7cmV0dXJuIEViKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbigpe3ZhciBiO3JldHVybiBGYih0aGlzLGZ1bmN0aW9uKGQpe3N3aXRjaChkLmxhYmVsKXtjYXNlIDA6cmV0dXJuWzQsUHJvbWlzZS5yZXNvbHZlKHRoaXMuY2FsbGJhY2sodGhpcy5vcHRpb25zLGEpKV07Y2FzZSAxOnJldHVybiBiPWQuc2VudCgpLCJzdHJpbmciPT10eXBlb2YgYiYmYS5mcy53cml0ZUZpbGVTeW5jKCIvZGV2L3N0ZG91dCIsKG5ldyBUZXh0RW5jb2RlcikuZW5jb2RlKGIrIlxuIikpLFsyXX19KX0pfTtyZXR1cm4gYn0oQmYpLHdoPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhLGQsZSxmLGcsaCxrLGwsbSl7dmFyIGI9dGhpczt0aGlzLnN0ZGluUHJvbXB0PSIiO3RoaXMuY29tbWFuZE9wdGlvbnM9YTt0aGlzLndhc21Gcz1uZXcgZ2g7dGhpcy53YXNtRnMuZnJvbUpTT04oZCk7dGhpcy5vcmlnaW5hbFdhc21Gc0pzb249CmQ7dGhpcy5pb0RldmljZXM9bmV3IGhoKHRoaXMud2FzbUZzKTt0aGlzLmlvRGV2aWNlV2luZG93PWg7dGhpcy5pb0RldmljZXMuc2V0V2luZG93U2l6ZUNhbGxiYWNrKGZ1bmN0aW9uKCl7dmFyIGE9Yi5pb0RldmljZXMuZ2V0V2luZG93U2l6ZSgpO2IuaW9EZXZpY2VXaW5kb3cucmVzaXplKGFbMF0sYVsxXSl9KTt0aGlzLmlvRGV2aWNlcy5zZXRCdWZmZXJJbmRleERpc3BsYXlDYWxsYmFjayhmdW5jdGlvbigpe3ZhciBhPWIuaW9EZXZpY2VzLmdldEZyYW1lQnVmZmVyKCk7Yi5pb0RldmljZVdpbmRvdy5kcmF3UmdiYUFycmF5VG9GcmFtZUJ1ZmZlcihhKX0pO3RoaXMuaW9EZXZpY2VzLnNldElucHV0Q2FsbGJhY2soZnVuY3Rpb24oKXtpZihiLnNoYXJlZElvRGV2aWNlSW5wdXQpe2IuaW9EZXZpY2VXaW5kb3cuZ2V0SW5wdXRCdWZmZXIoKTtBdG9taWNzLndhaXQoYi5zaGFyZWRJb0RldmljZUlucHV0LDAsLTEpO3ZhciBhPWIuc2hhcmVkSW9EZXZpY2VJbnB1dFswXTtiLnNoYXJlZElvRGV2aWNlSW5wdXRbMF09Ci0xO2lmKDA8YSl7Zm9yKHZhciBkPW5ldyBVaW50OEFycmF5KGEpLGU9MDtlPGE7ZSsrKWRbZV09Yi5zaGFyZWRJb0RldmljZUlucHV0W2UrMV07cmV0dXJuIGR9cmV0dXJuIG5ldyBVaW50OEFycmF5fXJldHVybiBiLmlvRGV2aWNlV2luZG93LmdldElucHV0QnVmZmVyKCl9KTt0aGlzLmRhdGFDYWxsYmFjaz1lO3RoaXMuZW5kQ2FsbGJhY2s9Zjt0aGlzLmVycm9yQ2FsbGJhY2s9ZztkPXZvaWQgMDtrJiYoZD1uZXcgSW50MzJBcnJheShrKSk7dGhpcy5zaGFyZWRJb0RldmljZUlucHV0PWQ7az12b2lkIDA7bCYmKGs9bmV3IEludDMyQXJyYXkobCkpO3RoaXMuY29tbWFuZD1hLm1vZHVsZT9uZXcgdWgoYSk6bmV3IHZoKGEpO3RoaXMud2FzbUZzLnZvbHVtZS5mZHNbMF0ubm9kZS5yZWFkPXRoaXMuc3RkaW5SZWFkLmJpbmQodGhpcyk7dGhpcy53YXNtRnMudm9sdW1lLmZkc1sxXS5ub2RlLndyaXRlPXRoaXMuc3Rkb3V0V3JpdGUuYmluZCh0aGlzKTt0aGlzLndhc21Gcy52b2x1bWUuZmRzWzJdLm5vZGUud3JpdGU9CnRoaXMuc3Rkb3V0V3JpdGUuYmluZCh0aGlzKTthPXRoaXMud2FzbUZzLnZvbHVtZS5vcGVuU3luYygiL2Rldi90dHkiLCJ3KyIpO3RoaXMud2FzbUZzLnZvbHVtZS5mZHNbYV0ubm9kZS5yZWFkPXRoaXMuc3RkaW5SZWFkLmJpbmQodGhpcyk7dGhpcy53YXNtRnMudm9sdW1lLmZkc1thXS5ub2RlLndyaXRlPXRoaXMuc3Rkb3V0V3JpdGUuYmluZCh0aGlzKTt0aGlzLnNoYXJlZFN0ZGluPWs7dGhpcy5zdGFydFN0ZGluUmVhZENhbGxiYWNrPW07dGhpcy5yZWFkU3RkaW5Db3VudGVyPTA7dGhpcy5waXBlZFN0ZGluPSIifWEucHJvdG90eXBlLnN0YXJ0PWZ1bmN0aW9uKGEpe3JldHVybiBFYih0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24oKXt2YXIgYixlLGYsZz10aGlzO3JldHVybiBGYih0aGlzLGZ1bmN0aW9uKGQpe3N3aXRjaChkLmxhYmVsKXtjYXNlIDA6Yj1mdW5jdGlvbigpe2cuaW9EZXZpY2VXaW5kb3cucmVzaXplKDAsMCk7c2V0VGltZW91dChmdW5jdGlvbigpe2cuZW5kQ2FsbGJhY2soZy53YXNtRnMudG9KU09OKCkpfSwKNTApfSxkLmxhYmVsPTE7Y2FzZSAxOnJldHVybiBkLnRyeXMucHVzaChbMSwzLCw0XSksYSYmKHRoaXMucGlwZWRTdGRpbj0obmV3IFRleHREZWNvZGVyKCJ1dGYtOCIpKS5kZWNvZGUoYSkpLFs0LHRoaXMuY29tbWFuZC5ydW4odGhpcy53YXNtRnMpXTtjYXNlIDI6cmV0dXJuIGQuc2VudCgpLGIoKSxbMyw0XTtjYXNlIDM6ZT1kLnNlbnQoKTtpZihlIGluc3RhbmNlb2YgdmYpcmV0dXJuIGIoKSxbMl07Zj0iVW5rbm93biBFcnJvciI7aWYodm9pZCAwIT09ZS5jb2RlKWY9ImV4aXRlZCB3aXRoIGNvZGU6ICIrZS5jb2RlO2Vsc2UgaWYodm9pZCAwIT09ZS5zaWduYWwpZj0ia2lsbGVkIHdpdGggc2lnbmFsOiAiK2Uuc2lnbmFsO2Vsc2UgaWYodm9pZCAwIT09ZS51c2VyKXJldHVybiBiKCksWzJdO2NvbnNvbGUuZXJyb3IoZSk7dGhpcy5lcnJvckNhbGxiYWNrKGYsdGhpcy53YXNtRnMudG9KU09OKCksdm9pZCAwIT09ZS51c2VyKTtyZXR1cm5bMyw0XTtjYXNlIDQ6cmV0dXJuWzJdfX0pfSl9OwphLnByb3RvdHlwZS5zdGRvdXRXcml0ZT1mdW5jdGlvbihhLGQsZSxmKXt0aGlzLmRhdGFDYWxsYmFjayYmdGhpcy5kYXRhQ2FsbGJhY2soYSk7ZD0obmV3IFRleHREZWNvZGVyKCJ1dGYtOCIpKS5kZWNvZGUoYSkuc3BsaXQoIlxuIik7dGhpcy5zdGRpblByb21wdD0wPGQubGVuZ3RoP2RbZC5sZW5ndGgtMV0ucmVwbGFjZSgvW1x1MDAxQlx1MDA5Ql1bW1xdKCkjOz9dKig/Oig/Oig/OlthLXpBLVpcZF0qKD86O1stYS16QS1aXGRcLyMmLjo9PyVAfl9dKikqKT9cdTAwMDcpfCg/Oig/OlxkezEsNH0oPzo7XGR7MCw0fSkqKT9bXGRBLVBSLVRaY2YtbnRxcnk9Pjx+XSkpL2csIiIpOiIiO3JldHVybiBhLmxlbmd0aH07YS5wcm90b3R5cGUuc3RkaW5SZWFkPWZ1bmN0aW9uKGEsZCxlLGYpe2lmKDAhPT10aGlzLnJlYWRTdGRpbkNvdW50ZXIlMilyZXR1cm4gdGhpcy5yZWFkU3RkaW5Db3VudGVyKyssMDtpZih0aGlzLnBpcGVkU3RkaW4pZD10aGlzLnBpcGVkU3RkaW4sdGhpcy5waXBlZFN0ZGluPQoiIix0aGlzLnJlYWRTdGRpbkNvdW50ZXIrKztlbHNlIGlmKHRoaXMuc2hhcmVkU3RkaW4mJnRoaXMuc3RhcnRTdGRpblJlYWRDYWxsYmFjayl7dGhpcy5zdGFydFN0ZGluUmVhZENhbGxiYWNrKCk7QXRvbWljcy53YWl0KHRoaXMuc2hhcmVkU3RkaW4sMCwtMSk7ZD10aGlzLnNoYXJlZFN0ZGluWzBdO3RoaXMuc2hhcmVkU3RkaW5bMF09LTE7ZT1uZXcgVWludDhBcnJheShkKTtmb3IoZj0wO2Y8ZDtmKyspZVtmXT10aGlzLnNoYXJlZFN0ZGluWzErZl07ZD0obmV3IFRleHREZWNvZGVyKCJ1dGYtOCIpKS5kZWNvZGUoZSl9ZWxzZXtkPXByb21wdCgiUGxlYXNlIGVudGVyIHRleHQgZm9yIHN0ZGluOlxuIit0aGlzLnN0ZGluUHJvbXB0KTtpZihudWxsPT09ZCl0aHJvdyB0aGlzLmRhdGFDYWxsYmFjayYmdGhpcy5kYXRhQ2FsbGJhY2soKG5ldyBUZXh0RW5jb2RlcikuZW5jb2RlKCJcbiIpKSxhPUVycm9yKCJQcm9jZXNzIGtpbGxlZCBieSB1c2VyIiksYS51c2VyPSEwLGE7ZCs9IlxuIjsKdGhpcy5kYXRhQ2FsbGJhY2smJnRoaXMuZGF0YUNhbGxiYWNrKChuZXcgVGV4dEVuY29kZXIpLmVuY29kZShkKSl9aWYoIWQpcmV0dXJuIDA7ZD0obmV3IFRleHRFbmNvZGVyKS5lbmNvZGUoZCk7Zm9yKGU9MDtlPGQubGVuZ3RoOysrZSlhW2VdPWRbZV07cmV0dXJuIGQubGVuZ3RofTtyZXR1cm4gYX0oKTttYyh3aCl9KSgpCg==",[4,this._getBlobUrlForProcessWorker(i,this.wasmTty)];case 1:return r=d.sent(),n=new Worker(r),o=la(n,[],void 0),s=new SharedArrayBuffer(8192),u=this.wasmTerminalConfig.wasmFs.toJSON(),l=new SharedArrayBuffer(8192),a=new fm(l),[4,new o(this.commandOptionsForProcessesToRun[t],u,No(this._processDataCallback.bind(this,{commandOptionIndex:t,sync:!1})),No(this._processEndCallback.bind(this,{commandOptionIndex:t,processWorker:n})),No(this._processErrorCallback.bind(this,{commandOptionIndex:t})),No(a),l,s,No(this._processStartStdinReadCallback.bind(this)))];case 2:return h=d.sent(),p=new Int32Array(s),p[0]=-1,[2,{process:h,commandOptionIndex:t,ioDeviceWindow:a,worker:n,sharedStdin:p}]}})})},e.prototype._spawnProcessAsService=function(t){return Ht(this,void 0,void 0,function(){var i,r,n;return Dt(this,function(){return i=this.wasmTerminalConfig.wasmFs.toJSON(),r=new fm,n=new MS(this.commandOptionsForProcessesToRun[t],i,this._processDataCallback.bind(this,{commandOptionIndex:t,sync:!0}),this._processEndCallback.bind(this,{commandOptionIndex:t}),this._processErrorCallback.bind(this,{commandOptionIndex:t}),r),[2,{process:n,commandOptionIndex:t,ioDeviceWindow:r}]})})},e.prototype._processDataCallback=function(t,i){var r=t.commandOptionIndex;t=t.sync,this.isRunning&&(r<this.commandOptionsForProcessesToRun.length-1?this.supportsSharedArrayBuffer&&1<this.spawnedProcessObjects.length&&this.spawnedProcessObjects[this.spawnedProcessObjects.length-1].commandOptionIndex>r?this._addStdinToSharedStdin(i,1):(r=new Uint8Array(i.length+this.pipedStdinDataForNextProcess.length),r.set(this.pipedStdinDataForNextProcess),r.set(i,this.pipedStdinDataForNextProcess.length),this.pipedStdinDataForNextProcess=r):(i=new TextDecoder("utf-8").decode(i),this.wasmTty&&this.wasmTty.print(i,t)))},e.prototype._processEndCallback=function(t,i){var r=t.commandOptionIndex;(t=t.processWorker)&&t.terminate(),i&&this.wasmTerminalConfig.wasmFs.fromJSON(i),r<this.commandOptionsForProcessesToRun.length-1?this._tryToSpawnProcess(r+1):(this.isRunning=!1,this.commandEndCallback()),this.spawnedProcessObjects.shift()},e.prototype._processErrorCallback=function(t,i,r){console.error(this.commandOptionsForProcessesToRun[t.commandOptionIndex].args[0]+": "+i),r&&this.wasmTerminalConfig.wasmFs.fromJSON(r),this.kill(),this.commandEndCallback()},e.prototype._processStartStdinReadCallback=function(){var t=this;this.commandStartReadCallback().then(function(i){i=new TextEncoder().encode(i+`
`),t._addStdinToSharedStdin(i,0)})},e.prototype._getBlobUrlForProcessWorker=function(t,i){return Ht(this,void 0,void 0,function(){var r,n;return Dt(this,function(o){switch(o.label){case 0:return mc?[2,mc]:(i&&i.printStatus("[INFO] Downloading the process Web Worker (This happens once)..."),[4,Promise.all([fetch(t).then(function(s){return s.text()}),new Promise(function(s){return setTimeout(s,500)})]).then(function(s){return s[0]})]);case 1:return r=o.sent(),i&&i.clearStatus(),n=new Blob([r]),mc=window.URL.createObjectURL(n),[2,mc]}})})},e.prototype._getCommandOptionsFromAST=function(t,i,r){return Ht(this,void 0,void 0,function(){var n,o,s,u,l,a,h,p,d,c,y,_,g=this;return Dt(this,function(m){switch(m.label){case 0:return n=[],o=t.command.value,s=t.args.map(function(f){return f.value}),u=AZ([o],s),l=Object.entries(t.env).map(function(f){return f=wh(f,2),[f[0],f[1].value]}),a={},l.forEach(function(f){f=wh(f,2),a[f[0]]=f[1]}),r&&(h=r.getTermSize(),p=h.rows,d=h.cols,a.LINES=p,a.COLUMNS=d),c=function(){return Ht(g,void 0,void 0,function(){var f,v;return Dt(this,function(Z){switch(Z.label){case 0:return t.redirects?(f=t.redirects[0])&&f.type==="pipe"?[4,this._getCommandOptionsFromAST(f.command,i,r)]:[3,2]:[3,2];case 1:v=Z.sent(),n=n.concat(v),Z.label=2;case 2:return[2]}})})},[4,c()];case 1:return m.sent(),r&&r.printStatus("[INFO] Fetching the command "+o+" ..."),[4,i.fetchCommand({args:u,env:a})];case 2:return y=m.sent(),r&&r.clearStatus(),y instanceof Uint8Array?[4,WebAssembly.compile(y)]:[3,4];case 3:return _=m.sent(),n.unshift({args:u,env:a,module:_}),[3,5];case 4:PS(y)?n.unshift({args:u,env:a,callback:y}):n.unshift(y),m.label=5;case 5:return[2,n]}})})},e}(),JS=function(){function e(t,i,r){var n=this;r===void 0&&(r={historySize:10,maxAutocompleteEntries:100}),this.handleCursorMove=function(o){0<o?(o=Math.min(o,n.wasmTty.getInput().length-n.wasmTty.getCursor()),n.wasmTty.setCursorDirectly(n.wasmTty.getCursor()+o)):0>o&&(o=Math.max(o,-n.wasmTty.getCursor()),n.wasmTty.setCursorDirectly(n.wasmTty.getCursor()+o))},this.handleCursorErase=function(o){o?0>=n.wasmTty.getCursor()||(o=n.wasmTty.getInput().substr(0,n.wasmTty.getCursor()-1)+n.wasmTty.getInput().substr(n.wasmTty.getCursor()),n.wasmTty.clearInput(),n.wasmTty.setCursorDirectly(n.wasmTty.getCursor()-1),n.wasmTty.setInput(o,!0)):(o=n.wasmTty.getInput().substr(0,n.wasmTty.getCursor())+n.wasmTty.getInput().substr(n.wasmTty.getCursor()+1),n.wasmTty.setInput(o))},this.handleCursorInsert=function(o){var s=n.wasmTty.getInput().substr(0,n.wasmTty.getCursor())+o+n.wasmTty.getInput().substr(n.wasmTty.getCursor());n.wasmTty.setCursorDirectly(n.wasmTty.getCursor()+o.length),n.wasmTty.setInput(s)},this.handleReadComplete=function(){n._activePrompt&&n._activePrompt.resolve&&(n._activePrompt.resolve(n.wasmTty.getInput()),n._activePrompt=void 0),n.wasmTty.print(`\r
`),n._active=!1},this.handleTermData=function(o){if(n._active||o===""){if(n.wasmTty.getFirstInit()&&n._activePrompt){var s=n.wasmTty.getBuffer().getLine(n.wasmTty.getBuffer().cursorY+n.wasmTty.getBuffer().baseY).translateToString(!1,0,n.wasmTty.getBuffer().cursorX);n._activePrompt.promptPrefix=s,n.wasmTty.setPromptPrefix(s),n.wasmTty.setFirstInit(!1)}n._activeCharPrompt&&n._activeCharPrompt.resolve?(n._activeCharPrompt.resolve(o),n._activeCharPrompt=void 0,n.wasmTty.print(`\r
`)):3<o.length&&o.charCodeAt(0)!==27?(o=o.replace(/[\r\n]+/g,"\r"),Array.from(o).forEach(function(u){return n.handleData(u)})):n.handleData(o)}},this.handleData=function(o){if(n._active||o===""){var s=o.charCodeAt(0);if(s===27)switch(o.substr(1)){case"[A":n.history&&(o=n.history.getPrevious())&&(n.wasmTty.setInput(o),n.wasmTty.setCursor(o.length));break;case"[B":n.history&&((o=n.history.getNext())||(o=""),n.wasmTty.setInput(o),n.wasmTty.setCursor(o.length));break;case"[D":n.handleCursorMove(-1);break;case"[C":n.handleCursorMove(1);break;case"[3~":n.handleCursorErase(!1);break;case"[F":n.wasmTty.setCursor(n.wasmTty.getInput().length);break;case"[H":n.wasmTty.setCursor(0);break;case"b":(o=Qp(n.wasmTty.getInput(),n.wasmTty.getCursor()))&&n.wasmTty.setCursor(o);break;case"f":(o=$Z(n.wasmTty.getInput(),n.wasmTty.getCursor()))&&n.wasmTty.setCursor(o);break;case"":(o=Qp(n.wasmTty.getInput(),n.wasmTty.getCursor()))&&(n.wasmTty.setInput(n.wasmTty.getInput().substr(0,o)+n.wasmTty.getInput().substr(n.wasmTty.getCursor())),n.wasmTty.setCursor(o))}else if(32>s||s===127)switch(o){case"\r":case`
`:case"\r":eS(n.wasmTty.getInput())?n.handleCursorInsert(`
`):n.handleReadComplete();break;case"":case"\b":case"":n.handleCursorErase(!0);break;case"	":if(0<n._autocompleteHandlers.length){o=n.wasmTty.getInput().substr(0,n.wasmTty.getCursor()),s=Od(o);var u=iS(n._autocompleteHandlers,o);u.sort(),u.length===0?s||n.handleCursorInsert(" "):u.length===1?(o=tS(o),n.handleCursorInsert(u[0].substr(o.length)+" ")):u.length<=n.maxAutocompleteEntries?n.printAndRestartPrompt(function(){n.wasmTty.printWide(u)}):n.printAndRestartPrompt(function(){return n.wasmTty.readChar("Display all "+u.length+" possibilities? (y or n)").promise.then(function(l){l!=="y"&&l!=="Y"||n.wasmTty.printWide(u)})})}else n.handleCursorInsert("    ");break;case"":n.wasmTty.setCursor(0);break;case"":n.handleCursorMove(-1);break;case"":case"":o=n.wasmTty.getInput(),n.wasmTty.setCursor(o.length),n.wasmTty.setInput(""),n.wasmTty.setCursorDirectly(0),n.wasmTty.print(o+`^C\r
`),n.history&&n.history.rewind(),n.commandRunner&&(n.commandRunner.kill(),n.commandRunner=void 0),n.resolveActiveRead();break;case"":n.wasmTty.setCursor(n.wasmTty.getInput().length);break;case"":n.handleCursorMove(1);break;case"\x07":n.history&&n.history.rewind(),n.wasmTty.setInput("");break;case"\v":n.wasmTty.setInput(n.wasmTty.getInput().substring(0,n.wasmTty.getCursor())),n.wasmTty.setCursor(n.wasmTty.getInput().length);break;case"\f":n.wasmTty.clearTty(),n.wasmTty.print("$ "+n.wasmTty.getInput());break;case"":n.history&&((o=n.history.getNext())||(o=""),n.wasmTty.setInput(o),n.wasmTty.setCursor(o.length));break;case"":n.history&&(o=n.history.getPrevious())&&(n.wasmTty.setInput(o),n.wasmTty.setCursor(o.length));break;case"":n.wasmTty.setInput(n.wasmTty.getInput().substring(n.wasmTty.getCursor())),n.wasmTty.setCursor(0)}else n.handleCursorInsert(o)}},this.wasmTerminalConfig=t,this.wasmTty=i,this.history=new rS(r.historySize),this.commandRunner=void 0,this.maxAutocompleteEntries=r.maxAutocompleteEntries,this._autocompleteHandlers=[function(){return n.history.entries}],this._active=!1}return e.prototype.prompt=function(){return Ht(this,void 0,void 0,function(){var t,i;return Dt(this,function(r){switch(r.label){case 0:if(this._activePrompt)return[2];r.label=1;case 1:return r.trys.push([1,4,,5]),this._activePrompt=this.wasmTty.read("$ "),this._active=!0,[4,this._activePrompt.promise];case 2:if(t=r.sent(),this.commandRunner&&this.commandRunner.kill(),t==="")return this.prompt(),[2];if(t==="!!")if(this.history&&0<this.history.entries.length)t=this.history.entries[this.history.entries.length-1];else throw Error("No Previous command in History");else this.history&&this.history.push(this.wasmTty.getInput());return this.commandRunner=this.getCommandRunner(t),[4,this.commandRunner.runCommand()];case 3:return r.sent(),[3,5];case 4:return i=r.sent(),this.wasmTty.println(""+i.toString()),this.prompt(),[3,5];case 5:return[2]}})})},e.prototype.isPrompting=function(){return this._active},e.prototype.getCommandRunner=function(t){var i=this;return new NS(this.wasmTerminalConfig,t,function(){return Ht(i,void 0,void 0,function(){return Dt(this,function(){return this._activePrompt=this.wasmTty.read(""),this._active=!0,[2,this._activePrompt.promise]})})},function(){setTimeout(function(){i.prompt()})},this.wasmTty)},e.prototype.printAndRestartPrompt=function(t){function i(){r.wasmTty.setCursor(r.wasmTty.getCursor()),r.wasmTty.setInput(r.wasmTty.getInput())}var r=this;this.wasmTty.getCursor(),this.wasmTty.setCursor(this.wasmTty.getInput().length),this.wasmTty.print(`\r
`),(t=t())?t.then(i):i()},e.prototype.resolveActiveRead=function(){this._activePrompt&&this._activePrompt.resolve&&(this._activePrompt.resolve(""),this._activePrompt=void 0),this._activeCharPrompt&&this._activeCharPrompt.resolve&&(this._activeCharPrompt.resolve(""),this._activeCharPrompt=void 0),this._active=!1},e.prototype.rejectActiveRead=function(t){t===void 0&&(t="aborted"),(this._activePrompt||this._activeCharPrompt)&&this.wasmTty.print(`\r
`),this._activePrompt&&this._activePrompt.reject&&(this._activePrompt.reject(Error(t)),this._activePrompt=void 0),this._activeCharPrompt&&this._activeCharPrompt.reject&&(this._activeCharPrompt.reject(Error(t)),this._activeCharPrompt=void 0),this._active=!1},e}(),FS=Tg||wg.Terminal,pm=["click","tap"],OS=function(){function e(t){var i=this;this.handleTermResize=function(r){var n=r.rows;r=r.cols,i.wasmTty.clearInput(),i.wasmTty.setTermSize(r,n),i.wasmTty.setInput(i.wasmTty.getInput(),!0)},this.wasmTerminalConfig=new zp(t),this.xterm=new FS({}),this.resizeEvent=this.xterm.onResize(this.handleTermResize),this.xterm.onKey(function(r){if(r.key===" ")return r.domEvent.preventDefault(),!1}),this.container=void 0,this.webLinksAddon=new Vg,this.fitAddon=new Xg,this.xterm.loadAddon(this.fitAddon),this.xterm.loadAddon(this.webLinksAddon),this.wasmTerminalConfig=new zp(t),this.wasmTty=new QZ(this.xterm),this.wasmShell=new JS(this.wasmTerminalConfig,this.wasmTty),this.dataEvent=this.xterm.onData(this.wasmShell.handleTermData),this.isOpen=!1,this.pendingPrintOnOpen=""}return e.prototype.open=function(t){var i=this,r=this.focus.bind(this);this.container!==void 0&&pm.forEach(function(n){i.container.removeEventListener(n,r)}),this.container=t,this.xterm.open(t),this.isOpen=!0,setTimeout(function(){i.container!==void 0&&pm.forEach(function(n){i.container.addEventListener(n,r)}),i.pendingPrintOnOpen&&(i.wasmTty.print(i.pendingPrintOnOpen+`
`),i.pendingPrintOnOpen=""),i.wasmShell.prompt()})},e.prototype.fit=function(){this.fitAddon.fit()},e.prototype.focus=function(){this.xterm.focus(),this.scrollToCursor()},e.prototype.scrollToCursor=function(){if(this.container){var t=this.wasmTty.getBuffer().cursorY,i=this.wasmTty.getSize(),r=this.container.getBoundingClientRect(),n=r.left;t=r.top+t/i.rows*r.height+10,0>n&&(n=0),t>document.body.scrollHeight&&(t=document.body.scrollHeight),window.scrollTo(n,t)}},e.prototype.print=function(t,i){var r=this;t=t.replace(/\n\n/g,`
 
`),this.isOpen?this.wasmShell.isPrompting?this.wasmShell.printAndRestartPrompt(function(){r.wasmTty.print(t+`
`,i)}):this.wasmTty.print(t,i):this.pendingPrintOnOpen=this.pendingPrintOnOpen?this.pendingPrintOnOpen+t:t},e.prototype.runCommand=function(t){this.wasmShell.isPrompting()&&(this.wasmTty.setInput(t),this.wasmShell.handleReadComplete())},e.prototype.destroy=function(){this.xterm.dispose(),delete this.xterm},e.prototype.onPaste=function(t){this.wasmTty.print(t)},e}(),BS=Object.defineProperty,US=(e,t,i)=>t in e?BS(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,Ds=(e,t,i)=>(US(e,typeof t!="symbol"?t+"":t,i),i);const ke={FD_DATASYNC:BigInt(1)<<BigInt(0),FD_READ:BigInt(1)<<BigInt(1),FD_SEEK:BigInt(1)<<BigInt(2),FD_FDSTAT_SET_FLAGS:BigInt(1)<<BigInt(3),FD_SYNC:BigInt(1)<<BigInt(4),FD_TELL:BigInt(1)<<BigInt(5),FD_WRITE:BigInt(1)<<BigInt(6),FD_ADVISE:BigInt(1)<<BigInt(7),FD_ALLOCATE:BigInt(1)<<BigInt(8),PATH_CREATE_DIRECTORY:BigInt(1)<<BigInt(9),PATH_CREATE_FILE:BigInt(1)<<BigInt(10),PATH_LINK_SOURCE:BigInt(1)<<BigInt(11),PATH_LINK_TARGET:BigInt(1)<<BigInt(12),PATH_OPEN:BigInt(1)<<BigInt(13),FD_READDIR:BigInt(1)<<BigInt(14),PATH_READLINK:BigInt(1)<<BigInt(15),PATH_RENAME_SOURCE:BigInt(1)<<BigInt(16),PATH_RENAME_TARGET:BigInt(1)<<BigInt(17),PATH_FILESTAT_GET:BigInt(1)<<BigInt(18),PATH_FILESTAT_SET_SIZE:BigInt(1)<<BigInt(19),PATH_FILESTAT_SET_TIMES:BigInt(1)<<BigInt(20),FD_FILESTAT_GET:BigInt(1)<<BigInt(21),FD_FILESTAT_SET_SIZE:BigInt(1)<<BigInt(22),FD_FILESTAT_SET_TIMES:BigInt(1)<<BigInt(23),PATH_SYMLINK:BigInt(1)<<BigInt(24),PATH_REMOVE_DIRECTORY:BigInt(1)<<BigInt(25),PATH_UNLINK_FILE:BigInt(1)<<BigInt(26),POLL_FD_READWRITE:BigInt(1)<<BigInt(27),SOCK_SHUTDOWN:BigInt(1)<<BigInt(28),SOCK_ACCEPT:BigInt(1)<<BigInt(29)};ke.FD_DATASYNC|ke.FD_READ|ke.FD_SEEK|ke.FD_FDSTAT_SET_FLAGS|ke.FD_SYNC|ke.FD_TELL|ke.FD_WRITE|ke.FD_ADVISE|ke.FD_ALLOCATE|ke.PATH_CREATE_DIRECTORY|ke.PATH_CREATE_FILE|ke.PATH_LINK_SOURCE|ke.PATH_LINK_TARGET|ke.PATH_OPEN|ke.FD_READDIR|ke.PATH_READLINK|ke.PATH_RENAME_SOURCE|ke.PATH_RENAME_TARGET|ke.PATH_FILESTAT_GET|ke.PATH_FILESTAT_SET_SIZE|ke.PATH_FILESTAT_SET_TIMES|ke.FD_FILESTAT_GET|ke.FD_FILESTAT_SET_SIZE|ke.FD_FILESTAT_SET_TIMES|ke.PATH_SYMLINK|ke.PATH_REMOVE_DIRECTORY|ke.PATH_UNLINK_FILE|ke.POLL_FD_READWRITE|ke.SOCK_SHUTDOWN|ke.SOCK_ACCEPT;const qv="dmFyIGl0PU9iamVjdC5kZWZpbmVQcm9wZXJ0eTt2YXIgbnQ9KHMsZyxJKT0+ZyBpbiBzP2l0KHMsZyx7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6SX0pOnNbZ109STt2YXIgZD0ocyxnLEkpPT4obnQocyx0eXBlb2YgZyE9InN5bWJvbCI/ZysiIjpnLEkpLEkpOyhmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0Ijt2YXIgcz0oZT0+KGVbZS5TVUNDRVNTPTBdPSJTVUNDRVNTIixlW2UuRTJCSUc9MV09IkUyQklHIixlW2UuRUFDQ0VTUz0yXT0iRUFDQ0VTUyIsZVtlLkVBRERSSU5VU0U9M109IkVBRERSSU5VU0UiLGVbZS5FQUREUk5PVEFWQUlMPTRdPSJFQUREUk5PVEFWQUlMIixlW2UuRUFGTk9TVVBQT1JUPTVdPSJFQUZOT1NVUFBPUlQiLGVbZS5FQUdBSU49Nl09IkVBR0FJTiIsZVtlLkVBTFJFQURZPTddPSJFQUxSRUFEWSIsZVtlLkVCQURGPThdPSJFQkFERiIsZVtlLkVCQURNU0c9OV09IkVCQURNU0ciLGVbZS5FQlVTWT0xMF09IkVCVVNZIixlW2UuRUNBTkNFTEVEPTExXT0iRUNBTkNFTEVEIixlW2UuRUNISUxEPTEyXT0iRUNISUxEIixlW2UuRUNPTk5BQk9SVEVEPTEzXT0iRUNPTk5BQk9SVEVEIixlW2UuRUNPTk5SRUZVU0VEPTE0XT0iRUNPTk5SRUZVU0VEIixlW2UuRUNPTk5SRVNFVD0xNV09IkVDT05OUkVTRVQiLGVbZS5FREVBRExLPTE2XT0iRURFQURMSyIsZVtlLkVERVNUQUREUlJFUT0xN109IkVERVNUQUREUlJFUSIsZVtlLkVET009MThdPSJFRE9NIixlW2UuRURRVU9UPTE5XT0iRURRVU9UIixlW2UuRUVYSVNUPTIwXT0iRUVYSVNUIixlW2UuRUZBVUxUPTIxXT0iRUZBVUxUIixlW2UuRUZCSUc9MjJdPSJFRkJJRyIsZVtlLkVIT1NUVU5SRUFDSD0yM109IkVIT1NUVU5SRUFDSCIsZVtlLkVJRFJNPTI0XT0iRUlEUk0iLGVbZS5FSUxTRVE9MjVdPSJFSUxTRVEiLGVbZS5FSU5QUk9HUkVTUz0yNl09IkVJTlBST0dSRVNTIixlW2UuRUlOVFI9MjddPSJFSU5UUiIsZVtlLkVJTlZBTD0yOF09IkVJTlZBTCIsZVtlLkVJTz0yOV09IkVJTyIsZVtlLkVJU0NPTk49MzBdPSJFSVNDT05OIixlW2UuRUlTRElSPTMxXT0iRUlTRElSIixlW2UuRUxPT1A9MzJdPSJFTE9PUCIsZVtlLkVNRklMRT0zM109IkVNRklMRSIsZVtlLkVNTElOSz0zNF09IkVNTElOSyIsZVtlLkVNU0dTSVpFPTM1XT0iRU1TR1NJWkUiLGVbZS5FTVVMVElIT1A9MzZdPSJFTVVMVElIT1AiLGVbZS5FTkFNRVRPT0xPTkc9MzddPSJFTkFNRVRPT0xPTkciLGVbZS5FTkVURE9XTj0zOF09IkVORVRET1dOIixlW2UuRU5FVFJFU0VUPTM5XT0iRU5FVFJFU0VUIixlW2UuRU5FVFVOUkVBQ0g9NDBdPSJFTkVUVU5SRUFDSCIsZVtlLkVORklMRT00MV09IkVORklMRSIsZVtlLkVOT0JVRlM9NDJdPSJFTk9CVUZTIixlW2UuRU5PREVWPTQzXT0iRU5PREVWIixlW2UuRU5PRU5UPTQ0XT0iRU5PRU5UIixlW2UuRU5PRVhFQz00NV09IkVOT0VYRUMiLGVbZS5FTk9MQ0s9NDZdPSJFTk9MQ0siLGVbZS5FTk9MSU5LPTQ3XT0iRU5PTElOSyIsZVtlLkVOT01FTT00OF09IkVOT01FTSIsZVtlLkVOT01TRz00OV09IkVOT01TRyIsZVtlLkVOT1BST1RPT1BUPTUwXT0iRU5PUFJPVE9PUFQiLGVbZS5FTk9TUEM9NTFdPSJFTk9TUEMiLGVbZS5FTk9TWVM9NTJdPSJFTk9TWVMiLGVbZS5FTk9UQ09OTj01M109IkVOT1RDT05OIixlW2UuRU5PVERJUj01NF09IkVOT1RESVIiLGVbZS5FTk9URU1QVFk9NTVdPSJFTk9URU1QVFkiLGVbZS5FTk9UUkVDT1ZFUkFCTEU9NTZdPSJFTk9UUkVDT1ZFUkFCTEUiLGVbZS5FTk9UU09DSz01N109IkVOT1RTT0NLIixlW2UuRU5PVFNVUD01OF09IkVOT1RTVVAiLGVbZS5FTk9UVFk9NTldPSJFTk9UVFkiLGVbZS5FTlhJTz02MF09IkVOWElPIixlW2UuRU9WRVJGTE9XPTYxXT0iRU9WRVJGTE9XIixlW2UuRU9XTkVSREVBRD02Ml09IkVPV05FUkRFQUQiLGVbZS5FUEVSTT02M109IkVQRVJNIixlW2UuRVBJUEU9NjRdPSJFUElQRSIsZVtlLkVQUk9UTz02NV09IkVQUk9UTyIsZVtlLkVQUk9UT05PU1VQUE9SVD02Nl09IkVQUk9UT05PU1VQUE9SVCIsZVtlLkVQUk9UT1RZUEU9NjddPSJFUFJPVE9UWVBFIixlW2UuRVJBTkdFPTY4XT0iRVJBTkdFIixlW2UuRVJPRlM9NjldPSJFUk9GUyIsZVtlLkVTUElQRT03MF09IkVTUElQRSIsZVtlLkVTUkNIPTcxXT0iRVNSQ0giLGVbZS5FU1RBTEU9NzJdPSJFU1RBTEUiLGVbZS5FVElNRURPVVQ9NzNdPSJFVElNRURPVVQiLGVbZS5FVFhUQlNZPTc0XT0iRVRYVEJTWSIsZVtlLkVYREVWPTc1XT0iRVhERVYiLGVbZS5FTk9UQ0FQQUJMRT03Nl09IkVOT1RDQVBBQkxFIixlKSkoc3x8e30pLGc9KGU9PihlW2UuUkVBTFRJTUU9MF09IlJFQUxUSU1FIixlW2UuTU9OT1RPTklDPTFdPSJNT05PVE9OSUMiLGVbZS5QUk9DRVNTX0NQVVRJTUVfSUQ9Ml09IlBST0NFU1NfQ1BVVElNRV9JRCIsZVtlLlRIUkVBRF9DUFVUSU1FX0lEPTNdPSJUSFJFQURfQ1BVVElNRV9JRCIsZSkpKGd8fHt9KSxJPShlPT4oZVtlLlNFVD0wXT0iU0VUIixlW2UuQ1VSPTFdPSJDVVIiLGVbZS5FTkQ9Ml09IkVORCIsZSkpKEl8fHt9KSxiPShlPT4oZVtlLlVOS05PV049MF09IlVOS05PV04iLGVbZS5CTE9DS19ERVZJQ0U9MV09IkJMT0NLX0RFVklDRSIsZVtlLkNIQVJBQ1RFUl9ERVZJQ0U9Ml09IkNIQVJBQ1RFUl9ERVZJQ0UiLGVbZS5ESVJFQ1RPUlk9M109IkRJUkVDVE9SWSIsZVtlLlJFR1VMQVJfRklMRT00XT0iUkVHVUxBUl9GSUxFIixlW2UuU09DS0VUX0RHUkFNPTVdPSJTT0NLRVRfREdSQU0iLGVbZS5TT0NLRVRfU1RSRUFNPTZdPSJTT0NLRVRfU1RSRUFNIixlW2UuU1lNQk9MSUNfTElOSz03XT0iU1lNQk9MSUNfTElOSyIsZSkpKGJ8fHt9KSxQPShlPT4oZVtlLkRJUj0wXT0iRElSIixlKSkoUHx8e30pLEQ9KGU9PihlW2UuQ0xPQ0s9MF09IkNMT0NLIixlW2UuRkRfUkVBRD0xXT0iRkRfUkVBRCIsZVtlLkZEX1dSSVRFPTJdPSJGRF9XUklURSIsZSkpKER8fHt9KTtjb25zdCBMPXtDUkVBVDoxPDwwLERJUkVDVE9SWToxPDwxLEVYQ0w6MTw8MixUUlVOQzoxPDwzfSxtPXtBUFBFTkQ6MTw8MCxEU1lOQzoxPDwxLE5PTkJMT0NLOjE8PDIsUlNZTkM6MTw8MyxTWU5DOjE8PDR9LF89e0ZEX0RBVEFTWU5DOkJpZ0ludCgxKTw8QmlnSW50KDApLEZEX1JFQUQ6QmlnSW50KDEpPDxCaWdJbnQoMSksRkRfU0VFSzpCaWdJbnQoMSk8PEJpZ0ludCgyKSxGRF9GRFNUQVRfU0VUX0ZMQUdTOkJpZ0ludCgxKTw8QmlnSW50KDMpLEZEX1NZTkM6QmlnSW50KDEpPDxCaWdJbnQoNCksRkRfVEVMTDpCaWdJbnQoMSk8PEJpZ0ludCg1KSxGRF9XUklURTpCaWdJbnQoMSk8PEJpZ0ludCg2KSxGRF9BRFZJU0U6QmlnSW50KDEpPDxCaWdJbnQoNyksRkRfQUxMT0NBVEU6QmlnSW50KDEpPDxCaWdJbnQoOCksUEFUSF9DUkVBVEVfRElSRUNUT1JZOkJpZ0ludCgxKTw8QmlnSW50KDkpLFBBVEhfQ1JFQVRFX0ZJTEU6QmlnSW50KDEpPDxCaWdJbnQoMTApLFBBVEhfTElOS19TT1VSQ0U6QmlnSW50KDEpPDxCaWdJbnQoMTEpLFBBVEhfTElOS19UQVJHRVQ6QmlnSW50KDEpPDxCaWdJbnQoMTIpLFBBVEhfT1BFTjpCaWdJbnQoMSk8PEJpZ0ludCgxMyksRkRfUkVBRERJUjpCaWdJbnQoMSk8PEJpZ0ludCgxNCksUEFUSF9SRUFETElOSzpCaWdJbnQoMSk8PEJpZ0ludCgxNSksUEFUSF9SRU5BTUVfU09VUkNFOkJpZ0ludCgxKTw8QmlnSW50KDE2KSxQQVRIX1JFTkFNRV9UQVJHRVQ6QmlnSW50KDEpPDxCaWdJbnQoMTcpLFBBVEhfRklMRVNUQVRfR0VUOkJpZ0ludCgxKTw8QmlnSW50KDE4KSxQQVRIX0ZJTEVTVEFUX1NFVF9TSVpFOkJpZ0ludCgxKTw8QmlnSW50KDE5KSxQQVRIX0ZJTEVTVEFUX1NFVF9USU1FUzpCaWdJbnQoMSk8PEJpZ0ludCgyMCksRkRfRklMRVNUQVRfR0VUOkJpZ0ludCgxKTw8QmlnSW50KDIxKSxGRF9GSUxFU1RBVF9TRVRfU0laRTpCaWdJbnQoMSk8PEJpZ0ludCgyMiksRkRfRklMRVNUQVRfU0VUX1RJTUVTOkJpZ0ludCgxKTw8QmlnSW50KDIzKSxQQVRIX1NZTUxJTks6QmlnSW50KDEpPDxCaWdJbnQoMjQpLFBBVEhfUkVNT1ZFX0RJUkVDVE9SWTpCaWdJbnQoMSk8PEJpZ0ludCgyNSksUEFUSF9VTkxJTktfRklMRTpCaWdJbnQoMSk8PEJpZ0ludCgyNiksUE9MTF9GRF9SRUFEV1JJVEU6QmlnSW50KDEpPDxCaWdJbnQoMjcpLFNPQ0tfU0hVVERPV046QmlnSW50KDEpPDxCaWdJbnQoMjgpLFNPQ0tfQUNDRVBUOkJpZ0ludCgxKTw8QmlnSW50KDI5KX0sTz17QVRJTToxPDwwLEFUSU1fTk9XOjE8PDEsTVRJTToxPDwyLE1USU1fTk9XOjE8PDN9LEc9e1NVQlNDUklQVElPTl9DTE9DS19BQlNUSU1FOjE8PDB9LFI9NjQsdj00OCxrPTMyO2NsYXNzIHp7Y29uc3RydWN0b3IodCl7ZCh0aGlzLCJmcyIpO2QodGhpcywibmV4dEZEIiwxMCk7ZCh0aGlzLCJvcGVuTWFwIixuZXcgTWFwKTt0aGlzLmZzPXsuLi50fSx0aGlzLm9wZW5NYXAuc2V0KDMsbmV3IFQodGhpcy5mcywiIikpfW9wZW5GaWxlKHQsaSxuKXtjb25zdCByPW5ldyBBKHQsbik7aSYmKHIuYnVmZmVyPW5ldyBVaW50OEFycmF5KTtjb25zdCBmPXRoaXMubmV4dEZEO3JldHVybiB0aGlzLm9wZW5NYXAuc2V0KGYsciksdGhpcy5uZXh0RkQrKyxbcy5TVUNDRVNTLGZdfW9wZW5EaXIodCxpKXtjb25zdCBuPW5ldyBUKHQsaSkscj10aGlzLm5leHRGRDtyZXR1cm4gdGhpcy5vcGVuTWFwLnNldChyLG4pLHRoaXMubmV4dEZEKyssW3MuU1VDQ0VTUyxyXX1oYXNEaXIodCl7cmV0dXJuIHQ9PT0iLiI/ITA6ISFPYmplY3Qua2V5cyh0aGlzLmZzKS5maW5kKGk9Pmkuc3RhcnRzV2l0aChgJHt0fS9gKSl9b3Blbih0LGksbixyKXtjb25zdCBmPSEhKG4mTC5DUkVBVCksRT0hIShuJkwuRElSRUNUT1JZKSxvPSEhKG4mTC5FWENMKSxhPSEhKG4mTC5UUlVOQyk7aWYoISh0aGlzLm9wZW5NYXAuZ2V0KHQpaW5zdGFuY2VvZiBUKSlyZXR1cm5bcy5FQkFERl07aWYoaSBpbiB0aGlzLmZzKXJldHVybiBFP1tzLkVOT1RESVJdOm8/W3MuRUVYSVNUXTp0aGlzLm9wZW5GaWxlKHRoaXMuZnNbaV0sYSxyKTtpZih0aGlzLmhhc0RpcihpKSl7aWYoaT09PSIuIilyZXR1cm4gdGhpcy5vcGVuRGlyKHRoaXMuZnMsIiIpO2NvbnN0IGM9YCR7aX0vYCxTPU9iamVjdC5lbnRyaWVzKHRoaXMuZnMpLmZpbHRlcigoW3VdKT0+dS5zdGFydHNXaXRoKGMpKTtyZXR1cm4gdGhpcy5vcGVuRGlyKE9iamVjdC5mcm9tRW50cmllcyhTKSxjKX1lbHNlIHJldHVybiBmPyh0aGlzLmZzW2ldPXtwYXRoOmksbW9kZToiYmluYXJ5Iixjb250ZW50Om5ldyBVaW50OEFycmF5LHRpbWVzdGFtcHM6e2FjY2VzczpuZXcgRGF0ZSxtb2RpZmljYXRpb246bmV3IERhdGUsY2hhbmdlOm5ldyBEYXRlfX0sdGhpcy5vcGVuRmlsZSh0aGlzLmZzW2ldLGEscikpOltzLkVOT1RDQVBBQkxFXX1jbG9zZSh0KXtpZighdGhpcy5vcGVuTWFwLmhhcyh0KSlyZXR1cm4gcy5FQkFERjtjb25zdCBpPXRoaXMub3Blbk1hcC5nZXQodCk7cmV0dXJuIGkgaW5zdGFuY2VvZiBBJiZpLnN5bmMoKSx0aGlzLm9wZW5NYXAuZGVsZXRlKHQpLHMuU1VDQ0VTU31yZWFkKHQsaSl7Y29uc3Qgbj10aGlzLm9wZW5NYXAuZ2V0KHQpO3JldHVybiFufHxuIGluc3RhbmNlb2YgVD9bcy5FQkFERl06W3MuU1VDQ0VTUyxuLnJlYWQoaSldfXByZWFkKHQsaSxuKXtjb25zdCByPXRoaXMub3Blbk1hcC5nZXQodCk7cmV0dXJuIXJ8fHIgaW5zdGFuY2VvZiBUP1tzLkVCQURGXTpbcy5TVUNDRVNTLHIucHJlYWQoaSxuKV19d3JpdGUodCxpKXtjb25zdCBuPXRoaXMub3Blbk1hcC5nZXQodCk7cmV0dXJuIW58fG4gaW5zdGFuY2VvZiBUP3MuRUJBREY6KG4ud3JpdGUoaSkscy5TVUNDRVNTKX1wd3JpdGUodCxpLG4pe2NvbnN0IHI9dGhpcy5vcGVuTWFwLmdldCh0KTtyZXR1cm4hcnx8ciBpbnN0YW5jZW9mIFQ/cy5FQkFERjooci5wd3JpdGUoaSxuKSxzLlNVQ0NFU1MpfXN5bmModCl7Y29uc3QgaT10aGlzLm9wZW5NYXAuZ2V0KHQpO3JldHVybiFpfHxpIGluc3RhbmNlb2YgVD9zLkVCQURGOihpLnN5bmMoKSxzLlNVQ0NFU1MpfXNlZWsodCxpLG4pe2NvbnN0IHI9dGhpcy5vcGVuTWFwLmdldCh0KTtyZXR1cm4hcnx8ciBpbnN0YW5jZW9mIFQ/W3MuRUJBREZdOltzLlNVQ0NFU1Msci5zZWVrKGksbildfXRlbGwodCl7Y29uc3QgaT10aGlzLm9wZW5NYXAuZ2V0KHQpO3JldHVybiFpfHxpIGluc3RhbmNlb2YgVD9bcy5FQkFERl06W3MuU1VDQ0VTUyxpLnRlbGwoKV19cmVudW1iZXIodCxpKXtyZXR1cm4hdGhpcy5leGlzdHModCl8fCF0aGlzLmV4aXN0cyhpKT9zLkVCQURGOih0PT09aXx8KHRoaXMuY2xvc2UoaSksdGhpcy5vcGVuTWFwLnNldChpLHRoaXMub3Blbk1hcC5nZXQodCkpKSxzLlNVQ0NFU1MpfXVubGluayh0LGkpe2NvbnN0IG49dGhpcy5vcGVuTWFwLmdldCh0KTtpZighKG4gaW5zdGFuY2VvZiBUKSlyZXR1cm4gcy5FQkFERjtpZighbi5jb250YWlucyhpKSlyZXR1cm4gcy5FTk9FTlQ7Zm9yKGNvbnN0IHIgb2YgT2JqZWN0LmtleXModGhpcy5mcykpKHI9PT1uLmZ1bGxQYXRoKGkpfHxyLnN0YXJ0c1dpdGgoYCR7bi5mdWxsUGF0aChpKX0vYCkpJiZkZWxldGUgdGhpcy5mc1tyXTtyZXR1cm4gcy5TVUNDRVNTfXJlbmFtZSh0LGksbixyKXtjb25zdCBmPXRoaXMub3Blbk1hcC5nZXQodCksRT10aGlzLm9wZW5NYXAuZ2V0KG4pO2lmKCEoZiBpbnN0YW5jZW9mIFQpfHwhKEUgaW5zdGFuY2VvZiBUKSlyZXR1cm4gcy5FQkFERjtpZighZi5jb250YWlucyhpKSlyZXR1cm4gcy5FTk9FTlQ7aWYoRS5jb250YWlucyhyKSlyZXR1cm4gcy5FRVhJU1Q7Zm9yKGNvbnN0IG8gb2YgT2JqZWN0LmtleXModGhpcy5mcykpe2NvbnN0IGE9Zi5mdWxsUGF0aChpKSxoPUUuZnVsbFBhdGgocik7aWYoby5zdGFydHNXaXRoKGEpKXtjb25zdCBjPW8ucmVwbGFjZShhLGgpO3RoaXMuZnNbY109dGhpcy5mc1tvXSxkZWxldGUgdGhpcy5mc1tvXX19cmV0dXJuIHMuU1VDQ0VTU31saXN0KHQpe2NvbnN0IGk9dGhpcy5vcGVuTWFwLmdldCh0KTtyZXR1cm4gaSBpbnN0YW5jZW9mIFQ/W3MuU1VDQ0VTUyxpLmxpc3QoKV06W3MuRUJBREZdfXN0YXQodCl7Y29uc3QgaT10aGlzLm9wZW5NYXAuZ2V0KHQpO3JldHVybiBpIGluc3RhbmNlb2YgQT9bcy5TVUNDRVNTLGkuc3RhdCgpXTpbcy5FQkFERl19cGF0aFN0YXQodCxpKXtpZighKHRoaXMub3Blbk1hcC5nZXQodClpbnN0YW5jZW9mIFQpKXJldHVybltzLkVCQURGXTtpZihpIGluIHRoaXMuZnMpcmV0dXJuW3MuU1VDQ0VTUyxuZXcgQSh0aGlzLmZzW2ldLDApLnN0YXQoKV07aWYoT2JqZWN0LmtleXModGhpcy5mcykuZmluZChyPT5yLnN0YXJ0c1dpdGgoYCR7aX0vYCkpKXtjb25zdCByPWAke2l9L2AsZj1PYmplY3QuZW50cmllcyh0aGlzLmZzKS5maWx0ZXIoKFtFXSk9PkUuc3RhcnRzV2l0aChyKSk7cmV0dXJuW3MuU1VDQ0VTUyxuZXcgVChPYmplY3QuZnJvbUVudHJpZXMoZikscikuc3RhdCgpXX1lbHNlIHJldHVybltzLkVOT1RDQVBBQkxFXX1zZXRGbGFncyh0LGkpe2NvbnN0IG49dGhpcy5vcGVuTWFwLmdldCh0KTtyZXR1cm4gbiBpbnN0YW5jZW9mIEE/KG4uc2V0RmxhZ3MoaSkscy5TVUNDRVNTKTpzLkVCQURGfXNldFNpemUodCxpKXtjb25zdCBuPXRoaXMub3Blbk1hcC5nZXQodCk7cmV0dXJuIG4gaW5zdGFuY2VvZiBBPyhuLnNldFNpemUoTnVtYmVyKGkpKSxzLlNVQ0NFU1MpOnMuRUJBREZ9c2V0QWNjZXNzVGltZSh0LGkpe2NvbnN0IG49dGhpcy5vcGVuTWFwLmdldCh0KTtyZXR1cm4gbiBpbnN0YW5jZW9mIEE/KG4uc2V0QWNjZXNzVGltZShpKSxzLlNVQ0NFU1MpOnMuRUJBREZ9c2V0TW9kaWZpY2F0aW9uVGltZSh0LGkpe2NvbnN0IG49dGhpcy5vcGVuTWFwLmdldCh0KTtyZXR1cm4gbiBpbnN0YW5jZW9mIEE/KG4uc2V0TW9kaWZpY2F0aW9uVGltZShpKSxzLlNVQ0NFU1MpOnMuRUJBREZ9cGF0aFNldEFjY2Vzc1RpbWUodCxpLG4pe2NvbnN0IHI9dGhpcy5vcGVuTWFwLmdldCh0KTtpZighKHIgaW5zdGFuY2VvZiBUKSlyZXR1cm4gcy5FQkFERjtjb25zdCBmPXIuZ2V0KGkpO2lmKCFmKXJldHVybiBzLkVOT1RDQVBBQkxFO2NvbnN0IEU9bmV3IEEoZiwwKTtyZXR1cm4gRS5zZXRBY2Nlc3NUaW1lKG4pLEUuc3luYygpLHMuU1VDQ0VTU31wYXRoU2V0TW9kaWZpY2F0aW9uVGltZSh0LGksbil7Y29uc3Qgcj10aGlzLm9wZW5NYXAuZ2V0KHQpO2lmKCEociBpbnN0YW5jZW9mIFQpKXJldHVybiBzLkVCQURGO2NvbnN0IGY9ci5nZXQoaSk7aWYoIWYpcmV0dXJuIHMuRU5PVENBUEFCTEU7Y29uc3QgRT1uZXcgQShmLDApO3JldHVybiBFLnNldE1vZGlmaWNhdGlvblRpbWUobiksRS5zeW5jKCkscy5TVUNDRVNTfXBhdGhDcmVhdGVEaXIodCxpKXtjb25zdCBuPXRoaXMub3Blbk1hcC5nZXQodCk7aWYoIShuIGluc3RhbmNlb2YgVCkpcmV0dXJuIHMuRUJBREY7aWYobi5jb250YWlucyhpKSlyZXR1cm4gcy5FTk9UQ0FQQUJMRTtjb25zdCByPWAke24uZnVsbFBhdGgoaSl9Ly5ydW5ub2A7cmV0dXJuIHRoaXMuZnNbcl09e3BhdGg6cix0aW1lc3RhbXBzOnthY2Nlc3M6bmV3IERhdGUsbW9kaWZpY2F0aW9uOm5ldyBEYXRlLGNoYW5nZTpuZXcgRGF0ZX0sbW9kZToic3RyaW5nIixjb250ZW50OiIifSxzLlNVQ0NFU1N9ZXhpc3RzKHQpe3JldHVybiB0aGlzLm9wZW5NYXAuaGFzKHQpfWZpbGVUeXBlKHQpe2NvbnN0IGk9dGhpcy5vcGVuTWFwLmdldCh0KTtyZXR1cm4gaT9pIGluc3RhbmNlb2YgQT9iLlJFR1VMQVJfRklMRTpiLkRJUkVDVE9SWTpiLlVOS05PV059ZmlsZUZkZmxhZ3ModCl7Y29uc3QgaT10aGlzLm9wZW5NYXAuZ2V0KHQpO3JldHVybiBpIGluc3RhbmNlb2YgQT9pLmZkZmxhZ3M6MH19Y2xhc3MgQXtjb25zdHJ1Y3Rvcih0LGkpe2QodGhpcywiZmlsZSIpO2QodGhpcywiYnVmZmVyIik7ZCh0aGlzLCJvZmZzZXQiLDApO2QodGhpcywiaXNEaXJ0eSIsITEpO2QodGhpcywiZmRmbGFncyIpO2QodGhpcywiZmxhZ0FwcGVuZCIpO2QodGhpcywiZmxhZ0RTeW5jIik7ZCh0aGlzLCJmbGFnTm9uQmxvY2siKTtkKHRoaXMsImZsYWdSU3luYyIpO2QodGhpcywiZmxhZ1N5bmMiKTtpZih0aGlzLmZpbGU9dCx0aGlzLmZpbGUubW9kZT09PSJzdHJpbmciKXtjb25zdCBuPW5ldyBUZXh0RW5jb2Rlcjt0aGlzLmJ1ZmZlcj1uLmVuY29kZSh0aGlzLmZpbGUuY29udGVudCl9ZWxzZSB0aGlzLmJ1ZmZlcj1uZXcgVWludDhBcnJheSh0aGlzLmZpbGUuY29udGVudCk7dGhpcy5mZGZsYWdzPWksdGhpcy5mbGFnQXBwZW5kPSEhKGkmbS5BUFBFTkQpLHRoaXMuZmxhZ0RTeW5jPSEhKGkmbS5EU1lOQyksdGhpcy5mbGFnTm9uQmxvY2s9ISEoaSZtLk5PTkJMT0NLKSx0aGlzLmZsYWdSU3luYz0hIShpJm0uUlNZTkMpLHRoaXMuZmxhZ1N5bmM9ISEoaSZtLlNZTkMpfXJlYWQodCl7Y29uc3QgaT1uZXcgVWludDhBcnJheSh0aGlzLmJ1ZmZlci5zdWJhcnJheSh0aGlzLm9mZnNldCx0aGlzLm9mZnNldCt0KSk7cmV0dXJuIHRoaXMub2Zmc2V0Kz10LGl9cHJlYWQodCxpKXtyZXR1cm4gbmV3IFVpbnQ4QXJyYXkodGhpcy5idWZmZXIuc3ViYXJyYXkoaSx0KSl9d3JpdGUodCl7aWYodGhpcy5pc0RpcnR5PSEwLHRoaXMuZmxhZ0FwcGVuZCl7Y29uc3QgaT1uZXcgVWludDhBcnJheSh0aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoK3QuYnl0ZUxlbmd0aCk7aS5zZXQodGhpcy5idWZmZXIpLGkuc2V0KHQsdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCksdGhpcy5idWZmZXI9aX1lbHNlIGlmKHRoaXMub2Zmc2V0K3QuYnl0ZUxlbmd0aD50aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKXtjb25zdCBpPW5ldyBVaW50OEFycmF5KHRoaXMub2Zmc2V0K3QuYnl0ZUxlbmd0aCk7aS5zZXQodGhpcy5idWZmZXIpLGkuc2V0KHQsdGhpcy5vZmZzZXQpLHRoaXMuYnVmZmVyPWksdGhpcy5vZmZzZXQrPXQuYnl0ZUxlbmd0aH1lbHNlIHRoaXMuYnVmZmVyLnNldCh0LHRoaXMub2Zmc2V0KSx0aGlzLm9mZnNldCs9dC5ieXRlTGVuZ3RoOyh0aGlzLmZsYWdEU3luY3x8dGhpcy5mbGFnU3luYykmJnRoaXMuc3luYygpfXB3cml0ZSh0LGkpe2lmKHRoaXMuaXNEaXJ0eT0hMCx0aGlzLmZsYWdBcHBlbmQpe2NvbnN0IG49bmV3IFVpbnQ4QXJyYXkodGhpcy5idWZmZXIuYnl0ZUxlbmd0aCt0LmJ5dGVMZW5ndGgraSk7bi5zZXQodGhpcy5idWZmZXIpLG4uc2V0KHQsdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCtpKSx0aGlzLmJ1ZmZlcj1ufWVsc2UgaWYoaSt0LmJ5dGVMZW5ndGg+dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl7Y29uc3Qgbj1uZXcgVWludDhBcnJheShpK3QuYnl0ZUxlbmd0aCk7bi5zZXQodGhpcy5idWZmZXIpLG4uc2V0KHQsaSksdGhpcy5idWZmZXI9bn1lbHNlIHRoaXMuYnVmZmVyLnNldCh0KTsodGhpcy5mbGFnRFN5bmN8fHRoaXMuZmxhZ1N5bmMpJiZ0aGlzLnN5bmMoKX1zeW5jKCl7aWYoIXRoaXMuaXNEaXJ0eSlyZXR1cm47aWYodGhpcy5maWxlLm1vZGU9PT0iYmluYXJ5Iil7dGhpcy5maWxlLmNvbnRlbnQ9dGhpcy5idWZmZXI7cmV0dXJufWNvbnN0IHQ9bmV3IFRleHREZWNvZGVyO3RoaXMuZmlsZS5jb250ZW50PXQuZGVjb2RlKHRoaXMuYnVmZmVyKSx0aGlzLmlzRGlydHk9ITF9c2Vlayh0LGkpe3N3aXRjaChpKXtjYXNlIEkuU0VUOnRoaXMub2Zmc2V0PU51bWJlcih0KTticmVhaztjYXNlIEkuQ1VSOnRoaXMub2Zmc2V0Kz1OdW1iZXIodCk7YnJlYWs7Y2FzZSBJLkVORDp0aGlzLm9mZnNldD10aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoK051bWJlcih0KTticmVha31yZXR1cm4gdGhpcy5vZmZzZXR9dGVsbCgpe3JldHVybiB0aGlzLm9mZnNldH1zdGF0KCl7cmV0dXJue3BhdGg6dGhpcy5maWxlLnBhdGgsdGltZXN0YW1wczp0aGlzLmZpbGUudGltZXN0YW1wcyx0eXBlOmIuUkVHVUxBUl9GSUxFLGJ5dGVMZW5ndGg6dGhpcy5idWZmZXIuYnl0ZUxlbmd0aH19c2V0RmxhZ3ModCl7dGhpcy5mZGZsYWdzPXR9c2V0U2l6ZSh0KXtjb25zdCBpPW5ldyBVaW50OEFycmF5KHQpO2kuc2V0KHRoaXMuYnVmZmVyLnN1YmFycmF5KDAsdCkpLHRoaXMuYnVmZmVyPWl9c2V0QWNjZXNzVGltZSh0KXt0aGlzLmZpbGUudGltZXN0YW1wcy5hY2Nlc3M9dH1zZXRNb2RpZmljYXRpb25UaW1lKHQpe3RoaXMuZmlsZS50aW1lc3RhbXBzLm1vZGlmaWNhdGlvbj10fX1jbGFzcyBUe2NvbnN0cnVjdG9yKHQsaSl7ZCh0aGlzLCJkaXIiKTtkKHRoaXMsInByZWZpeCIpO3RoaXMuZGlyPXQsdGhpcy5wcmVmaXg9aX1jb250YWlucyh0KXtmb3IoY29uc3QgaSBvZiBPYmplY3Qua2V5cyh0aGlzLmRpcikpe2NvbnN0IG49aS5yZXBsYWNlKHRoaXMucHJlZml4LCIiKTtpZihuPT09dHx8bi5zdGFydHNXaXRoKGAke3R9L2ApKXJldHVybiEwfXJldHVybiExfWdldCh0KXtyZXR1cm4gdGhpcy5kaXJbdGhpcy5mdWxsUGF0aCh0KV19ZnVsbFBhdGgodCl7cmV0dXJuYCR7dGhpcy5wcmVmaXh9JHt0fWB9bGlzdCgpe2NvbnN0IHQ9W10saT1uZXcgU2V0O2Zvcihjb25zdCBuIG9mIE9iamVjdC5rZXlzKHRoaXMuZGlyKSl7Y29uc3Qgcj1uLnJlcGxhY2UodGhpcy5wcmVmaXgsIiIpO2lmKHIuaW5jbHVkZXMoIi8iKSl7Y29uc3QgZj1yLnNwbGl0KCIvIilbMF07aWYoaS5oYXMoZikpY29udGludWU7aS5hZGQoZiksdC5wdXNoKHtuYW1lOmYsdHlwZTpiLkRJUkVDVE9SWX0pfWVsc2UgdC5wdXNoKHtuYW1lOnIsdHlwZTpiLlJFR1VMQVJfRklMRX0pfXJldHVybiB0fXN0YXQoKXtyZXR1cm57cGF0aDp0aGlzLnByZWZpeCx0aW1lc3RhbXBzOnthY2Nlc3M6bmV3IERhdGUsbW9kaWZpY2F0aW9uOm5ldyBEYXRlLGNoYW5nZTpuZXcgRGF0ZX0sdHlwZTpiLkRJUkVDVE9SWSxieXRlTGVuZ3RoOjB9fX1jbGFzcyBNe2NvbnN0cnVjdG9yKHQpe2QodGhpcywiaW5zdGFuY2UiKTtkKHRoaXMsIm1vZHVsZSIpO2QodGhpcywibWVtb3J5Iik7ZCh0aGlzLCJjb250ZXh0Iik7ZCh0aGlzLCJkcml2ZSIpO2QodGhpcywiaW5pdGlhbGl6ZWQiLCExKTt0aGlzLmNvbnRleHQ9dCx0aGlzLmRyaXZlPW5ldyB6KHQuZnMpfXN0YXRpYyBhc3luYyBzdGFydCh0LGkpe2NvbnN0IG49bmV3IE0oaSkscj1hd2FpdCBXZWJBc3NlbWJseS5pbnN0YW50aWF0ZVN0cmVhbWluZyh0LHt3YXNpX3NuYXBzaG90X3ByZXZpZXcxOm4uZ2V0SW1wb3J0cygpLHdhc2lfdW5zdGFibGU6bi5nZXRJbXBvcnRzKCl9KTtyZXR1cm4gbi5pbml0KHIpLG4uc3RhcnQoKX1pbml0KHQpe3RoaXMuaW5zdGFuY2U9dC5pbnN0YW5jZSx0aGlzLm1vZHVsZT10Lm1vZHVsZSx0aGlzLm1lbW9yeT10aGlzLmluc3RhbmNlLmV4cG9ydHMubWVtb3J5LHRoaXMuaW5pdGlhbGl6ZWQ9ITB9c3RhcnQoKXtpZighdGhpcy5pbml0aWFsaXplZCl0aHJvdyBuZXcgRXJyb3IoIldBU0kgbXVzdCBiZSBpbml0aWFsaXplZCB3aXRoIGluaXQod2FzbSkgZmlyc3QiKTtjb25zdCB0PXRoaXMuaW5zdGFuY2UuZXhwb3J0cy5fc3RhcnQ7dHJ5e3QoKX1jYXRjaChpKXtpZihpIGluc3RhbmNlb2YgVilyZXR1cm57ZXhpdENvZGU6aS5jb2RlLGZzOnRoaXMuZHJpdmUuZnN9O2lmKGkgaW5zdGFuY2VvZiBXZWJBc3NlbWJseS5SdW50aW1lRXJyb3IpcmV0dXJue2V4aXRDb2RlOjEzNCxmczp0aGlzLmRyaXZlLmZzfTt0aHJvdyBpfXJldHVybntleGl0Q29kZTowLGZzOnRoaXMuZHJpdmUuZnN9fWdldEltcG9ydHMoKXtjb25zdCB0PXthcmdzX2dldDp0aGlzLmFyZ3NfZ2V0LmJpbmQodGhpcyksYXJnc19zaXplc19nZXQ6dGhpcy5hcmdzX3NpemVzX2dldC5iaW5kKHRoaXMpLGNsb2NrX3Jlc19nZXQ6dGhpcy5jbG9ja19yZXNfZ2V0LmJpbmQodGhpcyksY2xvY2tfdGltZV9nZXQ6dGhpcy5jbG9ja190aW1lX2dldC5iaW5kKHRoaXMpLGVudmlyb25fZ2V0OnRoaXMuZW52aXJvbl9nZXQuYmluZCh0aGlzKSxlbnZpcm9uX3NpemVzX2dldDp0aGlzLmVudmlyb25fc2l6ZXNfZ2V0LmJpbmQodGhpcykscHJvY19leGl0OnRoaXMucHJvY19leGl0LmJpbmQodGhpcykscmFuZG9tX2dldDp0aGlzLnJhbmRvbV9nZXQuYmluZCh0aGlzKSxzY2hlZF95aWVsZDp0aGlzLnNjaGVkX3lpZWxkLmJpbmQodGhpcyksZmRfYWR2aXNlOnRoaXMuZmRfYWR2aXNlLmJpbmQodGhpcyksZmRfYWxsb2NhdGU6dGhpcy5mZF9hbGxvY2F0ZS5iaW5kKHRoaXMpLGZkX2Nsb3NlOnRoaXMuZmRfY2xvc2UuYmluZCh0aGlzKSxmZF9kYXRhc3luYzp0aGlzLmZkX2RhdGFzeW5jLmJpbmQodGhpcyksZmRfZmRzdGF0X2dldDp0aGlzLmZkX2Zkc3RhdF9nZXQuYmluZCh0aGlzKSxmZF9mZHN0YXRfc2V0X2ZsYWdzOnRoaXMuZmRfZmRzdGF0X3NldF9mbGFncy5iaW5kKHRoaXMpLGZkX2Zkc3RhdF9zZXRfcmlnaHRzOnRoaXMuZmRfZmRzdGF0X3NldF9yaWdodHMuYmluZCh0aGlzKSxmZF9maWxlc3RhdF9nZXQ6dGhpcy5mZF9maWxlc3RhdF9nZXQuYmluZCh0aGlzKSxmZF9maWxlc3RhdF9zZXRfc2l6ZTp0aGlzLmZkX2ZpbGVzdGF0X3NldF9zaXplLmJpbmQodGhpcyksZmRfZmlsZXN0YXRfc2V0X3RpbWVzOnRoaXMuZmRfZmlsZXN0YXRfc2V0X3RpbWVzLmJpbmQodGhpcyksZmRfcHJlYWQ6dGhpcy5mZF9wcmVhZC5iaW5kKHRoaXMpLGZkX3ByZXN0YXRfZGlyX25hbWU6dGhpcy5mZF9wcmVzdGF0X2Rpcl9uYW1lLmJpbmQodGhpcyksZmRfcHJlc3RhdF9nZXQ6dGhpcy5mZF9wcmVzdGF0X2dldC5iaW5kKHRoaXMpLGZkX3B3cml0ZTp0aGlzLmZkX3B3cml0ZS5iaW5kKHRoaXMpLGZkX3JlYWQ6dGhpcy5mZF9yZWFkLmJpbmQodGhpcyksZmRfcmVhZGRpcjp0aGlzLmZkX3JlYWRkaXIuYmluZCh0aGlzKSxmZF9yZW51bWJlcjp0aGlzLmZkX3JlbnVtYmVyLmJpbmQodGhpcyksZmRfc2Vlazp0aGlzLmZkX3NlZWsuYmluZCh0aGlzKSxmZF9zeW5jOnRoaXMuZmRfc3luYy5iaW5kKHRoaXMpLGZkX3RlbGw6dGhpcy5mZF90ZWxsLmJpbmQodGhpcyksZmRfd3JpdGU6dGhpcy5mZF93cml0ZS5iaW5kKHRoaXMpLHBhdGhfZmlsZXN0YXRfZ2V0OnRoaXMucGF0aF9maWxlc3RhdF9nZXQuYmluZCh0aGlzKSxwYXRoX2ZpbGVzdGF0X3NldF90aW1lczp0aGlzLnBhdGhfZmlsZXN0YXRfc2V0X3RpbWVzLmJpbmQodGhpcykscGF0aF9vcGVuOnRoaXMucGF0aF9vcGVuLmJpbmQodGhpcykscGF0aF9yZW5hbWU6dGhpcy5wYXRoX3JlbmFtZS5iaW5kKHRoaXMpLHBhdGhfdW5saW5rX2ZpbGU6dGhpcy5wYXRoX3VubGlua19maWxlLmJpbmQodGhpcykscGF0aF9jcmVhdGVfZGlyZWN0b3J5OnRoaXMucGF0aF9jcmVhdGVfZGlyZWN0b3J5LmJpbmQodGhpcykscGF0aF9saW5rOnRoaXMucGF0aF9saW5rLmJpbmQodGhpcykscGF0aF9yZWFkbGluazp0aGlzLnBhdGhfcmVhZGxpbmsuYmluZCh0aGlzKSxwYXRoX3JlbW92ZV9kaXJlY3Rvcnk6dGhpcy5wYXRoX3JlbW92ZV9kaXJlY3RvcnkuYmluZCh0aGlzKSxwYXRoX3N5bWxpbms6dGhpcy5wYXRoX3N5bWxpbmsuYmluZCh0aGlzKSxwb2xsX29uZW9mZjp0aGlzLnBvbGxfb25lb2ZmLmJpbmQodGhpcykscHJvY19yYWlzZTp0aGlzLnByb2NfcmFpc2UuYmluZCh0aGlzKSxzb2NrX2FjY2VwdDp0aGlzLnNvY2tfYWNjZXB0LmJpbmQodGhpcyksc29ja19yZWN2OnRoaXMuc29ja19yZWN2LmJpbmQodGhpcyksc29ja19zZW5kOnRoaXMuc29ja19zZW5kLmJpbmQodGhpcyksc29ja19zaHV0ZG93bjp0aGlzLnNvY2tfc2h1dGRvd24uYmluZCh0aGlzKX07Zm9yKGNvbnN0W2ksbl1vZiBPYmplY3QuZW50cmllcyh0KSl0W2ldPWZ1bmN0aW9uKCl7Y29uc3Qgcj1uLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm4gY29uc29sZS5sb2coaSxhcmd1bWVudHMsIiA9PiAiLHIpLHJ9O3JldHVybiB0fWdldCBlbnZBcnJheSgpe3JldHVybiBPYmplY3QuZW50cmllcyh0aGlzLmNvbnRleHQuZW52KS5tYXAoKFt0LGldKT0+YCR7dH09JHtpfWApfWFyZ3NfZ2V0KHQsaSl7Y29uc3Qgbj1uZXcgRGF0YVZpZXcodGhpcy5tZW1vcnkuYnVmZmVyKTtmb3IoY29uc3QgciBvZiB0aGlzLmNvbnRleHQuYXJncyl7bi5zZXRVaW50MzIodCxpLCEwKSx0Kz00O2NvbnN0IGY9bmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKGAke3J9XDBgKTtuZXcgVWludDhBcnJheSh0aGlzLm1lbW9yeS5idWZmZXIsaSxmLmJ5dGVMZW5ndGgpLnNldChmKSxpKz1mLmJ5dGVMZW5ndGh9cmV0dXJuIHMuU1VDQ0VTU31hcmdzX3NpemVzX2dldCh0LGkpe2NvbnN0IG49dGhpcy5jb250ZXh0LmFyZ3Mscj1uLnJlZHVjZSgoRSxvKT0+RStuZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUoYCR7b31cMGApLmJ5dGVMZW5ndGgsMCksZj1uZXcgRGF0YVZpZXcodGhpcy5tZW1vcnkuYnVmZmVyKTtyZXR1cm4gZi5zZXRVaW50MzIodCxuLmxlbmd0aCwhMCksZi5zZXRVaW50MzIoaSxyLCEwKSxzLlNVQ0NFU1N9Y2xvY2tfcmVzX2dldCh0LGkpe3N3aXRjaCh0KXtjYXNlIGcuUkVBTFRJTUU6Y2FzZSBnLk1PTk9UT05JQzpjYXNlIGcuUFJPQ0VTU19DUFVUSU1FX0lEOmNhc2UgZy5USFJFQURfQ1BVVElNRV9JRDpyZXR1cm4gbmV3IERhdGFWaWV3KHRoaXMubWVtb3J5LmJ1ZmZlcikuc2V0QmlnVWludDY0KGksQmlnSW50KDFlNiksITApLHMuU1VDQ0VTU31yZXR1cm4gcy5FSU5WQUx9Y2xvY2tfdGltZV9nZXQodCxpLG4pe3N3aXRjaCh0KXtjYXNlIGcuUkVBTFRJTUU6Y2FzZSBnLk1PTk9UT05JQzpjYXNlIGcuUFJPQ0VTU19DUFVUSU1FX0lEOmNhc2UgZy5USFJFQURfQ1BVVElNRV9JRDpyZXR1cm4gbmV3IERhdGFWaWV3KHRoaXMubWVtb3J5LmJ1ZmZlcikuc2V0QmlnVWludDY0KG4sQihuZXcgRGF0ZSksITApLHMuU1VDQ0VTU31yZXR1cm4gcy5FSU5WQUx9ZW52aXJvbl9nZXQodCxpKXtjb25zdCBuPW5ldyBEYXRhVmlldyh0aGlzLm1lbW9yeS5idWZmZXIpO2Zvcihjb25zdCByIG9mIHRoaXMuZW52QXJyYXkpe24uc2V0VWludDMyKHQsaSwhMCksdCs9NDtjb25zdCBmPW5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShgJHtyfVwwYCk7bmV3IFVpbnQ4QXJyYXkodGhpcy5tZW1vcnkuYnVmZmVyLGksZi5ieXRlTGVuZ3RoKS5zZXQoZiksaSs9Zi5ieXRlTGVuZ3RofXJldHVybiBzLlNVQ0NFU1N9ZW52aXJvbl9zaXplc19nZXQodCxpKXtjb25zdCBuPXRoaXMuZW52QXJyYXkucmVkdWNlKChmLEUpPT5mK25ldyBUZXh0RW5jb2RlcigpLmVuY29kZShgJHtFfVwwYCkuYnl0ZUxlbmd0aCwwKSxyPW5ldyBEYXRhVmlldyh0aGlzLm1lbW9yeS5idWZmZXIpO3JldHVybiByLnNldFVpbnQzMih0LHRoaXMuZW52QXJyYXkubGVuZ3RoLCEwKSxyLnNldFVpbnQzMihpLG4sITApLHMuU1VDQ0VTU31wcm9jX2V4aXQodCl7dGhyb3cgbmV3IFYodCl9cmFuZG9tX2dldCh0LGkpe2NvbnN0IG49bmV3IFVpbnQ4QXJyYXkodGhpcy5tZW1vcnkuYnVmZmVyLHQsaSk7cmV0dXJuIGNyeXB0by5nZXRSYW5kb21WYWx1ZXMobikscy5TVUNDRVNTfXNjaGVkX3lpZWxkKCl7cmV0dXJuIHMuU1VDQ0VTU31mZF9yZWFkKHQsaSxuLHIpe2lmKHQ9PT0xfHx0PT09MilyZXR1cm4gcy5FTk9UU1VQO2NvbnN0IGY9bmV3IERhdGFWaWV3KHRoaXMubWVtb3J5LmJ1ZmZlciksRT1wKGYsaSxuKSxvPW5ldyBUZXh0RW5jb2RlcjtsZXQgYT0wLGg9cy5TVUNDRVNTO2Zvcihjb25zdCBjIG9mIEUpe2xldCBTO2lmKHQ9PT0wKXtjb25zdCBDPXRoaXMuY29udGV4dC5zdGRpbihjLmJ5dGVMZW5ndGgpO2lmKCFDKWJyZWFrO1M9by5lbmNvZGUoQyl9ZWxzZXtjb25zdFtDLE5dPXRoaXMuZHJpdmUucmVhZCh0LGMuYnl0ZUxlbmd0aCk7aWYoQyl7aD1DO2JyZWFrfWVsc2UgUz1OfWNvbnN0IHU9TWF0aC5taW4oYy5ieXRlTGVuZ3RoLFMuYnl0ZUxlbmd0aCk7Yy5zZXQoUy5zdWJhcnJheSgwLHUpKSxhKz11fXJldHVybiBmLnNldFVpbnQzMihyLGEsITApLGh9ZmRfd3JpdGUodCxpLG4scil7aWYodD09PTApcmV0dXJuIHMuRU5PVFNVUDtjb25zdCBmPW5ldyBEYXRhVmlldyh0aGlzLm1lbW9yeS5idWZmZXIpLEU9cChmLGksbiksbz1uZXcgVGV4dERlY29kZXI7bGV0IGE9MCxoPXMuU1VDQ0VTUztmb3IoY29uc3QgYyBvZiBFKWlmKGMuYnl0ZUxlbmd0aCE9PTApe2lmKHQ9PT0xfHx0PT09Mil7Y29uc3QgUz10PT09MT90aGlzLmNvbnRleHQuc3Rkb3V0OnRoaXMuY29udGV4dC5zdGRlcnIsdT1vLmRlY29kZShuZXcgVWludDhBcnJheShjKSk7Uyh1KX1lbHNlIGlmKGg9dGhpcy5kcml2ZS53cml0ZSh0LG5ldyBVaW50OEFycmF5KGMpKSxoIT1zLlNVQ0NFU1MpYnJlYWs7YSs9Yy5ieXRlTGVuZ3RofXJldHVybiBmLnNldFVpbnQzMihyLGEsITApLGh9ZmRfYWR2aXNlKCl7cmV0dXJuIHMuU1VDQ0VTU31mZF9hbGxvY2F0ZSh0LGksbil7cmV0dXJuIHRoaXMuZHJpdmUucHdyaXRlKHQsbmV3IFVpbnQ4QXJyYXkoTnVtYmVyKG4pKSxOdW1iZXIoaSkpfWZkX2Nsb3NlKHQpe3JldHVybiB0aGlzLmRyaXZlLmNsb3NlKHQpfWZkX2RhdGFzeW5jKHQpe3JldHVybiB0aGlzLmRyaXZlLnN5bmModCl9ZmRfZmRzdGF0X2dldCh0LGkpe2lmKHQ8Myl7Y29uc3Qgbz1ZKGIuQ0hBUkFDVEVSX0RFVklDRSwwKTtyZXR1cm4gbmV3IFVpbnQ4QXJyYXkodGhpcy5tZW1vcnkuYnVmZmVyLGksby5ieXRlTGVuZ3RoKS5zZXQobykscy5TVUNDRVNTfWlmKCF0aGlzLmRyaXZlLmV4aXN0cyh0KSlyZXR1cm4gcy5FQkFERjtjb25zdCBuPXRoaXMuZHJpdmUuZmlsZVR5cGUodCkscj10aGlzLmRyaXZlLmZpbGVGZGZsYWdzKHQpLGY9WShuLHIpO3JldHVybiBuZXcgVWludDhBcnJheSh0aGlzLm1lbW9yeS5idWZmZXIsaSxmLmJ5dGVMZW5ndGgpLnNldChmKSxzLlNVQ0NFU1N9ZmRfZmRzdGF0X3NldF9mbGFncyh0LGkpe3JldHVybiB0aGlzLmRyaXZlLnNldEZsYWdzKHQsaSl9ZmRfZmRzdGF0X3NldF9yaWdodHMoKXtyZXR1cm4gcy5TVUNDRVNTfWZkX2ZpbGVzdGF0X2dldCh0LGkpe2NvbnN0W24scl09dGhpcy5kcml2ZS5zdGF0KHQpO2lmKG4hPXMuU1VDQ0VTUylyZXR1cm4gbjtjb25zdCBmPUgocik7cmV0dXJuIG5ldyBVaW50OEFycmF5KHRoaXMubWVtb3J5LmJ1ZmZlcixpLGYuYnl0ZUxlbmd0aCkuc2V0KGYpLHMuU1VDQ0VTU31mZF9maWxlc3RhdF9zZXRfc2l6ZSh0LGkpe3JldHVybiB0aGlzLmRyaXZlLnNldFNpemUodCxpKX1mZF9maWxlc3RhdF9zZXRfdGltZXModCxpLG4scil7bGV0IGY9bnVsbDtyJk8uQVRJTSYmKGY9VShpKSksciZPLkFUSU1fTk9XJiYoZj1uZXcgRGF0ZSk7bGV0IEU9bnVsbDtpZihyJk8uTVRJTSYmKEU9VShuKSksciZPLk1USU1fTk9XJiYoRT1uZXcgRGF0ZSksZil7Y29uc3Qgbz10aGlzLmRyaXZlLnNldEFjY2Vzc1RpbWUodCxmKTtpZihvIT1zLlNVQ0NFU1MpcmV0dXJuIG99aWYoRSl7Y29uc3Qgbz10aGlzLmRyaXZlLnNldE1vZGlmaWNhdGlvblRpbWUodCxFKTtpZihvIT1zLlNVQ0NFU1MpcmV0dXJuIG99cmV0dXJuIHMuU1VDQ0VTU31mZF9wcmVhZCh0LGksbixyLGYpe2lmKHQ9PT0xfHx0PT09MilyZXR1cm4gcy5FTk9UU1VQO2lmKHQ9PT0wKXJldHVybiB0aGlzLmZkX3JlYWQodCxpLG4sZik7Y29uc3QgRT1uZXcgRGF0YVZpZXcodGhpcy5tZW1vcnkuYnVmZmVyKSxvPXAoRSxpLG4pO2xldCBhPTAsaD1zLlNVQ0NFU1M7Zm9yKGNvbnN0IGMgb2Ygbyl7bGV0IFM7Y29uc3RbdSxDXT10aGlzLmRyaXZlLnByZWFkKHQsYy5ieXRlTGVuZ3RoLE51bWJlcihyKSk7aWYodSE9PXMuU1VDQ0VTUyl7aD11O2JyZWFrfWVsc2UgUz1DO2NvbnN0IE49TWF0aC5taW4oYy5ieXRlTGVuZ3RoLFMuYnl0ZUxlbmd0aCk7Yy5zZXQoUy5zdWJhcnJheSgwLE4pKSxhKz1OfXJldHVybiBFLnNldFVpbnQzMihmLGEsITApLGh9ZmRfcHJlc3RhdF9kaXJfbmFtZSh0LGksbil7aWYodCE9PTMpcmV0dXJuIHMuRUJBREY7Y29uc3Qgcj1uZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUoIi4iKTtyZXR1cm4gbmV3IFVpbnQ4QXJyYXkodGhpcy5tZW1vcnkuYnVmZmVyLGksbikuc2V0KHIuc3ViYXJyYXkoMCxuKSkscy5TVUNDRVNTfWZkX3ByZXN0YXRfZ2V0KHQsaSl7aWYodCE9PTMpcmV0dXJuIHMuRUJBREY7Y29uc3Qgbj1uZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUoIi4iKSxyPW5ldyBEYXRhVmlldyh0aGlzLm1lbW9yeS5idWZmZXIsaSk7cmV0dXJuIHIuc2V0VWludDgoMCxQLkRJUiksci5zZXRVaW50MzIoNCxuLmJ5dGVMZW5ndGgsITApLHMuU1VDQ0VTU31mZF9wd3JpdGUodCxpLG4scixmKXtpZih0PT09MClyZXR1cm4gcy5FTk9UU1VQO2lmKHQ9PT0xfHx0PT09MilyZXR1cm4gdGhpcy5mZF93cml0ZSh0LGksbixmKTtjb25zdCBFPW5ldyBEYXRhVmlldyh0aGlzLm1lbW9yeS5idWZmZXIpLG89cChFLGksbik7bGV0IGE9MCxoPXMuU1VDQ0VTUztmb3IoY29uc3QgYyBvZiBvKWlmKGMuYnl0ZUxlbmd0aCE9PTApe2lmKGg9dGhpcy5kcml2ZS5wd3JpdGUodCxuZXcgVWludDhBcnJheShjKSxOdW1iZXIocikpLGghPXMuU1VDQ0VTUylicmVhazthKz1jLmJ5dGVMZW5ndGh9cmV0dXJuIEUuc2V0VWludDMyKGYsYSwhMCksaH1mZF9yZWFkZGlyKHQsaSxuLHIsZil7Y29uc3RbRSxvXT10aGlzLmRyaXZlLmxpc3QodCk7aWYoRSE9cy5TVUNDRVNTKXJldHVybiBFO2xldCBhPVtdLGg9MDtmb3IoY29uc3R7bmFtZTp5LHR5cGU6Rn1vZiBvKXtjb25zdCBldD1YKHksRixoKTthLnB1c2goZXQpLGgrK31hPWEuc2xpY2UoTnVtYmVyKHIpKTtjb25zdCBjPWEucmVkdWNlKCh5LEYpPT55K0YuYnl0ZUxlbmd0aCwwKSxTPW5ldyBVaW50OEFycmF5KGMpO2xldCB1PTA7Zm9yKGNvbnN0IHkgb2YgYSlTLnNldCh5LHUpLHUrPXkuYnl0ZUxlbmd0aDtjb25zdCBDPW5ldyBVaW50OEFycmF5KHRoaXMubWVtb3J5LmJ1ZmZlcixpLG4pLE49Uy5zdWJhcnJheSgwLG4pO3JldHVybiBDLnNldChOKSxuZXcgRGF0YVZpZXcodGhpcy5tZW1vcnkuYnVmZmVyKS5zZXRVaW50MzIoZixOLmJ5dGVMZW5ndGgsITApLHMuU1VDQ0VTU31mZF9yZW51bWJlcih0LGkpe3JldHVybiB0aGlzLmRyaXZlLnJlbnVtYmVyKHQsaSl9ZmRfc2Vlayh0LGksbixyKXtjb25zdFtmLEVdPXRoaXMuZHJpdmUuc2Vlayh0LGksbik7cmV0dXJuIGYhPT1zLlNVQ0NFU1N8fG5ldyBEYXRhVmlldyh0aGlzLm1lbW9yeS5idWZmZXIpLnNldFVpbnQzMihyLEUsITApLGZ9ZmRfc3luYyh0KXtyZXR1cm4gdGhpcy5kcml2ZS5zeW5jKHQpfWZkX3RlbGwodCxpKXtjb25zdFtuLHJdPXRoaXMuZHJpdmUudGVsbCh0KTtyZXR1cm4gbiE9PXMuU1VDQ0VTU3x8bmV3IERhdGFWaWV3KHRoaXMubWVtb3J5LmJ1ZmZlcikuc2V0VWludDMyKGksciwhMCksbn1wYXRoX2ZpbGVzdGF0X2dldCh0LGksbixyLGYpe2NvbnN0IEU9bmV3IFRleHREZWNvZGVyKCkuZGVjb2RlKG5ldyBVaW50OEFycmF5KHRoaXMubWVtb3J5LmJ1ZmZlcixuLHIpKSxbbyxhXT10aGlzLmRyaXZlLnBhdGhTdGF0KHQsRSk7aWYobyE9cy5TVUNDRVNTKXJldHVybiBvO2NvbnN0IGg9SChhKTtyZXR1cm4gbmV3IFVpbnQ4QXJyYXkodGhpcy5tZW1vcnkuYnVmZmVyLGYsaC5ieXRlTGVuZ3RoKS5zZXQoaCksb31wYXRoX2ZpbGVzdGF0X3NldF90aW1lcyh0LGksbixyLGYsRSxvKXtsZXQgYT1udWxsO28mTy5BVElNJiYoYT1VKGYpKSxvJk8uQVRJTV9OT1cmJihhPW5ldyBEYXRlKTtsZXQgaD1udWxsO28mTy5NVElNJiYoaD1VKEUpKSxvJk8uTVRJTV9OT1cmJihoPW5ldyBEYXRlKTtjb25zdCBjPW5ldyBUZXh0RGVjb2RlcigpLmRlY29kZShuZXcgVWludDhBcnJheSh0aGlzLm1lbW9yeS5idWZmZXIsbixyKSk7aWYoYSl7Y29uc3QgUz10aGlzLmRyaXZlLnBhdGhTZXRBY2Nlc3NUaW1lKHQsYyxhKTtpZihTIT1zLlNVQ0NFU1MpcmV0dXJuIFN9aWYoaCl7Y29uc3QgUz10aGlzLmRyaXZlLnBhdGhTZXRNb2RpZmljYXRpb25UaW1lKHQsYyxoKTtpZihTIT1zLlNVQ0NFU1MpcmV0dXJuIFN9cmV0dXJuIHMuU1VDQ0VTU31wYXRoX29wZW4odCxpLG4scixmLEUsbyxhLGgpe2NvbnN0IGM9bmV3IERhdGFWaWV3KHRoaXMubWVtb3J5LmJ1ZmZlciksUz13KHRoaXMubWVtb3J5LG4sciksW3UsQ109dGhpcy5kcml2ZS5vcGVuKHQsUyxmLGEpO3JldHVybiB1fHwoYy5zZXRVaW50MzIoaCxDLCEwKSx1KX1wYXRoX3JlbmFtZSh0LGksbixyLGYsRSl7Y29uc3Qgbz13KHRoaXMubWVtb3J5LGksbiksYT13KHRoaXMubWVtb3J5LGYsRSk7cmV0dXJuIHRoaXMuZHJpdmUucmVuYW1lKHQsbyxyLGEpfXBhdGhfdW5saW5rX2ZpbGUodCxpLG4pe2NvbnN0IHI9dyh0aGlzLm1lbW9yeSxpLG4pO3JldHVybiB0aGlzLmRyaXZlLnVubGluayh0LHIpfXBvbGxfb25lb2ZmKHQsaSxuLHIpe2ZvcihsZXQgRT0wO0U8bjtFKyspe2NvbnN0IG89bmV3IFVpbnQ4QXJyYXkodGhpcy5tZW1vcnkuYnVmZmVyLHQrRSp2LHYpLGE9JChvKSxoPW5ldyBVaW50OEFycmF5KHRoaXMubWVtb3J5LmJ1ZmZlcixpK0UqayxrKTtsZXQgYz0wLFM9cy5TVUNDRVNTO3N3aXRjaChhLnR5cGUpe2Nhc2UgRC5DTE9DSzpmb3IoO25ldyBEYXRlPGEudGltZW91dDspO2guc2V0KGooYS51c2VyZGF0YSxzLlNVQ0NFU1MpKTticmVhaztjYXNlIEQuRkRfUkVBRDppZihhLmZkPDMpYS5mZD09PTA/KFM9cy5TVUNDRVNTLGM9MzIpOlM9cy5FQkFERjtlbHNle2NvbnN0W3UsQ109dGhpcy5kcml2ZS5zdGF0KGEuZmQpO1M9dSxjPUM/Qy5ieXRlTGVuZ3RoOjB9aC5zZXQoSyhhLnVzZXJkYXRhLFMsRC5GRF9SRUFELEJpZ0ludChjKSkpO2JyZWFrO2Nhc2UgRC5GRF9XUklURTppZihjPTAsUz1zLlNVQ0NFU1MsYS5mZDwzKWEuZmQ9PT0wP1M9cy5FQkFERjooUz1zLlNVQ0NFU1MsYz0xMDI0KTtlbHNle2NvbnN0W3UsQ109dGhpcy5kcml2ZS5zdGF0KGEuZmQpO1M9dSxjPUM/Qy5ieXRlTGVuZ3RoOjB9aC5zZXQoSyhhLnVzZXJkYXRhLFMsRC5GRF9SRUFELEJpZ0ludChjKSkpO2JyZWFrfX1yZXR1cm4gbmV3IERhdGFWaWV3KHRoaXMubWVtb3J5LmJ1ZmZlcixyLDQpLnNldFVpbnQzMigwLG4sITApLHMuU1VDQ0VTU31wYXRoX2NyZWF0ZV9kaXJlY3RvcnkodCxpLG4pe2NvbnN0IHI9dyh0aGlzLm1lbW9yeSxpLG4pO3JldHVybiB0aGlzLmRyaXZlLnBhdGhDcmVhdGVEaXIodCxyKX1wYXRoX2xpbmsoKXtyZXR1cm4gcy5FTk9TWVN9cGF0aF9yZWFkbGluaygpe3JldHVybiBzLkVOT1NZU31wYXRoX3JlbW92ZV9kaXJlY3RvcnkoKXtyZXR1cm4gcy5FTk9TWVN9cGF0aF9zeW1saW5rKCl7cmV0dXJuIHMuRU5PU1lTfXByb2NfcmFpc2UoKXtyZXR1cm4gcy5FTk9TWVN9c29ja19hY2NlcHQoKXtyZXR1cm4gcy5FTk9TWVN9c29ja19yZWN2KCl7cmV0dXJuIHMuRU5PU1lTfXNvY2tfc2VuZCgpe3JldHVybiBzLkVOT1NZU31zb2NrX3NodXRkb3duKCl7cmV0dXJuIHMuRU5PU1lTfX1jb25zdCB4PV8uRkRfREFUQVNZTkN8Xy5GRF9SRUFEfF8uRkRfU0VFS3xfLkZEX0ZEU1RBVF9TRVRfRkxBR1N8Xy5GRF9TWU5DfF8uRkRfVEVMTHxfLkZEX1dSSVRFfF8uRkRfQURWSVNFfF8uRkRfQUxMT0NBVEV8Xy5QQVRIX0NSRUFURV9ESVJFQ1RPUll8Xy5QQVRIX0NSRUFURV9GSUxFfF8uUEFUSF9MSU5LX1NPVVJDRXxfLlBBVEhfTElOS19UQVJHRVR8Xy5QQVRIX09QRU58Xy5GRF9SRUFERElSfF8uUEFUSF9SRUFETElOS3xfLlBBVEhfUkVOQU1FX1NPVVJDRXxfLlBBVEhfUkVOQU1FX1RBUkdFVHxfLlBBVEhfRklMRVNUQVRfR0VUfF8uUEFUSF9GSUxFU1RBVF9TRVRfU0laRXxfLlBBVEhfRklMRVNUQVRfU0VUX1RJTUVTfF8uRkRfRklMRVNUQVRfR0VUfF8uRkRfRklMRVNUQVRfU0VUX1NJWkV8Xy5GRF9GSUxFU1RBVF9TRVRfVElNRVN8Xy5QQVRIX1NZTUxJTkt8Xy5QQVRIX1JFTU9WRV9ESVJFQ1RPUll8Xy5QQVRIX1VOTElOS19GSUxFfF8uUE9MTF9GRF9SRUFEV1JJVEV8Xy5TT0NLX1NIVVRET1dOfF8uU09DS19BQ0NFUFQ7Y2xhc3MgViBleHRlbmRzIEVycm9ye2NvbnN0cnVjdG9yKGkpe3N1cGVyKCk7ZCh0aGlzLCJjb2RlIik7dGhpcy5jb2RlPWl9fWZ1bmN0aW9uIHcoZSx0LGkpe3JldHVybiBuZXcgVGV4dERlY29kZXIoKS5kZWNvZGUobmV3IFVpbnQ4QXJyYXkoZS5idWZmZXIsdCxpKSl9ZnVuY3Rpb24gcChlLHQsaSl7bGV0IG49QXJyYXkoaSk7Zm9yKGxldCByPTA7cjxpO3IrKyl7Y29uc3QgZj1lLmdldFVpbnQzMih0LCEwKTt0Kz00O2NvbnN0IEU9ZS5nZXRVaW50MzIodCwhMCk7dCs9NCxuW3JdPW5ldyBVaW50OEFycmF5KGUuYnVmZmVyLGYsRSl9cmV0dXJuIG59ZnVuY3Rpb24gJChlKXtjb25zdCB0PW5ldyBVaW50OEFycmF5KDgpO3Quc2V0KGUuc3ViYXJyYXkoMCw4KSk7Y29uc3QgaT1lWzhdLG49bmV3IERhdGFWaWV3KGUuYnVmZmVyLGUuYnl0ZU9mZnNldCs5KTtzd2l0Y2goaSl7Y2FzZSBELkZEX1JFQUQ6Y2FzZSBELkZEX1dSSVRFOnJldHVybnt1c2VyZGF0YTp0LHR5cGU6aSxmZDpuLmdldFVpbnQzMigwLCEwKX07Y2FzZSBELkNMT0NLOmNvbnN0IHI9bi5nZXRVaW50MTYoMjQsITApLGY9QihuZXcgRGF0ZSksRT1uLmdldEJpZ1VpbnQ2NCg4LCEwKSxvPW4uZ2V0QmlnVWludDY0KDE2LCEwKSxhPXImRy5TVUJTQ1JJUFRJT05fQ0xPQ0tfQUJTVElNRT9FOmYrRTtyZXR1cm57dXNlcmRhdGE6dCx0eXBlOmksaWQ6bi5nZXRVaW50MzIoMCwhMCksdGltZW91dDpVKGEpLHByZWNpc2lvbjpVKGErbyl9fX1mdW5jdGlvbiBIKGUpe2NvbnN0IHQ9bmV3IFVpbnQ4QXJyYXkoUiksaT1uZXcgRGF0YVZpZXcodC5idWZmZXIpO3JldHVybiBpLnNldEJpZ1VpbnQ2NCgwLEJpZ0ludCgwKSwhMCksaS5zZXRCaWdVaW50NjQoOCxCaWdJbnQoVyhlLnBhdGgpKSwhMCksaS5zZXRVaW50OCgxNixlLnR5cGUpLGkuc2V0QmlnVWludDY0KDI0LEJpZ0ludCgwKSwhMCksaS5zZXRCaWdVaW50NjQoMzIsQmlnSW50KGUuYnl0ZUxlbmd0aCksITApLGkuc2V0QmlnVWludDY0KDQwLEJpZ0ludChCKGUudGltZXN0YW1wcy5hY2Nlc3MpKSksaS5zZXRCaWdVaW50NjQoNDgsQmlnSW50KEIoZS50aW1lc3RhbXBzLm1vZGlmaWNhdGlvbikpKSxpLnNldEJpZ1VpbnQ2NCg1NixCaWdJbnQoQihlLnRpbWVzdGFtcHMuY2hhbmdlKSkpLHR9ZnVuY3Rpb24gWShlLHQpe2NvbnN0IGk9eCxuPXgscj1uZXcgVWludDhBcnJheSgyNCksZj1uZXcgRGF0YVZpZXcoci5idWZmZXIsMCwyNCk7cmV0dXJuIGYuc2V0VWludDgoMCxlKSxmLnNldFVpbnQzMigyLHQsITApLGYuc2V0QmlnVWludDY0KDgsaSwhMCksZi5zZXRCaWdVaW50NjQoMTYsbiwhMCkscn1mdW5jdGlvbiBYKGUsdCxpKXtjb25zdCBuPW5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShlKSxyPTI0K24uYnl0ZUxlbmd0aCxmPW5ldyBVaW50OEFycmF5KHIpLEU9bmV3IERhdGFWaWV3KGYuYnVmZmVyKTtyZXR1cm4gRS5zZXRCaWdVaW50NjQoMCxCaWdJbnQoaSsxKSwhMCksRS5zZXRCaWdVaW50NjQoOCxCaWdJbnQoVyhlKSksITApLEUuc2V0VWludDMyKDE2LG4ubGVuZ3RoLCEwKSxFLnNldFVpbnQ4KDIwLHQpLGYuc2V0KG4sMjQpLGZ9ZnVuY3Rpb24gaihlLHQpe2NvbnN0IGk9bmV3IFVpbnQ4QXJyYXkoMzIpO2kuc2V0KGUsMCk7Y29uc3Qgbj1uZXcgRGF0YVZpZXcoaS5idWZmZXIpO3JldHVybiBuLnNldFVpbnQxNig4LHQsITApLG4uc2V0VWludDE2KDEwLEQuQ0xPQ0ssITApLGl9ZnVuY3Rpb24gSyhlLHQsaSxuKXtjb25zdCByPW5ldyBVaW50OEFycmF5KDMyKTtyLnNldChlLDApO2NvbnN0IGY9bmV3IERhdGFWaWV3KHIuYnVmZmVyKTtyZXR1cm4gZi5zZXRVaW50MTYoOCx0LCEwKSxmLnNldFVpbnQxNigxMCxpLCEwKSxmLnNldEJpZ1VpbnQ2NCgxNixuLCEwKSxyfWZ1bmN0aW9uIFcoZSx0PTApe2xldCBpPTM3MzU5Mjg1NTledCxuPTExMDM1NDc5OTFedDtmb3IobGV0IHI9MCxmO3I8ZS5sZW5ndGg7cisrKWY9ZS5jaGFyQ29kZUF0KHIpLGk9TWF0aC5pbXVsKGleZiwyNjU0NDM1NzYxKSxuPU1hdGguaW11bChuXmYsMTU5NzMzNDY3Nyk7cmV0dXJuIGk9TWF0aC5pbXVsKGleaT4+PjE2LDIyNDY4MjI1MDcpXk1hdGguaW11bChuXm4+Pj4xMywzMjY2NDg5OTA5KSxuPU1hdGguaW11bChuXm4+Pj4xNiwyMjQ2ODIyNTA3KV5NYXRoLmltdWwoaV5pPj4+MTMsMzI2NjQ4OTkwOSksNDI5NDk2NzI5NiooMjA5NzE1MSZuKSsoaT4+PjApfWZ1bmN0aW9uIEIoZSl7cmV0dXJuIEJpZ0ludChlLmdldFRpbWUoKSkqQmlnSW50KDFlNil9ZnVuY3Rpb24gVShlKXtyZXR1cm4gbmV3IERhdGUoTnVtYmVyKGUvQmlnSW50KDFlNikpKX1jbGFzcyBae2NvbnN0cnVjdG9yKHQpe2QodGhpcywiZnMiKTtkKHRoaXMsImFyZ3MiKTtkKHRoaXMsImVudiIpO2QodGhpcywic3RkaW4iKTtkKHRoaXMsInN0ZG91dCIpO2QodGhpcywic3RkZXJyIik7dGhpcy5mcz0odD09bnVsbD92b2lkIDA6dC5mcyk/P3t9LHRoaXMuYXJncz0odD09bnVsbD92b2lkIDA6dC5hcmdzKT8/W10sdGhpcy5lbnY9KHQ9PW51bGw/dm9pZCAwOnQuZW52KT8/e30sdGhpcy5zdGRpbj0odD09bnVsbD92b2lkIDA6dC5zdGRpbik/PygoKT0+bnVsbCksdGhpcy5zdGRvdXQ9KHQ9PW51bGw/dm9pZCAwOnQuc3Rkb3V0KT8/KCgpPT57fSksdGhpcy5zdGRlcnI9KHQ9PW51bGw/dm9pZCAwOnQuc3RkZXJyKT8/KCgpPT57fSl9fW9ubWVzc2FnZT1hc3luYyBlPT57Y29uc3QgdD1lLmRhdGE7c3dpdGNoKHQudHlwZSl7Y2FzZSJzdGFydCI6Y29uc3QgaT1hd2FpdCBRKHQuYmluYXJ5VVJMLHQuc3RkaW5CdWZmZXIsdCk7bCh7dGFyZ2V0OiJob3N0Iix0eXBlOiJyZXN1bHQiLHJlc3VsdDppfSk7YnJlYWt9fTtmdW5jdGlvbiBsKGUpe3Bvc3RNZXNzYWdlKGUpfWFzeW5jIGZ1bmN0aW9uIFEoZSx0LGkpe3JldHVybiBNLnN0YXJ0KGZldGNoKGUpLG5ldyBaKHsuLi5pLHN0ZG91dDpxLHN0ZGVycjpKLHN0ZGluOm49PnR0KG4sdCl9KSl9ZnVuY3Rpb24gcShlKXtsKHt0YXJnZXQ6Imhvc3QiLHR5cGU6InN0ZG91dCIsdGV4dDplfSl9ZnVuY3Rpb24gSihlKXtsKHt0YXJnZXQ6Imhvc3QiLHR5cGU6InN0ZGVyciIsdGV4dDplfSl9ZnVuY3Rpb24gdHQoZSx0KXtBdG9taWNzLndhaXQobmV3IEludDMyQXJyYXkodCksMCwwKTtjb25zdCBpPW5ldyBEYXRhVmlldyh0KSxuPWkuZ2V0SW50MzIoMCk7aWYobjwwKXJldHVybiBpLnNldEludDMyKDAsMCksbnVsbDtjb25zdCByPW5ldyBVaW50OEFycmF5KHQsNCxuKSxmPW5ldyBUZXh0RGVjb2RlcigpLmRlY29kZShyLnNsaWNlKDAsZSkpLEU9ci5zbGljZShlLHIubGVuZ3RoKTtyZXR1cm4gaS5zZXRJbnQzMigwLEUuYnl0ZUxlbmd0aCksci5zZXQoRSksZn19KSgpOwo=",mm=typeof window<"u"&&window.Blob&&new Blob([atob(qv)],{type:"text/javascript;charset=utf-8"});function jS(){const e=mm&&(window.URL||window.webkitURL).createObjectURL(mm);try{return e?new Worker(e):new Worker("data:application/javascript;base64,"+qv)}finally{e&&(window.URL||window.webkitURL).revokeObjectURL(e)}}function HS(e,t){e.postMessage(t)}class DS{constructor(t,i,r){Ds(this,"binaryURL"),Ds(this,"stdinBuffer"),Ds(this,"context"),Ds(this,"result"),Ds(this,"worker"),this.binaryURL=t,this.stdinBuffer=i,this.context=r}async start(){if(this.result)throw new Error("WASIWorker Host can only be started once");return this.result=new Promise((t,i)=>{this.worker=new jS,this.worker.addEventListener("message",r=>{const n=r.data;switch(n.type){case"stdout":this.context.stdout(n.text);break;case"stderr":this.context.stderr(n.text);break;case"result":t(n.result);break}}),HS(this.worker,{target:"client",type:"start",binaryURL:this.binaryURL,stdinBuffer:this.stdinBuffer,args:this.context.args,env:this.context.env,fs:this.context.fs})}),this.result}kill(){if(!this.worker)throw new Error("WASIWorker has not started");this.worker.terminate()}}var Eh={},zS={get exports(){return Eh},set exports(e){Eh=e}};(function(e,t){(function(i,r){e.exports=r()})(self,function(){return(()=>{var i={4567:function(n,o,s){var u,l=this&&this.__extends||(u=function(m,f){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,Z){v.__proto__=Z}||function(v,Z){for(var b in Z)Object.prototype.hasOwnProperty.call(Z,b)&&(v[b]=Z[b])},u(m,f)},function(m,f){if(typeof f!="function"&&f!==null)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");function v(){this.constructor=m}u(m,f),m.prototype=f===null?Object.create(f):(v.prototype=f.prototype,new v)});Object.defineProperty(o,"__esModule",{value:!0}),o.AccessibilityManager=void 0;var a=s(9042),h=s(6114),p=s(9924),d=s(3656),c=s(844),y=s(5596),_=s(9631),g=function(m){function f(v,Z){var b=m.call(this)||this;b._terminal=v,b._renderService=Z,b._liveRegionLineCount=0,b._charsToConsume=[],b._charsToAnnounce="",b._accessibilityTreeRoot=document.createElement("div"),b._accessibilityTreeRoot.classList.add("xterm-accessibility"),b._accessibilityTreeRoot.tabIndex=0,b._rowContainer=document.createElement("div"),b._rowContainer.setAttribute("role","list"),b._rowContainer.classList.add("xterm-accessibility-tree"),b._rowElements=[];for(var G=0;G<b._terminal.rows;G++)b._rowElements[G]=b._createAccessibilityTreeNode(),b._rowContainer.appendChild(b._rowElements[G]);if(b._topBoundaryFocusListener=function(S){return b._onBoundaryFocus(S,0)},b._bottomBoundaryFocusListener=function(S){return b._onBoundaryFocus(S,1)},b._rowElements[0].addEventListener("focus",b._topBoundaryFocusListener),b._rowElements[b._rowElements.length-1].addEventListener("focus",b._bottomBoundaryFocusListener),b._refreshRowsDimensions(),b._accessibilityTreeRoot.appendChild(b._rowContainer),b._renderRowsDebouncer=new p.TimeBasedDebouncer(b._renderRows.bind(b)),b._refreshRows(),b._liveRegion=document.createElement("div"),b._liveRegion.classList.add("live-region"),b._liveRegion.setAttribute("aria-live","assertive"),b._accessibilityTreeRoot.appendChild(b._liveRegion),!b._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");return b._terminal.element.insertAdjacentElement("afterbegin",b._accessibilityTreeRoot),b.register(b._renderRowsDebouncer),b.register(b._terminal.onResize(function(S){return b._onResize(S.rows)})),b.register(b._terminal.onRender(function(S){return b._refreshRows(S.start,S.end)})),b.register(b._terminal.onScroll(function(){return b._refreshRows()})),b.register(b._terminal.onA11yChar(function(S){return b._onChar(S)})),b.register(b._terminal.onLineFeed(function(){return b._onChar(`
`)})),b.register(b._terminal.onA11yTab(function(S){return b._onTab(S)})),b.register(b._terminal.onKey(function(S){return b._onKey(S.key)})),b.register(b._terminal.onBlur(function(){return b._clearLiveRegion()})),b.register(b._renderService.onDimensionsChange(function(){return b._refreshRowsDimensions()})),b._screenDprMonitor=new y.ScreenDprMonitor,b.register(b._screenDprMonitor),b._screenDprMonitor.setListener(function(){return b._refreshRowsDimensions()}),b.register((0,d.addDisposableDomListener)(window,"resize",function(){return b._refreshRowsDimensions()})),b}return l(f,m),f.prototype.dispose=function(){m.prototype.dispose.call(this),(0,_.removeElementFromParent)(this._accessibilityTreeRoot),this._rowElements.length=0},f.prototype._onBoundaryFocus=function(v,Z){var b=v.target,G=this._rowElements[Z===0?1:this._rowElements.length-2];if(b.getAttribute("aria-posinset")!==(Z===0?"1":""+this._terminal.buffer.lines.length)&&v.relatedTarget===G){var S,C;if(Z===0?(S=b,C=this._rowElements.pop(),this._rowContainer.removeChild(C)):(S=this._rowElements.shift(),C=b,this._rowContainer.removeChild(S)),S.removeEventListener("focus",this._topBoundaryFocusListener),C.removeEventListener("focus",this._bottomBoundaryFocusListener),Z===0){var R=this._createAccessibilityTreeNode();this._rowElements.unshift(R),this._rowContainer.insertAdjacentElement("afterbegin",R)}else R=this._createAccessibilityTreeNode(),this._rowElements.push(R),this._rowContainer.appendChild(R);this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(Z===0?-1:1),this._rowElements[Z===0?1:this._rowElements.length-2].focus(),v.preventDefault(),v.stopImmediatePropagation()}},f.prototype._onResize=function(v){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(var Z=this._rowContainer.children.length;Z<this._terminal.rows;Z++)this._rowElements[Z]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[Z]);for(;this._rowElements.length>v;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()},f.prototype._createAccessibilityTreeNode=function(){var v=document.createElement("div");return v.setAttribute("role","listitem"),v.tabIndex=-1,this._refreshRowDimensions(v),v},f.prototype._onTab=function(v){for(var Z=0;Z<v;Z++)this._onChar(" ")},f.prototype._onChar=function(v){var Z=this;this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==v&&(this._charsToAnnounce+=v):this._charsToAnnounce+=v,v===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=a.tooMuchOutput)),h.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(function(){Z._accessibilityTreeRoot.appendChild(Z._liveRegion)},0))},f.prototype._clearLiveRegion=function(){this._liveRegion.textContent="",this._liveRegionLineCount=0,h.isMac&&(0,_.removeElementFromParent)(this._liveRegion)},f.prototype._onKey=function(v){this._clearLiveRegion(),this._charsToConsume.push(v)},f.prototype._refreshRows=function(v,Z){this._renderRowsDebouncer.refresh(v,Z,this._terminal.rows)},f.prototype._renderRows=function(v,Z){for(var b=this._terminal.buffer,G=b.lines.length.toString(),S=v;S<=Z;S++){var C=b.translateBufferLineToString(b.ydisp+S,!0),R=(b.ydisp+S+1).toString(),Y=this._rowElements[S];Y&&(C.length===0?Y.innerText="":Y.textContent=C,Y.setAttribute("aria-posinset",R),Y.setAttribute("aria-setsize",G))}this._announceCharacters()},f.prototype._refreshRowsDimensions=function(){if(this._renderService.dimensions.actualCellHeight){this._rowElements.length!==this._terminal.rows&&this._onResize(this._terminal.rows);for(var v=0;v<this._terminal.rows;v++)this._refreshRowDimensions(this._rowElements[v])}},f.prototype._refreshRowDimensions=function(v){v.style.height=this._renderService.dimensions.actualCellHeight+"px"},f.prototype._announceCharacters=function(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")},f}(c.Disposable);o.AccessibilityManager=g},3614:(n,o)=>{function s(h){return h.replace(/\r?\n/g,"\r")}function u(h,p){return p?"\x1B[200~"+h+"\x1B[201~":h}function l(h,p,d){h=u(h=s(h),d.decPrivateModes.bracketedPasteMode),d.triggerDataEvent(h,!0),p.value=""}function a(h,p,d){var c=d.getBoundingClientRect(),y=h.clientX-c.left-10,_=h.clientY-c.top-10;p.style.width="20px",p.style.height="20px",p.style.left=y+"px",p.style.top=_+"px",p.style.zIndex="1000",p.focus()}Object.defineProperty(o,"__esModule",{value:!0}),o.rightClickHandler=o.moveTextAreaUnderMouseCursor=o.paste=o.handlePasteEvent=o.copyHandler=o.bracketTextForPaste=o.prepareTextForTerminal=void 0,o.prepareTextForTerminal=s,o.bracketTextForPaste=u,o.copyHandler=function(h,p){h.clipboardData&&h.clipboardData.setData("text/plain",p.selectionText),h.preventDefault()},o.handlePasteEvent=function(h,p,d){h.stopPropagation(),h.clipboardData&&l(h.clipboardData.getData("text/plain"),p,d)},o.paste=l,o.moveTextAreaUnderMouseCursor=a,o.rightClickHandler=function(h,p,d,c,y){a(h,p,d),y&&c.rightClickSelect(h),p.value=c.selectionText,p.select()}},7239:(n,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.ColorContrastCache=void 0;var s=function(){function u(){this._color={},this._rgba={}}return u.prototype.clear=function(){this._color={},this._rgba={}},u.prototype.setCss=function(l,a,h){this._rgba[l]||(this._rgba[l]={}),this._rgba[l][a]=h},u.prototype.getCss=function(l,a){return this._rgba[l]?this._rgba[l][a]:void 0},u.prototype.setColor=function(l,a,h){this._color[l]||(this._color[l]={}),this._color[l][a]=h},u.prototype.getColor=function(l,a){return this._color[l]?this._color[l][a]:void 0},u}();o.ColorContrastCache=s},5680:function(n,o,s){var u=this&&this.__read||function(g,m){var f=typeof Symbol=="function"&&g[Symbol.iterator];if(!f)return g;var v,Z,b=f.call(g),G=[];try{for(;(m===void 0||m-- >0)&&!(v=b.next()).done;)G.push(v.value)}catch(S){Z={error:S}}finally{try{v&&!v.done&&(f=b.return)&&f.call(b)}finally{if(Z)throw Z.error}}return G};Object.defineProperty(o,"__esModule",{value:!0}),o.ColorManager=o.DEFAULT_ANSI_COLORS=void 0;var l=s(8055),a=s(7239),h=l.css.toColor("#ffffff"),p=l.css.toColor("#000000"),d=l.css.toColor("#ffffff"),c=l.css.toColor("#000000"),y={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};o.DEFAULT_ANSI_COLORS=Object.freeze(function(){for(var g=[l.css.toColor("#2e3436"),l.css.toColor("#cc0000"),l.css.toColor("#4e9a06"),l.css.toColor("#c4a000"),l.css.toColor("#3465a4"),l.css.toColor("#75507b"),l.css.toColor("#06989a"),l.css.toColor("#d3d7cf"),l.css.toColor("#555753"),l.css.toColor("#ef2929"),l.css.toColor("#8ae234"),l.css.toColor("#fce94f"),l.css.toColor("#729fcf"),l.css.toColor("#ad7fa8"),l.css.toColor("#34e2e2"),l.css.toColor("#eeeeec")],m=[0,95,135,175,215,255],f=0;f<216;f++){var v=m[f/36%6|0],Z=m[f/6%6|0],b=m[f%6];g.push({css:l.channels.toCss(v,Z,b),rgba:l.channels.toRgba(v,Z,b)})}for(f=0;f<24;f++){var G=8+10*f;g.push({css:l.channels.toCss(G,G,G),rgba:l.channels.toRgba(G,G,G)})}return g}());var _=function(){function g(m,f){this.allowTransparency=f;var v=m.createElement("canvas");v.width=1,v.height=1;var Z=v.getContext("2d");if(!Z)throw new Error("Could not get rendering context");this._ctx=Z,this._ctx.globalCompositeOperation="copy",this._litmusColor=this._ctx.createLinearGradient(0,0,1,1),this._contrastCache=new a.ColorContrastCache,this.colors={foreground:h,background:p,cursor:d,cursorAccent:c,selectionTransparent:y,selectionOpaque:l.color.blend(p,y),selectionForeground:void 0,ansi:o.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache},this._updateRestoreColors()}return g.prototype.onOptionsChange=function(m){m==="minimumContrastRatio"&&this._contrastCache.clear()},g.prototype.setTheme=function(m){m===void 0&&(m={}),this.colors.foreground=this._parseColor(m.foreground,h),this.colors.background=this._parseColor(m.background,p),this.colors.cursor=this._parseColor(m.cursor,d,!0),this.colors.cursorAccent=this._parseColor(m.cursorAccent,c,!0),this.colors.selectionTransparent=this._parseColor(m.selection,y,!0),this.colors.selectionOpaque=l.color.blend(this.colors.background,this.colors.selectionTransparent);var f={css:"",rgba:0};this.colors.selectionForeground=m.selectionForeground?this._parseColor(m.selectionForeground,f):void 0,this.colors.selectionForeground===f&&(this.colors.selectionForeground=void 0),l.color.isOpaque(this.colors.selectionTransparent)&&(this.colors.selectionTransparent=l.color.opacity(this.colors.selectionTransparent,.3)),this.colors.ansi[0]=this._parseColor(m.black,o.DEFAULT_ANSI_COLORS[0]),this.colors.ansi[1]=this._parseColor(m.red,o.DEFAULT_ANSI_COLORS[1]),this.colors.ansi[2]=this._parseColor(m.green,o.DEFAULT_ANSI_COLORS[2]),this.colors.ansi[3]=this._parseColor(m.yellow,o.DEFAULT_ANSI_COLORS[3]),this.colors.ansi[4]=this._parseColor(m.blue,o.DEFAULT_ANSI_COLORS[4]),this.colors.ansi[5]=this._parseColor(m.magenta,o.DEFAULT_ANSI_COLORS[5]),this.colors.ansi[6]=this._parseColor(m.cyan,o.DEFAULT_ANSI_COLORS[6]),this.colors.ansi[7]=this._parseColor(m.white,o.DEFAULT_ANSI_COLORS[7]),this.colors.ansi[8]=this._parseColor(m.brightBlack,o.DEFAULT_ANSI_COLORS[8]),this.colors.ansi[9]=this._parseColor(m.brightRed,o.DEFAULT_ANSI_COLORS[9]),this.colors.ansi[10]=this._parseColor(m.brightGreen,o.DEFAULT_ANSI_COLORS[10]),this.colors.ansi[11]=this._parseColor(m.brightYellow,o.DEFAULT_ANSI_COLORS[11]),this.colors.ansi[12]=this._parseColor(m.brightBlue,o.DEFAULT_ANSI_COLORS[12]),this.colors.ansi[13]=this._parseColor(m.brightMagenta,o.DEFAULT_ANSI_COLORS[13]),this.colors.ansi[14]=this._parseColor(m.brightCyan,o.DEFAULT_ANSI_COLORS[14]),this.colors.ansi[15]=this._parseColor(m.brightWhite,o.DEFAULT_ANSI_COLORS[15]),this._contrastCache.clear(),this._updateRestoreColors()},g.prototype.restoreColor=function(m){if(m!==void 0)switch(m){case 256:this.colors.foreground=this._restoreColors.foreground;break;case 257:this.colors.background=this._restoreColors.background;break;case 258:this.colors.cursor=this._restoreColors.cursor;break;default:this.colors.ansi[m]=this._restoreColors.ansi[m]}else for(var f=0;f<this._restoreColors.ansi.length;++f)this.colors.ansi[f]=this._restoreColors.ansi[f]},g.prototype._updateRestoreColors=function(){this._restoreColors={foreground:this.colors.foreground,background:this.colors.background,cursor:this.colors.cursor,ansi:this.colors.ansi.slice()}},g.prototype._parseColor=function(m,f,v){if(v===void 0&&(v=this.allowTransparency),m===void 0)return f;if(this._ctx.fillStyle=this._litmusColor,this._ctx.fillStyle=m,typeof this._ctx.fillStyle!="string")return console.warn("Color: "+m+" is invalid using fallback "+f.css),f;this._ctx.fillRect(0,0,1,1);var Z=this._ctx.getImageData(0,0,1,1).data;if(Z[3]!==255){if(!v)return console.warn("Color: "+m+" is using transparency, but allowTransparency is false. Using fallback "+f.css+"."),f;var b=u(this._ctx.fillStyle.substring(5,this._ctx.fillStyle.length-1).split(",").map(function(I){return Number(I)}),4),G=b[0],S=b[1],C=b[2],R=b[3],Y=Math.round(255*R);return{rgba:l.channels.toRgba(G,S,C,Y),css:m}}return{css:this._ctx.fillStyle,rgba:l.channels.toRgba(Z[0],Z[1],Z[2],Z[3])}},g}();o.ColorManager=_},9631:function(n,o){var s=this&&this.__values||function(u){var l=typeof Symbol=="function"&&Symbol.iterator,a=l&&u[l],h=0;if(a)return a.call(u);if(u&&typeof u.length=="number")return{next:function(){return u&&h>=u.length&&(u=void 0),{value:u&&u[h++],done:!u}}};throw new TypeError(l?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(o,"__esModule",{value:!0}),o.removeElementFromParent=void 0,o.removeElementFromParent=function(){for(var u,l,a,h=[],p=0;p<arguments.length;p++)h[p]=arguments[p];try{for(var d=s(h),c=d.next();!c.done;c=d.next()){var y=c.value;(a=y==null?void 0:y.parentElement)===null||a===void 0||a.removeChild(y)}}catch(_){u={error:_}}finally{try{c&&!c.done&&(l=d.return)&&l.call(d)}finally{if(u)throw u.error}}}},3656:(n,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.addDisposableDomListener=void 0,o.addDisposableDomListener=function(s,u,l,a){s.addEventListener(u,l,a);var h=!1;return{dispose:function(){h||(h=!0,s.removeEventListener(u,l,a))}}}},3551:function(n,o,s){var u=this&&this.__decorate||function(c,y,_,g){var m,f=arguments.length,v=f<3?y:g===null?g=Object.getOwnPropertyDescriptor(y,_):g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(c,y,_,g);else for(var Z=c.length-1;Z>=0;Z--)(m=c[Z])&&(v=(f<3?m(v):f>3?m(y,_,v):m(y,_))||v);return f>3&&v&&Object.defineProperty(y,_,v),v},l=this&&this.__param||function(c,y){return function(_,g){y(_,g,c)}};Object.defineProperty(o,"__esModule",{value:!0}),o.MouseZone=o.Linkifier=void 0;var a=s(8460),h=s(2585),p=function(){function c(y,_,g){this._bufferService=y,this._logService=_,this._unicodeService=g,this._linkMatchers=[],this._nextLinkMatcherId=0,this._onShowLinkUnderline=new a.EventEmitter,this._onHideLinkUnderline=new a.EventEmitter,this._onLinkTooltip=new a.EventEmitter,this._rowsToLinkify={start:void 0,end:void 0}}return Object.defineProperty(c.prototype,"onShowLinkUnderline",{get:function(){return this._onShowLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"onHideLinkUnderline",{get:function(){return this._onHideLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"onLinkTooltip",{get:function(){return this._onLinkTooltip.event},enumerable:!1,configurable:!0}),c.prototype.attachToDom=function(y,_){this._element=y,this._mouseZoneManager=_},c.prototype.linkifyRows=function(y,_){var g=this;this._mouseZoneManager&&(this._rowsToLinkify.start===void 0||this._rowsToLinkify.end===void 0?(this._rowsToLinkify.start=y,this._rowsToLinkify.end=_):(this._rowsToLinkify.start=Math.min(this._rowsToLinkify.start,y),this._rowsToLinkify.end=Math.max(this._rowsToLinkify.end,_)),this._mouseZoneManager.clearAll(y,_),this._rowsTimeoutId&&clearTimeout(this._rowsTimeoutId),this._rowsTimeoutId=setTimeout(function(){return g._linkifyRows()},c._timeBeforeLatency))},c.prototype._linkifyRows=function(){this._rowsTimeoutId=void 0;var y=this._bufferService.buffer;if(this._rowsToLinkify.start!==void 0&&this._rowsToLinkify.end!==void 0){var _=y.ydisp+this._rowsToLinkify.start;if(!(_>=y.lines.length)){for(var g=y.ydisp+Math.min(this._rowsToLinkify.end,this._bufferService.rows)+1,m=Math.ceil(2e3/this._bufferService.cols),f=this._bufferService.buffer.iterator(!1,_,g,m,m);f.hasNext();)for(var v=f.next(),Z=0;Z<this._linkMatchers.length;Z++)this._doLinkifyRow(v.range.first,v.content,this._linkMatchers[Z]);this._rowsToLinkify.start=void 0,this._rowsToLinkify.end=void 0}}else this._logService.debug("_rowToLinkify was unset before _linkifyRows was called")},c.prototype.registerLinkMatcher=function(y,_,g){if(g===void 0&&(g={}),!_)throw new Error("handler must be defined");var m={id:this._nextLinkMatcherId++,regex:y,handler:_,matchIndex:g.matchIndex,validationCallback:g.validationCallback,hoverTooltipCallback:g.tooltipCallback,hoverLeaveCallback:g.leaveCallback,willLinkActivate:g.willLinkActivate,priority:g.priority||0};return this._addLinkMatcherToList(m),m.id},c.prototype._addLinkMatcherToList=function(y){if(this._linkMatchers.length!==0){for(var _=this._linkMatchers.length-1;_>=0;_--)if(y.priority<=this._linkMatchers[_].priority)return void this._linkMatchers.splice(_+1,0,y);this._linkMatchers.splice(0,0,y)}else this._linkMatchers.push(y)},c.prototype.deregisterLinkMatcher=function(y){for(var _=0;_<this._linkMatchers.length;_++)if(this._linkMatchers[_].id===y)return this._linkMatchers.splice(_,1),!0;return!1},c.prototype._doLinkifyRow=function(y,_,g){for(var m,f=this,v=new RegExp(g.regex.source,(g.regex.flags||"")+"g"),Z=-1,b=function(){var S=m[typeof g.matchIndex!="number"?0:g.matchIndex];if(!S)return G._logService.debug("match found without corresponding matchIndex",m,g),"break";if(Z=_.indexOf(S,Z+1),v.lastIndex=Z+S.length,Z<0)return"break";var C=G._bufferService.buffer.stringIndexToBufferIndex(y,Z);if(C[0]<0)return"break";var R=G._bufferService.buffer.lines.get(C[0]);if(!R)return"break";var Y=R.getFg(C[1]),I=Y?Y>>9&511:void 0;g.validationCallback?g.validationCallback(S,function(w){f._rowsTimeoutId||w&&f._addLink(C[1],C[0]-f._bufferService.buffer.ydisp,S,g,I)}):G._addLink(C[1],C[0]-G._bufferService.buffer.ydisp,S,g,I)},G=this;(m=v.exec(_))!==null&&b()!=="break";);},c.prototype._addLink=function(y,_,g,m,f){var v=this;if(this._mouseZoneManager&&this._element){var Z=this._unicodeService.getStringCellWidth(g),b=y%this._bufferService.cols,G=_+Math.floor(y/this._bufferService.cols),S=(b+Z)%this._bufferService.cols,C=G+Math.floor((b+Z)/this._bufferService.cols);S===0&&(S=this._bufferService.cols,C--),this._mouseZoneManager.add(new d(b+1,G+1,S+1,C+1,function(R){if(m.handler)return m.handler(R,g);var Y=window.open();Y?(Y.opener=null,Y.location.href=g):console.warn("Opening link blocked as opener could not be cleared")},function(){v._onShowLinkUnderline.fire(v._createLinkHoverEvent(b,G,S,C,f)),v._element.classList.add("xterm-cursor-pointer")},function(R){v._onLinkTooltip.fire(v._createLinkHoverEvent(b,G,S,C,f)),m.hoverTooltipCallback&&m.hoverTooltipCallback(R,g,{start:{x:b,y:G},end:{x:S,y:C}})},function(){v._onHideLinkUnderline.fire(v._createLinkHoverEvent(b,G,S,C,f)),v._element.classList.remove("xterm-cursor-pointer"),m.hoverLeaveCallback&&m.hoverLeaveCallback()},function(R){return!m.willLinkActivate||m.willLinkActivate(R,g)}))}},c.prototype._createLinkHoverEvent=function(y,_,g,m,f){return{x1:y,y1:_,x2:g,y2:m,cols:this._bufferService.cols,fg:f}},c._timeBeforeLatency=200,c=u([l(0,h.IBufferService),l(1,h.ILogService),l(2,h.IUnicodeService)],c)}();o.Linkifier=p;var d=function(c,y,_,g,m,f,v,Z,b){this.x1=c,this.y1=y,this.x2=_,this.y2=g,this.clickCallback=m,this.hoverCallback=f,this.tooltipCallback=v,this.leaveCallback=Z,this.willLinkActivate=b};o.MouseZone=d},6465:function(n,o,s){var u,l=this&&this.__extends||(u=function(f,v){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Z,b){Z.__proto__=b}||function(Z,b){for(var G in b)Object.prototype.hasOwnProperty.call(b,G)&&(Z[G]=b[G])},u(f,v)},function(f,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");function Z(){this.constructor=f}u(f,v),f.prototype=v===null?Object.create(v):(Z.prototype=v.prototype,new Z)}),a=this&&this.__decorate||function(f,v,Z,b){var G,S=arguments.length,C=S<3?v:b===null?b=Object.getOwnPropertyDescriptor(v,Z):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(f,v,Z,b);else for(var R=f.length-1;R>=0;R--)(G=f[R])&&(C=(S<3?G(C):S>3?G(v,Z,C):G(v,Z))||C);return S>3&&C&&Object.defineProperty(v,Z,C),C},h=this&&this.__param||function(f,v){return function(Z,b){v(Z,b,f)}},p=this&&this.__values||function(f){var v=typeof Symbol=="function"&&Symbol.iterator,Z=v&&f[v],b=0;if(Z)return Z.call(f);if(f&&typeof f.length=="number")return{next:function(){return f&&b>=f.length&&(f=void 0),{value:f&&f[b++],done:!f}}};throw new TypeError(v?"Object is not iterable.":"Symbol.iterator is not defined.")},d=this&&this.__read||function(f,v){var Z=typeof Symbol=="function"&&f[Symbol.iterator];if(!Z)return f;var b,G,S=Z.call(f),C=[];try{for(;(v===void 0||v-- >0)&&!(b=S.next()).done;)C.push(b.value)}catch(R){G={error:R}}finally{try{b&&!b.done&&(Z=S.return)&&Z.call(S)}finally{if(G)throw G.error}}return C};Object.defineProperty(o,"__esModule",{value:!0}),o.Linkifier2=void 0;var c=s(2585),y=s(8460),_=s(844),g=s(3656),m=function(f){function v(Z){var b=f.call(this)||this;return b._bufferService=Z,b._linkProviders=[],b._linkCacheDisposables=[],b._isMouseOut=!0,b._activeLine=-1,b._onShowLinkUnderline=b.register(new y.EventEmitter),b._onHideLinkUnderline=b.register(new y.EventEmitter),b.register((0,_.getDisposeArrayDisposable)(b._linkCacheDisposables)),b}return l(v,f),Object.defineProperty(v.prototype,"currentLink",{get:function(){return this._currentLink},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"onShowLinkUnderline",{get:function(){return this._onShowLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"onHideLinkUnderline",{get:function(){return this._onHideLinkUnderline.event},enumerable:!1,configurable:!0}),v.prototype.registerLinkProvider=function(Z){var b=this;return this._linkProviders.push(Z),{dispose:function(){var G=b._linkProviders.indexOf(Z);G!==-1&&b._linkProviders.splice(G,1)}}},v.prototype.attachToDom=function(Z,b,G){var S=this;this._element=Z,this._mouseService=b,this._renderService=G,this.register((0,g.addDisposableDomListener)(this._element,"mouseleave",function(){S._isMouseOut=!0,S._clearCurrentLink()})),this.register((0,g.addDisposableDomListener)(this._element,"mousemove",this._onMouseMove.bind(this))),this.register((0,g.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,g.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))},v.prototype._onMouseMove=function(Z){if(this._lastMouseEvent=Z,this._element&&this._mouseService){var b=this._positionFromMouseEvent(Z,this._element,this._mouseService);if(b){this._isMouseOut=!1;for(var G=Z.composedPath(),S=0;S<G.length;S++){var C=G[S];if(C.classList.contains("xterm"))break;if(C.classList.contains("xterm-hover"))return}this._lastBufferCell&&b.x===this._lastBufferCell.x&&b.y===this._lastBufferCell.y||(this._onHover(b),this._lastBufferCell=b)}}},v.prototype._onHover=function(Z){if(this._activeLine!==Z.y)return this._clearCurrentLink(),void this._askForLink(Z,!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,Z)||(this._clearCurrentLink(),this._askForLink(Z,!0))},v.prototype._askForLink=function(Z,b){var G,S,C,R,Y=this;this._activeProviderReplies&&b||((C=this._activeProviderReplies)===null||C===void 0||C.forEach(function(K){K==null||K.forEach(function(J){J.link.dispose&&J.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=Z.y);var I=!1,w=function(K,J){b?!((R=F._activeProviderReplies)===null||R===void 0)&&R.get(K)&&(I=F._checkLinkProviderResult(K,Z,I)):J.provideLinks(Z.y,function(P){var ee,he;if(!Y._isMouseOut){var $=P==null?void 0:P.map(function(de){return{link:de}});(ee=Y._activeProviderReplies)===null||ee===void 0||ee.set(K,$),I=Y._checkLinkProviderResult(K,Z,I),((he=Y._activeProviderReplies)===null||he===void 0?void 0:he.size)===Y._linkProviders.length&&Y._removeIntersectingLinks(Z.y,Y._activeProviderReplies)}})},F=this;try{for(var E=p(this._linkProviders.entries()),N=E.next();!N.done;N=E.next()){var L=d(N.value,2);w(L[0],L[1])}}catch(K){G={error:K}}finally{try{N&&!N.done&&(S=E.return)&&S.call(E)}finally{if(G)throw G.error}}},v.prototype._removeIntersectingLinks=function(Z,b){for(var G=new Set,S=0;S<b.size;S++){var C=b.get(S);if(C)for(var R=0;R<C.length;R++)for(var Y=C[R],I=Y.link.range.start.y<Z?0:Y.link.range.start.x,w=Y.link.range.end.y>Z?this._bufferService.cols:Y.link.range.end.x,F=I;F<=w;F++){if(G.has(F)){C.splice(R--,1);break}G.add(F)}}},v.prototype._checkLinkProviderResult=function(Z,b,G){var S,C=this;if(!this._activeProviderReplies)return G;for(var R=this._activeProviderReplies.get(Z),Y=!1,I=0;I<Z;I++)this._activeProviderReplies.has(I)&&!this._activeProviderReplies.get(I)||(Y=!0);if(!Y&&R){var w=R.find(function(E){return C._linkAtPosition(E.link,b)});w&&(G=!0,this._handleNewLink(w))}if(this._activeProviderReplies.size===this._linkProviders.length&&!G)for(I=0;I<this._activeProviderReplies.size;I++){var F=(S=this._activeProviderReplies.get(I))===null||S===void 0?void 0:S.find(function(E){return C._linkAtPosition(E.link,b)});if(F){G=!0,this._handleNewLink(F);break}}return G},v.prototype._handleMouseDown=function(){this._mouseDownLink=this._currentLink},v.prototype._handleMouseUp=function(Z){if(this._element&&this._mouseService&&this._currentLink){var b=this._positionFromMouseEvent(Z,this._element,this._mouseService);b&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,b)&&this._currentLink.link.activate(Z,this._currentLink.link.text)}},v.prototype._clearCurrentLink=function(Z,b){this._element&&this._currentLink&&this._lastMouseEvent&&(!Z||!b||this._currentLink.link.range.start.y>=Z&&this._currentLink.link.range.end.y<=b)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,_.disposeArray)(this._linkCacheDisposables))},v.prototype._handleNewLink=function(Z){var b=this;if(this._element&&this._lastMouseEvent&&this._mouseService){var G=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);G&&this._linkAtPosition(Z.link,G)&&(this._currentLink=Z,this._currentLink.state={decorations:{underline:Z.link.decorations===void 0||Z.link.decorations.underline,pointerCursor:Z.link.decorations===void 0||Z.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,Z.link,this._lastMouseEvent),Z.link.decorations={},Object.defineProperties(Z.link.decorations,{pointerCursor:{get:function(){var S,C;return(C=(S=b._currentLink)===null||S===void 0?void 0:S.state)===null||C===void 0?void 0:C.decorations.pointerCursor},set:function(S){var C,R;!((C=b._currentLink)===null||C===void 0)&&C.state&&b._currentLink.state.decorations.pointerCursor!==S&&(b._currentLink.state.decorations.pointerCursor=S,b._currentLink.state.isHovered&&((R=b._element)===null||R===void 0||R.classList.toggle("xterm-cursor-pointer",S)))}},underline:{get:function(){var S,C;return(C=(S=b._currentLink)===null||S===void 0?void 0:S.state)===null||C===void 0?void 0:C.decorations.underline},set:function(S){var C,R,Y;!((C=b._currentLink)===null||C===void 0)&&C.state&&((Y=(R=b._currentLink)===null||R===void 0?void 0:R.state)===null||Y===void 0?void 0:Y.decorations.underline)!==S&&(b._currentLink.state.decorations.underline=S,b._currentLink.state.isHovered&&b._fireUnderlineEvent(Z.link,S))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(function(S){var C=S.start===0?0:S.start+1+b._bufferService.buffer.ydisp;b._clearCurrentLink(C,S.end+1+b._bufferService.buffer.ydisp)})))}},v.prototype._linkHover=function(Z,b,G){var S;!((S=this._currentLink)===null||S===void 0)&&S.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(b,!0),this._currentLink.state.decorations.pointerCursor&&Z.classList.add("xterm-cursor-pointer")),b.hover&&b.hover(G,b.text)},v.prototype._fireUnderlineEvent=function(Z,b){var G=Z.range,S=this._bufferService.buffer.ydisp,C=this._createLinkUnderlineEvent(G.start.x-1,G.start.y-S-1,G.end.x,G.end.y-S-1,void 0);(b?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(C)},v.prototype._linkLeave=function(Z,b,G){var S;!((S=this._currentLink)===null||S===void 0)&&S.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(b,!1),this._currentLink.state.decorations.pointerCursor&&Z.classList.remove("xterm-cursor-pointer")),b.leave&&b.leave(G,b.text)},v.prototype._linkAtPosition=function(Z,b){var G=Z.range.start.y===Z.range.end.y,S=Z.range.start.y<b.y,C=Z.range.end.y>b.y;return(G&&Z.range.start.x<=b.x&&Z.range.end.x>=b.x||S&&Z.range.end.x>=b.x||C&&Z.range.start.x<=b.x||S&&C)&&Z.range.start.y<=b.y&&Z.range.end.y>=b.y},v.prototype._positionFromMouseEvent=function(Z,b,G){var S=G.getCoords(Z,b,this._bufferService.cols,this._bufferService.rows);if(S)return{x:S[0],y:S[1]+this._bufferService.buffer.ydisp}},v.prototype._createLinkUnderlineEvent=function(Z,b,G,S,C){return{x1:Z,y1:b,x2:G,y2:S,cols:this._bufferService.cols,fg:C}},a([h(0,c.IBufferService)],v)}(_.Disposable);o.Linkifier2=m},9042:(n,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.tooMuchOutput=o.promptLabel=void 0,o.promptLabel="Terminal input",o.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},6954:function(n,o,s){var u,l=this&&this.__extends||(u=function(g,m){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,v){f.__proto__=v}||function(f,v){for(var Z in v)Object.prototype.hasOwnProperty.call(v,Z)&&(f[Z]=v[Z])},u(g,m)},function(g,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");function f(){this.constructor=g}u(g,m),g.prototype=m===null?Object.create(m):(f.prototype=m.prototype,new f)}),a=this&&this.__decorate||function(g,m,f,v){var Z,b=arguments.length,G=b<3?m:v===null?v=Object.getOwnPropertyDescriptor(m,f):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")G=Reflect.decorate(g,m,f,v);else for(var S=g.length-1;S>=0;S--)(Z=g[S])&&(G=(b<3?Z(G):b>3?Z(m,f,G):Z(m,f))||G);return b>3&&G&&Object.defineProperty(m,f,G),G},h=this&&this.__param||function(g,m){return function(f,v){m(f,v,g)}};Object.defineProperty(o,"__esModule",{value:!0}),o.MouseZoneManager=void 0;var p=s(844),d=s(3656),c=s(4725),y=s(2585),_=function(g){function m(f,v,Z,b,G,S){var C=g.call(this)||this;return C._element=f,C._screenElement=v,C._bufferService=Z,C._mouseService=b,C._selectionService=G,C._optionsService=S,C._zones=[],C._areZonesActive=!1,C._lastHoverCoords=[void 0,void 0],C._initialSelectionLength=0,C.register((0,d.addDisposableDomListener)(C._element,"mousedown",function(R){return C._onMouseDown(R)})),C._mouseMoveListener=function(R){return C._onMouseMove(R)},C._mouseLeaveListener=function(R){return C._onMouseLeave(R)},C._clickListener=function(R){return C._onClick(R)},C}return l(m,g),m.prototype.dispose=function(){g.prototype.dispose.call(this),this._deactivate()},m.prototype.add=function(f){this._zones.push(f),this._zones.length===1&&this._activate()},m.prototype.clearAll=function(f,v){if(this._zones.length!==0){f&&v||(f=0,v=this._bufferService.rows-1);for(var Z=0;Z<this._zones.length;Z++){var b=this._zones[Z];(b.y1>f&&b.y1<=v+1||b.y2>f&&b.y2<=v+1||b.y1<f&&b.y2>v+1)&&(this._currentZone&&this._currentZone===b&&(this._currentZone.leaveCallback(),this._currentZone=void 0),this._zones.splice(Z--,1))}this._zones.length===0&&this._deactivate()}},m.prototype._activate=function(){this._areZonesActive||(this._areZonesActive=!0,this._element.addEventListener("mousemove",this._mouseMoveListener),this._element.addEventListener("mouseleave",this._mouseLeaveListener),this._element.addEventListener("click",this._clickListener))},m.prototype._deactivate=function(){this._areZonesActive&&(this._areZonesActive=!1,this._element.removeEventListener("mousemove",this._mouseMoveListener),this._element.removeEventListener("mouseleave",this._mouseLeaveListener),this._element.removeEventListener("click",this._clickListener))},m.prototype._onMouseMove=function(f){this._lastHoverCoords[0]===f.pageX&&this._lastHoverCoords[1]===f.pageY||(this._onHover(f),this._lastHoverCoords=[f.pageX,f.pageY])},m.prototype._onHover=function(f){var v=this,Z=this._findZoneEventAt(f);Z!==this._currentZone&&(this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=void 0,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout)),Z&&(this._currentZone=Z,Z.hoverCallback&&Z.hoverCallback(f),this._tooltipTimeout=window.setTimeout(function(){return v._onTooltip(f)},this._optionsService.rawOptions.linkTooltipHoverDuration)))},m.prototype._onTooltip=function(f){this._tooltipTimeout=void 0;var v=this._findZoneEventAt(f);v==null||v.tooltipCallback(f)},m.prototype._onMouseDown=function(f){if(this._initialSelectionLength=this._getSelectionLength(),this._areZonesActive){var v=this._findZoneEventAt(f);v!=null&&v.willLinkActivate(f)&&(f.preventDefault(),f.stopImmediatePropagation())}},m.prototype._onMouseLeave=function(f){this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=void 0,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout))},m.prototype._onClick=function(f){var v=this._findZoneEventAt(f),Z=this._getSelectionLength();v&&Z===this._initialSelectionLength&&(v.clickCallback(f),f.preventDefault(),f.stopImmediatePropagation())},m.prototype._getSelectionLength=function(){var f=this._selectionService.selectionText;return f?f.length:0},m.prototype._findZoneEventAt=function(f){var v=this._mouseService.getCoords(f,this._screenElement,this._bufferService.cols,this._bufferService.rows);if(v)for(var Z=v[0],b=v[1],G=0;G<this._zones.length;G++){var S=this._zones[G];if(S.y1===S.y2){if(b===S.y1&&Z>=S.x1&&Z<S.x2)return S}else if(b===S.y1&&Z>=S.x1||b===S.y2&&Z<S.x2||b>S.y1&&b<S.y2)return S}},a([h(2,y.IBufferService),h(3,c.IMouseService),h(4,c.ISelectionService),h(5,y.IOptionsService)],m)}(p.Disposable);o.MouseZoneManager=_},6193:function(n,o){var s=this&&this.__values||function(l){var a=typeof Symbol=="function"&&Symbol.iterator,h=a&&l[a],p=0;if(h)return h.call(l);if(l&&typeof l.length=="number")return{next:function(){return l&&p>=l.length&&(l=void 0),{value:l&&l[p++],done:!l}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(o,"__esModule",{value:!0}),o.RenderDebouncer=void 0;var u=function(){function l(a){this._renderCallback=a,this._refreshCallbacks=[]}return l.prototype.dispose=function(){this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},l.prototype.addRefreshCallback=function(a){var h=this;return this._refreshCallbacks.push(a),this._animationFrame||(this._animationFrame=window.requestAnimationFrame(function(){return h._innerRefresh()})),this._animationFrame},l.prototype.refresh=function(a,h,p){var d=this;this._rowCount=p,a=a!==void 0?a:0,h=h!==void 0?h:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,a):a,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,h):h,this._animationFrame||(this._animationFrame=window.requestAnimationFrame(function(){return d._innerRefresh()}))},l.prototype._innerRefresh=function(){if(this._animationFrame=void 0,this._rowStart!==void 0&&this._rowEnd!==void 0&&this._rowCount!==void 0){var a=Math.max(this._rowStart,0),h=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(a,h),this._runRefreshCallbacks()}else this._runRefreshCallbacks()},l.prototype._runRefreshCallbacks=function(){var a,h;try{for(var p=s(this._refreshCallbacks),d=p.next();!d.done;d=p.next())(0,d.value)(0)}catch(c){a={error:c}}finally{try{d&&!d.done&&(h=p.return)&&h.call(p)}finally{if(a)throw a.error}}this._refreshCallbacks=[]},l}();o.RenderDebouncer=u},5596:function(n,o,s){var u,l=this&&this.__extends||(u=function(h,p){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,c){d.__proto__=c}||function(d,c){for(var y in c)Object.prototype.hasOwnProperty.call(c,y)&&(d[y]=c[y])},u(h,p)},function(h,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");function d(){this.constructor=h}u(h,p),h.prototype=p===null?Object.create(p):(d.prototype=p.prototype,new d)});Object.defineProperty(o,"__esModule",{value:!0}),o.ScreenDprMonitor=void 0;var a=function(h){function p(){var d=h!==null&&h.apply(this,arguments)||this;return d._currentDevicePixelRatio=window.devicePixelRatio,d}return l(p,h),p.prototype.setListener=function(d){var c=this;this._listener&&this.clearListener(),this._listener=d,this._outerListener=function(){c._listener&&(c._listener(window.devicePixelRatio,c._currentDevicePixelRatio),c._updateDpr())},this._updateDpr()},p.prototype.dispose=function(){h.prototype.dispose.call(this),this.clearListener()},p.prototype._updateDpr=function(){var d;this._outerListener&&((d=this._resolutionMediaMatchList)===null||d===void 0||d.removeListener(this._outerListener),this._currentDevicePixelRatio=window.devicePixelRatio,this._resolutionMediaMatchList=window.matchMedia("screen and (resolution: "+window.devicePixelRatio+"dppx)"),this._resolutionMediaMatchList.addListener(this._outerListener))},p.prototype.clearListener=function(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)},p}(s(844).Disposable);o.ScreenDprMonitor=a},3236:function(n,o,s){var u,l=this&&this.__extends||(u=function(ge,te){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,A){x.__proto__=A}||function(x,A){for(var le in A)Object.prototype.hasOwnProperty.call(A,le)&&(x[le]=A[le])},u(ge,te)},function(ge,te){if(typeof te!="function"&&te!==null)throw new TypeError("Class extends value "+String(te)+" is not a constructor or null");function x(){this.constructor=ge}u(ge,te),ge.prototype=te===null?Object.create(te):(x.prototype=te.prototype,new x)}),a=this&&this.__values||function(ge){var te=typeof Symbol=="function"&&Symbol.iterator,x=te&&ge[te],A=0;if(x)return x.call(ge);if(ge&&typeof ge.length=="number")return{next:function(){return ge&&A>=ge.length&&(ge=void 0),{value:ge&&ge[A++],done:!ge}}};throw new TypeError(te?"Object is not iterable.":"Symbol.iterator is not defined.")},h=this&&this.__read||function(ge,te){var x=typeof Symbol=="function"&&ge[Symbol.iterator];if(!x)return ge;var A,le,Ge=x.call(ge),be=[];try{for(;(te===void 0||te-- >0)&&!(A=Ge.next()).done;)be.push(A.value)}catch(Ye){le={error:Ye}}finally{try{A&&!A.done&&(x=Ge.return)&&x.call(Ge)}finally{if(le)throw le.error}}return be},p=this&&this.__spreadArray||function(ge,te,x){if(x||arguments.length===2)for(var A,le=0,Ge=te.length;le<Ge;le++)!A&&le in te||(A||(A=Array.prototype.slice.call(te,0,le)),A[le]=te[le]);return ge.concat(A||Array.prototype.slice.call(te))};Object.defineProperty(o,"__esModule",{value:!0}),o.Terminal=void 0;var d=s(2950),c=s(1680),y=s(3614),_=s(2584),g=s(5435),m=s(3525),f=s(3551),v=s(9312),Z=s(6114),b=s(3656),G=s(9042),S=s(357),C=s(6954),R=s(4567),Y=s(1296),I=s(7399),w=s(8460),F=s(8437),E=s(5680),N=s(3230),L=s(4725),K=s(428),J=s(8934),P=s(6465),ee=s(5114),he=s(8969),$=s(8055),de=s(4269),pe=s(5941),j=s(3107),ie=s(5744),H=s(9074),Q=s(2585),D=typeof window<"u"?window.document:null,X=function(ge){function te(x){x===void 0&&(x={});var A=ge.call(this,x)||this;return A.browser=Z,A._keyDownHandled=!1,A._keyDownSeen=!1,A._keyPressHandled=!1,A._unprocessedDeadKey=!1,A._onCursorMove=new w.EventEmitter,A._onKey=new w.EventEmitter,A._onRender=new w.EventEmitter,A._onSelectionChange=new w.EventEmitter,A._onTitleChange=new w.EventEmitter,A._onBell=new w.EventEmitter,A._onFocus=new w.EventEmitter,A._onBlur=new w.EventEmitter,A._onA11yCharEmitter=new w.EventEmitter,A._onA11yTabEmitter=new w.EventEmitter,A._setup(),A.linkifier=A._instantiationService.createInstance(f.Linkifier),A.linkifier2=A.register(A._instantiationService.createInstance(P.Linkifier2)),A._decorationService=A._instantiationService.createInstance(H.DecorationService),A._instantiationService.setService(Q.IDecorationService,A._decorationService),A.register(A._inputHandler.onRequestBell(function(){return A.bell()})),A.register(A._inputHandler.onRequestRefreshRows(function(le,Ge){return A.refresh(le,Ge)})),A.register(A._inputHandler.onRequestSendFocus(function(){return A._reportFocus()})),A.register(A._inputHandler.onRequestReset(function(){return A.reset()})),A.register(A._inputHandler.onRequestWindowsOptionsReport(function(le){return A._reportWindowsOptions(le)})),A.register(A._inputHandler.onColor(function(le){return A._handleColorEvent(le)})),A.register((0,w.forwardEvent)(A._inputHandler.onCursorMove,A._onCursorMove)),A.register((0,w.forwardEvent)(A._inputHandler.onTitleChange,A._onTitleChange)),A.register((0,w.forwardEvent)(A._inputHandler.onA11yChar,A._onA11yCharEmitter)),A.register((0,w.forwardEvent)(A._inputHandler.onA11yTab,A._onA11yTabEmitter)),A.register(A._bufferService.onResize(function(le){return A._afterResize(le.cols,le.rows)})),A}return l(te,ge),Object.defineProperty(te.prototype,"onCursorMove",{get:function(){return this._onCursorMove.event},enumerable:!1,configurable:!0}),Object.defineProperty(te.prototype,"onKey",{get:function(){return this._onKey.event},enumerable:!1,configurable:!0}),Object.defineProperty(te.prototype,"onRender",{get:function(){return this._onRender.event},enumerable:!1,configurable:!0}),Object.defineProperty(te.prototype,"onSelectionChange",{get:function(){return this._onSelectionChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(te.prototype,"onTitleChange",{get:function(){return this._onTitleChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(te.prototype,"onBell",{get:function(){return this._onBell.event},enumerable:!1,configurable:!0}),Object.defineProperty(te.prototype,"onFocus",{get:function(){return this._onFocus.event},enumerable:!1,configurable:!0}),Object.defineProperty(te.prototype,"onBlur",{get:function(){return this._onBlur.event},enumerable:!1,configurable:!0}),Object.defineProperty(te.prototype,"onA11yChar",{get:function(){return this._onA11yCharEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(te.prototype,"onA11yTab",{get:function(){return this._onA11yTabEmitter.event},enumerable:!1,configurable:!0}),te.prototype._handleColorEvent=function(x){var A,le,Ge,be;if(this._colorManager){try{for(var Ye=a(x),ve=Ye.next();!ve.done;ve=Ye.next()){var xe=ve.value,we=void 0,Ze="";switch(xe.index){case 256:we="foreground",Ze="10";break;case 257:we="background",Ze="11";break;case 258:we="cursor",Ze="12";break;default:we="ansi",Ze="4;"+xe.index}if(we)switch(xe.type){case 0:var je=$.color.toColorRGB(we==="ansi"?this._colorManager.colors.ansi[xe.index]:this._colorManager.colors[we]);this.coreService.triggerDataEvent(_.C0.ESC+"]"+Ze+";"+(0,pe.toRgbString)(je)+_.C1_ESCAPED.ST);break;case 1:we==="ansi"?this._colorManager.colors.ansi[xe.index]=$.rgba.toColor.apply($.rgba,p([],h(xe.color),!1)):this._colorManager.colors[we]=$.rgba.toColor.apply($.rgba,p([],h(xe.color),!1));break;case 2:this._colorManager.restoreColor(xe.index)}}}catch(lt){A={error:lt}}finally{try{ve&&!ve.done&&(le=Ye.return)&&le.call(Ye)}finally{if(A)throw A.error}}(Ge=this._renderService)===null||Ge===void 0||Ge.setColors(this._colorManager.colors),(be=this.viewport)===null||be===void 0||be.onThemeChange(this._colorManager.colors)}},te.prototype.dispose=function(){var x,A,le;this._isDisposed||(ge.prototype.dispose.call(this),(x=this._renderService)===null||x===void 0||x.dispose(),this._customKeyEventHandler=void 0,this.write=function(){},(le=(A=this.element)===null||A===void 0?void 0:A.parentNode)===null||le===void 0||le.removeChild(this.element))},te.prototype._setup=function(){ge.prototype._setup.call(this),this._customKeyEventHandler=void 0},Object.defineProperty(te.prototype,"buffer",{get:function(){return this.buffers.active},enumerable:!1,configurable:!0}),te.prototype.focus=function(){this.textarea&&this.textarea.focus({preventScroll:!0})},te.prototype._updateOptions=function(x){var A,le,Ge,be;switch(ge.prototype._updateOptions.call(this,x),x){case"fontFamily":case"fontSize":(A=this._renderService)===null||A===void 0||A.clear(),(le=this._charSizeService)===null||le===void 0||le.measure();break;case"cursorBlink":case"cursorStyle":this.refresh(this.buffer.y,this.buffer.y);break;case"customGlyphs":case"drawBoldTextInBrightColors":case"letterSpacing":case"lineHeight":case"fontWeight":case"fontWeightBold":case"minimumContrastRatio":this._renderService&&(this._renderService.clear(),this._renderService.onResize(this.cols,this.rows),this.refresh(0,this.rows-1));break;case"rendererType":this._renderService&&(this._renderService.setRenderer(this._createRenderer()),this._renderService.onResize(this.cols,this.rows));break;case"scrollback":(Ge=this.viewport)===null||Ge===void 0||Ge.syncScrollArea();break;case"screenReaderMode":this.optionsService.rawOptions.screenReaderMode?!this._accessibilityManager&&this._renderService&&(this._accessibilityManager=new R.AccessibilityManager(this,this._renderService)):((be=this._accessibilityManager)===null||be===void 0||be.dispose(),this._accessibilityManager=void 0);break;case"tabStopWidth":this.buffers.setupTabStops();break;case"theme":this._setTheme(this.optionsService.rawOptions.theme)}},te.prototype._onTextAreaFocus=function(x){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(_.C0.ESC+"[I"),this.updateCursorStyle(x),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()},te.prototype.blur=function(){var x;return(x=this.textarea)===null||x===void 0?void 0:x.blur()},te.prototype._onTextAreaBlur=function(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(_.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()},te.prototype._syncTextArea=function(){if(this.textarea&&this.buffer.isCursorInViewport&&!this._compositionHelper.isComposing&&this._renderService){var x=this.buffer.ybase+this.buffer.y,A=this.buffer.lines.get(x);if(A){var le=Math.min(this.buffer.x,this.cols-1),Ge=this._renderService.dimensions.actualCellHeight,be=A.getWidth(le),Ye=this._renderService.dimensions.actualCellWidth*be,ve=this.buffer.y*this._renderService.dimensions.actualCellHeight,xe=le*this._renderService.dimensions.actualCellWidth;this.textarea.style.left=xe+"px",this.textarea.style.top=ve+"px",this.textarea.style.width=Ye+"px",this.textarea.style.height=Ge+"px",this.textarea.style.lineHeight=Ge+"px",this.textarea.style.zIndex="-5"}}},te.prototype._initGlobal=function(){var x=this;this._bindKeys(),this.register((0,b.addDisposableDomListener)(this.element,"copy",function(le){x.hasSelection()&&(0,y.copyHandler)(le,x._selectionService)}));var A=function(le){return(0,y.handlePasteEvent)(le,x.textarea,x.coreService)};this.register((0,b.addDisposableDomListener)(this.textarea,"paste",A)),this.register((0,b.addDisposableDomListener)(this.element,"paste",A)),Z.isFirefox?this.register((0,b.addDisposableDomListener)(this.element,"mousedown",function(le){le.button===2&&(0,y.rightClickHandler)(le,x.textarea,x.screenElement,x._selectionService,x.options.rightClickSelectsWord)})):this.register((0,b.addDisposableDomListener)(this.element,"contextmenu",function(le){(0,y.rightClickHandler)(le,x.textarea,x.screenElement,x._selectionService,x.options.rightClickSelectsWord)})),Z.isLinux&&this.register((0,b.addDisposableDomListener)(this.element,"auxclick",function(le){le.button===1&&(0,y.moveTextAreaUnderMouseCursor)(le,x.textarea,x.screenElement)}))},te.prototype._bindKeys=function(){var x=this;this.register((0,b.addDisposableDomListener)(this.textarea,"keyup",function(A){return x._keyUp(A)},!0)),this.register((0,b.addDisposableDomListener)(this.textarea,"keydown",function(A){return x._keyDown(A)},!0)),this.register((0,b.addDisposableDomListener)(this.textarea,"keypress",function(A){return x._keyPress(A)},!0)),this.register((0,b.addDisposableDomListener)(this.textarea,"compositionstart",function(){return x._compositionHelper.compositionstart()})),this.register((0,b.addDisposableDomListener)(this.textarea,"compositionupdate",function(A){return x._compositionHelper.compositionupdate(A)})),this.register((0,b.addDisposableDomListener)(this.textarea,"compositionend",function(){return x._compositionHelper.compositionend()})),this.register((0,b.addDisposableDomListener)(this.textarea,"input",function(A){return x._inputEvent(A)},!0)),this.register(this.onRender(function(){return x._compositionHelper.updateCompositionElements()})),this.register(this.onRender(function(A){return x._queueLinkification(A.start,A.end)}))},te.prototype.open=function(x){var A=this;if(!x)throw new Error("Terminal requires a parent element.");x.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=x.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),this.element.setAttribute("tabindex","0"),x.appendChild(this.element);var le=D.createDocumentFragment();this._viewportElement=D.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),le.appendChild(this._viewportElement),this._viewportScrollArea=D.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=D.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=D.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),le.appendChild(this.screenElement),this.textarea=D.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",G.promptLabel),this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this.register((0,b.addDisposableDomListener)(this.textarea,"focus",function(Ye){return A._onTextAreaFocus(Ye)})),this.register((0,b.addDisposableDomListener)(this.textarea,"blur",function(){return A._onTextAreaBlur()})),this._helperContainer.appendChild(this.textarea);var Ge=this._instantiationService.createInstance(ee.CoreBrowserService,this.textarea);this._instantiationService.setService(L.ICoreBrowserService,Ge),this._charSizeService=this._instantiationService.createInstance(K.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(L.ICharSizeService,this._charSizeService),this._theme=this.options.theme||this._theme,this._colorManager=new E.ColorManager(D,this.options.allowTransparency),this.register(this.optionsService.onOptionChange(function(Ye){return A._colorManager.onOptionsChange(Ye)})),this._colorManager.setTheme(this._theme),this._characterJoinerService=this._instantiationService.createInstance(de.CharacterJoinerService),this._instantiationService.setService(L.ICharacterJoinerService,this._characterJoinerService);var be=this._createRenderer();this._renderService=this.register(this._instantiationService.createInstance(N.RenderService,be,this.rows,this.screenElement)),this._instantiationService.setService(L.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(function(Ye){return A._onRender.fire(Ye)})),this.onResize(function(Ye){return A._renderService.resize(Ye.cols,Ye.rows)}),this._compositionView=D.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(d.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(le),this._soundService=this._instantiationService.createInstance(S.SoundService),this._instantiationService.setService(L.ISoundService,this._soundService),this._mouseService=this._instantiationService.createInstance(J.MouseService),this._instantiationService.setService(L.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(c.Viewport,function(Ye){return A.scrollLines(Ye,!0,1)},this._viewportElement,this._viewportScrollArea,this.element),this.viewport.onThemeChange(this._colorManager.colors),this.register(this._inputHandler.onRequestSyncScrollBar(function(){return A.viewport.syncScrollArea()})),this.register(this.viewport),this.register(this.onCursorMove(function(){A._renderService.onCursorMove(),A._syncTextArea()})),this.register(this.onResize(function(){return A._renderService.onResize(A.cols,A.rows)})),this.register(this.onBlur(function(){return A._renderService.onBlur()})),this.register(this.onFocus(function(){return A._renderService.onFocus()})),this.register(this._renderService.onDimensionsChange(function(){return A.viewport.syncScrollArea()})),this._selectionService=this.register(this._instantiationService.createInstance(v.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(L.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(function(Ye){return A.scrollLines(Ye.amount,Ye.suppressScrollEvent)})),this.register(this._selectionService.onSelectionChange(function(){return A._onSelectionChange.fire()})),this.register(this._selectionService.onRequestRedraw(function(Ye){return A._renderService.onSelectionChanged(Ye.start,Ye.end,Ye.columnSelectMode)})),this.register(this._selectionService.onLinuxMouseSelection(function(Ye){A.textarea.value=Ye,A.textarea.focus(),A.textarea.select()})),this.register(this._onScroll.event(function(Ye){A.viewport.syncScrollArea(),A._selectionService.refresh()})),this.register((0,b.addDisposableDomListener)(this._viewportElement,"scroll",function(){return A._selectionService.refresh()})),this._mouseZoneManager=this._instantiationService.createInstance(C.MouseZoneManager,this.element,this.screenElement),this.register(this._mouseZoneManager),this.register(this.onScroll(function(){return A._mouseZoneManager.clearAll()})),this.linkifier.attachToDom(this.element,this._mouseZoneManager),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.register(this._instantiationService.createInstance(j.BufferDecorationRenderer,this.screenElement)),this.register((0,b.addDisposableDomListener)(this.element,"mousedown",function(Ye){return A._selectionService.onMouseDown(Ye)})),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager=new R.AccessibilityManager(this,this._renderService)),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this._instantiationService.createInstance(ie.OverviewRulerRenderer,this._viewportElement,this.screenElement)),this.optionsService.onOptionChange(function(){!A._overviewRulerRenderer&&A.options.overviewRulerWidth&&A._viewportElement&&A.screenElement&&(A._overviewRulerRenderer=A._instantiationService.createInstance(ie.OverviewRulerRenderer,A._viewportElement,A.screenElement))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()},te.prototype._createRenderer=function(){switch(this.options.rendererType){case"canvas":return this._instantiationService.createInstance(m.Renderer,this._colorManager.colors,this.screenElement,this.linkifier,this.linkifier2);case"dom":return this._instantiationService.createInstance(Y.DomRenderer,this._colorManager.colors,this.element,this.screenElement,this._viewportElement,this.linkifier,this.linkifier2);default:throw new Error('Unrecognized rendererType "'+this.options.rendererType+'"')}},te.prototype._setTheme=function(x){var A,le,Ge;this._theme=x,(A=this._colorManager)===null||A===void 0||A.setTheme(x),(le=this._renderService)===null||le===void 0||le.setColors(this._colorManager.colors),(Ge=this.viewport)===null||Ge===void 0||Ge.onThemeChange(this._colorManager.colors)},te.prototype.bindMouse=function(){var x=this,A=this,le=this.element;function Ge(Ze){var je,lt,Rt=A._mouseService.getRawByteCoords(Ze,A.screenElement,A.cols,A.rows);if(!Rt)return!1;switch(Ze.overrideType||Ze.type){case"mousemove":lt=32,Ze.buttons===void 0?(je=3,Ze.button!==void 0&&(je=Ze.button<3?Ze.button:3)):je=1&Ze.buttons?0:4&Ze.buttons?1:2&Ze.buttons?2:3;break;case"mouseup":lt=0,je=Ze.button<3?Ze.button:3;break;case"mousedown":lt=1,je=Ze.button<3?Ze.button:3;break;case"wheel":if(A.viewport.getLinesScrolled(Ze)===0)return!1;lt=Ze.deltaY<0?0:1,je=4;break;default:return!1}return!(lt===void 0||je===void 0||je>4)&&A.coreMouseService.triggerMouseEvent({col:Rt.x-33,row:Rt.y-33,button:je,action:lt,ctrl:Ze.ctrlKey,alt:Ze.altKey,shift:Ze.shiftKey})}var be={mouseup:null,wheel:null,mousedrag:null,mousemove:null},Ye=function(Ze){return Ge(Ze),Ze.buttons||(x._document.removeEventListener("mouseup",be.mouseup),be.mousedrag&&x._document.removeEventListener("mousemove",be.mousedrag)),x.cancel(Ze)},ve=function(Ze){return Ge(Ze),x.cancel(Ze,!0)},xe=function(Ze){Ze.buttons&&Ge(Ze)},we=function(Ze){Ze.buttons||Ge(Ze)};this.register(this.coreMouseService.onProtocolChange(function(Ze){Ze?(x.optionsService.rawOptions.logLevel==="debug"&&x._logService.debug("Binding to mouse events:",x.coreMouseService.explainEvents(Ze)),x.element.classList.add("enable-mouse-events"),x._selectionService.disable()):(x._logService.debug("Unbinding from mouse events."),x.element.classList.remove("enable-mouse-events"),x._selectionService.enable()),8&Ze?be.mousemove||(le.addEventListener("mousemove",we),be.mousemove=we):(le.removeEventListener("mousemove",be.mousemove),be.mousemove=null),16&Ze?be.wheel||(le.addEventListener("wheel",ve,{passive:!1}),be.wheel=ve):(le.removeEventListener("wheel",be.wheel),be.wheel=null),2&Ze?be.mouseup||(be.mouseup=Ye):(x._document.removeEventListener("mouseup",be.mouseup),be.mouseup=null),4&Ze?be.mousedrag||(be.mousedrag=xe):(x._document.removeEventListener("mousemove",be.mousedrag),be.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,b.addDisposableDomListener)(le,"mousedown",function(Ze){if(Ze.preventDefault(),x.focus(),x.coreMouseService.areMouseEventsActive&&!x._selectionService.shouldForceSelection(Ze))return Ge(Ze),be.mouseup&&x._document.addEventListener("mouseup",be.mouseup),be.mousedrag&&x._document.addEventListener("mousemove",be.mousedrag),x.cancel(Ze)})),this.register((0,b.addDisposableDomListener)(le,"wheel",function(Ze){if(!be.wheel){if(!x.buffer.hasScrollback){var je=x.viewport.getLinesScrolled(Ze);if(je===0)return;for(var lt=_.C0.ESC+(x.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(Ze.deltaY<0?"A":"B"),Rt="",Ni=0;Ni<Math.abs(je);Ni++)Rt+=lt;return x.coreService.triggerDataEvent(Rt,!0),x.cancel(Ze,!0)}return x.viewport.onWheel(Ze)?x.cancel(Ze):void 0}},{passive:!1})),this.register((0,b.addDisposableDomListener)(le,"touchstart",function(Ze){if(!x.coreMouseService.areMouseEventsActive)return x.viewport.onTouchStart(Ze),x.cancel(Ze)},{passive:!0})),this.register((0,b.addDisposableDomListener)(le,"touchmove",function(Ze){if(!x.coreMouseService.areMouseEventsActive)return x.viewport.onTouchMove(Ze)?void 0:x.cancel(Ze)},{passive:!1}))},te.prototype.refresh=function(x,A){var le;(le=this._renderService)===null||le===void 0||le.refreshRows(x,A)},te.prototype._queueLinkification=function(x,A){var le;(le=this.linkifier)===null||le===void 0||le.linkifyRows(x,A)},te.prototype.updateCursorStyle=function(x){var A;!((A=this._selectionService)===null||A===void 0)&&A.shouldColumnSelect(x)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")},te.prototype._showCursor=function(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))},te.prototype.scrollLines=function(x,A,le){le===void 0&&(le=0),ge.prototype.scrollLines.call(this,x,A,le),this.refresh(0,this.rows-1)},te.prototype.paste=function(x){(0,y.paste)(x,this.textarea,this.coreService)},te.prototype.attachCustomKeyEventHandler=function(x){this._customKeyEventHandler=x},te.prototype.registerLinkMatcher=function(x,A,le){var Ge=this.linkifier.registerLinkMatcher(x,A,le);return this.refresh(0,this.rows-1),Ge},te.prototype.deregisterLinkMatcher=function(x){this.linkifier.deregisterLinkMatcher(x)&&this.refresh(0,this.rows-1)},te.prototype.registerLinkProvider=function(x){return this.linkifier2.registerLinkProvider(x)},te.prototype.registerCharacterJoiner=function(x){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");var A=this._characterJoinerService.register(x);return this.refresh(0,this.rows-1),A},te.prototype.deregisterCharacterJoiner=function(x){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(x)&&this.refresh(0,this.rows-1)},Object.defineProperty(te.prototype,"markers",{get:function(){return this.buffer.markers},enumerable:!1,configurable:!0}),te.prototype.addMarker=function(x){if(this.buffer===this.buffers.normal)return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+x)},te.prototype.registerDecoration=function(x){return this._decorationService.registerDecoration(x)},te.prototype.hasSelection=function(){return!!this._selectionService&&this._selectionService.hasSelection},te.prototype.select=function(x,A,le){this._selectionService.setSelection(x,A,le)},te.prototype.getSelection=function(){return this._selectionService?this._selectionService.selectionText:""},te.prototype.getSelectionPosition=function(){if(this._selectionService&&this._selectionService.hasSelection)return{startColumn:this._selectionService.selectionStart[0],startRow:this._selectionService.selectionStart[1],endColumn:this._selectionService.selectionEnd[0],endRow:this._selectionService.selectionEnd[1]}},te.prototype.clearSelection=function(){var x;(x=this._selectionService)===null||x===void 0||x.clearSelection()},te.prototype.selectAll=function(){var x;(x=this._selectionService)===null||x===void 0||x.selectAll()},te.prototype.selectLines=function(x,A){var le;(le=this._selectionService)===null||le===void 0||le.selectLines(x,A)},te.prototype._keyDown=function(x){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(x)===!1)return!1;var A=this.browser.isMac&&this.options.macOptionIsMeta&&x.altKey;if(!A&&!this._compositionHelper.keydown(x))return this.buffer.ybase!==this.buffer.ydisp&&this._bufferService.scrollToBottom(),!1;A||x.key!=="Dead"&&x.key!=="AltGraph"||(this._unprocessedDeadKey=!0);var le=(0,I.evaluateKeyboardEvent)(x,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(x),le.type===3||le.type===2){var Ge=this.rows-1;return this.scrollLines(le.type===2?-Ge:Ge),this.cancel(x,!0)}return le.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,x)||(le.cancel&&this.cancel(x,!0),!le.key||!!(x.key&&!x.ctrlKey&&!x.altKey&&!x.metaKey&&x.key.length===1&&x.key.charCodeAt(0)>=65&&x.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(le.key!==_.C0.ETX&&le.key!==_.C0.CR||(this.textarea.value=""),this._onKey.fire({key:le.key,domEvent:x}),this._showCursor(),this.coreService.triggerDataEvent(le.key,!0),this.optionsService.rawOptions.screenReaderMode?void(this._keyDownHandled=!0):this.cancel(x,!0))))},te.prototype._isThirdLevelShift=function(x,A){var le=x.isMac&&!this.options.macOptionIsMeta&&A.altKey&&!A.ctrlKey&&!A.metaKey||x.isWindows&&A.altKey&&A.ctrlKey&&!A.metaKey||x.isWindows&&A.getModifierState("AltGraph");return A.type==="keypress"?le:le&&(!A.keyCode||A.keyCode>47)},te.prototype._keyUp=function(x){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(x)===!1||(function(A){return A.keyCode===16||A.keyCode===17||A.keyCode===18}(x)||this.focus(),this.updateCursorStyle(x),this._keyPressHandled=!1)},te.prototype._keyPress=function(x){var A;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(x)===!1)return!1;if(this.cancel(x),x.charCode)A=x.charCode;else if(x.which===null||x.which===void 0)A=x.keyCode;else{if(x.which===0||x.charCode===0)return!1;A=x.which}return!(!A||(x.altKey||x.ctrlKey||x.metaKey)&&!this._isThirdLevelShift(this.browser,x)||(A=String.fromCharCode(A),this._onKey.fire({key:A,domEvent:x}),this._showCursor(),this.coreService.triggerDataEvent(A,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))},te.prototype._inputEvent=function(x){if(x.data&&x.inputType==="insertText"&&(!x.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;var A=x.data;return this.coreService.triggerDataEvent(A,!0),this.cancel(x),!0}return!1},te.prototype.bell=function(){var x;this._soundBell()&&((x=this._soundService)===null||x===void 0||x.playBellSound()),this._onBell.fire()},te.prototype.resize=function(x,A){x!==this.cols||A!==this.rows?ge.prototype.resize.call(this,x,A):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()},te.prototype._afterResize=function(x,A){var le,Ge;(le=this._charSizeService)===null||le===void 0||le.measure(),(Ge=this.viewport)===null||Ge===void 0||Ge.syncScrollArea(!0)},te.prototype.clear=function(){if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(var x=1;x<this.rows;x++)this.buffer.lines.push(this.buffer.getBlankLine(F.DEFAULT_ATTR_DATA));this.refresh(0,this.rows-1),this._onScroll.fire({position:this.buffer.ydisp,source:0})}},te.prototype.reset=function(){var x,A;this.options.rows=this.rows,this.options.cols=this.cols;var le=this._customKeyEventHandler;this._setup(),ge.prototype.reset.call(this),(x=this._selectionService)===null||x===void 0||x.reset(),this._decorationService.reset(),this._customKeyEventHandler=le,this.refresh(0,this.rows-1),(A=this.viewport)===null||A===void 0||A.syncScrollArea()},te.prototype.clearTextureAtlas=function(){var x;(x=this._renderService)===null||x===void 0||x.clearTextureAtlas()},te.prototype._reportFocus=function(){var x;!((x=this.element)===null||x===void 0)&&x.classList.contains("focus")?this.coreService.triggerDataEvent(_.C0.ESC+"[I"):this.coreService.triggerDataEvent(_.C0.ESC+"[O")},te.prototype._reportWindowsOptions=function(x){if(this._renderService)switch(x){case g.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:var A=this._renderService.dimensions.scaledCanvasWidth.toFixed(0),le=this._renderService.dimensions.scaledCanvasHeight.toFixed(0);this.coreService.triggerDataEvent(_.C0.ESC+"[4;"+le+";"+A+"t");break;case g.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:var Ge=this._renderService.dimensions.scaledCellWidth.toFixed(0),be=this._renderService.dimensions.scaledCellHeight.toFixed(0);this.coreService.triggerDataEvent(_.C0.ESC+"[6;"+be+";"+Ge+"t")}},te.prototype.cancel=function(x,A){if(this.options.cancelEvents||A)return x.preventDefault(),x.stopPropagation(),!1},te.prototype._visualBell=function(){return!1},te.prototype._soundBell=function(){return this.options.bellStyle==="sound"},te}(he.CoreTerminal);o.Terminal=X},9924:(n,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.TimeBasedDebouncer=void 0;var s=function(){function u(l,a){a===void 0&&(a=1e3),this._renderCallback=l,this._debounceThresholdMS=a,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}return u.prototype.dispose=function(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)},u.prototype.refresh=function(l,a,h){var p=this;this._rowCount=h,l=l!==void 0?l:0,a=a!==void 0?a:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,l):l,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,a):a;var d=Date.now();if(d-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=d,this._innerRefresh();else if(!this._additionalRefreshRequested){var c=d-this._lastRefreshMs,y=this._debounceThresholdMS-c;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(function(){p._lastRefreshMs=Date.now(),p._innerRefresh(),p._additionalRefreshRequested=!1,p._refreshTimeoutID=void 0},y)}},u.prototype._innerRefresh=function(){if(this._rowStart!==void 0&&this._rowEnd!==void 0&&this._rowCount!==void 0){var l=Math.max(this._rowStart,0),a=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(l,a)}},u}();o.TimeBasedDebouncer=s},1680:function(n,o,s){var u,l=this&&this.__extends||(u=function(g,m){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,v){f.__proto__=v}||function(f,v){for(var Z in v)Object.prototype.hasOwnProperty.call(v,Z)&&(f[Z]=v[Z])},u(g,m)},function(g,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");function f(){this.constructor=g}u(g,m),g.prototype=m===null?Object.create(m):(f.prototype=m.prototype,new f)}),a=this&&this.__decorate||function(g,m,f,v){var Z,b=arguments.length,G=b<3?m:v===null?v=Object.getOwnPropertyDescriptor(m,f):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")G=Reflect.decorate(g,m,f,v);else for(var S=g.length-1;S>=0;S--)(Z=g[S])&&(G=(b<3?Z(G):b>3?Z(m,f,G):Z(m,f))||G);return b>3&&G&&Object.defineProperty(m,f,G),G},h=this&&this.__param||function(g,m){return function(f,v){m(f,v,g)}};Object.defineProperty(o,"__esModule",{value:!0}),o.Viewport=void 0;var p=s(844),d=s(3656),c=s(4725),y=s(2585),_=function(g){function m(f,v,Z,b,G,S,C,R){var Y=g.call(this)||this;return Y._scrollLines=f,Y._viewportElement=v,Y._scrollArea=Z,Y._element=b,Y._bufferService=G,Y._optionsService=S,Y._charSizeService=C,Y._renderService=R,Y.scrollBarWidth=0,Y._currentRowHeight=0,Y._currentScaledCellHeight=0,Y._lastRecordedBufferLength=0,Y._lastRecordedViewportHeight=0,Y._lastRecordedBufferHeight=0,Y._lastTouchY=0,Y._lastScrollTop=0,Y._wheelPartialScroll=0,Y._refreshAnimationFrame=null,Y._ignoreNextScrollEvent=!1,Y.scrollBarWidth=Y._viewportElement.offsetWidth-Y._scrollArea.offsetWidth||15,Y.register((0,d.addDisposableDomListener)(Y._viewportElement,"scroll",Y._onScroll.bind(Y))),Y._activeBuffer=Y._bufferService.buffer,Y.register(Y._bufferService.buffers.onBufferActivate(function(I){return Y._activeBuffer=I.activeBuffer})),Y._renderDimensions=Y._renderService.dimensions,Y.register(Y._renderService.onDimensionsChange(function(I){return Y._renderDimensions=I})),setTimeout(function(){return Y.syncScrollArea()},0),Y}return l(m,g),m.prototype.onThemeChange=function(f){this._viewportElement.style.backgroundColor=f.background.css},m.prototype._refresh=function(f){var v=this;if(f)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=requestAnimationFrame(function(){return v._innerRefresh()}))},m.prototype._innerRefresh=function(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.scaledCellHeight/window.devicePixelRatio,this._currentScaledCellHeight=this._renderService.dimensions.scaledCellHeight,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;var f=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.canvasHeight);this._lastRecordedBufferHeight!==f&&(this._lastRecordedBufferHeight=f,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}var v=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==v&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=v),this._refreshAnimationFrame=null},m.prototype.syncScrollArea=function(f){if(f===void 0&&(f=!1),this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(f);this._lastRecordedViewportHeight===this._renderService.dimensions.canvasHeight&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.scaledCellHeight===this._currentScaledCellHeight||this._refresh(f)},m.prototype._onScroll=function(f){if(this._lastScrollTop=this._viewportElement.scrollTop,this._viewportElement.offsetParent){if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._scrollLines(0);var v=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._scrollLines(v)}},m.prototype._bubbleScroll=function(f,v){var Z=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(v<0&&this._viewportElement.scrollTop!==0||v>0&&Z<this._lastRecordedBufferHeight)||(f.cancelable&&f.preventDefault(),!1)},m.prototype.onWheel=function(f){var v=this._getPixelsScrolled(f);return v!==0&&(this._viewportElement.scrollTop+=v,this._bubbleScroll(f,v))},m.prototype._getPixelsScrolled=function(f){if(f.deltaY===0||f.shiftKey)return 0;var v=this._applyScrollModifier(f.deltaY,f);return f.deltaMode===WheelEvent.DOM_DELTA_LINE?v*=this._currentRowHeight:f.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(v*=this._currentRowHeight*this._bufferService.rows),v},m.prototype.getLinesScrolled=function(f){if(f.deltaY===0||f.shiftKey)return 0;var v=this._applyScrollModifier(f.deltaY,f);return f.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(v/=this._currentRowHeight+0,this._wheelPartialScroll+=v,v=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):f.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(v*=this._bufferService.rows),v},m.prototype._applyScrollModifier=function(f,v){var Z=this._optionsService.rawOptions.fastScrollModifier;return Z==="alt"&&v.altKey||Z==="ctrl"&&v.ctrlKey||Z==="shift"&&v.shiftKey?f*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:f*this._optionsService.rawOptions.scrollSensitivity},m.prototype.onTouchStart=function(f){this._lastTouchY=f.touches[0].pageY},m.prototype.onTouchMove=function(f){var v=this._lastTouchY-f.touches[0].pageY;return this._lastTouchY=f.touches[0].pageY,v!==0&&(this._viewportElement.scrollTop+=v,this._bubbleScroll(f,v))},a([h(4,y.IBufferService),h(5,y.IOptionsService),h(6,c.ICharSizeService),h(7,c.IRenderService)],m)}(p.Disposable);o.Viewport=_},3107:function(n,o,s){var u,l=this&&this.__extends||(u=function(m,f){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,Z){v.__proto__=Z}||function(v,Z){for(var b in Z)Object.prototype.hasOwnProperty.call(Z,b)&&(v[b]=Z[b])},u(m,f)},function(m,f){if(typeof f!="function"&&f!==null)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");function v(){this.constructor=m}u(m,f),m.prototype=f===null?Object.create(f):(v.prototype=f.prototype,new v)}),a=this&&this.__decorate||function(m,f,v,Z){var b,G=arguments.length,S=G<3?f:Z===null?Z=Object.getOwnPropertyDescriptor(f,v):Z;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(m,f,v,Z);else for(var C=m.length-1;C>=0;C--)(b=m[C])&&(S=(G<3?b(S):G>3?b(f,v,S):b(f,v))||S);return G>3&&S&&Object.defineProperty(f,v,S),S},h=this&&this.__param||function(m,f){return function(v,Z){f(v,Z,m)}},p=this&&this.__values||function(m){var f=typeof Symbol=="function"&&Symbol.iterator,v=f&&m[f],Z=0;if(v)return v.call(m);if(m&&typeof m.length=="number")return{next:function(){return m&&Z>=m.length&&(m=void 0),{value:m&&m[Z++],done:!m}}};throw new TypeError(f?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(o,"__esModule",{value:!0}),o.BufferDecorationRenderer=void 0;var d=s(3656),c=s(4725),y=s(844),_=s(2585),g=function(m){function f(v,Z,b,G){var S=m.call(this)||this;return S._screenElement=v,S._bufferService=Z,S._decorationService=b,S._renderService=G,S._decorationElements=new Map,S._altBufferIsActive=!1,S._dimensionsChanged=!1,S._container=document.createElement("div"),S._container.classList.add("xterm-decoration-container"),S._screenElement.appendChild(S._container),S.register(S._renderService.onRenderedViewportChange(function(){return S._queueRefresh()})),S.register(S._renderService.onDimensionsChange(function(){S._dimensionsChanged=!0,S._queueRefresh()})),S.register((0,d.addDisposableDomListener)(window,"resize",function(){return S._queueRefresh()})),S.register(S._bufferService.buffers.onBufferActivate(function(){S._altBufferIsActive=S._bufferService.buffer===S._bufferService.buffers.alt})),S.register(S._decorationService.onDecorationRegistered(function(){return S._queueRefresh()})),S.register(S._decorationService.onDecorationRemoved(function(C){return S._removeDecoration(C)})),S}return l(f,m),f.prototype.dispose=function(){this._container.remove(),this._decorationElements.clear(),m.prototype.dispose.call(this)},f.prototype._queueRefresh=function(){var v=this;this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(function(){v.refreshDecorations(),v._animationFrame=void 0}))},f.prototype.refreshDecorations=function(){var v,Z;try{for(var b=p(this._decorationService.decorations),G=b.next();!G.done;G=b.next()){var S=G.value;this._renderDecoration(S)}}catch(C){v={error:C}}finally{try{G&&!G.done&&(Z=b.return)&&Z.call(b)}finally{if(v)throw v.error}}this._dimensionsChanged=!1},f.prototype._renderDecoration=function(v){this._refreshStyle(v),this._dimensionsChanged&&this._refreshXPosition(v)},f.prototype._createElement=function(v){var Z,b=document.createElement("div");b.classList.add("xterm-decoration"),b.style.width=Math.round((v.options.width||1)*this._renderService.dimensions.actualCellWidth)+"px",b.style.height=(v.options.height||1)*this._renderService.dimensions.actualCellHeight+"px",b.style.top=(v.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.actualCellHeight+"px",b.style.lineHeight=this._renderService.dimensions.actualCellHeight+"px";var G=(Z=v.options.x)!==null&&Z!==void 0?Z:0;return G&&G>this._bufferService.cols&&(b.style.display="none"),this._refreshXPosition(v,b),b},f.prototype._refreshStyle=function(v){var Z=this,b=v.marker.line-this._bufferService.buffers.active.ydisp;if(b<0||b>=this._bufferService.rows)v.element&&(v.element.style.display="none",v.onRenderEmitter.fire(v.element));else{var G=this._decorationElements.get(v);G||(v.onDispose(function(){return Z._removeDecoration(v)}),G=this._createElement(v),v.element=G,this._decorationElements.set(v,G),this._container.appendChild(G)),G.style.top=b*this._renderService.dimensions.actualCellHeight+"px",G.style.display=this._altBufferIsActive?"none":"block",v.onRenderEmitter.fire(G)}},f.prototype._refreshXPosition=function(v,Z){var b;if(Z===void 0&&(Z=v.element),Z){var G=(b=v.options.x)!==null&&b!==void 0?b:0;(v.options.anchor||"left")==="right"?Z.style.right=G?G*this._renderService.dimensions.actualCellWidth+"px":"":Z.style.left=G?G*this._renderService.dimensions.actualCellWidth+"px":""}},f.prototype._removeDecoration=function(v){var Z;(Z=this._decorationElements.get(v))===null||Z===void 0||Z.remove(),this._decorationElements.delete(v)},a([h(1,_.IBufferService),h(2,_.IDecorationService),h(3,c.IRenderService)],f)}(y.Disposable);o.BufferDecorationRenderer=g},5871:function(n,o){var s=this&&this.__values||function(l){var a=typeof Symbol=="function"&&Symbol.iterator,h=a&&l[a],p=0;if(h)return h.call(l);if(l&&typeof l.length=="number")return{next:function(){return l&&p>=l.length&&(l=void 0),{value:l&&l[p++],done:!l}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(o,"__esModule",{value:!0}),o.ColorZoneStore=void 0;var u=function(){function l(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}return Object.defineProperty(l.prototype,"zones",{get:function(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones},enumerable:!1,configurable:!0}),l.prototype.clear=function(){this._zones.length=0,this._zonePoolIndex=0},l.prototype.addDecoration=function(a){var h,p;if(a.options.overviewRulerOptions){try{for(var d=s(this._zones),c=d.next();!c.done;c=d.next()){var y=c.value;if(y.color===a.options.overviewRulerOptions.color&&y.position===a.options.overviewRulerOptions.position){if(this._lineIntersectsZone(y,a.marker.line))return;if(this._lineAdjacentToZone(y,a.marker.line,a.options.overviewRulerOptions.position))return void this._addLineToZone(y,a.marker.line)}}}catch(_){h={error:_}}finally{try{c&&!c.done&&(p=d.return)&&p.call(d)}finally{if(h)throw h.error}}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=a.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=a.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=a.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=a.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:a.options.overviewRulerOptions.color,position:a.options.overviewRulerOptions.position,startBufferLine:a.marker.line,endBufferLine:a.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}},l.prototype.setPadding=function(a){this._linePadding=a},l.prototype._lineIntersectsZone=function(a,h){return h>=a.startBufferLine&&h<=a.endBufferLine},l.prototype._lineAdjacentToZone=function(a,h,p){return h>=a.startBufferLine-this._linePadding[p||"full"]&&h<=a.endBufferLine+this._linePadding[p||"full"]},l.prototype._addLineToZone=function(a,h){a.startBufferLine=Math.min(a.startBufferLine,h),a.endBufferLine=Math.max(a.endBufferLine,h)},l}();o.ColorZoneStore=u},5744:function(n,o,s){var u,l=this&&this.__extends||(u=function(b,G){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,C){S.__proto__=C}||function(S,C){for(var R in C)Object.prototype.hasOwnProperty.call(C,R)&&(S[R]=C[R])},u(b,G)},function(b,G){if(typeof G!="function"&&G!==null)throw new TypeError("Class extends value "+String(G)+" is not a constructor or null");function S(){this.constructor=b}u(b,G),b.prototype=G===null?Object.create(G):(S.prototype=G.prototype,new S)}),a=this&&this.__decorate||function(b,G,S,C){var R,Y=arguments.length,I=Y<3?G:C===null?C=Object.getOwnPropertyDescriptor(G,S):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")I=Reflect.decorate(b,G,S,C);else for(var w=b.length-1;w>=0;w--)(R=b[w])&&(I=(Y<3?R(I):Y>3?R(G,S,I):R(G,S))||I);return Y>3&&I&&Object.defineProperty(G,S,I),I},h=this&&this.__param||function(b,G){return function(S,C){G(S,C,b)}},p=this&&this.__values||function(b){var G=typeof Symbol=="function"&&Symbol.iterator,S=G&&b[G],C=0;if(S)return S.call(b);if(b&&typeof b.length=="number")return{next:function(){return b&&C>=b.length&&(b=void 0),{value:b&&b[C++],done:!b}}};throw new TypeError(G?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(o,"__esModule",{value:!0}),o.OverviewRulerRenderer=void 0;var d=s(5871),c=s(3656),y=s(4725),_=s(844),g=s(2585),m={full:0,left:0,center:0,right:0},f={full:0,left:0,center:0,right:0},v={full:0,left:0,center:0,right:0},Z=function(b){function G(S,C,R,Y,I,w){var F,E=b.call(this)||this;E._viewportElement=S,E._screenElement=C,E._bufferService=R,E._decorationService=Y,E._renderService=I,E._optionsService=w,E._colorZoneStore=new d.ColorZoneStore,E._shouldUpdateDimensions=!0,E._shouldUpdateAnchor=!0,E._lastKnownBufferLength=0,E._canvas=document.createElement("canvas"),E._canvas.classList.add("xterm-decoration-overview-ruler"),E._refreshCanvasDimensions(),(F=E._viewportElement.parentElement)===null||F===void 0||F.insertBefore(E._canvas,E._viewportElement);var N=E._canvas.getContext("2d");if(!N)throw new Error("Ctx cannot be null");return E._ctx=N,E._registerDecorationListeners(),E._registerBufferChangeListeners(),E._registerDimensionChangeListeners(),E}return l(G,b),Object.defineProperty(G.prototype,"_width",{get:function(){return this._optionsService.options.overviewRulerWidth||0},enumerable:!1,configurable:!0}),G.prototype._registerDecorationListeners=function(){var S=this;this.register(this._decorationService.onDecorationRegistered(function(){return S._queueRefresh(void 0,!0)})),this.register(this._decorationService.onDecorationRemoved(function(){return S._queueRefresh(void 0,!0)}))},G.prototype._registerBufferChangeListeners=function(){var S=this;this.register(this._renderService.onRenderedViewportChange(function(){return S._queueRefresh()})),this.register(this._bufferService.buffers.onBufferActivate(function(){S._canvas.style.display=S._bufferService.buffer===S._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(function(){S._lastKnownBufferLength!==S._bufferService.buffers.normal.lines.length&&(S._refreshDrawHeightConstants(),S._refreshColorZonePadding())}))},G.prototype._registerDimensionChangeListeners=function(){var S=this;this.register(this._renderService.onRender(function(){S._containerHeight&&S._containerHeight===S._screenElement.clientHeight||(S._queueRefresh(!0),S._containerHeight=S._screenElement.clientHeight)})),this.register(this._optionsService.onOptionChange(function(C){C==="overviewRulerWidth"&&S._queueRefresh(!0)})),this.register((0,c.addDisposableDomListener)(window,"resize",function(){S._queueRefresh(!0)})),this._queueRefresh(!0)},G.prototype.dispose=function(){var S;(S=this._canvas)===null||S===void 0||S.remove(),b.prototype.dispose.call(this)},G.prototype._refreshDrawConstants=function(){var S=Math.floor(this._canvas.width/3),C=Math.ceil(this._canvas.width/3);f.full=this._canvas.width,f.left=S,f.center=C,f.right=S,this._refreshDrawHeightConstants(),v.full=0,v.left=0,v.center=f.left,v.right=f.left+f.center},G.prototype._refreshDrawHeightConstants=function(){m.full=Math.round(2*window.devicePixelRatio);var S=this._canvas.height/this._bufferService.buffer.lines.length,C=Math.round(Math.max(Math.min(S,12),6)*window.devicePixelRatio);m.left=C,m.center=C,m.right=C},G.prototype._refreshColorZonePadding=function(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*m.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*m.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*m.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*m.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length},G.prototype._refreshCanvasDimensions=function(){this._canvas.style.width=this._width+"px",this._canvas.width=Math.round(this._width*window.devicePixelRatio),this._canvas.style.height=this._screenElement.clientHeight+"px",this._canvas.height=Math.round(this._screenElement.clientHeight*window.devicePixelRatio),this._refreshDrawConstants(),this._refreshColorZonePadding()},G.prototype._refreshDecorations=function(){var S,C,R,Y,I,w;this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();try{for(var F=p(this._decorationService.decorations),E=F.next();!E.done;E=F.next()){var N=E.value;this._colorZoneStore.addDecoration(N)}}catch($){S={error:$}}finally{try{E&&!E.done&&(C=F.return)&&C.call(F)}finally{if(S)throw S.error}}this._ctx.lineWidth=1;var L=this._colorZoneStore.zones;try{for(var K=p(L),J=K.next();!J.done;J=K.next())(he=J.value).position!=="full"&&this._renderColorZone(he)}catch($){R={error:$}}finally{try{J&&!J.done&&(Y=K.return)&&Y.call(K)}finally{if(R)throw R.error}}try{for(var P=p(L),ee=P.next();!ee.done;ee=P.next()){var he;(he=ee.value).position==="full"&&this._renderColorZone(he)}}catch($){I={error:$}}finally{try{ee&&!ee.done&&(w=P.return)&&w.call(P)}finally{if(I)throw I.error}}this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1},G.prototype._renderColorZone=function(S){this._ctx.fillStyle=S.color,this._ctx.fillRect(v[S.position||"full"],Math.round((this._canvas.height-1)*(S.startBufferLine/this._bufferService.buffers.active.lines.length)-m[S.position||"full"]/2),f[S.position||"full"],Math.round((this._canvas.height-1)*((S.endBufferLine-S.startBufferLine)/this._bufferService.buffers.active.lines.length)+m[S.position||"full"]))},G.prototype._queueRefresh=function(S,C){var R=this;this._shouldUpdateDimensions=S||this._shouldUpdateDimensions,this._shouldUpdateAnchor=C||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=window.requestAnimationFrame(function(){R._refreshDecorations(),R._animationFrame=void 0}))},a([h(2,g.IBufferService),h(3,g.IDecorationService),h(4,y.IRenderService),h(5,g.IOptionsService)],G)}(_.Disposable);o.OverviewRulerRenderer=Z},2950:function(n,o,s){var u=this&&this.__decorate||function(d,c,y,_){var g,m=arguments.length,f=m<3?c:_===null?_=Object.getOwnPropertyDescriptor(c,y):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(d,c,y,_);else for(var v=d.length-1;v>=0;v--)(g=d[v])&&(f=(m<3?g(f):m>3?g(c,y,f):g(c,y))||f);return m>3&&f&&Object.defineProperty(c,y,f),f},l=this&&this.__param||function(d,c){return function(y,_){c(y,_,d)}};Object.defineProperty(o,"__esModule",{value:!0}),o.CompositionHelper=void 0;var a=s(4725),h=s(2585),p=function(){function d(c,y,_,g,m,f){this._textarea=c,this._compositionView=y,this._bufferService=_,this._optionsService=g,this._coreService=m,this._renderService=f,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}return Object.defineProperty(d.prototype,"isComposing",{get:function(){return this._isComposing},enumerable:!1,configurable:!0}),d.prototype.compositionstart=function(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")},d.prototype.compositionupdate=function(c){var y=this;this._compositionView.textContent=c.data,this.updateCompositionElements(),setTimeout(function(){y._compositionPosition.end=y._textarea.value.length},0)},d.prototype.compositionend=function(){this._finalizeComposition(!0)},d.prototype.keydown=function(c){if(this._isComposing||this._isSendingComposition){if(c.keyCode===229||c.keyCode===16||c.keyCode===17||c.keyCode===18)return!1;this._finalizeComposition(!1)}return c.keyCode!==229||(this._handleAnyTextareaChanges(),!1)},d.prototype._finalizeComposition=function(c){var y=this;if(this._compositionView.classList.remove("active"),this._isComposing=!1,c){var _={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(function(){if(y._isSendingComposition){y._isSendingComposition=!1;var m;_.start+=y._dataAlreadySent.length,(m=y._isComposing?y._textarea.value.substring(_.start,_.end):y._textarea.value.substring(_.start)).length>0&&y._coreService.triggerDataEvent(m,!0)}},0)}else{this._isSendingComposition=!1;var g=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(g,!0)}},d.prototype._handleAnyTextareaChanges=function(){var c=this,y=this._textarea.value;setTimeout(function(){if(!c._isComposing){var _=c._textarea.value.replace(y,"");_.length>0&&(c._dataAlreadySent=_,c._coreService.triggerDataEvent(_,!0))}},0)},d.prototype.updateCompositionElements=function(c){var y=this;if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){var _=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),g=this._renderService.dimensions.actualCellHeight,m=this._bufferService.buffer.y*this._renderService.dimensions.actualCellHeight,f=_*this._renderService.dimensions.actualCellWidth;this._compositionView.style.left=f+"px",this._compositionView.style.top=m+"px",this._compositionView.style.height=g+"px",this._compositionView.style.lineHeight=g+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";var v=this._compositionView.getBoundingClientRect();this._textarea.style.left=f+"px",this._textarea.style.top=m+"px",this._textarea.style.width=Math.max(v.width,1)+"px",this._textarea.style.height=Math.max(v.height,1)+"px",this._textarea.style.lineHeight=v.height+"px"}c||setTimeout(function(){return y.updateCompositionElements(!0)},0)}},u([l(2,h.IBufferService),l(3,h.IOptionsService),l(4,h.ICoreService),l(5,a.IRenderService)],d)}();o.CompositionHelper=p},9806:(n,o)=>{function s(u,l,a){var h=a.getBoundingClientRect(),p=u.getComputedStyle(a),d=parseInt(p.getPropertyValue("padding-left")),c=parseInt(p.getPropertyValue("padding-top"));return[l.clientX-h.left-d,l.clientY-h.top-c]}Object.defineProperty(o,"__esModule",{value:!0}),o.getRawByteCoords=o.getCoords=o.getCoordsRelativeToElement=void 0,o.getCoordsRelativeToElement=s,o.getCoords=function(u,l,a,h,p,d,c,y,_){if(d){var g=s(u,l,a);if(g)return g[0]=Math.ceil((g[0]+(_?c/2:0))/c),g[1]=Math.ceil(g[1]/y),g[0]=Math.min(Math.max(g[0],1),h+(_?1:0)),g[1]=Math.min(Math.max(g[1],1),p),g}},o.getRawByteCoords=function(u){if(u)return{x:u[0]+32,y:u[1]+32}}},9504:(n,o,s)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.moveToCellSequence=void 0;var u=s(2584);function l(y,_,g,m){var f=y-a(g,y),v=_-a(g,_),Z=Math.abs(f-v)-function(b,G,S){for(var C=0,R=b-a(S,b),Y=G-a(S,G),I=0;I<Math.abs(R-Y);I++){var w=h(b,G)==="A"?-1:1,F=S.buffer.lines.get(R+w*I);F!=null&&F.isWrapped&&C++}return C}(y,_,g);return c(Z,d(h(y,_),m))}function a(y,_){for(var g=0,m=y.buffer.lines.get(_),f=m==null?void 0:m.isWrapped;f&&_>=0&&_<y.rows;)g++,f=(m=y.buffer.lines.get(--_))==null?void 0:m.isWrapped;return g}function h(y,_){return y>_?"A":"B"}function p(y,_,g,m,f,v){for(var Z=y,b=_,G="";Z!==g||b!==m;)Z+=f?1:-1,f&&Z>v.cols-1?(G+=v.buffer.translateBufferLineToString(b,!1,y,Z),Z=0,y=0,b++):!f&&Z<0&&(G+=v.buffer.translateBufferLineToString(b,!1,0,y+1),y=Z=v.cols-1,b--);return G+v.buffer.translateBufferLineToString(b,!1,y,Z)}function d(y,_){var g=_?"O":"[";return u.C0.ESC+g+y}function c(y,_){y=Math.floor(y);for(var g="",m=0;m<y;m++)g+=_;return g}o.moveToCellSequence=function(y,_,g,m){var f,v=g.buffer.x,Z=g.buffer.y;if(!g.buffer.hasScrollback)return function(G,S,C,R,Y,I){return l(S,R,Y,I).length===0?"":c(p(G,S,G,S-a(Y,S),!1,Y).length,d("D",I))}(v,Z,0,_,g,m)+l(Z,_,g,m)+function(G,S,C,R,Y,I){var w;w=l(S,R,Y,I).length>0?R-a(Y,R):S;var F=R,E=function(N,L,K,J,P,ee){var he;return he=l(K,J,P,ee).length>0?J-a(P,J):L,N<K&&he<=J||N>=K&&he<J?"C":"D"}(G,S,C,R,Y,I);return c(p(G,w,C,F,E==="C",Y).length,d(E,I))}(v,Z,y,_,g,m);if(Z===_)return f=v>y?"D":"C",c(Math.abs(v-y),d(f,m));f=Z>_?"D":"C";var b=Math.abs(Z-_);return c(function(G,S){return S.cols-G}(Z>_?y:v,g)+(b-1)*g.cols+1+((Z>_?v:y)-1),d(f,m))}},4389:function(n,o,s){var u=this&&this.__assign||function(){return u=Object.assign||function(m){for(var f,v=1,Z=arguments.length;v<Z;v++)for(var b in f=arguments[v])Object.prototype.hasOwnProperty.call(f,b)&&(m[b]=f[b]);return m},u.apply(this,arguments)},l=this&&this.__values||function(m){var f=typeof Symbol=="function"&&Symbol.iterator,v=f&&m[f],Z=0;if(v)return v.call(m);if(m&&typeof m.length=="number")return{next:function(){return m&&Z>=m.length&&(m=void 0),{value:m&&m[Z++],done:!m}}};throw new TypeError(f?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(o,"__esModule",{value:!0}),o.Terminal=void 0;var a=s(3236),h=s(9042),p=s(7975),d=s(7090),c=s(5741),y=s(8285),_=["cols","rows"],g=function(){function m(f){var v=this;this._core=new a.Terminal(f),this._addonManager=new c.AddonManager,this._publicOptions=u({},this._core.options);var Z=function(C){return v._core.options[C]},b=function(C,R){v._checkReadonlyOptions(C),v._core.options[C]=R};for(var G in this._core.options){var S={get:Z.bind(this,G),set:b.bind(this,G)};Object.defineProperty(this._publicOptions,G,S)}}return m.prototype._checkReadonlyOptions=function(f){if(_.includes(f))throw new Error('Option "'+f+'" can only be set in the constructor')},m.prototype._checkProposedApi=function(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")},Object.defineProperty(m.prototype,"onBell",{get:function(){return this._core.onBell},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"onBinary",{get:function(){return this._core.onBinary},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"onCursorMove",{get:function(){return this._core.onCursorMove},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"onData",{get:function(){return this._core.onData},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"onKey",{get:function(){return this._core.onKey},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"onLineFeed",{get:function(){return this._core.onLineFeed},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"onRender",{get:function(){return this._core.onRender},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"onResize",{get:function(){return this._core.onResize},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"onScroll",{get:function(){return this._core.onScroll},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"onSelectionChange",{get:function(){return this._core.onSelectionChange},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"onTitleChange",{get:function(){return this._core.onTitleChange},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"onWriteParsed",{get:function(){return this._core.onWriteParsed},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"element",{get:function(){return this._core.element},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"parser",{get:function(){return this._checkProposedApi(),this._parser||(this._parser=new p.ParserApi(this._core)),this._parser},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"unicode",{get:function(){return this._checkProposedApi(),new d.UnicodeApi(this._core)},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"textarea",{get:function(){return this._core.textarea},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"rows",{get:function(){return this._core.rows},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"cols",{get:function(){return this._core.cols},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"buffer",{get:function(){return this._checkProposedApi(),this._buffer||(this._buffer=new y.BufferNamespaceApi(this._core)),this._buffer},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"markers",{get:function(){return this._checkProposedApi(),this._core.markers},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"modes",{get:function(){var f=this._core.coreService.decPrivateModes,v="none";switch(this._core.coreMouseService.activeProtocol){case"X10":v="x10";break;case"VT200":v="vt200";break;case"DRAG":v="drag";break;case"ANY":v="any"}return{applicationCursorKeysMode:f.applicationCursorKeys,applicationKeypadMode:f.applicationKeypad,bracketedPasteMode:f.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:v,originMode:f.origin,reverseWraparoundMode:f.reverseWraparound,sendFocusMode:f.sendFocus,wraparoundMode:f.wraparound}},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"options",{get:function(){return this._publicOptions},set:function(f){for(var v in f)this._publicOptions[v]=f[v]},enumerable:!1,configurable:!0}),m.prototype.blur=function(){this._core.blur()},m.prototype.focus=function(){this._core.focus()},m.prototype.resize=function(f,v){this._verifyIntegers(f,v),this._core.resize(f,v)},m.prototype.open=function(f){this._core.open(f)},m.prototype.attachCustomKeyEventHandler=function(f){this._core.attachCustomKeyEventHandler(f)},m.prototype.registerLinkMatcher=function(f,v,Z){return this._checkProposedApi(),this._core.registerLinkMatcher(f,v,Z)},m.prototype.deregisterLinkMatcher=function(f){this._checkProposedApi(),this._core.deregisterLinkMatcher(f)},m.prototype.registerLinkProvider=function(f){return this._checkProposedApi(),this._core.registerLinkProvider(f)},m.prototype.registerCharacterJoiner=function(f){return this._checkProposedApi(),this._core.registerCharacterJoiner(f)},m.prototype.deregisterCharacterJoiner=function(f){this._checkProposedApi(),this._core.deregisterCharacterJoiner(f)},m.prototype.registerMarker=function(f){return f===void 0&&(f=0),this._checkProposedApi(),this._verifyIntegers(f),this._core.addMarker(f)},m.prototype.registerDecoration=function(f){var v,Z,b;return this._checkProposedApi(),this._verifyPositiveIntegers((v=f.x)!==null&&v!==void 0?v:0,(Z=f.width)!==null&&Z!==void 0?Z:0,(b=f.height)!==null&&b!==void 0?b:0),this._core.registerDecoration(f)},m.prototype.addMarker=function(f){return this.registerMarker(f)},m.prototype.hasSelection=function(){return this._core.hasSelection()},m.prototype.select=function(f,v,Z){this._verifyIntegers(f,v,Z),this._core.select(f,v,Z)},m.prototype.getSelection=function(){return this._core.getSelection()},m.prototype.getSelectionPosition=function(){return this._core.getSelectionPosition()},m.prototype.clearSelection=function(){this._core.clearSelection()},m.prototype.selectAll=function(){this._core.selectAll()},m.prototype.selectLines=function(f,v){this._verifyIntegers(f,v),this._core.selectLines(f,v)},m.prototype.dispose=function(){this._addonManager.dispose(),this._core.dispose()},m.prototype.scrollLines=function(f){this._verifyIntegers(f),this._core.scrollLines(f)},m.prototype.scrollPages=function(f){this._verifyIntegers(f),this._core.scrollPages(f)},m.prototype.scrollToTop=function(){this._core.scrollToTop()},m.prototype.scrollToBottom=function(){this._core.scrollToBottom()},m.prototype.scrollToLine=function(f){this._verifyIntegers(f),this._core.scrollToLine(f)},m.prototype.clear=function(){this._core.clear()},m.prototype.write=function(f,v){this._core.write(f,v)},m.prototype.writeUtf8=function(f,v){this._core.write(f,v)},m.prototype.writeln=function(f,v){this._core.write(f),this._core.write(`\r
`,v)},m.prototype.paste=function(f){this._core.paste(f)},m.prototype.getOption=function(f){return this._core.optionsService.getOption(f)},m.prototype.setOption=function(f,v){this._checkReadonlyOptions(f),this._core.optionsService.setOption(f,v)},m.prototype.refresh=function(f,v){this._verifyIntegers(f,v),this._core.refresh(f,v)},m.prototype.reset=function(){this._core.reset()},m.prototype.clearTextureAtlas=function(){this._core.clearTextureAtlas()},m.prototype.loadAddon=function(f){return this._addonManager.loadAddon(this,f)},Object.defineProperty(m,"strings",{get:function(){return h},enumerable:!1,configurable:!0}),m.prototype._verifyIntegers=function(){for(var f,v,Z=[],b=0;b<arguments.length;b++)Z[b]=arguments[b];try{for(var G=l(Z),S=G.next();!S.done;S=G.next()){var C=S.value;if(C===1/0||isNaN(C)||C%1!=0)throw new Error("This API only accepts integers")}}catch(R){f={error:R}}finally{try{S&&!S.done&&(v=G.return)&&v.call(G)}finally{if(f)throw f.error}}},m.prototype._verifyPositiveIntegers=function(){for(var f,v,Z=[],b=0;b<arguments.length;b++)Z[b]=arguments[b];try{for(var G=l(Z),S=G.next();!S.done;S=G.next()){var C=S.value;if(C&&(C===1/0||isNaN(C)||C%1!=0||C<0))throw new Error("This API only accepts positive integers")}}catch(R){f={error:R}}finally{try{S&&!S.done&&(v=G.return)&&v.call(G)}finally{if(f)throw f.error}}},m}();o.Terminal=g},1546:function(n,o,s){var u=this&&this.__values||function(m){var f=typeof Symbol=="function"&&Symbol.iterator,v=f&&m[f],Z=0;if(v)return v.call(m);if(m&&typeof m.length=="number")return{next:function(){return m&&Z>=m.length&&(m=void 0),{value:m&&m[Z++],done:!m}}};throw new TypeError(f?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(o,"__esModule",{value:!0}),o.BaseRenderLayer=void 0;var l=s(643),a=s(8803),h=s(1420),p=s(3734),d=s(1752),c=s(8055),y=s(9631),_=s(8978),g=function(){function m(f,v,Z,b,G,S,C,R,Y){this._container=f,this._alpha=b,this._colors=G,this._rendererId=S,this._bufferService=C,this._optionsService=R,this._decorationService=Y,this._scaledCharWidth=0,this._scaledCharHeight=0,this._scaledCellWidth=0,this._scaledCellHeight=0,this._scaledCharLeft=0,this._scaledCharTop=0,this._columnSelectMode=!1,this._currentGlyphIdentifier={chars:"",code:0,bg:0,fg:0,bold:!1,dim:!1,italic:!1},this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-"+v+"-layer"),this._canvas.style.zIndex=Z.toString(),this._initCanvas(),this._container.appendChild(this._canvas)}return m.prototype.dispose=function(){var f;(0,y.removeElementFromParent)(this._canvas),(f=this._charAtlas)===null||f===void 0||f.dispose()},m.prototype._initCanvas=function(){this._ctx=(0,d.throwIfFalsy)(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()},m.prototype.onOptionsChanged=function(){},m.prototype.onBlur=function(){},m.prototype.onFocus=function(){},m.prototype.onCursorMove=function(){},m.prototype.onGridChanged=function(f,v){},m.prototype.onSelectionChanged=function(f,v,Z){Z===void 0&&(Z=!1),this._selectionStart=f,this._selectionEnd=v,this._columnSelectMode=Z},m.prototype.setColors=function(f){this._refreshCharAtlas(f)},m.prototype._setTransparency=function(f){if(f!==this._alpha){var v=this._canvas;this._alpha=f,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,v),this._refreshCharAtlas(this._colors),this.onGridChanged(0,this._bufferService.rows-1)}},m.prototype._refreshCharAtlas=function(f){this._scaledCharWidth<=0&&this._scaledCharHeight<=0||(this._charAtlas=(0,h.acquireCharAtlas)(this._optionsService.rawOptions,this._rendererId,f,this._scaledCharWidth,this._scaledCharHeight),this._charAtlas.warmUp())},m.prototype.resize=function(f){this._scaledCellWidth=f.scaledCellWidth,this._scaledCellHeight=f.scaledCellHeight,this._scaledCharWidth=f.scaledCharWidth,this._scaledCharHeight=f.scaledCharHeight,this._scaledCharLeft=f.scaledCharLeft,this._scaledCharTop=f.scaledCharTop,this._canvas.width=f.scaledCanvasWidth,this._canvas.height=f.scaledCanvasHeight,this._canvas.style.width=f.canvasWidth+"px",this._canvas.style.height=f.canvasHeight+"px",this._alpha||this._clearAll(),this._refreshCharAtlas(this._colors)},m.prototype.clearTextureAtlas=function(){var f;(f=this._charAtlas)===null||f===void 0||f.clear()},m.prototype._fillCells=function(f,v,Z,b){this._ctx.fillRect(f*this._scaledCellWidth,v*this._scaledCellHeight,Z*this._scaledCellWidth,b*this._scaledCellHeight)},m.prototype._fillMiddleLineAtCells=function(f,v,Z){Z===void 0&&(Z=1);var b=Math.ceil(.5*this._scaledCellHeight);this._ctx.fillRect(f*this._scaledCellWidth,(v+1)*this._scaledCellHeight-b-window.devicePixelRatio,Z*this._scaledCellWidth,window.devicePixelRatio)},m.prototype._fillBottomLineAtCells=function(f,v,Z){Z===void 0&&(Z=1),this._ctx.fillRect(f*this._scaledCellWidth,(v+1)*this._scaledCellHeight-window.devicePixelRatio-1,Z*this._scaledCellWidth,window.devicePixelRatio)},m.prototype._fillLeftLineAtCell=function(f,v,Z){this._ctx.fillRect(f*this._scaledCellWidth,v*this._scaledCellHeight,window.devicePixelRatio*Z,this._scaledCellHeight)},m.prototype._strokeRectAtCell=function(f,v,Z,b){this._ctx.lineWidth=window.devicePixelRatio,this._ctx.strokeRect(f*this._scaledCellWidth+window.devicePixelRatio/2,v*this._scaledCellHeight+window.devicePixelRatio/2,Z*this._scaledCellWidth-window.devicePixelRatio,b*this._scaledCellHeight-window.devicePixelRatio)},m.prototype._clearAll=function(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))},m.prototype._clearCells=function(f,v,Z,b){this._alpha?this._ctx.clearRect(f*this._scaledCellWidth,v*this._scaledCellHeight,Z*this._scaledCellWidth,b*this._scaledCellHeight):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(f*this._scaledCellWidth,v*this._scaledCellHeight,Z*this._scaledCellWidth,b*this._scaledCellHeight))},m.prototype._fillCharTrueColor=function(f,v,Z){this._ctx.font=this._getFont(!1,!1),this._ctx.textBaseline=a.TEXT_BASELINE,this._clipRow(Z);var b=!1;this._optionsService.rawOptions.customGlyphs!==!1&&(b=(0,_.tryDrawCustomChar)(this._ctx,f.getChars(),v*this._scaledCellWidth,Z*this._scaledCellHeight,this._scaledCellWidth,this._scaledCellHeight)),b||this._ctx.fillText(f.getChars(),v*this._scaledCellWidth+this._scaledCharLeft,Z*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight)},m.prototype._drawChars=function(f,v,Z){var b,G,S,C=this._getContrastColor(f,v,Z);if(C||f.isFgRGB()||f.isBgRGB())this._drawUncachedChars(f,v,Z,C);else{var R,Y;f.isInverse()?(R=f.isBgDefault()?a.INVERTED_DEFAULT_COLOR:f.getBgColor(),Y=f.isFgDefault()?a.INVERTED_DEFAULT_COLOR:f.getFgColor()):(Y=f.isBgDefault()?l.DEFAULT_COLOR:f.getBgColor(),R=f.isFgDefault()?l.DEFAULT_COLOR:f.getFgColor()),R+=this._optionsService.rawOptions.drawBoldTextInBrightColors&&f.isBold()&&R<8?8:0,this._currentGlyphIdentifier.chars=f.getChars()||l.WHITESPACE_CELL_CHAR,this._currentGlyphIdentifier.code=f.getCode()||l.WHITESPACE_CELL_CODE,this._currentGlyphIdentifier.bg=Y,this._currentGlyphIdentifier.fg=R,this._currentGlyphIdentifier.bold=!!f.isBold(),this._currentGlyphIdentifier.dim=!!f.isDim(),this._currentGlyphIdentifier.italic=!!f.isItalic();var I=!1;try{for(var w=u(this._decorationService.getDecorationsAtCell(v,Z)),F=w.next();!F.done;F=w.next()){var E=F.value;if(E.backgroundColorRGB||E.foregroundColorRGB){I=!0;break}}}catch(N){b={error:N}}finally{try{F&&!F.done&&(G=w.return)&&G.call(w)}finally{if(b)throw b.error}}!I&&(!((S=this._charAtlas)===null||S===void 0)&&S.draw(this._ctx,this._currentGlyphIdentifier,v*this._scaledCellWidth+this._scaledCharLeft,Z*this._scaledCellHeight+this._scaledCharTop))||this._drawUncachedChars(f,v,Z)}},m.prototype._drawUncachedChars=function(f,v,Z,b){if(this._ctx.save(),this._ctx.font=this._getFont(!!f.isBold(),!!f.isItalic()),this._ctx.textBaseline=a.TEXT_BASELINE,f.isInverse())if(b)this._ctx.fillStyle=b.css;else if(f.isBgDefault())this._ctx.fillStyle=c.color.opaque(this._colors.background).css;else if(f.isBgRGB())this._ctx.fillStyle="rgb("+p.AttributeData.toColorRGB(f.getBgColor()).join(",")+")";else{var G=f.getBgColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&f.isBold()&&G<8&&(G+=8),this._ctx.fillStyle=this._colors.ansi[G].css}else if(b)this._ctx.fillStyle=b.css;else if(f.isFgDefault())this._ctx.fillStyle=this._colors.foreground.css;else if(f.isFgRGB())this._ctx.fillStyle="rgb("+p.AttributeData.toColorRGB(f.getFgColor()).join(",")+")";else{var S=f.getFgColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&f.isBold()&&S<8&&(S+=8),this._ctx.fillStyle=this._colors.ansi[S].css}this._clipRow(Z),f.isDim()&&(this._ctx.globalAlpha=a.DIM_OPACITY);var C=!1;this._optionsService.rawOptions.customGlyphs!==!1&&(C=(0,_.tryDrawCustomChar)(this._ctx,f.getChars(),v*this._scaledCellWidth,Z*this._scaledCellHeight,this._scaledCellWidth,this._scaledCellHeight)),C||this._ctx.fillText(f.getChars(),v*this._scaledCellWidth+this._scaledCharLeft,Z*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight),this._ctx.restore()},m.prototype._clipRow=function(f){this._ctx.beginPath(),this._ctx.rect(0,f*this._scaledCellHeight,this._bufferService.cols*this._scaledCellWidth,this._scaledCellHeight),this._ctx.clip()},m.prototype._getFont=function(f,v){return(v?"italic":"")+" "+(f?this._optionsService.rawOptions.fontWeightBold:this._optionsService.rawOptions.fontWeight)+" "+this._optionsService.rawOptions.fontSize*window.devicePixelRatio+"px "+this._optionsService.rawOptions.fontFamily},m.prototype._getContrastColor=function(f,v,Z){var b,G,S,C,R=!1;try{for(var Y=u(this._decorationService.getDecorationsAtCell(v,Z)),I=Y.next();!I.done;I=Y.next()){var w=I.value;w.options.layer!=="top"&&R||(w.backgroundColorRGB&&(S=w.backgroundColorRGB.rgba),w.foregroundColorRGB&&(C=w.foregroundColorRGB.rgba),R=w.options.layer==="top")}}catch(ie){b={error:ie}}finally{try{I&&!I.done&&(G=Y.return)&&G.call(Y)}finally{if(b)throw b.error}}if(R||this._colors.selectionForeground&&this._isCellInSelection(v,Z)&&(C=this._colors.selectionForeground.rgba),S||C||this._optionsService.rawOptions.minimumContrastRatio!==1&&!(0,d.excludeFromContrastRatioDemands)(f.getCode())){if(!S&&!C){var F=this._colors.contrastCache.getColor(f.bg,f.fg);if(F!==void 0)return F||void 0}var E=f.getFgColor(),N=f.getFgColorMode(),L=f.getBgColor(),K=f.getBgColorMode(),J=!!f.isInverse(),P=!!f.isInverse();if(J){var ee=E;E=L,L=ee;var he=N;N=K,K=he}var $=this._resolveBackgroundRgba(S!==void 0?50331648:K,S??L,J),de=this._resolveForegroundRgba(N,E,J,P),pe=c.rgba.ensureContrastRatio(S??$,C??de,this._optionsService.rawOptions.minimumContrastRatio);if(!pe){if(!C)return void this._colors.contrastCache.setColor(f.bg,f.fg,null);pe=C}var j={css:c.channels.toCss(pe>>24&255,pe>>16&255,pe>>8&255),rgba:pe};return S||C||this._colors.contrastCache.setColor(f.bg,f.fg,j),j}},m.prototype._resolveBackgroundRgba=function(f,v,Z){switch(f){case 16777216:case 33554432:return this._colors.ansi[v].rgba;case 50331648:return v<<8;default:return Z?this._colors.foreground.rgba:this._colors.background.rgba}},m.prototype._resolveForegroundRgba=function(f,v,Z,b){switch(f){case 16777216:case 33554432:return this._optionsService.rawOptions.drawBoldTextInBrightColors&&b&&v<8&&(v+=8),this._colors.ansi[v].rgba;case 50331648:return v<<8;default:return Z?this._colors.background.rgba:this._colors.foreground.rgba}},m.prototype._isCellInSelection=function(f,v){var Z=this._selectionStart,b=this._selectionEnd;return!(!Z||!b)&&(this._columnSelectMode?f>=Z[0]&&v>=Z[1]&&f<b[0]&&v<b[1]:v>Z[1]&&v<b[1]||Z[1]===b[1]&&v===Z[1]&&f>=Z[0]&&f<b[0]||Z[1]<b[1]&&v===b[1]&&f<b[0]||Z[1]<b[1]&&v===Z[1]&&f>=Z[0])},m}();o.BaseRenderLayer=g},2512:function(n,o,s){var u,l=this&&this.__extends||(u=function(f,v){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Z,b){Z.__proto__=b}||function(Z,b){for(var G in b)Object.prototype.hasOwnProperty.call(b,G)&&(Z[G]=b[G])},u(f,v)},function(f,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");function Z(){this.constructor=f}u(f,v),f.prototype=v===null?Object.create(v):(Z.prototype=v.prototype,new Z)}),a=this&&this.__decorate||function(f,v,Z,b){var G,S=arguments.length,C=S<3?v:b===null?b=Object.getOwnPropertyDescriptor(v,Z):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(f,v,Z,b);else for(var R=f.length-1;R>=0;R--)(G=f[R])&&(C=(S<3?G(C):S>3?G(v,Z,C):G(v,Z))||C);return S>3&&C&&Object.defineProperty(v,Z,C),C},h=this&&this.__param||function(f,v){return function(Z,b){v(Z,b,f)}};Object.defineProperty(o,"__esModule",{value:!0}),o.CursorRenderLayer=void 0;var p=s(1546),d=s(511),c=s(2585),y=s(4725),_=600,g=function(f){function v(Z,b,G,S,C,R,Y,I,w,F){var E=f.call(this,Z,"cursor",b,!0,G,S,R,Y,F)||this;return E._onRequestRedraw=C,E._coreService=I,E._coreBrowserService=w,E._cell=new d.CellData,E._state={x:0,y:0,isFocused:!1,style:"",width:0},E._cursorRenderers={bar:E._renderBarCursor.bind(E),block:E._renderBlockCursor.bind(E),underline:E._renderUnderlineCursor.bind(E)},E}return l(v,f),v.prototype.dispose=function(){this._cursorBlinkStateManager&&(this._cursorBlinkStateManager.dispose(),this._cursorBlinkStateManager=void 0),f.prototype.dispose.call(this)},v.prototype.resize=function(Z){f.prototype.resize.call(this,Z),this._state={x:0,y:0,isFocused:!1,style:"",width:0}},v.prototype.reset=function(){var Z;this._clearCursor(),(Z=this._cursorBlinkStateManager)===null||Z===void 0||Z.restartBlinkAnimation(),this.onOptionsChanged()},v.prototype.onBlur=function(){var Z;(Z=this._cursorBlinkStateManager)===null||Z===void 0||Z.pause(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},v.prototype.onFocus=function(){var Z;(Z=this._cursorBlinkStateManager)===null||Z===void 0||Z.resume(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},v.prototype.onOptionsChanged=function(){var Z,b=this;this._optionsService.rawOptions.cursorBlink?this._cursorBlinkStateManager||(this._cursorBlinkStateManager=new m(this._coreBrowserService.isFocused,function(){b._render(!0)})):((Z=this._cursorBlinkStateManager)===null||Z===void 0||Z.dispose(),this._cursorBlinkStateManager=void 0),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},v.prototype.onCursorMove=function(){var Z;(Z=this._cursorBlinkStateManager)===null||Z===void 0||Z.restartBlinkAnimation()},v.prototype.onGridChanged=function(Z,b){!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isPaused?this._render(!1):this._cursorBlinkStateManager.restartBlinkAnimation()},v.prototype._render=function(Z){if(this._coreService.isCursorInitialized&&!this._coreService.isCursorHidden){var b=this._bufferService.buffer.ybase+this._bufferService.buffer.y,G=b-this._bufferService.buffer.ydisp;if(G<0||G>=this._bufferService.rows)this._clearCursor();else{var S=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1);if(this._bufferService.buffer.lines.get(b).loadCell(S,this._cell),this._cell.content!==void 0){if(!this._coreBrowserService.isFocused){this._clearCursor(),this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css;var C=this._optionsService.rawOptions.cursorStyle;return C&&C!=="block"?this._cursorRenderers[C](S,G,this._cell):this._renderBlurCursor(S,G,this._cell),this._ctx.restore(),this._state.x=S,this._state.y=G,this._state.isFocused=!1,this._state.style=C,void(this._state.width=this._cell.getWidth())}if(!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isCursorVisible){if(this._state){if(this._state.x===S&&this._state.y===G&&this._state.isFocused===this._coreBrowserService.isFocused&&this._state.style===this._optionsService.rawOptions.cursorStyle&&this._state.width===this._cell.getWidth())return;this._clearCursor()}this._ctx.save(),this._cursorRenderers[this._optionsService.rawOptions.cursorStyle||"block"](S,G,this._cell),this._ctx.restore(),this._state.x=S,this._state.y=G,this._state.isFocused=!1,this._state.style=this._optionsService.rawOptions.cursorStyle,this._state.width=this._cell.getWidth()}else this._clearCursor()}}}else this._clearCursor()},v.prototype._clearCursor=function(){this._state&&(window.devicePixelRatio<1?this._clearAll():this._clearCells(this._state.x,this._state.y,this._state.width,1),this._state={x:0,y:0,isFocused:!1,style:"",width:0})},v.prototype._renderBarCursor=function(Z,b,G){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillLeftLineAtCell(Z,b,this._optionsService.rawOptions.cursorWidth),this._ctx.restore()},v.prototype._renderBlockCursor=function(Z,b,G){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillCells(Z,b,G.getWidth(),1),this._ctx.fillStyle=this._colors.cursorAccent.css,this._fillCharTrueColor(G,Z,b),this._ctx.restore()},v.prototype._renderUnderlineCursor=function(Z,b,G){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillBottomLineAtCells(Z,b),this._ctx.restore()},v.prototype._renderBlurCursor=function(Z,b,G){this._ctx.save(),this._ctx.strokeStyle=this._colors.cursor.css,this._strokeRectAtCell(Z,b,G.getWidth(),1),this._ctx.restore()},a([h(5,c.IBufferService),h(6,c.IOptionsService),h(7,c.ICoreService),h(8,y.ICoreBrowserService),h(9,c.IDecorationService)],v)}(p.BaseRenderLayer);o.CursorRenderLayer=g;var m=function(){function f(v,Z){this._renderCallback=Z,this.isCursorVisible=!0,v&&this._restartInterval()}return Object.defineProperty(f.prototype,"isPaused",{get:function(){return!(this._blinkStartTimeout||this._blinkInterval)},enumerable:!1,configurable:!0}),f.prototype.dispose=function(){this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},f.prototype.restartBlinkAnimation=function(){var v=this;this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=window.requestAnimationFrame(function(){v._renderCallback(),v._animationFrame=void 0})))},f.prototype._restartInterval=function(v){var Z=this;v===void 0&&(v=_),this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout=window.setTimeout(function(){if(Z._animationTimeRestarted){var b=_-(Date.now()-Z._animationTimeRestarted);if(Z._animationTimeRestarted=void 0,b>0)return void Z._restartInterval(b)}Z.isCursorVisible=!1,Z._animationFrame=window.requestAnimationFrame(function(){Z._renderCallback(),Z._animationFrame=void 0}),Z._blinkInterval=window.setInterval(function(){if(Z._animationTimeRestarted){var G=_-(Date.now()-Z._animationTimeRestarted);return Z._animationTimeRestarted=void 0,void Z._restartInterval(G)}Z.isCursorVisible=!Z.isCursorVisible,Z._animationFrame=window.requestAnimationFrame(function(){Z._renderCallback(),Z._animationFrame=void 0})},_)},v)},f.prototype.pause=function(){this.isCursorVisible=!0,this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},f.prototype.resume=function(){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation()},f}()},8978:function(n,o,s){var u,l,a,h,p,d,c,y,_,g,m,f,v,Z,b,G,S,C,R,Y,I,w,F,E,N,L,K,J,P,ee,he,$,de,pe,j,ie,H,Q,D,X,ge,te,x,A,le,Ge,be,Ye,ve,xe,we,Ze,je,lt,Rt,Ni,Ji,Mr,Fi,ur,nt,hr,O,W,T,k,z,ce,ye,Ke,He,Wt,vi,Oi,Ot,Xi,_i,ct,dr,gi,ri,Bi,Pr,Wn,In,Bt,vo,_o,Ln,wn,Nr,Jr,fr,pr,go,Zo,Fr,Or,So,bo,Tn,Xn,Br,Ur,Vn,En,mr,yr,vr,kn,Ui,ji,Go,Co,jr,Yo,Ro,Wo,Hr,Io,Lo,wo,To,Ls,ws,Ts,Xo,Vo,Nl=this&&this.__read||function(ne,oe){var $e=typeof Symbol=="function"&&ne[Symbol.iterator];if(!$e)return ne;var It,ni,kt=$e.call(ne),De=[];try{for(;(oe===void 0||oe-- >0)&&!(It=kt.next()).done;)De.push(It.value)}catch(Ut){ni={error:Ut}}finally{try{It&&!It.done&&($e=kt.return)&&$e.call(kt)}finally{if(ni)throw ni.error}}return De},Xs=this&&this.__values||function(ne){var oe=typeof Symbol=="function"&&Symbol.iterator,$e=oe&&ne[oe],It=0;if($e)return $e.call(ne);if(ne&&typeof ne.length=="number")return{next:function(){return ne&&It>=ne.length&&(ne=void 0),{value:ne&&ne[It++],done:!ne}}};throw new TypeError(oe?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(o,"__esModule",{value:!0}),o.tryDrawCustomChar=o.powerlineDefinitions=o.boxDrawingDefinitions=o.blockElementDefinitions=void 0;var xn=s(1752);o.blockElementDefinitions={"":[{x:0,y:0,w:8,h:4}],"":[{x:0,y:7,w:8,h:1}],"":[{x:0,y:6,w:8,h:2}],"":[{x:0,y:5,w:8,h:3}],"":[{x:0,y:4,w:8,h:4}],"":[{x:0,y:3,w:8,h:5}],"":[{x:0,y:2,w:8,h:6}],"":[{x:0,y:1,w:8,h:7}],"":[{x:0,y:0,w:8,h:8}],"":[{x:0,y:0,w:7,h:8}],"":[{x:0,y:0,w:6,h:8}],"":[{x:0,y:0,w:5,h:8}],"":[{x:0,y:0,w:4,h:8}],"":[{x:0,y:0,w:3,h:8}],"":[{x:0,y:0,w:2,h:8}],"":[{x:0,y:0,w:1,h:8}],"":[{x:4,y:0,w:4,h:8}],"":[{x:0,y:0,w:9,h:1}],"":[{x:7,y:0,w:1,h:8}],"":[{x:0,y:4,w:4,h:4}],"":[{x:4,y:4,w:4,h:4}],"":[{x:0,y:0,w:4,h:4}],"":[{x:0,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"":[{x:0,y:0,w:4,h:4},{x:4,y:4,w:4,h:4}],"":[{x:0,y:0,w:4,h:8},{x:0,y:0,w:4,h:8}],"":[{x:0,y:0,w:8,h:4},{x:4,y:0,w:4,h:8}],"":[{x:4,y:0,w:4,h:4}],"":[{x:4,y:0,w:4,h:4},{x:0,y:4,w:4,h:4}],"":[{x:4,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"":[{x:1,y:0,w:1,h:8}],"":[{x:2,y:0,w:1,h:8}],"":[{x:3,y:0,w:1,h:8}],"":[{x:4,y:0,w:1,h:8}],"":[{x:5,y:0,w:1,h:8}],"":[{x:6,y:0,w:1,h:8}],"":[{x:0,y:1,w:8,h:1}],"":[{x:0,y:2,w:8,h:1}],"":[{x:0,y:3,w:8,h:1}],"":[{x:0,y:4,w:8,h:1}],"":[{x:0,y:5,w:8,h:1}],"":[{x:0,y:6,w:8,h:1}],"":[{x:0,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"":[{x:0,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"":[{x:7,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"":[{x:7,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"":[{x:0,y:0,w:8,h:1},{x:0,y:7,w:8,h:1}],"":[{x:0,y:0,w:8,h:1},{x:0,y:2,w:8,h:1},{x:0,y:4,w:8,h:1},{x:0,y:7,w:8,h:1}],"":[{x:0,y:0,w:8,h:2}],"":[{x:0,y:0,w:8,h:3}],"":[{x:0,y:0,w:8,h:5}],"":[{x:0,y:0,w:8,h:6}],"":[{x:0,y:0,w:8,h:7}],"":[{x:6,y:0,w:2,h:8}],"":[{x:5,y:0,w:3,h:8}],"":[{x:3,y:0,w:5,h:8}],"":[{x:2,y:0,w:6,h:8}],"":[{x:1,y:0,w:7,h:8}],"":[{x:0,y:0,w:2,h:2},{x:4,y:0,w:2,h:2},{x:2,y:2,w:2,h:2},{x:6,y:2,w:2,h:2},{x:0,y:4,w:2,h:2},{x:4,y:4,w:2,h:2},{x:2,y:6,w:2,h:2},{x:6,y:6,w:2,h:2}],"":[{x:2,y:0,w:2,h:2},{x:6,y:0,w:2,h:2},{x:0,y:2,w:2,h:2},{x:4,y:2,w:2,h:2},{x:2,y:4,w:2,h:2},{x:6,y:4,w:2,h:2},{x:0,y:6,w:2,h:2},{x:4,y:6,w:2,h:2}],"":[{x:0,y:2,w:8,h:2},{x:0,y:6,w:8,h:2}]};var Jl={"":[[1,0,0,0],[0,0,0,0],[0,0,1,0],[0,0,0,0]],"":[[1,0],[0,0],[0,1],[0,0]],"":[[0,1],[1,1],[1,0],[1,1]]};o.boxDrawingDefinitions={"":(u={},u[1]="M0,.5 L1,.5",u),"":(l={},l[3]="M0,.5 L1,.5",l),"":(a={},a[1]="M.5,0 L.5,1",a),"":(h={},h[3]="M.5,0 L.5,1",h),"":(p={},p[1]="M0.5,1 L.5,.5 L1,.5",p),"":(d={},d[3]="M0.5,1 L.5,.5 L1,.5",d),"":(c={},c[1]="M0,.5 L.5,.5 L.5,1",c),"":(y={},y[3]="M0,.5 L.5,.5 L.5,1",y),"":(_={},_[1]="M.5,0 L.5,.5 L1,.5",_),"":(g={},g[3]="M.5,0 L.5,.5 L1,.5",g),"":(m={},m[1]="M.5,0 L.5,.5 L0,.5",m),"":(f={},f[3]="M.5,0 L.5,.5 L0,.5",f),"":(v={},v[1]="M.5,0 L.5,1 M.5,.5 L1,.5",v),"":(Z={},Z[3]="M.5,0 L.5,1 M.5,.5 L1,.5",Z),"":(b={},b[1]="M.5,0 L.5,1 M.5,.5 L0,.5",b),"":(G={},G[3]="M.5,0 L.5,1 M.5,.5 L0,.5",G),"":(S={},S[1]="M0,.5 L1,.5 M.5,.5 L.5,1",S),"":(C={},C[3]="M0,.5 L1,.5 M.5,.5 L.5,1",C),"":(R={},R[1]="M0,.5 L1,.5 M.5,.5 L.5,0",R),"":(Y={},Y[3]="M0,.5 L1,.5 M.5,.5 L.5,0",Y),"":(I={},I[1]="M0,.5 L1,.5 M.5,0 L.5,1",I),"":(w={},w[3]="M0,.5 L1,.5 M.5,0 L.5,1",w),"":(F={},F[1]="M.5,.5 L0,.5",F),"":(E={},E[3]="M.5,.5 L0,.5",E),"":(N={},N[1]="M.5,.5 L.5,0",N),"":(L={},L[3]="M.5,.5 L.5,0",L),"":(K={},K[1]="M.5,.5 L1,.5",K),"":(J={},J[3]="M.5,.5 L1,.5",J),"":(P={},P[1]="M.5,.5 L.5,1",P),"":(ee={},ee[3]="M.5,.5 L.5,1",ee),"":(he={},he[1]=function(ne,oe){return"M0,"+(.5-oe)+" L1,"+(.5-oe)+" M0,"+(.5+oe)+" L1,"+(.5+oe)},he),"":($={},$[1]=function(ne,oe){return"M"+(.5-ne)+",0 L"+(.5-ne)+",1 M"+(.5+ne)+",0 L"+(.5+ne)+",1"},$),"":(de={},de[1]=function(ne,oe){return"M.5,1 L.5,"+(.5-oe)+" L1,"+(.5-oe)+" M.5,"+(.5+oe)+" L1,"+(.5+oe)},de),"":(pe={},pe[1]=function(ne,oe){return"M"+(.5-ne)+",1 L"+(.5-ne)+",.5 L1,.5 M"+(.5+ne)+",.5 L"+(.5+ne)+",1"},pe),"":(j={},j[1]=function(ne,oe){return"M1,"+(.5-oe)+" L"+(.5-ne)+","+(.5-oe)+" L"+(.5-ne)+",1 M1,"+(.5+oe)+" L"+(.5+ne)+","+(.5+oe)+" L"+(.5+ne)+",1"},j),"":(ie={},ie[1]=function(ne,oe){return"M0,"+(.5-oe)+" L.5,"+(.5-oe)+" L.5,1 M0,"+(.5+oe)+" L.5,"+(.5+oe)},ie),"":(H={},H[1]=function(ne,oe){return"M"+(.5+ne)+",1 L"+(.5+ne)+",.5 L0,.5 M"+(.5-ne)+",.5 L"+(.5-ne)+",1"},H),"":(Q={},Q[1]=function(ne,oe){return"M0,"+(.5+oe)+" L"+(.5-ne)+","+(.5+oe)+" L"+(.5-ne)+",1 M0,"+(.5-oe)+" L"+(.5+ne)+","+(.5-oe)+" L"+(.5+ne)+",1"},Q),"":(D={},D[1]=function(ne,oe){return"M.5,0 L.5,"+(.5+oe)+" L1,"+(.5+oe)+" M.5,"+(.5-oe)+" L1,"+(.5-oe)},D),"":(X={},X[1]=function(ne,oe){return"M1,.5 L"+(.5-ne)+",.5 L"+(.5-ne)+",0 M"+(.5+ne)+",.5 L"+(.5+ne)+",0"},X),"":(ge={},ge[1]=function(ne,oe){return"M1,"+(.5-oe)+" L"+(.5+ne)+","+(.5-oe)+" L"+(.5+ne)+",0 M1,"+(.5+oe)+" L"+(.5-ne)+","+(.5+oe)+" L"+(.5-ne)+",0"},ge),"":(te={},te[1]=function(ne,oe){return"M0,"+(.5+oe)+" L.5,"+(.5+oe)+" L.5,0 M0,"+(.5-oe)+" L.5,"+(.5-oe)},te),"":(x={},x[1]=function(ne,oe){return"M0,.5 L"+(.5+ne)+",.5 L"+(.5+ne)+",0 M"+(.5-ne)+",.5 L"+(.5-ne)+",0"},x),"":(A={},A[1]=function(ne,oe){return"M0,"+(.5-oe)+" L"+(.5-ne)+","+(.5-oe)+" L"+(.5-ne)+",0 M0,"+(.5+oe)+" L"+(.5+ne)+","+(.5+oe)+" L"+(.5+ne)+",0"},A),"":(le={},le[1]=function(ne,oe){return"M.5,0 L.5,1 M.5,"+(.5-oe)+" L1,"+(.5-oe)+" M.5,"+(.5+oe)+" L1,"+(.5+oe)},le),"":(Ge={},Ge[1]=function(ne,oe){return"M"+(.5-ne)+",0 L"+(.5-ne)+",1 M"+(.5+ne)+",0 L"+(.5+ne)+",1 M"+(.5+ne)+",.5 L1,.5"},Ge),"":(be={},be[1]=function(ne,oe){return"M"+(.5-ne)+",0 L"+(.5-ne)+",1 M1,"+(.5+oe)+" L"+(.5+ne)+","+(.5+oe)+" L"+(.5+ne)+",1 M1,"+(.5-oe)+" L"+(.5+ne)+","+(.5-oe)+" L"+(.5+ne)+",0"},be),"":(Ye={},Ye[1]=function(ne,oe){return"M.5,0 L.5,1 M0,"+(.5-oe)+" L.5,"+(.5-oe)+" M0,"+(.5+oe)+" L.5,"+(.5+oe)},Ye),"":(ve={},ve[1]=function(ne,oe){return"M0,.5 L"+(.5-ne)+",.5 M"+(.5-ne)+",0 L"+(.5-ne)+",1 M"+(.5+ne)+",0 L"+(.5+ne)+",1"},ve),"":(xe={},xe[1]=function(ne,oe){return"M"+(.5+ne)+",0 L"+(.5+ne)+",1 M0,"+(.5+oe)+" L"+(.5-ne)+","+(.5+oe)+" L"+(.5-ne)+",1 M0,"+(.5-oe)+" L"+(.5-ne)+","+(.5-oe)+" L"+(.5-ne)+",0"},xe),"":(we={},we[1]=function(ne,oe){return"M0,"+(.5-oe)+" L1,"+(.5-oe)+" M0,"+(.5+oe)+" L1,"+(.5+oe)+" M.5,"+(.5+oe)+" L.5,1"},we),"":(Ze={},Ze[1]=function(ne,oe){return"M0,.5 L1,.5 M"+(.5-ne)+",.5 L"+(.5-ne)+",1 M"+(.5+ne)+",.5 L"+(.5+ne)+",1"},Ze),"":(je={},je[1]=function(ne,oe){return"M0,"+(.5-oe)+" L1,"+(.5-oe)+" M0,"+(.5+oe)+" L"+(.5-ne)+","+(.5+oe)+" L"+(.5-ne)+",1 M1,"+(.5+oe)+" L"+(.5+ne)+","+(.5+oe)+" L"+(.5+ne)+",1"},je),"":(lt={},lt[1]=function(ne,oe){return"M.5,0 L.5,"+(.5-oe)+" M0,"+(.5-oe)+" L1,"+(.5-oe)+" M0,"+(.5+oe)+" L1,"+(.5+oe)},lt),"":(Rt={},Rt[1]=function(ne,oe){return"M0,.5 L1,.5 M"+(.5-ne)+",.5 L"+(.5-ne)+",0 M"+(.5+ne)+",.5 L"+(.5+ne)+",0"},Rt),"":(Ni={},Ni[1]=function(ne,oe){return"M0,"+(.5+oe)+" L1,"+(.5+oe)+" M0,"+(.5-oe)+" L"+(.5-ne)+","+(.5-oe)+" L"+(.5-ne)+",0 M1,"+(.5-oe)+" L"+(.5+ne)+","+(.5-oe)+" L"+(.5+ne)+",0"},Ni),"":(Ji={},Ji[1]=function(ne,oe){return"M.5,0 L.5,1 M0,"+(.5-oe)+" L1,"+(.5-oe)+" M0,"+(.5+oe)+" L1,"+(.5+oe)},Ji),"":(Mr={},Mr[1]=function(ne,oe){return"M0,.5 L1,.5 M"+(.5-ne)+",0 L"+(.5-ne)+",1 M"+(.5+ne)+",0 L"+(.5+ne)+",1"},Mr),"":(Fi={},Fi[1]=function(ne,oe){return"M0,"+(.5+oe)+" L"+(.5-ne)+","+(.5+oe)+" L"+(.5-ne)+",1 M1,"+(.5+oe)+" L"+(.5+ne)+","+(.5+oe)+" L"+(.5+ne)+",1 M0,"+(.5-oe)+" L"+(.5-ne)+","+(.5-oe)+" L"+(.5-ne)+",0 M1,"+(.5-oe)+" L"+(.5+ne)+","+(.5-oe)+" L"+(.5+ne)+",0"},Fi),"":(ur={},ur[1]="M1,0 L0,1",ur),"":(nt={},nt[1]="M0,0 L1,1",nt),"":(hr={},hr[1]="M1,0 L0,1 M0,0 L1,1",hr),"":(O={},O[1]="M.5,.5 L0,.5",O[3]="M.5,.5 L1,.5",O),"":(W={},W[1]="M.5,.5 L.5,0",W[3]="M.5,.5 L.5,1",W),"":(T={},T[1]="M.5,.5 L1,.5",T[3]="M.5,.5 L0,.5",T),"":(k={},k[1]="M.5,.5 L.5,1",k[3]="M.5,.5 L.5,0",k),"":(z={},z[1]="M.5,.5 L.5,1",z[3]="M.5,.5 L1,.5",z),"":(ce={},ce[1]="M.5,.5 L1,.5",ce[3]="M.5,.5 L.5,1",ce),"":(ye={},ye[1]="M.5,.5 L.5,1",ye[3]="M.5,.5 L0,.5",ye),"":(Ke={},Ke[1]="M.5,.5 L0,.5",Ke[3]="M.5,.5 L.5,1",Ke),"":(He={},He[1]="M.5,.5 L.5,0",He[3]="M.5,.5 L1,.5",He),"":(Wt={},Wt[1]="M.5,.5 L1,.5",Wt[3]="M.5,.5 L.5,0",Wt),"":(vi={},vi[1]="M.5,.5 L.5,0",vi[3]="M.5,.5 L0,.5",vi),"":(Oi={},Oi[1]="M.5,.5 L0,.5",Oi[3]="M.5,.5 L.5,0",Oi),"":(Ot={},Ot[1]="M.5,0 L.5,1",Ot[3]="M.5,.5 L1,.5",Ot),"":(Xi={},Xi[1]="M0.5,1 L.5,.5 L1,.5",Xi[3]="M.5,.5 L.5,0",Xi),"":(_i={},_i[1]="M.5,0 L.5,.5 L1,.5",_i[3]="M.5,.5 L.5,1",_i),"":(ct={},ct[1]="M.5,.5 L1,.5",ct[3]="M.5,0 L.5,1",ct),"":(dr={},dr[1]="M.5,.5 L.5,1",dr[3]="M.5,0 L.5,.5 L1,.5",dr),"":(gi={},gi[1]="M.5,.5 L.5,0",gi[3]="M0.5,1 L.5,.5 L1,.5",gi),"":(ri={},ri[1]="M.5,0 L.5,1",ri[3]="M.5,.5 L0,.5",ri),"":(Bi={},Bi[1]="M0,.5 L.5,.5 L.5,1",Bi[3]="M.5,.5 L.5,0",Bi),"":(Pr={},Pr[1]="M.5,0 L.5,.5 L0,.5",Pr[3]="M.5,.5 L.5,1",Pr),"":(Wn={},Wn[1]="M.5,.5 L0,.5",Wn[3]="M.5,0 L.5,1",Wn),"":(In={},In[1]="M.5,.5 L.5,1",In[3]="M.5,0 L.5,.5 L0,.5",In),"":(Bt={},Bt[1]="M.5,.5 L.5,0",Bt[3]="M0,.5 L.5,.5 L.5,1",Bt),"":(vo={},vo[1]="M0.5,1 L.5,.5 L1,.5",vo[3]="M.5,.5 L0,.5",vo),"":(_o={},_o[1]="M0,.5 L.5,.5 L.5,1",_o[3]="M.5,.5 L1,.5",_o),"":(Ln={},Ln[1]="M.5,.5 L.5,1",Ln[3]="M0,.5 L1,.5",Ln),"":(wn={},wn[1]="M0,.5 L1,.5",wn[3]="M.5,.5 L.5,1",wn),"":(Nr={},Nr[1]="M.5,.5 L1,.5",Nr[3]="M0,.5 L.5,.5 L.5,1",Nr),"":(Jr={},Jr[1]="M.5,.5 L0,.5",Jr[3]="M0.5,1 L.5,.5 L1,.5",Jr),"":(fr={},fr[1]="M.5,0 L.5,.5 L1,.5",fr[3]="M.5,.5 L0,.5",fr),"":(pr={},pr[1]="M.5,0 L.5,.5 L0,.5",pr[3]="M.5,.5 L1,.5",pr),"":(go={},go[1]="M.5,.5 L.5,0",go[3]="M0,.5 L1,.5",go),"":(Zo={},Zo[1]="M0,.5 L1,.5",Zo[3]="M.5,.5 L.5,0",Zo),"":(Fr={},Fr[1]="M.5,.5 L1,.5",Fr[3]="M.5,0 L.5,.5 L0,.5",Fr),"":(Or={},Or[1]="M.5,.5 L0,.5",Or[3]="M.5,0 L.5,.5 L1,.5",Or),"":(So={},So[1]="M.5,0 L.5,1 M.5,.5 L1,.5",So[3]="M.5,.5 L0,.5",So),"":(bo={},bo[1]="M.5,0 L.5,1 M.5,.5 L0,.5",bo[3]="M.5,.5 L1,.5",bo),"":(Tn={},Tn[1]="M.5,0 L.5,1",Tn[3]="M0,.5 L1,.5",Tn),"":(Xn={},Xn[1]="M0,.5 L1,.5 M.5,.5 L.5,1",Xn[3]="M.5,.5 L.5,0",Xn),"":(Br={},Br[1]="M.5,.5 L.5,0 M0,.5 L1,.5",Br[3]="M.5,.5 L.5,1",Br),"":(Ur={},Ur[1]="M0,.5 L1,.5",Ur[3]="M.5,0 L.5,1",Ur),"":(Vn={},Vn[1]="M0.5,1 L.5,.5 L1,.5",Vn[3]="M.5,0 L.5,.5 L0,.5",Vn),"":(En={},En[1]="M0,.5 L.5,.5 L.5,1",En[3]="M.5,0 L.5,.5 L1,.5",En),"":(mr={},mr[1]="M.5,0 L.5,.5 L1,.5",mr[3]="M0,.5 L.5,.5 L.5,1",mr),"":(yr={},yr[1]="M.5,0 L.5,.5 L0,.5",yr[3]="M0.5,1 L.5,.5 L1,.5",yr),"":(vr={},vr[1]="M.5,.5 L.5,1",vr[3]="M.5,.5 L.5,0 M0,.5 L1,.5",vr),"":(kn={},kn[1]="M.5,.5 L.5,0",kn[3]="M0,.5 L1,.5 M.5,.5 L.5,1",kn),"":(Ui={},Ui[1]="M.5,.5 L1,.5",Ui[3]="M.5,0 L.5,1 M.5,.5 L0,.5",Ui),"":(ji={},ji[1]="M.5,.5 L0,.5",ji[3]="M.5,0 L.5,1 M.5,.5 L1,.5",ji),"":(Go={},Go[1]="M.1,.5 L.4,.5 M.6,.5 L.9,.5",Go),"":(Co={},Co[3]="M.1,.5 L.4,.5 M.6,.5 L.9,.5",Co),"":(jr={},jr[1]="M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5",jr),"":(Yo={},Yo[3]="M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5",Yo),"":(Ro={},Ro[1]="M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5",Ro),"":(Wo={},Wo[3]="M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5",Wo),"":(Hr={},Hr[1]="M.5,.1 L.5,.4 M.5,.6 L.5,.9",Hr),"":(Io={},Io[3]="M.5,.1 L.5,.4 M.5,.6 L.5,.9",Io),"":(Lo={},Lo[1]="M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333",Lo),"":(wo={},wo[3]="M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333",wo),"":(To={},To[1]="M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95",To),"":(Ls={},Ls[3]="M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95",Ls),"":(ws={},ws[1]="C.5,1,.5,.5,1,.5",ws),"":(Ts={},Ts[1]="C.5,1,.5,.5,0,.5",Ts),"":(Xo={},Xo[1]="C.5,0,.5,.5,0,.5",Xo),"":(Vo={},Vo[1]="C.5,0,.5,.5,1,.5",Vo)},o.powerlineDefinitions={"":{d:"M0,0 L1,.5 L0,1",type:0},"":{d:"M0,0 L1,.5 L0,1",type:1,horizontalPadding:.5},"":{d:"M1,0 L0,.5 L1,1",type:0},"":{d:"M1,0 L0,.5 L1,1",type:1,horizontalPadding:.5}},o.tryDrawCustomChar=function(ne,oe,$e,It,ni,kt){var De=o.blockElementDefinitions[oe];if(De)return function(Je,St,_r,gr,Hi,Di){for(var ht=0;ht<St.length;ht++){var pt=St[ht],Ee=Hi/8,mt=Di/8;Je.fillRect(_r+pt.x*Ee,gr+pt.y*mt,pt.w*Ee,pt.h*mt)}}(ne,De,$e,It,ni,kt),!0;var Ut=Jl[oe];if(Ut)return function(Je,St,_r,gr,Hi,Di){var ht,pt=Kn.get(St);pt||(pt=new Map,Kn.set(St,pt));var Ee=Je.fillStyle;if(typeof Ee!="string")throw new Error('Unexpected fillStyle type "'+Ee+'"');var mt=pt.get(Ee);if(!mt){var yt=St[0].length,jt=St.length,V=document.createElement("canvas");V.width=yt,V.height=jt;var Re=(0,xn.throwIfFalsy)(V.getContext("2d")),bt=new ImageData(yt,jt),zi=void 0,si=void 0,li=void 0,re=void 0;if(Ee.startsWith("#"))zi=parseInt(Ee.slice(1,3),16),si=parseInt(Ee.slice(3,5),16),li=parseInt(Ee.slice(5,7),16),re=Ee.length>7&&parseInt(Ee.slice(7,9),16)||1;else{if(!Ee.startsWith("rgba"))throw new Error('Unexpected fillStyle color format "'+Ee+'" when drawing pattern glyph');zi=(ht=Nl(Ee.substring(5,Ee.length-1).split(",").map(function(Zr){return parseFloat(Zr)}),4))[0],si=ht[1],li=ht[2],re=ht[3]}for(var ci=0;ci<jt;ci++)for(var xt=0;xt<yt;xt++)bt.data[4*(ci*yt+xt)]=zi,bt.data[4*(ci*yt+xt)+1]=si,bt.data[4*(ci*yt+xt)+2]=li,bt.data[4*(ci*yt+xt)+3]=St[ci][xt]*(255*re);Re.putImageData(bt,0,0),mt=(0,xn.throwIfFalsy)(Je.createPattern(V,null)),pt.set(Ee,mt)}Je.fillStyle=mt,Je.fillRect(_r,gr,Hi,Di)}(ne,Ut,$e,It,ni,kt),!0;var oi=o.boxDrawingDefinitions[oe];if(oi)return function(Je,St,_r,gr,Hi,Di){var ht,pt,Ee,mt;Je.strokeStyle=Je.fillStyle;try{for(var yt=Xs(Object.entries(St)),jt=yt.next();!jt.done;jt=yt.next()){var V=Nl(jt.value,2),Re=V[0],bt=V[1];Je.beginPath(),Je.lineWidth=window.devicePixelRatio*Number.parseInt(Re);var zi=void 0;zi=typeof bt=="function"?bt(.15,.15/Di*Hi):bt;try{for(var si=(Ee=void 0,Xs(zi.split(" "))),li=si.next();!li.done;li=si.next()){var re=li.value,ci=re[0],xt=Fl[ci];if(xt){var Zr=re.substring(1).split(",");Zr[0]&&Zr[1]&&xt(Je,Ol(Zr,Hi,Di,_r,gr))}else console.error('Could not find drawing instructions for "'+ci+'"')}}catch(M){Ee={error:M}}finally{try{li&&!li.done&&(mt=si.return)&&mt.call(si)}finally{if(Ee)throw Ee.error}}Je.stroke(),Je.closePath()}}catch(M){ht={error:M}}finally{try{jt&&!jt.done&&(pt=yt.return)&&pt.call(yt)}finally{if(ht)throw ht.error}}}(ne,oi,$e,It,ni,kt),!0;var Mn=o.powerlineDefinitions[oe];return!!Mn&&(function(Je,St,_r,gr,Hi,Di){var ht,pt;Je.beginPath(),Je.lineWidth=window.devicePixelRatio;try{for(var Ee=Xs(St.d.split(" ")),mt=Ee.next();!mt.done;mt=Ee.next()){var yt=mt.value,jt=yt[0],V=Fl[jt];if(V){var Re=yt.substring(1).split(",");Re[0]&&Re[1]&&V(Je,Ol(Re,Hi,Di,_r,gr,St.horizontalPadding))}else console.error('Could not find drawing instructions for "'+jt+'"')}}catch(bt){ht={error:bt}}finally{try{mt&&!mt.done&&(pt=Ee.return)&&pt.call(Ee)}finally{if(ht)throw ht.error}}St.type===1?(Je.strokeStyle=Je.fillStyle,Je.stroke()):Je.fill(),Je.closePath()}(ne,Mn,$e,It,ni,kt),!0)};var Kn=new Map;function Vs(ne,oe,$e){return $e===void 0&&($e=0),Math.max(Math.min(ne,oe),$e)}var Fl={C:function(ne,oe){return ne.bezierCurveTo(oe[0],oe[1],oe[2],oe[3],oe[4],oe[5])},L:function(ne,oe){return ne.lineTo(oe[0],oe[1])},M:function(ne,oe){return ne.moveTo(oe[0],oe[1])}};function Ol(ne,oe,$e,It,ni,kt){kt===void 0&&(kt=0);var De=ne.map(function(Mn){return parseFloat(Mn)||parseInt(Mn)});if(De.length<2)throw new Error("Too few arguments for instruction");for(var Ut=0;Ut<De.length;Ut+=2)De[Ut]*=oe-2*kt*window.devicePixelRatio,De[Ut]!==0&&(De[Ut]=Vs(Math.round(De[Ut]+.5)-.5,oe,0)),De[Ut]+=It+kt*window.devicePixelRatio;for(var oi=1;oi<De.length;oi+=2)De[oi]*=$e,De[oi]!==0&&(De[oi]=Vs(Math.round(De[oi]+.5)-.5,$e,0)),De[oi]+=ni;return De}},3700:(n,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.GridCache=void 0;var s=function(){function u(){this.cache=[]}return u.prototype.resize=function(l,a){for(var h=0;h<l;h++){this.cache.length<=h&&this.cache.push([]);for(var p=this.cache[h].length;p<a;p++)this.cache[h].push(void 0);this.cache[h].length=a}this.cache.length=l},u.prototype.clear=function(){for(var l=0;l<this.cache.length;l++)for(var a=0;a<this.cache[l].length;a++)this.cache[l][a]=void 0},u}();o.GridCache=s},5098:function(n,o,s){var u,l=this&&this.__extends||(u=function(g,m){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,v){f.__proto__=v}||function(f,v){for(var Z in v)Object.prototype.hasOwnProperty.call(v,Z)&&(f[Z]=v[Z])},u(g,m)},function(g,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");function f(){this.constructor=g}u(g,m),g.prototype=m===null?Object.create(m):(f.prototype=m.prototype,new f)}),a=this&&this.__decorate||function(g,m,f,v){var Z,b=arguments.length,G=b<3?m:v===null?v=Object.getOwnPropertyDescriptor(m,f):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")G=Reflect.decorate(g,m,f,v);else for(var S=g.length-1;S>=0;S--)(Z=g[S])&&(G=(b<3?Z(G):b>3?Z(m,f,G):Z(m,f))||G);return b>3&&G&&Object.defineProperty(m,f,G),G},h=this&&this.__param||function(g,m){return function(f,v){m(f,v,g)}};Object.defineProperty(o,"__esModule",{value:!0}),o.LinkRenderLayer=void 0;var p=s(1546),d=s(8803),c=s(2040),y=s(2585),_=function(g){function m(f,v,Z,b,G,S,C,R,Y){var I=g.call(this,f,"link",v,!0,Z,b,C,R,Y)||this;return G.onShowLinkUnderline(function(w){return I._onShowLinkUnderline(w)}),G.onHideLinkUnderline(function(w){return I._onHideLinkUnderline(w)}),S.onShowLinkUnderline(function(w){return I._onShowLinkUnderline(w)}),S.onHideLinkUnderline(function(w){return I._onHideLinkUnderline(w)}),I}return l(m,g),m.prototype.resize=function(f){g.prototype.resize.call(this,f),this._state=void 0},m.prototype.reset=function(){this._clearCurrentLink()},m.prototype._clearCurrentLink=function(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);var f=this._state.y2-this._state.y1-1;f>0&&this._clearCells(0,this._state.y1+1,this._state.cols,f),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}},m.prototype._onShowLinkUnderline=function(f){if(f.fg===d.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._colors.background.css:f.fg&&(0,c.is256Color)(f.fg)?this._ctx.fillStyle=this._colors.ansi[f.fg].css:this._ctx.fillStyle=this._colors.foreground.css,f.y1===f.y2)this._fillBottomLineAtCells(f.x1,f.y1,f.x2-f.x1);else{this._fillBottomLineAtCells(f.x1,f.y1,f.cols-f.x1);for(var v=f.y1+1;v<f.y2;v++)this._fillBottomLineAtCells(0,v,f.cols);this._fillBottomLineAtCells(0,f.y2,f.x2)}this._state=f},m.prototype._onHideLinkUnderline=function(f){this._clearCurrentLink()},a([h(6,y.IBufferService),h(7,y.IOptionsService),h(8,y.IDecorationService)],m)}(p.BaseRenderLayer);o.LinkRenderLayer=_},3525:function(n,o,s){var u,l=this&&this.__extends||(u=function(S,C){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(R,Y){R.__proto__=Y}||function(R,Y){for(var I in Y)Object.prototype.hasOwnProperty.call(Y,I)&&(R[I]=Y[I])},u(S,C)},function(S,C){if(typeof C!="function"&&C!==null)throw new TypeError("Class extends value "+String(C)+" is not a constructor or null");function R(){this.constructor=S}u(S,C),S.prototype=C===null?Object.create(C):(R.prototype=C.prototype,new R)}),a=this&&this.__decorate||function(S,C,R,Y){var I,w=arguments.length,F=w<3?C:Y===null?Y=Object.getOwnPropertyDescriptor(C,R):Y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")F=Reflect.decorate(S,C,R,Y);else for(var E=S.length-1;E>=0;E--)(I=S[E])&&(F=(w<3?I(F):w>3?I(C,R,F):I(C,R))||F);return w>3&&F&&Object.defineProperty(C,R,F),F},h=this&&this.__param||function(S,C){return function(R,Y){C(R,Y,S)}},p=this&&this.__values||function(S){var C=typeof Symbol=="function"&&Symbol.iterator,R=C&&S[C],Y=0;if(R)return R.call(S);if(S&&typeof S.length=="number")return{next:function(){return S&&Y>=S.length&&(S=void 0),{value:S&&S[Y++],done:!S}}};throw new TypeError(C?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(o,"__esModule",{value:!0}),o.Renderer=void 0;var d=s(9596),c=s(4149),y=s(2512),_=s(5098),g=s(844),m=s(4725),f=s(2585),v=s(1420),Z=s(8460),b=1,G=function(S){function C(R,Y,I,w,F,E,N,L){var K=S.call(this)||this;K._colors=R,K._screenElement=Y,K._bufferService=E,K._charSizeService=N,K._optionsService=L,K._id=b++,K._onRequestRedraw=new Z.EventEmitter;var J=K._optionsService.rawOptions.allowTransparency;return K._renderLayers=[F.createInstance(d.TextRenderLayer,K._screenElement,0,K._colors,J,K._id),F.createInstance(c.SelectionRenderLayer,K._screenElement,1,K._colors,K._id),F.createInstance(_.LinkRenderLayer,K._screenElement,2,K._colors,K._id,I,w),F.createInstance(y.CursorRenderLayer,K._screenElement,3,K._colors,K._id,K._onRequestRedraw)],K.dimensions={scaledCharWidth:0,scaledCharHeight:0,scaledCellWidth:0,scaledCellHeight:0,scaledCharLeft:0,scaledCharTop:0,scaledCanvasWidth:0,scaledCanvasHeight:0,canvasWidth:0,canvasHeight:0,actualCellWidth:0,actualCellHeight:0},K._devicePixelRatio=window.devicePixelRatio,K._updateDimensions(),K.onOptionsChanged(),K}return l(C,S),Object.defineProperty(C.prototype,"onRequestRedraw",{get:function(){return this._onRequestRedraw.event},enumerable:!1,configurable:!0}),C.prototype.dispose=function(){var R,Y;try{for(var I=p(this._renderLayers),w=I.next();!w.done;w=I.next())w.value.dispose()}catch(F){R={error:F}}finally{try{w&&!w.done&&(Y=I.return)&&Y.call(I)}finally{if(R)throw R.error}}S.prototype.dispose.call(this),(0,v.removeTerminalFromCache)(this._id)},C.prototype.onDevicePixelRatioChange=function(){this._devicePixelRatio!==window.devicePixelRatio&&(this._devicePixelRatio=window.devicePixelRatio,this.onResize(this._bufferService.cols,this._bufferService.rows))},C.prototype.setColors=function(R){var Y,I;this._colors=R;try{for(var w=p(this._renderLayers),F=w.next();!F.done;F=w.next()){var E=F.value;E.setColors(this._colors),E.reset()}}catch(N){Y={error:N}}finally{try{F&&!F.done&&(I=w.return)&&I.call(w)}finally{if(Y)throw Y.error}}},C.prototype.onResize=function(R,Y){var I,w;this._updateDimensions();try{for(var F=p(this._renderLayers),E=F.next();!E.done;E=F.next())E.value.resize(this.dimensions)}catch(N){I={error:N}}finally{try{E&&!E.done&&(w=F.return)&&w.call(F)}finally{if(I)throw I.error}}this._screenElement.style.width=this.dimensions.canvasWidth+"px",this._screenElement.style.height=this.dimensions.canvasHeight+"px"},C.prototype.onCharSizeChanged=function(){this.onResize(this._bufferService.cols,this._bufferService.rows)},C.prototype.onBlur=function(){this._runOperation(function(R){return R.onBlur()})},C.prototype.onFocus=function(){this._runOperation(function(R){return R.onFocus()})},C.prototype.onSelectionChanged=function(R,Y,I){I===void 0&&(I=!1),this._runOperation(function(w){return w.onSelectionChanged(R,Y,I)}),this._colors.selectionForeground&&this._onRequestRedraw.fire({start:0,end:this._bufferService.rows-1})},C.prototype.onCursorMove=function(){this._runOperation(function(R){return R.onCursorMove()})},C.prototype.onOptionsChanged=function(){this._runOperation(function(R){return R.onOptionsChanged()})},C.prototype.clear=function(){this._runOperation(function(R){return R.reset()})},C.prototype._runOperation=function(R){var Y,I;try{for(var w=p(this._renderLayers),F=w.next();!F.done;F=w.next())R(F.value)}catch(E){Y={error:E}}finally{try{F&&!F.done&&(I=w.return)&&I.call(w)}finally{if(Y)throw Y.error}}},C.prototype.renderRows=function(R,Y){var I,w;try{for(var F=p(this._renderLayers),E=F.next();!E.done;E=F.next())E.value.onGridChanged(R,Y)}catch(N){I={error:N}}finally{try{E&&!E.done&&(w=F.return)&&w.call(F)}finally{if(I)throw I.error}}},C.prototype.clearTextureAtlas=function(){var R,Y;try{for(var I=p(this._renderLayers),w=I.next();!w.done;w=I.next())w.value.clearTextureAtlas()}catch(F){R={error:F}}finally{try{w&&!w.done&&(Y=I.return)&&Y.call(I)}finally{if(R)throw R.error}}},C.prototype._updateDimensions=function(){this._charSizeService.hasValidSize&&(this.dimensions.scaledCharWidth=Math.floor(this._charSizeService.width*window.devicePixelRatio),this.dimensions.scaledCharHeight=Math.ceil(this._charSizeService.height*window.devicePixelRatio),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this._optionsService.rawOptions.lineHeight),this.dimensions.scaledCharTop=this._optionsService.rawOptions.lineHeight===1?0:Math.round((this.dimensions.scaledCellHeight-this.dimensions.scaledCharHeight)/2),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.scaledCharLeft=Math.floor(this._optionsService.rawOptions.letterSpacing/2),this.dimensions.scaledCanvasHeight=this._bufferService.rows*this.dimensions.scaledCellHeight,this.dimensions.scaledCanvasWidth=this._bufferService.cols*this.dimensions.scaledCellWidth,this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._bufferService.rows,this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._bufferService.cols)},a([h(4,f.IInstantiationService),h(5,f.IBufferService),h(6,m.ICharSizeService),h(7,f.IOptionsService)],C)}(g.Disposable);o.Renderer=G},1752:(n,o)=>{function s(u){return 57508<=u&&u<=57558}Object.defineProperty(o,"__esModule",{value:!0}),o.excludeFromContrastRatioDemands=o.isPowerlineGlyph=o.throwIfFalsy=void 0,o.throwIfFalsy=function(u){if(!u)throw new Error("value must not be falsy");return u},o.isPowerlineGlyph=s,o.excludeFromContrastRatioDemands=function(u){return s(u)||function(l){return 9472<=l&&l<=9631}(u)}},4149:function(n,o,s){var u,l=this&&this.__extends||(u=function(y,_){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,m){g.__proto__=m}||function(g,m){for(var f in m)Object.prototype.hasOwnProperty.call(m,f)&&(g[f]=m[f])},u(y,_)},function(y,_){if(typeof _!="function"&&_!==null)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");function g(){this.constructor=y}u(y,_),y.prototype=_===null?Object.create(_):(g.prototype=_.prototype,new g)}),a=this&&this.__decorate||function(y,_,g,m){var f,v=arguments.length,Z=v<3?_:m===null?m=Object.getOwnPropertyDescriptor(_,g):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Z=Reflect.decorate(y,_,g,m);else for(var b=y.length-1;b>=0;b--)(f=y[b])&&(Z=(v<3?f(Z):v>3?f(_,g,Z):f(_,g))||Z);return v>3&&Z&&Object.defineProperty(_,g,Z),Z},h=this&&this.__param||function(y,_){return function(g,m){_(g,m,y)}};Object.defineProperty(o,"__esModule",{value:!0}),o.SelectionRenderLayer=void 0;var p=s(1546),d=s(2585),c=function(y){function _(g,m,f,v,Z,b,G){var S=y.call(this,g,"selection",m,!0,f,v,Z,b,G)||this;return S._clearState(),S}return l(_,y),_.prototype._clearState=function(){this._state={start:void 0,end:void 0,columnSelectMode:void 0,ydisp:void 0}},_.prototype.resize=function(g){y.prototype.resize.call(this,g),this._clearState()},_.prototype.reset=function(){this._state.start&&this._state.end&&(this._clearState(),this._clearAll())},_.prototype.onSelectionChanged=function(g,m,f){if(y.prototype.onSelectionChanged.call(this,g,m,f),this._didStateChange(g,m,f,this._bufferService.buffer.ydisp))if(this._clearAll(),g&&m){var v=g[1]-this._bufferService.buffer.ydisp,Z=m[1]-this._bufferService.buffer.ydisp,b=Math.max(v,0),G=Math.min(Z,this._bufferService.rows-1);if(b>=this._bufferService.rows||G<0)this._state.ydisp=this._bufferService.buffer.ydisp;else{if(this._ctx.fillStyle=this._colors.selectionTransparent.css,f){var S=g[0],C=m[0]-S,R=G-b+1;this._fillCells(S,b,C,R)}else{S=v===b?g[0]:0;var Y=b===Z?m[0]:this._bufferService.cols;this._fillCells(S,b,Y-S,1);var I=Math.max(G-b-1,0);if(this._fillCells(0,b+1,this._bufferService.cols,I),b!==G){var w=Z===G?m[0]:this._bufferService.cols;this._fillCells(0,G,w,1)}}this._state.start=[g[0],g[1]],this._state.end=[m[0],m[1]],this._state.columnSelectMode=f,this._state.ydisp=this._bufferService.buffer.ydisp}}else this._clearState()},_.prototype._didStateChange=function(g,m,f,v){return!this._areCoordinatesEqual(g,this._state.start)||!this._areCoordinatesEqual(m,this._state.end)||f!==this._state.columnSelectMode||v!==this._state.ydisp},_.prototype._areCoordinatesEqual=function(g,m){return!(!g||!m)&&g[0]===m[0]&&g[1]===m[1]},a([h(4,d.IBufferService),h(5,d.IOptionsService),h(6,d.IDecorationService)],_)}(p.BaseRenderLayer);o.SelectionRenderLayer=c},9596:function(n,o,s){var u,l=this&&this.__extends||(u=function(b,G){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,C){S.__proto__=C}||function(S,C){for(var R in C)Object.prototype.hasOwnProperty.call(C,R)&&(S[R]=C[R])},u(b,G)},function(b,G){if(typeof G!="function"&&G!==null)throw new TypeError("Class extends value "+String(G)+" is not a constructor or null");function S(){this.constructor=b}u(b,G),b.prototype=G===null?Object.create(G):(S.prototype=G.prototype,new S)}),a=this&&this.__decorate||function(b,G,S,C){var R,Y=arguments.length,I=Y<3?G:C===null?C=Object.getOwnPropertyDescriptor(G,S):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")I=Reflect.decorate(b,G,S,C);else for(var w=b.length-1;w>=0;w--)(R=b[w])&&(I=(Y<3?R(I):Y>3?R(G,S,I):R(G,S))||I);return Y>3&&I&&Object.defineProperty(G,S,I),I},h=this&&this.__param||function(b,G){return function(S,C){G(S,C,b)}},p=this&&this.__values||function(b){var G=typeof Symbol=="function"&&Symbol.iterator,S=G&&b[G],C=0;if(S)return S.call(b);if(b&&typeof b.length=="number")return{next:function(){return b&&C>=b.length&&(b=void 0),{value:b&&b[C++],done:!b}}};throw new TypeError(G?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(o,"__esModule",{value:!0}),o.TextRenderLayer=void 0;var d=s(3700),c=s(1546),y=s(3734),_=s(643),g=s(511),m=s(2585),f=s(4725),v=s(4269),Z=function(b){function G(S,C,R,Y,I,w,F,E,N){var L=b.call(this,S,"text",C,Y,R,I,w,F,N)||this;return L._characterJoinerService=E,L._characterWidth=0,L._characterFont="",L._characterOverlapCache={},L._workCell=new g.CellData,L._state=new d.GridCache,L}return l(G,b),G.prototype.resize=function(S){b.prototype.resize.call(this,S);var C=this._getFont(!1,!1);this._characterWidth===S.scaledCharWidth&&this._characterFont===C||(this._characterWidth=S.scaledCharWidth,this._characterFont=C,this._characterOverlapCache={}),this._state.clear(),this._state.resize(this._bufferService.cols,this._bufferService.rows)},G.prototype.reset=function(){this._state.clear(),this._clearAll()},G.prototype._forEachCell=function(S,C,R){for(var Y=S;Y<=C;Y++)for(var I=Y+this._bufferService.buffer.ydisp,w=this._bufferService.buffer.lines.get(I),F=this._characterJoinerService.getJoinedCharacters(I),E=0;E<this._bufferService.cols;E++){w.loadCell(E,this._workCell);var N=this._workCell,L=!1,K=E;if(N.getWidth()!==0){if(F.length>0&&E===F[0][0]){L=!0;var J=F.shift();N=new v.JoinedCellData(this._workCell,w.translateToString(!0,J[0],J[1]),J[1]-J[0]),K=J[1]-1}!L&&this._isOverlapping(N)&&K<w.length-1&&w.getCodePoint(K+1)===_.NULL_CELL_CODE&&(N.content&=-12582913,N.content|=2<<22),R(N,E,Y),E=K}}},G.prototype._drawBackground=function(S,C){var R=this,Y=this._ctx,I=this._bufferService.cols,w=0,F=0,E=null;Y.save(),this._forEachCell(S,C,function(N,L,K){var J,P,ee=null;N.isInverse()?ee=N.isFgDefault()?R._colors.foreground.css:N.isFgRGB()?"rgb("+y.AttributeData.toColorRGB(N.getFgColor()).join(",")+")":R._colors.ansi[N.getFgColor()].css:N.isBgRGB()?ee="rgb("+y.AttributeData.toColorRGB(N.getBgColor()).join(",")+")":N.isBgPalette()&&(ee=R._colors.ansi[N.getBgColor()].css);var he=!1;try{for(var $=p(R._decorationService.getDecorationsAtCell(L,R._bufferService.buffer.ydisp+K)),de=$.next();!de.done;de=$.next()){var pe=de.value;pe.options.layer!=="top"&&he||(pe.backgroundColorRGB&&(ee=pe.backgroundColorRGB.css),he=pe.options.layer==="top")}}catch(j){J={error:j}}finally{try{de&&!de.done&&(P=$.return)&&P.call($)}finally{if(J)throw J.error}}E===null&&(w=L,F=K),K!==F?(Y.fillStyle=E||"",R._fillCells(w,F,I-w,1),w=L,F=K):E!==ee&&(Y.fillStyle=E||"",R._fillCells(w,F,L-w,1),w=L,F=K),E=ee}),E!==null&&(Y.fillStyle=E,this._fillCells(w,F,I-w,1)),Y.restore()},G.prototype._drawForeground=function(S,C){var R=this;this._forEachCell(S,C,function(Y,I,w){if(!Y.isInvisible()&&(R._drawChars(Y,I,w),Y.isUnderline()||Y.isStrikethrough())){if(R._ctx.save(),Y.isInverse())if(Y.isBgDefault())R._ctx.fillStyle=R._colors.background.css;else if(Y.isBgRGB())R._ctx.fillStyle="rgb("+y.AttributeData.toColorRGB(Y.getBgColor()).join(",")+")";else{var F=Y.getBgColor();R._optionsService.rawOptions.drawBoldTextInBrightColors&&Y.isBold()&&F<8&&(F+=8),R._ctx.fillStyle=R._colors.ansi[F].css}else if(Y.isFgDefault())R._ctx.fillStyle=R._colors.foreground.css;else if(Y.isFgRGB())R._ctx.fillStyle="rgb("+y.AttributeData.toColorRGB(Y.getFgColor()).join(",")+")";else{var E=Y.getFgColor();R._optionsService.rawOptions.drawBoldTextInBrightColors&&Y.isBold()&&E<8&&(E+=8),R._ctx.fillStyle=R._colors.ansi[E].css}Y.isStrikethrough()&&R._fillMiddleLineAtCells(I,w,Y.getWidth()),Y.isUnderline()&&R._fillBottomLineAtCells(I,w,Y.getWidth()),R._ctx.restore()}})},G.prototype.onGridChanged=function(S,C){this._state.cache.length!==0&&(this._charAtlas&&this._charAtlas.beginFrame(),this._clearCells(0,S,this._bufferService.cols,C-S+1),this._drawBackground(S,C),this._drawForeground(S,C))},G.prototype.onOptionsChanged=function(){this._setTransparency(this._optionsService.rawOptions.allowTransparency)},G.prototype._isOverlapping=function(S){if(S.getWidth()!==1||S.getCode()<256)return!1;var C=S.getChars();if(this._characterOverlapCache.hasOwnProperty(C))return this._characterOverlapCache[C];this._ctx.save(),this._ctx.font=this._characterFont;var R=Math.floor(this._ctx.measureText(C).width)>this._characterWidth;return this._ctx.restore(),this._characterOverlapCache[C]=R,R},a([h(5,m.IBufferService),h(6,m.IOptionsService),h(7,f.ICharacterJoinerService),h(8,m.IDecorationService)],G)}(c.BaseRenderLayer);o.TextRenderLayer=Z},9616:(n,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.BaseCharAtlas=void 0;var s=function(){function u(){this._didWarmUp=!1}return u.prototype.dispose=function(){},u.prototype.warmUp=function(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)},u.prototype._doWarmUp=function(){},u.prototype.clear=function(){},u.prototype.beginFrame=function(){},u}();o.BaseCharAtlas=s},1420:(n,o,s)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.removeTerminalFromCache=o.acquireCharAtlas=void 0;var u=s(2040),l=s(1906),a=[];o.acquireCharAtlas=function(h,p,d,c,y){for(var _=(0,u.generateConfig)(c,y,h,d),g=0;g<a.length;g++){var m=(f=a[g]).ownedBy.indexOf(p);if(m>=0){if((0,u.configEquals)(f.config,_))return f.atlas;f.ownedBy.length===1?(f.atlas.dispose(),a.splice(g,1)):f.ownedBy.splice(m,1);break}}for(g=0;g<a.length;g++){var f=a[g];if((0,u.configEquals)(f.config,_))return f.ownedBy.push(p),f.atlas}var v={atlas:new l.DynamicCharAtlas(document,_),config:_,ownedBy:[p]};return a.push(v),v.atlas},o.removeTerminalFromCache=function(h){for(var p=0;p<a.length;p++){var d=a[p].ownedBy.indexOf(h);if(d!==-1){a[p].ownedBy.length===1?(a[p].atlas.dispose(),a.splice(p,1)):a[p].ownedBy.splice(d,1);break}}}},2040:(n,o,s)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.is256Color=o.configEquals=o.generateConfig=void 0;var u=s(643);o.generateConfig=function(l,a,h,p){var d={foreground:p.foreground,background:p.background,cursor:void 0,cursorAccent:void 0,selection:void 0,ansi:p.ansi.slice()};return{devicePixelRatio:window.devicePixelRatio,scaledCharWidth:l,scaledCharHeight:a,fontFamily:h.fontFamily,fontSize:h.fontSize,fontWeight:h.fontWeight,fontWeightBold:h.fontWeightBold,allowTransparency:h.allowTransparency,colors:d}},o.configEquals=function(l,a){for(var h=0;h<l.colors.ansi.length;h++)if(l.colors.ansi[h].rgba!==a.colors.ansi[h].rgba)return!1;return l.devicePixelRatio===a.devicePixelRatio&&l.fontFamily===a.fontFamily&&l.fontSize===a.fontSize&&l.fontWeight===a.fontWeight&&l.fontWeightBold===a.fontWeightBold&&l.allowTransparency===a.allowTransparency&&l.scaledCharWidth===a.scaledCharWidth&&l.scaledCharHeight===a.scaledCharHeight&&l.colors.foreground===a.colors.foreground&&l.colors.background===a.colors.background},o.is256Color=function(l){return l<u.DEFAULT_COLOR}},8803:(n,o,s)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.CHAR_ATLAS_CELL_SPACING=o.TEXT_BASELINE=o.DIM_OPACITY=o.INVERTED_DEFAULT_COLOR=void 0;var u=s(6114);o.INVERTED_DEFAULT_COLOR=257,o.DIM_OPACITY=.5,o.TEXT_BASELINE=u.isFirefox||u.isLegacyEdge?"bottom":"ideographic",o.CHAR_ATLAS_CELL_SPACING=1},1906:function(n,o,s){var u,l=this&&this.__extends||(u=function(S,C){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(R,Y){R.__proto__=Y}||function(R,Y){for(var I in Y)Object.prototype.hasOwnProperty.call(Y,I)&&(R[I]=Y[I])},u(S,C)},function(S,C){if(typeof C!="function"&&C!==null)throw new TypeError("Class extends value "+String(C)+" is not a constructor or null");function R(){this.constructor=S}u(S,C),S.prototype=C===null?Object.create(C):(R.prototype=C.prototype,new R)});Object.defineProperty(o,"__esModule",{value:!0}),o.NoneCharAtlas=o.DynamicCharAtlas=o.getGlyphCacheKey=void 0;var a=s(8803),h=s(9616),p=s(5680),d=s(7001),c=s(6114),y=s(1752),_=s(8055),g=1024,m=1024,f={css:"rgba(0, 0, 0, 0)",rgba:0};function v(S){return S.code<<21|S.bg<<12|S.fg<<3|(S.bold?0:4)+(S.dim?0:2)+(S.italic?0:1)}o.getGlyphCacheKey=v;var Z=function(S){function C(R,Y){var I=S.call(this)||this;I._config=Y,I._drawToCacheCount=0,I._glyphsWaitingOnBitmap=[],I._bitmapCommitTimeout=null,I._bitmap=null,I._cacheCanvas=R.createElement("canvas"),I._cacheCanvas.width=g,I._cacheCanvas.height=m,I._cacheCtx=(0,y.throwIfFalsy)(I._cacheCanvas.getContext("2d",{alpha:!0}));var w=R.createElement("canvas");w.width=I._config.scaledCharWidth,w.height=I._config.scaledCharHeight,I._tmpCtx=(0,y.throwIfFalsy)(w.getContext("2d",{alpha:I._config.allowTransparency})),I._width=Math.floor(g/I._config.scaledCharWidth),I._height=Math.floor(m/I._config.scaledCharHeight);var F=I._width*I._height;return I._cacheMap=new d.LRUMap(F),I._cacheMap.prealloc(F),I}return l(C,S),C.prototype.dispose=function(){this._bitmapCommitTimeout!==null&&(window.clearTimeout(this._bitmapCommitTimeout),this._bitmapCommitTimeout=null)},C.prototype.beginFrame=function(){this._drawToCacheCount=0},C.prototype.clear=function(){if(this._cacheMap.size>0){var R=this._width*this._height;this._cacheMap=new d.LRUMap(R),this._cacheMap.prealloc(R)}this._cacheCtx.clearRect(0,0,g,m),this._tmpCtx.clearRect(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight)},C.prototype.draw=function(R,Y,I,w){if(Y.code===32)return!0;if(!this._canCache(Y))return!1;var F=v(Y),E=this._cacheMap.get(F);if(E!=null)return this._drawFromCache(R,E,I,w),!0;if(this._drawToCacheCount<100){var N;N=this._cacheMap.size<this._cacheMap.capacity?this._cacheMap.size:this._cacheMap.peek().index;var L=this._drawToCache(Y,N);return this._cacheMap.set(F,L),this._drawFromCache(R,L,I,w),!0}return!1},C.prototype._canCache=function(R){return R.code<256},C.prototype._toCoordinateX=function(R){return R%this._width*this._config.scaledCharWidth},C.prototype._toCoordinateY=function(R){return Math.floor(R/this._width)*this._config.scaledCharHeight},C.prototype._drawFromCache=function(R,Y,I,w){if(!Y.isEmpty){var F=this._toCoordinateX(Y.index),E=this._toCoordinateY(Y.index);R.drawImage(Y.inBitmap?this._bitmap:this._cacheCanvas,F,E,this._config.scaledCharWidth,this._config.scaledCharHeight,I,w,this._config.scaledCharWidth,this._config.scaledCharHeight)}},C.prototype._getColorFromAnsiIndex=function(R){return R<this._config.colors.ansi.length?this._config.colors.ansi[R]:p.DEFAULT_ANSI_COLORS[R]},C.prototype._getBackgroundColor=function(R){return this._config.allowTransparency?f:R.bg===a.INVERTED_DEFAULT_COLOR?this._config.colors.foreground:R.bg<256?this._getColorFromAnsiIndex(R.bg):this._config.colors.background},C.prototype._getForegroundColor=function(R){return R.fg===a.INVERTED_DEFAULT_COLOR?_.color.opaque(this._config.colors.background):R.fg<256?this._getColorFromAnsiIndex(R.fg):this._config.colors.foreground},C.prototype._drawToCache=function(R,Y){this._drawToCacheCount++,this._tmpCtx.save();var I=this._getBackgroundColor(R);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=I.css,this._tmpCtx.fillRect(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),this._tmpCtx.globalCompositeOperation="source-over";var w=R.bold?this._config.fontWeightBold:this._config.fontWeight,F=R.italic?"italic":"";this._tmpCtx.font=F+" "+w+" "+this._config.fontSize*this._config.devicePixelRatio+"px "+this._config.fontFamily,this._tmpCtx.textBaseline=a.TEXT_BASELINE,this._tmpCtx.fillStyle=this._getForegroundColor(R).css,R.dim&&(this._tmpCtx.globalAlpha=a.DIM_OPACITY),this._tmpCtx.fillText(R.chars,0,this._config.scaledCharHeight);var E=this._tmpCtx.getImageData(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),N=!1;if(this._config.allowTransparency||(N=G(E,I)),N&&R.chars==="_"&&!this._config.allowTransparency)for(var L=1;L<=5&&(this._tmpCtx.fillText(R.chars,0,this._config.scaledCharHeight-L),N=G(E=this._tmpCtx.getImageData(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),I));L++);this._tmpCtx.restore();var K=this._toCoordinateX(Y),J=this._toCoordinateY(Y);this._cacheCtx.putImageData(E,K,J);var P={index:Y,isEmpty:N,inBitmap:!1};return this._addGlyphToBitmap(P),P},C.prototype._addGlyphToBitmap=function(R){var Y=this;!("createImageBitmap"in window)||c.isFirefox||c.isSafari||(this._glyphsWaitingOnBitmap.push(R),this._bitmapCommitTimeout===null&&(this._bitmapCommitTimeout=window.setTimeout(function(){return Y._generateBitmap()},100)))},C.prototype._generateBitmap=function(){var R=this,Y=this._glyphsWaitingOnBitmap;this._glyphsWaitingOnBitmap=[],window.createImageBitmap(this._cacheCanvas).then(function(I){R._bitmap=I;for(var w=0;w<Y.length;w++)Y[w].inBitmap=!0}),this._bitmapCommitTimeout=null},C}(h.BaseCharAtlas);o.DynamicCharAtlas=Z;var b=function(S){function C(R,Y){return S.call(this)||this}return l(C,S),C.prototype.draw=function(R,Y,I,w){return!1},C}(h.BaseCharAtlas);function G(S,C){for(var R=!0,Y=C.rgba>>>24,I=C.rgba>>>16&255,w=C.rgba>>>8&255,F=0;F<S.data.length;F+=4)S.data[F]===Y&&S.data[F+1]===I&&S.data[F+2]===w?S.data[F+3]=0:R=!1;return R}o.NoneCharAtlas=b},7001:(n,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.LRUMap=void 0;var s=function(){function u(l){this.capacity=l,this._map={},this._head=null,this._tail=null,this._nodePool=[],this.size=0}return u.prototype._unlinkNode=function(l){var a=l.prev,h=l.next;l===this._head&&(this._head=h),l===this._tail&&(this._tail=a),a!==null&&(a.next=h),h!==null&&(h.prev=a)},u.prototype._appendNode=function(l){var a=this._tail;a!==null&&(a.next=l),l.prev=a,l.next=null,this._tail=l,this._head===null&&(this._head=l)},u.prototype.prealloc=function(l){for(var a=this._nodePool,h=0;h<l;h++)a.push({prev:null,next:null,key:null,value:null})},u.prototype.get=function(l){var a=this._map[l];return a!==void 0?(this._unlinkNode(a),this._appendNode(a),a.value):null},u.prototype.peekValue=function(l){var a=this._map[l];return a!==void 0?a.value:null},u.prototype.peek=function(){var l=this._head;return l===null?null:l.value},u.prototype.set=function(l,a){var h=this._map[l];if(h!==void 0)h=this._map[l],this._unlinkNode(h),h.value=a;else if(this.size>=this.capacity)h=this._head,this._unlinkNode(h),delete this._map[h.key],h.key=l,h.value=a,this._map[l]=h;else{var p=this._nodePool;p.length>0?((h=p.pop()).key=l,h.value=a):h={prev:null,next:null,key:l,value:a},this._map[l]=h,this.size++}this._appendNode(h)},u}();o.LRUMap=s},1296:function(n,o,s){var u,l=this&&this.__extends||(u=function(Y,I){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,F){w.__proto__=F}||function(w,F){for(var E in F)Object.prototype.hasOwnProperty.call(F,E)&&(w[E]=F[E])},u(Y,I)},function(Y,I){if(typeof I!="function"&&I!==null)throw new TypeError("Class extends value "+String(I)+" is not a constructor or null");function w(){this.constructor=Y}u(Y,I),Y.prototype=I===null?Object.create(I):(w.prototype=I.prototype,new w)}),a=this&&this.__decorate||function(Y,I,w,F){var E,N=arguments.length,L=N<3?I:F===null?F=Object.getOwnPropertyDescriptor(I,w):F;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(Y,I,w,F);else for(var K=Y.length-1;K>=0;K--)(E=Y[K])&&(L=(N<3?E(L):N>3?E(I,w,L):E(I,w))||L);return N>3&&L&&Object.defineProperty(I,w,L),L},h=this&&this.__param||function(Y,I){return function(w,F){I(w,F,Y)}},p=this&&this.__values||function(Y){var I=typeof Symbol=="function"&&Symbol.iterator,w=I&&Y[I],F=0;if(w)return w.call(Y);if(Y&&typeof Y.length=="number")return{next:function(){return Y&&F>=Y.length&&(Y=void 0),{value:Y&&Y[F++],done:!Y}}};throw new TypeError(I?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(o,"__esModule",{value:!0}),o.DomRenderer=void 0;var d=s(3787),c=s(8803),y=s(844),_=s(4725),g=s(2585),m=s(8460),f=s(8055),v=s(9631),Z="xterm-dom-renderer-owner-",b="xterm-fg-",G="xterm-bg-",S="xterm-focus",C=1,R=function(Y){function I(w,F,E,N,L,K,J,P,ee,he){var $=Y.call(this)||this;return $._colors=w,$._element=F,$._screenElement=E,$._viewportElement=N,$._linkifier=L,$._linkifier2=K,$._charSizeService=P,$._optionsService=ee,$._bufferService=he,$._terminalClass=C++,$._rowElements=[],$._rowContainer=document.createElement("div"),$._rowContainer.classList.add("xterm-rows"),$._rowContainer.style.lineHeight="normal",$._rowContainer.setAttribute("aria-hidden","true"),$._refreshRowElements($._bufferService.cols,$._bufferService.rows),$._selectionContainer=document.createElement("div"),$._selectionContainer.classList.add("xterm-selection"),$._selectionContainer.setAttribute("aria-hidden","true"),$.dimensions={scaledCharWidth:0,scaledCharHeight:0,scaledCellWidth:0,scaledCellHeight:0,scaledCharLeft:0,scaledCharTop:0,scaledCanvasWidth:0,scaledCanvasHeight:0,canvasWidth:0,canvasHeight:0,actualCellWidth:0,actualCellHeight:0},$._updateDimensions(),$._injectCss(),$._rowFactory=J.createInstance(d.DomRendererRowFactory,document,$._colors),$._element.classList.add(Z+$._terminalClass),$._screenElement.appendChild($._rowContainer),$._screenElement.appendChild($._selectionContainer),$.register($._linkifier.onShowLinkUnderline(function(de){return $._onLinkHover(de)})),$.register($._linkifier.onHideLinkUnderline(function(de){return $._onLinkLeave(de)})),$.register($._linkifier2.onShowLinkUnderline(function(de){return $._onLinkHover(de)})),$.register($._linkifier2.onHideLinkUnderline(function(de){return $._onLinkLeave(de)})),$}return l(I,Y),Object.defineProperty(I.prototype,"onRequestRedraw",{get:function(){return new m.EventEmitter().event},enumerable:!1,configurable:!0}),I.prototype.dispose=function(){this._element.classList.remove(Z+this._terminalClass),(0,v.removeElementFromParent)(this._rowContainer,this._selectionContainer,this._themeStyleElement,this._dimensionsStyleElement),Y.prototype.dispose.call(this)},I.prototype._updateDimensions=function(){var w,F;this.dimensions.scaledCharWidth=this._charSizeService.width*window.devicePixelRatio,this.dimensions.scaledCharHeight=Math.ceil(this._charSizeService.height*window.devicePixelRatio),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this._optionsService.rawOptions.lineHeight),this.dimensions.scaledCharLeft=0,this.dimensions.scaledCharTop=0,this.dimensions.scaledCanvasWidth=this.dimensions.scaledCellWidth*this._bufferService.cols,this.dimensions.scaledCanvasHeight=this.dimensions.scaledCellHeight*this._bufferService.rows,this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._bufferService.cols,this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._bufferService.rows;try{for(var E=p(this._rowElements),N=E.next();!N.done;N=E.next()){var L=N.value;L.style.width=this.dimensions.canvasWidth+"px",L.style.height=this.dimensions.actualCellHeight+"px",L.style.lineHeight=this.dimensions.actualCellHeight+"px",L.style.overflow="hidden"}}catch(J){w={error:J}}finally{try{N&&!N.done&&(F=E.return)&&F.call(E)}finally{if(w)throw w.error}}this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));var K=this._terminalSelector+" .xterm-rows span { display: inline-block; height: 100%; vertical-align: top; width: "+this.dimensions.actualCellWidth+"px}";this._dimensionsStyleElement.textContent=K,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=this.dimensions.canvasWidth+"px",this._screenElement.style.height=this.dimensions.canvasHeight+"px"},I.prototype.setColors=function(w){this._colors=w,this._injectCss()},I.prototype._injectCss=function(){var w=this;this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));var F=this._terminalSelector+" .xterm-rows { color: "+this._colors.foreground.css+"; font-family: "+this._optionsService.rawOptions.fontFamily+"; font-size: "+this._optionsService.rawOptions.fontSize+"px;}";F+=this._terminalSelector+" span:not(."+d.BOLD_CLASS+") { font-weight: "+this._optionsService.rawOptions.fontWeight+";}"+this._terminalSelector+" span."+d.BOLD_CLASS+" { font-weight: "+this._optionsService.rawOptions.fontWeightBold+";}"+this._terminalSelector+" span."+d.ITALIC_CLASS+" { font-style: italic;}",F+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  box-shadow: none; }}",F+="@keyframes blink_block_"+this._terminalClass+" { 0% {  background-color: "+this._colors.cursor.css+";  color: "+this._colors.cursorAccent.css+"; } 50% {  background-color: "+this._colors.cursorAccent.css+";  color: "+this._colors.cursor.css+"; }}",F+=this._terminalSelector+" .xterm-rows:not(.xterm-focus) ."+d.CURSOR_CLASS+"."+d.CURSOR_STYLE_BLOCK_CLASS+" { outline: 1px solid "+this._colors.cursor.css+"; outline-offset: -1px;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+d.CURSOR_CLASS+"."+d.CURSOR_BLINK_CLASS+":not(."+d.CURSOR_STYLE_BLOCK_CLASS+") { animation: blink_box_shadow_"+this._terminalClass+" 1s step-end infinite;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+d.CURSOR_CLASS+"."+d.CURSOR_BLINK_CLASS+"."+d.CURSOR_STYLE_BLOCK_CLASS+" { animation: blink_block_"+this._terminalClass+" 1s step-end infinite;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+d.CURSOR_CLASS+"."+d.CURSOR_STYLE_BLOCK_CLASS+" { background-color: "+this._colors.cursor.css+"; color: "+this._colors.cursorAccent.css+";}"+this._terminalSelector+" .xterm-rows ."+d.CURSOR_CLASS+"."+d.CURSOR_STYLE_BAR_CLASS+" { box-shadow: "+this._optionsService.rawOptions.cursorWidth+"px 0 0 "+this._colors.cursor.css+" inset;}"+this._terminalSelector+" .xterm-rows ."+d.CURSOR_CLASS+"."+d.CURSOR_STYLE_UNDERLINE_CLASS+" { box-shadow: 0 -1px 0 "+this._colors.cursor.css+" inset;}",F+=this._terminalSelector+" .xterm-selection { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}"+this._terminalSelector+" .xterm-selection div { position: absolute; background-color: "+this._colors.selectionOpaque.css+";}",this._colors.ansi.forEach(function(E,N){F+=w._terminalSelector+" ."+b+N+" { color: "+E.css+"; }"+w._terminalSelector+" ."+G+N+" { background-color: "+E.css+"; }"}),F+=this._terminalSelector+" ."+b+c.INVERTED_DEFAULT_COLOR+" { color: "+f.color.opaque(this._colors.background).css+"; }"+this._terminalSelector+" ."+G+c.INVERTED_DEFAULT_COLOR+" { background-color: "+this._colors.foreground.css+"; }",this._themeStyleElement.textContent=F},I.prototype.onDevicePixelRatioChange=function(){this._updateDimensions()},I.prototype._refreshRowElements=function(w,F){for(var E=this._rowElements.length;E<=F;E++){var N=document.createElement("div");this._rowContainer.appendChild(N),this._rowElements.push(N)}for(;this._rowElements.length>F;)this._rowContainer.removeChild(this._rowElements.pop())},I.prototype.onResize=function(w,F){this._refreshRowElements(w,F),this._updateDimensions()},I.prototype.onCharSizeChanged=function(){this._updateDimensions()},I.prototype.onBlur=function(){this._rowContainer.classList.remove(S)},I.prototype.onFocus=function(){this._rowContainer.classList.add(S)},I.prototype.onSelectionChanged=function(w,F,E){for(;this._selectionContainer.children.length;)this._selectionContainer.removeChild(this._selectionContainer.children[0]);if(this._rowFactory.onSelectionChanged(w,F,E),this.renderRows(0,this._bufferService.rows-1),w&&F){var N=w[1]-this._bufferService.buffer.ydisp,L=F[1]-this._bufferService.buffer.ydisp,K=Math.max(N,0),J=Math.min(L,this._bufferService.rows-1);if(!(K>=this._bufferService.rows||J<0)){var P=document.createDocumentFragment();if(E){var ee=w[0]>F[0];P.appendChild(this._createSelectionElement(K,ee?F[0]:w[0],ee?w[0]:F[0],J-K+1))}else{var he=N===K?w[0]:0,$=K===L?F[0]:this._bufferService.cols;P.appendChild(this._createSelectionElement(K,he,$));var de=J-K-1;if(P.appendChild(this._createSelectionElement(K+1,0,this._bufferService.cols,de)),K!==J){var pe=L===J?F[0]:this._bufferService.cols;P.appendChild(this._createSelectionElement(J,0,pe))}}this._selectionContainer.appendChild(P)}}},I.prototype._createSelectionElement=function(w,F,E,N){N===void 0&&(N=1);var L=document.createElement("div");return L.style.height=N*this.dimensions.actualCellHeight+"px",L.style.top=w*this.dimensions.actualCellHeight+"px",L.style.left=F*this.dimensions.actualCellWidth+"px",L.style.width=this.dimensions.actualCellWidth*(E-F)+"px",L},I.prototype.onCursorMove=function(){},I.prototype.onOptionsChanged=function(){this._updateDimensions(),this._injectCss()},I.prototype.clear=function(){var w,F;try{for(var E=p(this._rowElements),N=E.next();!N.done;N=E.next())N.value.innerText=""}catch(L){w={error:L}}finally{try{N&&!N.done&&(F=E.return)&&F.call(E)}finally{if(w)throw w.error}}},I.prototype.renderRows=function(w,F){for(var E=this._bufferService.buffer.ybase+this._bufferService.buffer.y,N=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),L=this._optionsService.rawOptions.cursorBlink,K=w;K<=F;K++){var J=this._rowElements[K];J.innerText="";var P=K+this._bufferService.buffer.ydisp,ee=this._bufferService.buffer.lines.get(P),he=this._optionsService.rawOptions.cursorStyle;J.appendChild(this._rowFactory.createRow(ee,P,P===E,he,N,L,this.dimensions.actualCellWidth,this._bufferService.cols))}},Object.defineProperty(I.prototype,"_terminalSelector",{get:function(){return"."+Z+this._terminalClass},enumerable:!1,configurable:!0}),I.prototype._onLinkHover=function(w){this._setCellUnderline(w.x1,w.x2,w.y1,w.y2,w.cols,!0)},I.prototype._onLinkLeave=function(w){this._setCellUnderline(w.x1,w.x2,w.y1,w.y2,w.cols,!1)},I.prototype._setCellUnderline=function(w,F,E,N,L,K){for(;w!==F||E!==N;){var J=this._rowElements[E];if(!J)return;var P=J.children[w];P&&(P.style.textDecoration=K?"underline":"none"),++w>=L&&(w=0,E++)}},a([h(6,g.IInstantiationService),h(7,_.ICharSizeService),h(8,g.IOptionsService),h(9,g.IBufferService)],I)}(y.Disposable);o.DomRenderer=R},3787:function(n,o,s){var u=this&&this.__decorate||function(Z,b,G,S){var C,R=arguments.length,Y=R<3?b:S===null?S=Object.getOwnPropertyDescriptor(b,G):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Y=Reflect.decorate(Z,b,G,S);else for(var I=Z.length-1;I>=0;I--)(C=Z[I])&&(Y=(R<3?C(Y):R>3?C(b,G,Y):C(b,G))||Y);return R>3&&Y&&Object.defineProperty(b,G,Y),Y},l=this&&this.__param||function(Z,b){return function(G,S){b(G,S,Z)}},a=this&&this.__values||function(Z){var b=typeof Symbol=="function"&&Symbol.iterator,G=b&&Z[b],S=0;if(G)return G.call(Z);if(Z&&typeof Z.length=="number")return{next:function(){return Z&&S>=Z.length&&(Z=void 0),{value:Z&&Z[S++],done:!Z}}};throw new TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(o,"__esModule",{value:!0}),o.DomRendererRowFactory=o.CURSOR_STYLE_UNDERLINE_CLASS=o.CURSOR_STYLE_BAR_CLASS=o.CURSOR_STYLE_BLOCK_CLASS=o.CURSOR_BLINK_CLASS=o.CURSOR_CLASS=o.STRIKETHROUGH_CLASS=o.UNDERLINE_CLASS=o.ITALIC_CLASS=o.DIM_CLASS=o.BOLD_CLASS=void 0;var h=s(8803),p=s(643),d=s(511),c=s(2585),y=s(8055),_=s(4725),g=s(4269),m=s(1752);o.BOLD_CLASS="xterm-bold",o.DIM_CLASS="xterm-dim",o.ITALIC_CLASS="xterm-italic",o.UNDERLINE_CLASS="xterm-underline",o.STRIKETHROUGH_CLASS="xterm-strikethrough",o.CURSOR_CLASS="xterm-cursor",o.CURSOR_BLINK_CLASS="xterm-cursor-blink",o.CURSOR_STYLE_BLOCK_CLASS="xterm-cursor-block",o.CURSOR_STYLE_BAR_CLASS="xterm-cursor-bar",o.CURSOR_STYLE_UNDERLINE_CLASS="xterm-cursor-underline";var f=function(){function Z(b,G,S,C,R,Y){this._document=b,this._colors=G,this._characterJoinerService=S,this._optionsService=C,this._coreService=R,this._decorationService=Y,this._workCell=new d.CellData,this._columnSelectMode=!1}return Z.prototype.setColors=function(b){this._colors=b},Z.prototype.onSelectionChanged=function(b,G,S){this._selectionStart=b,this._selectionEnd=G,this._columnSelectMode=S},Z.prototype.createRow=function(b,G,S,C,R,Y,I,w){for(var F,E,N=this._document.createDocumentFragment(),L=this._characterJoinerService.getJoinedCharacters(G),K=0,J=Math.min(b.length,w)-1;J>=0;J--)if(b.loadCell(J,this._workCell).getCode()!==p.NULL_CELL_CODE||S&&J===R){K=J+1;break}for(J=0;J<K;J++){b.loadCell(J,this._workCell);var P=this._workCell.getWidth();if(P!==0){var ee=!1,he=J,$=this._workCell;if(L.length>0&&J===L[0][0]){ee=!0;var de=L.shift();$=new g.JoinedCellData(this._workCell,b.translateToString(!0,de[0],de[1]),de[1]-de[0]),he=de[1]-1,P=$.getWidth()}var pe=this._document.createElement("span");if(P>1&&(pe.style.width=I*P+"px"),ee&&(pe.style.display="inline",R>=J&&R<=he&&(R=J)),!this._coreService.isCursorHidden&&S&&J===R)switch(pe.classList.add(o.CURSOR_CLASS),Y&&pe.classList.add(o.CURSOR_BLINK_CLASS),C){case"bar":pe.classList.add(o.CURSOR_STYLE_BAR_CLASS);break;case"underline":pe.classList.add(o.CURSOR_STYLE_UNDERLINE_CLASS);break;default:pe.classList.add(o.CURSOR_STYLE_BLOCK_CLASS)}$.isBold()&&pe.classList.add(o.BOLD_CLASS),$.isItalic()&&pe.classList.add(o.ITALIC_CLASS),$.isDim()&&pe.classList.add(o.DIM_CLASS),$.isUnderline()&&pe.classList.add(o.UNDERLINE_CLASS),$.isInvisible()?pe.textContent=p.WHITESPACE_CELL_CHAR:pe.textContent=$.getChars()||p.WHITESPACE_CELL_CHAR,$.isStrikethrough()&&pe.classList.add(o.STRIKETHROUGH_CLASS);var j=$.getFgColor(),ie=$.getFgColorMode(),H=$.getBgColor(),Q=$.getBgColorMode(),D=!!$.isInverse();if(D){var X=j;j=H,H=X;var ge=ie;ie=Q,Q=ge}var te=void 0,x=void 0,A=!1;try{for(var le=(F=void 0,a(this._decorationService.getDecorationsAtCell(J,G))),Ge=le.next();!Ge.done;Ge=le.next()){var be=Ge.value;be.options.layer!=="top"&&A||(be.backgroundColorRGB&&(Q=50331648,H=be.backgroundColorRGB.rgba>>8&16777215,te=be.backgroundColorRGB),be.foregroundColorRGB&&(ie=50331648,j=be.foregroundColorRGB.rgba>>8&16777215,x=be.foregroundColorRGB),A=be.options.layer==="top")}}catch(we){F={error:we}}finally{try{Ge&&!Ge.done&&(E=le.return)&&E.call(le)}finally{if(F)throw F.error}}var Ye=this._isCellInSelection(J,G);A||this._colors.selectionForeground&&Ye&&(ie=50331648,j=this._colors.selectionForeground.rgba>>8&16777215,x=this._colors.selectionForeground),Ye&&(te=this._colors.selectionOpaque,A=!0),A&&pe.classList.add("xterm-decoration-top");var ve=void 0;switch(Q){case 16777216:case 33554432:ve=this._colors.ansi[H],pe.classList.add("xterm-bg-"+H);break;case 50331648:ve=y.rgba.toColor(H>>16,H>>8&255,255&H),this._addStyle(pe,"background-color:#"+v((H>>>0).toString(16),"0",6));break;default:D?(ve=this._colors.foreground,pe.classList.add("xterm-bg-"+h.INVERTED_DEFAULT_COLOR)):ve=this._colors.background}switch(ie){case 16777216:case 33554432:$.isBold()&&j<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(j+=8),this._applyMinimumContrast(pe,ve,this._colors.ansi[j],$,te,void 0)||pe.classList.add("xterm-fg-"+j);break;case 50331648:var xe=y.rgba.toColor(j>>16&255,j>>8&255,255&j);this._applyMinimumContrast(pe,ve,xe,$,te,x)||this._addStyle(pe,"color:#"+v(j.toString(16),"0",6));break;default:this._applyMinimumContrast(pe,ve,this._colors.foreground,$,te,void 0)||D&&pe.classList.add("xterm-fg-"+h.INVERTED_DEFAULT_COLOR)}N.appendChild(pe),J=he}}return N},Z.prototype._applyMinimumContrast=function(b,G,S,C,R,Y){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,m.excludeFromContrastRatioDemands)(C.getCode()))return!1;var I=void 0;return R||Y||(I=this._colors.contrastCache.getColor(G.rgba,S.rgba)),I===void 0&&(I=y.color.ensureContrastRatio(R||G,Y||S,this._optionsService.rawOptions.minimumContrastRatio),this._colors.contrastCache.setColor((R||G).rgba,(Y||S).rgba,I??null)),!!I&&(this._addStyle(b,"color:"+I.css),!0)},Z.prototype._addStyle=function(b,G){b.setAttribute("style",""+(b.getAttribute("style")||"")+G+";")},Z.prototype._isCellInSelection=function(b,G){var S=this._selectionStart,C=this._selectionEnd;return!(!S||!C)&&(this._columnSelectMode?S[0]<=C[0]?b>=S[0]&&G>=S[1]&&b<C[0]&&G<=C[1]:b<S[0]&&G>=S[1]&&b>=C[0]&&G<=C[1]:G>S[1]&&G<C[1]||S[1]===C[1]&&G===S[1]&&b>=S[0]&&b<C[0]||S[1]<C[1]&&G===C[1]&&b<C[0]||S[1]<C[1]&&G===S[1]&&b>=S[0])},u([l(2,_.ICharacterJoinerService),l(3,c.IOptionsService),l(4,c.ICoreService),l(5,c.IDecorationService)],Z)}();function v(Z,b,G){for(;Z.length<G;)Z=b+Z;return Z}o.DomRendererRowFactory=f},456:(n,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.SelectionModel=void 0;var s=function(){function u(l){this._bufferService=l,this.isSelectAllActive=!1,this.selectionStartLength=0}return u.prototype.clearSelection=function(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0},Object.defineProperty(u.prototype,"finalSelectionStart",{get:function(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"finalSelectionEnd",{get:function(){return this.isSelectAllActive?[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1]:this.selectionStart?!this.selectionEnd||this.areSelectionValuesReversed()?(l=this.selectionStart[0]+this.selectionStartLength)>this._bufferService.cols?l%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(l/this._bufferService.cols)-1]:[l%this._bufferService.cols,this.selectionStart[1]+Math.floor(l/this._bufferService.cols)]:[l,this.selectionStart[1]]:this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]?(l=this.selectionStart[0]+this.selectionStartLength)>this._bufferService.cols?[l%this._bufferService.cols,this.selectionStart[1]+Math.floor(l/this._bufferService.cols)]:[Math.max(l,this.selectionEnd[0]),this.selectionEnd[1]]:this.selectionEnd:void 0;var l},enumerable:!1,configurable:!0}),u.prototype.areSelectionValuesReversed=function(){var l=this.selectionStart,a=this.selectionEnd;return!(!l||!a)&&(l[1]>a[1]||l[1]===a[1]&&l[0]>a[0])},u.prototype.onTrim=function(l){return this.selectionStart&&(this.selectionStart[1]-=l),this.selectionEnd&&(this.selectionEnd[1]-=l),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)},u}();o.SelectionModel=s},428:function(n,o,s){var u=this&&this.__decorate||function(c,y,_,g){var m,f=arguments.length,v=f<3?y:g===null?g=Object.getOwnPropertyDescriptor(y,_):g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(c,y,_,g);else for(var Z=c.length-1;Z>=0;Z--)(m=c[Z])&&(v=(f<3?m(v):f>3?m(y,_,v):m(y,_))||v);return f>3&&v&&Object.defineProperty(y,_,v),v},l=this&&this.__param||function(c,y){return function(_,g){y(_,g,c)}};Object.defineProperty(o,"__esModule",{value:!0}),o.CharSizeService=void 0;var a=s(2585),h=s(8460),p=function(){function c(y,_,g){this._optionsService=g,this.width=0,this.height=0,this._onCharSizeChange=new h.EventEmitter,this._measureStrategy=new d(y,_,this._optionsService)}return Object.defineProperty(c.prototype,"hasValidSize",{get:function(){return this.width>0&&this.height>0},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"onCharSizeChange",{get:function(){return this._onCharSizeChange.event},enumerable:!1,configurable:!0}),c.prototype.measure=function(){var y=this._measureStrategy.measure();y.width===this.width&&y.height===this.height||(this.width=y.width,this.height=y.height,this._onCharSizeChange.fire())},u([l(2,a.IOptionsService)],c)}();o.CharSizeService=p;var d=function(){function c(y,_,g){this._document=y,this._parentElement=_,this._optionsService=g,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W",this._measureElement.setAttribute("aria-hidden","true"),this._parentElement.appendChild(this._measureElement)}return c.prototype.measure=function(){this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=this._optionsService.rawOptions.fontSize+"px";var y=this._measureElement.getBoundingClientRect();return y.width!==0&&y.height!==0&&(this._result.width=y.width,this._result.height=Math.ceil(y.height)),this._result},c}()},4269:function(n,o,s){var u,l=this&&this.__extends||(u=function(m,f){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,Z){v.__proto__=Z}||function(v,Z){for(var b in Z)Object.prototype.hasOwnProperty.call(Z,b)&&(v[b]=Z[b])},u(m,f)},function(m,f){if(typeof f!="function"&&f!==null)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");function v(){this.constructor=m}u(m,f),m.prototype=f===null?Object.create(f):(v.prototype=f.prototype,new v)}),a=this&&this.__decorate||function(m,f,v,Z){var b,G=arguments.length,S=G<3?f:Z===null?Z=Object.getOwnPropertyDescriptor(f,v):Z;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(m,f,v,Z);else for(var C=m.length-1;C>=0;C--)(b=m[C])&&(S=(G<3?b(S):G>3?b(f,v,S):b(f,v))||S);return G>3&&S&&Object.defineProperty(f,v,S),S},h=this&&this.__param||function(m,f){return function(v,Z){f(v,Z,m)}};Object.defineProperty(o,"__esModule",{value:!0}),o.CharacterJoinerService=o.JoinedCellData=void 0;var p=s(3734),d=s(643),c=s(511),y=s(2585),_=function(m){function f(v,Z,b){var G=m.call(this)||this;return G.content=0,G.combinedData="",G.fg=v.fg,G.bg=v.bg,G.combinedData=Z,G._width=b,G}return l(f,m),f.prototype.isCombined=function(){return 2097152},f.prototype.getWidth=function(){return this._width},f.prototype.getChars=function(){return this.combinedData},f.prototype.getCode=function(){return 2097151},f.prototype.setFromCharData=function(v){throw new Error("not implemented")},f.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},f}(p.AttributeData);o.JoinedCellData=_;var g=function(){function m(f){this._bufferService=f,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new c.CellData}return m.prototype.register=function(f){var v={id:this._nextCharacterJoinerId++,handler:f};return this._characterJoiners.push(v),v.id},m.prototype.deregister=function(f){for(var v=0;v<this._characterJoiners.length;v++)if(this._characterJoiners[v].id===f)return this._characterJoiners.splice(v,1),!0;return!1},m.prototype.getJoinedCharacters=function(f){if(this._characterJoiners.length===0)return[];var v=this._bufferService.buffer.lines.get(f);if(!v||v.length===0)return[];for(var Z=[],b=v.translateToString(!0),G=0,S=0,C=0,R=v.getFg(0),Y=v.getBg(0),I=0;I<v.getTrimmedLength();I++)if(v.loadCell(I,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==R||this._workCell.bg!==Y){if(I-G>1)for(var w=this._getJoinedRanges(b,C,S,v,G),F=0;F<w.length;F++)Z.push(w[F]);G=I,C=S,R=this._workCell.fg,Y=this._workCell.bg}S+=this._workCell.getChars().length||d.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-G>1)for(w=this._getJoinedRanges(b,C,S,v,G),F=0;F<w.length;F++)Z.push(w[F]);return Z},m.prototype._getJoinedRanges=function(f,v,Z,b,G){var S=f.substring(v,Z),C=[];try{C=this._characterJoiners[0].handler(S)}catch(w){console.error(w)}for(var R=1;R<this._characterJoiners.length;R++)try{for(var Y=this._characterJoiners[R].handler(S),I=0;I<Y.length;I++)m._mergeRanges(C,Y[I])}catch(w){console.error(w)}return this._stringRangesToCellRanges(C,b,G),C},m.prototype._stringRangesToCellRanges=function(f,v,Z){var b=0,G=!1,S=0,C=f[b];if(C){for(var R=Z;R<this._bufferService.cols;R++){var Y=v.getWidth(R),I=v.getString(R).length||d.WHITESPACE_CELL_CHAR.length;if(Y!==0){if(!G&&C[0]<=S&&(C[0]=R,G=!0),C[1]<=S){if(C[1]=R,!(C=f[++b]))break;C[0]<=S?(C[0]=R,G=!0):G=!1}S+=I}}C&&(C[1]=this._bufferService.cols)}},m._mergeRanges=function(f,v){for(var Z=!1,b=0;b<f.length;b++){var G=f[b];if(Z){if(v[1]<=G[0])return f[b-1][1]=v[1],f;if(v[1]<=G[1])return f[b-1][1]=Math.max(v[1],G[1]),f.splice(b,1),f;f.splice(b,1),b--}else{if(v[1]<=G[0])return f.splice(b,0,v),f;if(v[1]<=G[1])return G[0]=Math.min(v[0],G[0]),f;v[0]<G[1]&&(G[0]=Math.min(v[0],G[0]),Z=!0)}}return Z?f[f.length-1][1]=v[1]:f.push(v),f},m=a([h(0,y.IBufferService)],m)}();o.CharacterJoinerService=g},5114:(n,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.CoreBrowserService=void 0;var s=function(){function u(l){this._textarea=l}return Object.defineProperty(u.prototype,"isFocused",{get:function(){return(this._textarea.getRootNode?this._textarea.getRootNode():document).activeElement===this._textarea&&document.hasFocus()},enumerable:!1,configurable:!0}),u}();o.CoreBrowserService=s},8934:function(n,o,s){var u=this&&this.__decorate||function(d,c,y,_){var g,m=arguments.length,f=m<3?c:_===null?_=Object.getOwnPropertyDescriptor(c,y):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(d,c,y,_);else for(var v=d.length-1;v>=0;v--)(g=d[v])&&(f=(m<3?g(f):m>3?g(c,y,f):g(c,y))||f);return m>3&&f&&Object.defineProperty(c,y,f),f},l=this&&this.__param||function(d,c){return function(y,_){c(y,_,d)}};Object.defineProperty(o,"__esModule",{value:!0}),o.MouseService=void 0;var a=s(4725),h=s(9806),p=function(){function d(c,y){this._renderService=c,this._charSizeService=y}return d.prototype.getCoords=function(c,y,_,g,m){return(0,h.getCoords)(window,c,y,_,g,this._charSizeService.hasValidSize,this._renderService.dimensions.actualCellWidth,this._renderService.dimensions.actualCellHeight,m)},d.prototype.getRawByteCoords=function(c,y,_,g){var m=this.getCoords(c,y,_,g);return(0,h.getRawByteCoords)(m)},u([l(0,a.IRenderService),l(1,a.ICharSizeService)],d)}();o.MouseService=p},3230:function(n,o,s){var u,l=this&&this.__extends||(u=function(v,Z){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,G){b.__proto__=G}||function(b,G){for(var S in G)Object.prototype.hasOwnProperty.call(G,S)&&(b[S]=G[S])},u(v,Z)},function(v,Z){if(typeof Z!="function"&&Z!==null)throw new TypeError("Class extends value "+String(Z)+" is not a constructor or null");function b(){this.constructor=v}u(v,Z),v.prototype=Z===null?Object.create(Z):(b.prototype=Z.prototype,new b)}),a=this&&this.__decorate||function(v,Z,b,G){var S,C=arguments.length,R=C<3?Z:G===null?G=Object.getOwnPropertyDescriptor(Z,b):G;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(v,Z,b,G);else for(var Y=v.length-1;Y>=0;Y--)(S=v[Y])&&(R=(C<3?S(R):C>3?S(Z,b,R):S(Z,b))||R);return C>3&&R&&Object.defineProperty(Z,b,R),R},h=this&&this.__param||function(v,Z){return function(b,G){Z(b,G,v)}};Object.defineProperty(o,"__esModule",{value:!0}),o.RenderService=void 0;var p=s(6193),d=s(8460),c=s(844),y=s(5596),_=s(3656),g=s(2585),m=s(4725),f=function(v){function Z(b,G,S,C,R,Y,I){var w=v.call(this)||this;if(w._renderer=b,w._rowCount=G,w._charSizeService=R,w._isPaused=!1,w._needsFullRefresh=!1,w._isNextRenderRedrawOnly=!0,w._needsSelectionRefresh=!1,w._canvasWidth=0,w._canvasHeight=0,w._selectionState={start:void 0,end:void 0,columnSelectMode:!1},w._onDimensionsChange=new d.EventEmitter,w._onRenderedViewportChange=new d.EventEmitter,w._onRender=new d.EventEmitter,w._onRefreshRequest=new d.EventEmitter,w.register({dispose:function(){return w._renderer.dispose()}}),w._renderDebouncer=new p.RenderDebouncer(function(E,N){return w._renderRows(E,N)}),w.register(w._renderDebouncer),w._screenDprMonitor=new y.ScreenDprMonitor,w._screenDprMonitor.setListener(function(){return w.onDevicePixelRatioChange()}),w.register(w._screenDprMonitor),w.register(I.onResize(function(){return w._fullRefresh()})),w.register(I.buffers.onBufferActivate(function(){var E;return(E=w._renderer)===null||E===void 0?void 0:E.clear()})),w.register(C.onOptionChange(function(){return w._handleOptionsChanged()})),w.register(w._charSizeService.onCharSizeChange(function(){return w.onCharSizeChanged()})),w.register(Y.onDecorationRegistered(function(){return w._fullRefresh()})),w.register(Y.onDecorationRemoved(function(){return w._fullRefresh()})),w._renderer.onRequestRedraw(function(E){return w.refreshRows(E.start,E.end,!0)}),w.register((0,_.addDisposableDomListener)(window,"resize",function(){return w.onDevicePixelRatioChange()})),"IntersectionObserver"in window){var F=new IntersectionObserver(function(E){return w._onIntersectionChange(E[E.length-1])},{threshold:0});F.observe(S),w.register({dispose:function(){return F.disconnect()}})}return w}return l(Z,v),Object.defineProperty(Z.prototype,"onDimensionsChange",{get:function(){return this._onDimensionsChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(Z.prototype,"onRenderedViewportChange",{get:function(){return this._onRenderedViewportChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(Z.prototype,"onRender",{get:function(){return this._onRender.event},enumerable:!1,configurable:!0}),Object.defineProperty(Z.prototype,"onRefreshRequest",{get:function(){return this._onRefreshRequest.event},enumerable:!1,configurable:!0}),Object.defineProperty(Z.prototype,"dimensions",{get:function(){return this._renderer.dimensions},enumerable:!1,configurable:!0}),Z.prototype._onIntersectionChange=function(b){this._isPaused=b.isIntersecting===void 0?b.intersectionRatio===0:!b.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)},Z.prototype.refreshRows=function(b,G,S){S===void 0&&(S=!1),this._isPaused?this._needsFullRefresh=!0:(S||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(b,G,this._rowCount))},Z.prototype._renderRows=function(b,G){this._renderer.renderRows(b,G),this._needsSelectionRefresh&&(this._renderer.onSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:b,end:G}),this._onRender.fire({start:b,end:G}),this._isNextRenderRedrawOnly=!0},Z.prototype.resize=function(b,G){this._rowCount=G,this._fireOnCanvasResize()},Z.prototype._handleOptionsChanged=function(){this._renderer.onOptionsChanged(),this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize()},Z.prototype._fireOnCanvasResize=function(){this._renderer.dimensions.canvasWidth===this._canvasWidth&&this._renderer.dimensions.canvasHeight===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.dimensions)},Z.prototype.dispose=function(){v.prototype.dispose.call(this)},Z.prototype.setRenderer=function(b){var G=this;this._renderer.dispose(),this._renderer=b,this._renderer.onRequestRedraw(function(S){return G.refreshRows(S.start,S.end,!0)}),this._needsSelectionRefresh=!0,this._fullRefresh()},Z.prototype.addRefreshCallback=function(b){return this._renderDebouncer.addRefreshCallback(b)},Z.prototype._fullRefresh=function(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)},Z.prototype.clearTextureAtlas=function(){var b,G;(G=(b=this._renderer)===null||b===void 0?void 0:b.clearTextureAtlas)===null||G===void 0||G.call(b),this._fullRefresh()},Z.prototype.setColors=function(b){this._renderer.setColors(b),this._fullRefresh()},Z.prototype.onDevicePixelRatioChange=function(){this._charSizeService.measure(),this._renderer.onDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1)},Z.prototype.onResize=function(b,G){this._renderer.onResize(b,G),this._fullRefresh()},Z.prototype.onCharSizeChanged=function(){this._renderer.onCharSizeChanged()},Z.prototype.onBlur=function(){this._renderer.onBlur()},Z.prototype.onFocus=function(){this._renderer.onFocus()},Z.prototype.onSelectionChanged=function(b,G,S){this._selectionState.start=b,this._selectionState.end=G,this._selectionState.columnSelectMode=S,this._renderer.onSelectionChanged(b,G,S)},Z.prototype.onCursorMove=function(){this._renderer.onCursorMove()},Z.prototype.clear=function(){this._renderer.clear()},a([h(3,g.IOptionsService),h(4,m.ICharSizeService),h(5,g.IDecorationService),h(6,g.IBufferService)],Z)}(c.Disposable);o.RenderService=f},9312:function(n,o,s){var u,l=this&&this.__extends||(u=function(C,R){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Y,I){Y.__proto__=I}||function(Y,I){for(var w in I)Object.prototype.hasOwnProperty.call(I,w)&&(Y[w]=I[w])},u(C,R)},function(C,R){if(typeof R!="function"&&R!==null)throw new TypeError("Class extends value "+String(R)+" is not a constructor or null");function Y(){this.constructor=C}u(C,R),C.prototype=R===null?Object.create(R):(Y.prototype=R.prototype,new Y)}),a=this&&this.__decorate||function(C,R,Y,I){var w,F=arguments.length,E=F<3?R:I===null?I=Object.getOwnPropertyDescriptor(R,Y):I;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(C,R,Y,I);else for(var N=C.length-1;N>=0;N--)(w=C[N])&&(E=(F<3?w(E):F>3?w(R,Y,E):w(R,Y))||E);return F>3&&E&&Object.defineProperty(R,Y,E),E},h=this&&this.__param||function(C,R){return function(Y,I){R(Y,I,C)}};Object.defineProperty(o,"__esModule",{value:!0}),o.SelectionService=void 0;var p=s(6114),d=s(456),c=s(511),y=s(8460),_=s(4725),g=s(2585),m=s(9806),f=s(9504),v=s(844),Z=s(4841),b=String.fromCharCode(160),G=new RegExp(b,"g"),S=function(C){function R(Y,I,w,F,E,N,L,K){var J=C.call(this)||this;return J._element=Y,J._screenElement=I,J._linkifier=w,J._bufferService=F,J._coreService=E,J._mouseService=N,J._optionsService=L,J._renderService=K,J._dragScrollAmount=0,J._enabled=!0,J._workCell=new c.CellData,J._mouseDownTimeStamp=0,J._oldHasSelection=!1,J._oldSelectionStart=void 0,J._oldSelectionEnd=void 0,J._onLinuxMouseSelection=J.register(new y.EventEmitter),J._onRedrawRequest=J.register(new y.EventEmitter),J._onSelectionChange=J.register(new y.EventEmitter),J._onRequestScrollLines=J.register(new y.EventEmitter),J._mouseMoveListener=function(P){return J._onMouseMove(P)},J._mouseUpListener=function(P){return J._onMouseUp(P)},J._coreService.onUserInput(function(){J.hasSelection&&J.clearSelection()}),J._trimListener=J._bufferService.buffer.lines.onTrim(function(P){return J._onTrim(P)}),J.register(J._bufferService.buffers.onBufferActivate(function(P){return J._onBufferActivate(P)})),J.enable(),J._model=new d.SelectionModel(J._bufferService),J._activeSelectionMode=0,J}return l(R,C),Object.defineProperty(R.prototype,"onLinuxMouseSelection",{get:function(){return this._onLinuxMouseSelection.event},enumerable:!1,configurable:!0}),Object.defineProperty(R.prototype,"onRequestRedraw",{get:function(){return this._onRedrawRequest.event},enumerable:!1,configurable:!0}),Object.defineProperty(R.prototype,"onSelectionChange",{get:function(){return this._onSelectionChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(R.prototype,"onRequestScrollLines",{get:function(){return this._onRequestScrollLines.event},enumerable:!1,configurable:!0}),R.prototype.dispose=function(){this._removeMouseDownListeners()},R.prototype.reset=function(){this.clearSelection()},R.prototype.disable=function(){this.clearSelection(),this._enabled=!1},R.prototype.enable=function(){this._enabled=!0},Object.defineProperty(R.prototype,"selectionStart",{get:function(){return this._model.finalSelectionStart},enumerable:!1,configurable:!0}),Object.defineProperty(R.prototype,"selectionEnd",{get:function(){return this._model.finalSelectionEnd},enumerable:!1,configurable:!0}),Object.defineProperty(R.prototype,"hasSelection",{get:function(){var Y=this._model.finalSelectionStart,I=this._model.finalSelectionEnd;return!(!Y||!I||Y[0]===I[0]&&Y[1]===I[1])},enumerable:!1,configurable:!0}),Object.defineProperty(R.prototype,"selectionText",{get:function(){var Y=this._model.finalSelectionStart,I=this._model.finalSelectionEnd;if(!Y||!I)return"";var w=this._bufferService.buffer,F=[];if(this._activeSelectionMode===3){if(Y[0]===I[0])return"";for(var E=Y[0]<I[0]?Y[0]:I[0],N=Y[0]<I[0]?I[0]:Y[0],L=Y[1];L<=I[1];L++){var K=w.translateBufferLineToString(L,!0,E,N);F.push(K)}}else{var J=Y[1]===I[1]?I[0]:void 0;for(F.push(w.translateBufferLineToString(Y[1],!0,Y[0],J)),L=Y[1]+1;L<=I[1]-1;L++){var P=w.lines.get(L);K=w.translateBufferLineToString(L,!0),P!=null&&P.isWrapped?F[F.length-1]+=K:F.push(K)}Y[1]!==I[1]&&(P=w.lines.get(I[1]),K=w.translateBufferLineToString(I[1],!0,0,I[0]),P&&P.isWrapped?F[F.length-1]+=K:F.push(K))}return F.map(function(ee){return ee.replace(G," ")}).join(p.isWindows?`\r
`:`
`)},enumerable:!1,configurable:!0}),R.prototype.clearSelection=function(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()},R.prototype.refresh=function(Y){var I=this;this._refreshAnimationFrame||(this._refreshAnimationFrame=window.requestAnimationFrame(function(){return I._refresh()})),p.isLinux&&Y&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)},R.prototype._refresh=function(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})},R.prototype._isClickInSelection=function(Y){var I=this._getMouseBufferCoords(Y),w=this._model.finalSelectionStart,F=this._model.finalSelectionEnd;return!!(w&&F&&I)&&this._areCoordsInSelection(I,w,F)},R.prototype.isCellInSelection=function(Y,I){var w=this._model.finalSelectionStart,F=this._model.finalSelectionEnd;return!(!w||!F)&&this._areCoordsInSelection([Y,I],w,F)},R.prototype._areCoordsInSelection=function(Y,I,w){return Y[1]>I[1]&&Y[1]<w[1]||I[1]===w[1]&&Y[1]===I[1]&&Y[0]>=I[0]&&Y[0]<w[0]||I[1]<w[1]&&Y[1]===w[1]&&Y[0]<w[0]||I[1]<w[1]&&Y[1]===I[1]&&Y[0]>=I[0]},R.prototype._selectWordAtCursor=function(Y,I){var w,F,E=(F=(w=this._linkifier.currentLink)===null||w===void 0?void 0:w.link)===null||F===void 0?void 0:F.range;if(E)return this._model.selectionStart=[E.start.x-1,E.start.y-1],this._model.selectionStartLength=(0,Z.getRangeLength)(E,this._bufferService.cols),this._model.selectionEnd=void 0,!0;var N=this._getMouseBufferCoords(Y);return!!N&&(this._selectWordAt(N,I),this._model.selectionEnd=void 0,!0)},R.prototype.selectAll=function(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()},R.prototype.selectLines=function(Y,I){this._model.clearSelection(),Y=Math.max(Y,0),I=Math.min(I,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,Y],this._model.selectionEnd=[this._bufferService.cols,I],this.refresh(),this._onSelectionChange.fire()},R.prototype._onTrim=function(Y){this._model.onTrim(Y)&&this.refresh()},R.prototype._getMouseBufferCoords=function(Y){var I=this._mouseService.getCoords(Y,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(I)return I[0]--,I[1]--,I[1]+=this._bufferService.buffer.ydisp,I},R.prototype._getMouseEventScrollAmount=function(Y){var I=(0,m.getCoordsRelativeToElement)(window,Y,this._screenElement)[1],w=this._renderService.dimensions.canvasHeight;return I>=0&&I<=w?0:(I>w&&(I-=w),I=Math.min(Math.max(I,-50),50),(I/=50)/Math.abs(I)+Math.round(14*I))},R.prototype.shouldForceSelection=function(Y){return p.isMac?Y.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:Y.shiftKey},R.prototype.onMouseDown=function(Y){if(this._mouseDownTimeStamp=Y.timeStamp,(Y.button!==2||!this.hasSelection)&&Y.button===0){if(!this._enabled){if(!this.shouldForceSelection(Y))return;Y.stopPropagation()}Y.preventDefault(),this._dragScrollAmount=0,this._enabled&&Y.shiftKey?this._onIncrementalClick(Y):Y.detail===1?this._onSingleClick(Y):Y.detail===2?this._onDoubleClick(Y):Y.detail===3&&this._onTripleClick(Y),this._addMouseDownListeners(),this.refresh(!0)}},R.prototype._addMouseDownListeners=function(){var Y=this;this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=window.setInterval(function(){return Y._dragScroll()},50)},R.prototype._removeMouseDownListeners=function(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0},R.prototype._onIncrementalClick=function(Y){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(Y))},R.prototype._onSingleClick=function(Y){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(Y)?3:0,this._model.selectionStart=this._getMouseBufferCoords(Y),this._model.selectionStart){this._model.selectionEnd=void 0;var I=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);I&&I.length!==this._model.selectionStart[0]&&I.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}},R.prototype._onDoubleClick=function(Y){this._selectWordAtCursor(Y,!0)&&(this._activeSelectionMode=1)},R.prototype._onTripleClick=function(Y){var I=this._getMouseBufferCoords(Y);I&&(this._activeSelectionMode=2,this._selectLineAt(I[1]))},R.prototype.shouldColumnSelect=function(Y){return Y.altKey&&!(p.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)},R.prototype._onMouseMove=function(Y){if(Y.stopImmediatePropagation(),this._model.selectionStart){var I=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(Y),this._model.selectionEnd){this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(Y),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));var w=this._bufferService.buffer;if(this._model.selectionEnd[1]<w.lines.length){var F=w.lines.get(this._model.selectionEnd[1]);F&&F.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]++}I&&I[0]===this._model.selectionEnd[0]&&I[1]===this._model.selectionEnd[1]||this.refresh(!0)}else this.refresh(!0)}},R.prototype._dragScroll=function(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});var Y=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(Y.ydisp+this._bufferService.rows,Y.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=Y.ydisp),this.refresh()}},R.prototype._onMouseUp=function(Y){var I=Y.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&I<500&&Y.altKey&&this._optionsService.getOption("altClickMovesCursor")){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){var w=this._mouseService.getCoords(Y,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(w&&w[0]!==void 0&&w[1]!==void 0){var F=(0,f.moveToCellSequence)(w[0]-1,w[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(F,!0)}}}else this._fireEventIfSelectionChanged()},R.prototype._fireEventIfSelectionChanged=function(){var Y=this._model.finalSelectionStart,I=this._model.finalSelectionEnd,w=!(!Y||!I||Y[0]===I[0]&&Y[1]===I[1]);w?Y&&I&&(this._oldSelectionStart&&this._oldSelectionEnd&&Y[0]===this._oldSelectionStart[0]&&Y[1]===this._oldSelectionStart[1]&&I[0]===this._oldSelectionEnd[0]&&I[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(Y,I,w)):this._oldHasSelection&&this._fireOnSelectionChange(Y,I,w)},R.prototype._fireOnSelectionChange=function(Y,I,w){this._oldSelectionStart=Y,this._oldSelectionEnd=I,this._oldHasSelection=w,this._onSelectionChange.fire()},R.prototype._onBufferActivate=function(Y){var I=this;this.clearSelection(),this._trimListener.dispose(),this._trimListener=Y.activeBuffer.lines.onTrim(function(w){return I._onTrim(w)})},R.prototype._convertViewportColToCharacterIndex=function(Y,I){for(var w=I[0],F=0;I[0]>=F;F++){var E=Y.loadCell(F,this._workCell).getChars().length;this._workCell.getWidth()===0?w--:E>1&&I[0]!==F&&(w+=E-1)}return w},R.prototype.setSelection=function(Y,I,w){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[Y,I],this._model.selectionStartLength=w,this.refresh(),this._fireEventIfSelectionChanged()},R.prototype.rightClickSelect=function(Y){this._isClickInSelection(Y)||(this._selectWordAtCursor(Y,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())},R.prototype._getWordAt=function(Y,I,w,F){if(w===void 0&&(w=!0),F===void 0&&(F=!0),!(Y[0]>=this._bufferService.cols)){var E=this._bufferService.buffer,N=E.lines.get(Y[1]);if(N){var L=E.translateBufferLineToString(Y[1],!1),K=this._convertViewportColToCharacterIndex(N,Y),J=K,P=Y[0]-K,ee=0,he=0,$=0,de=0;if(L.charAt(K)===" "){for(;K>0&&L.charAt(K-1)===" ";)K--;for(;J<L.length&&L.charAt(J+1)===" ";)J++}else{var pe=Y[0],j=Y[0];N.getWidth(pe)===0&&(ee++,pe--),N.getWidth(j)===2&&(he++,j++);var ie=N.getString(j).length;for(ie>1&&(de+=ie-1,J+=ie-1);pe>0&&K>0&&!this._isCharWordSeparator(N.loadCell(pe-1,this._workCell));){N.loadCell(pe-1,this._workCell);var H=this._workCell.getChars().length;this._workCell.getWidth()===0?(ee++,pe--):H>1&&($+=H-1,K-=H-1),K--,pe--}for(;j<N.length&&J+1<L.length&&!this._isCharWordSeparator(N.loadCell(j+1,this._workCell));){N.loadCell(j+1,this._workCell);var Q=this._workCell.getChars().length;this._workCell.getWidth()===2?(he++,j++):Q>1&&(de+=Q-1,J+=Q-1),J++,j++}}J++;var D=K+P-ee+$,X=Math.min(this._bufferService.cols,J-K+ee+he-$-de);if(I||L.slice(K,J).trim()!==""){if(w&&D===0&&N.getCodePoint(0)!==32){var ge=E.lines.get(Y[1]-1);if(ge&&N.isWrapped&&ge.getCodePoint(this._bufferService.cols-1)!==32){var te=this._getWordAt([this._bufferService.cols-1,Y[1]-1],!1,!0,!1);if(te){var x=this._bufferService.cols-te.start;D-=x,X+=x}}}if(F&&D+X===this._bufferService.cols&&N.getCodePoint(this._bufferService.cols-1)!==32){var A=E.lines.get(Y[1]+1);if(A!=null&&A.isWrapped&&A.getCodePoint(0)!==32){var le=this._getWordAt([0,Y[1]+1],!1,!1,!0);le&&(X+=le.length)}}return{start:D,length:X}}}}},R.prototype._selectWordAt=function(Y,I){var w=this._getWordAt(Y,I);if(w){for(;w.start<0;)w.start+=this._bufferService.cols,Y[1]--;this._model.selectionStart=[w.start,Y[1]],this._model.selectionStartLength=w.length}},R.prototype._selectToWordAt=function(Y){var I=this._getWordAt(Y,!0);if(I){for(var w=Y[1];I.start<0;)I.start+=this._bufferService.cols,w--;if(!this._model.areSelectionValuesReversed())for(;I.start+I.length>this._bufferService.cols;)I.length-=this._bufferService.cols,w++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?I.start:I.start+I.length,w]}},R.prototype._isCharWordSeparator=function(Y){return Y.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(Y.getChars())>=0},R.prototype._selectLineAt=function(Y){var I=this._bufferService.buffer.getWrappedRangeForLine(Y),w={start:{x:0,y:I.first},end:{x:this._bufferService.cols-1,y:I.last}};this._model.selectionStart=[0,I.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,Z.getRangeLength)(w,this._bufferService.cols)},a([h(3,g.IBufferService),h(4,g.ICoreService),h(5,_.IMouseService),h(6,g.IOptionsService),h(7,_.IRenderService)],R)}(v.Disposable);o.SelectionService=S},4725:(n,o,s)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.ICharacterJoinerService=o.ISoundService=o.ISelectionService=o.IRenderService=o.IMouseService=o.ICoreBrowserService=o.ICharSizeService=void 0;var u=s(8343);o.ICharSizeService=(0,u.createDecorator)("CharSizeService"),o.ICoreBrowserService=(0,u.createDecorator)("CoreBrowserService"),o.IMouseService=(0,u.createDecorator)("MouseService"),o.IRenderService=(0,u.createDecorator)("RenderService"),o.ISelectionService=(0,u.createDecorator)("SelectionService"),o.ISoundService=(0,u.createDecorator)("SoundService"),o.ICharacterJoinerService=(0,u.createDecorator)("CharacterJoinerService")},357:function(n,o,s){var u=this&&this.__decorate||function(p,d,c,y){var _,g=arguments.length,m=g<3?d:y===null?y=Object.getOwnPropertyDescriptor(d,c):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(p,d,c,y);else for(var f=p.length-1;f>=0;f--)(_=p[f])&&(m=(g<3?_(m):g>3?_(d,c,m):_(d,c))||m);return g>3&&m&&Object.defineProperty(d,c,m),m},l=this&&this.__param||function(p,d){return function(c,y){d(c,y,p)}};Object.defineProperty(o,"__esModule",{value:!0}),o.SoundService=void 0;var a=s(2585),h=function(){function p(d){this._optionsService=d}return Object.defineProperty(p,"audioContext",{get:function(){if(!p._audioContext){var d=window.AudioContext||window.webkitAudioContext;if(!d)return console.warn("Web Audio API is not supported by this browser. Consider upgrading to the latest version"),null;p._audioContext=new d}return p._audioContext},enumerable:!1,configurable:!0}),p.prototype.playBellSound=function(){var d=p.audioContext;if(d){var c=d.createBufferSource();d.decodeAudioData(this._base64ToArrayBuffer(this._removeMimeType(this._optionsService.rawOptions.bellSound)),function(y){c.buffer=y,c.connect(d.destination),c.start(0)})}},p.prototype._base64ToArrayBuffer=function(d){for(var c=window.atob(d),y=c.length,_=new Uint8Array(y),g=0;g<y;g++)_[g]=c.charCodeAt(g);return _.buffer},p.prototype._removeMimeType=function(d){return d.split(",")[1]},p=u([l(0,a.IOptionsService)],p)}();o.SoundService=h},6349:(n,o,s)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.CircularList=void 0;var u=s(8460),l=function(){function a(h){this._maxLength=h,this.onDeleteEmitter=new u.EventEmitter,this.onInsertEmitter=new u.EventEmitter,this.onTrimEmitter=new u.EventEmitter,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}return Object.defineProperty(a.prototype,"onDelete",{get:function(){return this.onDeleteEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"onInsert",{get:function(){return this.onInsertEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"onTrim",{get:function(){return this.onTrimEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"maxLength",{get:function(){return this._maxLength},set:function(h){if(this._maxLength!==h){for(var p=new Array(h),d=0;d<Math.min(h,this.length);d++)p[d]=this._array[this._getCyclicIndex(d)];this._array=p,this._maxLength=h,this._startIndex=0}},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"length",{get:function(){return this._length},set:function(h){if(h>this._length)for(var p=this._length;p<h;p++)this._array[p]=void 0;this._length=h},enumerable:!1,configurable:!0}),a.prototype.get=function(h){return this._array[this._getCyclicIndex(h)]},a.prototype.set=function(h,p){this._array[this._getCyclicIndex(h)]=p},a.prototype.push=function(h){this._array[this._getCyclicIndex(this._length)]=h,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++},a.prototype.recycle=function(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]},Object.defineProperty(a.prototype,"isFull",{get:function(){return this._length===this._maxLength},enumerable:!1,configurable:!0}),a.prototype.pop=function(){return this._array[this._getCyclicIndex(this._length---1)]},a.prototype.splice=function(h,p){for(var d=[],c=2;c<arguments.length;c++)d[c-2]=arguments[c];if(p){for(var y=h;y<this._length-p;y++)this._array[this._getCyclicIndex(y)]=this._array[this._getCyclicIndex(y+p)];this._length-=p,this.onDeleteEmitter.fire({index:h,amount:p})}for(y=this._length-1;y>=h;y--)this._array[this._getCyclicIndex(y+d.length)]=this._array[this._getCyclicIndex(y)];for(y=0;y<d.length;y++)this._array[this._getCyclicIndex(h+y)]=d[y];if(d.length&&this.onInsertEmitter.fire({index:h,amount:d.length}),this._length+d.length>this._maxLength){var _=this._length+d.length-this._maxLength;this._startIndex+=_,this._length=this._maxLength,this.onTrimEmitter.fire(_)}else this._length+=d.length},a.prototype.trimStart=function(h){h>this._length&&(h=this._length),this._startIndex+=h,this._length-=h,this.onTrimEmitter.fire(h)},a.prototype.shiftElements=function(h,p,d){if(!(p<=0)){if(h<0||h>=this._length)throw new Error("start argument out of range");if(h+d<0)throw new Error("Cannot shift elements in list beyond index 0");if(d>0){for(var c=p-1;c>=0;c--)this.set(h+c+d,this.get(h+c));var y=h+p+d-this._length;if(y>0)for(this._length+=y;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(c=0;c<p;c++)this.set(h+c+d,this.get(h+c))}},a.prototype._getCyclicIndex=function(h){return(this._startIndex+h)%this._maxLength},a}();o.CircularList=l},1439:(n,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.clone=void 0,o.clone=function s(u,l){if(l===void 0&&(l=5),typeof u!="object")return u;var a=Array.isArray(u)?[]:{};for(var h in u)a[h]=l<=1?u[h]:u[h]&&s(u[h],l-1);return a}},8055:function(n,o){var s,u,l,a,h=this&&this.__read||function(c,y){var _=typeof Symbol=="function"&&c[Symbol.iterator];if(!_)return c;var g,m,f=_.call(c),v=[];try{for(;(y===void 0||y-- >0)&&!(g=f.next()).done;)v.push(g.value)}catch(Z){m={error:Z}}finally{try{g&&!g.done&&(_=f.return)&&_.call(f)}finally{if(m)throw m.error}}return v};function p(c){var y=c.toString(16);return y.length<2?"0"+y:y}function d(c,y){return c<y?(y+.05)/(c+.05):(c+.05)/(y+.05)}Object.defineProperty(o,"__esModule",{value:!0}),o.contrastRatio=o.toPaddedHex=o.rgba=o.rgb=o.css=o.color=o.channels=void 0,function(c){c.toCss=function(y,_,g,m){return m!==void 0?"#"+p(y)+p(_)+p(g)+p(m):"#"+p(y)+p(_)+p(g)},c.toRgba=function(y,_,g,m){return m===void 0&&(m=255),(y<<24|_<<16|g<<8|m)>>>0}}(s=o.channels||(o.channels={})),(u=o.color||(o.color={})).blend=function(c,y){var _=(255&y.rgba)/255;if(_===1)return{css:y.css,rgba:y.rgba};var g=y.rgba>>24&255,m=y.rgba>>16&255,f=y.rgba>>8&255,v=c.rgba>>24&255,Z=c.rgba>>16&255,b=c.rgba>>8&255,G=v+Math.round((g-v)*_),S=Z+Math.round((m-Z)*_),C=b+Math.round((f-b)*_);return{css:s.toCss(G,S,C),rgba:s.toRgba(G,S,C)}},u.isOpaque=function(c){return(255&c.rgba)==255},u.ensureContrastRatio=function(c,y,_){var g=a.ensureContrastRatio(c.rgba,y.rgba,_);if(g)return a.toColor(g>>24&255,g>>16&255,g>>8&255)},u.opaque=function(c){var y=(255|c.rgba)>>>0,_=h(a.toChannels(y),3),g=_[0],m=_[1],f=_[2];return{css:s.toCss(g,m,f),rgba:y}},u.opacity=function(c,y){var _=Math.round(255*y),g=h(a.toChannels(c.rgba),3),m=g[0],f=g[1],v=g[2];return{css:s.toCss(m,f,v,_),rgba:s.toRgba(m,f,v,_)}},u.toColorRGB=function(c){return[c.rgba>>24&255,c.rgba>>16&255,c.rgba>>8&255]},(o.css||(o.css={})).toColor=function(c){if(c.match(/#[0-9a-f]{3,8}/i))switch(c.length){case 4:var y=parseInt(c.slice(1,2).repeat(2),16),_=parseInt(c.slice(2,3).repeat(2),16),g=parseInt(c.slice(3,4).repeat(2),16);return a.toColor(y,_,g);case 5:y=parseInt(c.slice(1,2).repeat(2),16),_=parseInt(c.slice(2,3).repeat(2),16),g=parseInt(c.slice(3,4).repeat(2),16);var m=parseInt(c.slice(4,5).repeat(2),16);return a.toColor(y,_,g,m);case 7:return{css:c,rgba:(parseInt(c.slice(1),16)<<8|255)>>>0};case 9:return{css:c,rgba:parseInt(c.slice(1),16)>>>0}}var f=c.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(f)return y=parseInt(f[1]),_=parseInt(f[2]),g=parseInt(f[3]),m=Math.round(255*(f[5]===void 0?1:parseFloat(f[5]))),a.toColor(y,_,g,m);throw new Error("css.toColor: Unsupported css format")},function(c){function y(_,g,m){var f=_/255,v=g/255,Z=m/255;return .2126*(f<=.03928?f/12.92:Math.pow((f+.055)/1.055,2.4))+.7152*(v<=.03928?v/12.92:Math.pow((v+.055)/1.055,2.4))+.0722*(Z<=.03928?Z/12.92:Math.pow((Z+.055)/1.055,2.4))}c.relativeLuminance=function(_){return y(_>>16&255,_>>8&255,255&_)},c.relativeLuminance2=y}(l=o.rgb||(o.rgb={})),function(c){function y(g,m,f){for(var v=g>>24&255,Z=g>>16&255,b=g>>8&255,G=m>>24&255,S=m>>16&255,C=m>>8&255,R=d(l.relativeLuminance2(G,S,C),l.relativeLuminance2(v,Z,b));R<f&&(G>0||S>0||C>0);)G-=Math.max(0,Math.ceil(.1*G)),S-=Math.max(0,Math.ceil(.1*S)),C-=Math.max(0,Math.ceil(.1*C)),R=d(l.relativeLuminance2(G,S,C),l.relativeLuminance2(v,Z,b));return(G<<24|S<<16|C<<8|255)>>>0}function _(g,m,f){for(var v=g>>24&255,Z=g>>16&255,b=g>>8&255,G=m>>24&255,S=m>>16&255,C=m>>8&255,R=d(l.relativeLuminance2(G,S,C),l.relativeLuminance2(v,Z,b));R<f&&(G<255||S<255||C<255);)G=Math.min(255,G+Math.ceil(.1*(255-G))),S=Math.min(255,S+Math.ceil(.1*(255-S))),C=Math.min(255,C+Math.ceil(.1*(255-C))),R=d(l.relativeLuminance2(G,S,C),l.relativeLuminance2(v,Z,b));return(G<<24|S<<16|C<<8|255)>>>0}c.ensureContrastRatio=function(g,m,f){var v=l.relativeLuminance(g>>8),Z=l.relativeLuminance(m>>8);if(d(v,Z)<f){if(Z<v){var b=y(g,m,f),G=d(v,l.relativeLuminance(b>>8));if(G<f){var S=_(g,g,f);return G>d(v,l.relativeLuminance(S>>8))?b:S}return b}var C=_(g,m,f),R=d(v,l.relativeLuminance(C>>8));return R<f?(S=y(g,g,f),R>d(v,l.relativeLuminance(S>>8))?C:S):C}},c.reduceLuminance=y,c.increaseLuminance=_,c.toChannels=function(g){return[g>>24&255,g>>16&255,g>>8&255,255&g]},c.toColor=function(g,m,f,v){return{css:s.toCss(g,m,f,v),rgba:s.toRgba(g,m,f,v)}}}(a=o.rgba||(o.rgba={})),o.toPaddedHex=p,o.contrastRatio=d},8969:function(n,o,s){var u,l=this&&this.__extends||(u=function(I,w){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(F,E){F.__proto__=E}||function(F,E){for(var N in E)Object.prototype.hasOwnProperty.call(E,N)&&(F[N]=E[N])},u(I,w)},function(I,w){if(typeof w!="function"&&w!==null)throw new TypeError("Class extends value "+String(w)+" is not a constructor or null");function F(){this.constructor=I}u(I,w),I.prototype=w===null?Object.create(w):(F.prototype=w.prototype,new F)}),a=this&&this.__values||function(I){var w=typeof Symbol=="function"&&Symbol.iterator,F=w&&I[w],E=0;if(F)return F.call(I);if(I&&typeof I.length=="number")return{next:function(){return I&&E>=I.length&&(I=void 0),{value:I&&I[E++],done:!I}}};throw new TypeError(w?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(o,"__esModule",{value:!0}),o.CoreTerminal=void 0;var h=s(844),p=s(2585),d=s(4348),c=s(7866),y=s(744),_=s(7302),g=s(6975),m=s(8460),f=s(1753),v=s(3730),Z=s(1480),b=s(7994),G=s(9282),S=s(5435),C=s(5981),R=!1,Y=function(I){function w(F){var E=I.call(this)||this;return E._onBinary=new m.EventEmitter,E._onData=new m.EventEmitter,E._onLineFeed=new m.EventEmitter,E._onResize=new m.EventEmitter,E._onScroll=new m.EventEmitter,E._onWriteParsed=new m.EventEmitter,E._instantiationService=new d.InstantiationService,E.optionsService=new _.OptionsService(F),E._instantiationService.setService(p.IOptionsService,E.optionsService),E._bufferService=E.register(E._instantiationService.createInstance(y.BufferService)),E._instantiationService.setService(p.IBufferService,E._bufferService),E._logService=E._instantiationService.createInstance(c.LogService),E._instantiationService.setService(p.ILogService,E._logService),E.coreService=E.register(E._instantiationService.createInstance(g.CoreService,function(){return E.scrollToBottom()})),E._instantiationService.setService(p.ICoreService,E.coreService),E.coreMouseService=E._instantiationService.createInstance(f.CoreMouseService),E._instantiationService.setService(p.ICoreMouseService,E.coreMouseService),E._dirtyRowService=E._instantiationService.createInstance(v.DirtyRowService),E._instantiationService.setService(p.IDirtyRowService,E._dirtyRowService),E.unicodeService=E._instantiationService.createInstance(Z.UnicodeService),E._instantiationService.setService(p.IUnicodeService,E.unicodeService),E._charsetService=E._instantiationService.createInstance(b.CharsetService),E._instantiationService.setService(p.ICharsetService,E._charsetService),E._inputHandler=new S.InputHandler(E._bufferService,E._charsetService,E.coreService,E._dirtyRowService,E._logService,E.optionsService,E.coreMouseService,E.unicodeService),E.register((0,m.forwardEvent)(E._inputHandler.onLineFeed,E._onLineFeed)),E.register(E._inputHandler),E.register((0,m.forwardEvent)(E._bufferService.onResize,E._onResize)),E.register((0,m.forwardEvent)(E.coreService.onData,E._onData)),E.register((0,m.forwardEvent)(E.coreService.onBinary,E._onBinary)),E.register(E.optionsService.onOptionChange(function(N){return E._updateOptions(N)})),E.register(E._bufferService.onScroll(function(N){E._onScroll.fire({position:E._bufferService.buffer.ydisp,source:0}),E._dirtyRowService.markRangeDirty(E._bufferService.buffer.scrollTop,E._bufferService.buffer.scrollBottom)})),E.register(E._inputHandler.onScroll(function(N){E._onScroll.fire({position:E._bufferService.buffer.ydisp,source:0}),E._dirtyRowService.markRangeDirty(E._bufferService.buffer.scrollTop,E._bufferService.buffer.scrollBottom)})),E._writeBuffer=new C.WriteBuffer(function(N,L){return E._inputHandler.parse(N,L)}),E.register((0,m.forwardEvent)(E._writeBuffer.onWriteParsed,E._onWriteParsed)),E}return l(w,I),Object.defineProperty(w.prototype,"onBinary",{get:function(){return this._onBinary.event},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"onData",{get:function(){return this._onData.event},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"onLineFeed",{get:function(){return this._onLineFeed.event},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"onResize",{get:function(){return this._onResize.event},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"onWriteParsed",{get:function(){return this._onWriteParsed.event},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"onScroll",{get:function(){var F=this;return this._onScrollApi||(this._onScrollApi=new m.EventEmitter,this.register(this._onScroll.event(function(E){var N;(N=F._onScrollApi)===null||N===void 0||N.fire(E.position)}))),this._onScrollApi.event},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"cols",{get:function(){return this._bufferService.cols},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"rows",{get:function(){return this._bufferService.rows},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"buffers",{get:function(){return this._bufferService.buffers},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"options",{get:function(){return this.optionsService.options},set:function(F){for(var E in F)this.optionsService.options[E]=F[E]},enumerable:!1,configurable:!0}),w.prototype.dispose=function(){var F;this._isDisposed||(I.prototype.dispose.call(this),(F=this._windowsMode)===null||F===void 0||F.dispose(),this._windowsMode=void 0)},w.prototype.write=function(F,E){this._writeBuffer.write(F,E)},w.prototype.writeSync=function(F,E){this._logService.logLevel<=p.LogLevelEnum.WARN&&!R&&(this._logService.warn("writeSync is unreliable and will be removed soon."),R=!0),this._writeBuffer.writeSync(F,E)},w.prototype.resize=function(F,E){isNaN(F)||isNaN(E)||(F=Math.max(F,y.MINIMUM_COLS),E=Math.max(E,y.MINIMUM_ROWS),this._bufferService.resize(F,E))},w.prototype.scroll=function(F,E){E===void 0&&(E=!1),this._bufferService.scroll(F,E)},w.prototype.scrollLines=function(F,E,N){this._bufferService.scrollLines(F,E,N)},w.prototype.scrollPages=function(F){this._bufferService.scrollPages(F)},w.prototype.scrollToTop=function(){this._bufferService.scrollToTop()},w.prototype.scrollToBottom=function(){this._bufferService.scrollToBottom()},w.prototype.scrollToLine=function(F){this._bufferService.scrollToLine(F)},w.prototype.registerEscHandler=function(F,E){return this._inputHandler.registerEscHandler(F,E)},w.prototype.registerDcsHandler=function(F,E){return this._inputHandler.registerDcsHandler(F,E)},w.prototype.registerCsiHandler=function(F,E){return this._inputHandler.registerCsiHandler(F,E)},w.prototype.registerOscHandler=function(F,E){return this._inputHandler.registerOscHandler(F,E)},w.prototype._setup=function(){this.optionsService.rawOptions.windowsMode&&this._enableWindowsMode()},w.prototype.reset=function(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()},w.prototype._updateOptions=function(F){var E;switch(F){case"scrollback":this.buffers.resize(this.cols,this.rows);break;case"windowsMode":this.optionsService.rawOptions.windowsMode?this._enableWindowsMode():((E=this._windowsMode)===null||E===void 0||E.dispose(),this._windowsMode=void 0)}},w.prototype._enableWindowsMode=function(){var F=this;if(!this._windowsMode){var E=[];E.push(this.onLineFeed(G.updateWindowsModeWrappedState.bind(null,this._bufferService))),E.push(this.registerCsiHandler({final:"H"},function(){return(0,G.updateWindowsModeWrappedState)(F._bufferService),!1})),this._windowsMode={dispose:function(){var N,L;try{for(var K=a(E),J=K.next();!J.done;J=K.next())J.value.dispose()}catch(P){N={error:P}}finally{try{J&&!J.done&&(L=K.return)&&L.call(K)}finally{if(N)throw N.error}}}}}},w}(h.Disposable);o.CoreTerminal=Y},8460:(n,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.forwardEvent=o.EventEmitter=void 0;var s=function(){function u(){this._listeners=[],this._disposed=!1}return Object.defineProperty(u.prototype,"event",{get:function(){var l=this;return this._event||(this._event=function(a){return l._listeners.push(a),{dispose:function(){if(!l._disposed){for(var h=0;h<l._listeners.length;h++)if(l._listeners[h]===a)return void l._listeners.splice(h,1)}}}}),this._event},enumerable:!1,configurable:!0}),u.prototype.fire=function(l,a){for(var h=[],p=0;p<this._listeners.length;p++)h.push(this._listeners[p]);for(p=0;p<h.length;p++)h[p].call(void 0,l,a)},u.prototype.dispose=function(){this._listeners&&(this._listeners.length=0),this._disposed=!0},u}();o.EventEmitter=s,o.forwardEvent=function(u,l){return u(function(a){return l.fire(a)})}},5435:function(n,o,s){var u,l=this&&this.__extends||(u=function(E,N){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,K){L.__proto__=K}||function(L,K){for(var J in K)Object.prototype.hasOwnProperty.call(K,J)&&(L[J]=K[J])},u(E,N)},function(E,N){if(typeof N!="function"&&N!==null)throw new TypeError("Class extends value "+String(N)+" is not a constructor or null");function L(){this.constructor=E}u(E,N),E.prototype=N===null?Object.create(N):(L.prototype=N.prototype,new L)});Object.defineProperty(o,"__esModule",{value:!0}),o.InputHandler=o.WindowsOptionsReportType=void 0;var a,h=s(2584),p=s(7116),d=s(2015),c=s(844),y=s(8273),_=s(482),g=s(8437),m=s(8460),f=s(643),v=s(511),Z=s(3734),b=s(2585),G=s(6242),S=s(6351),C=s(5941),R={"(":0,")":1,"*":2,"+":3,"-":1,".":2},Y=131072;function I(E,N){if(E>24)return N.setWinLines||!1;switch(E){case 1:return!!N.restoreWin;case 2:return!!N.minimizeWin;case 3:return!!N.setWinPosition;case 4:return!!N.setWinSizePixels;case 5:return!!N.raiseWin;case 6:return!!N.lowerWin;case 7:return!!N.refreshWin;case 8:return!!N.setWinSizeChars;case 9:return!!N.maximizeWin;case 10:return!!N.fullscreenWin;case 11:return!!N.getWinState;case 13:return!!N.getWinPosition;case 14:return!!N.getWinSizePixels;case 15:return!!N.getScreenSizePixels;case 16:return!!N.getCellSizePixels;case 18:return!!N.getWinSizeChars;case 19:return!!N.getScreenSizeChars;case 20:return!!N.getIconTitle;case 21:return!!N.getWinTitle;case 22:return!!N.pushTitle;case 23:return!!N.popTitle;case 24:return!!N.setWinLines}return!1}(function(E){E[E.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",E[E.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(a=o.WindowsOptionsReportType||(o.WindowsOptionsReportType={}));var w=function(){function E(N,L,K,J){this._bufferService=N,this._coreService=L,this._logService=K,this._optionsService=J,this._data=new Uint32Array(0)}return E.prototype.hook=function(N){this._data=new Uint32Array(0)},E.prototype.put=function(N,L,K){this._data=(0,y.concat)(this._data,N.subarray(L,K))},E.prototype.unhook=function(N){if(!N)return this._data=new Uint32Array(0),!0;var L=(0,_.utf32ToString)(this._data);switch(this._data=new Uint32Array(0),L){case'"q':this._coreService.triggerDataEvent(h.C0.ESC+'P1$r0"q'+h.C0.ESC+"\\");break;case'"p':this._coreService.triggerDataEvent(h.C0.ESC+'P1$r61;1"p'+h.C0.ESC+"\\");break;case"r":var K=this._bufferService.buffer.scrollTop+1+";"+(this._bufferService.buffer.scrollBottom+1)+"r";this._coreService.triggerDataEvent(h.C0.ESC+"P1$r"+K+h.C0.ESC+"\\");break;case"m":this._coreService.triggerDataEvent(h.C0.ESC+"P1$r0m"+h.C0.ESC+"\\");break;case" q":var J={block:2,underline:4,bar:6}[this._optionsService.rawOptions.cursorStyle];J-=this._optionsService.rawOptions.cursorBlink?1:0,this._coreService.triggerDataEvent(h.C0.ESC+"P1$r"+J+" q"+h.C0.ESC+"\\");break;default:this._logService.debug("Unknown DCS $q %s",L),this._coreService.triggerDataEvent(h.C0.ESC+"P0$r"+h.C0.ESC+"\\")}return!0},E}(),F=function(E){function N(L,K,J,P,ee,he,$,de,pe){pe===void 0&&(pe=new d.EscapeSequenceParser);var j=E.call(this)||this;j._bufferService=L,j._charsetService=K,j._coreService=J,j._dirtyRowService=P,j._logService=ee,j._optionsService=he,j._coreMouseService=$,j._unicodeService=de,j._parser=pe,j._parseBuffer=new Uint32Array(4096),j._stringDecoder=new _.StringToUtf32,j._utf8Decoder=new _.Utf8ToUtf32,j._workCell=new v.CellData,j._windowTitle="",j._iconName="",j._windowTitleStack=[],j._iconNameStack=[],j._curAttrData=g.DEFAULT_ATTR_DATA.clone(),j._eraseAttrDataInternal=g.DEFAULT_ATTR_DATA.clone(),j._onRequestBell=new m.EventEmitter,j._onRequestRefreshRows=new m.EventEmitter,j._onRequestReset=new m.EventEmitter,j._onRequestSendFocus=new m.EventEmitter,j._onRequestSyncScrollBar=new m.EventEmitter,j._onRequestWindowsOptionsReport=new m.EventEmitter,j._onA11yChar=new m.EventEmitter,j._onA11yTab=new m.EventEmitter,j._onCursorMove=new m.EventEmitter,j._onLineFeed=new m.EventEmitter,j._onScroll=new m.EventEmitter,j._onTitleChange=new m.EventEmitter,j._onColor=new m.EventEmitter,j._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},j._specialColors=[256,257,258],j.register(j._parser),j._activeBuffer=j._bufferService.buffer,j.register(j._bufferService.buffers.onBufferActivate(function(D){return j._activeBuffer=D.activeBuffer})),j._parser.setCsiHandlerFallback(function(D,X){j._logService.debug("Unknown CSI code: ",{identifier:j._parser.identToString(D),params:X.toArray()})}),j._parser.setEscHandlerFallback(function(D){j._logService.debug("Unknown ESC code: ",{identifier:j._parser.identToString(D)})}),j._parser.setExecuteHandlerFallback(function(D){j._logService.debug("Unknown EXECUTE code: ",{code:D})}),j._parser.setOscHandlerFallback(function(D,X,ge){j._logService.debug("Unknown OSC code: ",{identifier:D,action:X,data:ge})}),j._parser.setDcsHandlerFallback(function(D,X,ge){X==="HOOK"&&(ge=ge.toArray()),j._logService.debug("Unknown DCS code: ",{identifier:j._parser.identToString(D),action:X,payload:ge})}),j._parser.setPrintHandler(function(D,X,ge){return j.print(D,X,ge)}),j._parser.registerCsiHandler({final:"@"},function(D){return j.insertChars(D)}),j._parser.registerCsiHandler({intermediates:" ",final:"@"},function(D){return j.scrollLeft(D)}),j._parser.registerCsiHandler({final:"A"},function(D){return j.cursorUp(D)}),j._parser.registerCsiHandler({intermediates:" ",final:"A"},function(D){return j.scrollRight(D)}),j._parser.registerCsiHandler({final:"B"},function(D){return j.cursorDown(D)}),j._parser.registerCsiHandler({final:"C"},function(D){return j.cursorForward(D)}),j._parser.registerCsiHandler({final:"D"},function(D){return j.cursorBackward(D)}),j._parser.registerCsiHandler({final:"E"},function(D){return j.cursorNextLine(D)}),j._parser.registerCsiHandler({final:"F"},function(D){return j.cursorPrecedingLine(D)}),j._parser.registerCsiHandler({final:"G"},function(D){return j.cursorCharAbsolute(D)}),j._parser.registerCsiHandler({final:"H"},function(D){return j.cursorPosition(D)}),j._parser.registerCsiHandler({final:"I"},function(D){return j.cursorForwardTab(D)}),j._parser.registerCsiHandler({final:"J"},function(D){return j.eraseInDisplay(D)}),j._parser.registerCsiHandler({prefix:"?",final:"J"},function(D){return j.eraseInDisplay(D)}),j._parser.registerCsiHandler({final:"K"},function(D){return j.eraseInLine(D)}),j._parser.registerCsiHandler({prefix:"?",final:"K"},function(D){return j.eraseInLine(D)}),j._parser.registerCsiHandler({final:"L"},function(D){return j.insertLines(D)}),j._parser.registerCsiHandler({final:"M"},function(D){return j.deleteLines(D)}),j._parser.registerCsiHandler({final:"P"},function(D){return j.deleteChars(D)}),j._parser.registerCsiHandler({final:"S"},function(D){return j.scrollUp(D)}),j._parser.registerCsiHandler({final:"T"},function(D){return j.scrollDown(D)}),j._parser.registerCsiHandler({final:"X"},function(D){return j.eraseChars(D)}),j._parser.registerCsiHandler({final:"Z"},function(D){return j.cursorBackwardTab(D)}),j._parser.registerCsiHandler({final:"`"},function(D){return j.charPosAbsolute(D)}),j._parser.registerCsiHandler({final:"a"},function(D){return j.hPositionRelative(D)}),j._parser.registerCsiHandler({final:"b"},function(D){return j.repeatPrecedingCharacter(D)}),j._parser.registerCsiHandler({final:"c"},function(D){return j.sendDeviceAttributesPrimary(D)}),j._parser.registerCsiHandler({prefix:">",final:"c"},function(D){return j.sendDeviceAttributesSecondary(D)}),j._parser.registerCsiHandler({final:"d"},function(D){return j.linePosAbsolute(D)}),j._parser.registerCsiHandler({final:"e"},function(D){return j.vPositionRelative(D)}),j._parser.registerCsiHandler({final:"f"},function(D){return j.hVPosition(D)}),j._parser.registerCsiHandler({final:"g"},function(D){return j.tabClear(D)}),j._parser.registerCsiHandler({final:"h"},function(D){return j.setMode(D)}),j._parser.registerCsiHandler({prefix:"?",final:"h"},function(D){return j.setModePrivate(D)}),j._parser.registerCsiHandler({final:"l"},function(D){return j.resetMode(D)}),j._parser.registerCsiHandler({prefix:"?",final:"l"},function(D){return j.resetModePrivate(D)}),j._parser.registerCsiHandler({final:"m"},function(D){return j.charAttributes(D)}),j._parser.registerCsiHandler({final:"n"},function(D){return j.deviceStatus(D)}),j._parser.registerCsiHandler({prefix:"?",final:"n"},function(D){return j.deviceStatusPrivate(D)}),j._parser.registerCsiHandler({intermediates:"!",final:"p"},function(D){return j.softReset(D)}),j._parser.registerCsiHandler({intermediates:" ",final:"q"},function(D){return j.setCursorStyle(D)}),j._parser.registerCsiHandler({final:"r"},function(D){return j.setScrollRegion(D)}),j._parser.registerCsiHandler({final:"s"},function(D){return j.saveCursor(D)}),j._parser.registerCsiHandler({final:"t"},function(D){return j.windowOptions(D)}),j._parser.registerCsiHandler({final:"u"},function(D){return j.restoreCursor(D)}),j._parser.registerCsiHandler({intermediates:"'",final:"}"},function(D){return j.insertColumns(D)}),j._parser.registerCsiHandler({intermediates:"'",final:"~"},function(D){return j.deleteColumns(D)}),j._parser.setExecuteHandler(h.C0.BEL,function(){return j.bell()}),j._parser.setExecuteHandler(h.C0.LF,function(){return j.lineFeed()}),j._parser.setExecuteHandler(h.C0.VT,function(){return j.lineFeed()}),j._parser.setExecuteHandler(h.C0.FF,function(){return j.lineFeed()}),j._parser.setExecuteHandler(h.C0.CR,function(){return j.carriageReturn()}),j._parser.setExecuteHandler(h.C0.BS,function(){return j.backspace()}),j._parser.setExecuteHandler(h.C0.HT,function(){return j.tab()}),j._parser.setExecuteHandler(h.C0.SO,function(){return j.shiftOut()}),j._parser.setExecuteHandler(h.C0.SI,function(){return j.shiftIn()}),j._parser.setExecuteHandler(h.C1.IND,function(){return j.index()}),j._parser.setExecuteHandler(h.C1.NEL,function(){return j.nextLine()}),j._parser.setExecuteHandler(h.C1.HTS,function(){return j.tabSet()}),j._parser.registerOscHandler(0,new G.OscHandler(function(D){return j.setTitle(D),j.setIconName(D),!0})),j._parser.registerOscHandler(1,new G.OscHandler(function(D){return j.setIconName(D)})),j._parser.registerOscHandler(2,new G.OscHandler(function(D){return j.setTitle(D)})),j._parser.registerOscHandler(4,new G.OscHandler(function(D){return j.setOrReportIndexedColor(D)})),j._parser.registerOscHandler(10,new G.OscHandler(function(D){return j.setOrReportFgColor(D)})),j._parser.registerOscHandler(11,new G.OscHandler(function(D){return j.setOrReportBgColor(D)})),j._parser.registerOscHandler(12,new G.OscHandler(function(D){return j.setOrReportCursorColor(D)})),j._parser.registerOscHandler(104,new G.OscHandler(function(D){return j.restoreIndexedColor(D)})),j._parser.registerOscHandler(110,new G.OscHandler(function(D){return j.restoreFgColor(D)})),j._parser.registerOscHandler(111,new G.OscHandler(function(D){return j.restoreBgColor(D)})),j._parser.registerOscHandler(112,new G.OscHandler(function(D){return j.restoreCursorColor(D)})),j._parser.registerEscHandler({final:"7"},function(){return j.saveCursor()}),j._parser.registerEscHandler({final:"8"},function(){return j.restoreCursor()}),j._parser.registerEscHandler({final:"D"},function(){return j.index()}),j._parser.registerEscHandler({final:"E"},function(){return j.nextLine()}),j._parser.registerEscHandler({final:"H"},function(){return j.tabSet()}),j._parser.registerEscHandler({final:"M"},function(){return j.reverseIndex()}),j._parser.registerEscHandler({final:"="},function(){return j.keypadApplicationMode()}),j._parser.registerEscHandler({final:">"},function(){return j.keypadNumericMode()}),j._parser.registerEscHandler({final:"c"},function(){return j.fullReset()}),j._parser.registerEscHandler({final:"n"},function(){return j.setgLevel(2)}),j._parser.registerEscHandler({final:"o"},function(){return j.setgLevel(3)}),j._parser.registerEscHandler({final:"|"},function(){return j.setgLevel(3)}),j._parser.registerEscHandler({final:"}"},function(){return j.setgLevel(2)}),j._parser.registerEscHandler({final:"~"},function(){return j.setgLevel(1)}),j._parser.registerEscHandler({intermediates:"%",final:"@"},function(){return j.selectDefaultCharset()}),j._parser.registerEscHandler({intermediates:"%",final:"G"},function(){return j.selectDefaultCharset()});var ie=function(D){H._parser.registerEscHandler({intermediates:"(",final:D},function(){return j.selectCharset("("+D)}),H._parser.registerEscHandler({intermediates:")",final:D},function(){return j.selectCharset(")"+D)}),H._parser.registerEscHandler({intermediates:"*",final:D},function(){return j.selectCharset("*"+D)}),H._parser.registerEscHandler({intermediates:"+",final:D},function(){return j.selectCharset("+"+D)}),H._parser.registerEscHandler({intermediates:"-",final:D},function(){return j.selectCharset("-"+D)}),H._parser.registerEscHandler({intermediates:".",final:D},function(){return j.selectCharset("."+D)}),H._parser.registerEscHandler({intermediates:"/",final:D},function(){return j.selectCharset("/"+D)})},H=this;for(var Q in p.CHARSETS)ie(Q);return j._parser.registerEscHandler({intermediates:"#",final:"8"},function(){return j.screenAlignmentPattern()}),j._parser.setErrorHandler(function(D){return j._logService.error("Parsing error: ",D),D}),j._parser.registerDcsHandler({intermediates:"$",final:"q"},new w(j._bufferService,j._coreService,j._logService,j._optionsService)),j}return l(N,E),Object.defineProperty(N.prototype,"onRequestBell",{get:function(){return this._onRequestBell.event},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"onRequestRefreshRows",{get:function(){return this._onRequestRefreshRows.event},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"onRequestReset",{get:function(){return this._onRequestReset.event},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"onRequestSendFocus",{get:function(){return this._onRequestSendFocus.event},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"onRequestSyncScrollBar",{get:function(){return this._onRequestSyncScrollBar.event},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"onRequestWindowsOptionsReport",{get:function(){return this._onRequestWindowsOptionsReport.event},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"onA11yChar",{get:function(){return this._onA11yChar.event},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"onA11yTab",{get:function(){return this._onA11yTab.event},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"onCursorMove",{get:function(){return this._onCursorMove.event},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"onLineFeed",{get:function(){return this._onLineFeed.event},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"onScroll",{get:function(){return this._onScroll.event},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"onTitleChange",{get:function(){return this._onTitleChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"onColor",{get:function(){return this._onColor.event},enumerable:!1,configurable:!0}),N.prototype.dispose=function(){E.prototype.dispose.call(this)},N.prototype._preserveStack=function(L,K,J,P){this._parseStack.paused=!0,this._parseStack.cursorStartX=L,this._parseStack.cursorStartY=K,this._parseStack.decodedLength=J,this._parseStack.position=P},N.prototype._logSlowResolvingAsync=function(L){this._logService.logLevel<=b.LogLevelEnum.WARN&&Promise.race([L,new Promise(function(K,J){return setTimeout(function(){return J("#SLOW_TIMEOUT")},5e3)})]).catch(function(K){if(K!=="#SLOW_TIMEOUT")throw K;console.warn("async parser handler taking longer than 5000 ms")})},N.prototype.parse=function(L,K){var J,P=this._activeBuffer.x,ee=this._activeBuffer.y,he=0,$=this._parseStack.paused;if($){if(J=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,K))return this._logSlowResolvingAsync(J),J;P=this._parseStack.cursorStartX,ee=this._parseStack.cursorStartY,this._parseStack.paused=!1,L.length>Y&&(he=this._parseStack.position+Y)}if(this._logService.logLevel<=b.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof L=="string"?' "'+L+'"':' "'+Array.prototype.map.call(L,function(ie){return String.fromCharCode(ie)}).join("")+'"'),typeof L=="string"?L.split("").map(function(ie){return ie.charCodeAt(0)}):L),this._parseBuffer.length<L.length&&this._parseBuffer.length<Y&&(this._parseBuffer=new Uint32Array(Math.min(L.length,Y))),$||this._dirtyRowService.clearRange(),L.length>Y)for(var de=he;de<L.length;de+=Y){var pe=de+Y<L.length?de+Y:L.length,j=typeof L=="string"?this._stringDecoder.decode(L.substring(de,pe),this._parseBuffer):this._utf8Decoder.decode(L.subarray(de,pe),this._parseBuffer);if(J=this._parser.parse(this._parseBuffer,j))return this._preserveStack(P,ee,j,de),this._logSlowResolvingAsync(J),J}else if(!$&&(j=typeof L=="string"?this._stringDecoder.decode(L,this._parseBuffer):this._utf8Decoder.decode(L,this._parseBuffer),J=this._parser.parse(this._parseBuffer,j)))return this._preserveStack(P,ee,j,0),this._logSlowResolvingAsync(J),J;this._activeBuffer.x===P&&this._activeBuffer.y===ee||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowService.start,this._dirtyRowService.end)},N.prototype.print=function(L,K,J){var P,ee,he=this._charsetService.charset,$=this._optionsService.rawOptions.screenReaderMode,de=this._bufferService.cols,pe=this._coreService.decPrivateModes.wraparound,j=this._coreService.modes.insertMode,ie=this._curAttrData,H=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowService.markDirty(this._activeBuffer.y),this._activeBuffer.x&&J-K>0&&H.getWidth(this._activeBuffer.x-1)===2&&H.setCellFromCodePoint(this._activeBuffer.x-1,0,1,ie.fg,ie.bg,ie.extended);for(var Q=K;Q<J;++Q){if(P=L[Q],ee=this._unicodeService.wcwidth(P),P<127&&he){var D=he[String.fromCharCode(P)];D&&(P=D.charCodeAt(0))}if($&&this._onA11yChar.fire((0,_.stringFromCodePoint)(P)),ee||!this._activeBuffer.x){if(this._activeBuffer.x+ee-1>=de){if(pe){for(;this._activeBuffer.x<de;)H.setCellFromCodePoint(this._activeBuffer.x++,0,1,ie.fg,ie.bg,ie.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),H=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=de-1,ee===2)continue}if(j&&(H.insertCells(this._activeBuffer.x,ee,this._activeBuffer.getNullCell(ie),ie),H.getWidth(de-1)===2&&H.setCellFromCodePoint(de-1,f.NULL_CELL_CODE,f.NULL_CELL_WIDTH,ie.fg,ie.bg,ie.extended)),H.setCellFromCodePoint(this._activeBuffer.x++,P,ee,ie.fg,ie.bg,ie.extended),ee>0)for(;--ee;)H.setCellFromCodePoint(this._activeBuffer.x++,0,0,ie.fg,ie.bg,ie.extended)}else H.getWidth(this._activeBuffer.x-1)?H.addCodepointToCell(this._activeBuffer.x-1,P):H.addCodepointToCell(this._activeBuffer.x-2,P)}J-K>0&&(H.loadCell(this._activeBuffer.x-1,this._workCell),this._workCell.getWidth()===2||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<de&&J-K>0&&H.getWidth(this._activeBuffer.x)===0&&!H.hasContent(this._activeBuffer.x)&&H.setCellFromCodePoint(this._activeBuffer.x,0,1,ie.fg,ie.bg,ie.extended),this._dirtyRowService.markDirty(this._activeBuffer.y)},N.prototype.registerCsiHandler=function(L,K){var J=this;return L.final!=="t"||L.prefix||L.intermediates?this._parser.registerCsiHandler(L,K):this._parser.registerCsiHandler(L,function(P){return!I(P.params[0],J._optionsService.rawOptions.windowOptions)||K(P)})},N.prototype.registerDcsHandler=function(L,K){return this._parser.registerDcsHandler(L,new S.DcsHandler(K))},N.prototype.registerEscHandler=function(L,K){return this._parser.registerEscHandler(L,K)},N.prototype.registerOscHandler=function(L,K){return this._parser.registerOscHandler(L,new G.OscHandler(K))},N.prototype.bell=function(){return this._onRequestBell.fire(),!0},N.prototype.lineFeed=function(){return this._dirtyRowService.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowService.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0},N.prototype.carriageReturn=function(){return this._activeBuffer.x=0,!0},N.prototype.backspace=function(){var L;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&(!((L=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))===null||L===void 0)&&L.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;var K=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);K.hasWidth(this._activeBuffer.x)&&!K.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0},N.prototype.tab=function(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;var L=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-L),!0},N.prototype.shiftOut=function(){return this._charsetService.setgLevel(1),!0},N.prototype.shiftIn=function(){return this._charsetService.setgLevel(0),!0},N.prototype._restrictCursor=function(L){L===void 0&&(L=this._bufferService.cols-1),this._activeBuffer.x=Math.min(L,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowService.markDirty(this._activeBuffer.y)},N.prototype._setCursor=function(L,K){this._dirtyRowService.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=L,this._activeBuffer.y=this._activeBuffer.scrollTop+K):(this._activeBuffer.x=L,this._activeBuffer.y=K),this._restrictCursor(),this._dirtyRowService.markDirty(this._activeBuffer.y)},N.prototype._moveCursor=function(L,K){this._restrictCursor(),this._setCursor(this._activeBuffer.x+L,this._activeBuffer.y+K)},N.prototype.cursorUp=function(L){var K=this._activeBuffer.y-this._activeBuffer.scrollTop;return K>=0?this._moveCursor(0,-Math.min(K,L.params[0]||1)):this._moveCursor(0,-(L.params[0]||1)),!0},N.prototype.cursorDown=function(L){var K=this._activeBuffer.scrollBottom-this._activeBuffer.y;return K>=0?this._moveCursor(0,Math.min(K,L.params[0]||1)):this._moveCursor(0,L.params[0]||1),!0},N.prototype.cursorForward=function(L){return this._moveCursor(L.params[0]||1,0),!0},N.prototype.cursorBackward=function(L){return this._moveCursor(-(L.params[0]||1),0),!0},N.prototype.cursorNextLine=function(L){return this.cursorDown(L),this._activeBuffer.x=0,!0},N.prototype.cursorPrecedingLine=function(L){return this.cursorUp(L),this._activeBuffer.x=0,!0},N.prototype.cursorCharAbsolute=function(L){return this._setCursor((L.params[0]||1)-1,this._activeBuffer.y),!0},N.prototype.cursorPosition=function(L){return this._setCursor(L.length>=2?(L.params[1]||1)-1:0,(L.params[0]||1)-1),!0},N.prototype.charPosAbsolute=function(L){return this._setCursor((L.params[0]||1)-1,this._activeBuffer.y),!0},N.prototype.hPositionRelative=function(L){return this._moveCursor(L.params[0]||1,0),!0},N.prototype.linePosAbsolute=function(L){return this._setCursor(this._activeBuffer.x,(L.params[0]||1)-1),!0},N.prototype.vPositionRelative=function(L){return this._moveCursor(0,L.params[0]||1),!0},N.prototype.hVPosition=function(L){return this.cursorPosition(L),!0},N.prototype.tabClear=function(L){var K=L.params[0];return K===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:K===3&&(this._activeBuffer.tabs={}),!0},N.prototype.cursorForwardTab=function(L){if(this._activeBuffer.x>=this._bufferService.cols)return!0;for(var K=L.params[0]||1;K--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0},N.prototype.cursorBackwardTab=function(L){if(this._activeBuffer.x>=this._bufferService.cols)return!0;for(var K=L.params[0]||1;K--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0},N.prototype._eraseInBufferLine=function(L,K,J,P){P===void 0&&(P=!1);var ee=this._activeBuffer.lines.get(this._activeBuffer.ybase+L);ee.replaceCells(K,J,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),P&&(ee.isWrapped=!1)},N.prototype._resetBufferLine=function(L){var K=this._activeBuffer.lines.get(this._activeBuffer.ybase+L);K.fill(this._activeBuffer.getNullCell(this._eraseAttrData())),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+L),K.isWrapped=!1},N.prototype.eraseInDisplay=function(L){var K;switch(this._restrictCursor(this._bufferService.cols),L.params[0]){case 0:for(K=this._activeBuffer.y,this._dirtyRowService.markDirty(K),this._eraseInBufferLine(K++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0);K<this._bufferService.rows;K++)this._resetBufferLine(K);this._dirtyRowService.markDirty(K);break;case 1:for(K=this._activeBuffer.y,this._dirtyRowService.markDirty(K),this._eraseInBufferLine(K,0,this._activeBuffer.x+1,!0),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(K+1).isWrapped=!1);K--;)this._resetBufferLine(K);this._dirtyRowService.markDirty(0);break;case 2:for(K=this._bufferService.rows,this._dirtyRowService.markDirty(K-1);K--;)this._resetBufferLine(K);this._dirtyRowService.markDirty(0);break;case 3:var J=this._activeBuffer.lines.length-this._bufferService.rows;J>0&&(this._activeBuffer.lines.trimStart(J),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-J,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-J,0),this._onScroll.fire(0))}return!0},N.prototype.eraseInLine=function(L){switch(this._restrictCursor(this._bufferService.cols),L.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0)}return this._dirtyRowService.markDirty(this._activeBuffer.y),!0},N.prototype.insertLines=function(L){this._restrictCursor();var K=L.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var J=this._activeBuffer.ybase+this._activeBuffer.y,P=this._bufferService.rows-1-this._activeBuffer.scrollBottom,ee=this._bufferService.rows-1+this._activeBuffer.ybase-P+1;K--;)this._activeBuffer.lines.splice(ee-1,1),this._activeBuffer.lines.splice(J,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0},N.prototype.deleteLines=function(L){this._restrictCursor();var K=L.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;var J,P=this._activeBuffer.ybase+this._activeBuffer.y;for(J=this._bufferService.rows-1-this._activeBuffer.scrollBottom,J=this._bufferService.rows-1+this._activeBuffer.ybase-J;K--;)this._activeBuffer.lines.splice(P,1),this._activeBuffer.lines.splice(J,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0},N.prototype.insertChars=function(L){this._restrictCursor();var K=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return K&&(K.insertCells(this._activeBuffer.x,L.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._activeBuffer.y)),!0},N.prototype.deleteChars=function(L){this._restrictCursor();var K=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return K&&(K.deleteCells(this._activeBuffer.x,L.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._activeBuffer.y)),!0},N.prototype.scrollUp=function(L){for(var K=L.params[0]||1;K--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},N.prototype.scrollDown=function(L){for(var K=L.params[0]||1;K--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(g.DEFAULT_ATTR_DATA));return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},N.prototype.scrollLeft=function(L){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var K=L.params[0]||1,J=this._activeBuffer.scrollTop;J<=this._activeBuffer.scrollBottom;++J){var P=this._activeBuffer.lines.get(this._activeBuffer.ybase+J);P.deleteCells(0,K,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),P.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},N.prototype.scrollRight=function(L){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var K=L.params[0]||1,J=this._activeBuffer.scrollTop;J<=this._activeBuffer.scrollBottom;++J){var P=this._activeBuffer.lines.get(this._activeBuffer.ybase+J);P.insertCells(0,K,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),P.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},N.prototype.insertColumns=function(L){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var K=L.params[0]||1,J=this._activeBuffer.scrollTop;J<=this._activeBuffer.scrollBottom;++J){var P=this._activeBuffer.lines.get(this._activeBuffer.ybase+J);P.insertCells(this._activeBuffer.x,K,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),P.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},N.prototype.deleteColumns=function(L){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var K=L.params[0]||1,J=this._activeBuffer.scrollTop;J<=this._activeBuffer.scrollBottom;++J){var P=this._activeBuffer.lines.get(this._activeBuffer.ybase+J);P.deleteCells(this._activeBuffer.x,K,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),P.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},N.prototype.eraseChars=function(L){this._restrictCursor();var K=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return K&&(K.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(L.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._activeBuffer.y)),!0},N.prototype.repeatPrecedingCharacter=function(L){if(!this._parser.precedingCodepoint)return!0;for(var K=L.params[0]||1,J=new Uint32Array(K),P=0;P<K;++P)J[P]=this._parser.precedingCodepoint;return this.print(J,0,J.length),!0},N.prototype.sendDeviceAttributesPrimary=function(L){return L.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(h.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(h.C0.ESC+"[?6c")),!0},N.prototype.sendDeviceAttributesSecondary=function(L){return L.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(h.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(h.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(L.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(h.C0.ESC+"[>83;40003;0c")),!0},N.prototype._is=function(L){return(this._optionsService.rawOptions.termName+"").indexOf(L)===0},N.prototype.setMode=function(L){for(var K=0;K<L.length;K++)L.params[K]===4&&(this._coreService.modes.insertMode=!0);return!0},N.prototype.setModePrivate=function(L){for(var K=0;K<L.length;K++)switch(L.params[K]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,p.DEFAULT_CHARSET),this._charsetService.setgCharset(1,p.DEFAULT_CHARSET),this._charsetService.setgCharset(2,p.DEFAULT_CHARSET),this._charsetService.setgCharset(3,p.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0},N.prototype.resetMode=function(L){for(var K=0;K<L.length;K++)L.params[K]===4&&(this._coreService.modes.insertMode=!1);return!0},N.prototype.resetModePrivate=function(L){for(var K=0;K<L.length;K++)switch(L.params[K]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),L.params[K]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0},N.prototype._updateAttrColor=function(L,K,J,P,ee){return K===2?(L|=50331648,L&=-16777216,L|=Z.AttributeData.fromColorRGB([J,P,ee])):K===5&&(L&=-50331904,L|=33554432|255&J),L},N.prototype._extractColor=function(L,K,J){var P=[0,0,-1,0,0,0],ee=0,he=0;do{if(P[he+ee]=L.params[K+he],L.hasSubParams(K+he)){var $=L.getSubParams(K+he),de=0;do P[1]===5&&(ee=1),P[he+de+1+ee]=$[de];while(++de<$.length&&de+he+1+ee<P.length);break}if(P[1]===5&&he+ee>=2||P[1]===2&&he+ee>=5)break;P[1]&&(ee=1)}while(++he+K<L.length&&he+ee<P.length);for(de=2;de<P.length;++de)P[de]===-1&&(P[de]=0);switch(P[0]){case 38:J.fg=this._updateAttrColor(J.fg,P[1],P[3],P[4],P[5]);break;case 48:J.bg=this._updateAttrColor(J.bg,P[1],P[3],P[4],P[5]);break;case 58:J.extended=J.extended.clone(),J.extended.underlineColor=this._updateAttrColor(J.extended.underlineColor,P[1],P[3],P[4],P[5])}return he},N.prototype._processUnderline=function(L,K){K.extended=K.extended.clone(),(!~L||L>5)&&(L=1),K.extended.underlineStyle=L,K.fg|=268435456,L===0&&(K.fg&=-268435457),K.updateExtended()},N.prototype.charAttributes=function(L){if(L.length===1&&L.params[0]===0)return this._curAttrData.fg=g.DEFAULT_ATTR_DATA.fg,this._curAttrData.bg=g.DEFAULT_ATTR_DATA.bg,!0;for(var K,J=L.length,P=this._curAttrData,ee=0;ee<J;ee++)(K=L.params[ee])>=30&&K<=37?(P.fg&=-50331904,P.fg|=16777216|K-30):K>=40&&K<=47?(P.bg&=-50331904,P.bg|=16777216|K-40):K>=90&&K<=97?(P.fg&=-50331904,P.fg|=16777224|K-90):K>=100&&K<=107?(P.bg&=-50331904,P.bg|=16777224|K-100):K===0?(P.fg=g.DEFAULT_ATTR_DATA.fg,P.bg=g.DEFAULT_ATTR_DATA.bg):K===1?P.fg|=134217728:K===3?P.bg|=67108864:K===4?(P.fg|=268435456,this._processUnderline(L.hasSubParams(ee)?L.getSubParams(ee)[0]:1,P)):K===5?P.fg|=536870912:K===7?P.fg|=67108864:K===8?P.fg|=1073741824:K===9?P.fg|=2147483648:K===2?P.bg|=134217728:K===21?this._processUnderline(2,P):K===22?(P.fg&=-134217729,P.bg&=-134217729):K===23?P.bg&=-67108865:K===24?P.fg&=-268435457:K===25?P.fg&=-536870913:K===27?P.fg&=-67108865:K===28?P.fg&=-1073741825:K===29?P.fg&=2147483647:K===39?(P.fg&=-67108864,P.fg|=16777215&g.DEFAULT_ATTR_DATA.fg):K===49?(P.bg&=-67108864,P.bg|=16777215&g.DEFAULT_ATTR_DATA.bg):K===38||K===48||K===58?ee+=this._extractColor(L,ee,P):K===59?(P.extended=P.extended.clone(),P.extended.underlineColor=-1,P.updateExtended()):K===100?(P.fg&=-67108864,P.fg|=16777215&g.DEFAULT_ATTR_DATA.fg,P.bg&=-67108864,P.bg|=16777215&g.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",K);return!0},N.prototype.deviceStatus=function(L){switch(L.params[0]){case 5:this._coreService.triggerDataEvent(h.C0.ESC+"[0n");break;case 6:var K=this._activeBuffer.y+1,J=this._activeBuffer.x+1;this._coreService.triggerDataEvent(h.C0.ESC+"["+K+";"+J+"R")}return!0},N.prototype.deviceStatusPrivate=function(L){if(L.params[0]===6){var K=this._activeBuffer.y+1,J=this._activeBuffer.x+1;this._coreService.triggerDataEvent(h.C0.ESC+"[?"+K+";"+J+"R")}return!0},N.prototype.softReset=function(L){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=g.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0},N.prototype.setCursorStyle=function(L){var K=L.params[0]||1;switch(K){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}var J=K%2==1;return this._optionsService.options.cursorBlink=J,!0},N.prototype.setScrollRegion=function(L){var K,J=L.params[0]||1;return(L.length<2||(K=L.params[1])>this._bufferService.rows||K===0)&&(K=this._bufferService.rows),K>J&&(this._activeBuffer.scrollTop=J-1,this._activeBuffer.scrollBottom=K-1,this._setCursor(0,0)),!0},N.prototype.windowOptions=function(L){if(!I(L.params[0],this._optionsService.rawOptions.windowOptions))return!0;var K=L.length>1?L.params[1]:0;switch(L.params[0]){case 14:K!==2&&this._onRequestWindowsOptionsReport.fire(a.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(a.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(h.C0.ESC+"[8;"+this._bufferService.rows+";"+this._bufferService.cols+"t");break;case 22:K!==0&&K!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),K!==0&&K!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:K!==0&&K!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),K!==0&&K!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0},N.prototype.saveCursor=function(L){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0},N.prototype.restoreCursor=function(L){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0},N.prototype.setTitle=function(L){return this._windowTitle=L,this._onTitleChange.fire(L),!0},N.prototype.setIconName=function(L){return this._iconName=L,!0},N.prototype.setOrReportIndexedColor=function(L){for(var K=[],J=L.split(";");J.length>1;){var P=J.shift(),ee=J.shift();if(/^\d+$/.exec(P)){var he=parseInt(P);if(0<=he&&he<256)if(ee==="?")K.push({type:0,index:he});else{var $=(0,C.parseColor)(ee);$&&K.push({type:1,index:he,color:$})}}}return K.length&&this._onColor.fire(K),!0},N.prototype._setOrReportSpecialColor=function(L,K){for(var J=L.split(";"),P=0;P<J.length&&!(K>=this._specialColors.length);++P,++K)if(J[P]==="?")this._onColor.fire([{type:0,index:this._specialColors[K]}]);else{var ee=(0,C.parseColor)(J[P]);ee&&this._onColor.fire([{type:1,index:this._specialColors[K],color:ee}])}return!0},N.prototype.setOrReportFgColor=function(L){return this._setOrReportSpecialColor(L,0)},N.prototype.setOrReportBgColor=function(L){return this._setOrReportSpecialColor(L,1)},N.prototype.setOrReportCursorColor=function(L){return this._setOrReportSpecialColor(L,2)},N.prototype.restoreIndexedColor=function(L){if(!L)return this._onColor.fire([{type:2}]),!0;for(var K=[],J=L.split(";"),P=0;P<J.length;++P)if(/^\d+$/.exec(J[P])){var ee=parseInt(J[P]);0<=ee&&ee<256&&K.push({type:2,index:ee})}return K.length&&this._onColor.fire(K),!0},N.prototype.restoreFgColor=function(L){return this._onColor.fire([{type:2,index:256}]),!0},N.prototype.restoreBgColor=function(L){return this._onColor.fire([{type:2,index:257}]),!0},N.prototype.restoreCursorColor=function(L){return this._onColor.fire([{type:2,index:258}]),!0},N.prototype.nextLine=function(){return this._activeBuffer.x=0,this.index(),!0},N.prototype.keypadApplicationMode=function(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0},N.prototype.keypadNumericMode=function(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0},N.prototype.selectDefaultCharset=function(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,p.DEFAULT_CHARSET),!0},N.prototype.selectCharset=function(L){return L.length!==2?(this.selectDefaultCharset(),!0):(L[0]==="/"||this._charsetService.setgCharset(R[L[0]],p.CHARSETS[L[1]]||p.DEFAULT_CHARSET),!0)},N.prototype.index=function(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0},N.prototype.tabSet=function(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0},N.prototype.reverseIndex=function(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){var L=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,L,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0},N.prototype.fullReset=function(){return this._parser.reset(),this._onRequestReset.fire(),!0},N.prototype.reset=function(){this._curAttrData=g.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=g.DEFAULT_ATTR_DATA.clone()},N.prototype._eraseAttrData=function(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal},N.prototype.setgLevel=function(L){return this._charsetService.setgLevel(L),!0},N.prototype.screenAlignmentPattern=function(){var L=new v.CellData;L.content=1<<22|"E".charCodeAt(0),L.fg=this._curAttrData.fg,L.bg=this._curAttrData.bg,this._setCursor(0,0);for(var K=0;K<this._bufferService.rows;++K){var J=this._activeBuffer.ybase+this._activeBuffer.y+K,P=this._activeBuffer.lines.get(J);P&&(P.fill(L),P.isWrapped=!1)}return this._dirtyRowService.markAllDirty(),this._setCursor(0,0),!0},N}(c.Disposable);o.InputHandler=F},844:function(n,o){var s=this&&this.__values||function(a){var h=typeof Symbol=="function"&&Symbol.iterator,p=h&&a[h],d=0;if(p)return p.call(a);if(a&&typeof a.length=="number")return{next:function(){return a&&d>=a.length&&(a=void 0),{value:a&&a[d++],done:!a}}};throw new TypeError(h?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(o,"__esModule",{value:!0}),o.getDisposeArrayDisposable=o.disposeArray=o.Disposable=void 0;var u=function(){function a(){this._disposables=[],this._isDisposed=!1}return a.prototype.dispose=function(){var h,p;this._isDisposed=!0;try{for(var d=s(this._disposables),c=d.next();!c.done;c=d.next())c.value.dispose()}catch(y){h={error:y}}finally{try{c&&!c.done&&(p=d.return)&&p.call(d)}finally{if(h)throw h.error}}this._disposables.length=0},a.prototype.register=function(h){return this._disposables.push(h),h},a.prototype.unregister=function(h){var p=this._disposables.indexOf(h);p!==-1&&this._disposables.splice(p,1)},a}();function l(a){var h,p;try{for(var d=s(a),c=d.next();!c.done;c=d.next())c.value.dispose()}catch(y){h={error:y}}finally{try{c&&!c.done&&(p=d.return)&&p.call(d)}finally{if(h)throw h.error}}a.length=0}o.Disposable=u,o.disposeArray=l,o.getDisposeArrayDisposable=function(a){return{dispose:function(){return l(a)}}}},6114:(n,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.isLinux=o.isWindows=o.isIphone=o.isIpad=o.isMac=o.isSafari=o.isLegacyEdge=o.isFirefox=void 0;var s=typeof navigator>"u",u=s?"node":navigator.userAgent,l=s?"node":navigator.platform;o.isFirefox=u.includes("Firefox"),o.isLegacyEdge=u.includes("Edge"),o.isSafari=/^((?!chrome|android).)*safari/i.test(u),o.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(l),o.isIpad=l==="iPad",o.isIphone=l==="iPhone",o.isWindows=["Windows","Win16","Win32","WinCE"].includes(l),o.isLinux=l.indexOf("Linux")>=0},6106:function(n,o){var s=this&&this.__generator||function(l,a){var h,p,d,c,y={label:0,sent:function(){if(1&d[0])throw d[1];return d[1]},trys:[],ops:[]};return c={next:_(0),throw:_(1),return:_(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function _(g){return function(m){return function(f){if(h)throw new TypeError("Generator is already executing.");for(;y;)try{if(h=1,p&&(d=2&f[0]?p.return:f[0]?p.throw||((d=p.return)&&d.call(p),0):p.next)&&!(d=d.call(p,f[1])).done)return d;switch(p=0,d&&(f=[2&f[0],d.value]),f[0]){case 0:case 1:d=f;break;case 4:return y.label++,{value:f[1],done:!1};case 5:y.label++,p=f[1],f=[0];continue;case 7:f=y.ops.pop(),y.trys.pop();continue;default:if(!((d=(d=y.trys).length>0&&d[d.length-1])||f[0]!==6&&f[0]!==2)){y=0;continue}if(f[0]===3&&(!d||f[1]>d[0]&&f[1]<d[3])){y.label=f[1];break}if(f[0]===6&&y.label<d[1]){y.label=d[1],d=f;break}if(d&&y.label<d[2]){y.label=d[2],y.ops.push(f);break}d[2]&&y.ops.pop(),y.trys.pop();continue}f=a.call(l,y)}catch(v){f=[6,v],p=0}finally{h=d=0}if(5&f[0])throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}([g,m])}}};Object.defineProperty(o,"__esModule",{value:!0}),o.SortedList=void 0;var u=function(){function l(a){this._getKey=a,this._array=[]}return l.prototype.clear=function(){this._array.length=0},l.prototype.insert=function(a){if(this._array.length!==0){var h=this._search(this._getKey(a),0,this._array.length-1);this._array.splice(h,0,a)}else this._array.push(a)},l.prototype.delete=function(a){if(this._array.length===0)return!1;var h=this._getKey(a),p=this._search(h,0,this._array.length-1);if(this._getKey(this._array[p])!==h)return!1;do if(this._array[p]===a)return this._array.splice(p,1),!0;while(++p<this._array.length&&this._getKey(this._array[p])===h);return!1},l.prototype.getKeyIterator=function(a){var h;return s(this,function(p){switch(p.label){case 0:if(this._array.length===0)return[2];if((h=this._search(a,0,this._array.length-1))<0||h>=this._array.length)return[2];if(this._getKey(this._array[h])!==a)return[2];p.label=1;case 1:return[4,this._array[h]];case 2:p.sent(),p.label=3;case 3:if(++h<this._array.length&&this._getKey(this._array[h])===a)return[3,1];p.label=4;case 4:return[2]}})},l.prototype.values=function(){return this._array.values()},l.prototype._search=function(a,h,p){if(p<h)return h;var d=Math.floor((h+p)/2);if(this._getKey(this._array[d])>a)return this._search(a,h,d-1);if(this._getKey(this._array[d])<a)return this._search(a,d+1,p);for(;d>0&&this._getKey(this._array[d-1])===a;)d--;return d},l}();o.SortedList=u},8273:(n,o)=>{function s(u,l,a,h){if(a===void 0&&(a=0),h===void 0&&(h=u.length),a>=u.length)return u;a=(u.length+a)%u.length,h=h>=u.length?u.length:(u.length+h)%u.length;for(var p=a;p<h;++p)u[p]=l;return u}Object.defineProperty(o,"__esModule",{value:!0}),o.concat=o.fillFallback=o.fill=void 0,o.fill=function(u,l,a,h){return u.fill?u.fill(l,a,h):s(u,l,a,h)},o.fillFallback=s,o.concat=function(u,l){var a=new u.constructor(u.length+l.length);return a.set(u),a.set(l,u.length),a}},9282:(n,o,s)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.updateWindowsModeWrappedState=void 0;var u=s(643);o.updateWindowsModeWrappedState=function(l){var a=l.buffer.lines.get(l.buffer.ybase+l.buffer.y-1),h=a==null?void 0:a.get(l.cols-1),p=l.buffer.lines.get(l.buffer.ybase+l.buffer.y);p&&h&&(p.isWrapped=h[u.CHAR_DATA_CODE_INDEX]!==u.NULL_CELL_CODE&&h[u.CHAR_DATA_CODE_INDEX]!==u.WHITESPACE_CELL_CODE)}},3734:(n,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.ExtendedAttrs=o.AttributeData=void 0;var s=function(){function l(){this.fg=0,this.bg=0,this.extended=new u}return l.toColorRGB=function(a){return[a>>>16&255,a>>>8&255,255&a]},l.fromColorRGB=function(a){return(255&a[0])<<16|(255&a[1])<<8|255&a[2]},l.prototype.clone=function(){var a=new l;return a.fg=this.fg,a.bg=this.bg,a.extended=this.extended.clone(),a},l.prototype.isInverse=function(){return 67108864&this.fg},l.prototype.isBold=function(){return 134217728&this.fg},l.prototype.isUnderline=function(){return 268435456&this.fg},l.prototype.isBlink=function(){return 536870912&this.fg},l.prototype.isInvisible=function(){return 1073741824&this.fg},l.prototype.isItalic=function(){return 67108864&this.bg},l.prototype.isDim=function(){return 134217728&this.bg},l.prototype.isStrikethrough=function(){return 2147483648&this.fg},l.prototype.getFgColorMode=function(){return 50331648&this.fg},l.prototype.getBgColorMode=function(){return 50331648&this.bg},l.prototype.isFgRGB=function(){return(50331648&this.fg)==50331648},l.prototype.isBgRGB=function(){return(50331648&this.bg)==50331648},l.prototype.isFgPalette=function(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432},l.prototype.isBgPalette=function(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432},l.prototype.isFgDefault=function(){return(50331648&this.fg)==0},l.prototype.isBgDefault=function(){return(50331648&this.bg)==0},l.prototype.isAttributeDefault=function(){return this.fg===0&&this.bg===0},l.prototype.getFgColor=function(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}},l.prototype.getBgColor=function(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}},l.prototype.hasExtendedAttrs=function(){return 268435456&this.bg},l.prototype.updateExtended=function(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456},l.prototype.getUnderlineColor=function(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()},l.prototype.getUnderlineColorMode=function(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()},l.prototype.isUnderlineColorRGB=function(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()},l.prototype.isUnderlineColorPalette=function(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()},l.prototype.isUnderlineColorDefault=function(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()},l.prototype.getUnderlineStyle=function(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0},l}();o.AttributeData=s;var u=function(){function l(a,h){a===void 0&&(a=0),h===void 0&&(h=-1),this.underlineStyle=a,this.underlineColor=h}return l.prototype.clone=function(){return new l(this.underlineStyle,this.underlineColor)},l.prototype.isEmpty=function(){return this.underlineStyle===0},l}();o.ExtendedAttrs=u},9092:function(n,o,s){var u=this&&this.__read||function(v,Z){var b=typeof Symbol=="function"&&v[Symbol.iterator];if(!b)return v;var G,S,C=b.call(v),R=[];try{for(;(Z===void 0||Z-- >0)&&!(G=C.next()).done;)R.push(G.value)}catch(Y){S={error:Y}}finally{try{G&&!G.done&&(b=C.return)&&b.call(C)}finally{if(S)throw S.error}}return R},l=this&&this.__spreadArray||function(v,Z,b){if(b||arguments.length===2)for(var G,S=0,C=Z.length;S<C;S++)!G&&S in Z||(G||(G=Array.prototype.slice.call(Z,0,S)),G[S]=Z[S]);return v.concat(G||Array.prototype.slice.call(Z))};Object.defineProperty(o,"__esModule",{value:!0}),o.BufferStringIterator=o.Buffer=o.MAX_BUFFER_SIZE=void 0;var a=s(6349),h=s(8437),p=s(511),d=s(643),c=s(4634),y=s(4863),_=s(7116),g=s(3734);o.MAX_BUFFER_SIZE=4294967295;var m=function(){function v(Z,b,G){this._hasScrollback=Z,this._optionsService=b,this._bufferService=G,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.savedY=0,this.savedX=0,this.savedCurAttrData=h.DEFAULT_ATTR_DATA.clone(),this.savedCharset=_.DEFAULT_CHARSET,this.markers=[],this._nullCell=p.CellData.fromCharData([0,d.NULL_CELL_CHAR,d.NULL_CELL_WIDTH,d.NULL_CELL_CODE]),this._whitespaceCell=p.CellData.fromCharData([0,d.WHITESPACE_CELL_CHAR,d.WHITESPACE_CELL_WIDTH,d.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new a.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}return v.prototype.getNullCell=function(Z){return Z?(this._nullCell.fg=Z.fg,this._nullCell.bg=Z.bg,this._nullCell.extended=Z.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new g.ExtendedAttrs),this._nullCell},v.prototype.getWhitespaceCell=function(Z){return Z?(this._whitespaceCell.fg=Z.fg,this._whitespaceCell.bg=Z.bg,this._whitespaceCell.extended=Z.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new g.ExtendedAttrs),this._whitespaceCell},v.prototype.getBlankLine=function(Z,b){return new h.BufferLine(this._bufferService.cols,this.getNullCell(Z),b)},Object.defineProperty(v.prototype,"hasScrollback",{get:function(){return this._hasScrollback&&this.lines.maxLength>this._rows},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"isCursorInViewport",{get:function(){var Z=this.ybase+this.y-this.ydisp;return Z>=0&&Z<this._rows},enumerable:!1,configurable:!0}),v.prototype._getCorrectBufferLength=function(Z){if(!this._hasScrollback)return Z;var b=Z+this._optionsService.rawOptions.scrollback;return b>o.MAX_BUFFER_SIZE?o.MAX_BUFFER_SIZE:b},v.prototype.fillViewportRows=function(Z){if(this.lines.length===0){Z===void 0&&(Z=h.DEFAULT_ATTR_DATA);for(var b=this._rows;b--;)this.lines.push(this.getBlankLine(Z))}},v.prototype.clear=function(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new a.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()},v.prototype.resize=function(Z,b){var G=this.getNullCell(h.DEFAULT_ATTR_DATA),S=this._getCorrectBufferLength(b);if(S>this.lines.maxLength&&(this.lines.maxLength=S),this.lines.length>0){if(this._cols<Z)for(var C=0;C<this.lines.length;C++)this.lines.get(C).resize(Z,G);var R=0;if(this._rows<b)for(var Y=this._rows;Y<b;Y++)this.lines.length<b+this.ybase&&(this._optionsService.rawOptions.windowsMode?this.lines.push(new h.BufferLine(Z,G)):this.ybase>0&&this.lines.length<=this.ybase+this.y+R+1?(this.ybase--,R++,this.ydisp>0&&this.ydisp--):this.lines.push(new h.BufferLine(Z,G)));else for(Y=this._rows;Y>b;Y--)this.lines.length>b+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(S<this.lines.maxLength){var I=this.lines.length-S;I>0&&(this.lines.trimStart(I),this.ybase=Math.max(this.ybase-I,0),this.ydisp=Math.max(this.ydisp-I,0),this.savedY=Math.max(this.savedY-I,0)),this.lines.maxLength=S}this.x=Math.min(this.x,Z-1),this.y=Math.min(this.y,b-1),R&&(this.y+=R),this.savedX=Math.min(this.savedX,Z-1),this.scrollTop=0}if(this.scrollBottom=b-1,this._isReflowEnabled&&(this._reflow(Z,b),this._cols>Z))for(C=0;C<this.lines.length;C++)this.lines.get(C).resize(Z,G);this._cols=Z,this._rows=b},Object.defineProperty(v.prototype,"_isReflowEnabled",{get:function(){return this._hasScrollback&&!this._optionsService.rawOptions.windowsMode},enumerable:!1,configurable:!0}),v.prototype._reflow=function(Z,b){this._cols!==Z&&(Z>this._cols?this._reflowLarger(Z,b):this._reflowSmaller(Z,b))},v.prototype._reflowLarger=function(Z,b){var G=(0,c.reflowLargerGetLinesToRemove)(this.lines,this._cols,Z,this.ybase+this.y,this.getNullCell(h.DEFAULT_ATTR_DATA));if(G.length>0){var S=(0,c.reflowLargerCreateNewLayout)(this.lines,G);(0,c.reflowLargerApplyNewLayout)(this.lines,S.layout),this._reflowLargerAdjustViewport(Z,b,S.countRemoved)}},v.prototype._reflowLargerAdjustViewport=function(Z,b,G){for(var S=this.getNullCell(h.DEFAULT_ATTR_DATA),C=G;C-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<b&&this.lines.push(new h.BufferLine(Z,S))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-G,0)},v.prototype._reflowSmaller=function(Z,b){for(var G=this.getNullCell(h.DEFAULT_ATTR_DATA),S=[],C=0,R=this.lines.length-1;R>=0;R--){var Y=this.lines.get(R);if(!(!Y||!Y.isWrapped&&Y.getTrimmedLength()<=Z)){for(var I=[Y];Y.isWrapped&&R>0;)Y=this.lines.get(--R),I.unshift(Y);var w=this.ybase+this.y;if(!(w>=R&&w<R+I.length)){var F,E=I[I.length-1].getTrimmedLength(),N=(0,c.reflowSmallerGetNewLineLengths)(I,this._cols,Z),L=N.length-I.length;F=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+L):Math.max(0,this.lines.length-this.lines.maxLength+L);for(var K=[],J=0;J<L;J++){var P=this.getBlankLine(h.DEFAULT_ATTR_DATA,!0);K.push(P)}K.length>0&&(S.push({start:R+I.length+C,newLines:K}),C+=K.length),I.push.apply(I,l([],u(K),!1));var ee=N.length-1,he=N[ee];he===0&&(he=N[--ee]);for(var $=I.length-L-1,de=E;$>=0;){var pe=Math.min(de,he);if(I[ee]===void 0)break;if(I[ee].copyCellsFrom(I[$],de-pe,he-pe,pe,!0),(he-=pe)==0&&(he=N[--ee]),(de-=pe)==0){$--;var j=Math.max($,0);de=(0,c.getWrappedLineTrimmedLength)(I,j,this._cols)}}for(J=0;J<I.length;J++)N[J]<Z&&I[J].setCell(N[J],G);for(var ie=L-F;ie-- >0;)this.ybase===0?this.y<b-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+C)-b&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+L,this.ybase+b-1)}}}if(S.length>0){var H=[],Q=[];for(J=0;J<this.lines.length;J++)Q.push(this.lines.get(J));var D=this.lines.length,X=D-1,ge=0,te=S[ge];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+C);var x=0;for(J=Math.min(this.lines.maxLength-1,D+C-1);J>=0;J--)if(te&&te.start>X+x){for(var A=te.newLines.length-1;A>=0;A--)this.lines.set(J--,te.newLines[A]);J++,H.push({index:X+1,amount:te.newLines.length}),x+=te.newLines.length,te=S[++ge]}else this.lines.set(J,Q[X--]);var le=0;for(J=H.length-1;J>=0;J--)H[J].index+=le,this.lines.onInsertEmitter.fire(H[J]),le+=H[J].amount;var Ge=Math.max(0,D+C-this.lines.maxLength);Ge>0&&this.lines.onTrimEmitter.fire(Ge)}},v.prototype.stringIndexToBufferIndex=function(Z,b,G){for(G===void 0&&(G=!1);b;){var S=this.lines.get(Z);if(!S)return[-1,-1];for(var C=G?S.getTrimmedLength():S.length,R=0;R<C;++R)if(S.get(R)[d.CHAR_DATA_WIDTH_INDEX]&&(b-=S.get(R)[d.CHAR_DATA_CHAR_INDEX].length||1),b<0)return[Z,R];Z++}return[Z,0]},v.prototype.translateBufferLineToString=function(Z,b,G,S){G===void 0&&(G=0);var C=this.lines.get(Z);return C?C.translateToString(b,G,S):""},v.prototype.getWrappedRangeForLine=function(Z){for(var b=Z,G=Z;b>0&&this.lines.get(b).isWrapped;)b--;for(;G+1<this.lines.length&&this.lines.get(G+1).isWrapped;)G++;return{first:b,last:G}},v.prototype.setupTabStops=function(Z){for(Z!=null?this.tabs[Z]||(Z=this.prevStop(Z)):(this.tabs={},Z=0);Z<this._cols;Z+=this._optionsService.rawOptions.tabStopWidth)this.tabs[Z]=!0},v.prototype.prevStop=function(Z){for(Z==null&&(Z=this.x);!this.tabs[--Z]&&Z>0;);return Z>=this._cols?this._cols-1:Z<0?0:Z},v.prototype.nextStop=function(Z){for(Z==null&&(Z=this.x);!this.tabs[++Z]&&Z<this._cols;);return Z>=this._cols?this._cols-1:Z<0?0:Z},v.prototype.clearMarkers=function(Z){this._isClearing=!0;for(var b=0;b<this.markers.length;b++)this.markers[b].line===Z&&(this.markers[b].dispose(),this.markers.splice(b--,1));this._isClearing=!1},v.prototype.clearAllMarkers=function(){this._isClearing=!0;for(var Z=0;Z<this.markers.length;Z++)this.markers[Z].dispose(),this.markers.splice(Z--,1);this._isClearing=!1},v.prototype.addMarker=function(Z){var b=this,G=new y.Marker(Z);return this.markers.push(G),G.register(this.lines.onTrim(function(S){G.line-=S,G.line<0&&G.dispose()})),G.register(this.lines.onInsert(function(S){G.line>=S.index&&(G.line+=S.amount)})),G.register(this.lines.onDelete(function(S){G.line>=S.index&&G.line<S.index+S.amount&&G.dispose(),G.line>S.index&&(G.line-=S.amount)})),G.register(G.onDispose(function(){return b._removeMarker(G)})),G},v.prototype._removeMarker=function(Z){this._isClearing||this.markers.splice(this.markers.indexOf(Z),1)},v.prototype.iterator=function(Z,b,G,S,C){return new f(this,Z,b,G,S,C)},v}();o.Buffer=m;var f=function(){function v(Z,b,G,S,C,R){G===void 0&&(G=0),S===void 0&&(S=Z.lines.length),C===void 0&&(C=0),R===void 0&&(R=0),this._buffer=Z,this._trimRight=b,this._startIndex=G,this._endIndex=S,this._startOverscan=C,this._endOverscan=R,this._startIndex<0&&(this._startIndex=0),this._endIndex>this._buffer.lines.length&&(this._endIndex=this._buffer.lines.length),this._current=this._startIndex}return v.prototype.hasNext=function(){return this._current<this._endIndex},v.prototype.next=function(){var Z=this._buffer.getWrappedRangeForLine(this._current);Z.first<this._startIndex-this._startOverscan&&(Z.first=this._startIndex-this._startOverscan),Z.last>this._endIndex+this._endOverscan&&(Z.last=this._endIndex+this._endOverscan),Z.first=Math.max(Z.first,0),Z.last=Math.min(Z.last,this._buffer.lines.length);for(var b="",G=Z.first;G<=Z.last;++G)b+=this._buffer.translateBufferLineToString(G,this._trimRight);return this._current=Z.last+1,{range:Z,content:b}},v}();o.BufferStringIterator=f},8437:(n,o,s)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.BufferLine=o.DEFAULT_ATTR_DATA=void 0;var u=s(482),l=s(643),a=s(511),h=s(3734);o.DEFAULT_ATTR_DATA=Object.freeze(new h.AttributeData);var p=function(){function d(c,y,_){_===void 0&&(_=!1),this.isWrapped=_,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*c);for(var g=y||a.CellData.fromCharData([0,l.NULL_CELL_CHAR,l.NULL_CELL_WIDTH,l.NULL_CELL_CODE]),m=0;m<c;++m)this.setCell(m,g);this.length=c}return d.prototype.get=function(c){var y=this._data[3*c+0],_=2097151&y;return[this._data[3*c+1],2097152&y?this._combined[c]:_?(0,u.stringFromCodePoint)(_):"",y>>22,2097152&y?this._combined[c].charCodeAt(this._combined[c].length-1):_]},d.prototype.set=function(c,y){this._data[3*c+1]=y[l.CHAR_DATA_ATTR_INDEX],y[l.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[c]=y[1],this._data[3*c+0]=2097152|c|y[l.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*c+0]=y[l.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|y[l.CHAR_DATA_WIDTH_INDEX]<<22},d.prototype.getWidth=function(c){return this._data[3*c+0]>>22},d.prototype.hasWidth=function(c){return 12582912&this._data[3*c+0]},d.prototype.getFg=function(c){return this._data[3*c+1]},d.prototype.getBg=function(c){return this._data[3*c+2]},d.prototype.hasContent=function(c){return 4194303&this._data[3*c+0]},d.prototype.getCodePoint=function(c){var y=this._data[3*c+0];return 2097152&y?this._combined[c].charCodeAt(this._combined[c].length-1):2097151&y},d.prototype.isCombined=function(c){return 2097152&this._data[3*c+0]},d.prototype.getString=function(c){var y=this._data[3*c+0];return 2097152&y?this._combined[c]:2097151&y?(0,u.stringFromCodePoint)(2097151&y):""},d.prototype.loadCell=function(c,y){var _=3*c;return y.content=this._data[_+0],y.fg=this._data[_+1],y.bg=this._data[_+2],2097152&y.content&&(y.combinedData=this._combined[c]),268435456&y.bg&&(y.extended=this._extendedAttrs[c]),y},d.prototype.setCell=function(c,y){2097152&y.content&&(this._combined[c]=y.combinedData),268435456&y.bg&&(this._extendedAttrs[c]=y.extended),this._data[3*c+0]=y.content,this._data[3*c+1]=y.fg,this._data[3*c+2]=y.bg},d.prototype.setCellFromCodePoint=function(c,y,_,g,m,f){268435456&m&&(this._extendedAttrs[c]=f),this._data[3*c+0]=y|_<<22,this._data[3*c+1]=g,this._data[3*c+2]=m},d.prototype.addCodepointToCell=function(c,y){var _=this._data[3*c+0];2097152&_?this._combined[c]+=(0,u.stringFromCodePoint)(y):(2097151&_?(this._combined[c]=(0,u.stringFromCodePoint)(2097151&_)+(0,u.stringFromCodePoint)(y),_&=-2097152,_|=2097152):_=y|1<<22,this._data[3*c+0]=_)},d.prototype.insertCells=function(c,y,_,g){if((c%=this.length)&&this.getWidth(c-1)===2&&this.setCellFromCodePoint(c-1,0,1,(g==null?void 0:g.fg)||0,(g==null?void 0:g.bg)||0,(g==null?void 0:g.extended)||new h.ExtendedAttrs),y<this.length-c){for(var m=new a.CellData,f=this.length-c-y-1;f>=0;--f)this.setCell(c+y+f,this.loadCell(c+f,m));for(f=0;f<y;++f)this.setCell(c+f,_)}else for(f=c;f<this.length;++f)this.setCell(f,_);this.getWidth(this.length-1)===2&&this.setCellFromCodePoint(this.length-1,0,1,(g==null?void 0:g.fg)||0,(g==null?void 0:g.bg)||0,(g==null?void 0:g.extended)||new h.ExtendedAttrs)},d.prototype.deleteCells=function(c,y,_,g){if(c%=this.length,y<this.length-c){for(var m=new a.CellData,f=0;f<this.length-c-y;++f)this.setCell(c+f,this.loadCell(c+y+f,m));for(f=this.length-y;f<this.length;++f)this.setCell(f,_)}else for(f=c;f<this.length;++f)this.setCell(f,_);c&&this.getWidth(c-1)===2&&this.setCellFromCodePoint(c-1,0,1,(g==null?void 0:g.fg)||0,(g==null?void 0:g.bg)||0,(g==null?void 0:g.extended)||new h.ExtendedAttrs),this.getWidth(c)!==0||this.hasContent(c)||this.setCellFromCodePoint(c,0,1,(g==null?void 0:g.fg)||0,(g==null?void 0:g.bg)||0,(g==null?void 0:g.extended)||new h.ExtendedAttrs)},d.prototype.replaceCells=function(c,y,_,g){for(c&&this.getWidth(c-1)===2&&this.setCellFromCodePoint(c-1,0,1,(g==null?void 0:g.fg)||0,(g==null?void 0:g.bg)||0,(g==null?void 0:g.extended)||new h.ExtendedAttrs),y<this.length&&this.getWidth(y-1)===2&&this.setCellFromCodePoint(y,0,1,(g==null?void 0:g.fg)||0,(g==null?void 0:g.bg)||0,(g==null?void 0:g.extended)||new h.ExtendedAttrs);c<y&&c<this.length;)this.setCell(c++,_)},d.prototype.resize=function(c,y){if(c!==this.length){if(c>this.length){var _=new Uint32Array(3*c);this.length&&(3*c<this._data.length?_.set(this._data.subarray(0,3*c)):_.set(this._data)),this._data=_;for(var g=this.length;g<c;++g)this.setCell(g,y)}else if(c){(_=new Uint32Array(3*c)).set(this._data.subarray(0,3*c)),this._data=_;var m=Object.keys(this._combined);for(g=0;g<m.length;g++){var f=parseInt(m[g],10);f>=c&&delete this._combined[f]}}else this._data=new Uint32Array(0),this._combined={};this.length=c}},d.prototype.fill=function(c){this._combined={},this._extendedAttrs={};for(var y=0;y<this.length;++y)this.setCell(y,c)},d.prototype.copyFrom=function(c){for(var y in this.length!==c.length?this._data=new Uint32Array(c._data):this._data.set(c._data),this.length=c.length,this._combined={},c._combined)this._combined[y]=c._combined[y];for(var y in this._extendedAttrs={},c._extendedAttrs)this._extendedAttrs[y]=c._extendedAttrs[y];this.isWrapped=c.isWrapped},d.prototype.clone=function(){var c=new d(0);for(var y in c._data=new Uint32Array(this._data),c.length=this.length,this._combined)c._combined[y]=this._combined[y];for(var y in this._extendedAttrs)c._extendedAttrs[y]=this._extendedAttrs[y];return c.isWrapped=this.isWrapped,c},d.prototype.getTrimmedLength=function(){for(var c=this.length-1;c>=0;--c)if(4194303&this._data[3*c+0])return c+(this._data[3*c+0]>>22);return 0},d.prototype.copyCellsFrom=function(c,y,_,g,m){var f=c._data;if(m)for(var v=g-1;v>=0;v--)for(var Z=0;Z<3;Z++)this._data[3*(_+v)+Z]=f[3*(y+v)+Z];else for(v=0;v<g;v++)for(Z=0;Z<3;Z++)this._data[3*(_+v)+Z]=f[3*(y+v)+Z];var b=Object.keys(c._combined);for(Z=0;Z<b.length;Z++){var G=parseInt(b[Z],10);G>=y&&(this._combined[G-y+_]=c._combined[G])}},d.prototype.translateToString=function(c,y,_){c===void 0&&(c=!1),y===void 0&&(y=0),_===void 0&&(_=this.length),c&&(_=Math.min(_,this.getTrimmedLength()));for(var g="";y<_;){var m=this._data[3*y+0],f=2097151&m;g+=2097152&m?this._combined[y]:f?(0,u.stringFromCodePoint)(f):l.WHITESPACE_CELL_CHAR,y+=m>>22||1}return g},d}();o.BufferLine=p},4841:(n,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.getRangeLength=void 0,o.getRangeLength=function(s,u){if(s.start.y>s.end.y)throw new Error("Buffer range end ("+s.end.x+", "+s.end.y+") cannot be before start ("+s.start.x+", "+s.start.y+")");return u*(s.end.y-s.start.y)+(s.end.x-s.start.x+1)}},4634:(n,o)=>{function s(u,l,a){if(l===u.length-1)return u[l].getTrimmedLength();var h=!u[l].hasContent(a-1)&&u[l].getWidth(a-1)===1,p=u[l+1].getWidth(0)===2;return h&&p?a-1:a}Object.defineProperty(o,"__esModule",{value:!0}),o.getWrappedLineTrimmedLength=o.reflowSmallerGetNewLineLengths=o.reflowLargerApplyNewLayout=o.reflowLargerCreateNewLayout=o.reflowLargerGetLinesToRemove=void 0,o.reflowLargerGetLinesToRemove=function(u,l,a,h,p){for(var d=[],c=0;c<u.length-1;c++){var y=c,_=u.get(++y);if(_.isWrapped){for(var g=[u.get(c)];y<u.length&&_.isWrapped;)g.push(_),_=u.get(++y);if(h>=c&&h<y)c+=g.length-1;else{for(var m=0,f=s(g,m,l),v=1,Z=0;v<g.length;){var b=s(g,v,l),G=b-Z,S=a-f,C=Math.min(G,S);g[m].copyCellsFrom(g[v],Z,f,C,!1),(f+=C)===a&&(m++,f=0),(Z+=C)===b&&(v++,Z=0),f===0&&m!==0&&g[m-1].getWidth(a-1)===2&&(g[m].copyCellsFrom(g[m-1],a-1,f++,1,!1),g[m-1].setCell(a-1,p))}g[m].replaceCells(f,a,p);for(var R=0,Y=g.length-1;Y>0&&(Y>m||g[Y].getTrimmedLength()===0);Y--)R++;R>0&&(d.push(c+g.length-R),d.push(R)),c+=g.length-1}}}return d},o.reflowLargerCreateNewLayout=function(u,l){for(var a=[],h=0,p=l[h],d=0,c=0;c<u.length;c++)if(p===c){var y=l[++h];u.onDeleteEmitter.fire({index:c-d,amount:y}),c+=y-1,d+=y,p=l[++h]}else a.push(c);return{layout:a,countRemoved:d}},o.reflowLargerApplyNewLayout=function(u,l){for(var a=[],h=0;h<l.length;h++)a.push(u.get(l[h]));for(h=0;h<a.length;h++)u.set(h,a[h]);u.length=l.length},o.reflowSmallerGetNewLineLengths=function(u,l,a){for(var h=[],p=u.map(function(f,v){return s(u,v,l)}).reduce(function(f,v){return f+v}),d=0,c=0,y=0;y<p;){if(p-y<a){h.push(p-y);break}d+=a;var _=s(u,c,l);d>_&&(d-=_,c++);var g=u[c].getWidth(d-1)===2;g&&d--;var m=g?a-1:a;h.push(m),y+=m}return h},o.getWrappedLineTrimmedLength=s},5295:function(n,o,s){var u,l=this&&this.__extends||(u=function(d,c){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,_){y.__proto__=_}||function(y,_){for(var g in _)Object.prototype.hasOwnProperty.call(_,g)&&(y[g]=_[g])},u(d,c)},function(d,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function y(){this.constructor=d}u(d,c),d.prototype=c===null?Object.create(c):(y.prototype=c.prototype,new y)});Object.defineProperty(o,"__esModule",{value:!0}),o.BufferSet=void 0;var a=s(9092),h=s(8460),p=function(d){function c(y,_){var g=d.call(this)||this;return g._optionsService=y,g._bufferService=_,g._onBufferActivate=g.register(new h.EventEmitter),g.reset(),g}return l(c,d),Object.defineProperty(c.prototype,"onBufferActivate",{get:function(){return this._onBufferActivate.event},enumerable:!1,configurable:!0}),c.prototype.reset=function(){this._normal=new a.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new a.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()},Object.defineProperty(c.prototype,"alt",{get:function(){return this._alt},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"active",{get:function(){return this._activeBuffer},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"normal",{get:function(){return this._normal},enumerable:!1,configurable:!0}),c.prototype.activateNormalBuffer=function(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))},c.prototype.activateAltBuffer=function(y){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(y),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))},c.prototype.resize=function(y,_){this._normal.resize(y,_),this._alt.resize(y,_)},c.prototype.setupTabStops=function(y){this._normal.setupTabStops(y),this._alt.setupTabStops(y)},c}(s(844).Disposable);o.BufferSet=p},511:function(n,o,s){var u,l=this&&this.__extends||(u=function(c,y){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,g){_.__proto__=g}||function(_,g){for(var m in g)Object.prototype.hasOwnProperty.call(g,m)&&(_[m]=g[m])},u(c,y)},function(c,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");function _(){this.constructor=c}u(c,y),c.prototype=y===null?Object.create(y):(_.prototype=y.prototype,new _)});Object.defineProperty(o,"__esModule",{value:!0}),o.CellData=void 0;var a=s(482),h=s(643),p=s(3734),d=function(c){function y(){var _=c!==null&&c.apply(this,arguments)||this;return _.content=0,_.fg=0,_.bg=0,_.extended=new p.ExtendedAttrs,_.combinedData="",_}return l(y,c),y.fromCharData=function(_){var g=new y;return g.setFromCharData(_),g},y.prototype.isCombined=function(){return 2097152&this.content},y.prototype.getWidth=function(){return this.content>>22},y.prototype.getChars=function(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,a.stringFromCodePoint)(2097151&this.content):""},y.prototype.getCode=function(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content},y.prototype.setFromCharData=function(_){this.fg=_[h.CHAR_DATA_ATTR_INDEX],this.bg=0;var g=!1;if(_[h.CHAR_DATA_CHAR_INDEX].length>2)g=!0;else if(_[h.CHAR_DATA_CHAR_INDEX].length===2){var m=_[h.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=m&&m<=56319){var f=_[h.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=f&&f<=57343?this.content=1024*(m-55296)+f-56320+65536|_[h.CHAR_DATA_WIDTH_INDEX]<<22:g=!0}else g=!0}else this.content=_[h.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|_[h.CHAR_DATA_WIDTH_INDEX]<<22;g&&(this.combinedData=_[h.CHAR_DATA_CHAR_INDEX],this.content=2097152|_[h.CHAR_DATA_WIDTH_INDEX]<<22)},y.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},y}(p.AttributeData);o.CellData=d},643:(n,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.WHITESPACE_CELL_CODE=o.WHITESPACE_CELL_WIDTH=o.WHITESPACE_CELL_CHAR=o.NULL_CELL_CODE=o.NULL_CELL_WIDTH=o.NULL_CELL_CHAR=o.CHAR_DATA_CODE_INDEX=o.CHAR_DATA_WIDTH_INDEX=o.CHAR_DATA_CHAR_INDEX=o.CHAR_DATA_ATTR_INDEX=o.DEFAULT_ATTR=o.DEFAULT_COLOR=void 0,o.DEFAULT_COLOR=256,o.DEFAULT_ATTR=256|o.DEFAULT_COLOR<<9,o.CHAR_DATA_ATTR_INDEX=0,o.CHAR_DATA_CHAR_INDEX=1,o.CHAR_DATA_WIDTH_INDEX=2,o.CHAR_DATA_CODE_INDEX=3,o.NULL_CELL_CHAR="",o.NULL_CELL_WIDTH=1,o.NULL_CELL_CODE=0,o.WHITESPACE_CELL_CHAR=" ",o.WHITESPACE_CELL_WIDTH=1,o.WHITESPACE_CELL_CODE=32},4863:function(n,o,s){var u,l=this&&this.__extends||(u=function(p,d){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,y){c.__proto__=y}||function(c,y){for(var _ in y)Object.prototype.hasOwnProperty.call(y,_)&&(c[_]=y[_])},u(p,d)},function(p,d){if(typeof d!="function"&&d!==null)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");function c(){this.constructor=p}u(p,d),p.prototype=d===null?Object.create(d):(c.prototype=d.prototype,new c)});Object.defineProperty(o,"__esModule",{value:!0}),o.Marker=void 0;var a=s(8460),h=function(p){function d(c){var y=p.call(this)||this;return y.line=c,y._id=d._nextId++,y.isDisposed=!1,y._onDispose=new a.EventEmitter,y}return l(d,p),Object.defineProperty(d.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"onDispose",{get:function(){return this._onDispose.event},enumerable:!1,configurable:!0}),d.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),p.prototype.dispose.call(this))},d._nextId=1,d}(s(844).Disposable);o.Marker=h},7116:(n,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.DEFAULT_CHARSET=o.CHARSETS=void 0,o.CHARSETS={},o.DEFAULT_CHARSET=o.CHARSETS.B,o.CHARSETS[0]={"`":"",a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"",m:"",n:"",o:"",p:"",q:"",r:"",s:"",t:"",u:"",v:"",w:"",x:"",y:"",z:"","{":"","|":"","}":"","~":""},o.CHARSETS.A={"#":""},o.CHARSETS.B=void 0,o.CHARSETS[4]={"#":"","@":"","[":"ij","\\":"","]":"|","{":"","|":"f","}":"","~":""},o.CHARSETS.C=o.CHARSETS[5]={"[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},o.CHARSETS.R={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},o.CHARSETS.Q={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},o.CHARSETS.K={"@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},o.CHARSETS.Y={"#":"","@":"","[":"","\\":"","]":"","`":"","{":"","|":"","}":"","~":""},o.CHARSETS.E=o.CHARSETS[6]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},o.CHARSETS.Z={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":""},o.CHARSETS.H=o.CHARSETS[7]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},o.CHARSETS["="]={"#":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":""}},2584:(n,o)=>{var s,u;Object.defineProperty(o,"__esModule",{value:!0}),o.C1_ESCAPED=o.C1=o.C0=void 0,function(l){l.NUL="\0",l.SOH="",l.STX="",l.ETX="",l.EOT="",l.ENQ="",l.ACK="",l.BEL="\x07",l.BS="\b",l.HT="	",l.LF=`
`,l.VT="\v",l.FF="\f",l.CR="\r",l.SO="",l.SI="",l.DLE="",l.DC1="",l.DC2="",l.DC3="",l.DC4="",l.NAK="",l.SYN="",l.ETB="",l.CAN="",l.EM="",l.SUB="",l.ESC="\x1B",l.FS="",l.GS="",l.RS="",l.US="",l.SP=" ",l.DEL=""}(s=o.C0||(o.C0={})),(u=o.C1||(o.C1={})).PAD="",u.HOP="",u.BPH="",u.NBH="",u.IND="",u.NEL="",u.SSA="",u.ESA="",u.HTS="",u.HTJ="",u.VTS="",u.PLD="",u.PLU="",u.RI="",u.SS2="",u.SS3="",u.DCS="",u.PU1="",u.PU2="",u.STS="",u.CCH="",u.MW="",u.SPA="",u.EPA="",u.SOS="",u.SGCI="",u.SCI="",u.CSI="",u.ST="",u.OSC="",u.PM="",u.APC="",(o.C1_ESCAPED||(o.C1_ESCAPED={})).ST=s.ESC+"\\"},7399:(n,o,s)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.evaluateKeyboardEvent=void 0;var u=s(2584),l={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};o.evaluateKeyboardEvent=function(a,h,p,d){var c={type:0,cancel:!1,key:void 0},y=(a.shiftKey?1:0)|(a.altKey?2:0)|(a.ctrlKey?4:0)|(a.metaKey?8:0);switch(a.keyCode){case 0:a.key==="UIKeyInputUpArrow"?c.key=h?u.C0.ESC+"OA":u.C0.ESC+"[A":a.key==="UIKeyInputLeftArrow"?c.key=h?u.C0.ESC+"OD":u.C0.ESC+"[D":a.key==="UIKeyInputRightArrow"?c.key=h?u.C0.ESC+"OC":u.C0.ESC+"[C":a.key==="UIKeyInputDownArrow"&&(c.key=h?u.C0.ESC+"OB":u.C0.ESC+"[B");break;case 8:if(a.shiftKey){c.key=u.C0.BS;break}if(a.altKey){c.key=u.C0.ESC+u.C0.DEL;break}c.key=u.C0.DEL;break;case 9:if(a.shiftKey){c.key=u.C0.ESC+"[Z";break}c.key=u.C0.HT,c.cancel=!0;break;case 13:c.key=a.altKey?u.C0.ESC+u.C0.CR:u.C0.CR,c.cancel=!0;break;case 27:c.key=u.C0.ESC,a.altKey&&(c.key=u.C0.ESC+u.C0.ESC),c.cancel=!0;break;case 37:if(a.metaKey)break;y?(c.key=u.C0.ESC+"[1;"+(y+1)+"D",c.key===u.C0.ESC+"[1;3D"&&(c.key=u.C0.ESC+(p?"b":"[1;5D"))):c.key=h?u.C0.ESC+"OD":u.C0.ESC+"[D";break;case 39:if(a.metaKey)break;y?(c.key=u.C0.ESC+"[1;"+(y+1)+"C",c.key===u.C0.ESC+"[1;3C"&&(c.key=u.C0.ESC+(p?"f":"[1;5C"))):c.key=h?u.C0.ESC+"OC":u.C0.ESC+"[C";break;case 38:if(a.metaKey)break;y?(c.key=u.C0.ESC+"[1;"+(y+1)+"A",p||c.key!==u.C0.ESC+"[1;3A"||(c.key=u.C0.ESC+"[1;5A")):c.key=h?u.C0.ESC+"OA":u.C0.ESC+"[A";break;case 40:if(a.metaKey)break;y?(c.key=u.C0.ESC+"[1;"+(y+1)+"B",p||c.key!==u.C0.ESC+"[1;3B"||(c.key=u.C0.ESC+"[1;5B")):c.key=h?u.C0.ESC+"OB":u.C0.ESC+"[B";break;case 45:a.shiftKey||a.ctrlKey||(c.key=u.C0.ESC+"[2~");break;case 46:c.key=y?u.C0.ESC+"[3;"+(y+1)+"~":u.C0.ESC+"[3~";break;case 36:c.key=y?u.C0.ESC+"[1;"+(y+1)+"H":h?u.C0.ESC+"OH":u.C0.ESC+"[H";break;case 35:c.key=y?u.C0.ESC+"[1;"+(y+1)+"F":h?u.C0.ESC+"OF":u.C0.ESC+"[F";break;case 33:a.shiftKey?c.type=2:a.ctrlKey?c.key=u.C0.ESC+"[5;"+(y+1)+"~":c.key=u.C0.ESC+"[5~";break;case 34:a.shiftKey?c.type=3:a.ctrlKey?c.key=u.C0.ESC+"[6;"+(y+1)+"~":c.key=u.C0.ESC+"[6~";break;case 112:c.key=y?u.C0.ESC+"[1;"+(y+1)+"P":u.C0.ESC+"OP";break;case 113:c.key=y?u.C0.ESC+"[1;"+(y+1)+"Q":u.C0.ESC+"OQ";break;case 114:c.key=y?u.C0.ESC+"[1;"+(y+1)+"R":u.C0.ESC+"OR";break;case 115:c.key=y?u.C0.ESC+"[1;"+(y+1)+"S":u.C0.ESC+"OS";break;case 116:c.key=y?u.C0.ESC+"[15;"+(y+1)+"~":u.C0.ESC+"[15~";break;case 117:c.key=y?u.C0.ESC+"[17;"+(y+1)+"~":u.C0.ESC+"[17~";break;case 118:c.key=y?u.C0.ESC+"[18;"+(y+1)+"~":u.C0.ESC+"[18~";break;case 119:c.key=y?u.C0.ESC+"[19;"+(y+1)+"~":u.C0.ESC+"[19~";break;case 120:c.key=y?u.C0.ESC+"[20;"+(y+1)+"~":u.C0.ESC+"[20~";break;case 121:c.key=y?u.C0.ESC+"[21;"+(y+1)+"~":u.C0.ESC+"[21~";break;case 122:c.key=y?u.C0.ESC+"[23;"+(y+1)+"~":u.C0.ESC+"[23~";break;case 123:c.key=y?u.C0.ESC+"[24;"+(y+1)+"~":u.C0.ESC+"[24~";break;default:if(!a.ctrlKey||a.shiftKey||a.altKey||a.metaKey)if(p&&!d||!a.altKey||a.metaKey)!p||a.altKey||a.ctrlKey||a.shiftKey||!a.metaKey?a.key&&!a.ctrlKey&&!a.altKey&&!a.metaKey&&a.keyCode>=48&&a.key.length===1?c.key=a.key:a.key&&a.ctrlKey&&(a.key==="_"&&(c.key=u.C0.US),a.key==="@"&&(c.key=u.C0.NUL)):a.keyCode===65&&(c.type=1);else{var _=l[a.keyCode],g=_==null?void 0:_[a.shiftKey?1:0];if(g)c.key=u.C0.ESC+g;else if(a.keyCode>=65&&a.keyCode<=90){var m=a.ctrlKey?a.keyCode-64:a.keyCode+32,f=String.fromCharCode(m);a.shiftKey&&(f=f.toUpperCase()),c.key=u.C0.ESC+f}else a.key==="Dead"&&a.code.startsWith("Key")&&(f=a.code.slice(3,4),a.shiftKey||(f=f.toLowerCase()),c.key=u.C0.ESC+f,c.cancel=!0)}else a.keyCode>=65&&a.keyCode<=90?c.key=String.fromCharCode(a.keyCode-64):a.keyCode===32?c.key=u.C0.NUL:a.keyCode>=51&&a.keyCode<=55?c.key=String.fromCharCode(a.keyCode-51+27):a.keyCode===56?c.key=u.C0.DEL:a.keyCode===219?c.key=u.C0.ESC:a.keyCode===220?c.key=u.C0.FS:a.keyCode===221&&(c.key=u.C0.GS)}return c}},482:(n,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.Utf8ToUtf32=o.StringToUtf32=o.utf32ToString=o.stringFromCodePoint=void 0,o.stringFromCodePoint=function(l){return l>65535?(l-=65536,String.fromCharCode(55296+(l>>10))+String.fromCharCode(l%1024+56320)):String.fromCharCode(l)},o.utf32ToString=function(l,a,h){a===void 0&&(a=0),h===void 0&&(h=l.length);for(var p="",d=a;d<h;++d){var c=l[d];c>65535?(c-=65536,p+=String.fromCharCode(55296+(c>>10))+String.fromCharCode(c%1024+56320)):p+=String.fromCharCode(c)}return p};var s=function(){function l(){this._interim=0}return l.prototype.clear=function(){this._interim=0},l.prototype.decode=function(a,h){var p=a.length;if(!p)return 0;var d=0,c=0;this._interim&&(56320<=(g=a.charCodeAt(c++))&&g<=57343?h[d++]=1024*(this._interim-55296)+g-56320+65536:(h[d++]=this._interim,h[d++]=g),this._interim=0);for(var y=c;y<p;++y){var _=a.charCodeAt(y);if(55296<=_&&_<=56319){if(++y>=p)return this._interim=_,d;var g;56320<=(g=a.charCodeAt(y))&&g<=57343?h[d++]=1024*(_-55296)+g-56320+65536:(h[d++]=_,h[d++]=g)}else _!==65279&&(h[d++]=_)}return d},l}();o.StringToUtf32=s;var u=function(){function l(){this.interim=new Uint8Array(3)}return l.prototype.clear=function(){this.interim.fill(0)},l.prototype.decode=function(a,h){var p=a.length;if(!p)return 0;var d,c,y,_,g=0,m=0,f=0;if(this.interim[0]){var v=!1,Z=this.interim[0];Z&=(224&Z)==192?31:(240&Z)==224?15:7;for(var b=0,G=void 0;(G=63&this.interim[++b])&&b<4;)Z<<=6,Z|=G;for(var S=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,C=S-b;f<C;){if(f>=p)return 0;if((192&(G=a[f++]))!=128){f--,v=!0;break}this.interim[b++]=G,Z<<=6,Z|=63&G}v||(S===2?Z<128?f--:h[g++]=Z:S===3?Z<2048||Z>=55296&&Z<=57343||Z===65279||(h[g++]=Z):Z<65536||Z>1114111||(h[g++]=Z)),this.interim.fill(0)}for(var R=p-4,Y=f;Y<p;){for(;!(!(Y<R)||128&(d=a[Y])||128&(c=a[Y+1])||128&(y=a[Y+2])||128&(_=a[Y+3]));)h[g++]=d,h[g++]=c,h[g++]=y,h[g++]=_,Y+=4;if((d=a[Y++])<128)h[g++]=d;else if((224&d)==192){if(Y>=p)return this.interim[0]=d,g;if((192&(c=a[Y++]))!=128){Y--;continue}if((m=(31&d)<<6|63&c)<128){Y--;continue}h[g++]=m}else if((240&d)==224){if(Y>=p)return this.interim[0]=d,g;if((192&(c=a[Y++]))!=128){Y--;continue}if(Y>=p)return this.interim[0]=d,this.interim[1]=c,g;if((192&(y=a[Y++]))!=128){Y--;continue}if((m=(15&d)<<12|(63&c)<<6|63&y)<2048||m>=55296&&m<=57343||m===65279)continue;h[g++]=m}else if((248&d)==240){if(Y>=p)return this.interim[0]=d,g;if((192&(c=a[Y++]))!=128){Y--;continue}if(Y>=p)return this.interim[0]=d,this.interim[1]=c,g;if((192&(y=a[Y++]))!=128){Y--;continue}if(Y>=p)return this.interim[0]=d,this.interim[1]=c,this.interim[2]=y,g;if((192&(_=a[Y++]))!=128){Y--;continue}if((m=(7&d)<<18|(63&c)<<12|(63&y)<<6|63&_)<65536||m>1114111)continue;h[g++]=m}}return g},l}();o.Utf8ToUtf32=u},225:(n,o,s)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.UnicodeV6=void 0;var u,l=s(8273),a=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],h=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],p=function(){function d(){if(this.version="6",!u){u=new Uint8Array(65536),(0,l.fill)(u,1),u[0]=0,(0,l.fill)(u,0,1,32),(0,l.fill)(u,0,127,160),(0,l.fill)(u,2,4352,4448),u[9001]=2,u[9002]=2,(0,l.fill)(u,2,11904,42192),u[12351]=1,(0,l.fill)(u,2,44032,55204),(0,l.fill)(u,2,63744,64256),(0,l.fill)(u,2,65040,65050),(0,l.fill)(u,2,65072,65136),(0,l.fill)(u,2,65280,65377),(0,l.fill)(u,2,65504,65511);for(var c=0;c<a.length;++c)(0,l.fill)(u,0,a[c][0],a[c][1]+1)}}return d.prototype.wcwidth=function(c){return c<32?0:c<127?1:c<65536?u[c]:function(y,_){var g,m=0,f=_.length-1;if(y<_[0][0]||y>_[f][1])return!1;for(;f>=m;)if(y>_[g=m+f>>1][1])m=g+1;else{if(!(y<_[g][0]))return!0;f=g-1}return!1}(c,h)?0:c>=131072&&c<=196605||c>=196608&&c<=262141?2:1},d}();o.UnicodeV6=p},5981:(n,o,s)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.WriteBuffer=void 0;var u=s(8460),l=typeof queueMicrotask>"u"?function(h){Promise.resolve().then(h)}:queueMicrotask,a=function(){function h(p){this._action=p,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._onWriteParsed=new u.EventEmitter}return Object.defineProperty(h.prototype,"onWriteParsed",{get:function(){return this._onWriteParsed.event},enumerable:!1,configurable:!0}),h.prototype.writeSync=function(p,d){if(d!==void 0&&this._syncCalls>d)this._syncCalls=0;else if(this._pendingData+=p.length,this._writeBuffer.push(p),this._callbacks.push(void 0),this._syncCalls++,!this._isSyncWriting){var c;for(this._isSyncWriting=!0;c=this._writeBuffer.shift();){this._action(c);var y=this._callbacks.shift();y&&y()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}},h.prototype.write=function(p,d){var c=this;if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");this._writeBuffer.length||(this._bufferOffset=0,setTimeout(function(){return c._innerWrite()})),this._pendingData+=p.length,this._writeBuffer.push(p),this._callbacks.push(d)},h.prototype._innerWrite=function(p,d){var c=this;p===void 0&&(p=0),d===void 0&&(d=!0);for(var y=p||Date.now();this._writeBuffer.length>this._bufferOffset;){var _=this._writeBuffer[this._bufferOffset],g=this._action(_,d);if(g)return void g.catch(function(f){return l(function(){throw f}),Promise.resolve(!1)}).then(function(f){return Date.now()-y>=12?setTimeout(function(){return c._innerWrite(0,f)}):c._innerWrite(y,f)});var m=this._callbacks[this._bufferOffset];if(m&&m(),this._bufferOffset++,this._pendingData-=_.length,Date.now()-y>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(function(){return c._innerWrite()})):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()},h}();o.WriteBuffer=a},5941:function(n,o){var s=this&&this.__read||function(h,p){var d=typeof Symbol=="function"&&h[Symbol.iterator];if(!d)return h;var c,y,_=d.call(h),g=[];try{for(;(p===void 0||p-- >0)&&!(c=_.next()).done;)g.push(c.value)}catch(m){y={error:m}}finally{try{c&&!c.done&&(d=_.return)&&d.call(_)}finally{if(y)throw y.error}}return g};Object.defineProperty(o,"__esModule",{value:!0}),o.toRgbString=o.parseColor=void 0;var u=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,l=/^[\da-f]+$/;function a(h,p){var d=h.toString(16),c=d.length<2?"0"+d:d;switch(p){case 4:return d[0];case 8:return c;case 12:return(c+c).slice(0,3);default:return c+c}}o.parseColor=function(h){if(h){var p=h.toLowerCase();if(p.indexOf("rgb:")===0){p=p.slice(4);var d=u.exec(p);if(d){var c=d[1]?15:d[4]?255:d[7]?4095:65535;return[Math.round(parseInt(d[1]||d[4]||d[7]||d[10],16)/c*255),Math.round(parseInt(d[2]||d[5]||d[8]||d[11],16)/c*255),Math.round(parseInt(d[3]||d[6]||d[9]||d[12],16)/c*255)]}}else if(p.indexOf("#")===0&&(p=p.slice(1),l.exec(p)&&[3,6,9,12].includes(p.length))){for(var y=p.length/3,_=[0,0,0],g=0;g<3;++g){var m=parseInt(p.slice(y*g,y*g+y),16);_[g]=y===1?m<<4:y===2?m:y===3?m>>4:m>>8}return _}}},o.toRgbString=function(h,p){p===void 0&&(p=16);var d=s(h,3),c=d[0],y=d[1],_=d[2];return"rgb:"+a(c,p)+"/"+a(y,p)+"/"+a(_,p)}},5770:(n,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.PAYLOAD_LIMIT=void 0,o.PAYLOAD_LIMIT=1e7},6351:(n,o,s)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.DcsHandler=o.DcsParser=void 0;var u=s(482),l=s(8742),a=s(5770),h=[],p=function(){function y(){this._handlers=Object.create(null),this._active=h,this._ident=0,this._handlerFb=function(){},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}return y.prototype.dispose=function(){this._handlers=Object.create(null),this._handlerFb=function(){},this._active=h},y.prototype.registerHandler=function(_,g){this._handlers[_]===void 0&&(this._handlers[_]=[]);var m=this._handlers[_];return m.push(g),{dispose:function(){var f=m.indexOf(g);f!==-1&&m.splice(f,1)}}},y.prototype.clearHandler=function(_){this._handlers[_]&&delete this._handlers[_]},y.prototype.setHandlerFallback=function(_){this._handlerFb=_},y.prototype.reset=function(){if(this._active.length)for(var _=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;_>=0;--_)this._active[_].unhook(!1);this._stack.paused=!1,this._active=h,this._ident=0},y.prototype.hook=function(_,g){if(this.reset(),this._ident=_,this._active=this._handlers[_]||h,this._active.length)for(var m=this._active.length-1;m>=0;m--)this._active[m].hook(g);else this._handlerFb(this._ident,"HOOK",g)},y.prototype.put=function(_,g,m){if(this._active.length)for(var f=this._active.length-1;f>=0;f--)this._active[f].put(_,g,m);else this._handlerFb(this._ident,"PUT",(0,u.utf32ToString)(_,g,m))},y.prototype.unhook=function(_,g){if(g===void 0&&(g=!0),this._active.length){var m=!1,f=this._active.length-1,v=!1;if(this._stack.paused&&(f=this._stack.loopPosition-1,m=g,v=this._stack.fallThrough,this._stack.paused=!1),!v&&m===!1){for(;f>=0&&(m=this._active[f].unhook(_))!==!0;f--)if(m instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=f,this._stack.fallThrough=!1,m;f--}for(;f>=0;f--)if((m=this._active[f].unhook(!1))instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=f,this._stack.fallThrough=!0,m}else this._handlerFb(this._ident,"UNHOOK",_);this._active=h,this._ident=0},y}();o.DcsParser=p;var d=new l.Params;d.addParam(0);var c=function(){function y(_){this._handler=_,this._data="",this._params=d,this._hitLimit=!1}return y.prototype.hook=function(_){this._params=_.length>1||_.params[0]?_.clone():d,this._data="",this._hitLimit=!1},y.prototype.put=function(_,g,m){this._hitLimit||(this._data+=(0,u.utf32ToString)(_,g,m),this._data.length>a.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))},y.prototype.unhook=function(_){var g=this,m=!1;if(this._hitLimit)m=!1;else if(_&&(m=this._handler(this._data,this._params))instanceof Promise)return m.then(function(f){return g._params=d,g._data="",g._hitLimit=!1,f});return this._params=d,this._data="",this._hitLimit=!1,m},y}();o.DcsHandler=c},2015:function(n,o,s){var u,l=this&&this.__extends||(u=function(m,f){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,Z){v.__proto__=Z}||function(v,Z){for(var b in Z)Object.prototype.hasOwnProperty.call(Z,b)&&(v[b]=Z[b])},u(m,f)},function(m,f){if(typeof f!="function"&&f!==null)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");function v(){this.constructor=m}u(m,f),m.prototype=f===null?Object.create(f):(v.prototype=f.prototype,new v)});Object.defineProperty(o,"__esModule",{value:!0}),o.EscapeSequenceParser=o.VT500_TRANSITION_TABLE=o.TransitionTable=void 0;var a=s(844),h=s(8273),p=s(8742),d=s(6242),c=s(6351),y=function(){function m(f){this.table=new Uint8Array(f)}return m.prototype.setDefault=function(f,v){(0,h.fill)(this.table,f<<4|v)},m.prototype.add=function(f,v,Z,b){this.table[v<<8|f]=Z<<4|b},m.prototype.addMany=function(f,v,Z,b){for(var G=0;G<f.length;G++)this.table[v<<8|f[G]]=Z<<4|b},m}();o.TransitionTable=y;var _=160;o.VT500_TRANSITION_TABLE=function(){var m=new y(4095),f=Array.apply(null,Array(256)).map(function(C,R){return R}),v=function(C,R){return f.slice(C,R)},Z=v(32,127),b=v(0,24);b.push(25),b.push.apply(b,v(28,32));var G,S=v(0,14);for(G in m.setDefault(1,0),m.addMany(Z,0,2,0),S)m.addMany([24,26,153,154],G,3,0),m.addMany(v(128,144),G,3,0),m.addMany(v(144,152),G,3,0),m.add(156,G,0,0),m.add(27,G,11,1),m.add(157,G,4,8),m.addMany([152,158,159],G,0,7),m.add(155,G,11,3),m.add(144,G,11,9);return m.addMany(b,0,3,0),m.addMany(b,1,3,1),m.add(127,1,0,1),m.addMany(b,8,0,8),m.addMany(b,3,3,3),m.add(127,3,0,3),m.addMany(b,4,3,4),m.add(127,4,0,4),m.addMany(b,6,3,6),m.addMany(b,5,3,5),m.add(127,5,0,5),m.addMany(b,2,3,2),m.add(127,2,0,2),m.add(93,1,4,8),m.addMany(Z,8,5,8),m.add(127,8,5,8),m.addMany([156,27,24,26,7],8,6,0),m.addMany(v(28,32),8,0,8),m.addMany([88,94,95],1,0,7),m.addMany(Z,7,0,7),m.addMany(b,7,0,7),m.add(156,7,0,0),m.add(127,7,0,7),m.add(91,1,11,3),m.addMany(v(64,127),3,7,0),m.addMany(v(48,60),3,8,4),m.addMany([60,61,62,63],3,9,4),m.addMany(v(48,60),4,8,4),m.addMany(v(64,127),4,7,0),m.addMany([60,61,62,63],4,0,6),m.addMany(v(32,64),6,0,6),m.add(127,6,0,6),m.addMany(v(64,127),6,0,0),m.addMany(v(32,48),3,9,5),m.addMany(v(32,48),5,9,5),m.addMany(v(48,64),5,0,6),m.addMany(v(64,127),5,7,0),m.addMany(v(32,48),4,9,5),m.addMany(v(32,48),1,9,2),m.addMany(v(32,48),2,9,2),m.addMany(v(48,127),2,10,0),m.addMany(v(48,80),1,10,0),m.addMany(v(81,88),1,10,0),m.addMany([89,90,92],1,10,0),m.addMany(v(96,127),1,10,0),m.add(80,1,11,9),m.addMany(b,9,0,9),m.add(127,9,0,9),m.addMany(v(28,32),9,0,9),m.addMany(v(32,48),9,9,12),m.addMany(v(48,60),9,8,10),m.addMany([60,61,62,63],9,9,10),m.addMany(b,11,0,11),m.addMany(v(32,128),11,0,11),m.addMany(v(28,32),11,0,11),m.addMany(b,10,0,10),m.add(127,10,0,10),m.addMany(v(28,32),10,0,10),m.addMany(v(48,60),10,8,10),m.addMany([60,61,62,63],10,0,11),m.addMany(v(32,48),10,9,12),m.addMany(b,12,0,12),m.add(127,12,0,12),m.addMany(v(28,32),12,0,12),m.addMany(v(32,48),12,9,12),m.addMany(v(48,64),12,0,11),m.addMany(v(64,127),12,12,13),m.addMany(v(64,127),10,12,13),m.addMany(v(64,127),9,12,13),m.addMany(b,13,13,13),m.addMany(Z,13,13,13),m.add(127,13,0,13),m.addMany([27,156,24,26],13,14,0),m.add(_,0,2,0),m.add(_,8,5,8),m.add(_,6,0,6),m.add(_,11,0,11),m.add(_,13,13,13),m}();var g=function(m){function f(v){v===void 0&&(v=o.VT500_TRANSITION_TABLE);var Z=m.call(this)||this;return Z._transitions=v,Z._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},Z.initialState=0,Z.currentState=Z.initialState,Z._params=new p.Params,Z._params.addParam(0),Z._collect=0,Z.precedingCodepoint=0,Z._printHandlerFb=function(b,G,S){},Z._executeHandlerFb=function(b){},Z._csiHandlerFb=function(b,G){},Z._escHandlerFb=function(b){},Z._errorHandlerFb=function(b){return b},Z._printHandler=Z._printHandlerFb,Z._executeHandlers=Object.create(null),Z._csiHandlers=Object.create(null),Z._escHandlers=Object.create(null),Z._oscParser=new d.OscParser,Z._dcsParser=new c.DcsParser,Z._errorHandler=Z._errorHandlerFb,Z.registerEscHandler({final:"\\"},function(){return!0}),Z}return l(f,m),f.prototype._identifier=function(v,Z){Z===void 0&&(Z=[64,126]);var b=0;if(v.prefix){if(v.prefix.length>1)throw new Error("only one byte as prefix supported");if((b=v.prefix.charCodeAt(0))&&60>b||b>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(v.intermediates){if(v.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(var G=0;G<v.intermediates.length;++G){var S=v.intermediates.charCodeAt(G);if(32>S||S>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");b<<=8,b|=S}}if(v.final.length!==1)throw new Error("final must be a single byte");var C=v.final.charCodeAt(0);if(Z[0]>C||C>Z[1])throw new Error("final must be in range "+Z[0]+" .. "+Z[1]);return(b<<=8)|C},f.prototype.identToString=function(v){for(var Z=[];v;)Z.push(String.fromCharCode(255&v)),v>>=8;return Z.reverse().join("")},f.prototype.dispose=function(){this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null),this._oscParser.dispose(),this._dcsParser.dispose()},f.prototype.setPrintHandler=function(v){this._printHandler=v},f.prototype.clearPrintHandler=function(){this._printHandler=this._printHandlerFb},f.prototype.registerEscHandler=function(v,Z){var b=this._identifier(v,[48,126]);this._escHandlers[b]===void 0&&(this._escHandlers[b]=[]);var G=this._escHandlers[b];return G.push(Z),{dispose:function(){var S=G.indexOf(Z);S!==-1&&G.splice(S,1)}}},f.prototype.clearEscHandler=function(v){this._escHandlers[this._identifier(v,[48,126])]&&delete this._escHandlers[this._identifier(v,[48,126])]},f.prototype.setEscHandlerFallback=function(v){this._escHandlerFb=v},f.prototype.setExecuteHandler=function(v,Z){this._executeHandlers[v.charCodeAt(0)]=Z},f.prototype.clearExecuteHandler=function(v){this._executeHandlers[v.charCodeAt(0)]&&delete this._executeHandlers[v.charCodeAt(0)]},f.prototype.setExecuteHandlerFallback=function(v){this._executeHandlerFb=v},f.prototype.registerCsiHandler=function(v,Z){var b=this._identifier(v);this._csiHandlers[b]===void 0&&(this._csiHandlers[b]=[]);var G=this._csiHandlers[b];return G.push(Z),{dispose:function(){var S=G.indexOf(Z);S!==-1&&G.splice(S,1)}}},f.prototype.clearCsiHandler=function(v){this._csiHandlers[this._identifier(v)]&&delete this._csiHandlers[this._identifier(v)]},f.prototype.setCsiHandlerFallback=function(v){this._csiHandlerFb=v},f.prototype.registerDcsHandler=function(v,Z){return this._dcsParser.registerHandler(this._identifier(v),Z)},f.prototype.clearDcsHandler=function(v){this._dcsParser.clearHandler(this._identifier(v))},f.prototype.setDcsHandlerFallback=function(v){this._dcsParser.setHandlerFallback(v)},f.prototype.registerOscHandler=function(v,Z){return this._oscParser.registerHandler(v,Z)},f.prototype.clearOscHandler=function(v){this._oscParser.clearHandler(v)},f.prototype.setOscHandlerFallback=function(v){this._oscParser.setHandlerFallback(v)},f.prototype.setErrorHandler=function(v){this._errorHandler=v},f.prototype.clearErrorHandler=function(){this._errorHandler=this._errorHandlerFb},f.prototype.reset=function(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])},f.prototype._preserveStack=function(v,Z,b,G,S){this._parseStack.state=v,this._parseStack.handlers=Z,this._parseStack.handlerPos=b,this._parseStack.transition=G,this._parseStack.chunkPos=S},f.prototype.parse=function(v,Z,b){var G,S=0,C=0,R=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,R=this._parseStack.chunkPos+1;else{if(b===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");var Y=this._parseStack.handlers,I=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(b===!1&&I>-1){for(;I>=0&&(G=Y[I](this._params))!==!0;I--)if(G instanceof Promise)return this._parseStack.handlerPos=I,G}this._parseStack.handlers=[];break;case 4:if(b===!1&&I>-1){for(;I>=0&&(G=Y[I]())!==!0;I--)if(G instanceof Promise)return this._parseStack.handlerPos=I,G}this._parseStack.handlers=[];break;case 6:if(S=v[this._parseStack.chunkPos],G=this._dcsParser.unhook(S!==24&&S!==26,b))return G;S===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(S=v[this._parseStack.chunkPos],G=this._oscParser.end(S!==24&&S!==26,b))return G;S===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,R=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(var w=R;w<Z;++w){switch(S=v[w],(C=this._transitions.table[this.currentState<<8|(S<160?S:_)])>>4){case 2:for(var F=w+1;;++F){if(F>=Z||(S=v[F])<32||S>126&&S<_){this._printHandler(v,w,F),w=F-1;break}if(++F>=Z||(S=v[F])<32||S>126&&S<_){this._printHandler(v,w,F),w=F-1;break}if(++F>=Z||(S=v[F])<32||S>126&&S<_){this._printHandler(v,w,F),w=F-1;break}if(++F>=Z||(S=v[F])<32||S>126&&S<_){this._printHandler(v,w,F),w=F-1;break}}break;case 3:this._executeHandlers[S]?this._executeHandlers[S]():this._executeHandlerFb(S),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:w,code:S,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:for(var E=(Y=this._csiHandlers[this._collect<<8|S])?Y.length-1:-1;E>=0&&(G=Y[E](this._params))!==!0;E--)if(G instanceof Promise)return this._preserveStack(3,Y,E,C,w),G;E<0&&this._csiHandlerFb(this._collect<<8|S,this._params),this.precedingCodepoint=0;break;case 8:do switch(S){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(S-48)}while(++w<Z&&(S=v[w])>47&&S<60);w--;break;case 9:this._collect<<=8,this._collect|=S;break;case 10:for(var N=this._escHandlers[this._collect<<8|S],L=N?N.length-1:-1;L>=0&&(G=N[L]())!==!0;L--)if(G instanceof Promise)return this._preserveStack(4,N,L,C,w),G;L<0&&this._escHandlerFb(this._collect<<8|S),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|S,this._params);break;case 13:for(var K=w+1;;++K)if(K>=Z||(S=v[K])===24||S===26||S===27||S>127&&S<_){this._dcsParser.put(v,w,K),w=K-1;break}break;case 14:if(G=this._dcsParser.unhook(S!==24&&S!==26))return this._preserveStack(6,[],0,C,w),G;S===27&&(C|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(var J=w+1;;J++)if(J>=Z||(S=v[J])<32||S>127&&S<_){this._oscParser.put(v,w,J),w=J-1;break}break;case 6:if(G=this._oscParser.end(S!==24&&S!==26))return this._preserveStack(5,[],0,C,w),G;S===27&&(C|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&C}},f}(a.Disposable);o.EscapeSequenceParser=g},6242:(n,o,s)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.OscHandler=o.OscParser=void 0;var u=s(5770),l=s(482),a=[],h=function(){function d(){this._state=0,this._active=a,this._id=-1,this._handlers=Object.create(null),this._handlerFb=function(){},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}return d.prototype.registerHandler=function(c,y){this._handlers[c]===void 0&&(this._handlers[c]=[]);var _=this._handlers[c];return _.push(y),{dispose:function(){var g=_.indexOf(y);g!==-1&&_.splice(g,1)}}},d.prototype.clearHandler=function(c){this._handlers[c]&&delete this._handlers[c]},d.prototype.setHandlerFallback=function(c){this._handlerFb=c},d.prototype.dispose=function(){this._handlers=Object.create(null),this._handlerFb=function(){},this._active=a},d.prototype.reset=function(){if(this._state===2)for(var c=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;c>=0;--c)this._active[c].end(!1);this._stack.paused=!1,this._active=a,this._id=-1,this._state=0},d.prototype._start=function(){if(this._active=this._handlers[this._id]||a,this._active.length)for(var c=this._active.length-1;c>=0;c--)this._active[c].start();else this._handlerFb(this._id,"START")},d.prototype._put=function(c,y,_){if(this._active.length)for(var g=this._active.length-1;g>=0;g--)this._active[g].put(c,y,_);else this._handlerFb(this._id,"PUT",(0,l.utf32ToString)(c,y,_))},d.prototype.start=function(){this.reset(),this._state=1},d.prototype.put=function(c,y,_){if(this._state!==3){if(this._state===1)for(;y<_;){var g=c[y++];if(g===59){this._state=2,this._start();break}if(g<48||57<g)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+g-48}this._state===2&&_-y>0&&this._put(c,y,_)}},d.prototype.end=function(c,y){if(y===void 0&&(y=!0),this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){var _=!1,g=this._active.length-1,m=!1;if(this._stack.paused&&(g=this._stack.loopPosition-1,_=y,m=this._stack.fallThrough,this._stack.paused=!1),!m&&_===!1){for(;g>=0&&(_=this._active[g].end(c))!==!0;g--)if(_ instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=g,this._stack.fallThrough=!1,_;g--}for(;g>=0;g--)if((_=this._active[g].end(!1))instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=g,this._stack.fallThrough=!0,_}else this._handlerFb(this._id,"END",c);this._active=a,this._id=-1,this._state=0}},d}();o.OscParser=h;var p=function(){function d(c){this._handler=c,this._data="",this._hitLimit=!1}return d.prototype.start=function(){this._data="",this._hitLimit=!1},d.prototype.put=function(c,y,_){this._hitLimit||(this._data+=(0,l.utf32ToString)(c,y,_),this._data.length>u.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))},d.prototype.end=function(c){var y=this,_=!1;if(this._hitLimit)_=!1;else if(c&&(_=this._handler(this._data))instanceof Promise)return _.then(function(g){return y._data="",y._hitLimit=!1,g});return this._data="",this._hitLimit=!1,_},d}();o.OscHandler=p},8742:(n,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.Params=void 0;var s=2147483647,u=function(){function l(a,h){if(a===void 0&&(a=32),h===void 0&&(h=32),this.maxLength=a,this.maxSubParamsLength=h,h>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(a),this.length=0,this._subParams=new Int32Array(h),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(a),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}return l.fromArray=function(a){var h=new l;if(!a.length)return h;for(var p=Array.isArray(a[0])?1:0;p<a.length;++p){var d=a[p];if(Array.isArray(d))for(var c=0;c<d.length;++c)h.addSubParam(d[c]);else h.addParam(d)}return h},l.prototype.clone=function(){var a=new l(this.maxLength,this.maxSubParamsLength);return a.params.set(this.params),a.length=this.length,a._subParams.set(this._subParams),a._subParamsLength=this._subParamsLength,a._subParamsIdx.set(this._subParamsIdx),a._rejectDigits=this._rejectDigits,a._rejectSubDigits=this._rejectSubDigits,a._digitIsSub=this._digitIsSub,a},l.prototype.toArray=function(){for(var a=[],h=0;h<this.length;++h){a.push(this.params[h]);var p=this._subParamsIdx[h]>>8,d=255&this._subParamsIdx[h];d-p>0&&a.push(Array.prototype.slice.call(this._subParams,p,d))}return a},l.prototype.reset=function(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1},l.prototype.addParam=function(a){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(a<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=a>s?s:a}},l.prototype.addSubParam=function(a){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(a<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=a>s?s:a,this._subParamsIdx[this.length-1]++}},l.prototype.hasSubParams=function(a){return(255&this._subParamsIdx[a])-(this._subParamsIdx[a]>>8)>0},l.prototype.getSubParams=function(a){var h=this._subParamsIdx[a]>>8,p=255&this._subParamsIdx[a];return p-h>0?this._subParams.subarray(h,p):null},l.prototype.getSubParamsAll=function(){for(var a={},h=0;h<this.length;++h){var p=this._subParamsIdx[h]>>8,d=255&this._subParamsIdx[h];d-p>0&&(a[h]=this._subParams.slice(p,d))}return a},l.prototype.addDigit=function(a){var h;if(!(this._rejectDigits||!(h=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)){var p=this._digitIsSub?this._subParams:this.params,d=p[h-1];p[h-1]=~d?Math.min(10*d+a,s):a}},l}();o.Params=u},5741:(n,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.AddonManager=void 0;var s=function(){function u(){this._addons=[]}return u.prototype.dispose=function(){for(var l=this._addons.length-1;l>=0;l--)this._addons[l].instance.dispose()},u.prototype.loadAddon=function(l,a){var h=this,p={instance:a,dispose:a.dispose,isDisposed:!1};this._addons.push(p),a.dispose=function(){return h._wrappedAddonDispose(p)},a.activate(l)},u.prototype._wrappedAddonDispose=function(l){if(!l.isDisposed){for(var a=-1,h=0;h<this._addons.length;h++)if(this._addons[h]===l){a=h;break}if(a===-1)throw new Error("Could not dispose an addon that has not been loaded");l.isDisposed=!0,l.dispose.apply(l.instance),this._addons.splice(a,1)}},u}();o.AddonManager=s},8771:(n,o,s)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.BufferApiView=void 0;var u=s(3785),l=s(511),a=function(){function h(p,d){this._buffer=p,this.type=d}return h.prototype.init=function(p){return this._buffer=p,this},Object.defineProperty(h.prototype,"cursorY",{get:function(){return this._buffer.y},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"cursorX",{get:function(){return this._buffer.x},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"viewportY",{get:function(){return this._buffer.ydisp},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"baseY",{get:function(){return this._buffer.ybase},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"length",{get:function(){return this._buffer.lines.length},enumerable:!1,configurable:!0}),h.prototype.getLine=function(p){var d=this._buffer.lines.get(p);if(d)return new u.BufferLineApiView(d)},h.prototype.getNullCell=function(){return new l.CellData},h}();o.BufferApiView=a},3785:(n,o,s)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.BufferLineApiView=void 0;var u=s(511),l=function(){function a(h){this._line=h}return Object.defineProperty(a.prototype,"isWrapped",{get:function(){return this._line.isWrapped},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"length",{get:function(){return this._line.length},enumerable:!1,configurable:!0}),a.prototype.getCell=function(h,p){if(!(h<0||h>=this._line.length))return p?(this._line.loadCell(h,p),p):this._line.loadCell(h,new u.CellData)},a.prototype.translateToString=function(h,p,d){return this._line.translateToString(h,p,d)},a}();o.BufferLineApiView=l},8285:(n,o,s)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.BufferNamespaceApi=void 0;var u=s(8771),l=s(8460),a=function(){function h(p){var d=this;this._core=p,this._onBufferChange=new l.EventEmitter,this._normal=new u.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new u.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(function(){return d._onBufferChange.fire(d.active)})}return Object.defineProperty(h.prototype,"onBufferChange",{get:function(){return this._onBufferChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"active",{get:function(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"normal",{get:function(){return this._normal.init(this._core.buffers.normal)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"alternate",{get:function(){return this._alternate.init(this._core.buffers.alt)},enumerable:!1,configurable:!0}),h}();o.BufferNamespaceApi=a},7975:(n,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.ParserApi=void 0;var s=function(){function u(l){this._core=l}return u.prototype.registerCsiHandler=function(l,a){return this._core.registerCsiHandler(l,function(h){return a(h.toArray())})},u.prototype.addCsiHandler=function(l,a){return this.registerCsiHandler(l,a)},u.prototype.registerDcsHandler=function(l,a){return this._core.registerDcsHandler(l,function(h,p){return a(h,p.toArray())})},u.prototype.addDcsHandler=function(l,a){return this.registerDcsHandler(l,a)},u.prototype.registerEscHandler=function(l,a){return this._core.registerEscHandler(l,a)},u.prototype.addEscHandler=function(l,a){return this.registerEscHandler(l,a)},u.prototype.registerOscHandler=function(l,a){return this._core.registerOscHandler(l,a)},u.prototype.addOscHandler=function(l,a){return this.registerOscHandler(l,a)},u}();o.ParserApi=s},7090:(n,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.UnicodeApi=void 0;var s=function(){function u(l){this._core=l}return u.prototype.register=function(l){this._core.unicodeService.register(l)},Object.defineProperty(u.prototype,"versions",{get:function(){return this._core.unicodeService.versions},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"activeVersion",{get:function(){return this._core.unicodeService.activeVersion},set:function(l){this._core.unicodeService.activeVersion=l},enumerable:!1,configurable:!0}),u}();o.UnicodeApi=s},744:function(n,o,s){var u,l=this&&this.__extends||(u=function(g,m){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,v){f.__proto__=v}||function(f,v){for(var Z in v)Object.prototype.hasOwnProperty.call(v,Z)&&(f[Z]=v[Z])},u(g,m)},function(g,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");function f(){this.constructor=g}u(g,m),g.prototype=m===null?Object.create(m):(f.prototype=m.prototype,new f)}),a=this&&this.__decorate||function(g,m,f,v){var Z,b=arguments.length,G=b<3?m:v===null?v=Object.getOwnPropertyDescriptor(m,f):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")G=Reflect.decorate(g,m,f,v);else for(var S=g.length-1;S>=0;S--)(Z=g[S])&&(G=(b<3?Z(G):b>3?Z(m,f,G):Z(m,f))||G);return b>3&&G&&Object.defineProperty(m,f,G),G},h=this&&this.__param||function(g,m){return function(f,v){m(f,v,g)}};Object.defineProperty(o,"__esModule",{value:!0}),o.BufferService=o.MINIMUM_ROWS=o.MINIMUM_COLS=void 0;var p=s(2585),d=s(5295),c=s(8460),y=s(844);o.MINIMUM_COLS=2,o.MINIMUM_ROWS=1;var _=function(g){function m(f){var v=g.call(this)||this;return v._optionsService=f,v.isUserScrolling=!1,v._onResize=new c.EventEmitter,v._onScroll=new c.EventEmitter,v.cols=Math.max(f.rawOptions.cols||0,o.MINIMUM_COLS),v.rows=Math.max(f.rawOptions.rows||0,o.MINIMUM_ROWS),v.buffers=new d.BufferSet(f,v),v}return l(m,g),Object.defineProperty(m.prototype,"onResize",{get:function(){return this._onResize.event},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"onScroll",{get:function(){return this._onScroll.event},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"buffer",{get:function(){return this.buffers.active},enumerable:!1,configurable:!0}),m.prototype.dispose=function(){g.prototype.dispose.call(this),this.buffers.dispose()},m.prototype.resize=function(f,v){this.cols=f,this.rows=v,this.buffers.resize(f,v),this.buffers.setupTabStops(this.cols),this._onResize.fire({cols:f,rows:v})},m.prototype.reset=function(){this.buffers.reset(),this.isUserScrolling=!1},m.prototype.scroll=function(f,v){v===void 0&&(v=!1);var Z,b=this.buffer;(Z=this._cachedBlankLine)&&Z.length===this.cols&&Z.getFg(0)===f.fg&&Z.getBg(0)===f.bg||(Z=b.getBlankLine(f,v),this._cachedBlankLine=Z),Z.isWrapped=v;var G=b.ybase+b.scrollTop,S=b.ybase+b.scrollBottom;if(b.scrollTop===0){var C=b.lines.isFull;S===b.lines.length-1?C?b.lines.recycle().copyFrom(Z):b.lines.push(Z.clone()):b.lines.splice(S+1,0,Z.clone()),C?this.isUserScrolling&&(b.ydisp=Math.max(b.ydisp-1,0)):(b.ybase++,this.isUserScrolling||b.ydisp++)}else{var R=S-G+1;b.lines.shiftElements(G+1,R-1,-1),b.lines.set(S,Z.clone())}this.isUserScrolling||(b.ydisp=b.ybase),this._onScroll.fire(b.ydisp)},m.prototype.scrollLines=function(f,v,Z){var b=this.buffer;if(f<0){if(b.ydisp===0)return;this.isUserScrolling=!0}else f+b.ydisp>=b.ybase&&(this.isUserScrolling=!1);var G=b.ydisp;b.ydisp=Math.max(Math.min(b.ydisp+f,b.ybase),0),G!==b.ydisp&&(v||this._onScroll.fire(b.ydisp))},m.prototype.scrollPages=function(f){this.scrollLines(f*(this.rows-1))},m.prototype.scrollToTop=function(){this.scrollLines(-this.buffer.ydisp)},m.prototype.scrollToBottom=function(){this.scrollLines(this.buffer.ybase-this.buffer.ydisp)},m.prototype.scrollToLine=function(f){var v=f-this.buffer.ydisp;v!==0&&this.scrollLines(v)},a([h(0,p.IOptionsService)],m)}(y.Disposable);o.BufferService=_},7994:(n,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.CharsetService=void 0;var s=function(){function u(){this.glevel=0,this._charsets=[]}return u.prototype.reset=function(){this.charset=void 0,this._charsets=[],this.glevel=0},u.prototype.setgLevel=function(l){this.glevel=l,this.charset=this._charsets[l]},u.prototype.setgCharset=function(l,a){this._charsets[l]=a,this.glevel===l&&(this.charset=a)},u}();o.CharsetService=s},1753:function(n,o,s){var u=this&&this.__decorate||function(m,f,v,Z){var b,G=arguments.length,S=G<3?f:Z===null?Z=Object.getOwnPropertyDescriptor(f,v):Z;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(m,f,v,Z);else for(var C=m.length-1;C>=0;C--)(b=m[C])&&(S=(G<3?b(S):G>3?b(f,v,S):b(f,v))||S);return G>3&&S&&Object.defineProperty(f,v,S),S},l=this&&this.__param||function(m,f){return function(v,Z){f(v,Z,m)}},a=this&&this.__values||function(m){var f=typeof Symbol=="function"&&Symbol.iterator,v=f&&m[f],Z=0;if(v)return v.call(m);if(m&&typeof m.length=="number")return{next:function(){return m&&Z>=m.length&&(m=void 0),{value:m&&m[Z++],done:!m}}};throw new TypeError(f?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(o,"__esModule",{value:!0}),o.CoreMouseService=void 0;var h=s(2585),p=s(8460),d={NONE:{events:0,restrict:function(){return!1}},X10:{events:1,restrict:function(m){return m.button!==4&&m.action===1&&(m.ctrl=!1,m.alt=!1,m.shift=!1,!0)}},VT200:{events:19,restrict:function(m){return m.action!==32}},DRAG:{events:23,restrict:function(m){return m.action!==32||m.button!==3}},ANY:{events:31,restrict:function(m){return!0}}};function c(m,f){var v=(m.ctrl?16:0)|(m.shift?4:0)|(m.alt?8:0);return m.button===4?(v|=64,v|=m.action):(v|=3&m.button,4&m.button&&(v|=64),8&m.button&&(v|=128),m.action===32?v|=32:m.action!==0||f||(v|=3)),v}var y=String.fromCharCode,_={DEFAULT:function(m){var f=[c(m,!1)+32,m.col+32,m.row+32];return f[0]>255||f[1]>255||f[2]>255?"":"\x1B[M"+y(f[0])+y(f[1])+y(f[2])},SGR:function(m){var f=m.action===0&&m.button!==4?"m":"M";return"\x1B[<"+c(m,!0)+";"+m.col+";"+m.row+f}},g=function(){function m(f,v){var Z,b,G,S;this._bufferService=f,this._coreService=v,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._onProtocolChange=new p.EventEmitter,this._lastEvent=null;try{for(var C=a(Object.keys(d)),R=C.next();!R.done;R=C.next()){var Y=R.value;this.addProtocol(Y,d[Y])}}catch(E){Z={error:E}}finally{try{R&&!R.done&&(b=C.return)&&b.call(C)}finally{if(Z)throw Z.error}}try{for(var I=a(Object.keys(_)),w=I.next();!w.done;w=I.next()){var F=w.value;this.addEncoding(F,_[F])}}catch(E){G={error:E}}finally{try{w&&!w.done&&(S=I.return)&&S.call(I)}finally{if(G)throw G.error}}this.reset()}return m.prototype.addProtocol=function(f,v){this._protocols[f]=v},m.prototype.addEncoding=function(f,v){this._encodings[f]=v},Object.defineProperty(m.prototype,"activeProtocol",{get:function(){return this._activeProtocol},set:function(f){if(!this._protocols[f])throw new Error('unknown protocol "'+f+'"');this._activeProtocol=f,this._onProtocolChange.fire(this._protocols[f].events)},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"areMouseEventsActive",{get:function(){return this._protocols[this._activeProtocol].events!==0},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"activeEncoding",{get:function(){return this._activeEncoding},set:function(f){if(!this._encodings[f])throw new Error('unknown encoding "'+f+'"');this._activeEncoding=f},enumerable:!1,configurable:!0}),m.prototype.reset=function(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null},Object.defineProperty(m.prototype,"onProtocolChange",{get:function(){return this._onProtocolChange.event},enumerable:!1,configurable:!0}),m.prototype.triggerMouseEvent=function(f){if(f.col<0||f.col>=this._bufferService.cols||f.row<0||f.row>=this._bufferService.rows||f.button===4&&f.action===32||f.button===3&&f.action!==32||f.button!==4&&(f.action===2||f.action===3)||(f.col++,f.row++,f.action===32&&this._lastEvent&&this._compareEvents(this._lastEvent,f))||!this._protocols[this._activeProtocol].restrict(f))return!1;var v=this._encodings[this._activeEncoding](f);return v&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(v):this._coreService.triggerDataEvent(v,!0)),this._lastEvent=f,!0},m.prototype.explainEvents=function(f){return{down:!!(1&f),up:!!(2&f),drag:!!(4&f),move:!!(8&f),wheel:!!(16&f)}},m.prototype._compareEvents=function(f,v){return f.col===v.col&&f.row===v.row&&f.button===v.button&&f.action===v.action&&f.ctrl===v.ctrl&&f.alt===v.alt&&f.shift===v.shift},u([l(0,h.IBufferService),l(1,h.ICoreService)],m)}();o.CoreMouseService=g},6975:function(n,o,s){var u,l=this&&this.__extends||(u=function(f,v){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Z,b){Z.__proto__=b}||function(Z,b){for(var G in b)Object.prototype.hasOwnProperty.call(b,G)&&(Z[G]=b[G])},u(f,v)},function(f,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");function Z(){this.constructor=f}u(f,v),f.prototype=v===null?Object.create(v):(Z.prototype=v.prototype,new Z)}),a=this&&this.__decorate||function(f,v,Z,b){var G,S=arguments.length,C=S<3?v:b===null?b=Object.getOwnPropertyDescriptor(v,Z):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(f,v,Z,b);else for(var R=f.length-1;R>=0;R--)(G=f[R])&&(C=(S<3?G(C):S>3?G(v,Z,C):G(v,Z))||C);return S>3&&C&&Object.defineProperty(v,Z,C),C},h=this&&this.__param||function(f,v){return function(Z,b){v(Z,b,f)}};Object.defineProperty(o,"__esModule",{value:!0}),o.CoreService=void 0;var p=s(2585),d=s(8460),c=s(1439),y=s(844),_=Object.freeze({insertMode:!1}),g=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0}),m=function(f){function v(Z,b,G,S){var C=f.call(this)||this;return C._bufferService=b,C._logService=G,C._optionsService=S,C.isCursorInitialized=!1,C.isCursorHidden=!1,C._onData=C.register(new d.EventEmitter),C._onUserInput=C.register(new d.EventEmitter),C._onBinary=C.register(new d.EventEmitter),C._scrollToBottom=Z,C.register({dispose:function(){return C._scrollToBottom=void 0}}),C.modes=(0,c.clone)(_),C.decPrivateModes=(0,c.clone)(g),C}return l(v,f),Object.defineProperty(v.prototype,"onData",{get:function(){return this._onData.event},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"onUserInput",{get:function(){return this._onUserInput.event},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"onBinary",{get:function(){return this._onBinary.event},enumerable:!1,configurable:!0}),v.prototype.reset=function(){this.modes=(0,c.clone)(_),this.decPrivateModes=(0,c.clone)(g)},v.prototype.triggerDataEvent=function(Z,b){if(b===void 0&&(b=!1),!this._optionsService.rawOptions.disableStdin){var G=this._bufferService.buffer;G.ybase!==G.ydisp&&this._scrollToBottom(),b&&this._onUserInput.fire(),this._logService.debug('sending data "'+Z+'"',function(){return Z.split("").map(function(S){return S.charCodeAt(0)})}),this._onData.fire(Z)}},v.prototype.triggerBinaryEvent=function(Z){this._optionsService.rawOptions.disableStdin||(this._logService.debug('sending binary "'+Z+'"',function(){return Z.split("").map(function(b){return b.charCodeAt(0)})}),this._onBinary.fire(Z))},a([h(1,p.IBufferService),h(2,p.ILogService),h(3,p.IOptionsService)],v)}(y.Disposable);o.CoreService=m},9074:function(n,o,s){var u,l=this&&this.__extends||(u=function(m,f){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,Z){v.__proto__=Z}||function(v,Z){for(var b in Z)Object.prototype.hasOwnProperty.call(Z,b)&&(v[b]=Z[b])},u(m,f)},function(m,f){if(typeof f!="function"&&f!==null)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");function v(){this.constructor=m}u(m,f),m.prototype=f===null?Object.create(f):(v.prototype=f.prototype,new v)}),a=this&&this.__generator||function(m,f){var v,Z,b,G,S={label:0,sent:function(){if(1&b[0])throw b[1];return b[1]},trys:[],ops:[]};return G={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(G[Symbol.iterator]=function(){return this}),G;function C(R){return function(Y){return function(I){if(v)throw new TypeError("Generator is already executing.");for(;S;)try{if(v=1,Z&&(b=2&I[0]?Z.return:I[0]?Z.throw||((b=Z.return)&&b.call(Z),0):Z.next)&&!(b=b.call(Z,I[1])).done)return b;switch(Z=0,b&&(I=[2&I[0],b.value]),I[0]){case 0:case 1:b=I;break;case 4:return S.label++,{value:I[1],done:!1};case 5:S.label++,Z=I[1],I=[0];continue;case 7:I=S.ops.pop(),S.trys.pop();continue;default:if(!((b=(b=S.trys).length>0&&b[b.length-1])||I[0]!==6&&I[0]!==2)){S=0;continue}if(I[0]===3&&(!b||I[1]>b[0]&&I[1]<b[3])){S.label=I[1];break}if(I[0]===6&&S.label<b[1]){S.label=b[1],b=I;break}if(b&&S.label<b[2]){S.label=b[2],S.ops.push(I);break}b[2]&&S.ops.pop(),S.trys.pop();continue}I=f.call(m,S)}catch(w){I=[6,w],Z=0}finally{v=b=0}if(5&I[0])throw I[1];return{value:I[0]?I[1]:void 0,done:!0}}([R,Y])}}},h=this&&this.__values||function(m){var f=typeof Symbol=="function"&&Symbol.iterator,v=f&&m[f],Z=0;if(v)return v.call(m);if(m&&typeof m.length=="number")return{next:function(){return m&&Z>=m.length&&(m=void 0),{value:m&&m[Z++],done:!m}}};throw new TypeError(f?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(o,"__esModule",{value:!0}),o.DecorationService=void 0;var p=s(8055),d=s(8460),c=s(844),y=s(6106),_=function(m){function f(){var v=m.call(this)||this;return v._decorations=new y.SortedList(function(Z){return Z.marker.line}),v._onDecorationRegistered=v.register(new d.EventEmitter),v._onDecorationRemoved=v.register(new d.EventEmitter),v}return l(f,m),Object.defineProperty(f.prototype,"onDecorationRegistered",{get:function(){return this._onDecorationRegistered.event},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"onDecorationRemoved",{get:function(){return this._onDecorationRemoved.event},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"decorations",{get:function(){return this._decorations.values()},enumerable:!1,configurable:!0}),f.prototype.registerDecoration=function(v){var Z=this;if(!v.marker.isDisposed){var b=new g(v);if(b){var G=b.marker.onDispose(function(){return b.dispose()});b.onDispose(function(){b&&(Z._decorations.delete(b)&&Z._onDecorationRemoved.fire(b),G.dispose())}),this._decorations.insert(b),this._onDecorationRegistered.fire(b)}return b}},f.prototype.reset=function(){var v,Z;try{for(var b=h(this._decorations.values()),G=b.next();!G.done;G=b.next())G.value.dispose()}catch(S){v={error:S}}finally{try{G&&!G.done&&(Z=b.return)&&Z.call(b)}finally{if(v)throw v.error}}this._decorations.clear()},f.prototype.getDecorationsAtLine=function(v){return a(this,function(Z){return[2,this._decorations.getKeyIterator(v)]})},f.prototype.getDecorationsAtCell=function(v,Z,b){var G,S,C,R,Y,I,w,F,E,N,L;return a(this,function(K){switch(K.label){case 0:G=0,S=0,K.label=1;case 1:K.trys.push([1,6,7,8]),C=h(this._decorations.getKeyIterator(Z)),R=C.next(),K.label=2;case 2:return R.done?[3,5]:(Y=R.value,G=(E=Y.options.x)!==null&&E!==void 0?E:0,S=G+((N=Y.options.width)!==null&&N!==void 0?N:1),!(v>=G&&v<S)||b&&((L=Y.options.layer)!==null&&L!==void 0?L:"bottom")!==b?[3,4]:[4,Y]);case 3:K.sent(),K.label=4;case 4:return R=C.next(),[3,2];case 5:return[3,8];case 6:return I=K.sent(),w={error:I},[3,8];case 7:try{R&&!R.done&&(F=C.return)&&F.call(C)}finally{if(w)throw w.error}return[7];case 8:return[2]}})},f.prototype.dispose=function(){var v,Z;try{for(var b=h(this._decorations.values()),G=b.next();!G.done;G=b.next()){var S=G.value;this._onDecorationRemoved.fire(S)}}catch(C){v={error:C}}finally{try{G&&!G.done&&(Z=b.return)&&Z.call(b)}finally{if(v)throw v.error}}this.reset()},f}(c.Disposable);o.DecorationService=_;var g=function(m){function f(v){var Z=m.call(this)||this;return Z.options=v,Z.isDisposed=!1,Z.onRenderEmitter=Z.register(new d.EventEmitter),Z.onRender=Z.onRenderEmitter.event,Z._onDispose=Z.register(new d.EventEmitter),Z.onDispose=Z._onDispose.event,Z._cachedBg=null,Z._cachedFg=null,Z.marker=v.marker,Z.options.overviewRulerOptions&&!Z.options.overviewRulerOptions.position&&(Z.options.overviewRulerOptions.position="full"),Z}return l(f,m),Object.defineProperty(f.prototype,"backgroundColorRGB",{get:function(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=p.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"foregroundColorRGB",{get:function(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=p.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg},enumerable:!1,configurable:!0}),f.prototype.dispose=function(){this._isDisposed||(this._isDisposed=!0,this._onDispose.fire(),m.prototype.dispose.call(this))},f}(c.Disposable)},3730:function(n,o,s){var u=this&&this.__decorate||function(p,d,c,y){var _,g=arguments.length,m=g<3?d:y===null?y=Object.getOwnPropertyDescriptor(d,c):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(p,d,c,y);else for(var f=p.length-1;f>=0;f--)(_=p[f])&&(m=(g<3?_(m):g>3?_(d,c,m):_(d,c))||m);return g>3&&m&&Object.defineProperty(d,c,m),m},l=this&&this.__param||function(p,d){return function(c,y){d(c,y,p)}};Object.defineProperty(o,"__esModule",{value:!0}),o.DirtyRowService=void 0;var a=s(2585),h=function(){function p(d){this._bufferService=d,this.clearRange()}return Object.defineProperty(p.prototype,"start",{get:function(){return this._start},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"end",{get:function(){return this._end},enumerable:!1,configurable:!0}),p.prototype.clearRange=function(){this._start=this._bufferService.buffer.y,this._end=this._bufferService.buffer.y},p.prototype.markDirty=function(d){d<this._start?this._start=d:d>this._end&&(this._end=d)},p.prototype.markRangeDirty=function(d,c){if(d>c){var y=d;d=c,c=y}d<this._start&&(this._start=d),c>this._end&&(this._end=c)},p.prototype.markAllDirty=function(){this.markRangeDirty(0,this._bufferService.rows-1)},u([l(0,a.IBufferService)],p)}();o.DirtyRowService=h},4348:function(n,o,s){var u=this&&this.__values||function(y){var _=typeof Symbol=="function"&&Symbol.iterator,g=_&&y[_],m=0;if(g)return g.call(y);if(y&&typeof y.length=="number")return{next:function(){return y&&m>=y.length&&(y=void 0),{value:y&&y[m++],done:!y}}};throw new TypeError(_?"Object is not iterable.":"Symbol.iterator is not defined.")},l=this&&this.__read||function(y,_){var g=typeof Symbol=="function"&&y[Symbol.iterator];if(!g)return y;var m,f,v=g.call(y),Z=[];try{for(;(_===void 0||_-- >0)&&!(m=v.next()).done;)Z.push(m.value)}catch(b){f={error:b}}finally{try{m&&!m.done&&(g=v.return)&&g.call(v)}finally{if(f)throw f.error}}return Z},a=this&&this.__spreadArray||function(y,_,g){if(g||arguments.length===2)for(var m,f=0,v=_.length;f<v;f++)!m&&f in _||(m||(m=Array.prototype.slice.call(_,0,f)),m[f]=_[f]);return y.concat(m||Array.prototype.slice.call(_))};Object.defineProperty(o,"__esModule",{value:!0}),o.InstantiationService=o.ServiceCollection=void 0;var h=s(2585),p=s(8343),d=function(){function y(){for(var _,g,m=[],f=0;f<arguments.length;f++)m[f]=arguments[f];this._entries=new Map;try{for(var v=u(m),Z=v.next();!Z.done;Z=v.next()){var b=l(Z.value,2),G=b[0],S=b[1];this.set(G,S)}}catch(C){_={error:C}}finally{try{Z&&!Z.done&&(g=v.return)&&g.call(v)}finally{if(_)throw _.error}}}return y.prototype.set=function(_,g){var m=this._entries.get(_);return this._entries.set(_,g),m},y.prototype.forEach=function(_){this._entries.forEach(function(g,m){return _(m,g)})},y.prototype.has=function(_){return this._entries.has(_)},y.prototype.get=function(_){return this._entries.get(_)},y}();o.ServiceCollection=d;var c=function(){function y(){this._services=new d,this._services.set(h.IInstantiationService,this)}return y.prototype.setService=function(_,g){this._services.set(_,g)},y.prototype.getService=function(_){return this._services.get(_)},y.prototype.createInstance=function(_){for(var g,m,f=[],v=1;v<arguments.length;v++)f[v-1]=arguments[v];var Z=(0,p.getServiceDependencies)(_).sort(function(I,w){return I.index-w.index}),b=[];try{for(var G=u(Z),S=G.next();!S.done;S=G.next()){var C=S.value,R=this._services.get(C.id);if(!R)throw new Error("[createInstance] "+_.name+" depends on UNKNOWN service "+C.id+".");b.push(R)}}catch(I){g={error:I}}finally{try{S&&!S.done&&(m=G.return)&&m.call(G)}finally{if(g)throw g.error}}var Y=Z.length>0?Z[0].index:f.length;if(f.length!==Y)throw new Error("[createInstance] First service dependency of "+_.name+" at position "+(Y+1)+" conflicts with "+f.length+" static arguments");return new(_.bind.apply(_,a([void 0],l(a(a([],l(f),!1),l(b),!1)),!1)))},y}();o.InstantiationService=c},7866:function(n,o,s){var u=this&&this.__decorate||function(y,_,g,m){var f,v=arguments.length,Z=v<3?_:m===null?m=Object.getOwnPropertyDescriptor(_,g):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Z=Reflect.decorate(y,_,g,m);else for(var b=y.length-1;b>=0;b--)(f=y[b])&&(Z=(v<3?f(Z):v>3?f(_,g,Z):f(_,g))||Z);return v>3&&Z&&Object.defineProperty(_,g,Z),Z},l=this&&this.__param||function(y,_){return function(g,m){_(g,m,y)}},a=this&&this.__read||function(y,_){var g=typeof Symbol=="function"&&y[Symbol.iterator];if(!g)return y;var m,f,v=g.call(y),Z=[];try{for(;(_===void 0||_-- >0)&&!(m=v.next()).done;)Z.push(m.value)}catch(b){f={error:b}}finally{try{m&&!m.done&&(g=v.return)&&g.call(v)}finally{if(f)throw f.error}}return Z},h=this&&this.__spreadArray||function(y,_,g){if(g||arguments.length===2)for(var m,f=0,v=_.length;f<v;f++)!m&&f in _||(m||(m=Array.prototype.slice.call(_,0,f)),m[f]=_[f]);return y.concat(m||Array.prototype.slice.call(_))};Object.defineProperty(o,"__esModule",{value:!0}),o.LogService=void 0;var p=s(2585),d={debug:p.LogLevelEnum.DEBUG,info:p.LogLevelEnum.INFO,warn:p.LogLevelEnum.WARN,error:p.LogLevelEnum.ERROR,off:p.LogLevelEnum.OFF},c=function(){function y(_){var g=this;this._optionsService=_,this.logLevel=p.LogLevelEnum.OFF,this._updateLogLevel(),this._optionsService.onOptionChange(function(m){m==="logLevel"&&g._updateLogLevel()})}return y.prototype._updateLogLevel=function(){this.logLevel=d[this._optionsService.rawOptions.logLevel]},y.prototype._evalLazyOptionalParams=function(_){for(var g=0;g<_.length;g++)typeof _[g]=="function"&&(_[g]=_[g]())},y.prototype._log=function(_,g,m){this._evalLazyOptionalParams(m),_.call.apply(_,h([console,"xterm.js: "+g],a(m),!1))},y.prototype.debug=function(_){for(var g=[],m=1;m<arguments.length;m++)g[m-1]=arguments[m];this.logLevel<=p.LogLevelEnum.DEBUG&&this._log(console.log,_,g)},y.prototype.info=function(_){for(var g=[],m=1;m<arguments.length;m++)g[m-1]=arguments[m];this.logLevel<=p.LogLevelEnum.INFO&&this._log(console.info,_,g)},y.prototype.warn=function(_){for(var g=[],m=1;m<arguments.length;m++)g[m-1]=arguments[m];this.logLevel<=p.LogLevelEnum.WARN&&this._log(console.warn,_,g)},y.prototype.error=function(_){for(var g=[],m=1;m<arguments.length;m++)g[m-1]=arguments[m];this.logLevel<=p.LogLevelEnum.ERROR&&this._log(console.error,_,g)},u([l(0,p.IOptionsService)],y)}();o.LogService=c},7302:function(n,o,s){var u=this&&this.__assign||function(){return u=Object.assign||function(d){for(var c,y=1,_=arguments.length;y<_;y++)for(var g in c=arguments[y])Object.prototype.hasOwnProperty.call(c,g)&&(d[g]=c[g]);return d},u.apply(this,arguments)};Object.defineProperty(o,"__esModule",{value:!0}),o.OptionsService=o.DEFAULT_OPTIONS=o.DEFAULT_BELL_SOUND=void 0;var l=s(8460),a=s(6114);o.DEFAULT_BELL_SOUND="data:audio/mp3;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjMyLjEwNAAAAAAAAAAAAAAA//tQxAADB8AhSmxhIIEVCSiJrDCQBTcu3UrAIwUdkRgQbFAZC1CQEwTJ9mjRvBA4UOLD8nKVOWfh+UlK3z/177OXrfOdKl7pyn3Xf//WreyTRUoAWgBgkOAGbZHBgG1OF6zM82DWbZaUmMBptgQhGjsyYqc9ae9XFz280948NMBWInljyzsNRFLPWdnZGWrddDsjK1unuSrVN9jJsK8KuQtQCtMBjCEtImISdNKJOopIpBFpNSMbIHCSRpRR5iakjTiyzLhchUUBwCgyKiweBv/7UsQbg8isVNoMPMjAAAA0gAAABEVFGmgqK////9bP/6XCykxBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq",o.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,customGlyphs:!0,bellSound:o.DEFAULT_BELL_SOUND,bellStyle:"none",drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",lineHeight:1,linkTooltipHoverDuration:500,letterSpacing:0,logLevel:"info",scrollback:1e3,scrollSensitivity:1,screenReaderMode:!1,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!0,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:a.isMac,rendererType:"canvas",windowOptions:{},windowsMode:!1,wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:void 0};var h=["normal","bold","100","200","300","400","500","600","700","800","900"],p=function(){function d(c){this._onOptionChange=new l.EventEmitter;var y=u({},o.DEFAULT_OPTIONS);for(var _ in c)if(_ in y)try{var g=c[_];y[_]=this._sanitizeAndValidateOption(_,g)}catch(m){console.error(m)}this.rawOptions=y,this.options=u({},y),this._setupOptions()}return Object.defineProperty(d.prototype,"onOptionChange",{get:function(){return this._onOptionChange.event},enumerable:!1,configurable:!0}),d.prototype._setupOptions=function(){var c=this,y=function(f){if(!(f in o.DEFAULT_OPTIONS))throw new Error('No option with key "'+f+'"');return c.rawOptions[f]},_=function(f,v){if(!(f in o.DEFAULT_OPTIONS))throw new Error('No option with key "'+f+'"');v=c._sanitizeAndValidateOption(f,v),c.rawOptions[f]!==v&&(c.rawOptions[f]=v,c._onOptionChange.fire(f))};for(var g in this.rawOptions){var m={get:y.bind(this,g),set:_.bind(this,g)};Object.defineProperty(this.options,g,m)}},d.prototype.setOption=function(c,y){this.options[c]=y},d.prototype._sanitizeAndValidateOption=function(c,y){switch(c){case"bellStyle":case"cursorStyle":case"rendererType":case"wordSeparator":y||(y=o.DEFAULT_OPTIONS[c]);break;case"fontWeight":case"fontWeightBold":if(typeof y=="number"&&1<=y&&y<=1e3)break;y=h.includes(y)?y:o.DEFAULT_OPTIONS[c];break;case"cursorWidth":y=Math.floor(y);case"lineHeight":case"tabStopWidth":if(y<1)throw new Error(c+" cannot be less than 1, value: "+y);break;case"minimumContrastRatio":y=Math.max(1,Math.min(21,Math.round(10*y)/10));break;case"scrollback":if((y=Math.min(y,4294967295))<0)throw new Error(c+" cannot be less than 0, value: "+y);break;case"fastScrollSensitivity":case"scrollSensitivity":if(y<=0)throw new Error(c+" cannot be less than or equal to 0, value: "+y);case"rows":case"cols":if(!y&&y!==0)throw new Error(c+" must be numeric, value: "+y)}return y},d.prototype.getOption=function(c){return this.options[c]},d}();o.OptionsService=p},8343:(n,o)=>{function s(u,l,a){l.di$target===l?l.di$dependencies.push({id:u,index:a}):(l.di$dependencies=[{id:u,index:a}],l.di$target=l)}Object.defineProperty(o,"__esModule",{value:!0}),o.createDecorator=o.getServiceDependencies=o.serviceRegistry=void 0,o.serviceRegistry=new Map,o.getServiceDependencies=function(u){return u.di$dependencies||[]},o.createDecorator=function(u){if(o.serviceRegistry.has(u))return o.serviceRegistry.get(u);var l=function(a,h,p){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");s(l,a,p)};return l.toString=function(){return u},o.serviceRegistry.set(u,l),l}},2585:(n,o,s)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.IDecorationService=o.IUnicodeService=o.IOptionsService=o.ILogService=o.LogLevelEnum=o.IInstantiationService=o.IDirtyRowService=o.ICharsetService=o.ICoreService=o.ICoreMouseService=o.IBufferService=void 0;var u,l=s(8343);o.IBufferService=(0,l.createDecorator)("BufferService"),o.ICoreMouseService=(0,l.createDecorator)("CoreMouseService"),o.ICoreService=(0,l.createDecorator)("CoreService"),o.ICharsetService=(0,l.createDecorator)("CharsetService"),o.IDirtyRowService=(0,l.createDecorator)("DirtyRowService"),o.IInstantiationService=(0,l.createDecorator)("InstantiationService"),(u=o.LogLevelEnum||(o.LogLevelEnum={}))[u.DEBUG=0]="DEBUG",u[u.INFO=1]="INFO",u[u.WARN=2]="WARN",u[u.ERROR=3]="ERROR",u[u.OFF=4]="OFF",o.ILogService=(0,l.createDecorator)("LogService"),o.IOptionsService=(0,l.createDecorator)("OptionsService"),o.IUnicodeService=(0,l.createDecorator)("UnicodeService"),o.IDecorationService=(0,l.createDecorator)("DecorationService")},1480:(n,o,s)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.UnicodeService=void 0;var u=s(8460),l=s(225),a=function(){function h(){this._providers=Object.create(null),this._active="",this._onChange=new u.EventEmitter;var p=new l.UnicodeV6;this.register(p),this._active=p.version,this._activeProvider=p}return Object.defineProperty(h.prototype,"onChange",{get:function(){return this._onChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"versions",{get:function(){return Object.keys(this._providers)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"activeVersion",{get:function(){return this._active},set:function(p){if(!this._providers[p])throw new Error('unknown Unicode version "'+p+'"');this._active=p,this._activeProvider=this._providers[p],this._onChange.fire(p)},enumerable:!1,configurable:!0}),h.prototype.register=function(p){this._providers[p.version]=p},h.prototype.wcwidth=function(p){return this._activeProvider.wcwidth(p)},h.prototype.getStringCellWidth=function(p){for(var d=0,c=p.length,y=0;y<c;++y){var _=p.charCodeAt(y);if(55296<=_&&_<=56319){if(++y>=c)return d+this.wcwidth(_);var g=p.charCodeAt(y);56320<=g&&g<=57343?_=1024*(_-55296)+g-56320+65536:d+=this.wcwidth(g)}d+=this.wcwidth(_)}return d},h}();o.UnicodeService=a}},r={};return function n(o){var s=r[o];if(s!==void 0)return s.exports;var u=r[o]={exports:{}};return i[o].call(u.exports,u,u.exports,n),u.exports}(4389)})()})})(zS);function AS(){const e=async({args:r})=>{console.log("loading wasm file");const o=await(await fetch("./datafusion-cli.wasm")).arrayBuffer();return console.log(o.byteLength),new Uint8Array(o)};var t=!1,i=new SharedArrayBuffer(8*1024);return new OS({fetchCommand:e}),ms.useEffect(()=>{if(t)return;t=!0;const r=new Eh.Terminal({convertEol:!0,altClickMovesCursor:!1});r.resize(80,40),r.onData(async o=>{o==="\r"&&(o=`
`),r.write(o);const s=new DataView(i);for(;s.getInt32(0)!==0;)await new Promise(a=>setTimeout(a,0));const u=new TextEncoder().encode(o);new Uint8Array(i,4).set(u),s.setInt32(0,u.byteLength),Atomics.notify(new Int32Array(i),0)}),r.onKey(o=>{}),r.open(document.getElementById("terminal")),new DS("https://static-dispatch.s3.ap-northeast-1.amazonaws.com/datafusion-cli.wasm",i,{args:["datafusion-cli"],env:{},stdout:o=>r.write(o),stderr:o=>r.write(o),fs:{}}).start().then(()=>{console.log("Exit"),r.write("Exit")})}),Hl(Y1,{children:[Si("link",{rel:"stylesheet",type:"text/css",href:"./node_modules/xterm/css/xterm.css"}),Hl("div",{className:"min-h-full",children:[Si("header",{className:"bg-white shadow text-5xl",children:Si("div",{className:"mx-auto max-w-7xl py-6 px-4 sm:px-6 lg:px-8",children:Si("h1",{className:"text-5xl font-bold tracking-tight text-gray-900",children:"DataFusion Playground"})})}),Hl("div",{className:"explain",children:[Hl("p",{children:["Playground of ",Si("a",{href:"www.google.com",children:"Apache Arrow DataFusion"}),". In a early experimental stage as my side project."]}),Si("p",{children:`It might take a while to load the wasm file. I don't find a appropriate CDN for it. You'll see "starting!" when it's ready.`}),Si("p",{children:"Known bug: backspace doesn't work, and error message won't display."})]}),Si("main",{children:Si("div",{className:"mx-auto max-w-7xl py-6 sm:px-6 lg:px-8",children:Si("div",{className:"wasm-terminal",id:"terminal"})})})]})]})}Gu.createRoot(document.getElementById("root")).render(Si(_1.StrictMode,{children:Si(AS,{})}));
